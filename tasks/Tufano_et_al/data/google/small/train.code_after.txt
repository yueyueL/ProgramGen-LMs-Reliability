public void projectAccess ( final com.google.gerrit.reviewdb.client.Project.NameKey projectName , final com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.ProjectAccess > callback ) { projectAccessFactory.create ( projectName ) . to ( callback ) ; }
public boolean isVisible ( ) { if ( ( isVisible ) == null ) { isVisible = ( ( ( getCurrentUser ( ) ) instanceof com.google.gerrit.server.InternalUser ) || ( canPerform ( Permission.READ ) ) ) && ( canRead ( ) ) ; } return isVisible ; }
public java.lang.Iterable < com.google.gerrit.client.data.EditList.Hunk > getHunks ( ) { return new com.google.gerrit.client.data.EditList ( edits , getContext ( ) , a.size ( ) , b.size ( ) ) . getHunks ( ) ; }
public static void setTimeForTesting ( ) { com.google.gerrit.testutil.TestTimeUtil.resetWithClockStep ( 1 , java.util.concurrent.TimeUnit.SECONDS ) ; }
private static com.google.gerrit.server.index.Schema < com.google.gerrit.server.query.change.ChangeData > schema ( @ com.google.gerrit.common.Nullable com.google.gerrit.server.index.IndexCollection indexes ) { com.google.gerrit.server.index.change.ChangeIndex index = ( indexes != null ) ? indexes.getSearchIndex ( ) : null ; return index != null ? index.getSchema ( ) : null ; }
public boolean containsCommentPublished ( com.google.gerrit.reviewdb.client.Comment c ) { for ( com.google.gerrit.reviewdb.client.Comment l : getComments ( ) . values ( ) ) { if ( c.key.equals ( l.key ) ) { return true ; } } return false ; }
protected abstract void doDelete ( java.lang.Iterable < E > instances ) throws com.google.gwtorm.client.OrmException ;
public void onHistoryChanged ( final java.lang.String token ) { final com.google.gerrit.client.ui.Screen s = select ( token ) ; if ( s != null ) { com.google.gerrit.client.Gerrit.display ( s ) ; } else { } }
public void notSticky ( ) throws java.lang.Exception { assertNotSticky ( java.util.EnumSet.of ( com.google.gerrit.extensions.client.ChangeKind.REWORK , com.google.gerrit.extensions.client.ChangeKind.TRIVIAL_REBASE , com.google.gerrit.extensions.client.ChangeKind.NO_CODE_CHANGE , com.google.gerrit.extensions.client.ChangeKind.MERGE_FIRST_PARENT_UPDATE , com.google.gerrit.extensions.client.ChangeKind.NO_CHANGE ) ) ; }
private com.ericsson.gerrit.plugins.highavailability.peers.PeerInfo getPeerInfo ( ) throws com.ericsson.gerrit.plugins.highavailability.forwarder.rest.PeerInfoNotAvailableException { com.ericsson.gerrit.plugins.highavailability.peers.PeerInfo info = peerInfo.get ( ) . orNull ( ) ; if ( info == null ) { throw new com.ericsson.gerrit.plugins.highavailability.forwarder.rest.PeerInfoNotAvailableException ( ) ; } return info ; }
private void decodeApprovals ( com.google.common.collect.Multimap < java.lang.String , org.apache.lucene.index.IndexableField > doc , com.google.gerrit.server.query.change.ChangeData cd ) { cd.setCurrentApprovals ( com.google.gerrit.lucene.LuceneChangeIndex.decodeProtos ( doc , com.google.gerrit.lucene.LuceneChangeIndex.APPROVAL_FIELD , PatchSetApprovalProtoField.CODEC ) ) ; }
public void removeHandler ( ) { state.remove ( appKey ) ; }
public long getHead ( ) throws java.io.IOException { return stores.head.spinGet ( com.googlesource.gerrit.plugins.events.fsstore.FsStore.MAX_GET_SPINS ) ; }
protected void fireGitRefUpdatedEvent ( org.eclipse.jgit.lib.RefUpdate ru ) { gitRefUpdated.fire ( projectName , ru , ( ( author ) == null ? null : author.state ( ) ) ) ; }
void removeGutter ( com.google.gerrit.client.diff.OverviewBar.GutterWrapper wrapper ) { gutters.remove ( wrapper ) ; }
public java.util.Collection < com.google.gerrit.reviewdb.client.PatchLineComment > comments ( ) throws com.google.gwtorm.server.OrmException { if ( ( comments ) == null ) { comments = plcUtil.byChange ( db , notes ( ) ) ; } return comments ; }
public void setSideA ( com.google.gerrit.reviewdb.PatchSet.Id patchSetId ) { idSideA = patchSetId ; com.google.gerrit.client.patches.PatchScreen.diffSideA = patchSetId ; if ( ( fileList ) != null ) { fileList.setPatchSetIdToCompareWith ( patchSetId ) ; } }
private com.google.gerrit.server.IdentifiedUser createUser ( final com.google.gerrit.sshd.SshSession sd , final com.google.gerrit.sshd.SshKeyCacheEntry key ) { return userFactory.create ( sd.getRemoteAddress ( ) , key.getAccount ( ) ) ; }
void addMessage ( final java.lang.String token ) { message = token.replace ( "_" , " " ) ; }
public void afterUpdateRefs ( ) throws com.google.gerrit.extensions.restapi.ResourceConflictException { if ( failAfterRefUpdates ) { throw new com.google.gerrit.extensions.restapi.ResourceConflictException ( "Failing after ref updates" ) ; } }
public com.google.gerrit.extensions.client.SubmitType submitType ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return getSubmitType.apply ( revision ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot get submit type" , e ) ; } }
public void testInvalidSchemeInReplace ( ) { exception.expect ( java.lang.IllegalArgumentException.class ) ; new com.google.gwtexpui.safehtml.client.LinkFindReplace ( "find" , "javascript:alert(1)" ) . replace ( "find" ) ; }
private void assertDeleteSucceeds ( ) throws java.lang.Exception { branch ( ) . delete ( ) ; exception.expect ( com.google.gerrit.extensions.restapi.ResourceNotFoundException.class ) ; branch ( ) . get ( ) ; }
public void display ( com.google.gerrit.client.dashboards.DashboardList dashes ) { display ( dashes.asList ( ) ) ; }
private void assertMigratedCleanly ( com.google.gerrit.server.group.db.GroupBundle noteDbBundle , com.google.gerrit.server.group.db.GroupBundle expectedReviewDbBundle ) { com.google.common.truth.Truth.assertThat ( com.google.gerrit.server.group.db.GroupBundle.compareWithAudits ( expectedReviewDbBundle , noteDbBundle ) ) . isEmpty ( ) ; }
public com.google.common.collect.ImmutableSortedSet < com.google.gerrit.reviewdb.client.Project.NameKey > byName ( java.lang.String prefix ) { return com.google.common.collect.ImmutableSortedSet.of ( ) ; }
public void putRobotComment ( com.google.gerrit.reviewdb.client.RobotComment c ) { verifyComment ( c ) ; createRobotCommentUpdateIfNull ( ) ; robotCommentUpdate.putComment ( c ) ; }
public void onSuccess ( com.google.gerrit.client.changes.ChangeInfo result ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.client.Dispatcher.toEditScreen ( new com.google.gerrit.reviewdb.client.PatchSet.Id ( result.legacyId ( ) , 1 ) , "project.config" ) ) ; }
private java.util.List < org.eclipse.jgit.revwalk.RevCommit > createChanges ( int n , java.lang.String refsFor ) throws java.lang.Exception { return createChanges ( n , refsFor , com.google.common.collect.ImmutableList.< java.lang.String > of ( ) ) ; }
private org.eclipse.jgit.revwalk.RevCommit writeCommit ( java.lang.String body ) throws java.lang.Exception { return writeCommit ( body , noteUtil.newIdent ( changeOwner.getAccount ( ) , com.google.gerrit.common.TimeUtil.nowTs ( ) , serverIdent , "Anonymous Coward" ) ) ; }
private boolean search ( java.lang.Iterable < com.google.gerrit.reviewdb.client.AccountGroup.UUID > ids ) { return user.getEffectiveGroups ( ) . containsAnyOf ( ids ) ; }
protected long nextLong ( final java.lang.String poolName ) throws com.google.gwtorm.client.OrmException { return getDialect ( ) . nextLong ( getConnection ( ) , poolName ) ; }
public void selfRevokedKeyIsRevoked ( ) throws java.lang.Exception { assertProblems ( com.google.gerrit.gpg.testutil.TestKeys.selfRevokedKey ( ) , "Key is revoked" ) ; }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > evictAsync ( com.google.gerrit.reviewdb.Account.Id accountId ) { return byId.removeAsync ( accountId ) ; }
public void visit ( org.commonmark.node.StrongEmphasis node ) { wrapChildren ( "strong" , node ) ; }
public boolean isStatisticsEnabled ( ) { return self ( ) . isStatisticsEnabled ( ) ; }
public boolean isEnabled ( ) { return getEnabledCondition ( ) . value ( ) ; }
public final native boolean inherited_value ( ) ;
private AccountGroup.UUID groupUuid ( java.lang.String groupName ) { return groupCache.get ( new com.google.gerrit.reviewdb.client.AccountGroup.NameKey ( groupName ) ) . orElse ( null ) . getGroupUUID ( ) ; }
com.google.gitiles.doc.Navbar setConfig ( com.google.gitiles.doc.MarkdownConfig cfg ) { this . cfg = cfg ; return this ; }
public int compare ( com.google.gerrit.client.info.GroupInfo a , com.google.gerrit.client.info.GroupInfo b ) { return a.name ( ) . compareTo ( b.name ( ) ) ; }
public void run ( ) { getCommentGroup ( ) . resize ( ) ; }
void onReply ( com.google.gwt.event.dom.client.ClickEvent e ) { e.stopPropagation ( ) ; doReply ( ) ; }
public org.apache.sshd.common.file.SshFile getFile ( java.lang.String file ) { return null ; }
public void testEndsBeforeNewline ( ) { com.google.gerrit.client.diff.EditIterator iter = new com.google.gerrit.client.diff.EditIterator ( lines , 0 ) ; assertLineChsEqual ( net.codemirror.lib.Pos.create ( 0 , 3 ) , iter.advance ( 3 ) ) ; }
public static final native net.codemirror.lib.KeyMap cloneKeyMap ( java.lang.String name ) ;
private void testUserNotPresent ( ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( gApi.accounts ( ) . query ( "sandboxuser" ) . get ( ) ) . isEmpty ( ) ; }
public com.google.common.collect.ImmutableSet < com.google.gerrit.reviewdb.client.Account.Id > getPastAssignees ( ) { return state.pastAssignees ( ) ; }
public void listNonExistingGroupIncludes_NotFound ( ) throws java.lang.Exception { java.lang.String name = name ( "non-existing" ) ; com.google.common.truth.Truth.assertThat ( adminSession.get ( ( ( "/groups/" + name ) + "/groups/" ) ) . getStatusCode ( ) ) . isEqualTo ( HttpStatus.SC_NOT_FOUND ) ; }
protected void configure ( ) { listener ( ) . to ( LocalDiskRepositoryManager.Lifecycle.class ) ; listener ( ) . to ( CachePool.Lifecycle.class ) ; listener ( ) . to ( WorkQueue.Lifecycle.class ) ; }
protected void configureServlets ( ) { filter ( "/*" ) . through ( com.googlesource.gerrit.plugins.serverconfig.HideFromNonAdmins.class ) ; serve ( "/etc/*" , "/static/*" ) . with ( com.googlesource.gerrit.plugins.serverconfig.ServerConfigServlet.class ) ; }
public final java.sql.Timestamp created ( ) { java.sql.Timestamp ts = _getCts ( ) ; if ( ts == null ) { ts = com.google.gwtjsonrpc.client.impl.ser.JavaSqlTimestamp_JsonSerializer.parseTimestamp ( createdRaw ( ) ) ; _setCts ( ts ) ; } return ts ; }
public com.google.gerrit.server.query.change.ChangeData apply ( com.google.gerrit.server.query.change.ChangeData input ) { input.cacheFromSource ( source ) ; return input ; }
private com.google.gerrit.extensions.client.DiffPreferencesInfo.Whitespace getIgnoreWhitespace ( ) { final int sel = ignoreWhitespace.getSelectedIndex ( ) ; if ( 0 <= sel ) { return com.google.gerrit.extensions.client.DiffPreferencesInfo.Whitespace.valueOf ( ignoreWhitespace.getValue ( sel ) ) ; } return getValue ( ) . ignoreWhitespace ; }
public static long nowMs ( ) { return com.google.gerrit.common.TimeUtil.currentMillisSupplier.getAsLong ( ) ; }
public java.lang.String name ( ) { return pluginName ; }
public void testParse_NameEmail4 ( ) { final com.google.gerrit.server.mail.Address a = com.google.gerrit.server.mail.Address.parse ( "A U Thor<author@example.com>" ) ; com.google.common.truth.Truth.assertThat ( a.name ) . isEqualTo ( "A U Thor" ) ; com.google.common.truth.Truth.assertThat ( a.email ) . isEqualTo ( "author@example.com" ) ; }
public boolean dryRun ( com.google.gerrit.server.git.CodeReviewCommit mergeTip , com.google.gerrit.server.git.CodeReviewCommit toMerge ) throws com.google.gerrit.server.git.IntegrationException { return ( ! ( args.mergeUtil.hasMissingDependencies ( args.mergeSorter , toMerge ) ) ) && ( args.mergeUtil.canMerge ( args.mergeSorter , args.repo , mergeTip , toMerge ) ) ; }
public com.google.gerrit.extensions.restapi.BinaryResult submitPreview ( java.lang.String format ) throws com.google.gerrit.extensions.restapi.RestApiException { try { submitPreview.setFormat ( format ) ; return submitPreview.apply ( revision ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot get submit preview" , e ) ; } }
public void shouldFireEventsForReplicationOfOneRefToOneNode ( ) throws java.net.URISyntaxException { org.easymock.EasyMock.resetToDefault ( pushResultProcessingMock ) ; org.eclipse.jgit.transport.URIish uri = new org.eclipse.jgit.transport.URIish ( "git://someHost/someRepo.git" ) ; pushResultProcessingMock.onRefReplicatedToOneNode ( "someProject" , "someRef" , uri , RefPushResult.SUCCEEDED , RemoteRefUpdate.Status.OK ) ; pushResultProcessingMock.onRefReplicatedToAllNodes ( "someProject" , "someRef" , 1 ) ; pushResultProcessingMock.onAllRefsReplicatedToAllNodes ( 1 ) ; org.easymock.EasyMock.replay ( pushResultProcessingMock ) ; replicationState.increasePushTaskCount ( "someProject" , "someRef" ) ; replicationState.markAllPushTasksScheduled ( ) ; replicationState.notifyRefReplicated ( "someProject" , "someRef" , uri , RefPushResult.SUCCEEDED , RemoteRefUpdate.Status.OK ) ; org.easymock.EasyMock.verify ( pushResultProcessingMock ) ; }
private static final com.google.gerrit.client.info.AccountPreferencesInfo getUserPreferences ( ) { return com.google.gerrit.client.Gerrit.getUserPreferences ( ) ; }
protected void configure ( ) { cache ( com.google.gerrit.server.permissions.SectionSortCache.CACHE_NAME , com.google.gerrit.server.permissions.SectionSortCache.EntryKey.class , com.google.gerrit.server.permissions.SectionSortCache.EntryVal.class ) ; bind ( com.google.gerrit.server.permissions.SectionSortCache.class ) ; }
public void setUp ( ) { module = new com.ericsson.gerrit.plugins.highavailability.Module ( configMock ) ; }
public void run ( ) { for ( java.lang.Runnable thunk : list ) { thunk.run ( ) ; } }
public final native void retainHeader ( java.lang.Boolean r ) ;
private org.apache.lucene.index.Term idTerm ( com.google.gerrit.server.query.change.ChangeData cd ) { return intTerm ( com.google.gerrit.lucene.LuceneChangeIndex.ID_FIELD , cd.getId ( ) . get ( ) ) ; }
private javax.servlet.http.Cookie [ ] getCookies ( javax.servlet.http.HttpServletRequest httpRequest ) { javax.servlet.http.Cookie [ ] cookies = httpRequest.getCookies ( ) ; return cookies == null ? new javax.servlet.http.Cookie [ 0 ] : cookies ; }
protected void configure ( ) { bind ( com.google.gerrit.extensions.systemstatus.ServerInformation.class ) . toInstance ( srvInfo ) ; }
public void reviewCurrent ( ) throws com.google.gerrit.extensions.restapi.RestApiException , java.io.IOException , org.eclipse.jgit.api.errors.GitAPIException { com.google.gerrit.acceptance.PushOneCommit.Result r = createChange ( ) ; gApi.changes ( ) . id ( r.getChangeId ( ) ) . current ( ) . review ( com.google.gerrit.acceptance.api.revision.RevisionIT.approve ( ) ) ; }
void setShowLineNumbers ( boolean b ) { super . setShowLineNumbers ( b ) ; cm.refresh ( ) ; }
public static boolean useRecursiveMerge ( org.eclipse.jgit.lib.Config cfg ) { return cfg.getBoolean ( "core" , null , "useRecursiveMerge" , true ) ; }
void changeGroupOwner ( com.google.gerrit.client.reviewdb.AccountGroup.Id groupId , java.lang.String newOwnerName , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwtjsonrpc.client.VoidResult > callback ) ;
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > evictEmailAsync ( java.lang.String email ) ;
public void onClick ( com.google.gwt.event.dom.client.ClickEvent event ) { onSaveType ( ) ; }
protected void configure ( ) { bind ( com.google.gerrit.server.config.SitePaths.class ) ; bind ( org.eclipse.jgit.lib.Config.class ) . annotatedWith ( com.google.gerrit.server.config.GerritServerConfig.class ) . toProvider ( com.google.gerrit.server.config.GerritServerConfigProvider.class ) . in ( com.google.inject.Scopes.SINGLETON ) ; }
public void onEvent ( com.google.gerrit.server.events.Event event ) { if ( ( ! ( com.ericsson.gerrit.plugins.highavailability.forwarder.Context.isForwardedEvent ( ) ) ) && ( event instanceof com.google.gerrit.server.events.ProjectEvent ) ) { executor.execute ( new com.ericsson.gerrit.plugins.highavailability.event.EventHandler.EventTask ( event ) ) ; } }
private void checkIdentifiedUser ( ) throws com.google.gerrit.extensions.restapi.AuthException { if ( ! ( user.get ( ) . isIdentifiedUser ( ) ) ) { throw new com.google.gerrit.extensions.restapi.AuthException ( "drafts only available to authenticated users" ) ; } }
public java.io.InputStream getInputStream ( com.google.gerrit.server.plugins.PluginEntry entry ) throws java.io.IOException { return new java.io.FileInputStream ( getResourceFile ( entry.getName ( ) ) ) ; }
public void run ( ) throws java.lang.Exception { parseCommandLine ( impl ) ; impl.display ( out ) ; }
public com.google.gerrit.server.index.change.ChangeIndex getWriteIndex ( int version ) { for ( com.google.gerrit.server.index.change.ChangeIndex i : writeIndexes ) { if ( ( i.getSchema ( ) . getVersion ( ) ) == version ) { return i ; } } return null ; }
public void patchSetDetail ( com.google.gerrit.reviewdb.client.PatchSet.Id id , com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.PatchSetDetail > callback ) { patchSetDetail2 ( null , id , null , callback ) ; }
void onAddMe ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { java.lang.String accountId = java.lang.String.valueOf ( com.google.gerrit.client.Gerrit.getUserAccountInfo ( ) . _account_id ( ) ) ; addReviewer ( accountId , false ) ; }
public void onSuccess ( com.google.gerrit.client.changes.PublishCommentScreen.ReviewInput result ) { if ( submit ) { submit ( ) ; } else { saveStateOnUnload = false ; goChange ( ) ; } }
public final native void autoHideDiffTableHeader ( java.lang.Boolean s ) ;
protected abstract com.google.gwtorm.client.ResultSet < T > scanIndex ( com.google.gwtorm.nosql.IndexFunction < T > index , byte [ ] fromKey , byte [ ] toKey , int limit ) throws com.google.gwtorm.client.OrmException ;
public void uncache ( com.googlesource.gerrit.plugins.github.oauth.SectionParser < ? > parser ) { secureConfig.uncache ( parser ) ; }
public com.google.gerrit.server.CurrentUser getUser ( ) { return factory.create ( user.id ) ; }
protected void configure ( ) { factory ( AbandonedSender.Factory.class ) ; factory ( CommentSender.Factory.class ) ; factory ( RevertedSender.Factory.class ) ; factory ( RestoredSender.Factory.class ) ; }
public void registerKeys ( ) { super . registerKeys ( ) ; regNavigation = com.google.gwtexpui.globalkey.client.GlobalKey.add ( this , keysNavigation ) ; regAction = com.google.gwtexpui.globalkey.client.GlobalKey.add ( this , keysAction ) ; patchSetsBlock.setRegisterKeys ( true ) ; }
private void expandAll ( ) { hiddenSkipMap.remove ( cm.getLineHandle ( marker.find ( ) . getTo ( ) . getLine ( ) ) ) ; clearMarkerAndWidget ( ) ; removeFromParent ( ) ; }
void removeMembers ( java.lang.String ... members ) throws com.google.gerrit.extensions.restapi.RestApiException ;
protected com.google.inject.Injector createInjector ( ) { org.eclipse.jgit.lib.Config luceneConfig = new org.eclipse.jgit.lib.Config ( config ) ; com.google.gerrit.testutil.InMemoryModule.setDefaults ( luceneConfig ) ; return com.google.inject.Guice.createInjector ( new com.google.gerrit.testutil.InMemoryModule ( luceneConfig ) ) ; }
private com.google.gerrit.server.config.GetServerInfo.ReceiveInfo getReceiveInfo ( ) { com.google.gerrit.server.config.GetServerInfo.ReceiveInfo info = new com.google.gerrit.server.config.GetServerInfo.ReceiveInfo ( ) ; info.enableSignedPush = enableSignedPush ; return info ; }
public static void addGpgKey ( java.lang.String account , java.lang.String armored , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.rpc.NativeMap < com.google.gerrit.client.info.GpgKeyInfo > > cb ) { com.google.gerrit.client.account.AccountApi.accounts ( ) . id ( account ) . view ( "gpgkeys" ) . post ( com.google.gerrit.client.account.AccountApi.GpgKeysInput.add ( armored ) , cb ) ; }
public void run ( ) throws java.lang.Exception { impl.display ( stdout ) ; }
public void onSuccess ( com.google.gerrit.client.projects.BranchInfo branch ) { addBranch.setEnabled ( true ) ; nameTxtBox.setText ( "" ) ; irevTxtBox.setText ( "" ) ; branchTable.insert ( branch ) ; }
private static java.lang.String trimJsonMagic ( java.lang.String json ) { if ( json.startsWith ( com.google.gerrit.client.rpc.RestApi.JSON_MAGIC ) ) { json = json.substring ( com.google.gerrit.client.rpc.RestApi.JSON_MAGIC.length ( ) ) ; } return json ; }
public void clearCurrentPatchSet ( ) { currentPatchSetId = 0 ; subject = null ; originalSubject = null ; }
public void init ( javax.servlet.FilterConfig filterConfig ) throws javax.servlet.ServletException { gitFilter.init ( filterConfig ) ; webFilter.init ( filterConfig ) ; }
protected void formatChange ( ) throws com.google.gerrit.common.errors.EmailException { appendText ( textTemplate ( "Reverted" ) ) ; appendHtml ( soyHtmlTemplate ( "RevertedHtml" ) ) ; }
public com.google.gerrit.extensions.client.DiffPreferencesInfo getDiffPreferences ( ) { if ( ( diffPreferences ) == null ) { parse ( ) ; } return diffPreferences ; }
public void onFailure ( java.lang.Throwable caught ) { addBranch.setEnabled ( true ) ; com.google.gerrit.client.admin.ProjectBranchesScreen.selectAllAndFocus ( nameTxtBox ) ; new com.google.gerrit.client.ErrorDialog ( caught.getMessage ( ) ) . center ( ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { openReplyBox ( ) . run ( ) ; }
private java.lang.String newChange2 ( org.eclipse.jgit.lib.PersonIdent ident ) throws java.lang.Exception { com.google.gerrit.acceptance.PushOneCommit push = pushFactory.create ( db , ident , testRepo , PushOneCommit.SUBJECT , com.google.gerrit.acceptance.edit.ChangeEditIT.FILE_NAME , new java.lang.String ( com.google.gerrit.acceptance.edit.ChangeEditIT.CONTENT_OLD ) ) ; return push.rm ( "refs/for/master" ) . getChangeId ( ) ; }
protected java.lang.Object createServiceHandle ( ) throws java.lang.Exception { return impl ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { doAddNewRight ( ) ; }
public void preDisplay ( com.google.gerrit.common.data.ProjectAccess access ) { displayReadOnly ( access ) ; }
public static void getConfig ( com.google.gerrit.reviewdb.client.Project.NameKey name , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.projects.ConfigInfo > cb ) { new com.google.gerrit.client.rpc.RestApi ( "/projects/" ) . id ( name.get ( ) ) . view ( "config" ) . get ( cb ) ; }
private static boolean isInvalidXSRF ( final java.lang.Throwable caught ) { return ( caught instanceof com.google.gwt.user.client.rpc.InvocationException ) && ( caught.getMessage ( ) . equals ( JsonConstants.ERROR_INVALID_XSRF ) ) ; }
public static org.eclipse.jgit.lib.Config noteDbWriteEnabled ( ) { org.eclipse.jgit.lib.Config cfg = new org.eclipse.jgit.lib.Config ( ) ; cfg.setBoolean ( "notedb" , "changes" , "write" , true ) ; return cfg ; }
private void assertIncludes ( java.lang.String group , java.lang.String ... expectedNames ) throws java.lang.Exception { assertIncludes ( gApi.groups ( ) . id ( group ) . includedGroups ( ) , expectedNames ) ; }
private static final native void nativeDelete ( int funid ) ;
public boolean match ( short psValue , short expValue ) { return psValue >= expValue ; }
public com.google.common.util.concurrent.CheckedFuture < ? , java.io.IOException > deleteAsync ( com.google.gerrit.reviewdb.client.Change change ) { return ( executor ) != null ? submit ( new com.google.gerrit.server.index.ChangeIndexer.Task ( new com.google.gerrit.server.query.change.ChangeData ( change ) , true ) ) : com.google.common.util.concurrent.Futures.< java.lang.Object , java.io.IOException > immediateCheckedFuture ( null ) ; }
public void addToNonExistingGroup_NotFound ( ) throws java.lang.Exception { try { gApi.groups ( ) . id ( "non-existing" ) . addMembers ( "admin" ) ; } catch ( com.google.gerrit.extensions.restapi.ResourceNotFoundException expected ) { } }
public static com.google.inject.Key < org.apache.sshd.server.CommandFactory.Command > key ( final java.lang.String name ) { return com.google.inject.Key.get ( CommandFactory.Command.class , com.google.gerrit.server.ssh.Commands.named ( name ) ) ; }
private com.google.gerrit.extensions.client.MenuItem getItem ( java.lang.String anchorName , java.lang.String urlPath ) { return new com.google.gerrit.extensions.client.MenuItem ( anchorName , urlPath , "" ) ; }
public void createNewDraftChange ( ) throws java.lang.Exception { com.google.common.truth.TruthJUnit.assume ( ) . that ( isAllowDrafts ( ) ) . isTrue ( ) ; assertCreateSucceeds ( newChangeInput ( ChangeStatus.DRAFT ) ) ; }
public < T extends com.google.gwt.core.client.JavaScriptObject > void put ( com.google.gwt.core.client.JavaScriptObject content , com.google.gerrit.client.rpc.HttpCallback < T > cb ) { sendJSON ( com.google.gwt.http.client.RequestBuilder.PUT , content , cb ) ; }
public void configure ( ) { bind ( com.google.gerrit.server.mail.send.EmailSender.class ) . to ( com.google.gerrit.testing.FakeEmailSender.class ) ; }
public final native com.google.gwt.core.client.JsArrayString permitted_values ( java.lang.String n ) ;
public void start ( ) { final org.eclipse.jgit.storage.file.WindowCacheConfig c = new org.eclipse.jgit.storage.file.WindowCacheConfig ( ) ; c.fromConfig ( cfg ) ; org.eclipse.jgit.storage.file.WindowCache.reconfigure ( c ) ; }
public void negativeEndLineResultsInInvalidRange ( ) { com.google.gerrit.extensions.client.Comment.Range range = createRange ( 13 , 2 , ( - 1 ) , 10 ) ; com.google.gerrit.extensions.common.testing.RangeSubject.assertThat ( range ) . isInvalid ( ) ; }
public boolean handles ( com.google.gerrit.reviewdb.client.AccountGroup.UUID uuid ) { return com.google.gerrit.reviewdb.client.AccountGroup.isInternalGroup ( uuid ) ; }
void onDeleteRevision ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { if ( com.google.gwt.user.client.Window.confirm ( Resources.C.deleteDraftRevision ( ) ) ) { com.google.gerrit.client.change.ChangeActions.delete ( getProject ( ) , changeId , revision , publish , deleteRevision ) ; } }
public void markKeyInvalid ( com.google.gerrit.reviewdb.client.Account.Id accountId , int seq ) throws java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { try ( com.google.gerrit.server.account.VersionedAuthorizedKeys authorizedKeys = read ( accountId ) ) { if ( authorizedKeys.markKeyInvalid ( seq ) ) { commit ( authorizedKeys ) ; } } }
private void logDebug ( java.lang.String msg , java.lang.Object ... args ) { if ( com.google.gerrit.server.git.SubmoduleOp.log.isDebugEnabled ( ) ) { com.google.gerrit.server.git.SubmoduleOp.log.debug ( ( ( ( "[" + ( updateId ) ) + "]" ) + msg ) , args ) ; } }
public static com.google.gerrit.server.project.SubmitRuleOptions.Builder builder ( ) { return com.google.gerrit.server.project.SubmitRuleOptions.defaults.toBuilder ( ) ; }
private com.google.gwtorm.server.ResultSet < com.google.gerrit.reviewdb.client.PatchSet > findExactMatch ( com.google.gerrit.reviewdb.client.RevId revid ) throws com.google.gwtorm.server.OrmException { return dbProvider.get ( ) . patchSets ( ) . byRevision ( revid ) ; }
public void fire ( com.google.gerrit.reviewdb.client.Project.NameKey project , org.eclipse.jgit.lib.RefUpdate refUpdate , com.google.gerrit.reviewdb.client.Account updater ) { fire ( project , refUpdate.getName ( ) , refUpdate.getOldObjectId ( ) , refUpdate.getNewObjectId ( ) , ReceiveCommand.Type.UPDATE , util.accountInfo ( updater ) ) ; }
public void delete ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { deleteBranch.apply ( resource ( ) , new com.google.gerrit.extensions.common.Input ( ) ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot delete branch" , e ) ; } }
public java.lang.String getChangeAvatarUrl ( com.google.gerrit.server.IdentifiedUser forUser ) ;
private static void doCreateTable ( java.sql.Statement stmt ) throws java.sql.SQLException { stmt.executeUpdate ( ( "CREATE TABLE IF NOT EXISTS account_patch_reviews (" + ( ( ( ( ( ( "account_id INTEGER DEFAULT 0 NOT NULL, " + "change_id INTEGER DEFAULT 0 NOT NULL, " ) + "patch_set_id INTEGER DEFAULT 0 NOT NULL, " ) + "file_name VARCHAR(4096) DEFAULT '' NOT NULL, " ) + "CONSTRAINT primary_key_account_patch_reviews " ) + "PRIMARY KEY (account_id, change_id, patch_set_id, file_name)" ) + ")" ) ) ) ; }
private static byte [ ] toBytes ( com.google.gerrit.extensions.restapi.BinaryResult content ) throws java.lang.Exception { java.io.ByteArrayOutputStream os = new java.io.ByteArrayOutputStream ( ) ; content.writeTo ( os ) ; return os.toByteArray ( ) ; }
void reviewProjectAccess ( com.google.gerrit.reviewdb.client.Project.NameKey projectName , java.lang.String baseRevision , java.lang.String message , java.util.List < com.google.gerrit.common.data.AccessSection > sections , com.google.gerrit.reviewdb.client.Project.NameKey parentProjectName , com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.reviewdb.client.Change.Id > callback ) ;
private void postEvent ( com.google.gerrit.server.events.RefEvent event ) { try { dispatcher.postEvent ( event ) ; } catch ( com.google.gwtorm.server.OrmException | com.google.gerrit.server.permissions.PermissionBackendException e ) { com.googlesource.gerrit.plugins.replication.PushResultProcessing.GitUpdateProcessing.log.error ( "Cannot post event" , e ) ; } }
public void onSuccess ( final com.google.gwtjsonrpc.client.VoidResult result ) { saveName.setEnabled ( false ) ; setPageTitle ( Util.M.group ( newName ) ) ; }
private org.eclipse.jgit.revwalk.RevCommit getHead ( org.eclipse.jgit.lib.Repository repo , java.lang.String name ) throws java.lang.Exception { try ( org.eclipse.jgit.revwalk.RevWalk rw = new org.eclipse.jgit.revwalk.RevWalk ( repo ) ) { return rw.parseCommit ( repo.exactRef ( name ) . getObjectId ( ) ) ; } }
protected void configure ( ) { post ( com.google.gerrit.server.change.RevisionResource.REVISION_KIND , "set-wip" ) . to ( com.googlesource.gerrit.plugins.wip.WorkInProgress.class ) ; post ( com.google.gerrit.server.change.RevisionResource.REVISION_KIND , "set-ready" ) . to ( com.googlesource.gerrit.plugins.wip.ReadyForReview.class ) ; }
java.lang.String syncUrl ( com.ericsson.gerrit.plugins.multimaster.Configuration config ) { return config.getUrl ( ) ; }
public boolean isOwner ( ) { return ( ( isDeclaredOwner ( ) ) && ( ! ( controlForRef ( "refs/*" ) . isBlocked ( Permission.OWNER ) ) ) ) || ( user.getCapabilities ( ) . isAdmin_DoNotUse ( ) ) ; }
public < T > void set ( com.google.gerrit.rules.StoredValue < T > sv , T obj ) { storedValues.put ( ( ( com.google.gerrit.rules.StoredValue < java.lang.Object > ) ( sv ) ) , obj ) ; }
private static java.lang.String encodeBase64 ( final byte [ ] data ) { return new java.lang.String ( org.apache.commons.codec.binary.Base64.encodeBase64 ( data ) , java.nio.charset.StandardCharsets.UTF_8 ) ; }
public com.google.gerrit.server.project.ListProjects setMatchPrefix ( java.lang.String prefix ) { this . matchPrefix = prefix ; return this ; }
private com.google.gerrit.sshd.SshScope.Context newContinuingContext ( com.google.gerrit.sshd.SshScope.Context ctx ) { return new com.google.gerrit.sshd.SshScope.Context ( ctx , ctx.getSession ( ) , ctx.getCommandLine ( ) ) ; }
public void onDraftPublished ( com.google.gerrit.extensions.events.DraftPublishedListener.Event event ) { com.google.gerrit.extensions.common.ChangeInfo c = event.getChange ( ) ; onEvent ( new com.google.gerrit.reviewdb.client.Project.NameKey ( c.project ) , c._number , event.getWho ( ) . email ) ; }
private void toggleShowIntraline ( ) { prefs.intralineDifference ( ( ! ( prefs.intralineDifference ( ) ) ) ) ; setShowIntraline ( prefs.intralineDifference ( ) ) ; prefsAction.update ( ) ; }
public void onSuccess ( com.google.gerrit.client.changes.ChangeInfo result ) { sent = true ; com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( new com.google.gerrit.reviewdb.client.Change.Id ( result._number ( ) ) ) ) ; hide ( ) ; }
public void onResize ( com.google.gwt.event.logical.shared.ResizeEvent event ) { resizeCodeMirror ( ) ; }
public static void reloadChanges ( com.google.gerrit.server.git.ChangeSet cs ) throws com.google.gwtorm.server.OrmException { for ( com.google.gerrit.server.query.change.ChangeData cd : cs.changes ( ) ) { cd.reloadChange ( ) ; cd.setPatchSets ( null ) ; cd.setMergeable ( null ) ; } }
public void putApproval ( java.lang.String label , short value ) { putApprovalFor ( getAccountId ( ) , label , value ) ; }
public com.google.gerrit.extensions.api.changes.AddReviewerResult addReviewer ( com.google.gerrit.extensions.api.changes.AddReviewerInput in ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return postReviewers.apply ( change , in ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot add change reviewer" , e ) ; } }
public void onRemove ( org.eclipse.jgit.lib.ObjectId oldNotesRev , org.eclipse.jgit.lib.ObjectId newNotesRev , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId > extId ) { }
public static org.apache.lucene.index.Term idTerm ( com.google.gerrit.server.query.change.ChangeData cd ) { return com.google.gerrit.lucene.QueryBuilder.intTerm ( com.google.gerrit.server.index.change.ChangeField.LEGACY_ID.getName ( ) , cd.getId ( ) . get ( ) ) ; }
public void run ( ) { if ( cm.hasVimSearchHighlight ( ) ) { net.codemirror.lib.CodeMirror.handleVimKey ( cm , "n" ) ; } else { diffChunkNav ( cm , Direction.NEXT ) . run ( ) ; } }
public com.vmware.gerrit.owners.common.Gerrit214ManualRequestContext open ( ) throws com.google.gwtorm.server.OrmException { return new com.vmware.gerrit.owners.common.Gerrit214ManualRequestContext ( userFactory.create ( ) , schemaFactory , requestContext ) ; }
public com.google.gerrit.extensions.restapi.RestView < com.google.gerrit.server.change.ChangeResource > list ( ) { return detail ; }
public void onKeyPress ( final com.google.gwt.event.dom.client.KeyPressEvent event ) { int index = ( indexOf ( activePatchSetId ) ) + 1 ; if ( index < ( patchSets.size ( ) ) ) { activate ( patchSets.get ( index ) . getId ( ) ) ; } }
public synchronized void stop ( ) { if ( ( daemonAcceptor ) != null ) { try { daemonAcceptor.dispose ( ) ; com.google.gerrit.sshd.SshDaemon.log.info ( "Stopped Gerrit SSHD" ) ; } finally { daemonAcceptor = null ; } } }
private void initRow ( final int row , final java.lang.String name ) { infoTable.setText ( row , 0 , name ) ; infoTable.getCellFormatter ( ) . addStyleName ( row , 0 , Gerrit.RESOURCES.css ( ) . header ( ) ) ; }
private static java.lang.String getContentUrl ( java.lang.String url , com.googlesource.gerrit.plugins.lfs.LfsBackend backend ) { return ( url + ( url.endsWith ( "/" ) ? "" : "/" ) ) + ( com.googlesource.gerrit.plugins.lfs.fs.LocalLargeFileRepository.getContentPath ( backend ) ) ; }
public static com.google.gerrit.index.query.Predicate < com.google.gerrit.server.account.AccountState > watchedProject ( com.google.gerrit.reviewdb.client.Project.NameKey project ) { return new com.google.gerrit.server.query.account.AccountPredicates.AccountPredicate ( com.google.gerrit.server.index.account.AccountField.WATCHED_PROJECT , project.get ( ) ) ; }
public static void selectMenu ( com.google.gerrit.client.ui.LinkMenuBar bar ) { com.google.gerrit.client.Gerrit.menuLeft.selectTab ( com.google.gerrit.client.Gerrit.menuLeft.getWidgetIndex ( bar ) ) ; }
public java.lang.String getMethod ( ) { return method ; }
public void onSuccess ( final java.util.List < com.google.gerrit.client.reviewdb.AccountSshKey > result ) { keys.display ( result ) ; keys.finishDisplay ( true ) ; }
private boolean isOpen ( ) { return getStyleName ( ) . contains ( style.open ( ) ) ; }
long size ( ) { return ( dbCache ) == null ? 0 : dbCache.size ( ) ; }
protected void fossilCollectIndexRow ( byte [ ] key , com.google.gwtorm.nosql.IndexRow row ) { try { delete ( key ) ; } catch ( com.google.gwtorm.client.OrmException e ) { } }
public void setApprovalTypes ( final com.google.gerrit.client.data.ApprovalTypes at ) { approvalTypes = at ; }
public void execute ( ) { sp.setHeight ( "" ) ; setPosition ( getOffsetWidth ( ) , getOffsetHeight ( ) ) ; fileList.setRegisterKeys ( true ) ; fileList.movePointerTo ( callerKey ) ; }
public < T extends com.google.gwt.core.client.JavaScriptObject > void get ( com.google.gwt.user.client.rpc.AsyncCallback < T > cb ) { send ( com.google.gwt.http.client.RequestBuilder.GET , cb ) ; }
public void createProjectWithGitSuffix ( ) throws java.lang.Exception { java.lang.String name = name ( "foo" ) ; com.google.common.truth.Truth.assertThat ( name ) . isEqualTo ( gApi.projects ( ) . create ( ( name + ".git" ) ) . get ( ) . name ) ; }
public void pushWithPrivateByDefaultDisabled ( ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( createChange ( project2 ) . getChange ( ) . change ( ) . isPrivate ( ) ) . isEqualTo ( false ) ; }
void apply ( com.google.gerrit.server.notedb.ChangeUpdate update ) { throw new java.lang.UnsupportedOperationException ( ) ; }
private boolean isDeclaredOwner ( ) { if ( ( declaredOwner ) == null ) { declaredOwner = user.memberOfAny ( state.getAllOwners ( ) ) ; } return declaredOwner ; }
public void shouldThrowAnExceptionIfAnErrorOccurCreatingSharedDirectory ( ) throws java.io.IOException { java.io.File configuredDirectory = tempFolder.newFile ( ) ; org.mockito.Mockito.when ( pluginConfigMock.getString ( com.ericsson.gerrit.plugins.highavailability.Configuration.SHARED_DIRECTORY ) ) . thenReturn ( configuredDirectory.getAbsolutePath ( ) ) ; module.getSharedDirectory ( pluginConfigFactoryMock , com.ericsson.gerrit.plugins.highavailability.ModuleTest.PLUGIN_NAME ) ; }
public void remove ( ) { plugins.remove ( name , holder ) ; }
public void run ( ) { if ( ! ( prefs.renderEntireFile ( ) ) ) { cmA.setHeight ( height ) ; cmB.setHeight ( height ) ; } cmA.refresh ( ) ; cmB.refresh ( ) ; }
public final PatchSet.Id patchSetId ( ) { return ( hasChangeNumber ( ) ) && ( hasRevisionNumber ( ) ) ? new com.google.gerrit.reviewdb.client.PatchSet.Id ( legacyId ( ) , _revisionNumber ( ) ) : null ; }
public java.sql.Connection getConnection ( ) throws java.sql.SQLException { if ( ( driver ) != null ) { return driver.connect ( url , connectionInfo ) ; } return java.sql.DriverManager.getConnection ( url , connectionInfo ) ; }
void onDeleteChange ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { if ( com.google.gwt.user.client.Window.confirm ( Resources.C.deleteDraftChange ( ) ) ) { com.google.gerrit.client.change.DraftActions.delete ( changeId , publish , deleteRevision , deleteChange ) ; } }
private int num ( com.google.gerrit.client.changes.ChangeInfo.RevisionInfo r ) { return ! ( r.isEdit ( ) ) ? ( 2 * ( ( r._number ( ) ) - 1 ) ) + 1 : 2 * editParent ; }
private java.util.Optional < com.google.gerrit.server.group.InternalGroup > toInternalGroup ( org.apache.lucene.document.Document doc ) { com.google.gerrit.reviewdb.client.AccountGroup.UUID uuid = new com.google.gerrit.reviewdb.client.AccountGroup.UUID ( doc.getField ( com.google.gerrit.server.index.group.GroupField.UUID.getName ( ) ) . stringValue ( ) ) ; return groupCache.get ( ) . getInternalGroup ( uuid ) ; }
protected void configureServlets ( ) { serve ( "/become" ) . with ( com.google.gerrit.server.http.BecomeAnyAccountLoginServlet.class ) ; }
protected org.eclipse.jgit.lib.ObjectId readRef ( org.eclipse.jgit.lib.Repository repo ) throws java.io.IOException { return ( refs ) != null ? refs.get ( getRefName ( ) ) . orElse ( null ) : super . readRef ( repo ) ; }
public void setSession ( final org.apache.sshd.server.session.ServerSession session ) { final com.google.gerrit.sshd.SshSession s = session.getAttribute ( SshSession.KEY ) ; this . ctx = sshScope.newContext ( s , commandLine ) ; }
public void abandonReviewableChangeNotifyNone ( ) throws java.lang.Exception { com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableChange ( ) ; abandon ( sc.changeId , sc.owner , com.google.gerrit.extensions.api.changes.NotifyHandling.NONE ) ; assertThat ( sender ) . notSent ( ) ; }
public void onKeyPress ( final com.google.gwt.event.dom.client.KeyPressEvent event ) { final com.google.gwtexpui.globalkey.client.KeyCommandSet s = com.google.gwtexpui.globalkey.client.GlobalKey.active.live ; if ( s != ( com.google.gwtexpui.globalkey.client.GlobalKey.active.all ) ) { com.google.gwtexpui.globalkey.client.GlobalKey.active.live = com.google.gwtexpui.globalkey.client.GlobalKey.active.all ; com.google.gwtexpui.globalkey.client.GlobalKey.restoreTimer.cancel ( ) ; } s.onKeyPress ( event ) ; }
com.google.gerrit.common.changes.Side getStoredSideFromDisplaySide ( com.google.gerrit.client.diff.SideBySide2.DisplaySide side ) { return ( side == ( com.google.gerrit.client.diff.SideBySide2.DisplaySide.A ) ) && ( ( base ) == null ) ? com.google.gerrit.common.changes.Side.PARENT : com.google.gerrit.common.changes.Side.REVISION ; }
public static java.lang.String format ( java.lang.String hostname , int port ) { return ( ( com.google.gerrit.server.util.SocketUtil.safeHostname ( hostname ) ) + ":" ) + port ; }
public void getTagOfNonVisibleProject ( ) throws java.lang.Exception { blockRead ( "refs/*" ) ; exception.expect ( com.google.gerrit.extensions.restapi.ResourceNotFoundException.class ) ; gApi.projects ( ) . name ( project.get ( ) ) . tag ( "tag" ) . get ( ) ; }
public java.lang.String getCharacterEncoding ( ) { return java.nio.charset.StandardCharsets.UTF_8.name ( ) ; }
static void invoke ( com.google.gerrit.client.changes.ChangeInfo change , com.google.gerrit.client.actions.ActionInfo action , com.google.gerrit.client.rpc.RestApi api ) { com.google.gerrit.client.api.DefaultActions.invoke ( action , api , com.google.gerrit.client.api.DefaultActions.callback ( com.google.gerrit.common.PageLinks.toChange ( change.legacyId ( ) ) ) ) ; }
private java.lang.String soyTemplate ( java.lang.String name , com.google.template.soy.data.SanitizedContent.ContentKind kind ) { return args.soyTofu.newRenderer ( ( "com.google.gerrit.server.mail.template." + name ) ) . setContentKind ( kind ) . setData ( soyContext ) . render ( ) ; }
static com.google.gerrit.server.index.change.StalenessChecker.RefState create ( java.lang.String ref , @ com.google.gerrit.common.Nullable org.eclipse.jgit.lib.ObjectId id ) { return new com.google.gerrit.server.index.change.AutoValue_StalenessChecker_RefState ( ref , com.google.common.base.MoreObjects.firstNonNull ( id , org.eclipse.jgit.lib.ObjectId.zeroId ( ) ) ) ; }
public static java.lang.Iterable < java.lang.String > splitOptionValue ( java.lang.String value ) { return com.google.common.collect.Iterables.transform ( com.google.gerrit.server.OptionUtil.COMMA_OR_SPACE.split ( value ) , java.lang.String :: toLowerCase ) ; }
public static net.codemirror.lib.CodeMirror create ( com.google.gwt.dom.client.Element p , net.codemirror.lib.Configuration cfg ) { net.codemirror.lib.CodeMirror cm = net.codemirror.lib.CodeMirror.newCM ( p , cfg ) ; net.codemirror.lib.Extras.attach ( cm ) ; return cm ; }
public void setLegacycidInChangeTable ( boolean legacycidInChangeTable ) { this . legacycidInChangeTable = legacycidInChangeTable ; }
public java.lang.String readString ( java.lang.String def , java.lang.String fmt , java.lang.Object ... args ) { return def ; }
private void addReviewerToReviewableChangeInNoteDb ( com.google.gerrit.acceptance.server.mail.AddReviewerSenderIT.Adder adder ) throws java.lang.Exception { com.google.common.truth.TruthJUnit.assume ( ) . that ( notesMigration.readChanges ( ) ) . isTrue ( ) ; com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableChange ( ) ; com.google.gerrit.acceptance.TestAccount reviewer = accountCreator.create ( "added" , "added@example.com" , "added" ) ; addReviewer ( adder , sc.changeId , sc.owner , reviewer.email ) ; assertThat ( sender ) . sent ( "newchange" , sc ) . to ( reviewer ) . cc ( sc.reviewer ) . cc ( sc.reviewerByEmail , sc.ccerByEmail ) . noOneElse ( ) ; }
private PatchSet.Id nextPatchSetId ( com.google.gerrit.server.notedb.ChangeNotes notes ) throws java.lang.Exception { return com.google.gerrit.server.ChangeUtil.nextPatchSetId ( serverSideTestRepo.getRepository ( ) , notes.getChange ( ) . currentPatchSetId ( ) ) ; }
protected void doGetHtml ( javax.servlet.http.HttpServletRequest req , javax.servlet.http.HttpServletResponse res ) throws java.io.IOException { renderHtml ( req , res , "gitiles.repositoryIndex" , buildData ( req ) ) ; }
public void queryOne ( ) throws java.sql.SQLException { execute ( ( ( "SELECT * FROM " + ( com.ericsson.gerrit.plugins.eventslog.sql.SQLTable.TABLE_NAME ) ) + " LIMIT 1" ) ) ; }
protected void onInitUI ( ) { super . onInitUI ( ) ; initPath ( ) ; setHeaderVisible ( false ) ; setWindowTitle ( com.google.gerrit.client.diff.FileInfo.getFileName ( path ) ) ; }
public void onCreateProject ( com.google.gerrit.reviewdb.Project.NameKey newProjectName ) ;
public java.lang.String describeForException ( ) { if ( ( forUser ) == ( com.google.gerrit.server.permissions.LabelPermission.ForUser.ON_BEHALF_OF ) ) { return "labelAs " + ( label.formatWithEquals ( ) ) ; } return "label " + ( label.formatWithEquals ( ) ) ; }
protected void configure ( ) { persist ( com.google.gerrit.server.auth.oauth.OAuthTokenCache.OAUTH_TOKENS , Account.Id.class , com.google.gerrit.extensions.auth.oauth.OAuthToken.class ) ; }
public void onSuccess ( com.google.gerrit.client.documentation.DocInfo indexInfo ) { com.google.gerrit.client.Gerrit.hasDocumentation = indexInfo != null ; com.google.gerrit.client.Gerrit.docUrl = com.google.gerrit.client.Gerrit.selfRedirect ( "/Documentation/" ) ; }
public void createEmptyChange_MissingMessage ( ) throws java.lang.Exception { com.google.gerrit.extensions.common.ChangeInput ci = new com.google.gerrit.extensions.common.ChangeInput ( ) ; ci.project = project.get ( ) ; ci.branch = "master" ; assertCreateFails ( ci , com.google.gerrit.extensions.restapi.BadRequestException.class , "commit message must be non-empty" ) ; }
public void postEvent ( com.google.gerrit.reviewdb.client.Change change , com.google.gerrit.server.events.ChangeEvent event , com.google.gerrit.reviewdb.server.ReviewDb db ) { }
protected abstract void encodePrimaryKey ( com.google.gwtorm.nosql.IndexKeyBuilder dst , K key ) ;
private void initializeConfiguration ( ) { configuration = new com.ericsson.gerrit.plugins.highavailability.Configuration ( cfgFactoryMock , pluginName , site ) ; }
void setFormat ( com.google.gerrit.server.query.change.OutputStreamQuery.OutputFormat format ) { processor.setOutput ( out , format ) ; }
public org.eclipse.jgit.revwalk.RevCommit commitAt ( org.eclipse.jgit.lib.ObjectId expected ) throws java.io.IOException { if ( com.google.common.base.Objects.equal ( src , expected ) ) { return revision ; } return updateRef ( com.google.common.base.MoreObjects.firstNonNull ( expected , org.eclipse.jgit.lib.ObjectId.zeroId ( ) ) , src , getRefName ( ) ) ; }
public void dirty ( final com.google.gerrit.client.reviewdb.PatchSetApproval ap ) { if ( ( modified ) == null ) { modified = new java.util.HashSet < com.google.gerrit.client.reviewdb.PatchSetApproval > ( ) ; } modified.add ( ap ) ; }
protected void add ( final com.google.gerrit.extensions.api.changes.RecipientType rt , final com.google.gerrit.reviewdb.client.UserIdentity who ) { if ( ( who != null ) && ( ( who.getAccount ( ) ) != null ) ) { add ( rt , who.getAccount ( ) ) ; } }
private java.lang.String groupOf ( com.google.gerrit.reviewdb.RefRight r ) { return com.google.gerrit.server.util.FutureUtil.get ( want ( r.getAccountGroupId ( ) ) ) . getName ( ) ; }
public void refresh ( ) { com.google.gerrit.client.rpc.RestApi call = com.google.gerrit.client.changes.ChangeApi.detail ( changeId.get ( ) ) ; com.google.gerrit.client.changes.ChangeList.addOptions ( call , java.util.EnumSet.of ( ListChangesOption.CURRENT_ACTIONS , ListChangesOption.ALL_REVISIONS , ListChangesOption.ALL_COMMITS ) ) ; call.get ( new com.google.gerrit.client.changes.ChangeDetailCache.NewGerritCallback ( ) ) ; }
public static void fireEvent ( com.google.gwtjsonrpc.client.event.BaseRpcEvent < ? > event ) { com.google.gwtjsonrpc.client.JsonUtil.globalHandlers.fireEvent ( event ) ; }
public com.google.gerrit.common.data.PatchScriptSettings getSettings ( ) { return settings ; }
public void stop ( ) { if ( ( scheduledCleanupTask ) != null ) { scheduledCleanupTask.cancel ( true ) ; scheduledCleanupTask = null ; } }
public boolean canAdministrateServer ( ) { if ( ( canAdministrateServer ) == null ) { canAdministrateServer = ( ( user ) instanceof com.google.gerrit.server.PeerDaemonUser ) || ( matchAny ( capabilities.administrateServer , com.google.gerrit.server.account.CapabilityControl.ALLOWED_RULE ) ) ; } return canAdministrateServer ; }
public void preDisplay ( com.google.gerrit.client.projects.ConfigInfo result ) { display ( result ) ; }
public final com.google.gerrit.server.notedb.NoteDbChangeState.PrimaryStorage changePrimaryStorage ( ) { return snapshot.get ( ) . changePrimaryStorage ( ) ; }
public void stop ( ) { if ( ( manager ) != null ) { manager.stop ( ) ; manager = null ; sysInjector = null ; sshInjector = null ; httpInjector = null ; } }
public void publish ( com.google.gerrit.extensions.api.changes.PublishChangeEditInput publishChangeEditInput ) throws com.google.gerrit.extensions.restapi.RestApiException { try { publishChangeEdit.apply ( changeResource , publishChangeEditInput ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot publish change edit" , e ) ; } }
public void go ( ) { com.google.gerrit.client.Dispatcher.patch ( getTargetHistoryToken ( ) , patchKey , patchIndex , patchSetDetail , parentPatchTable , topView ) ; }
public com.google.common.collect.ImmutableList < org.eclipse.jgit.diff.Edit > getEdits ( ) { return com.google.gerrit.server.diff.IntraLineDiff.deepCopyEdits ( edits ) ; }
static com.google.inject.Module module ( ) { return new com.google.gerrit.server.cache.CacheModule ( ) { protected void configure ( ) { com.google.gerrit.extensions.registration.DynamicSet.bind ( binder ( ) , com.googlesource.gerrit.plugins.quota.UsageDataEventCreator.class ) . to ( com.googlesource.gerrit.plugins.quota.RepoSizeEventCreator.class ) ; } } ; }
private boolean isHidden ( ) { return getProject ( ) . getState ( ) . equals ( com.google.gerrit.extensions.client.ProjectState.HIDDEN ) ; }
public java.lang.String getRepository ( ) { return gitHubRepository.getRepository ( ) ; }
private final native java.lang.String intralineStatusRaw ( ) ;
public java.util.Set < com.google.gerrit.reviewdb.client.Account.Id > starredBy ( ) throws com.google.gwtorm.server.OrmException { if ( ( starredByUser ) == null ) { starredByUser = com.google.common.base.Preconditions.checkNotNull ( starredChangesUtil ) . byChange ( legacyId ) ; } return starredByUser ; }
public java.util.List < com.googlesource.gerrit.plugins.github.git.GHContent > getDirectoryContent ( java.lang.String path , java.lang.String ref ) throws java.io.IOException { return ghRepository.getDirectoryContent ( path , ref ) ; }
private com.google.common.util.concurrent.ListeningExecutorService newExecutor ( ) { if ( ( threads ) > 0 ) { return com.google.common.util.concurrent.MoreExecutors.listeningDecorator ( workQueue.createQueue ( threads , "RebuildChange" ) ) ; } else { return com.google.common.util.concurrent.MoreExecutors.newDirectExecutorService ( ) ; } }
void onRemoveByKeys ( org.eclipse.jgit.lib.ObjectId oldNotesRev , org.eclipse.jgit.lib.ObjectId newNotesRev , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId.Key > extIdKeys ) throws java.io.IOException ;
public void evictGroups ( ) throws java.lang.Exception { configureMocksFor ( Constants.GROUPS ) ; verifyResponseIsOK ( ) ; }
public void postUpdate ( com.google.gerrit.server.update.Context ctx ) throws com.google.gwtorm.server.OrmException { assigneeChanged.fire ( change , ctx.getAccount ( ) , deletedAssignee , ctx.getWhen ( ) ) ; }
public void deleteBranchByProjectOwnerForcePushBlocked_Forbidden ( ) throws java.lang.Exception { grantOwner ( ) ; blockForcePush ( ) ; setApiUser ( user ) ; assertDeleteForbidden ( testBranch ) ; }
public boolean yesno ( boolean defaultValue , java.lang.String message ) { return defaultValue ; }
public com.google.gerrit.index.query.Predicate < T > copy ( java.util.Collection < ? extends com.google.gerrit.index.query.Predicate < T > > children ) { if ( ! ( children.isEmpty ( ) ) ) { throw new java.lang.IllegalArgumentException ( "Expected 0 children" ) ; } return this ; }
public T decode ( com.google.protobuf.ByteString buf ) { try { return decode ( buf.newCodedInput ( ) ) ; } catch ( java.io.IOException err ) { throw new java.lang.RuntimeException ( "Cannot decode message" , err ) ; } }
public com.googlesource.gerrit.plugins.github.git.GHCommitStatus createCommitStatus ( java.lang.String sha1 , com.googlesource.gerrit.plugins.github.git.GHCommitState state , java.lang.String targetUrl , java.lang.String description ) throws java.io.IOException { return ghRepository.createCommitStatus ( sha1 , state , targetUrl , description ) ; }
void onIntralineDifference ( com.google.gwt.event.logical.shared.ValueChangeEvent < java.lang.Boolean > e ) { prefs.intralineDifference ( e.getValue ( ) ) ; if ( ( view ) != null ) { view.setShowIntraline ( prefs.intralineDifference ( ) ) ; } }
private void checkPath ( ) { checkView ( ( ( path ) != null ) , "missing path on %s view" , type ) ; checkRevision ( ) ; }
public com.google.gerrit.client.ui.Screen recycleThis ( final com.google.gerrit.client.ui.Screen newScreen ) { final com.google.gerrit.client.changes.ChangeScreen s = ( ( com.google.gerrit.client.changes.ChangeScreen ) ( newScreen ) ) ; changeId = s.changeId ; changeInfo = s.changeInfo ; starred = s.starred ; return this ; }
public void evictInclude ( com.google.gerrit.reviewdb.AccountGroup.UUID groupId ) { byInclude.remove ( groupId ) ; }
public boolean canRemoveGroup ( com.google.gerrit.reviewdb.client.AccountGroup.UUID uuid ) { return isOwner ( ) ; }
public java.lang.String apply ( com.google.gerrit.reviewdb.client.Account.Id accountId ) { return com.google.common.base.MoreObjects.firstNonNull ( accountCache.get ( accountId ) . getAccount ( ) . getPreferredEmail ( ) , "n/a" ) ; }
private void readObject ( java.io.ObjectInputStream in ) throws java.io.IOException { prior = org.eclipse.jgit.lib.ObjectIdSerializer.readWithoutMarker ( in ) ; next = org.eclipse.jgit.lib.ObjectIdSerializer.readWithoutMarker ( in ) ; strategyName = in.readUTF ( ) ; }
public void formatFooter ( ) throws com.google.gerrit.common.errors.EmailException { appendText ( textTemplate ( "CommentFooter" ) ) ; if ( useHtml ( ) ) { appendHtml ( soyHtmlTemplate ( "CommentFooterHtml" ) ) ; } }
public void visit ( org.commonmark.node.BlockQuote node ) { wrapChildren ( "blockquote" , node ) ; }
public void setProjectWatches ( java.util.Map < com.google.gerrit.server.account.WatchConfig.ProjectWatchKey , java.util.Set < com.google.gerrit.server.account.WatchConfig.NotifyType > > projectWatches ) { this . projectWatches = projectWatches ; }
public java.util.Map < com.google.gerrit.server.account.WatchConfig.ProjectWatchKey , java.util.Set < com.google.gerrit.server.account.WatchConfig.NotifyType > > getProjectWatches ( ) { if ( ( projectWatches ) == null ) { parse ( ) ; } return projectWatches ; }
private boolean isPatchSet ( com.google.gerrit.server.notedb.rebuild.Event e ) { return e instanceof com.google.gerrit.server.notedb.rebuild.PatchSetEvent ; }
void moveDown ( int row ) { if ( row < ( ( table.getRowCount ( ) ) - 1 ) ) { swap ( row , ( row + 1 ) ) ; } }
protected com.google.gwtorm.client.ResultSet scanIndex ( com.google.gwtorm.nosql.IndexFunction index , byte [ ] fromKey , byte [ ] toKey , int limit , boolean order ) { throw new java.lang.UnsupportedOperationException ( ) ; }
public void onValueChange ( com.google.gwt.event.logical.shared.ValueChangeEvent < java.lang.String > event ) { if ( ! ( AdminConstants.I.addPermission ( ) . equals ( event.getValue ( ) ) ) ) { onAddPermission ( event.getValue ( ) ) ; } }
public java.util.regex.Pattern getIssuePattern ( ) { java.util.regex.Pattern ret = null ; java.lang.String match = gerritConfig.getString ( "commentlink" , getCommentLinkName ( ) , "match" ) ; if ( match != null ) { ret = java.util.regex.Pattern.compile ( match ) ; } return ret ; }
public < T extends com.google.gwt.core.client.JavaScriptObject > void get ( com.google.gwt.user.client.rpc.AsyncCallback < T > cb ) { get ( com.google.gerrit.client.rpc.RestApi.wrap ( cb ) ) ; }
public void run ( ) { updateActiveLine ( cm ) . run ( ) ; }
public com.googlesrouce.gerrit.plugins.github.git.GitJobStatus getStatus ( ) { return GitJobStatus.FAILED ; }
public void onCreateAccount ( final com.google.gerrit.server.account.AuthRequest who , final com.google.gerrit.reviewdb.client.Account account ) { usernameCache.put ( who.getLocalUser ( ) , com.google.common.base.Optional.of ( account.getId ( ) ) ) ; }
private static java.lang.String toChangeNoSlash ( @ com.google.gerrit.common.Nullable com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.reviewdb.client.Change.Id c ) { if ( project != null ) { return ( ( "/c/" + ( project.get ( ) ) ) + ( com.google.gerrit.common.PageLinks.PROJECT_CHANGE_DELIMITER ) ) + c ; } return "/c/" + c ; }
int getRawOldAccountId ( ) { return oldAccountId.get ( ) ; }
public java.util.List < com.google.gerrit.reviewdb.AccountSshKey > run ( com.google.gerrit.reviewdb.ReviewDb db ) throws com.google.gwtorm.client.OrmException { com.google.gerrit.server.IdentifiedUser u = user.get ( ) ; return db.accountSshKeys ( ) . byAccount ( u.getAccountId ( ) ) . toList ( ) ; }
public void testNoAdvance ( ) { com.google.gerrit.client.diff.EditIterator iter = new com.google.gerrit.client.diff.EditIterator ( lines , 0 ) ; assertLineChsEqual ( net.codemirror.lib.Pos.create ( 0 ) , iter.advance ( 0 ) ) ; }
public void nameInConfigMayBeEmpty ( ) throws java.lang.Exception { populateGroupConfig ( groupUuid , "[group]\n\tname=\n\tid = 42\n\townerGroupUuid = owners\n" ) ; com.google.gerrit.server.group.db.GroupConfig groupConfig = com.google.gerrit.server.group.db.GroupConfig.loadForGroup ( repository , groupUuid ) ; com.google.common.truth.Truth.assertThat ( groupConfig.getLoadedGroup ( ) . get ( ) . getName ( ) ) . isEmpty ( ) ; }
public void deleteChange ( ) { com.google.common.base.Preconditions.checkState ( ( ! ( saved ) ) , "cannot both save and delete change" ) ; deleted = true ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { closePopup ( ) ; }
private void writeObject ( final java.io.ObjectOutputStream out ) throws java.io.IOException { org.eclipse.jgit.lib.ObjectIdSerialization.writeNotNull ( out , aId ) ; org.eclipse.jgit.lib.ObjectIdSerialization.writeNotNull ( out , bId ) ; out.writeBoolean ( ignoreWhitespace ) ; }
public com.google.gerrit.server.IdentifiedUser create ( java.net.SocketAddress remotePeer , com.google.gerrit.reviewdb.client.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( capabilityControlFactory , authConfig , realm , anonymousCowardName , canonicalUrl , accountCache , groupBackend , disableReverseDnsLookup , com.google.inject.util.Providers.of ( remotePeer ) , null , id , null ) ; }
public void fire ( com.google.gerrit.reviewdb.client.Project.NameKey project , org.eclipse.jgit.lib.RefUpdate refUpdate , org.eclipse.jgit.transport.ReceiveCommand.Type type , com.google.gerrit.reviewdb.client.Account.Id updater ) { fire ( project , refUpdate.getName ( ) , refUpdate.getOldObjectId ( ) , refUpdate.getNewObjectId ( ) , type , util.accountInfo ( updater ) ) ; }
public com.google.gerrit.acceptance.RestResponse delete ( java.lang.String endPoint ) throws java.io.IOException { return execute ( org.apache.http.client.fluent.Request.Delete ( getUrl ( endPoint ) ) ) ; }
public com.google.gerrit.server.CurrentUser getCurrentUser ( ) { throw new com.google.inject.OutOfScopeException ( "No user on merge thread" ) ; }
public void onLoad ( com.google.gwt.event.dom.client.LoadEvent event ) { setVisible ( true ) ; }
protected void init ( java.lang.String name , @ java.lang.SuppressWarnings ( value = "unchecked" ) com.google.gerrit.server.query.Predicate < T > ... args ) { this . init = true ; this . name = name ; this . children = com.google.common.collect.ImmutableList.copyOf ( args ) ; }
private void showPatch ( final boolean showPatch ) { noDifference.setVisible ( ( ! showPatch ) ) ; patchTable.setVisible ( showPatch ) ; patchTable.setRegisterKeys ( ( ( isCurrentView ( ) ) && showPatch ) ) ; }
public com.googlesource.gerrit.plugins.its.phabricator.conduit.results.ManiphestEdit maniphestEdit ( int taskId , java.lang.String comment ) throws com.googlesource.gerrit.plugins.its.phabricator.conduit.ConduitException { return maniphestEdit ( taskId , comment , null , com.googlesource.gerrit.plugins.its.phabricator.conduit.Conduit.ACTION_COMMENT ) ; }
public com.google.gerrit.reviewdb.client.Change update ( com.google.gerrit.reviewdb.client.Change change ) { change.setCurrentPatchSet ( patchSetInfoFactory.get ( newCommit , ps.getId ( ) ) ) ; return change ; }
public boolean isVisible ( ) { return ( getProjectControl ( ) . visibleForReplication ( ) ) || ( canPerform ( Permission.READ ) ) ; }
public com.google.gerrit.reviewdb.server.ReviewDb getDb ( ) { com.google.common.base.Preconditions.checkNotNull ( dbWrapper ) ; return dbWrapper ; }
public void onClick ( com.google.gwt.event.dom.client.ClickEvent event ) { for ( com.google.gerrit.reviewdb.client.Patch p : detail.getPatches ( ) ) { openWindow ( com.google.gerrit.client.Dispatcher.toSideBySide ( base , p.getKey ( ) ) ) ; } }
public final native void from ( net.codemirror.lib.Pos f ) ;
public java.util.List < org.pegdown.ast.Node > parse ( org.parboiled.support.StringBuilderVar body ) { if ( ( parser ) == null ) { parser = com.google.gitiles.doc.GitilesMarkdown.newParser ( ) ; } return parser.parseMarkdown ( body.getChars ( ) ) . getChildren ( ) ; }
private boolean isEmpty ( ) { if ( ! ( migration.writeChanges ( ) ) ) { return true ; } return ( changeUpdates.isEmpty ( ) ) && ( draftUpdates.isEmpty ( ) ) ; }
public java.lang.String getMissingDownstreamsMessage ( ) throws org.eclipse.jgit.errors.ConfigInvalidException { java.lang.String message = getConfig ( ) . getString ( "global" , null , "missingDownstreamsMessage" ) ; if ( message == null ) { message = "Missing downstream branches ${missingDownstreams}. Please recreate the automerges. " + "If your topic contains quotes or braces, please remove them." ; } return message ; }
protected void setUp ( ) throws java.lang.Exception { repo = new org.eclipse.jgit.junit.TestRepository < org.eclipse.jgit.internal.storage.dfs.DfsRepository > ( new org.eclipse.jgit.internal.storage.dfs.InMemoryRepository ( new org.eclipse.jgit.internal.storage.dfs.DfsRepositoryDescription ( "test" ) ) ) ; }
public void createEmptyChange_InvalidSubject ( ) throws java.lang.Exception { com.google.gerrit.extensions.common.ChangeInput ci = newChangeInput ( ChangeStatus.NEW ) ; ci.subject = "Change-Id: I1234000000000000000000000000000000000000" ; assertCreateFails ( ci , com.google.gerrit.extensions.restapi.ResourceConflictException.class , "missing subject; Change-Id must be in commit message footer" ) ; }
public void run ( ) { skipManager.removeAll ( ) ; clearMarkers ( ) ; diffTable.sidePanel.clearDiffGutters ( ) ; setShowIntraline ( prefs.intralineDifference ( ) ) ; render ( diff ) ; skipManager.render ( prefs.context ( ) , diff ) ; }
public java.util.concurrent.ScheduledFuture < ? > scheduleWithFixedDelay ( java.lang.Runnable command , long initialDelay , long delay , java.util.concurrent.TimeUnit unit ) { com.ericsson.gerrit.plugins.eventslog.SQLStoreTest.log.info ( command.toString ( ) ) ; command.run ( ) ; return null ; }
public void registerCacheUsageListener ( net.sf.ehcache.statistics.CacheUsageListener cacheUsageListener ) throws java.lang.IllegalStateException { self.registerCacheUsageListener ( cacheUsageListener ) ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { sendButton.setEnabled ( false ) ; cancelButton.setEnabled ( false ) ; onSend ( ) ; }
private void initSshd ( ) { sshInjector = createSshInjector ( ) ; manager.add ( sshInjector ) ; }
private boolean shouldReplicate ( com.google.gerrit.server.project.ProjectControl projectControl ) { return ( projectControl.isReadable ( ) ) && ( ( ! ( projectControl.isHidden ( ) ) ) || ( config.replicateHiddenProjects ( ) ) ) ; }
com.google.gwtorm.client.ResultSet < com.google.gerrit.reviewdb.PatchLineComment > draftByPatchAuthor ( com.google.gerrit.reviewdb.Patch.Key patch , com.google.gerrit.reviewdb.Account.Id author ) throws com.google.gwtorm.client.OrmException ;
protected < T > T buildJson ( java.lang.String path , com.google.gson.reflect.TypeToken < T > typeOfT ) throws java.lang.Exception { return buildJson ( path , typeOfT , "" ) ; }
public static java.lang.String toSideBySide ( @ com.google.gerrit.common.Nullable com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.client.DiffObject diffBase , com.google.gerrit.reviewdb.client.PatchSet.Id revision , java.lang.String fileName ) { return com.google.gerrit.client.Dispatcher.toPatch ( "sidebyside" , project , diffBase , revision , fileName , null , 0 ) ; }
void restore ( com.googlecode.prolog_cafe.lang.Prolog engine ) { engine.cont = this . cont ; engine.r1 = this . r1 ; engine.r2 = this . r2 ; }
private com.google.gerrit.common.data.SubmitTypeRecord typeRuleError ( java.lang.String err ) { com.google.gerrit.common.data.SubmitTypeRecord rec = new com.google.gerrit.common.data.SubmitTypeRecord ( ) ; rec.status = SubmitTypeRecord.Status.RULE_ERROR ; rec.errorMessage = err ; return rec ; }
public void setStatus ( java.lang.String status ) throws com.google.gerrit.extensions.restapi.RestApiException { com.google.gerrit.server.account.PutStatus.Input in = new com.google.gerrit.server.account.PutStatus.Input ( status ) ; try { putStatus.apply ( account , in ) ; } catch ( com.google.gwtorm.server.OrmException | java.io.IOException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot set status" , e ) ; } }
private com.google.gerrit.server.plugins.PluginEntry resourceOf ( java.util.jar.JarEntry jarEntry ) throws java.io.IOException { return new com.google.gerrit.server.plugins.PluginEntry ( jarEntry.getName ( ) , jarEntry.getTime ( ) , java.util.Optional.of ( jarEntry.getSize ( ) ) , attributesOf ( jarEntry ) ) ; }
public final native boolean isScrollSetByOther ( ) ;
public com.google.gerrit.reviewdb.client.Change abandon ( com.google.gerrit.server.update.BatchUpdate.Factory updateFactory , com.google.gerrit.server.project.ChangeControl control , java.lang.String msgTxt ) throws com.google.gerrit.extensions.restapi.RestApiException , com.google.gerrit.server.update.UpdateException { return abandon ( updateFactory , control , msgTxt , NotifyHandling.ALL , com.google.common.collect.ImmutableListMultimap.of ( ) ) ; }
public void onClick ( com.google.gwt.event.dom.client.ClickEvent event ) { onSaveType ( ) ; }
javax.servlet.http.HttpServlet getPolyGerritUiIndexServlet ( @ com.google.inject.name.Named ( value = com.google.gerrit.httpd.raw.StaticModule.CACHE ) com.google.common.cache.Cache < java.nio.file.Path , com.google.gerrit.httpd.raw.ResourceServlet.Resource > cache ) { return new com.google.gerrit.httpd.raw.SingleFileServlet ( cache , polyGerritBasePath ( ) . resolve ( "index.html" ) , isDev ( ) ) ; }
protected void onOpenItem ( final com.google.gerrit.client.reviewdb.Project item ) { com.google.gwt.user.client.History.newItem ( link ( item ) ) ; }
public void testGcNonExistingProject_NotFound ( ) throws java.lang.Exception { POST ( "/projects/non-existing/gc" ) . assertNotFound ( ) ; }
private static boolean isStateChange ( javax.servlet.http.HttpServletRequest req ) { return ! ( com.google.gerrit.httpd.restapi.RestApiServlet.isGetOrHead ( req ) ) ; }
private PushOneCommit.Result pushTo ( java.lang.String ref ) throws java.io.IOException , org.eclipse.jgit.api.errors.GitAPIException { com.google.gerrit.acceptance.PushOneCommit push = pushFactory.create ( db , admin.getIdent ( ) ) ; return push.to ( git , ref ) ; }
public static org.eclipse.jgit.lib.Config noteDbEnabled ( ) { @ com.google.gerrit.server.config.GerritServerConfig org.eclipse.jgit.lib.Config cfg = new org.eclipse.jgit.lib.Config ( ) ; cfg.setBoolean ( "notedb" , null , "write" , true ) ; cfg.setBoolean ( "notedb" , "comments" , "read" , true ) ; return cfg ; }
public void execute ( ) { irevTxtBox.selectAll ( ) ; irevTxtBox.setFocus ( true ) ; }
public com.google.gerrit.server.query.change.QueryProcessor setLimit ( int n ) { limitFromCaller = n ; return this ; }
public static com.google.inject.Key < org.apache.sshd.server.CommandFactory.Command > key ( final com.google.gerrit.server.ssh.CommandName name ) { return com.google.inject.Key.get ( CommandFactory.Command.class , name ) ; }
public java.lang.String apply ( com.google.gerrit.server.account.AccountResource rsrc ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.extensions.restapi.ResourceNotFoundException { return rsrc.getUser ( ) . state ( ) . getUserName ( ) . orElseThrow ( ResourceNotFoundException :: new ) ; }
com.google.gerrit.server.notedb.ChangeUpdate create ( com.google.gerrit.server.project.ChangeControl ctl , java.util.Date when , java.util.Comparator < java.lang.String > labelNameComparator ) ;
public void onCellClicked ( com.google.gwt.user.client.ui.SourcesTableEvents sender , int row , int cell ) { if ( cell == ( com.google.gerrit.client.changes.ChangeTable.C_STAR ) ) { onStarClick ( row ) ; } else if ( ( getRowItem ( row ) ) != null ) { movePointerTo ( row ) ; } }
public final boolean rawWriteChangesSetting ( ) { return snapshot.get ( ) . writeChanges ( ) ; }
private boolean search ( java.util.Set < com.google.gerrit.reviewdb.client.AccountGroup.UUID > ids ) { return user.getEffectiveGroups ( ) . containsAnyOf ( ids ) ; }
public void commentOnReviewableChangeByOwnerCcingSelfNotifyOwner ( ) throws java.lang.Exception { com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableChange ( com.google.gerrit.server.account.WatchConfig.NotifyType.ALL_COMMENTS ) ; setEmailStrategy ( sc.owner , com.google.gerrit.extensions.client.GeneralPreferencesInfo.EmailStrategy.CC_ON_OWN_COMMENTS ) ; review ( sc.owner , sc.changeId , com.google.gerrit.extensions.client.GeneralPreferencesInfo.EmailStrategy.ENABLED , com.google.gerrit.extensions.api.changes.NotifyHandling.OWNER ) ; assertThat ( sender ) . notSent ( ) ; }
protected void preDisplay ( java.lang.Void result ) { initEditor ( content ) ; content = null ; }
public void remove ( ) { for ( com.google.gerrit.metrics.dropwizard.CallbackMetricGlue m : all ) { m.remove ( ) ; } }
public RefUpdate.Result modifyFile ( com.google.gerrit.server.edit.ChangeEdit edit , java.lang.String file , com.google.gerrit.extensions.restapi.RawInput content ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.server.project.InvalidChangeOperationException , java.io.IOException { return modify ( com.google.gerrit.server.edit.ChangeEditModifier.TreeOperation.CHANGE_ENTRY , edit , file , content ) ; }
public boolean updateTeamModels ( java.util.Collection < com.gitblit.models.TeamModel > arg0 ) { return false ; }
public void publish ( final com.google.gerrit.reviewdb.client.PatchSet.Id patchSetId , final com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.ChangeDetail > callback ) { publishAction.create ( patchSetId ) . to ( callback ) ; }
protected void configure ( ) { bind ( com.google.gerrit.server.cache.CachePool.class ) . to ( com.google.gerrit.ehcache.EhcachePoolImpl.class ) ; bind ( com.google.gerrit.ehcache.EhcachePoolImpl.class ) ; listener ( ) . to ( com.google.gerrit.ehcache.EhcachePoolImpl.Lifecycle.class ) ; }
public void commentOnWipChangeByOwner ( ) throws java.lang.Exception { com.google.gerrit.acceptance.server.mail.StagedChange sc = stageWipChange ( ) ; review ( sc.owner , sc.changeId , com.google.gerrit.extensions.client.GeneralPreferencesInfo.EmailStrategy.ENABLED ) ; assertThat ( sender ) . notSent ( ) ; }
public void fire ( com.google.gerrit.reviewdb.client.Project.NameKey project , org.eclipse.jgit.lib.RefUpdate refUpdate , org.eclipse.jgit.transport.ReceiveCommand.Type type , com.google.gerrit.server.account.AccountState updater ) { fire ( project , refUpdate.getName ( ) , refUpdate.getOldObjectId ( ) , refUpdate.getNewObjectId ( ) , type , util.accountInfo ( updater ) ) ; }
public void encode ( T obj , final byte [ ] data , int offset , int length ) { com.google.protobuf.CodedOutputStream out = com.google.protobuf.CodedOutputStream.newInstance ( data , offset , length ) ; encode ( obj , out ) ; com.google.gwtorm.protobuf.ProtobufCodec.flush ( out ) ; }
public Account.Id apply ( java.lang.String refPart ) { return Account.Id.parse ( refPart ) ; }
public com.google.gerrit.common.data.PermissionRange getRange ( java.lang.String permission ) { if ( com.google.gerrit.common.data.GlobalCapability.hasRange ( permission ) ) { return com.google.gerrit.server.account.AccountLimits.toRange ( permission , getRules ( permission ) ) ; } return null ; }
private java.lang.String pushTagForNewCommit ( com.google.gerrit.acceptance.rest.project.PushTagIT.TagType tagType , org.eclipse.jgit.transport.RemoteRefUpdate.Status expectedStatus ) throws java.lang.Exception { return pushTag ( tagType , null , true , false , expectedStatus ) ; }
public void onSuccess ( com.google.gerrit.client.projects.ConfigInfo result ) { enableForm ( ) ; display ( result ) ; }
void close ( ) { if ( ( update ) != null ) { update.close ( ) ; } rw.close ( ) ; reader.close ( ) ; ins.close ( ) ; repo.close ( ) ; }
void onCancel ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { hide ( ) ; fileTable.registerKeys ( ) ; }
private static void assertDeleted ( java.lang.String expectedNewName , com.google.gerrit.server.diff.PatchListEntry e ) { com.google.gerrit.acceptance.server.change.PatchListCacheIT.assertName ( expectedNewName , e ) ; com.google.common.truth.Truth.assertThat ( e.getChangeType ( ) ) . isEqualTo ( ChangeType.DELETED ) ; }
private static < T > java.util.List < com.google.gerrit.server.query.Predicate < T > > list ( final com.google.gerrit.server.query.Predicate < T > ... predicates ) { return java.util.Arrays.asList ( predicates ) ; }
public void testBadEventAndItIsForwarded ( ) throws java.lang.Exception { setUpMocks ( false ) ; com.ericsson.gerrit.plugins.highavailability.forwarder.Context.setForwardedEvent ( true ) ; eventHandler.onEvent ( event ) ; com.ericsson.gerrit.plugins.highavailability.forwarder.Context.unsetForwardedEvent ( ) ; org.mockito.Mockito.verifyZeroInteractions ( eventForwarder ) ; }
public java.lang.String getLocalUser ( ) { if ( externalId.isScheme ( com.google.gerrit.server.account.ExternalId.SCHEME_GERRIT ) ) { return externalId.id ( ) ; } return null ; }
com.google.gerrit.server.permissions.ChangeControl create ( com.google.gerrit.server.permissions.RefControl refControl , com.google.gerrit.server.notedb.ChangeNotes notes ) { return new com.google.gerrit.server.permissions.ChangeControl ( changeDataFactory , approvalsUtil , refControl , notes , patchSetUtil ) ; }
public void remove ( ) { for ( java.lang.String name : names ) { descriptions.remove ( name ) ; registry.remove ( name ) ; } }
private static java.lang.Class < ? > findClass ( java.lang.String klazzname ) { try { return java.lang.Class.forName ( klazzname ) ; } catch ( java.lang.ClassNotFoundException e ) { throw com.google.gerrit.pgm.JythonShell.noShell ( ( ( "Class " + klazzname ) + " not found" ) , e ) ; } }
public void evict ( com.google.gerrit.reviewdb.client.AccountGroup.NameKey groupName ) { if ( groupName != null ) { byName.invalidate ( groupName.get ( ) ) ; } }
private void upToChange ( ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChangeInEditMode ( revision.getParentKey ( ) ) ) ; }
public void createDraftChange ( ) throws java.lang.Exception { com.google.common.truth.TruthJUnit.assume ( ) . that ( isAllowDrafts ( ) ) . isTrue ( ) ; assertChange ( newChangeInfo ( ChangeStatus.DRAFT ) ) ; }
void onSave ( com.google.gwt.event.dom.client.ClickEvent e ) { e.stopPropagation ( ) ; save ( null ) ; }
public void parseReviewer ( ) throws java.lang.Exception { assertParseSucceeds ( ( "Update change\n" + ( ( ( ( ( "\n" + "Branch: refs/heads/master\n" ) + "Patch-Set: 1\n" ) + "Reviewer: Change Owner <1@gerrit>\n" ) + "CC: Other Account <2@gerrit>\n" ) + "Subject: This is a test change\n" ) ) ) ; assertParseFails ( ( "Update change\n" + ( ( "\n" + "Patch-Set: 1\n" ) + "Reviewer: 1@gerrit\n" ) ) ) ; }
void setAutoHideDiffHeader ( boolean hide ) { scrollSynchronizer.setAutoHideDiffTableHeader ( hide ) ; }
public boolean isMatchable ( ) { return ( this ) instanceof com.google.gerrit.server.query.Matchable ; }
private void assertNotesMigrationState ( com.google.gerrit.server.notedb.NotesMigrationState expected ) throws java.lang.Exception { noteDbConfig.load ( ) ; com.google.common.truth.Truth.assertThat ( com.google.gerrit.server.notedb.NotesMigrationState.forConfig ( noteDbConfig ) ) . hasValue ( expected ) ; }
public synchronized void sendRedirect ( java.lang.String msg ) { status = SC_FOUND ; committed = true ; }
public void testFindInDeleteGap ( ) { com.google.gerrit.client.diff.LineMapper mapper = new com.google.gerrit.client.diff.LineMapper ( ) ; mapper.appendDelete ( 10 ) ; org.junit.Assert.assertEquals ( new com.google.gerrit.client.diff.LineMapper.LineOnOtherInfo ( ( - 1 ) , false ) , mapper.lineOnOther ( Side.PARENT , 9 ) ) ; }
private java.util.List < com.google.gerrit.server.diff.PatchListEntry > getCurrentPatches ( java.lang.String changeId ) throws java.lang.Exception { return patchListCache.get ( getKey ( null , getCurrentRevisionId ( changeId ) ) , project ) . getPatches ( ) ; }
java.net.URL getBaseUrl ( ) { return baseUrl ; }
public boolean updateUserModels ( java.util.Collection < com.gitblit.models.UserModel > arg0 ) { return false ; }
protected void formatChange ( ) throws com.google.gerrit.server.mail.EmailException { appendText ( velocifyFile ( "NewChange.vm" ) ) ; }
public java.lang.String resourcePath ( ) { if ( ( resourcePath ) == null ) { resourcePath = java.lang.String.format ( "/projects/%s/+refs/%s" , getProjectControl ( ) . getProjectState ( ) . getName ( ) , refName ) ; } return resourcePath ; }
void onUpdate ( org.eclipse.jgit.lib.ObjectId oldNotesRev , org.eclipse.jgit.lib.ObjectId newNotesRev , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId > extId ) throws java.io.IOException ;
private com.google.gerrit.extensions.api.changes.AddReviewerResult addReviewer ( java.lang.String changeId , com.google.gerrit.extensions.api.changes.AddReviewerInput in , int expectedStatus ) throws java.lang.Exception { com.google.gerrit.acceptance.RestResponse resp = adminRestSession.post ( ( ( "/changes/" + changeId ) + "/reviewers" ) , in ) ; return com.google.gerrit.acceptance.rest.change.ChangeReviewersIT.readContentFromJson ( resp , expectedStatus , com.google.gerrit.extensions.api.changes.AddReviewerResult.class ) ; }
public java.lang.String toString ( ) { return ( "IdentifiedUser[account " + ( getAccountId ( ) ) ) + "]" ; }
public java.util.List < com.google.gerrit.server.query.change.ChangeData > byProjectCommit ( com.google.gerrit.reviewdb.client.Project.NameKey project , java.lang.String hash ) throws com.google.gwtorm.server.OrmException { return query ( com.google.gerrit.server.query.Predicate.and ( com.google.gerrit.server.query.change.InternalChangeQuery.project ( project ) , com.google.gerrit.server.query.change.InternalChangeQuery.commit ( hash ) ) ) ; }
private static com.google.gerrit.server.IdentifiedUser checkUser ( com.google.gerrit.server.project.RefControl ctl ) { com.google.common.base.Preconditions.checkArgument ( ctl.getUser ( ) . isIdentifiedUser ( ) , "only IdentifiedUser may create change" ) ; return ( ( com.google.gerrit.server.IdentifiedUser ) ( ctl.getUser ( ) ) ) ; }
public void sendAsync ( ) { @ java.lang.SuppressWarnings ( value = "unused" ) java.util.concurrent.Future < ? > possiblyIgnoredError = sendEmailsExecutor.submit ( this ) ; }
public java.lang.String decode ( final java.lang.String e ) { return com.google.gwt.http.client.URL.decodeQueryString ( e ) ; }
static void deleteSessionCookie ( ) { com.google.gerrit.client.Gerrit.myAccount = null ; com.google.gerrit.client.Gerrit.xsrfToken = null ; com.google.gerrit.client.Gerrit.refreshMenuBar ( ) ; com.google.gwt.user.client.Cookies.removeCookie ( "GerritAccount" ) ; }
void resizeCodeMirror ( ) { int hdr = ( header.getOffsetHeight ( ) ) + ( diffTable.getHeaderHeight ( ) ) ; cmA.adjustHeight ( hdr ) ; cmB.adjustHeight ( hdr ) ; }
private static java.lang.String skip ( java.lang.String token ) { return token.substring ( com.google.gerrit.client.Dispatcher.prefixlen ) ; }
protected void assertResultEquals ( com.google.gerrit.reviewdb.client.Change expected , com.google.gerrit.extensions.common.ChangeInfo actual ) { com.google.common.truth.Truth.assertThat ( actual._number ) . isEqualTo ( expected.getId ( ) . get ( ) ) ; }
public void onSuccess ( ) { com.google.gerrit.client.Gerrit.display ( token , new com.google.gerrit.client.documentation.DocScreen ( com.google.gerrit.client.Dispatcher.skip ( token ) ) ) ; }
protected void preDisplay ( com.google.gerrit.client.projects.ConfigInfoCache.Entry result ) { commentLinkProcessor = result.getCommentLinkProcessor ( ) ; setTheme ( result.getTheme ( ) ) ; com.google.gerrit.client.diff.DiffInfo diffInfo = diff ; diff = null ; display ( diffInfo ) ; }
public java.lang.Object apply ( com.google.gerrit.server.account.AccountResource resource , com.google.gerrit.server.account.CreateAccount.Input input ) throws com.google.gerrit.extensions.restapi.ResourceConflictException { throw new com.google.gerrit.extensions.restapi.ResourceConflictException ( "account exists" ) ; }
protected void setCurrentUrl ( com.google.gerrit.client.download.DownloadUrlLink link ) { urls.setVisible ( false ) ; copyLabel.setText ( cmd ) ; }
public com.google.gerrit.server.project.CreateTag create ( com.google.gerrit.server.project.ProjectResource resource , com.google.gerrit.extensions.restapi.IdString name ) { return createTagFactory.create ( name.get ( ) ) ; }
public void myAgreements ( final com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.account.AgreementInfo > callback ) { agreementInfoFactory.create ( ) . to ( callback ) ; }
public void execute ( ) { final java.lang.String to = com.google.gwt.user.client.History.getToken ( ) ; new com.google.gerrit.client.auth.openid.OpenIdSignInDialog ( com.google.gerrit.common.auth.SignInMode.REGISTER , to , null ) . center ( ) ; }
java.lang.String get ( java.lang.String name ) { return flags.cfg.getString ( section , subsection , name ) ; }
public void setChangedLines ( int insertions , int deletions ) { changedLines = com.google.common.base.Optional.of ( new com.google.gerrit.server.query.change.ChangeData.ChangedLines ( insertions , deletions ) ) ; }
public com.google.gerrit.gpg.CheckResult checkCustom ( org.bouncycastle.openpgp.PGPPublicKey key ) { return com.google.gerrit.gpg.CheckResult.ok ( ) ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { buttonClicked = true ; if ( callback != null ) { callback.onFailure ( null ) ; } hide ( ) ; }
public static void restoreTime ( ) { com.google.gerrit.testing.TestTimeUtil.useSystemTime ( ) ; }
public com.google.gerrit.acceptance.RestResponse delete ( java.lang.String endPoint ) throws java.io.IOException { return execute ( org.apache.http.client.fluent.Request.Delete ( ( ( ( url ) + "/a" ) + endPoint ) ) ) ; }
private com.google.gerrit.server.permissions.ProjectControl getProjectControl ( ) { return refControl.getProjectControl ( ) ; }
public java.util.SortedMap < java.lang.String , com.google.gerrit.extensions.common.ProjectInfo > getAsMap ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return list ( this ) ; } catch ( com.google.gerrit.server.permissions.PermissionBackendException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "project list unavailable" , e ) ; } }
private ReceiveCommitsAdvertiseRefsHook.Result getReceivePackRefs ( ) throws java.lang.Exception { com.google.gerrit.server.git.receive.ReceiveCommitsAdvertiseRefsHook hook = new com.google.gerrit.server.git.receive.ReceiveCommitsAdvertiseRefsHook ( queryProvider , project ) ; try ( org.eclipse.jgit.lib.Repository repo = repoManager.openRepository ( project ) ) { return hook.advertiseRefs ( repo.getAllRefs ( ) ) ; } }
protected PushOneCommit.Result amendChange ( java.lang.String changeId ) throws java.lang.Exception { return amendChange ( changeId , "refs/for/master" ) ; }
public void execute ( ) throws com.google.gerrit.extensions.restapi.RestApiException , com.google.gerrit.server.update.UpdateException { execute ( BatchUpdateListener.NONE ) ; }
private com.cisco.gerrit.plugins.slack.config.ProjectConfig getConfig ( boolean publishOnPatchSetCreated ) throws java.lang.Exception { return getConfig ( "^WIP.*" , publishOnPatchSetCreated , true , true , true ) ; }
public void addEventListener ( com.google.gerrit.common.EventListener listener , com.google.gerrit.server.CurrentUser user ) { listeners.put ( listener , new com.google.gerrit.common.ChangeHookRunner.EventListenerHolder ( listener , user ) ) ; }
public com.google.gerrit.extensions.api.access.ProjectAccessInfo access ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return getAccess.apply ( checkExists ( ) ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot get access rights" , e ) ; } }
public void testToString ( ) { org.junit.Assert.assertEquals ( "-author:bob" , com.google.gerrit.index.query.Predicate.not ( f ( "author" , "bob" ) ) . toString ( ) ) ; }
public void deleteReviewerFromReviewableChangeByOwnerCcingSelfNotifyNone ( ) throws java.lang.Exception { com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableChangeWithExtraReviewer ( ) ; setEmailStrategy ( sc.owner , EmailStrategy.CC_ON_OWN_COMMENTS ) ; removeReviewer ( sc , extraReviewer , NotifyHandling.NONE ) ; assertThat ( sender ) . notSent ( ) ; }
public java.lang.String encode ( java.lang.String e ) { e = com.google.gwt.http.client.URL.encodeQueryString ( e ) ; e = fixPathImpl ( e ) ; e = fixColonImpl ( e ) ; e = fixDoubleQuote ( e ) ; return e ; }
public org.eclipse.jgit.lib.ObjectId getCommitId ( ) { return commit ; }
public boolean apply ( com.google.gerrit.reviewdb.client.SubmitRecord input ) { return ( input.status ) == ( com.google.gerrit.reviewdb.client.SubmitRecord.Status.OK ) ; }
public java.lang.String toString ( ) { return com.google.common.base.Objects.toStringHelper ( "index" ) . add ( "p" , pred ) . add ( "limit" , limit ) . toString ( ) ; }
public com.google.gerrit.server.IdentifiedUser runAs ( com.google.gerrit.reviewdb.client.Account.Id id , com.google.gerrit.server.CurrentUser caller ) { return new com.google.gerrit.server.IdentifiedUser ( capabilityControlFactory , authConfig , realm , anonymousCowardName , canonicalUrl , accountCache , groupBackend , disableReverseDnsLookup , remotePeerProvider , id , caller ) ; }
public void setProject ( java.lang.String str ) { project = str ; }
public void createNewChange ( ) throws java.lang.Exception { com.google.gerrit.extensions.common.ChangeInfo info = assertCreateSucceeds ( newChangeInput ( ChangeStatus.NEW ) ) ; com.google.common.truth.Truth.assertThat ( info.revisions.get ( info.currentRevision ) . commit.message ) . contains ( ( "Change-Id: " + ( info.changeId ) ) ) ; }
private static com.google.gerrit.server.query.change.AndSource andSource ( com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > ... preds ) { return new com.google.gerrit.server.query.change.AndSource ( java.util.Arrays.asList ( preds ) ) ; }
public void run ( ) { java.lang.String token = host.getToken ( ) ; if ( cm.hasActiveLine ( ) ) { net.codemirror.lib.CodeMirror.LineHandle handle = cm.getActiveLine ( ) ; int line = ( cm.getLineNumber ( handle ) ) + 1 ; token += ( "@" + ( ( cm.side ( ) ) == ( DisplaySide.A ) ? "a" : "" ) ) + line ; } com.google.gerrit.client.Gerrit.doSignIn ( token ) ; }
public void assertCanDelete ( com.google.gerrit.reviewdb.client.Project project ) throws com.google.gwtorm.server.OrmException , com.googlesource.gerrit.plugins.deleteproject.database.CannotDeleteProjectException { if ( db.submoduleSubscriptions ( ) . bySubmoduleProject ( project.getNameKey ( ) ) . iterator ( ) . hasNext ( ) ) { throw new com.googlesource.gerrit.plugins.deleteproject.database.CannotDeleteProjectException ( "Project is subscribed by other projects." ) ; } }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > evictAsync ( java.lang.String username ) { if ( username != null ) { return cache.removeAsync ( new com.google.gerrit.sshd.SshKeyCacheImpl.Username ( username ) ) ; } else { return com.google.common.util.concurrent.Futures.immediateFuture ( null ) ; } }
public void onFocus ( final com.google.gwt.event.dom.client.FocusEvent event ) { if ( ( currentRow ) < 0 ) { onDown ( ) ; } }
public void onSuccess ( final com.google.gwtjsonrpc.common.com.google.gerrit.client.VoidResult result ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.client.Dispatcher.toGroup ( getGroupUUID ( ) , AccountGroupScreen.INFO ) ) ; }
public java.util.List < java.lang.String > getTeamnamesForRepositoryRole ( java.lang.String role ) { return java.util.Collections.emptyList ( ) ; }
public final native net.codemirror.lib.CodeMirrorDoc getDoc ( ) ;
public final com.google.gerrit.gpg.CheckResult check ( org.bouncycastle.openpgp.PGPPublicKey key ) { return check ( key , key.getKeyID ( ) ) ; }
public void setUp ( ) throws java.lang.Exception { admin = accounts.create ( "admin" , "admin@example.com" , "Administrator" , "Administrators" ) ; project = new com.google.gerrit.reviewdb.client.Project.NameKey ( "p" ) ; com.google.gerrit.acceptance.git.GitUtil.initSsh ( admin ) ; com.google.gerrit.acceptance.SshSession sshSession = new com.google.gerrit.acceptance.SshSession ( server , admin ) ; com.google.gerrit.acceptance.git.GitUtil.createProject ( sshSession , project.get ( ) ) ; git = com.google.gerrit.acceptance.git.GitUtil.cloneProject ( ( ( ( sshSession.getUrl ( ) ) + "/" ) + ( project.get ( ) ) ) ) ; sshSession.close ( ) ; db = reviewDbProvider.open ( ) ; }
protected void init ( ) throws com.google.gerrit.server.mail.EmailException { super . init ( ) ; ccAllApprovals ( ) ; bccStarredBy ( ) ; bccWatches ( NotifyType.ALL_COMMENTS ) ; }
protected com.google.gerrit.server.patch.PatchList getPatchList ( ) throws com.google.gerrit.server.patch.PatchListNotAvailableException { if ( ( patchSet ) != null ) { return args.patchListCache.get ( change , patchSet ) ; } throw new com.google.gerrit.server.patch.PatchListNotAvailableException ( "no patchSet specified" ) ; }
public void setUp ( ) throws java.lang.Exception { tr = new org.eclipse.jgit.junit.TestRepository ( new org.eclipse.jgit.internal.storage.dfs.InMemoryRepository ( new org.eclipse.jgit.internal.storage.dfs.DfsRepositoryDescription ( "pubkeys" ) ) ) ; store = new com.google.gerrit.gpg.PublicKeyStore ( tr.getRepository ( ) ) ; }
private com.google.inject.Injector createSshInjector ( ) { return sysInjector.createChildInjector ( new com.google.gerrit.server.ssh.SshModule ( ) , new com.google.gerrit.server.ssh.commands.MasterCommandModule ( ) ) ; }
void onReplace ( org.eclipse.jgit.lib.ObjectId oldNotesRev , org.eclipse.jgit.lib.ObjectId newNotesRev , com.google.gerrit.reviewdb.client.Account.Id accountId , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId > toRemove , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId > toAdd ) throws java.io.IOException ;
public void cancel ( ) { final com.google.gerrit.sshd.SshScope.Context old = com.google.gerrit.sshd.SshScope.set ( context ) ; try { onExit ( com.google.gerrit.sshd.BaseCommand.STATUS_CANCEL ) ; } finally { com.google.gerrit.sshd.SshScope.set ( old ) ; } }
public java.lang.Object apply ( com.google.gerrit.server.group.GroupResource resource ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.extensions.restapi.BadRequestException , com.google.gerrit.extensions.restapi.ResourceConflictException , java.lang.Exception { return new com.google.gerrit.server.group.GroupInfo ( resource.getControl ( ) . getGroup ( ) ) ; }
public java.util.Set < com.google.gerrit.reviewdb.client.AccountGroup.UUID > getAllOwners ( ) { java.util.Set < com.google.gerrit.reviewdb.client.AccountGroup.UUID > result = new java.util.HashSet < > ( ) ; for ( com.google.gerrit.server.project.ProjectState p : tree ( ) ) { result.addAll ( p.localOwners ) ; } return result ; }
public void confirm ( ) throws java.lang.Exception { com.google.gerrit.server.config.ConfirmEmail.Input in = new com.google.gerrit.server.config.ConfirmEmail.Input ( ) ; in.token = emailTokenVerifier.encode ( admin.getId ( ) , "new.mail@example.com" ) ; adminSession.put ( "/config/server/email.confirm" , in ) . assertNoContent ( ) ; }
public void setUseContributorAgreements ( final com.google.gerrit.reviewdb.client.Project.InheritedBoolean u ) { useContributorAgreements = u ; }
public void onSuccess ( final com.google.gerrit.client.account.AccountInfo memberInfo ) { addMemberBox.setEnabled ( true ) ; addMemberBox.setText ( "" ) ; members.insert ( memberInfo ) ; }
javax.servlet.http.HttpServlet getPolyGerritUiIndexServlet ( @ com.google.inject.name.Named ( value = com.google.gerrit.httpd.raw.StaticModule.CACHE ) com.google.common.cache.Cache < java.nio.file.Path , com.google.gerrit.httpd.raw.ResourceServlet.Resource > cache ) { return new com.google.gerrit.httpd.raw.SingleFileServlet ( cache , polyGerritBasePath ( ) . resolve ( "index.html" ) , getPaths ( ) . isDev ( ) ) ; }
private void removeAuditEntriesFor ( com.google.gerrit.reviewdb.client.AccountGroup.Id groupId ) throws java.lang.Exception { auditEntryDeletion.setInt ( 1 , groupId.get ( ) ) ; auditEntryDeletion.executeUpdate ( ) ; }
private void skipIfWin32Platform ( ) { if ( com.google.gerrit.server.util.HostPlatform.isWin32 ( ) ) { java.lang.System.err.println ( ( ( " - Skipping " + ( test.getMethodName ( ) ) ) + " on this system" ) ) ; org.junit.Assume.assumeTrue ( false ) ; } }
private java.util.concurrent.ScheduledThreadPoolExecutor getExecutor ( ) { com.google.gerrit.server.git.QueueProvider.QueueType qt = capabilityFactory.create ( user.get ( ) ) . getQueueType ( ) ; return queue.getQueue ( qt ) ; }
private void redisplay ( ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( id ) ) ; }
private com.google.gerrit.server.mail.FromAddressGenerator create ( ) { return new com.google.gerrit.server.mail.FromAddressGeneratorProvider ( config , "Anonymous Coward" , ident , accountCache ) . get ( ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { if ( com.google.gerrit.client.Gerrit.isSignedIn ( ) ) { reviewers.onOpenForm ( ) ; } else { com.google.gerrit.client.Gerrit.doSignIn ( getToken ( ) ) ; } }
public static com.google.inject.Key bindingKey ( ) { return com.google.inject.Key.get ( new com.google.inject.TypeLiteral < com.google.common.cache.LoadingCache < com.google.gerrit.server.change.MergeabilityCache.EntryKey , java.lang.Boolean > > ( ) { } , com.google.inject.name.Names.named ( com.google.gerrit.server.change.MergeabilityCache.CACHE_NAME ) ) ; }
private static org.apache.lucene.index.Term idTerm ( com.google.gerrit.reviewdb.client.Project.NameKey nameKey ) { return com.google.gerrit.lucene.QueryBuilder.stringTerm ( com.google.gerrit.index.project.ProjectField.NAME.getName ( ) , nameKey.get ( ) ) ; }
public com.google.gerrit.server.query.change.ChangeDataSource getSource ( com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > p , com.google.gerrit.server.query.change.QueryOptions opts ) throws com.google.gerrit.server.query.QueryParseException { return new com.google.gerrit.server.index.FakeIndex.Source ( p ) ; }
protected java.lang.String getId ( com.google.gerrit.server.group.InternalGroup group ) { return group.getGroupUUID ( ) . get ( ) ; }
public void want ( final java.lang.Iterable < com.google.gerrit.reviewdb.client.AccountGroup.UUID > uuids ) { for ( final com.google.gerrit.reviewdb.client.AccountGroup.UUID uuid : uuids ) { want ( uuid ) ; } }
public void rollback ( ) { throw new com.google.gerrit.testing.DisabledReviewDb.Disabled ( ) ; }
void changeProjectAccess ( com.google.gerrit.reviewdb.client.Project.NameKey projectName , java.lang.String baseRevision , java.lang.String message , java.util.List < com.google.gerrit.common.data.AccessSection > sections , com.google.gerrit.reviewdb.client.Project.NameKey parentProjectName , com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.ProjectAccess > callback ) ;
protected com.google.gerrit.server.AnonymousUser createValue ( com.googlecode.prolog_cafe.lang.Prolog engine ) { com.google.gerrit.rules.PrologEnvironment env = ( ( com.google.gerrit.rules.PrologEnvironment ) ( engine.control ) ) ; return env.getArgs ( ) . getAnonymousUser ( ) ; }
public boolean isVisible ( ) { return ( getProjectControl ( ) . visibleForReplication ( ) ) || ( canPerform ( Permission.READ ) ) ; }
public void createBranchByAdminCreateReferenceBlocked_Forbidden ( ) throws java.lang.Exception { blockCreateReference ( ) ; assertCreateFails ( com.google.gerrit.extensions.restapi.AuthException.class , "create not permitted for refs/heads/test" ) ; }
public int getInt ( java.lang.String name , int defaultValue ) { return cfg.getInt ( com.google.gerrit.server.config.PluginConfig.PLUGIN , pluginName , name , defaultValue ) ; }
private void configureCmdLineParser ( ) { factory ( CmdLineParser.Factory.class ) ; registerOptionHandler ( Account.Id.class , com.google.gerrit.server.ssh.args4j.AccountIdHandler.class ) ; registerOptionHandler ( PatchSet.Id.class , com.google.gerrit.server.ssh.args4j.PatchSetIdHandler.class ) ; registerOptionHandler ( com.google.gerrit.server.project.ProjectControl.class , com.google.gerrit.server.ssh.args4j.ProjectControlHandler.class ) ; }
public com.google.gerrit.extensions.api.changes.ReviewerApi reviewer ( java.lang.String id ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return reviewerApi.create ( reviewers.parse ( change , com.google.gerrit.extensions.restapi.IdString.fromDecoded ( id ) ) ) ; } catch ( com.google.gwtorm.server.OrmException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot parse reviewer" , e ) ; } }
public void evict ( final com.google.gerrit.reviewdb.Account.Id accountId ) { byId.remove ( accountId ) ; }
void onDeleteEdit ( com.google.gwt.event.dom.client.ClickEvent e ) { com.google.gerrit.client.change.EditActions.deleteEdit ( changeId ) ; }
public void onPluginLoad ( ) { com.google.gerrit.plugin.client.Plugin.get ( ) . panel ( GerritUiExtensionPoint.CHANGE_SCREEN_HEADER_RIGHT_OF_POP_DOWNS , new com.googlesource.gerrit.plugins.verifystatus.client.JobsDropDownPanel.Factory ( ) ) ; com.google.gerrit.plugin.client.Plugin.get ( ) . panel ( GerritUiExtensionPoint.CHANGE_SCREEN_BELOW_CHANGE_INFO_BLOCK , new com.googlesource.gerrit.plugins.verifystatus.client.JobsPanel.Factory ( ) ) ; }
public final com.google.gerrit.extensions.client.DiffPreferencesInfo.Whitespace ignoreWhitespace ( ) { java.lang.String s = ignoreWhitespaceRaw ( ) ; return s != null ? com.google.gerrit.extensions.client.DiffPreferencesInfo.Whitespace.valueOf ( s ) : com.google.gerrit.extensions.client.DiffPreferencesInfo.Whitespace.IGNORE_NONE ; }
private com.google.gerrit.server.notedb.ChangeUpdate newUpdate ( com.google.gerrit.reviewdb.client.Change c , com.google.gerrit.server.IdentifiedUser user ) throws com.google.gwtorm.server.OrmException { return com.google.gerrit.testutil.TestChanges.newUpdate ( injector , repoManager , c , allUsers , user ) ; }
void setName ( java.lang.String n ) { name = n ; id = com.google.gerrit.extensions.restapi.Url.encode ( n ) ; }
public void onFailure ( java.lang.Throwable caught ) { goChange ( ) ; super . onFailure ( caught ) ; }
private void grant ( com.google.gerrit.reviewdb.Project.NameKey project , com.google.gerrit.reviewdb.ApprovalCategory.Id categoryId , com.google.gerrit.reviewdb.AccountGroup.Id group , java.lang.String ref , int maxValue ) { grant ( project , categoryId , group , ref , maxValue , maxValue ) ; }
public static void createProject ( com.google.gerrit.acceptance.SshSession s , java.lang.String name , com.google.gerrit.reviewdb.client.Project.NameKey parent ) throws com.jcraft.jsch.JSchException , java.io.IOException { com.google.gerrit.acceptance.GitUtil.createProject ( s , name , parent , true ) ; }
private java.util.Collection < org.eclipse.jgit.lib.Ref > getDraftRefs ( org.eclipse.jgit.lib.Repository repo , com.google.gerrit.reviewdb.client.Change.Id changeId ) throws java.io.IOException { return repo.getRefDatabase ( ) . getRefs ( com.google.gerrit.reviewdb.client.RefNames.refsDraftCommentsPrefix ( changeId ) ) . values ( ) ; }
public final com.google.gerrit.reviewdb.client.Project.InheritableBoolean configured_value ( ) { return com.google.gerrit.reviewdb.client.Project.InheritableBoolean.valueOf ( configured_valueRaw ( ) ) ; }
public boolean canRebase ( ) { return ( isOwner ( ) ) || ( getRefControl ( ) . canSubmit ( ) ) ; }
public long getElapsed ( ) { return ( com.google.gerrit.common.TimeUtil.nowMs ( ) ) - ( when ) ; }
protected void preDisplay ( java.lang.Void result ) { display ( diff ) ; }
public void onEvent ( com.google.gerrit.server.events.Event event ) { pool.execute ( new com.ericsson.gerrit.plugins.eventslog.EventHandler.StoreEventTask ( ( ( com.google.gerrit.server.events.ProjectEvent ) ( event ) ) ) ) ; }
private static boolean isConfig ( final org.eclipse.jgit.lib.Ref ref ) { return ref.getName ( ) . equals ( GitRepositoryManager.REF_CONFIG ) ; }
public void testParse_NameEmail2 ( ) { final com.google.gerrit.server.mail.Address a = com.google.gerrit.server.mail.Address.parse ( "A <a@b>" ) ; com.google.common.truth.Truth.assertThat ( a.name ) . isEqualTo ( "A" ) ; com.google.common.truth.Truth.assertThat ( a.email ) . isEqualTo ( "a@b" ) ; }
public void listEmptyGroupIncludes ( ) throws java.lang.Exception { java.lang.String gx = createGroup ( "gx" ) ; com.google.common.truth.Truth.assertThat ( gApi.groups ( ) . id ( gx ) . includedGroups ( ) ) . isEmpty ( ) ; }
public void createDraftChange ( ) throws java.lang.Exception { com.google.common.truth.TruthJUnit.assume ( ) . that ( isAllowDrafts ( ) ) . isTrue ( ) ; assertCreateSucceeds ( newChangeInput ( ChangeStatus.DRAFT ) ) ; }
private void checkRequiresCapability ( com.google.gerrit.httpd.restapi.RestApiServlet.ViewData viewData ) throws com.google.gerrit.extensions.restapi.AuthException { com.google.gerrit.server.account.CapabilityUtils.checkRequiresCapability ( globals.currentUser , viewData.pluginName , viewData.view.getClass ( ) ) ; }
private void initChangeUrl ( ) throws javax.mail.MessagingException { final java.lang.String u = changeUrl ( ) ; if ( u != null ) { msg.setHeader ( "X-Gerrit-ChangeURL" , ( ( "<" + u ) + ">" ) ) ; } }
private void expandAll ( ) { expandSideAll ( ) ; otherBar.expandSideAll ( ) ; manager.remove ( this , otherBar ) ; }
public com.googlesource.gerrit.plugins.github.git.GHRef [ ] getRefs ( ) throws java.io.IOException { return ghRepository.getRefs ( ) ; }
public com.google.gerrit.extensions.api.projects.BranchInfo apply ( com.google.gerrit.server.project.BranchResource rsrc ) throws com.google.gerrit.extensions.restapi.ResourceNotFoundException , java.io.IOException { return list.get ( ) . toBranchInfo ( rsrc ) ; }
public void caseSensitiveEmailLocalPart ( ) throws java.lang.Exception { com.google.gitiles.IdentRevFilter filter = com.google.gitiles.IdentRevFilter.author ( "eSt" ) ; com.google.common.truth.Truth.assertThat ( filter.matchesPerson ( new org.eclipse.jgit.lib.PersonIdent ( "null" , "est@google.com" ) ) ) . isFalse ( ) ; com.google.common.truth.Truth.assertThat ( filter.matchesPerson ( new org.eclipse.jgit.lib.PersonIdent ( "null" , "Establish@google.com" ) ) ) . isFalse ( ) ; com.google.common.truth.Truth.assertThat ( filter.matchesPerson ( new org.eclipse.jgit.lib.PersonIdent ( "null" , "tESt@google.com" ) ) ) . isFalse ( ) ; com.google.common.truth.Truth.assertThat ( filter.matchesPerson ( new org.eclipse.jgit.lib.PersonIdent ( "null" , "tesTing@google.com" ) ) ) . isFalse ( ) ; }
public org.parboiled.Rule [ ] blockPluginRules ( ) { return new org.parboiled.Rule [ ] { cols ( ) , hr ( ) , note ( ) , toc ( ) } ; }
private static java.nio.file.Path getSourseRootOrNull ( ) { try { return com.google.gerrit.launcher.GerritLauncher.resolveInSourceRoot ( "." ) ; } catch ( java.io.FileNotFoundException e ) { return null ; } }
private com.google.gerrit.httpd.resources.Resource getAsHtmlResource ( java.lang.String html , int lastModified ) { return new com.google.gerrit.httpd.resources.SmallResource ( html.getBytes ( java.nio.charset.StandardCharsets.UTF_8 ) ) . setContentType ( "text/html" ) . setCharacterEncoding ( java.nio.charset.StandardCharsets.UTF_8.name ( ) ) . setLastModified ( lastModified ) ; }
static void checkEnabled ( ) throws com.google.gerrit.extensions.restapi.ResourceNotFoundException { if ( ! ( com.google.gerrit.gpg.BouncyCastleUtil.havePGP ( ) ) ) { throw new com.google.gerrit.extensions.restapi.ResourceNotFoundException ( "GPG not enabled" ) ; } }
com.google.common.util.concurrent.ListenableFuture < java.lang.Void > replace ( org.apache.lucene.index.Term term , org.apache.lucene.document.Document doc ) throws java.io.IOException { return new com.google.gerrit.lucene.SubIndex.NrtFuture ( writer.updateDocument ( term , doc ) ) ; }
public void deleteFile ( java.lang.String filePath ) throws com.google.gerrit.extensions.restapi.RestApiException { try { changeEditDeleteContent.apply ( changeResource.getControl ( ) , filePath ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot delete file of change edit" , e ) ; } }
public boolean match ( T object ) throws com.google.gwtorm.server.OrmException { com.google.common.base.Preconditions.checkState ( that.isMatchable ( ) , "match invoked, but child predicate %s doesn't implement %s" , that , com.google.gerrit.index.query.Matchable.class . getName ( ) ) ; return ! ( that.asMatchable ( ) . match ( object ) ) ; }
public static com.google.gerrit.server.diff.ComparisonType againstAutoMerge ( ) { return new com.google.gerrit.server.diff.ComparisonType ( null , true ) ; }
private static java.util.jar.Manifest getPluginManifest ( com.google.gerrit.server.plugins.PluginContentScanner scanner ) throws com.google.gerrit.server.plugins.InvalidPluginException { try { return scanner.getManifest ( ) ; } catch ( java.io.IOException e ) { throw new com.google.gerrit.server.plugins.InvalidPluginException ( "Cannot get plugin manifest" , e ) ; } }
public com.google.gerrit.server.CurrentUser getCurrentUser ( ) { throw new com.google.inject.OutOfScopeException ( "No user on email thread" ) ; }
com.googlesource.gerrit.plugins.replication.ReplicationState [ ] getStatesByRef ( java.lang.String ref ) { java.util.Collection < com.googlesource.gerrit.plugins.replication.ReplicationState > states = stateMap.get ( ref ) ; return states.toArray ( new com.googlesource.gerrit.plugins.replication.ReplicationState [ states.size ( ) ] ) ; }
static boolean dryRun ( com.google.gerrit.server.git.strategy.SubmitDryRun.Arguments args , com.google.gerrit.server.git.CodeReviewCommit mergeTip , com.google.gerrit.server.git.CodeReviewCommit toMerge ) throws com.google.gerrit.server.git.IntegrationException { return args.mergeUtil.canCherryPick ( args.mergeSorter , args.repo , mergeTip , args.rw , toMerge ) ; }
private void redisplay ( ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( patchSet.getId ( ) . getParentKey ( ) ) , new com.google.gerrit.client.changes.ChangeScreen ( patchSet.getId ( ) . getParentKey ( ) ) ) ; }
public final native void setScrollSetByOther ( boolean setByOther ) ;
public void save ( ) { lastUpdated = new java.util.Date ( ) ; com.googlesource.gerrit.plugins.repositoryuse.Usage.log.debug ( java.lang.String.format ( "Saving Usage: %s, %s, %s, %s" , project , branch , destination , ref ) ) ; com.googlesource.gerrit.plugins.repositoryuse.Usage.table.insertOrUpdate ( this ) ; }
public void onSuccess ( final com.google.gerrit.client.admin.AccountGroupDetail result ) { enableForm ( true ) ; saveName.setEnabled ( false ) ; saveOwner.setEnabled ( false ) ; saveDesc.setEnabled ( false ) ; display ( result ) ; }
private boolean isOpen ( ) { return getStyleName ( ) . contains ( style.open ( ) ) ; }
public abstract com.google.gerrit.server.update.RetryHelper.Options build ( ) ;
public com.google.gerrit.server.query.change.ChangeDataSource getSource ( com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > p ) throws com.google.gerrit.server.query.QueryParseException { throw new java.lang.UnsupportedOperationException ( ) ; }
public com.google.gerrit.extensions.restapi.BinaryResult setCharacterEncoding ( java.lang.String encoding ) { return setCharacterEncoding ( java.nio.charset.Charset.forName ( encoding ) ) ; }
public java.util.Optional < com.google.gerrit.reviewdb.client.AccountGroup > load ( com.google.gerrit.reviewdb.client.AccountGroup.Id key ) throws java.lang.Exception { try ( com.google.gerrit.reviewdb.server.ReviewDb db = schema.open ( ) ) { return groups.get ( db , key ) ; } }
public com.google.gerrit.server.IdentifiedUser create ( com.google.inject.Provider < com.google.gerrit.reviewdb.ReviewDb > db , com.google.gerrit.reviewdb.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( capabilityControlFactory , AccessPath.UNKNOWN , authConfig , canonicalUrl , realm , accountCache , groupIncludeCache , null , db , id ) ; }
public void deleteReviewerFromReviewableChangeNotifyNone ( ) throws java.lang.Exception { com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableChangeWithExtraReviewer ( ) ; removeReviewer ( sc , extraReviewer , NotifyHandling.NONE ) ; assertThat ( sender ) . notSent ( ) ; }
public static void drafts ( @ com.google.gerrit.common.Nullable java.lang.String project , com.google.gerrit.reviewdb.client.PatchSet.Id id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.rpc.NativeMap < com.google.gwt.core.client.JsArray < com.google.gerrit.client.changes.CommentInfo > > > cb ) { com.google.gerrit.client.changes.CommentApi.revision ( project , id , "drafts" ) . get ( cb ) ; }
com.google.gerrit.server.notedb.ChangeUpdate create ( com.google.gerrit.reviewdb.client.Change change , @ com.google.inject.assistedinject.Assisted ( value = "effective" ) com.google.gerrit.reviewdb.client.Account.Id accountId , @ com.google.inject.assistedinject.Assisted ( value = "real" ) com.google.gerrit.reviewdb.client.Account.Id realAccountId , org.eclipse.jgit.lib.PersonIdent authorIdent , java.util.Date when , java.util.Comparator < java.lang.String > labelNameComparator ) ;
com.google.gerrit.server.account.GroupDetailFactory create ( com.google.gerrit.reviewdb.client.AccountGroup.UUID groupUuid ) ;
public java.lang.String getShortName ( ) { final java.lang.String n = get ( ) ; if ( n.startsWith ( com.google.gerrit.client.reviewdb.Branch.R_HEADS ) ) { return n.substring ( com.google.gerrit.client.reviewdb.Branch.R_HEADS.length ( ) ) ; } return n ; }
public final int getHeight ( ) { return getWrapperElement ( ) . getClientHeight ( ) ; }
public void setCommit ( org.eclipse.jgit.revwalk.RevWalk rw , org.eclipse.jgit.lib.ObjectId id ) throws java.io.IOException { org.eclipse.jgit.revwalk.RevCommit commit = rw.parseCommit ( id ) ; rw.parseBody ( commit ) ; this . commit = commit ; subject = commit.getShortMessage ( ) ; }
public com.google.gerrit.extensions.webui.UiAction.Description setVisible ( boolean visible ) { return setVisible ( com.google.gerrit.extensions.conditions.BooleanCondition.valueOf ( visible ) ) ; }
public void nextPatchSetId ( ) { ++ ( nbrPatchSets ) ; }
public void delete_MethodNotAllowed ( ) throws java.lang.Exception { adminSession.put ( ( ( "/accounts/" + ( admin.username ) ) + "/username" ) ) . assertMethodNotAllowed ( ) ; }
public void refresh ( ) { Util.DETAIL_SVC.changeDetail ( changeId , new com.google.gerrit.client.rpc.ScreenLoadCallback < com.google.gerrit.client.data.ChangeDetail > ( this ) { @ java.lang.Override protected void preDisplay ( final com.google.gerrit.client.data.ChangeDetail r ) { setStarred ( r.isStarred ( ) ) ; display ( r ) ; } } ) ; }
private java.lang.String urlEditFile ( ) { return ( ( urlEdit ( ) ) + "/" ) + ( com.google.gerrit.acceptance.edit.ChangeEditIT.FILE_NAME ) ; }
public java.lang.String getCommand ( java.lang.String url , java.lang.String ref ) { return ( ( "git pull " + url ) + " " ) + ref ; }
private static com.google.gwt.user.client.ui.HTML newDescriptionLabel ( ) { final com.google.gwt.user.client.ui.HTML d = new com.google.gwt.user.client.ui.HTML ( ) ; d.setStyleName ( "gerrit-ChangeScreen-Description" ) ; return d ; }
public void onSuccess ( com.google.gerrit.client.account.AccountCapabilities ac ) { if ( ac.canPerform ( com.google.gerrit.common.data.GlobalCapability.CREATE_PROJECT ) ) { display ( ) ; } else { com.google.gerrit.client.Gerrit.display ( PageLinks.ADMIN_CREATE_PROJECT , new com.google.gerrit.client.NotFoundScreen ( ) ) ; } }
public void abandonReviewableChangeByOtherCcingSelf ( ) throws java.lang.Exception { com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableChange ( ) ; com.google.gerrit.acceptance.TestAccount other = accountCreator.create ( "other" , "other@example.com" , "other" ) ; abandon ( sc.changeId , other , com.google.gerrit.extensions.client.GeneralPreferencesInfo.EmailStrategy.CC_ON_OWN_COMMENTS ) ; assertThat ( sender ) . sent ( "abandon" , sc ) . to ( sc.owner ) . cc ( sc.reviewer , sc.ccer , other ) . cc ( sc.reviewerByEmail , sc.ccerByEmail ) . bcc ( sc.starrer ) . bcc ( com.google.gerrit.server.account.WatchConfig.NotifyType.ABANDONED_CHANGES ) . noOneElse ( ) ; }
private void afterTest ( ) throws java.lang.Exception { db.close ( ) ; sshSession.close ( ) ; server.stop ( ) ; }
public < I > com.google.gerrit.server.index.FieldDef < I , T > build ( com.google.gerrit.server.index.FieldDef.Getter < I , T > getter ) { return new com.google.gerrit.server.index.FieldDef ( name , type , stored , false , getter ) ; }
protected void onInitUI ( ) { super . onInitUI ( ) ; add ( com.google.gerrit.client.admin.ProjectAccessScreen.uiBinder.createAndBindUi ( this ) ) ; driver = com.google.gwt.core.client.GWT.create ( com.google.gerrit.client.admin.ProjectAccessScreen.Driver.class ) ; accessEditor.setEditing ( false ) ; driver.initialize ( accessEditor ) ; }
private static java.util.jar.JarFile jarFileOf ( com.google.gerrit.server.plugins.Plugin plugin ) { if ( plugin instanceof com.google.gerrit.server.plugins.ServerPlugin ) { return ( ( com.google.gerrit.server.plugins.ServerPlugin ) ( plugin ) ) . getJarFile ( ) ; } else { return null ; } }
com.google.gerrit.server.query.change.QueryOptions getOptions ( ) ;
public void testChangeOwner_OwnerACLGranted ( ) throws com.google.gwtorm.server.OrmException , java.io.IOException , org.eclipse.jgit.api.errors.GitAPIException , org.eclipse.jgit.errors.ConfigInvalidException { grantApproveToChangeOwner ( ) ; approve ( sessionOwner , createMyChange ( ) , HttpStatus.SC_OK ) ; }
public static com.google.gerrit.server.notedb.AbstractChangeNotes.LoadHandle create ( org.eclipse.jgit.revwalk.RevWalk walk , org.eclipse.jgit.lib.ObjectId id ) { return new com.google.gerrit.server.notedb.AutoValue_AbstractChangeNotes_LoadHandle ( com.google.common.base.Preconditions.checkNotNull ( walk ) , ( id != null ? id.copy ( ) : null ) ) ; }
public void start ( final org.apache.sshd.server.Environment env ) { startThread ( new java.lang.Runnable ( ) { public void run ( ) { runImp ( ) ; } } ) ; }
public void visit ( org.commonmark.node.BulletList node ) { wrapChildren ( "ul" , node ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { upToChange ( true ) . run ( ) ; }
public java.util.Map < java.lang.String , java.util.List < com.google.gerrit.extensions.common.CommentInfo > > apply ( com.google.gerrit.server.change.RevisionResource rsrc ) throws com.google.gwtorm.server.OrmException { return commentJson.get ( ) . setFillAccounts ( includeAuthorInfo ( ) ) . newCommentFormatter ( ) . format ( listComments ( rsrc ) ) ; }
public UiAction.Description getDescription ( com.google.gerrit.server.change.ChangeResource rsrc ) { return new com.google.gerrit.extensions.webui.UiAction.Description ( ) . setLabel ( "Edit Topic" ) . setVisible ( rsrc.permissions ( ) . testCond ( ChangePermission.EDIT_TOPIC_NAME ) ) ; }
public com.google.gerrit.server.IdentifiedUser create ( java.net.SocketAddress remotePeer , com.google.gerrit.reviewdb.client.Account.Id id ) { return runAs ( remotePeer , id , null ) ; }
public abstract java.util.List < T > entities ( ) ;
private void loadDefaults ( ) { approvals = com.google.common.collect.ImmutableListMultimap.of ( ) ; reviewers = com.google.common.collect.ImmutableSetMultimap.of ( ) ; submitRecords = com.google.common.collect.ImmutableList.of ( ) ; changeMessages = com.google.common.collect.ImmutableList.of ( ) ; }
public int getCost ( ) { return 1 ; }
public void deleteGpgKey ( ) throws java.lang.Exception { com.google.gerrit.gpg.testutil.TestKey key = com.google.gerrit.gpg.testutil.TestKey.key1 ( ) ; java.lang.String id = key.getKeyIdString ( ) ; addExternalIdEmail ( admin , "test1@example.com" ) ; addGpgKey ( key.getPublicKeyArmored ( ) ) ; assertKeys ( key ) ; gApi.accounts ( ) . self ( ) . gpgKey ( id ) . delete ( ) ; assertKeys ( ) ; exception.expect ( com.google.gerrit.extensions.restapi.ResourceNotFoundException.class ) ; exception.expectMessage ( id ) ; gApi.accounts ( ) . self ( ) . gpgKey ( id ) . get ( ) ; }
default void onUpdate ( org.eclipse.jgit.lib.ObjectId oldNotesRev , org.eclipse.jgit.lib.ObjectId newNotesRev , com.google.gerrit.server.account.externalids.ExternalId updatedExtId ) throws java.io.IOException { onUpdate ( oldNotesRev , newNotesRev , java.util.Collections.singleton ( updatedExtId ) ) ; }
public void onSuccess ( com.google.gerrit.client.VoidResult result ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChangeInEditMode ( changeId ) ) ; hide ( ) ; }
public PatchSet.Id currPatchSetId ( ) { return new com.google.gerrit.reviewdb.PatchSet.Id ( changeId , nbrPatchSets ) ; }
protected void configure ( ) { bind ( com.google.gwtjsonrpc.common.RemoteJsonService.class ) . toInstance ( srv ) ; }
public com.google.gerrit.reviewdb.client.Change getChange ( ) { com.google.common.base.Preconditions.checkState ( ( ( change ) != null ) , "getChange() only valid after creating change" ) ; return change ; }
public void onSuccess ( com.google.gwtjsonrpc.common.VoidResult result ) { typeSelect.setEnabled ( true ) ; setType ( newType ) ; }
public void setOutputFormat ( com.googlesource.gerrit.plugins.verifystatus.VerifyStatusQueryShell.OutputFormat fmt ) { outputFormat = fmt ; }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > removeAsync ( final K key ) { if ( key != null ) { return cache.removeAsync ( wrapKey ( key ) ) ; } else { return com.google.common.util.concurrent.Futures.immediateFuture ( null ) ; } }
public void delete ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { deleteChangeEdit.apply ( changeResource , new com.google.gerrit.server.change.DeleteChangeEdit.Input ( ) ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot delete change edit" , e ) ; } }
public void run ( ) { SshScopes.current.set ( ctx ) ; try { synchronized ( list ) { list.add ( cmd ) ; } runImp ( ) ; } finally { synchronized ( list ) { list.remove ( cmd ) ; } } }
public void add ( java.lang.String name , com.google.gerrit.extensions.common.AccountInfo account ) { if ( account != null ) { args.add ( name ) ; args.add ( format ( account ) ) ; add ( ( name + "-username" ) , account.username ) ; } }
public boolean allRefsAreVisible ( ) { return ( visibleForReplication ( ) ) || ( canPerformOnAllRefs ( ApprovalCategory.READ , ( ( short ) ( 1 ) ) ) ) ; }
public void delete ( com.google.gerrit.server.query.change.ChangeData cd ) throws java.io.IOException { for ( com.google.gerrit.server.index.ChangeIndex i : getWriteIndexes ( ) ) { i.delete ( cd ) ; } }
com.google.gwtorm.client.ResultSet < com.google.gerrit.reviewdb.Change > query ( com.google.gerrit.reviewdb.ReviewDb db , int lim , java.lang.String key ) throws com.google.gerrit.common.errors.InvalidQueryException , com.google.gwtorm.client.OrmException { return searchQuery ( db , query , lim , key , com.google.gerrit.httpd.rpc.ChangeListServiceImpl.QUERY_PREV ) ; }
protected void submitWithConflict ( java.lang.String changeId , java.lang.String expectedError ) throws java.lang.Exception { submit ( changeId , new com.google.gerrit.extensions.api.changes.SubmitInput ( ) , com.google.gerrit.extensions.restapi.ResourceConflictException.class , expectedError ) ; }
private static long keyId ( byte [ ] fp ) { return org.eclipse.jgit.util.NB.decodeInt64 ( fp , ( ( fp.length ) - 8 ) ) ; }
void index ( com.google.gerrit.reviewdb.client.Account.Id id , com.ericsson.gerrit.plugins.highavailability.forwarder.rest.Operation operation ) throws java.io.IOException { indexer.index ( id ) ; logger.debug ( "Account {} successfully indexed" , id ) ; }
public int hash ( com.google.gerrit.server.diff.CharText seq , int ptr ) { return seq.charAt ( ptr ) ; }
private java.util.Collection < com.google.gerrit.index.project.ProjectIndex > getWriteIndexes ( ) { if ( ( indexes ) != null ) { return indexes.getWriteIndexes ( ) ; } return ( index ) != null ? java.util.Collections.singleton ( index ) : com.google.common.collect.ImmutableSet.of ( ) ; }
public com.google.gerrit.server.patch.IntraLineDiff getIntraLineDiff ( org.eclipse.jgit.lib.ObjectId aId , com.google.gerrit.server.patch.Text aText , org.eclipse.jgit.lib.ObjectId bId , com.google.gerrit.server.patch.Text bText , java.util.List < org.eclipse.jgit.diff.Edit > edits ) ;
void onExpandAll ( com.google.gwt.event.dom.client.ClickEvent e ) { expandAll ( ) ; updateSelection ( ) ; otherBar.updateSelection ( ) ; cm.focus ( ) ; }
public < T extends com.google.gwt.core.client.JavaScriptObject > void put ( java.lang.String content , com.google.gwt.user.client.rpc.AsyncCallback < T > cb ) { put ( content , com.google.gerrit.client.rpc.RestApi.wrap ( cb ) ) ; }
public void onFailure ( java.lang.Throwable err ) { if ( com.google.gerrit.client.changes.SubmitFailureDialog.isConflict ( err ) ) { new com.google.gerrit.client.changes.SubmitFailureDialog ( err.getMessage ( ) ) . center ( ) ; } else { super . onFailure ( err ) ; } goChange ( ) ; }
public void onReplaceByKeys ( org.eclipse.jgit.lib.ObjectId oldNotesRev , org.eclipse.jgit.lib.ObjectId newNotesRev , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId.Key > toRemove , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId > toAdd ) { }
public com.google.gerrit.server.patch.PatchList call ( ) throws com.google.gerrit.server.patch.PatchListNotAvailableException , java.io.IOException { try ( org.eclipse.jgit.lib.Repository repo = repoManager.openRepository ( project ) ) { return readPatchList ( key , repo ) ; } }
protected org.eclipse.jgit.lib.PersonIdent newIdent ( com.google.gerrit.reviewdb.client.Account.Id authorId , java.util.Date when ) { return noteUtil.newIdent ( authorId , when , serverIdent ) ; }
public void noNotificationForPrivateChangesForWatchersInNotifyConfig ( ) throws java.lang.Exception { com.google.gerrit.server.mail.Address addr = new com.google.gerrit.server.mail.Address ( "Watcher" , "watcher@example.com" ) ; com.google.gerrit.server.git.NotifyConfig nc = new com.google.gerrit.server.git.NotifyConfig ( ) ; nc.addEmail ( addr ) ; nc.setName ( "team" ) ; nc.setHeader ( NotifyConfig.Header.TO ) ; nc.setTypes ( java.util.EnumSet.of ( NotifyType.NEW_CHANGES , NotifyType.ALL_COMMENTS ) ) ; com.google.gerrit.server.git.ProjectConfig cfg = projectCache.checkedGet ( project ) . getConfig ( ) ; cfg.putNotifyConfig ( "team" , nc ) ; saveProjectConfig ( project , cfg ) ; sender.clear ( ) ; com.google.gerrit.acceptance.PushOneCommit.Result r = pushFactory.create ( db , admin.getIdent ( ) , testRepo , "private change" , "a" , "a1" ) . to ( "refs/for/master%private" ) ; r.assertOkStatus ( ) ; com.google.common.truth.Truth.assertThat ( sender.getMessages ( ) ) . isEmpty ( ) ; setApiUser ( admin ) ; com.google.gerrit.extensions.api.changes.ReviewInput in = new com.google.gerrit.extensions.api.changes.ReviewInput ( ) ; in.message = "comment" ; gApi.changes ( ) . id ( r.getChangeId ( ) ) . current ( ) . review ( in ) ; com.google.common.truth.Truth.assertThat ( sender.getMessages ( ) ) . isEmpty ( ) ; }
public UiAction.Description getDescription ( com.google.gerrit.server.change.RevisionResource rsrc ) { return new com.google.gerrit.extensions.webui.UiAction.Description ( ) . setLabel ( "Edit Description" ) . setVisible ( rsrc.permissions ( ) . testOrFalse ( ChangePermission.EDIT_DESCRIPTION ) ) ; }
public java.lang.String getExtension ( ) { return extension ; }
com.google.gerrit.server.git.NotesBranchUtil create ( org.eclipse.jgit.lib.Repository db , org.eclipse.jgit.lib.ObjectInserter inserter ) ;
public com.google.gerrit.server.notedb.ChangeNotes getNotes ( ) { com.google.common.base.Preconditions.checkNotNull ( ctl ) ; return ctl.getNotes ( ) ; }
public void onPluginLoad ( ) { com.google.gerrit.plugin.client.Plugin.get ( ) . panel ( GerritUiExtensionPoint.CHANGE_SCREEN_HEADER_RIGHT_OF_POP_DOWNS , new com.googlesource.gerrit.plugins.examples.wuichangescreenheaderrightofpopdowns.client.BuildsDropDownPanel.Factory ( ) , "status" ) ; }
protected com.google.gerrit.client.account.ContactPanelFull createWidget ( ) { final com.google.gerrit.client.account.ContactPanelFull p = new com.google.gerrit.client.account.ContactPanelFull ( ) ; p.accountSettings = this ; return p ; }
public void testInsertOne ( ) throws com.google.gwtorm.server.OrmException , java.sql.SQLException { java.sql.PreparedStatement insert = stubStatementWithUpdateCounts ( com.google.gwtorm.jdbc.TestJdbcAccess.INSERT , 1 ) ; createClassUnderTest ( ) . insert ( oneRow ) ; com.google.gwtorm.jdbc.TestJdbcAccess.assertUsedBatchingOnly ( insert ) ; }
public void setUpMocks ( ) { servlet = new com.ericsson.gerrit.plugins.highavailability.forwarder.rest.IndexAccountRestApiServlet ( indexer , indexTs ) ; id = Account.Id.parse ( com.ericsson.gerrit.plugins.highavailability.forwarder.rest.IndexAccountRestApiServletTest.ACCOUNT_NUMBER ) ; org.mockito.Mockito.when ( req.getPathInfo ( ) ) . thenReturn ( ( "/index/account/" + ( com.ericsson.gerrit.plugins.highavailability.forwarder.rest.IndexAccountRestApiServletTest.ACCOUNT_NUMBER ) ) ) ; }
public void deleteVote ( java.lang.String label ) throws com.google.gerrit.extensions.restapi.RestApiException { try { deleteVote.apply ( new com.google.gerrit.server.change.VoteResource ( reviewer , label ) , null ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot delete vote" , e ) ; } }
public final native boolean has_files ( ) ;
static void initialize ( org.eclipse.jgit.lib.Config cfg ) { cfg.setString ( com.googlesource.gerrit.plugins.xdocs.XDocGlobalConfig.SECTION_FORMATTER , com.googlesource.gerrit.plugins.xdocs.XDocGlobalConfig.Formatter.MARKDOWN.name ( ) , com.googlesource.gerrit.plugins.xdocs.XDocGlobalConfig.KEY_MIME_TYPE , "text/x-markdown" ) ; cfg.setString ( com.googlesource.gerrit.plugins.xdocs.XDocGlobalConfig.SECTION_FORMATTER , com.googlesource.gerrit.plugins.xdocs.XDocGlobalConfig.Formatter.PLAIN_TEXT.name ( ) , com.googlesource.gerrit.plugins.xdocs.XDocGlobalConfig.KEY_MIME_TYPE , "text/plain" ) ; }
public static void initLibrary ( com.google.gwt.user.client.rpc.AsyncCallback < java.lang.Void > cb ) { net.codemirror.lib.Loader.initLibrary ( cb ) ; }
public static void getMessage ( com.google.gerrit.reviewdb.client.PatchSet.Id id , com.google.gwt.user.client.rpc.AsyncCallback < java.lang.String > cb ) { com.google.gerrit.client.changes.ChangeApi.change ( id.getParentKey ( ) . get ( ) ) . view ( "edit:message" ) . get ( com.google.gerrit.client.changes.ChangeFileApi.wrapper ( cb ) ) ; }
com.google.gitiles.CommitJsonData.Commit toJsonData ( javax.servlet.http.HttpServletRequest req , org.eclipse.jgit.revwalk.RevCommit c , com.google.gitiles.DateFormatter df ) throws java.io.IOException { return toJsonData ( req , c , com.google.gitiles.CommitJsonData.DEFAULT_FIELDS , df ) ; }
public java.lang.String getQueryString ( ) { return queryString ; }
public com.google.gerrit.extensions.api.access.ProjectAccessInfo access ( com.google.gerrit.extensions.api.access.ProjectAccessInput p ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return setAccess.apply ( checkExists ( ) , p ) ; } catch ( java.io.IOException | com.google.gerrit.server.permissions.PermissionBackendException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot put access rights" , e ) ; } }
public void onFailure ( final java.lang.Throwable caught ) { k.getWatch ( ) . setNotifySubmittedChanges ( oldVal ) ; notifySubmittedChanges.setValue ( oldVal ) ; super . onFailure ( caught ) ; }
public void testParse_NameEmail5 ( ) { final com.google.gerrit.server.mail.Address a = com.google.gerrit.server.mail.Address.parse ( "A U Thor <author@example.com>" ) ; com.google.common.truth.Truth.assertThat ( a.name ) . isEqualTo ( "A U Thor" ) ; com.google.common.truth.Truth.assertThat ( a.email ) . isEqualTo ( "author@example.com" ) ; }
public com.google.gerrit.server.group.MembersCollection.MemberInfo apply ( com.google.gerrit.server.group.MemberResource resource ) { return com.google.gerrit.server.group.MembersCollection.parse ( resource.getMember ( ) . getAccount ( ) ) ; }
private void doVerify ( ) { org.easymock.EasyMock.verify ( schemaFactory , schema , subscriptions , urlProvider , sshProvider , repoManager , replication ) ; }
public void onSuccess ( final com.google.gerrit.common.data.HostPageData result ) { com.google.gerrit.client.Gerrit.myConfig = result.config ; if ( ( result.account ) != null ) { com.google.gerrit.client.Gerrit.myAccount = result.account ; com.google.gerrit.client.Gerrit.xsrfToken = result.xsrfToken ; com.google.gerrit.client.Gerrit.applyUserPreferences ( ) ; } onModuleLoad2 ( ) ; }
public io.fd.maintainer.plugin.service.dto.PluginBranchSpecificSettings createPluginSettings ( ) { return new io.fd.maintainer.plugin.service.dto.PluginBranchSpecificSettings ( pluginUserName , branch , fileRef , localFilePath , allowMaintainersSubmit , autoAddReviewers , autoSubmit , dislikeWarnings ) ; }
protected void configure ( ) { com.google.gerrit.extensions.registration.DynamicMap.mapOf ( binder ( ) , com.googlesource.gerrit.plugins.imagare.ImageResource.IMAGE_KIND ) ; bind ( com.googlesource.gerrit.plugins.imagare.ImagesCollection.class ) ; child ( com.google.gerrit.server.project.ProjectResource.PROJECT_KIND , "images" ) . to ( com.googlesource.gerrit.plugins.imagare.ImagesCollection.class ) ; get ( com.google.gerrit.server.config.ConfigResource.CONFIG_KIND , "config" ) . to ( com.googlesource.gerrit.plugins.imagare.GetConfig.class ) ; }
public boolean isIgnoreWhitespace ( ) { return ( diffPrefs.ignoreWhitespace ) != ( com.google.gerrit.extensions.client.DiffPreferencesInfo.Whitespace.IGNORE_NONE ) ; }
protected java.util.Optional < com.googlesource.gerrit.plugins.lfs.LfsAuthTokenTest.TestToken > createToken ( java.util.List < java.lang.String > values ) { return java.util.Optional.of ( new com.googlesource.gerrit.plugins.lfs.LfsAuthTokenTest.TestToken ( values.get ( 0 ) , java.lang.Long.valueOf ( values.get ( 1 ) ) ) ) ; }
public com.google.gerrit.server.IdentifiedUser create ( final com.google.gerrit.client.reviewdb.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( AccessPath.UNKNOWN , authConfig , accountCache , realm , null , null , id ) ; }
private boolean isProjectStatePermittingWrite ( ) { return getProjectControl ( ) . getProject ( ) . getState ( ) . permitsWrite ( ) ; }
protected void submit ( java.lang.String changeId ) throws java.lang.Exception { submit ( changeId , new com.google.gerrit.extensions.api.changes.SubmitInput ( ) , null , null ) ; }
public void listTagsOfNonExistingProject ( ) throws java.lang.Exception { adminSession.get ( "/projects/non-existing/tags" ) . assertNotFound ( ) ; }
public void setUserName ( @ com.google.gerrit.common.Nullable java.lang.String user ) { userName = java.util.Optional.ofNullable ( com.google.common.base.Strings.emptyToNull ( user ) ) ; }
public void onSuccess ( java.util.List < com.google.gerrit.reviewdb.client.Change > changes ) { for ( com.google.gerrit.reviewdb.client.Change c : changes ) { @ java.lang.SuppressWarnings ( value = "unused" ) java.util.concurrent.Future < ? > possiblyIgnoredError = executor.submit ( new com.google.gerrit.server.index.change.ReindexAfterRefUpdate.Index ( event , c.getId ( ) ) ) ; } }
public final native net.codemirror.lib.CodeMirror side ( com.google.gerrit.client.diff.DisplaySide side ) ;
public java.util.Map < java.util.Map.Entry < java.lang.String , java.lang.String > , com.google.common.base.Optional < com.google.gerrit.reviewdb.client.PatchSetApproval > > get ( ) { return new java.util.LinkedHashMap < > ( ) ; }
private final native java.lang.String owner_uuid ( ) ;
com.google.gerrit.sshd.SshKeyCacheImpl.EntryList get ( java.lang.String username ) { return com.google.gerrit.server.util.FutureUtil.get ( cache.get ( new com.google.gerrit.sshd.SshKeyCacheImpl.Username ( username ) ) ) ; }
public void onFailure ( java.lang.Throwable e ) { enableEdit ( true ) ; pendingGroup = null ; super . onFailure ( e ) ; }
public void setIntHeader ( java.lang.String name , int value ) { headers.removeAll ( name ) ; addIntHeader ( name , value ) ; }
void visibleProjects ( com.google.gwt.user.client.rpc.AsyncCallback < java.util.List < com.google.gerrit.reviewdb.Project > > callback ) ;
private static com.google.gerrit.server.index.Schema < com.google.gerrit.server.query.change.ChangeData > schema ( @ com.google.gerrit.common.Nullable com.google.gerrit.server.index.change.ChangeIndexCollection indexes ) { com.google.gerrit.server.index.change.ChangeIndex index = ( indexes != null ) ? indexes.getSearchIndex ( ) : null ; return index != null ? index.getSchema ( ) : null ; }
protected java.io.Writer startRenderText ( javax.servlet.http.HttpServletRequest req , javax.servlet.http.HttpServletResponse res , java.lang.String contentType ) throws java.io.IOException { setApiHeaders ( res , contentType ) ; return com.google.gitiles.BaseServlet.newWriter ( req , res ) ; }
public void onSuccess ( com.google.gerrit.client.rpc.NativeMap < com.google.gwt.core.client.JsArray < com.google.gerrit.client.changes.CommentInfo > > result ) { r.add ( result ) ; history.addComments ( id , result ) ; }
public org.parboiled.Rule [ ] blockPluginRules ( ) { return new org.parboiled.Rule [ ] { cols ( ) , hr ( ) , iframe ( ) , note ( ) , toc ( ) } ; }
com.google.gwtorm.client.ResultSet < com.google.gerrit.reviewdb.AccountGroup > byExternalName ( com.google.gerrit.reviewdb.AccountGroup.ExternalNameKey name ) throws com.google.gwtorm.client.OrmException ;
private void deletePatchSet ( java.lang.String changeId , com.google.gerrit.reviewdb.client.PatchSet ps ) throws java.lang.Exception { gApi.changes ( ) . id ( changeId ) . revision ( ps.getId ( ) . get ( ) ) . delete ( ) ; }
private void assertDeleteForbidden ( ) throws java.lang.Exception { exception.expect ( com.google.gerrit.extensions.restapi.AuthException.class ) ; exception.expectMessage ( "delete not permitted" ) ; branch ( ) . delete ( ) ; }
private void assertCreateChange ( java.lang.String ref , com.google.gerrit.server.permissions.ProjectControl u ) { boolean create = u.asForProject ( ) . ref ( ref ) . testOrFalse ( RefPermission.CREATE_CHANGE ) ; com.google.common.truth.Truth.assertThat ( create ) . named ( ( "can create change " + ref ) ) . isTrue ( ) ; }
public < T extends com.google.gwt.core.client.JavaScriptObject > void delete ( com.google.gerrit.client.rpc.HttpCallback < T > cb ) { send ( com.google.gwt.http.client.RequestBuilder.DELETE , cb ) ; }
public abstract org.eclipse.jgit.lib.Repository openRepository ( com.google.gerrit.reviewdb.Project.NameKey name ) throws org.eclipse.jgit.errors.RepositoryNotFoundException ;
public com.google.gerrit.server.data.AccountAttribute asAccountAttribute ( final com.google.gerrit.reviewdb.client.Account account ) { com.google.gerrit.server.data.AccountAttribute who = new com.google.gerrit.server.data.AccountAttribute ( ) ; who.name = account.getFullName ( ) ; who.email = account.getPreferredEmail ( ) ; who.username = account.getUserName ( ) ; return who ; }
protected void migrateData ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.server.schema.UpdateUI ui ) throws java.sql.SQLException { try ( java.sql.Statement stmt = newStatement ( db ) ) { stmt.execute ( ( "CREATE INDEX patch_sets_byRevision" + " ON patch_sets (revision)" ) ) ; } }
public void doClaSignupHook ( com.google.gerrit.reviewdb.client.Account account , java.lang.String claName ) { }
public void listBranches ( final com.google.gerrit.reviewdb.client.Project.NameKey projectName , final com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.ListBranchesResult > callback ) { listBranchesFactory.create ( projectName ) . to ( callback ) ; }
public com.google.gerrit.server.config.PluginConfig getFromProjectConfigWithInheritance ( com.google.gerrit.reviewdb.client.Project.NameKey projectName , java.lang.String pluginName ) throws com.google.gerrit.server.project.NoSuchProjectException { return getFromProjectConfig ( projectName , pluginName ) . withInheritance ( projectStateFactory ) ; }
public abstract boolean yesno ( java.lang.Boolean def , java.lang.String fmt , java.lang.Object ... args ) ;
private java.lang.String createChange ( ) throws java.io.IOException , org.eclipse.jgit.api.errors.GitAPIException { com.google.gerrit.acceptance.PushOneCommit push = pushFactory.create ( db , owner.getIdent ( ) ) ; return push.to ( git , "refs/for/master" ) . getChangeId ( ) ; }
java.util.Optional < com.google.gerrit.server.account.externalids.ExternalId > get ( com.google.gerrit.server.account.externalids.ExternalId.Key key ) throws java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { checkReadEnabled ( ) ; try ( org.eclipse.jgit.lib.Repository repo = repoManager.openRepository ( allUsersName ) ) { return com.google.gerrit.server.account.externalids.ExternalIdNotes.loadReadOnly ( repo ) . get ( key ) ; } }
private static boolean isApproved ( com.google.gerrit.client.info.ChangeInfo.LabelInfo label , com.google.gerrit.client.info.ChangeInfo.ApprovalInfo ai ) { return ( ( label.approved ( ) ) != null ) && ( ( label.approved ( ) . _accountId ( ) ) == ( ai._accountId ( ) ) ) ; }
public final native void lineWrapping ( java.lang.Boolean w ) ;
private void renderSubmitType ( java.lang.String action ) { try { com.google.gerrit.extensions.common.SubmitType type = com.google.gerrit.extensions.common.SubmitType.valueOf ( action ) ; submitActionText.setInnerText ( com.google.gerrit.client.admin.Util.toLongString ( type ) ) ; } catch ( java.lang.IllegalArgumentException e ) { submitActionText.setInnerText ( action ) ; } }
public void subsetOfBranchesVisibleIncludingHead ( ) throws java.lang.Exception { allow ( Permission.READ , com.google.gerrit.server.group.SystemGroupBackend.REGISTERED_USERS , "refs/heads/master" ) ; deny ( Permission.READ , com.google.gerrit.server.group.SystemGroupBackend.REGISTERED_USERS , "refs/heads/branch" ) ; assertRefs ( "HEAD" , "refs/changes/01/1/1" , "refs/changes/01/1/meta" , "refs/heads/master" ) ; }
public boolean accept ( java.nio.file.Path entry ) throws java.io.IOException { java.lang.String n = entry.getFileName ( ) . toString ( ) ; return ( ! ( n.startsWith ( ".last_" ) ) ) && ( ! ( n.startsWith ( ".next_" ) ) ) ; }
private static com.google.gerrit.reviewdb.client.ApprovalCategoryValue value ( final com.google.gerrit.reviewdb.client.ApprovalCategory cat , final int value , final java.lang.String name ) { return new com.google.gerrit.reviewdb.client.ApprovalCategoryValue ( new com.google.gerrit.reviewdb.client.ApprovalCategoryValue.Id ( cat.getId ( ) , ( ( short ) ( value ) ) ) , name ) ; }
public com.google.gerrit.lucene.LuceneChangeIndex getChangeIndex ( @ com.google.gerrit.server.config.GerritServerConfig org.eclipse.jgit.lib.Config cfg , com.google.gerrit.server.config.SitePaths sitePaths , @ com.google.gerrit.server.index.IndexExecutor com.google.common.util.concurrent.ListeningScheduledExecutorService executor , com.google.gerrit.server.index.FieldDef.FillArgs fillArgs ) throws java.io.IOException { return new com.google.gerrit.lucene.LuceneChangeIndex ( cfg , sitePaths , executor , fillArgs , readOnly ) ; }
public void testStringASCII ( ) { com.google.gwtorm.nosql.IndexKeyBuilder ib = new com.google.gwtorm.nosql.IndexKeyBuilder ( ) ; ib.add ( "hi" ) ; com.google.gwtorm.nosql.IndexKeyBuilderTest.assertEqualToBuilderResult ( new byte [ ] { 'h' , 'i' } , ib ) ; }
private void updateSkipNum ( ) { numSkipLines -= com.google.gerrit.client.diff.SkipBar.NUM_ROWS_TO_EXPAND ; skipNum.setText ( PatchUtil.M.patchSkipRegion ( java.lang.Integer.toString ( numSkipLines ) ) ) ; checkAndUpdateArrows ( ) ; }
public void addIntHeader ( java.lang.String name , int value ) { headers.put ( name , java.lang.Integer.toString ( value ) ) ; }
private PatchSet.Id getPatchSetIdFromSide ( com.google.gerrit.client.diff.DisplaySide side ) { return ( side == ( DisplaySide.A ) ) && ( ( base ) != null ) ? base : revision ; }
public void go ( ) { movePointerTo ( id ) ; super . go ( ) ; }
public T get ( ) { return com.google.gerrit.sshd.SshScope.requireContext ( ) . get ( key , creator ) ; }
public void setContext ( final short context ) { assert ( 0 <= context ) || ( context == ( com.google.gerrit.reviewdb.AccountDiffPreference.WHOLE_FILE_CONTEXT ) ) ; this . context = context ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { if ( com.google.gerrit.client.Gerrit.isSignedIn ( ) ) { if ( topic.canEdit ( ) ) { topic.onEdit ( ) ; } } else { com.google.gerrit.client.Gerrit.doSignIn ( getToken ( ) ) ; } }
public void setUp ( ) throws java.lang.Exception { super . setUp ( ) ; injector = com.google.inject.Guice.createInjector ( new com.googlesource.gerrit.plugins.hooks.workflow.ActionControllerTest.TestModule ( ) ) ; setupCommonMocks ( ) ; }
public com.google.common.util.concurrent.CheckedFuture < ? , java.io.IOException > deleteAsync ( com.google.gerrit.server.query.change.ChangeData cd ) { return ( executor ) != null ? submit ( new com.google.gerrit.server.index.ChangeIndexer.Task ( cd , true ) ) : com.google.common.util.concurrent.Futures.< java.lang.Object , java.io.IOException > immediateCheckedFuture ( null ) ; }
public java.lang.Object apply ( com.google.gerrit.server.change.ChangeResource resource ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.extensions.restapi.BadRequestException , com.google.gerrit.extensions.restapi.ResourceConflictException , com.google.gwtorm.server.OrmException , java.io.IOException { com.google.gerrit.extensions.api.changes.SubmittedTogetherInfo info = applyInfo ( resource ) ; if ( options.isEmpty ( ) ) { return info.changes ; } return info ; }
protected void configure ( org.eclipse.jgit.transport.OpenSshConfig.Host hc , com.jcraft.jsch.Session session ) { }
private java.lang.String url ( com.google.gerrit.client.info.FileInfo info ) { return info.binary ( ) ? com.google.gerrit.client.Dispatcher.toUnified ( base , patchSetId , info.path ( ) ) : com.google.gerrit.client.Dispatcher.toSideBySide ( base , patchSetId , info.path ( ) ) ; }
public void run ( ) { writeEvents ( ) ; }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > insert ( com.google.gerrit.server.query.change.ChangeData cd ) throws java.io.IOException { return com.google.common.util.concurrent.Futures.immediateFuture ( null ) ; }
public static com.google.gerrit.client.rpc.RestApi comments ( @ com.google.gerrit.common.Nullable java.lang.String project , int id ) { return com.google.gerrit.client.changes.ChangeApi.call ( project , id , "comments" ) ; }
public void add ( final com.google.inject.Injector ... injectors ) { for ( final com.google.inject.Injector i : injectors ) { add ( i ) ; } }
public boolean isSubmit ( ) { return LabelId.SUBMIT.get ( ) . equals ( getLabel ( ) ) ; }
public org.eclipse.jgit.patch.FileHeader call ( ) throws java.io.IOException { synchronized ( lock ) { return diffFormatter.toFileHeader ( diffEntry ) ; } }
public void notSticky ( ) throws java.lang.Exception { assertNotSticky ( java.util.EnumSet.of ( com.google.gerrit.extensions.client.ChangeKind.REWORK , com.google.gerrit.extensions.client.ChangeKind.TRIVIAL_REBASE , com.google.gerrit.extensions.client.ChangeKind.NO_CODE_CHANGE , com.google.gerrit.extensions.client.ChangeKind.MERGE_FIRST_PARENT_UPDATE ) ) ; }
public com.google.gerrit.server.IdentifiedUser create ( com.google.gerrit.reviewdb.client.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( capabilityControlFactory , authConfig , anonymousCowardName , canonicalUrl , accountCache , groupBackend , disableReverseDnsLookup , remotePeerProvider , dbProvider , id , null ) ; }
public void upsertComments ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.server.notedb.ChangeUpdate update , java.lang.Iterable < com.google.gerrit.reviewdb.client.PatchLineComment > comments ) throws com.google.gwtorm.server.OrmException { for ( com.google.gerrit.reviewdb.client.PatchLineComment c : comments ) { update.upsertComment ( c ) ; } db.patchComments ( ) . upsert ( comments ) ; }
public void onSuccess ( com.google.gerrit.client.info.ChangeInfo result ) { display ( result ) ; }
protected void submit ( java.lang.String changeId , com.google.gerrit.extensions.api.changes.SubmitInput input ) throws java.lang.Exception { submit ( changeId , input , null , null ) ; }
public com.google.gerrit.server.project.ChangeControl controlFor ( final com.google.gerrit.reviewdb.Change change ) { return new com.google.gerrit.server.project.ChangeControl ( controlForRef ( change.getDest ( ) ) , change ) ; }
public com.google.gerrit.server.CurrentUser getUser ( ) { return user.getRealUser ( ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { toggleReviewed ( ) . run ( ) ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { doSave ( ) ; }
public com.google.gerrit.server.account.AccountState getByUsername ( java.lang.String username ) { com.google.gerrit.reviewdb.Account.Id id = byName.get ( username ) ; return id != null ? byId.get ( id ) : null ; }
private com.google.common.util.concurrent.ListeningExecutorService newExecutor ( ) { if ( ( threads ) > 0 ) { return com.google.common.util.concurrent.MoreExecutors.listeningDecorator ( dbInjector.getInstance ( com.google.gerrit.server.git.WorkQueue.class ) . createQueue ( threads , "RebuildChange" ) ) ; } else { return com.google.common.util.concurrent.MoreExecutors.newDirectExecutorService ( ) ; } }
default void afterUpdateRefs ( ) throws java.lang.Exception { }
void onLeftSide ( com.google.gwt.event.logical.shared.ValueChangeEvent < java.lang.Boolean > e ) { if ( ( view.getDiffTable ( ) ) instanceof com.google.gerrit.client.diff.SideBySideTable ) { ( ( com.google.gerrit.client.diff.SideBySideTable ) ( view.getDiffTable ( ) ) ) . setVisibleA ( e.getValue ( ) ) ; } }
private static com.google.gerrit.server.account.AccountState newState ( com.google.gerrit.reviewdb.client.Account account ) { return new com.google.gerrit.server.account.AccountState ( new com.google.gerrit.server.config.AllUsersName ( com.google.gerrit.server.config.AllUsersNameProvider.DEFAULT ) , account , com.google.common.collect.ImmutableSet.of ( ) , new java.util.HashMap < > ( ) , com.google.gerrit.extensions.client.GeneralPreferencesInfo.defaults ( ) ) ; }
public static void deleteEdit ( int id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwt.core.client.JavaScriptObject > cb ) { com.google.gerrit.client.changes.ChangeApi.edit ( id ) . delete ( cb ) ; }
public final boolean isOAuth ( ) { return ( authType ( ) ) == ( com.google.gerrit.reviewdb.client.AuthType.OAUTH ) ; }
public final native void setCommit ( com.google.gerrit.client.changes.ChangeInfo.CommitInfo c ) ;
public boolean isVisible ( ) { return ( ( ( getCurrentUser ( ) ) instanceof com.google.gerrit.server.InternalUser ) || ( canPerform ( Permission.READ ) ) ) && ( canRead ( ) ) ; }
public com.google.gerrit.reviewdb.client.PatchSetApproval.LabelId getLabelId ( ) { return new com.google.gerrit.reviewdb.client.PatchSetApproval.LabelId ( ( ( id ) != null ? id : name ) ) ; }
public void createGroup ( final java.lang.String newName , final com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.reviewdb.client.AccountGroup.Id > callback ) { createGroupFactory.create ( newName ) . to ( callback ) ; }
public org.eclipse.jgit.lib.ObjectInserter getInserter ( ) throws java.io.IOException { return this . getObjectInserter ( ) ; }
public static void init ( ) { com.google.gerrit.client.api.ApiGlue.init0 ( ) ; com.google.gerrit.client.api.ActionContext.init ( ) ; com.google.gerrit.client.api.Plugin.init ( ) ; com.google.gerrit.client.api.ApiGlue.addHistoryHook ( ) ; }
public void onSuccess ( final java.util.List < com.google.gerrit.reviewdb.AccountExternalId > result ) { com.google.gerrit.reviewdb.AccountExternalId id = null ; for ( com.google.gerrit.reviewdb.AccountExternalId i : result ) { if ( i.isScheme ( com.google.gerrit.reviewdb.AccountExternalId.SCHEME_USERNAME ) ) { id = i ; break ; } } display ( id ) ; }
private java.lang.String trimTrailingSlash ( java.lang.String url ) { return com.google.common.base.CharMatcher.is ( '/' ) . trimTrailingFrom ( url ) ; }
public com.google.gerrit.extensions.restapi.Response < com.google.gerrit.extensions.common.ChangeInfo > apply ( com.google.gerrit.server.change.ChangeResource rsrc ) throws com.google.gwtorm.server.OrmException { return cache ( json.format ( rsrc ) ) ; }
private static java.lang.String getUrl ( java.lang.String pluginName , int changeId , java.lang.Integer patchSetIdA , int patchSetIdB , java.lang.String fileName ) { return ( com.googlesource.gerrit.plugins.xdocs.SideBySideDiffPreviewWebLink.getUrl ( pluginName , changeId , patchSetIdA , patchSetIdB , fileName ) ) + ",unified" ; }
com.google.gwtorm.client.ResultSet < com.google.gerrit.reviewdb.Change > query ( com.google.gerrit.reviewdb.ReviewDb db , int lim , java.lang.String key ) throws com.google.gerrit.common.errors.InvalidQueryException , com.google.gwtorm.client.OrmException { return searchQuery ( db , query , lim , key , com.google.gerrit.httpd.rpc.ChangeListServiceImpl.QUERY_NEXT ) ; }
protected void configureServlets ( ) { filter ( "/*" ) . through ( com.googlesource.gerrit.plugins.serverconfig.HideFromNonAdmins.class ) ; serve ( "/*" ) . with ( com.googlesource.gerrit.plugins.serverconfig.ServerConfigServlet.class ) ; }
public boolean isAuthRequired ( ) { return false ; }
private com.google.inject.Injector createWebInjector ( ) { final java.util.List < com.google.inject.Module > modules = new java.util.ArrayList < com.google.inject.Module > ( ) ; modules.add ( sshInjector.getInstance ( com.google.gerrit.server.http.WebModule.class ) ) ; return sysInjector.createChildInjector ( modules ) ; }
public void markReady ( boolean ready ) throws java.io.IOException { com.google.gerrit.lucene.AbstractLuceneIndex.setReady ( sitePaths , schema.getVersion ( ) , ready ) ; }
private com.googlesource.gerrit.plugins.uploadvalidator.ValidatorConfig getConfig ( java.lang.String defaultConfig , com.google.gerrit.reviewdb.client.Project.NameKey projName ) throws org.eclipse.jgit.errors.ConfigInvalidException { return new com.googlesource.gerrit.plugins.uploadvalidator.ValidatorConfig ( new com.googlesource.gerrit.plugins.uploadvalidator.FakeConfigFactory ( projName , defaultConfig ) , new com.googlesource.gerrit.plugins.uploadvalidator.FakeGroupByNameFinder ( ) ) ; }
public void testGetIndexScript ( ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( hana.getIndexScript ( ) ) . isSameAs ( ScriptRunner.NOOP ) ; }
static boolean isActive ( com.google.gerrit.server.config.PluginConfig cfg ) { return cfg.getBoolean ( com.googlesource.gerrit.plugins.uploadvalidator.InvalidLineEndingValidator.KEY_CHECK_REJECT_WINDOWS_LINE_ENDINGS , false ) ; }
public void rebuildAndCheckChanges ( com.google.gerrit.reviewdb.client.Change ... changeIds ) throws java.lang.Exception { rebuildAndCheckChanges ( java.util.Arrays.stream ( changeIds ) ) ; }
public void tearDown ( ) throws java.lang.Exception { if ( cleanupSitePath ) { if ( java.nio.file.Files.exists ( sitePath ) ) { org.eclipse.jgit.util.FileUtils.delete ( sitePath.toFile ( ) , FileUtils.RECURSIVE ) ; } } super . tearDown ( ) ; }
public void stop ( ) { refreshThread.halt ( ) ; openIndex.close ( ) ; closedIndex.close ( ) ; }
public static java.lang.String shortFormat ( java.util.Date dt ) { com.google.gerrit.client.FormatUtil.ensureInited ( ) ; return com.google.gerrit.client.FormatUtil.dateFormatter.shortFormat ( dt ) ; }
public void onClick ( android.view.View v ) { removeDiffView ( ) ; createDiffView ( ) ; init ( path , change , files ) ; displayFile ( change , path , files.get ( path ) ) ; }
public com.googlecode.prolog_cafe.lang.Term getMessageTerm ( ) { com.googlecode.prolog_cafe.lang.Term [ ] args = new com.googlecode.prolog_cafe.lang.Term [ ] { new com.googlecode.prolog_cafe.lang.JavaObjectTerm ( goal ) , new com.googlecode.prolog_cafe.lang.IntegerTerm ( argNo ) } ; return new com.googlecode.prolog_cafe.lang.StructureTerm ( com.googlecode.prolog_cafe.exceptions.PInstantiationException.INSTANTIATION_ERROR , args ) ; }
public void selfRevokedKeyIsRevoked ( ) throws java.lang.Exception { assertProblems ( com.google.gerrit.gpg.testutil.TestKeys.selfRevokedKey ( ) , "Key is revoked (key material has been compromised)" ) ; }
public void onFailure ( java.lang.Throwable err ) { getTab ( ) . setTitle ( Resources.M.conflictingChanges ( Resources.C.notAvailable ( ) ) ) ; getTab ( ) . setError ( err.getMessage ( ) ) ; }
public static void setCurrentAccountImpl ( final com.google.gerrit.client.rpc.Common.CurrentAccountImpl i ) { com.google.gerrit.client.rpc.Common.caImpl = i ; }
java.nio.file.Path getWebSessionDir ( com.google.gerrit.server.config.SitePaths site , com.google.gerrit.server.config.PluginConfigFactory cfg , @ com.google.gerrit.extensions.annotations.PluginName java.lang.String pluginName ) { return java.nio.file.Paths.get ( cfg.getFromGerritConfig ( pluginName ) . getString ( "directory" , ( ( site.site_path ) + "/websessions" ) ) ) ; }
public void rangeInOneLineIsValid ( ) { com.google.gerrit.extensions.client.Comment.Range range = createRange ( 13 , 2 , 13 , 10 ) ; com.google.gerrit.extensions.common.testing.RangeSubject.assertThat ( range ) . isValid ( ) ; }
protected com.google.gerrit.server.update.RepoView getRepoView ( ) throws java.io.IOException { initRepository ( ) ; return repoView ; }
void projectDetail ( com.google.gerrit.reviewdb.client.Project.NameKey projectName , com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.ProjectDetail > callback ) ;
public void testCreateDuplicateSystemGroupCaseSensitiveName_Conflict ( ) throws java.lang.Exception { java.lang.String newGroupName = "Registered Users" ; exception.expect ( com.google.gerrit.extensions.restapi.ResourceConflictException.class ) ; exception.expectMessage ( "group 'Registered Users' already exists" ) ; gApi.groups ( ) . create ( newGroupName ) ; }
public void run ( ) { if ( running.compareAndSet ( false , true ) ) { try { task.run ( ) ; } finally { if ( isPeriodic ( ) ) { running.set ( false ) ; } } } }
public com.google.gerrit.server.account.GroupControl controlFor ( com.google.gerrit.common.data.GroupDescription.Basic group ) { return new com.google.gerrit.server.account.GroupControl ( user.get ( ) , group , permissionBackend , groupBackend ) ; }
public Person.Key getParentKey ( ) { return owner ; }
protected com.google.gerrit.server.diff.PatchList getPatchList ( ) throws com.google.gerrit.server.diff.PatchListNotAvailableException { if ( ( patchSet ) != null ) { return args.patchListCache.get ( change , patchSet ) ; } throw new com.google.gerrit.server.diff.PatchListNotAvailableException ( "no patchSet specified" ) ; }
public java.lang.String apply ( com.google.gerrit.server.account.AccountResource rsrc ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.extensions.restapi.ResourceNotFoundException { java.lang.String username = rsrc.getUser ( ) . state ( ) . getUserName ( ) ; if ( username == null ) { throw new com.google.gerrit.extensions.restapi.ResourceNotFoundException ( ) ; } return username ; }
public com.google.gerrit.extensions.client.GeneralPreferencesInfo getPreferences ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return getPreferences.apply ( account ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot get preferences" , e ) ; } }
private void extractMailExample ( java.lang.String orig ) throws java.lang.Exception { java.io.File ex = new java.io.File ( site.mail_dir , ( orig + ".example" ) ) ; com.google.gerrit.pgm.init.api.InitUtil.extract ( ex , com.google.gerrit.server.mail.OutgoingEmail.class , orig ) ; com.google.gerrit.common.FileUtil.chmod ( 292 , ex ) ; }
public void onSuccess ( com.google.gerrit.client.changes.ChangeInfo result ) { sent = true ; hide ( ) ; com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( result.legacyId ( ) ) ) ; }
public static void editWithFiles ( int id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.changes.ChangeInfo.EditInfo > cb ) { com.google.gerrit.client.changes.ChangeApi.edit ( id ) . addParameter ( "list" , true ) . get ( cb ) ; }
PatchSet.Id getPatchSetIdFromSide ( com.google.gerrit.client.diff.DisplaySide side ) { if ( ( side == ( DisplaySide.A ) ) && ( ( base.isPatchSet ( ) ) || ( base.isEdit ( ) ) ) ) { return base.asPatchSetId ( ) ; } return revision ; }
public com.google.gerrit.server.IdentifiedUser create ( final com.google.gerrit.server.AccessPath accessPath , final com.google.gerrit.reviewdb.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( accessPath , authConfig , canonicalUrl , realm , accountCache , starredChangesCache , accountProjectWatchCache , accountDiffPreferencesCache , remotePeerProvider , dbProvider , id ) ; }
private com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > rewrite ( com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > in ) throws com.google.gerrit.server.query.QueryParseException { return rewrite.rewrite ( in , com.google.gerrit.server.index.IndexRewriteTest.options ( 0 , com.google.gerrit.common.data.GlobalCapability.DEFAULT_MAX_QUERY_LIMIT ) ) ; }
public void getNonExistingAccount_NotFound ( ) throws java.lang.Exception { try { gApi.accounts ( ) . id ( "non-existing" ) . get ( ) ; org.junit.Assert.fail ( "Expected account to not exist" ) ; } catch ( com.google.gerrit.extensions.restapi.ResourceNotFoundException expected ) { } }
public com.google.gerrit.server.group.GroupJson.GroupInfo apply ( com.google.gerrit.server.group.GroupResource resource ) { return json.format ( resource.getGroup ( ) ) ; }
private void fireChangeDeletedFromIndexEvent ( int id ) { for ( com.google.gerrit.extensions.events.ChangeIndexedListener listener : indexedListener ) { listener.onChangeDeleted ( id ) ; } }
public void waitForUser ( ) { if ( ( console.readLine ( "Press enter to continue " ) ) == null ) { throw com.google.gerrit.pgm.init.ConsoleUI.abort ( ) ; } }
public final boolean hasContactStore ( ) { return ( contactStore ( ) ) != null ; }
public void testUpsertNothing ( ) throws com.google.gwtorm.server.OrmException , java.sql.SQLException { classUnderTest.upsert ( noData ) ; }
public com.google.gerrit.reviewdb.client.Change change ( ) { return getNotes ( ) . getChange ( ) ; }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > evictAsync ( java.lang.String username ) { return com.google.common.util.concurrent.Futures.immediateFuture ( null ) ; }
public void emptyExceptSubject ( ) throws java.lang.Exception { com.google.gerrit.server.notedb.ChangeUpdate update = newUpdate ( newChange ( ) , changeOwner ) ; update.setSubject ( "Create change" ) ; update.commit ( ) ; com.google.common.truth.Truth.assertThat ( update.getRevision ( ) ) . isNotNull ( ) ; }
public com.googlecode.prolog_cafe.lang.NumberTerm or ( com.googlecode.prolog_cafe.lang.NumberTerm t ) { throw new com.googlecode.prolog_cafe.exceptions.IllegalTypeException ( "integer" , this ) ; }
public void setToekn ( java.lang.String token ) { this . token = token ; }
public void onKeyPress ( final com.google.gwt.event.dom.client.KeyPressEvent event ) { if ( ( event.getCharCode ( ) ) == ( com.google.gwt.event.dom.client.KeyCodes.KEY_ENTER ) ) { doExternalSearch ( ) ; } }
protected com.google.gerrit.util.cli.CmdLineParser newCmdLineParser ( java.lang.Object options ) { return cmdLineParserFactory.create ( options ) ; }
public int compare ( com.google.gerrit.client.diff.UnifiedDiffChunkInfo o1 , com.google.gerrit.client.diff.UnifiedDiffChunkInfo o2 ) { return ( o1.getCmLine ( ) ) - ( o2.getCmLine ( ) ) ; }
public java.util.List < com.google.gerrit.server.query.change.ChangeData > byExactTopicOpen ( java.lang.String topic ) throws com.google.gwtorm.server.OrmException { return query ( com.google.gerrit.server.query.Predicate.and ( new com.google.gerrit.server.query.change.ExactTopicPredicate ( com.google.gerrit.server.query.change.InternalChangeQuery.schema ( indexes ) , topic ) , com.google.gerrit.server.query.change.ChangeStatusPredicate.open ( ) ) ) ; }
protected java.lang.Object getRowItemKey ( final com.google.gerrit.client.data.ChangeInfo item ) { return item.getId ( ) ; }
public java.util.List < com.google.gerrit.server.account.AccountState > byEmailPrefix ( java.lang.String emailPrefix ) throws com.google.gwtorm.server.OrmException { return query ( com.google.gerrit.server.query.account.AccountPredicates.email ( emailPrefix ) ) ; }
void send ( javax.servlet.http.HttpServletRequest req , javax.servlet.http.HttpServletResponse res ) throws java.io.IOException { com.google.gwtexpui.server.CacheHeaders.setNotCacheable ( res ) ; res.sendError ( HttpServletResponse.SC_NOT_FOUND ) ; }
private com.google.gerrit.client.ui.AccountLink link ( final com.google.gerrit.reviewdb.client.Account.Id id ) { return com.google.gerrit.client.ui.AccountLink.link ( accountCache , id ) ; }
static com.google.gerrit.server.account.QueryList parse ( java.lang.String text , com.google.gerrit.server.git.ValidationError.Sink errors ) throws java.io.IOException { return new com.google.gerrit.server.account.QueryList ( com.google.gerrit.server.account.QueryList.parse ( text , com.google.gerrit.server.account.QueryList.FILE_NAME , com.google.gerrit.server.account.TRIM , com.google.gerrit.server.account.TRIM , errors ) ) ; }
static void deleteSessionCookie ( ) { com.google.gerrit.client.Gerrit.myAccount = null ; com.google.gerrit.client.Gerrit.myAccountDiffPref = null ; com.google.gerrit.client.Gerrit.myPrefs = com.google.gerrit.client.info.AccountPreferencesInfo.createDefault ( ) ; com.google.gerrit.client.Gerrit.xGerritAuth = null ; com.google.gerrit.client.Gerrit.refreshMenuBar ( ) ; com.google.gwt.user.client.Cookies.removeCookie ( "GerritAccount" ) ; }
public void updateChange ( com.google.gerrit.server.git.BatchUpdate.ChangeContext ctx ) throws java.lang.Exception { ctx.getUpdate ( ) . setTopic ( magicBranch.topic ) ; }
public void revokedByKeyNotPresentInStore ( ) throws java.lang.Exception { com.google.gerrit.gpg.testutil.TestKey k = add ( com.google.gerrit.gpg.testutil.TestKeys.revokedCompromisedKey ( ) ) ; save ( ) ; assertProblems ( k , "Key is revoked (key material has been compromised): test6 compromised" ) ; }
public void onRefresh ( ) { getApp ( ) . getQueryHandler ( ) . reset ( ) ; display ( true ) ; }
public void getProjectNotExisting ( ) throws java.lang.Exception { gApi.projects ( ) . name ( "does-not-exist" ) . get ( ) ; }
private void renderSubmitType ( java.lang.String action ) { try { com.google.gerrit.extensions.client.SubmitType type = com.google.gerrit.extensions.client.SubmitType.valueOf ( action ) ; submitActionText.setInnerText ( com.google.gerrit.client.admin.Util.toLongString ( type ) ) ; } catch ( java.lang.IllegalArgumentException e ) { submitActionText.setInnerText ( action ) ; } }
void applyDraft ( com.google.gerrit.server.notedb.ChangeDraftUpdate draftUpdate ) throws com.google.gwtorm.server.OrmException { if ( ( c.getRevId ( ) ) == null ) { com.google.gerrit.server.PatchLineCommentsUtil.setCommentRevId ( c , cache , change , ps ) ; } draftUpdate.putComment ( c ) ; }
com.google.common.hash.Funnel < java.lang.String > funnel ( ) { com.google.common.hash.Funnel < ? > s = com.google.common.hash.Funnels.unencodedCharsFunnel ( ) ; return ( ( com.google.common.hash.Funnel < java.lang.String > ) ( s ) ) ; }
public < I > com.google.gerrit.server.index.FieldDef < I , T > build ( com.google.gerrit.server.index.FieldDef.Getter < I , T > getter ) { return new com.google.gerrit.server.index.FieldDef ( name , type , stored , false , getter ) ; }
public com.google.gerrit.extensions.api.projects.ConfigInfo apply ( com.google.gerrit.server.project.ProjectResource resource ) { return new com.google.gerrit.server.project.ConfigInfoImpl ( serverEnableSignedPush , resource.getProjectState ( ) , resource.getUser ( ) , config , pluginConfigEntries , cfgFactory , allProjects , uiActions , views ) ; }
public void moveTipTo ( com.google.gerrit.server.git.CodeReviewCommit newTip , org.eclipse.jgit.lib.ObjectId mergedFrom ) { com.google.common.base.Preconditions.checkArgument ( ( newTip != null ) ) ; branchTip = newTip ; mergeResults.put ( mergedFrom , newTip.copy ( ) ) ; }
public boolean isVisible ( ) { return ( ( visibleForReplication ( ) ) || ( canPerformOnAnyRef ( Permission.READ ) ) ) && ( ! ( isHidden ( ) ) ) ; }
public void testUpdateOne ( ) throws com.google.gwtorm.server.OrmException , java.sql.SQLException { java.sql.PreparedStatement update = stubStatementWithUpdateCounts ( com.google.gwtorm.jdbc.TestJdbcAccess.UPDATE , 1 ) ; createClassUnderTest ( ) . update ( oneRow ) ; com.google.gwtorm.jdbc.TestJdbcAccess.assertUsedBatchingOnly ( update ) ; }
protected com.google.gerrit.client.ui.Screen createScreen ( ) { return new com.google.gerrit.client.patches.PatchScreen.SideBySide ( key , parentPatchTable ( ) ) ; }
void onAdd ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { addReviewer ( suggestBox.getText ( ) , false ) ; }
public void onLoad ( com.google.gerrit.plugin.client.screen.Screen screen ) { screen.setPageTitle ( "Reviewers" ) ; screen.show ( new com.googlesource.gerrit.plugins.reviewers.client.ReviewersScreen ( com.google.gwt.http.client.URL.decodeQueryString ( screen.getToken ( ) ) ) ) ; }
public static native net.codemirror.lib.CodeMirror create ( com.google.gerrit.client.diff.DisplaySide side , com.google.gwt.dom.client.Element parent , net.codemirror.lib.Configuration cfg ) ;
public boolean updateChange ( com.google.gerrit.server.git.BatchUpdate.ChangeContext ctx ) throws com.google.gwtorm.server.OrmException { ctx.getChange ( ) . setStatus ( Change.Status.MERGED ) ; ctx.getUpdate ( ctx.getChange ( ) . currentPatchSetId ( ) ) . fixStatus ( Change.Status.MERGED ) ; return true ; }
public void onClose ( final com.google.gwt.event.logical.shared.CloseEvent < com.google.gwt.user.client.ui.PopupPanel > event ) { com.google.gwtexpui.globalkey.client.ShowHelpCommand.current = null ; com.google.gwtexpui.globalkey.client.ShowHelpCommand.BUS.fireEvent ( new com.google.gwt.event.dom.client.FocusEvent ( ) { } ) ; }
public com.google.gerrit.server.query.change.ChangeData apply ( com.google.gerrit.server.query.change.ChangeData input ) { input.cacheFromSource ( currSource ) ; return input ; }
public static org.eclipse.jgit.lib.Config noteDbEnabled ( ) { return com.google.gerrit.server.query.change.AbstractQueryChangesTest.updateConfig ( com.google.gerrit.server.notedb.NotesMigration.allEnabledConfig ( ) ) ; }
protected void preDisplay ( com.google.gwt.core.client.JsArray < com.google.gerrit.client.dashboards.DashboardList > result ) { dashes.display ( result ) ; }
public static com.google.gerrit.server.account.InternalAccountUpdate.Builder builder ( ) { return new com.google.gerrit.server.account.InternalAccountUpdate.Builder.WrapperThatConvertsNullStringArgsToEmptyStrings ( new com.google.gerrit.server.account.AutoValue_InternalAccountUpdate.Builder ( ) ) ; }
java.lang.String value ( ) default "" ;
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { gotoSibling ( ( - 1 ) ) ; }
public void suggestReviewersFullTextSearch ( ) throws java.lang.Exception { java.lang.String changeId = createChange ( ) . getChangeId ( ) ; java.util.List < com.google.gerrit.extensions.common.SuggestedReviewerInfo > reviewers = suggestReviewers ( changeId , "ser" , 5 ) ; com.google.common.truth.Truth.assertThat ( reviewers ) . hasSize ( 4 ) ; }
void restoreChange ( com.google.gerrit.reviewdb.client.PatchSet.Id patchSetId , java.lang.String message , com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.ChangeDetail > callback ) ;
protected void configure ( ) { bind ( com.google.gerrit.server.securestore.SecureStore.class ) . toProvider ( com.google.gerrit.server.securestore.SecureStoreProvider.class ) ; }
private void assertNoError ( java.lang.String response ) { com.google.common.truth.Truth.assertThat ( response.toLowerCase ( java.util.Locale.US ) ) . doesNotContain ( "error" ) ; }
public long getMaxValue ( com.google.gerrit.server.index.Schema < com.google.gerrit.server.query.change.ChangeData > schema ) { return java.lang.Long.MAX_VALUE ; }
public void delete ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { delete.apply ( rsrc , new com.google.gerrit.gpg.server.DeleteGpgKey.Input ( ) ) ; } catch ( org.bouncycastle.openpgp.PGPException | com.google.gwtorm.server.OrmException | java.io.IOException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot delete GPG key" , e ) ; } }
public boolean canUpload ( ) { return getProjectControl ( ) . controlForRef ( ( "refs/for/" + ( getRefName ( ) ) ) ) . canPerform ( Permission.PUSH ) ; }
public void restoreFile ( org.eclipse.jgit.lib.Repository repository , com.google.gerrit.server.notedb.ChangeNotes notes , java.lang.String file ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.server.permissions.PermissionBackendException , com.google.gerrit.server.project.InvalidChangeOperationException , com.google.gwtorm.server.OrmException , java.io.IOException { modifyTree ( repository , notes , new com.google.gerrit.server.edit.tree.RestoreFileModification ( file ) ) ; }
public void testList ( ) { com.google.common.truth.Truth.assertThat ( cfg.getStringList ( "section" , null , "name" ) ) . asList ( ) . containsExactly ( "value-1" , "value-2" ) ; }
public void removeEventListener ( com.google.gerrit.common.EventListener listener ) ;
public void afterUpdateRepos ( ) throws java.lang.Exception { }
public void close ( ) { if ( closeReader ) { reader.close ( ) ; } }
protected com.google.gerrit.client.reviewdb.ReviewDb openReviewDb ( ) throws com.google.gerrit.server.ssh.AbstractCommand.Failure { try { return com.google.gerrit.client.rpc.Common.getSchemaFactory ( ) . open ( ) ; } catch ( com.google.gwtorm.client.OrmException e ) { throw new com.google.gerrit.server.ssh.AbstractCommand.Failure ( 1 , "fatal: Gerrit database is offline" ) ; } }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > evictAsync ( com.google.gerrit.reviewdb.Account.Id accountId ) ;
public void onFocus ( com.google.gwt.event.dom.client.FocusEvent event ) { if ( Util.C.defaultProjectName ( ) . equals ( nameBox.getText ( ) ) ) { nameBox.setText ( "" ) ; nameBox.removeStyleName ( Gerrit.RESOURCES.css ( ) . inputFieldTypeHint ( ) ) ; } }
com.google.gerrit.extensions.api.changes.ChangeApi rebase ( ) throws com.google.gerrit.extensions.restapi.RestApiException ;
protected void includeWatchers ( com.google.gerrit.server.account.ProjectWatches.NotifyType type ) { includeWatchers ( type , true ) ; }
public java.lang.Class < ? extends org.kohsuke.args4j.spi.OptionHandler < java.lang.Short > > handler ( ) { return com.google.gerrit.server.ssh.commands.ApproveOption.Handler.class ; }
public java.util.List < com.google.gerrit.server.query.change.ChangeData > byCommit ( org.eclipse.jgit.lib.ObjectId id ) throws com.google.gwtorm.server.OrmException { return query ( com.google.gerrit.server.query.change.InternalChangeQuery.commit ( id ) ) ; }
private com.google.gitiles.doc.MarkdownToHtml revisionReadme ( ) { return readme ( com.google.gitiles.GitilesView.revision ( ) . copyFrom ( view ) . build ( ) , "README.md" ) ; }
final native void waitForMerge ( boolean b ) ;
public void onFailure ( final java.lang.Throwable caught ) { if ( ( rpcSequence ) == rpcseq ) { settingsPanel.setEnabled ( true ) ; super . onFailure ( caught ) ; } }
public void fire ( com.google.gerrit.reviewdb.client.Project.NameKey project , org.eclipse.jgit.lib.RefUpdate refUpdate , org.eclipse.jgit.transport.ReceiveCommand.Type type , com.google.gerrit.reviewdb.client.Account.Id updater ) { fire ( project , refUpdate.getName ( ) , refUpdate.getOldObjectId ( ) , refUpdate.getNewObjectId ( ) , type , util.accountInfo ( updater ) ) ; }
public com.google.gerrit.server.IdentifiedUser create ( com.google.gerrit.reviewdb.client.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( capabilityControlFactory , authConfig , realm , anonymousCowardName , canonicalUrl , accountCache , groupBackend , disableReverseDnsLookup , remotePeerProvider , dbProvider , id , null ) ; }
public boolean canUpload ( ) { return getProjectControl ( ) . controlForRef ( ( "refs/for/" + ( getRefName ( ) ) ) ) . canPerform ( Permission.PUSH ) ; }
private static com.google.gerrit.client.reviewdb.AuthType toType ( final org.spearce.jgit.lib.Config cfg ) { if ( com.google.gerrit.server.config.AuthConfig.isBecomeAnyoneEnabled ( ) ) { return com.google.gerrit.client.reviewdb.AuthType.DEVELOPMENT_BECOME_ANY_ACCOUNT ; } return com.google.gerrit.server.config.ConfigUtil.getEnum ( cfg , "auth" , null , "type" , AuthType.OPENID ) ; }
com.google.common.util.concurrent.ListenableFuture < ? > replace ( org.apache.lucene.index.Term term , org.apache.lucene.document.Document doc ) throws java.io.IOException { return new NrtFuture ( writer.updateDocument ( term , doc ) ) ; }
static void replyError ( javax.servlet.http.HttpServletResponse res , int statusCode , java.lang.String msg ) throws java.io.IOException { res.setStatus ( statusCode ) ; com.google.gwtexpui.server.CacheHeaders.setNotCacheable ( res ) ; com.google.gerrit.httpd.restapi.RestApiServlet.replyText ( null , res , msg ) ; }
public void onReplace ( org.eclipse.jgit.lib.ObjectId oldNotesRev , org.eclipse.jgit.lib.ObjectId newNotesRev , com.google.gerrit.reviewdb.client.Account.Id accountId , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId > toRemove , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId > toAdd ) { }
public final void upsert ( final java.lang.Iterable < E > instances ) throws com.google.gwtorm.client.OrmException { doUpsert ( instances ) ; }
public com.google.gerrit.server.change.PatchSetInserter setGroups ( java.util.List < java.lang.String > groups ) { com.google.common.base.Preconditions.checkNotNull ( groups , "groups may not be null" ) ; this . groups = groups ; return this ; }
public void testUpdateOne ( ) throws com.google.gwtorm.server.OrmException , java.sql.SQLException { java.sql.PreparedStatement update = stubStatementWithUpdateCounts ( com.google.gwtorm.jdbc.TestJdbcAccess.UPDATE , 1 ) ; createClassUnderTest ( ) . update ( oneRow ) ; com.google.gwtorm.jdbc.TestJdbcAccess.assertUsedBatchingOnly ( update ) ; }
void changeProjectAccess ( com.google.gerrit.reviewdb.client.Project.NameKey projectName , java.lang.String baseRevision , java.lang.String message , java.util.List < com.google.gerrit.common.data.AccessSection > sections , com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.ProjectAccess > callback ) ;
protected void configure ( ) { factory ( AbandonedSender.Factory.class ) ; factory ( CommentSender.Factory.class ) ; factory ( DeleteVoteSender.Factory.class ) ; factory ( RestoredSender.Factory.class ) ; factory ( RevertedSender.Factory.class ) ; }
public void onClick ( android.view.View v ) { removeDiffView ( ) ; createDiffView ( ) ; init ( path , change , files ) ; displayFile ( change , path , files.get ( path ) , fileNumber , files.size ( ) ) ; }
private static int version ( com.google.gerrit.server.index.change.ChangeIndex i ) { return i.getSchema ( ) . getVersion ( ) ; }
protected void configure ( ) { cache ( com.google.gerrit.httpd.plugins.HttpPluginModule.PLUGIN_RESOURCES , com.google.gerrit.httpd.resources.ResourceKey.class , com.google.gerrit.httpd.resources.Resource.class ) . maximumWeight ( ( 2 << 20 ) ) . weigher ( com.google.gerrit.httpd.resources.ResourceWeigher.class ) ; }
protected void configure ( ) { bind ( java.io.File.class ) . annotatedWith ( com.google.gerrit.server.config.SitePath.class ) . toProvider ( com.google.gerrit.httpd.SitePathFromSystemConfigProvider.class ) . in ( com.google.inject.Scopes.SINGLETON ) ; }
public static java.lang.String toChange ( final com.google.gerrit.client.data.ChangeInfo c ) { return "change," + ( c.getId ( ) . get ( ) ) ; }
protected void configure ( ) { bind ( com.google.gerrit.httpd.GerritOptions.class ) . toInstance ( new com.google.gerrit.httpd.GerritOptions ( false , false ) ) ; }
public void loadGerritConfig ( final com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.data.GerritConfig > callback ) { callback.onSuccess ( com.google.gerrit.server.SystemInfoServiceImpl.getGerritConfig ( ) ) ; }
public void testEvictProjectListOK ( ) throws java.lang.Exception { setupMocks ( Constants.PROJECT_LIST , com.ericsson.gerrit.plugins.evictcache.RestSessionTest.EMPTY_JSON , com.ericsson.gerrit.plugins.evictcache.RestSessionTest.OK_RESPONSE , com.ericsson.gerrit.plugins.evictcache.RestSessionTest.DO_NOT_THROW_EXCEPTION ) ; com.google.common.truth.Truth.assertThat ( restClient.evict ( com.ericsson.gerrit.plugins.evictcache.RestSessionTest.SOURCE_NAME , Constants.PROJECT_LIST , new java.lang.Object ( ) ) ) . isTrue ( ) ; }
public boolean apply ( com.google.gerrit.extensions.common.ProjectInfo info ) { return new com.google.gerrit.reviewdb.client.Project.NameKey ( ( ( info.name ) != null ? info.name : com.google.gerrit.extensions.restapi.Url.decode ( info.id ) ) ) . equals ( p ) ; }
public void onSuccess ( final com.google.gerrit.client.data.GerritConfig result ) { com.google.gerrit.client.rpc.Common.setGerritConfig ( result ) ; onModuleLoad2 ( ) ; }
public java.lang.String toString ( ) { return ( ( com.google.gerrit.server.query.ObjectIdPredicate.getOperator ( ) ) + ":" ) + ( id.name ( ) ) ; }
public java.util.Map < java.lang.String , com.google.gerrit.extensions.common.ActionInfo > actions ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return revisionActions.apply ( revision ) . value ( ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot get actions" , e ) ; } }
public void createNewProject ( java.lang.String projectName , java.lang.String parentName , boolean emptyCommit , boolean permissionsOnly , com.google.gwtjsonrpc.common.AsyncCallback < com.google.gwtjsonrpc.common.VoidResult > callback ) { createProjectHandlerFactory.create ( projectName , parentName , emptyCommit , permissionsOnly ) . to ( callback ) ; }
public com.google.gerrit.index.query.Predicate < T > getChild ( int i ) { if ( i == 0 ) { return pred ; } throw new java.lang.ArrayIndexOutOfBoundsException ( i ) ; }
public int compare ( final com.google.gerrit.prettify.common.BaseEdit o1 , final com.google.gerrit.prettify.common.BaseEdit o2 ) { return ( o1.getBeginA ( ) ) - ( o2.getBeginA ( ) ) ; }
public void go ( ) { movePointerTo ( cid ) ; super . go ( ) ; }
public final native void setCurrentRevision ( java.lang.String r ) ;
private void populateAndServeFsRepository ( com.googlesource.gerrit.plugins.lfs.LfsBackend backend ) { com.googlesource.gerrit.plugins.lfs.fs.LocalLargeFileRepository repository = fsRepoFactory.create ( backend ) ; cache.put ( backend , repository ) ; serve ( repository.getServletUrlPattern ( ) ) . with ( fsServletFactory.create ( repository ) ) ; }
private void enable ( boolean on ) { for ( com.google.gwt.user.client.ui.Widget w : getButtonPanel ( ) ) { if ( w instanceof com.google.gwt.user.client.ui.Button ) { ( ( com.google.gwt.user.client.ui.Button ) ( w ) ) . setEnabled ( on ) ; } } }
public void description ( com.google.gerrit.extensions.api.projects.DescriptionInput in ) throws com.google.gerrit.extensions.restapi.RestApiException { try { putDescription.apply ( checkExists ( ) , in ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot put project description" , e ) ; } }
void setLfsResponseType ( ) { res.setContentType ( com.google.gerrit.extensions.api.lfs.LfsDefinitions.CONTENTTYPE_VND_GIT_LFS_JSON ) ; }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > evictAllAsync ( ) ;
public void setUp ( ) { com.google.common.truth.TruthJUnit.assume ( ) . that ( com.google.gerrit.testutil.NoteDbMode.readWrite ( ) ) . isFalse ( ) ; notesMigration.setAllEnabled ( false ) ; }
public void setUpMocks ( ) { servlet = new com.ericsson.gerrit.plugins.highavailability.forwarder.rest.IndexGroupRestApiServlet ( indexer , indexTs ) ; uuid = AccountGroup.UUID.parse ( com.ericsson.gerrit.plugins.highavailability.forwarder.rest.IndexGroupRestApiServletTest.UUID ) ; org.mockito.Mockito.when ( req.getPathInfo ( ) ) . thenReturn ( ( "/index/group/" + ( com.ericsson.gerrit.plugins.highavailability.forwarder.rest.IndexGroupRestApiServletTest.UUID ) ) ) ; }
private com.google.gerrit.server.patch.PatchListKey getKey ( org.eclipse.jgit.lib.ObjectId revisionIdA , org.eclipse.jgit.lib.ObjectId revisionIdB ) { return com.google.gerrit.server.patch.PatchListKey.againstCommit ( revisionIdA , revisionIdB , Whitespace.IGNORE_NONE ) ; }
public java.util.List < com.googlesource.gerrit.plugins.github.git.GHRelease > getReleases ( ) throws java.io.IOException { return ghRepository.getReleases ( ) ; }
public void resetTime ( ) { org.joda.time.DateTimeUtils.setCurrentMillisSystem ( ) ; java.lang.System.setProperty ( "user.timezone" , systemTimeZone ) ; }
public void testCreateProjectWithoutCapability_Forbidden ( ) throws com.google.gwtorm.server.OrmException , com.jcraft.jsch.JSchException , java.io.IOException { com.google.gerrit.acceptance.TestAccount user = accounts.create ( "user" , "user@example.com" , "User" ) ; com.google.gerrit.acceptance.RestResponse r = new com.google.gerrit.acceptance.RestSession ( server , user ) . put ( "/projects/newProject" ) ; org.junit.Assert.assertEquals ( HttpStatus.SC_FORBIDDEN , r.getStatusCode ( ) ) ; }
public com.google.gerrit.server.events.AccountAttribute asAccountAttribute ( com.google.gerrit.reviewdb.Account.Id id ) { return asAccountAttribute ( com.google.gerrit.server.util.FutureUtil.get ( accountCache.getAccount ( id ) ) ) ; }
public void setLimit ( int limit ) { imp.setUserProvidedLimit ( limit ) ; }
protected void configure ( ) { factory ( ChangeDetailFactory.Factory.class ) ; factory ( PatchSetDetailFactory.Factory.class ) ; factory ( PatchSetPublishDetailFactory.Factory.class ) ; }
public void onClick ( com.google.gwt.event.dom.client.ClickEvent event ) { com.google.gwt.user.client.Window.open ( com.google.gerrit.client.Gerrit.info ( ) . auth ( ) . editFullNameUrl ( ) , "_blank" , null ) ; }
public final Project.NameKey projectNameKey ( ) { return new com.google.gerrit.reviewdb.client.Project.NameKey ( project ( ) ) ; }
public java.lang.String getName ( ) { return "Group" ; }
public void operationComplete ( org.apache.mina.core.future.IoFuture future ) { if ( sd.isAuthenticationError ( ) ) { sshLog.onAuthFail ( sd ) ; } }
public static java.lang.String toSideBySide ( com.google.gerrit.client.DiffObject diffBase , com.google.gerrit.reviewdb.client.Patch.Key id ) { return com.google.gerrit.client.Dispatcher.toPatch ( "sidebyside" , diffBase , id ) ; }
public java.util.concurrent.ScheduledThreadPoolExecutor get ( ) { return queues.getQueue ( capabilityFactory.create ( user ) . getQueueType ( ) ) ; }
protected void init ( ) throws com.google.gerrit.common.errors.EmailException { super . init ( ) ; ccAllApprovals ( ) ; bccStarredBy ( ) ; includeWatchers ( NotifyType.ALL_COMMENTS ) ; includeWatchers ( NotifyType.SUBMITTED_CHANGES ) ; removeUsersThatIgnoredTheChange ( ) ; }
public final native com.google.gerrit.client.config.GitwebInfo gitweb ( ) ;
protected void preDisplay ( final com.google.gerrit.client.groups.GroupMap result ) { groups.display ( result ) ; groups.finishDisplay ( ) ; }
public boolean apply ( com.google.gerrit.server.git.ReceiveCommits.ReplaceRequest input ) { return ( ! ( input.skip ) ) && ( ( input.inputCommand.getResult ( ) ) == ( org.eclipse.jgit.transport.ReceiveCommand.Result.OK ) ) ; }
public com.google.gerrit.extensions.common.EditInfo toEditInfo ( com.google.gerrit.server.edit.ChangeEdit edit ) throws java.io.IOException { com.google.gerrit.extensions.common.EditInfo out = new com.google.gerrit.extensions.common.EditInfo ( ) ; out.commit = com.google.gerrit.server.edit.ChangeEditJson.fillCommit ( edit.getEditCommit ( ) ) ; out.actions = com.google.gerrit.server.edit.ChangeEditJson.fillActions ( edit ) ; return out ; }
public java.lang.String getRefName ( ) { return com.google.gerrit.reviewdb.client.RefNames.refsEdit ( user.getAccountId ( ) , change.getId ( ) , basePatchSet.getId ( ) ) ; }
public void onSuccess ( final com.google.gerrit.client.reviewdb.Account result ) { registerNewEmail.setEnabled ( true ) ; onSaveSuccess ( result ) ; }
public static void getGroupDetail ( java.lang.String group , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.groups.GroupInfo > cb ) { com.google.gerrit.client.groups.GroupApi.group ( group ) . view ( "detail" ) . get ( cb ) ; }
public void close ( ) throws java.io.IOException { try ( java.io.OutputStream o = out ) { o.write ( tail ) ; } }
public java.lang.String toString ( ) { return ( ( ( ( ( ( ( ( "FixReplacement{" + "path='" ) + ( path ) ) + '\'' ) + ", range=" ) + ( range ) ) + ", replacement='" ) + ( replacement ) ) + '\'' ) + '}' ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { closePopup ( ) ; }
public void testWithAnotherURI ( ) throws java.lang.Exception { com.google.gerrit.reviewdb.client.Project.NameKey p = createProject ( "a" ) ; org.eclipse.jgit.lib.Config cfg = new org.eclipse.jgit.lib.Config ( ) ; cfg.fromText ( ( ( ( ( "" + ( ( "[submodule \"a\"]\n" + "path = a\n" ) + "url = http://localhost:80/" ) ) + ( p.get ( ) ) ) + "\n" ) + "branch = master\n" ) ) ; com.google.gerrit.reviewdb.client.Branch.NameKey targetBranch = new com.google.gerrit.reviewdb.client.Branch.NameKey ( new com.google.gerrit.reviewdb.client.Project.NameKey ( "project" ) , "master" ) ; java.util.Set < com.google.gerrit.reviewdb.client.SubmoduleSubscription > res = new com.google.gerrit.server.util.SubmoduleSectionParser ( cfg , com.google.gerrit.acceptance.git.SubmoduleSectionParserIT.THIS_SERVER , targetBranch ) . parseAllSections ( ) ; java.util.Set < com.google.gerrit.reviewdb.client.SubmoduleSubscription > expected = com.google.common.collect.Sets.newHashSet ( new com.google.gerrit.reviewdb.client.SubmoduleSubscription ( targetBranch , new com.google.gerrit.reviewdb.client.Branch.NameKey ( p , "master" ) , "a" ) ) ; com.google.common.truth.Truth.assertThat ( res ) . containsExactlyElementsIn ( expected ) ; }
protected void configure ( ) { install ( new com.google.gerrit.rules.PrologModule.EnvironmentModule ( ) ) ; bind ( PrologEnvironment.Args.class ) ; }
public void testSubscriptionWildcardACLForMissingProject ( ) throws java.lang.Exception { org.eclipse.jgit.junit.TestRepository < ? > subRepo = createProjectWithPush ( "subscribed-to-project" ) ; allowMatchingSubmoduleSubscription ( "subscribed-to-project" , "refs/heads/*" , "not-existing-super-project" , "refs/heads/*" ) ; pushChangeTo ( subRepo , "master" ) ; }
public java.lang.String toString ( ) { try { return getDN ( ) ; } catch ( javax.naming.NamingException e ) { return "" ; } }
public int getSizeBasedOnAccuracy ( int statisticsAccuracy ) throws java.lang.IllegalArgumentException , java.lang.IllegalStateException , net.sf.ehcache.CacheException { return self ( ) . getSizeBasedOnAccuracy ( statisticsAccuracy ) ; }
protected void postDisplay ( ) { com.google.gwt.user.client.History.newItem ( Link.SETTINGS_CONTACT , true ) ; }
public boolean match ( java.lang.String ref , com.google.gerrit.server.CurrentUser user ) { return expect.equals ( ref ) ; }
private com.google.gerrit.server.notedb.ChangeUpdate newUpdate ( com.google.gerrit.reviewdb.client.Change c , com.google.gerrit.server.IdentifiedUser user ) throws java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { return new com.google.gerrit.server.notedb.ChangeUpdate ( com.google.gerrit.server.notedb.ChangeNotesTest.SERVER_IDENT , repoManager , accountCache , null , com.google.gerrit.server.notedb.ChangeNotesTest.LABEL_TYPES , c , com.google.gerrit.server.util.TimeUtil.nowTs ( ) , user ) ; }
public void stop ( ) { mem.getDbInstance ( ) . drop ( ) ; }
public void execute ( com.google.gerrit.server.git.BatchUpdate.Listener listener ) throws com.google.gerrit.extensions.restapi.RestApiException , com.google.gerrit.server.git.UpdateException { com.google.gerrit.server.git.BatchUpdate.execute ( com.google.common.collect.ImmutableList.of ( this ) , listener , requestId ) ; }
public java.util.List < com.google.gerrit.common.data.SubmitRecord > getSubmitRecords ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.PatchSet patchSet ) { return canSubmit ( db , patchSet , null , false , true , false ) ; }
protected com.google.gerrit.server.notedb.ChangeUpdate newUpdate ( com.google.gerrit.reviewdb.client.Change c , com.google.gerrit.server.CurrentUser user ) throws java.lang.Exception { com.google.gerrit.server.notedb.ChangeUpdate update = com.google.gerrit.testutil.TestChanges.newUpdate ( injector , repoManager , com.google.gerrit.server.notedb.AbstractChangeNotesTest.MIGRATION , c , allUsers , user ) ; return update ; }
void visibleGroups ( com.google.gwt.user.client.rpc.AsyncCallback < java.util.List < com.google.gerrit.reviewdb.AccountGroup > > callback ) ;
private java.lang.String getSeparator ( boolean redirect ) { java.lang.String separator = ( redirect ) ? com.googlesource.gerrit.plugins.github.GitHubConfig.FROM_TO_REDIRECT_SEPARATOR : com.googlesource.gerrit.plugins.github.GitHubConfig.FROM_TO_SEPARATOR ; return separator ; }
public boolean isOwner ( ) { return ( ( isDeclaredOwner ( ) ) && ( ! ( controlForRef ( "refs/*" ) . isBlocked ( Permission.OWNER ) ) ) ) || ( isAdmin ( ) ) ; }
private com.google.gerrit.extensions.api.changes.AddReviewerResult addReviewer ( java.lang.String changeId , com.google.gerrit.extensions.api.changes.AddReviewerInput in ) throws java.lang.Exception { com.google.gerrit.acceptance.RestResponse resp = adminRestSession.post ( ( ( "/changes/" + changeId ) + "/reviewers" ) , in ) ; return com.google.gerrit.acceptance.rest.change.ChangeReviewersIT.readContentFromJson ( resp , com.google.gerrit.extensions.api.changes.AddReviewerResult.class ) ; }
java.lang.String greenCheckClass ( ) ;
private static net.codemirror.lib.LineCharacter createImpl ( int line , int ch ) { net.codemirror.lib.LineCharacter lineCh = createObject ( ) . cast ( ) ; lineCh.setLine ( line ) ; lineCh.setCh ( ch ) ; return lineCh ; }
public java.util.List < org.eclipse.jgit.revwalk.FooterLine > commitFooters ( ) throws com.google.gwtorm.server.OrmException , java.io.IOException { if ( ( commitFooters ) == null ) { if ( ! ( loadCommitData ( ) ) ) { return null ; } } return commitFooters ; }
public static java.lang.String toSideBySide ( com.google.gerrit.reviewdb.client.PatchSet.Id diffBase , com.google.gerrit.reviewdb.client.PatchSet.Id revision , java.lang.String fileName ) { return com.google.gerrit.client.Dispatcher.toPatch ( "sidebyside" , diffBase , revision , fileName , null , 0 ) ; }
com.google.gwtorm.client.ResultSet < com.google.gerrit.reviewdb.AccountProjectWatch > byProject ( com.google.gerrit.reviewdb.Project.NameKey name ) throws com.google.gwtorm.client.OrmException ;
public void onSuccess ( com.google.gerrit.client.info.ChangeInfo.CommitInfo info ) { rev.setCommit ( info ) ; }
private void beforeTest ( org.eclipse.jgit.lib.Config cfg , boolean memory ) throws java.lang.Exception { server = com.google.gerrit.acceptance.GerritServer.start ( cfg , memory ) ; server.getTestInjector ( ) . injectMembers ( this ) ; }
private static boolean isInlineComment ( java.lang.String key ) { return ( ( key.startsWith ( "patchCommentEdit~" ) ) || ( key.startsWith ( "patchReply~" ) ) ) || ( key.startsWith ( "patchComment~" ) ) ; }
public void onSuccess ( com.google.gwt.resources.client.TextResource resource ) { com.google.gwt.dom.client.StyleInjector.inject ( resource.getText ( ) ) ; Lib.I.style ( ) . ensureInjected ( ) ; cb.onSuccess ( null ) ; }
public void execute ( com.google.gerrit.server.update.BatchUpdateListener listener ) throws com.google.gerrit.extensions.restapi.RestApiException , com.google.gerrit.server.update.UpdateException { com.google.gerrit.server.update.BatchUpdate.execute ( com.google.common.collect.ImmutableList.of ( this ) , listener , requestId , false ) ; }
public int hashCode ( ) { return java.util.Objects.hash ( oldId , parentNum , newId , whitespace , algorithm ) ; }
public static synchronized void incrementClock ( long clockStep , java.util.concurrent.TimeUnit clockStepUnit ) { com.google.common.base.Preconditions.checkState ( ( ( com.google.gerrit.testing.TestTimeUtil.clockMs ) != null ) , "call resetWithClockStep first" ) ; com.google.gerrit.testing.TestTimeUtil.clockMs.addAndGet ( clockStepUnit.toMillis ( clockStep ) ) ; }
protected void onInitUI ( ) { super . onInitUI ( ) ; setHeaderVisible ( false ) ; setWindowTitle ( com.google.gerrit.client.info.FileInfo.getFileName ( path ) ) ; }
protected void deny ( com.google.gerrit.server.project.ProjectConfig project , java.lang.String permission , com.google.gerrit.reviewdb.client.AccountGroup.UUID id , java.lang.String ref ) throws java.lang.Exception { com.google.gerrit.server.project.testing.Util.deny ( project , permission , id , ref ) ; saveProjectConfig ( project ) ; }
public com.google.common.util.concurrent.CheckedFuture < ? , java.io.IOException > deleteAsync ( com.google.gerrit.server.query.change.ChangeData cd ) { return ( executor ) != null ? submit ( new com.google.gerrit.server.index.ChangeIndexer.Task ( cd , true ) ) : com.google.common.util.concurrent.Futures.< java.lang.Object , java.io.IOException > immediateCheckedFuture ( null ) ; }
protected void configure ( ) { factory ( RenameGroupOp.Factory.class ) ; factory ( MetaDataUpdate.InternalFactory.class ) ; bind ( MetaDataUpdate.Server.class ) ; }
void apply ( com.google.gerrit.server.notedb.ChangeUpdate update ) throws com.google.gwtorm.server.OrmException { checkUpdate ( update ) ; update.setChangeMessage ( message.getMessage ( ) ) ; setTopic ( update ) ; setStatus ( update ) ; }
com.google.gerrit.server.CurrentUser getCurrentUser ( ) { return isSignedIn ( ) ? identified.create ( val.accountId ) : anonymous ; }
private java.util.List < java.lang.String > getRelativePaths ( java.io.File dir , java.lang.String extension ) throws java.io.IOException { java.util.ArrayList < java.lang.String > pathList = new java.util.ArrayList < > ( ) ; com.google.gerrit.pgm.rules.PrologCompiler.getRelativePaths ( dir , extension , "" , pathList ) ; return pathList ; }
public void onBlur ( final com.google.gwt.event.dom.client.BlurEvent event ) { hideTextBox ( ) ; }
public void testSimpleAdvance ( ) { com.google.gerrit.client.diff.EditIterator iter = new com.google.gerrit.client.diff.EditIterator ( lines , 0 ) ; assertLineChsEqual ( net.codemirror.lib.Pos.create ( 0 , 1 ) , iter.advance ( 1 ) ) ; }
static void deleteSessionCookie ( ) { com.google.gwt.user.client.Cookies.removeCookie ( com.google.gerrit.client.Gerrit.SESSION_COOKIE ) ; com.google.gerrit.client.Gerrit.myAccount = null ; com.google.gerrit.client.Gerrit.myAccountDiffPref = null ; com.google.gerrit.client.Gerrit.refreshMenuBar ( ) ; }
public java.lang.String getCommentLinkName ( ) { java.lang.String ret ; ret = gerritConfig.getString ( pluginName , null , "commentlink" ) ; if ( ret == null ) { ret = pluginName ; } return ret ; }
public void schemaThrowsExceptionWhenLookingUpForChange ( ) throws java.lang.Exception { setupPostMocks ( com.ericsson.gerrit.plugins.highavailability.forwarder.rest.IndexChangeRestApiServletTest.CHANGE_EXISTS , com.ericsson.gerrit.plugins.highavailability.forwarder.rest.IndexChangeRestApiServletTest.THROW_ORM_EXCEPTION ) ; indexRestApiServlet.doPost ( req , rsp ) ; org.mockito.Mockito.verify ( rsp ) . sendError ( javax.servlet.http.HttpServletResponse.SC_NOT_FOUND , "Error trying to find change \n" ) ; }
public java.util.TimeZone getTimeZone ( ) { return tz ; }
private com.google.gerrit.client.change.RelatedChangesTab getTab ( ) { if ( ( cherryPicksTab ) == null ) { cherryPicksTab = createTab ( Resources.C.cherryPicks ( ) , Resources.C.cherryPicksTooltip ( ) ) ; cherryPicksTab.setShowBranches ( true ) ; } return cherryPicksTab ; }
public java.io.InputStream getInputStream ( ) throws java.io.IOException { return new java.io.ByteArrayInputStream ( sshKey.getBytes ( java.nio.charset.StandardCharsets.UTF_8 ) ) ; }
public synchronized void schedule ( int idx , com.googlesource.gerrit.plugins.github.git.GitJob pullRequestImportJob ) { jobs.put ( new java.lang.Integer ( idx ) , pullRequestImportJob ) ; executor.exec ( pullRequestImportJob ) ; }
public void addRefUpdate ( org.eclipse.jgit.transport.ReceiveCommand cmd ) throws java.io.IOException { initRepository ( ) ; repoView.getCommands ( ) . add ( cmd ) ; }
private com.google.gerrit.server.config.GetServerInfo.ServerInfo getServerConfig ( ) throws java.lang.Exception { com.google.gerrit.acceptance.RestResponse r = adminRestSession.get ( "/config/server/info/" ) ; r.assertOK ( ) ; return newGson ( ) . fromJson ( r.getReader ( ) , com.google.gerrit.server.config.GetServerInfo.ServerInfo.class ) ; }
private static com.google.gerrit.client.rpc.RestApi groups ( com.google.gerrit.reviewdb.client.AccountGroup.UUID group ) { return com.google.gerrit.client.groups.GroupApi.group ( group ) . view ( "groups" ) ; }
public void onWindowClosing ( com.google.gwt.user.client.Window.ClosingEvent event ) { if ( ! ( cm.isClean ( generation ) ) ) { event.setMessage ( EditConstants.I.closeUnsavedChanges ( ) ) ; } }
public void addHashtagWithoutPermissionNotAllowed ( ) throws java.lang.Exception { com.google.gerrit.acceptance.PushOneCommit.Result r = createChange ( ) ; setApiUser ( user ) ; exception.expect ( com.google.gerrit.extensions.restapi.AuthException.class ) ; exception.expectMessage ( "edit hashtags not permitted" ) ; addHashtags ( r , "MyHashtag" ) ; }
protected java.lang.String prettify ( java.lang.String html , java.lang.String type ) { return com.google.gerrit.prettify.client.ClientSideFormatter.go ( com.google.gerrit.prettify.client.ClientSideFormatter.prettify.getContext ( ) , html , type , settings.getTabSize ( ) ) ; }
public void run ( ) { cmA.setHeight ( height ) ; cmB.setHeight ( height ) ; chunkManager.adjustPadding ( ) ; cmA.refresh ( ) ; cmB.refresh ( ) ; }
public void setSession ( final org.apache.sshd.server.session.ServerSession session ) { final com.google.gerrit.sshd.SshSession s = session.getAttribute ( SshSession.KEY ) ; this . ctx = new com.google.gerrit.sshd.SshScope.Context ( s , commandLine ) ; }
public void onFailure ( java.lang.Throwable caught ) { goChange ( ) ; super . onFailure ( caught ) ; }
public void testContainsTrueWithSingleElement ( ) throws java.lang.Exception { com.google.gerrit.extensions.registration.DynamicSet < java.lang.Integer > ds = new com.google.gerrit.extensions.registration.DynamicSet ( ) ; ds.add ( 2 ) ; com.google.common.truth.Truth.assertThat ( ds.contains ( 2 ) ) . isTrue ( ) ; }
public boolean isRefVisible ( ) { return getRefControl ( ) . isVisible ( ) ; }
public void configure ( ) { bind ( com.google.gerrit.server.mail.send.EmailSender.class ) . to ( com.google.gerrit.testutil.FakeEmailSender.class ) ; }
public com.google.gerrit.extensions.common.Theme getTheme ( ) { return ( theme ) != null ? com.google.gerrit.extensions.common.Theme.valueOf ( theme ) : null ; }
com.google.gerrit.server.git.CreateCodeReviewNotes create ( com.google.gerrit.reviewdb.ReviewDb reviewDb , org.eclipse.jgit.lib.Repository db ) ;
public void review ( final com.google.gerrit.client.reviewdb.Status newStatus , final com.google.gerrit.client.reviewdb.Account.Id by ) { status = newStatus.getCode ( ) ; reviewedBy = by ; reviewedOn = new java.sql.Timestamp ( java.lang.System.currentTimeMillis ( ) ) ; }
public void setSampledStatisticsEnabled ( boolean enableStatistics ) { self.setSampledStatisticsEnabled ( enableStatistics ) ; }
public void postEvent ( com.google.gerrit.reviewdb.client.Change change , com.google.gerrit.server.events.ChangeEvent event ) throws com.google.gwtorm.server.OrmException { fireEvent ( change , event ) ; }
public static org.eclipse.jgit.internal.storage.dfs.InMemoryRepository newRepository ( com.google.gerrit.reviewdb.client.Project.NameKey name ) { return new com.google.gerrit.testutil.InMemoryRepositoryManager.Repo ( com.google.gerrit.testutil.NoteDbMode.newNotesMigrationFromEnv ( ) , name ) ; }
public int compare ( java.nio.file.Path a , java.nio.file.Path b ) { return com.google.common.collect.ComparisonChain.start ( ) . compare ( com.google.gerrit.common.FileUtil.lastModified ( b ) , com.google.gerrit.common.FileUtil.lastModified ( a ) ) . compare ( a , b ) . result ( ) ; }
public void clearPassword ( com.google.gerrit.reviewdb.client.AccountExternalId.Key key , com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.reviewdb.client.AccountExternalId > callback ) { com.google.gerrit.httpd.rpc.Handler.wrap ( clearPasswordFactory.create ( key ) ) . to ( callback ) ; }
public void apply ( org.eclipse.jgit.dircache.DirCacheEntry ent ) { ent.setFileMode ( FileMode.GITLINK ) ; ent.setObjectId ( newCommit.getId ( ) ) ; }
public void testWithEndingURL ( ) throws java.lang.Exception { org.junit.Assert.assertEquals ( ( "a\n" + ( ( ( "\n" + "http://example.com/ fixes this\n" ) + "\n" ) + "Change-Id: I3b7e4e16b503ce00f07ba6ad01d97a356dad7701\n" ) ) , call ( ( "a\n" + ( "\n" + "http://example.com/ fixes this\n" ) ) ) ) ; org.junit.Assert.assertEquals ( ( "a\n" + ( ( ( "\n" + "https://example.com/ fixes this\n" ) + "\n" ) + "Change-Id: I62b9039e2fc0dce274af55e8f99312a8a80a805d\n" ) ) , call ( ( "a\n" + ( "\n" + "https://example.com/ fixes this\n" ) ) ) ) ; org.junit.Assert.assertEquals ( ( "a\n" + ( ( ( "\n" + "ftp://example.com/ fixes this\n" ) + "\n" ) + "Change-Id: I71b05dc1f6b9a5540a53a693e64d58b65a8910e8\n" ) ) , call ( ( "a\n" + ( "\n" + "ftp://example.com/ fixes this\n" ) ) ) ) ; org.junit.Assert.assertEquals ( ( "a\n" + ( ( ( "\n" + "git://example.com/ fixes this\n" ) + "\n" ) + "Change-Id: Id34e942baa68d790633737d815ddf11bac9183e5\n" ) ) , call ( ( "a\n" + ( "\n" + "git://example.com/ fixes this\n" ) ) ) ) ; }
static ExternalId.Key toExtIdKey ( org.bouncycastle.openpgp.PGPPublicKey key ) { return ExternalId.Key.create ( com.google.gerrit.server.account.ExternalId.SCHEME_GPGKEY , com.google.common.io.BaseEncoding.base16 ( ) . encode ( key.getFingerprint ( ) ) ) ; }
public void deleteReviewerFromReviewableWipChange ( ) throws java.lang.Exception { com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableWipChangeWithExtraReviewer ( ) ; removeReviewer ( sc , extraReviewer ) ; assertThat ( sender ) . notSent ( ) ; }
public void run ( ) { if ( cm.vim ( ) . hasSearchHighlight ( ) ) { cm.vim ( ) . handleKey ( "N" ) ; } else { getCommentManager ( ) . commentNav ( cm , Direction.NEXT ) . run ( ) ; } }
public void onValueChange ( com.google.gwt.event.logical.shared.ValueChangeEvent < java.lang.Boolean > event ) { updateDeleteButton ( ) ; }
void changeProjectSettings ( com.google.gerrit.client.reviewdb.Project update , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.admin.ProjectDetail > callback ) ;
public void sendRedirect ( java.lang.String location ) throws java.io.IOException { super . sendRedirect ( com.google.common.base.MoreObjects.firstNonNull ( redirectUrl , location ) ) ; }
private static Project.NameKey getProjectName ( com.google.gerrit.server.project.ChangeControl ctl ) { return ctl.getProject ( ) . getNameKey ( ) ; }
public static java.lang.String toPatchSideBySide ( final com.google.gerrit.reviewdb.Patch.Key id ) { return com.google.gerrit.client.Dispatcher.toPatch ( "" , id ) ; }
private long getSecureConfigLastEditTs ( ) { if ( ! ( java.nio.file.Files.exists ( site.secure_config ) ) ) { return 0L ; } return com.google.gerrit.common.FileUtil.lastModified ( site.secure_config ) ; }
private java.util.Optional < com.google.gerrit.server.edit.ChangeEdit > lookupChangeEdit ( com.google.gerrit.server.project.ChangeControl changeControl ) throws com.google.gerrit.extensions.restapi.AuthException , java.io.IOException { return changeEditUtil.byChange ( changeControl ) ; }
static org.apache.lucene.index.Term idTerm ( com.google.gerrit.reviewdb.client.Change.Id id ) { return com.google.gerrit.lucene.QueryBuilder.intTerm ( com.google.gerrit.server.index.change.ChangeField.LEGACY_ID.getName ( ) , id.get ( ) ) ; }
public void getTagOfNonExistingProject ( ) throws java.lang.Exception { exception.expect ( com.google.gerrit.extensions.restapi.ResourceNotFoundException.class ) ; gApi.projects ( ) . name ( "does-not-exist" ) . tag ( "tag" ) . get ( ) ; }
public void setTopic ( final java.lang.String topic ) { this . newTopicName = topic.trim ( ) ; }
public void remove ( ) { filter.compareAndSet ( guiceFilter , null ) ; }
java.lang.String submitPatchSet ( int id ) ;
public void setGranted ( ) { granted = new java.sql.Timestamp ( java.lang.System.currentTimeMillis ( ) ) ; }
public com.googlecode.prolog_cafe.lang.NumberTerm floatFractPart ( ) { throw new com.googlecode.prolog_cafe.exceptions.IllegalTypeException ( "float" , this ) ; }
void onSave ( com.google.gwt.event.dom.client.ClickEvent e ) { e.stopPropagation ( ) ; com.google.gerrit.client.rpc.CallbackGroup group = new com.google.gerrit.client.rpc.CallbackGroup ( ) ; save ( group ) ; group.done ( ) ; }
private boolean isSuccessful ( org.apache.http.HttpResponse response ) { int sc = response.getStatusLine ( ) . getStatusCode ( ) ; return ( ( sc == ( javax.servlet.http.HttpServletResponse.SC_CREATED ) ) || ( sc == ( javax.servlet.http.HttpServletResponse.SC_NO_CONTENT ) ) ) || ( sc == ( javax.servlet.http.HttpServletResponse.SC_OK ) ) ; }
public com.google.gerrit.server.git.BatchUpdate addOp ( com.google.gerrit.reviewdb.client.Change.Id id , com.google.gerrit.server.git.BatchUpdate.Op op ) { com.google.common.base.Preconditions.checkArgument ( ( ! ( op instanceof com.google.gerrit.server.git.BatchUpdate.InsertChangeOp ) ) , "use insertChange" ) ; com.google.common.base.Preconditions.checkNotNull ( op ) ; ops.put ( id , op ) ; return this ; }
public boolean isMatchable ( ) { for ( com.google.gerrit.server.query.Predicate < T > c : children ) { if ( ! ( c.isMatchable ( ) ) ) { return false ; } } return true ; }
public java.lang.String getHeader ( java.lang.String name ) { org.apache.http.Header hdr = response.getFirstHeader ( name ) ; return hdr != null ? hdr.getValue ( ) : null ; }
public void check ( com.google.gerrit.server.permissions.RefPermission perm ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.server.permissions.PermissionBackendException { if ( ! ( can ( perm ) ) ) { throw new com.google.gerrit.extensions.restapi.AuthException ( ( ( ( perm.describeForException ( ) ) + " not permitted for " ) + ( refName ) ) ) ; } }
public void removeReviewer ( com.google.gerrit.reviewdb.client.Account.Id reviewer ) { reviewers.put ( reviewer , ReviewerStateInternal.REMOVED ) ; }
public void destroy ( ) { if ( ( ( task ) != null ) && ( ! ( task.isDone ( ) ) ) ) { task.cancel ( true ) ; } }
public void onClick ( com.google.gwt.event.dom.client.ClickEvent event ) { setExternalGroup ( key ) ; }
com.googlesource.gerrit.plugins.findowners.OwnersDb get ( org.eclipse.jgit.lib.Repository repo , com.google.gerrit.server.query.change.ChangeData changeData ) throws com.google.gwtorm.server.OrmException { return get ( repo , changeData , changeData.currentPatchSet ( ) . getId ( ) . get ( ) ) ; }
public void setChangeId ( java.lang.String changeId ) { java.lang.String old = getChange ( ) . getKey ( ) . get ( ) ; com.google.common.base.Preconditions.checkArgument ( old.equals ( changeId ) , "The Change-Id was already set to %s, so we cannot set this Change-Id: %s" , old , changeId ) ; this . changeId = changeId ; }
public com.google.gerrit.extensions.common.ChangeInfo addChangeActions ( com.google.gerrit.extensions.common.ChangeInfo to , com.google.gerrit.server.project.ChangeControl ctl ) { java.util.List < com.google.gerrit.extensions.api.changes.ActionVisitor > visitors = visitors ( ) ; to.actions = toActionMap ( ctl , visitors , copy ( visitors , to ) ) ; return to ; }
private void afterTest ( ) throws java.lang.Exception { db.close ( ) ; sshSession.close ( ) ; server.stop ( ) ; com.google.gerrit.acceptance.TempFileUtil.cleanup ( ) ; }
public void evictAfterRename ( final com.google.gerrit.reviewdb.AccountGroup.NameKey oldName , final com.google.gerrit.reviewdb.AccountGroup.NameKey newName ) { byName.remove ( oldName ) ; updateGroupList ( oldName , newName ) ; }
static void publish ( com.google.gerrit.reviewdb.client.Change.Id id , java.lang.String revision , com.google.gwt.user.client.ui.Button ... draftButtons ) { com.google.gerrit.client.changes.ChangeApi.publish ( id.get ( ) , revision , com.google.gerrit.client.change.DraftActions.cs ( id , draftButtons ) ) ; }
private static java.lang.String url ( com.google.gerrit.reviewdb.client.PatchSet.Id ps , com.google.gerrit.client.changes.CommentInfo info ) { return com.google.gerrit.client.Dispatcher.toPatch ( null , ps , info.path ( ) ) ; }
private com.google.gerrit.server.group.db.GroupBundle rebuild ( com.google.gerrit.server.group.db.GroupBundle reviewDbBundle ) throws java.lang.Exception { try ( org.eclipse.jgit.lib.Repository repo = repoManager.openRepository ( allUsers ) ) { rebuilder.rebuild ( repo , reviewDbBundle , null ) ; return bundleFactory.fromNoteDb ( repo , reviewDbBundle.uuid ( ) ) ; } }
public com.google.gerrit.server.patch.PatchDetailServiceImpl.PublishResult run ( com.google.gerrit.client.reviewdb.ReviewDb db , com.google.gwtorm.client.Transaction txn , boolean retry ) throws com.google.gwtorm.client.OrmException { return doPublishComments ( psid , message , approvals , db , txn ) ; }
protected void onUnload ( ) { super . onUnload ( ) ; if ( setTheme ) { Gerrit.THEMER.clear ( ) ; } }
protected com.google.gerrit.server.notedb.ChangeNotes newNotes ( com.google.gerrit.reviewdb.client.Change c ) throws com.google.gwtorm.server.OrmException { return new com.google.gerrit.server.notedb.ChangeNotes ( args , c.getProject ( ) , c ) . load ( ) ; }
public com.google.gerrit.server.CurrentUser getUser ( ) ;
public com.google.gerrit.acceptance.RestResponse post ( java.lang.String endPoint , java.lang.Object content ) throws java.io.IOException { org.apache.http.client.methods.HttpPost post = new org.apache.http.client.methods.HttpPost ( ( "http://localhost:8080/a" + endPoint ) ) ; if ( content != null ) { post.addHeader ( new org.apache.http.message.BasicHeader ( "Content-Type" , "application/json" ) ) ; post.setEntity ( new org.apache.http.entity.StringEntity ( new com.google.gson.Gson ( ) . toJson ( content ) , org.apache.http.protocol.HTTP.UTF_8 ) ) ; } return new com.google.gerrit.acceptance.RestResponse ( getClient ( ) . execute ( post ) ) ; }
private void showHidePopup ( ) { if ( ( userPopup.isShowing ( ) ) && ( userPopup.isVisible ( ) ) ) { userPopup.hide ( ) ; } else { userPopup.showRelativeTo ( userSummaryPanel ) ; } }
public static boolean shouldConfigureLogSystem ( ) { return com.google.common.base.Strings.isNullOrEmpty ( java.lang.System.getProperty ( com.google.gerrit.server.util.LogUtil.LOG4J_CONFIGURATION ) ) ; }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > evictAsync ( com.google.gerrit.reviewdb.Account.Id key ) ;
public static java.lang.String refsUsers ( com.google.gerrit.reviewdb.client.Account.Id accountId ) { java.lang.StringBuilder r = com.google.gerrit.reviewdb.client.RefNames.newStringBuilder ( ) . append ( com.google.gerrit.reviewdb.client.RefNames.REFS_USERS ) ; return com.google.gerrit.reviewdb.client.RefNames.shard ( accountId.get ( ) , r ) . toString ( ) ; }
private static java.lang.String extractFooter ( java.lang.String key , java.lang.String line ) { return line.substring ( ( ( line.indexOf ( key ) ) + ( key.length ( ) ) ) , line.length ( ) ) . trim ( ) ; }
public void add ( com.google.inject.Injector injector ) { com.google.common.base.Preconditions.checkState ( ( ( startedIndex ) < 0 ) , "Already started" ) ; for ( com.google.inject.Binding < com.google.gerrit.lifecycle.LifecycleListener > binding : com.google.gerrit.lifecycle.LifecycleManager.get ( injector ) ) { add ( binding.getProvider ( ) ) ; } }
protected void add ( final com.google.gerrit.server.mail.RecipientType rt , final java.util.Collection < com.google.gerrit.client.reviewdb.Account.Id > list ) { for ( final com.google.gerrit.client.reviewdb.Account.Id id : list ) { add ( rt , id ) ; } }
private void addExtensionPoints ( com.google.gerrit.client.info.ChangeInfo change ) { addExtensionPoint ( GerritUiExtensionPoint.CHANGE_SCREEN_HEADER , headerExtension , change ) ; addExtensionPoint ( GerritUiExtensionPoint.CHANGE_SCREEN_HEADER_RIGHT_OF_BUTTONS , headerExtensionMiddle , change ) ; addExtensionPoint ( GerritUiExtensionPoint.CHANGE_SCREEN_HEADER_RIGHT_OF_POP_DOWNS , headerExtensionRight , change ) ; addExtensionPoint ( GerritUiExtensionPoint.CHANGE_SCREEN_BELOW_CHANGE_INFO_BLOCK , changeExtension , change ) ; }
public com.google.gerrit.server.project.ChangeControl forUser ( final com.google.gerrit.server.CurrentUser who ) { return new com.google.gerrit.server.project.ChangeControl ( approvalsUtil , changeDataFactory , getRefControl ( ) . forUser ( who ) , notes ) ; }
public void testParse_NameEmail3 ( ) { final com.google.gerrit.server.mail.Address a = com.google.gerrit.server.mail.Address.parse ( "<a@b>" ) ; org.junit.Assert.assertNull ( a.name ) ; org.junit.Assert.assertEquals ( "a@b" , a.email ) ; }
public void subsetOfBranchesVisibleIncludingHead ( ) throws java.lang.Exception { allow ( Permission.READ , com.google.gerrit.server.group.SystemGroupBackend.REGISTERED_USERS , "refs/heads/master" ) ; deny ( Permission.READ , com.google.gerrit.server.group.SystemGroupBackend.REGISTERED_USERS , "refs/heads/branch" ) ; assertRefs ( "HEAD" , "refs/changes/01/1/1" , "refs/changes/01/1/meta" , "refs/heads/master" ) ; }
private com.google.gerrit.httpd.raw.StaticModule.Paths getPaths ( ) { if ( ( paths ) == null ) { paths = new com.google.gerrit.httpd.raw.StaticModule.Paths ( ) ; } return paths ; }
java.util.Map < java.lang.String , java.lang.Object > toSoyData ( javax.servlet.http.HttpServletRequest req , org.eclipse.jgit.revwalk.RevCommit commit , org.eclipse.jgit.util.GitDateFormatter df ) throws java.io.IOException { return toSoyData ( req , commit , com.google.gitiles.CommitSoyData.DEFAULT_FIELDS , df ) ; }
private static java.lang.String publicKey ( com.jcraft.jsch.KeyPair sshKey , java.lang.String comment ) throws java.io.UnsupportedEncodingException { java.io.ByteArrayOutputStream out = new java.io.ByteArrayOutputStream ( ) ; sshKey.writePublicKey ( out , comment ) ; return out.toString ( java.nio.charset.StandardCharsets.US_ASCII.name ( ) ) ; }
public java.util.List < com.google.gerrit.extensions.common.CommentInfo > commentsAsList ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return listComments.getComments ( revision ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot retrieve comments" , e ) ; } }
public boolean isOwner ( ) { return ( controlForRef ( AccessSection.ALL ) . isOwner ( ) ) || ( getCurrentUser ( ) . getCapabilities ( ) . canAdministrateServer ( ) ) ; }
public void login ( com.google.gerrit.server.account.AuthResult res , com.google.gerrit.server.account.AuthMethod meth , boolean rememberMe ) ;
public static void getBranches ( com.google.gerrit.reviewdb.client.Project.NameKey name , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwt.core.client.JsArray < com.google.gerrit.client.projects.BranchInfo > > cb ) { com.google.gerrit.client.projects.ProjectApi.project ( name ) . view ( "branches" ) . get ( cb ) ; }
public com.google.gerrit.reviewdb.Project getProject ( ) { return config.getProject ( ) ; }
default void onRemoveByKey ( org.eclipse.jgit.lib.ObjectId oldNotesRev , org.eclipse.jgit.lib.ObjectId newNotesRev , com.google.gerrit.reviewdb.client.Account.Id accountId , com.google.gerrit.server.account.externalids.ExternalId.Key extIdKey ) throws java.io.IOException { onRemoveByKeys ( oldNotesRev , newNotesRev , accountId , java.util.Collections.singleton ( extIdKey ) ) ; }
private java.nio.file.Path getResourceFile ( java.lang.String resourcePath ) { return staticResourcesPath.resolve ( resourcePath ) ; }
public void rebaseUpToDateChange ( ) throws java.lang.Exception { com.google.gerrit.acceptance.PushOneCommit.Result r = createChange ( ) ; gApi.changes ( ) . id ( r.getChangeId ( ) ) . revision ( r.getCommit ( ) . name ( ) ) . rebase ( ) ; }
public void onSuccess ( java.lang.Void result ) { net.codemirror.theme.ThemeLoader.loadTheme ( prefs.theme ( ) , themeCallback ) ; group2.done ( ) ; group3.done ( ) ; }
public com.googlecode.prolog_cafe.lang.NumberTerm sqrt ( ) { if ( ( this . val ) < 0 ) throw new com.googlecode.prolog_cafe.exceptions.EvaluationException ( "undefined" ) ; return new com.googlecode.prolog_cafe.lang.DoubleTerm ( java.lang.Math.sqrt ( this . val ) ) ; }
private java.io.File getPluginDataDir ( java.lang.String name ) { return new java.io.File ( dataDir , name ) ; }
public boolean hasChange ( ) { return index.getSchema ( ) . getFields ( ) . containsKey ( ChangeField.CHANGE.getName ( ) ) ; }
public void start ( ) { refreshThread.start ( ) ; }
public void onSuccess ( java.lang.String result ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( psId.getParentKey ( ) , java.lang.String.valueOf ( psId.get ( ) ) ) ) ; }
public void setText ( java.lang.String text ) { focusHint ( ) ; super . setText ( text ) ; prevText = text ; if ( ! ( isFocused ) ) { blurHint ( ) ; } }
public void onFailure ( java.lang.Throwable caught ) { com.google.gerrit.client.change.ChangeScreen.logger.log ( java.util.logging.Level.SEVERE , ( "Loading file list and inline comments failed: " + ( caught.getMessage ( ) ) ) ) ; loadConfigInfo ( info , rev ) ; }
public static void display ( final com.google.gerrit.client.ui.Screen view ) { if ( ( com.google.gerrit.client.Gerrit.currentScreen ) != null ) { com.google.gerrit.client.Gerrit.body.remove ( com.google.gerrit.client.Gerrit.currentScreen ) ; } com.google.gerrit.client.Gerrit.currentScreen = view ; com.google.gerrit.client.Gerrit.body.add ( com.google.gerrit.client.Gerrit.currentScreen ) ; }
com.google.gerrit.server.notedb.ChangeUpdate create ( com.google.gerrit.server.notedb.ChangeNotes notes , com.google.gerrit.server.CurrentUser user , java.util.Date when ) ;
protected com.google.gson.GsonBuilder createGsonBuilder ( ) { final com.google.gson.GsonBuilder g = super . createGsonBuilder ( ) ; g.registerTypeAdapter ( com.google.gerrit.prettify.common.LineEdit.class , new com.google.gerrit.httpd.rpc.EditDeserializer ( ) ) ; return g ; }
public void setSession ( final org.apache.sshd.server.session.ServerSession session ) { final com.google.gerrit.sshd.SshSession s = session.getAttribute ( SshSession.KEY ) ; this . ctx = sshScope.newContext ( schemaFactory , s , commandLine ) ; }
com.google.common.util.concurrent.ListenableFuture < ? > replace ( org.apache.lucene.index.Term term , org.apache.lucene.document.Document doc ) throws java.io.IOException { return new NrtFuture ( writer.updateDocument ( term , doc ) ) ; }
private void add ( final com.google.gerrit.server.mail.RecipientType rt , final com.google.gerrit.client.reviewdb.UserIdentity who ) { if ( ( who != null ) && ( ( who.getAccount ( ) ) != null ) ) { add ( rt , who.getAccount ( ) ) ; } }
private void assertDeleteForbidden ( ) throws java.lang.Exception { exception.expect ( com.google.gerrit.extensions.restapi.AuthException.class ) ; branch ( ) . delete ( ) ; branch ( ) . get ( ) ; }
private static boolean isConfig ( final org.eclipse.jgit.transport.ReceiveCommand cmd ) { return cmd.getRefName ( ) . equals ( GitRepositoryManager.REF_CONFIG ) ; }
com.google.gwtorm.client.ResultSet < com.google.gerrit.reviewdb.Change > byBranchKey ( com.google.gerrit.reviewdb.Branch.NameKey p , com.google.gerrit.reviewdb.Change.Key key ) throws com.google.gwtorm.client.OrmException ;
public void testIndexChangeFailed ( ) throws java.lang.Exception { setUpMocks ( com.ericsson.gerrit.plugins.multimaster.RestSessionTest.INDEX_OP , com.ericsson.gerrit.plugins.multimaster.RestSessionTest.FAILED , com.ericsson.gerrit.plugins.multimaster.RestSessionTest.ERROR_MSG , com.ericsson.gerrit.plugins.multimaster.RestSessionTest.DO_NOT_THROW_EXCEPTION ) ; com.google.common.truth.Truth.assertThat ( restClient.index ( com.ericsson.gerrit.plugins.multimaster.RestSessionTest.CHANGE_NUMBER ) ) . isFalse ( ) ; }
public void removeEventListener ( com.google.gerrit.common.EventListener listener ) { }
public void deleteBranchByAdmin ( ) throws java.lang.Exception { assertDeleteSucceeds ( testBranch ) ; }
public void testParseBad ( ) throws java.lang.Exception { com.google.gerrit.server.git.ValidationError.Sink sink = org.easymock.EasyMock.createNiceMock ( ValidationError.Sink.class ) ; org.easymock.EasyMock.replay ( sink ) ; com.google.gerrit.server.account.QueryList.parse ( com.google.gerrit.server.account.QueryListTest.L_BAD , sink ) ; }
public void patchSetDetail2 ( com.google.gerrit.reviewdb.PatchSet.Id baseId , com.google.gerrit.reviewdb.PatchSet.Id id , com.google.gerrit.reviewdb.AccountDiffPreference diffPrefs , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.common.data.PatchSetDetail > callback ) { patchSetDetail.create ( baseId , id , diffPrefs ) . to ( callback ) ; }
protected java.lang.Class < ? extends com.google.inject.Provider < java.lang.String > > provider ( ) { return com.google.gerrit.server.config.CanonicalWebUrlProvider.class ; }
protected static java.io.Writer newWriter ( java.io.OutputStream os , javax.servlet.http.HttpServletResponse res ) throws java.io.IOException { return new java.io.OutputStreamWriter ( os , res.getCharacterEncoding ( ) ) ; }
protected void configure ( ) { if ( ! ( groupsMigration.disableGroupReviewDb ( ) ) ) { com.google.gerrit.extensions.registration.DynamicSet.bind ( binder ( ) , com.google.gerrit.server.audit.group.GroupAuditListener.class ) . to ( com.google.gerrit.server.group.DbGroupMemberAuditListener.class ) ; } }
protected void fireEventForUnrestrictedListeners ( com.google.gerrit.server.events.Event event ) { if ( ! ( com.ericsson.gerrit.plugins.highavailability.forwarder.Context.isForwardedEvent ( ) ) ) { super . fireEventForUnrestrictedListeners ( event ) ; } }
public static com.google.gerrit.server.query.change.InternalChangeQuery query ( com.google.gerrit.server.query.change.InternalChangeQuery q ) { java.util.Set < java.lang.String > fields = com.google.common.collect.ImmutableSet.of ( ChangeField.CHANGE.getName ( ) , ChangeField.PATCH_SET.getName ( ) , ChangeField.MERGEABLE.getName ( ) ) ; return q.setRequestedFields ( fields ) ; }
protected abstract com.google.gwtorm.client.ResultSet < T > scanPrimaryKey ( byte [ ] fromKey , byte [ ] toKey , int limit , boolean order ) throws com.google.gwtorm.client.OrmException ;
public com.codahale.metrics.Metric getMetric ( java.lang.String name ) { com.codahale.metrics.Metric m = bucketed.get ( name ) ; return m != null ? m : registry.getMetrics ( ) . get ( name ) ; }
public com.google.gerrit.acceptance.RestResponse get ( java.lang.String endPoint ) throws java.io.IOException { org.apache.http.client.methods.HttpGet get = new org.apache.http.client.methods.HttpGet ( ( "http://localhost:8080/a" + endPoint ) ) ; return new com.google.gerrit.acceptance.RestResponse ( getClient ( ) . execute ( get ) ) ; }
public com.google.gerrit.server.IdentifiedUser create ( final com.google.gerrit.server.AccessPath accessPath , final com.google.gerrit.reviewdb.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( accessPath , authConfig , canonicalUrl , realm , accountCache , remotePeerProvider , dbProvider , id ) ; }
public void testEventSentThrowsException ( ) throws java.lang.Exception { com.google.gerrit.server.events.Event event = setUpMocksForEvent ( com.ericsson.gerrit.plugins.highavailability.forwarder.rest.RestForwarderTest.FAILED , com.ericsson.gerrit.plugins.highavailability.forwarder.rest.RestForwarderTest.EXCEPTION_MSG , com.ericsson.gerrit.plugins.highavailability.forwarder.rest.RestForwarderTest.THROW_EXCEPTION ) ; com.google.common.truth.Truth.assertThat ( restForwarder.send ( event ) ) . isFalse ( ) ; }
private com.google.gerrit.server.notedb.ChangeNotes getNotes ( com.google.gerrit.extensions.common.ChangeInfo info ) throws com.google.gwtorm.server.OrmException { try { return changeNotesFactory.createChecked ( new com.google.gerrit.reviewdb.client.Change.Id ( info._number ) ) ; } catch ( com.google.gerrit.server.project.NoSuchChangeException e ) { throw new com.google.gwtorm.server.OrmException ( e ) ; } }
private void postMessage ( java.lang.String changeId , java.lang.String msg ) throws java.io.IOException { com.google.gerrit.extensions.api.changes.ReviewInput in = new com.google.gerrit.extensions.api.changes.ReviewInput ( ) ; in.message = msg ; session.post ( ( ( "/changes/" + changeId ) + "/revisions/1/review" ) , in ) . consume ( ) ; }
public synchronized void flushBuffer ( ) throws java.io.IOException { if ( ( outputStream ) != null ) { outputStream.flush ( ) ; } if ( ( writer ) != null ) { writer.flush ( ) ; } }
public void validCert ( ) throws java.lang.Exception { org.eclipse.jgit.transport.PushCertificate cert = newSignedCert ( validNonce ( ) , com.google.gerrit.gpg.testutil.TestKeys.validKeyWithoutExpiration ( ) ) ; assertNoProblems ( cert ) ; }
public final native boolean skipUnchanged ( ) ;
protected void format ( ) throws com.google.gerrit.common.errors.EmailException { appendText ( textTemplate ( "AddKey" ) ) ; appendHtml ( soyHtmlTemplate ( "AddKeyHtml" ) ) ; }
protected void configure ( ) { bind ( java.nio.file.Path.class ) . annotatedWith ( com.google.gerrit.server.config.SitePath.class ) . toInstance ( getSitePath ( ) ) ; }
public void testRightEventIsForwarded ( ) throws java.lang.Exception { setUpMocks ( true ) ; com.ericsson.gerrit.plugins.highavailability.forwarder.Context.setForwardedEvent ( true ) ; eventHandler.onEvent ( event ) ; com.ericsson.gerrit.plugins.highavailability.forwarder.Context.unsetForwardedEvent ( ) ; org.mockito.Mockito.verifyZeroInteractions ( eventForwarder ) ; }
protected void updateOwnerGroup ( com.google.gerrit.client.groups.GroupInfo ownerGroup ) { group.setOwnerUUID ( ownerGroup.getGroupUUID ( ) ) ; group.owner ( ownerGroup.name ( ) ) ; }
void setUseContributorArgreements ( boolean on ) { contributorAgreements = com.google.gerrit.extensions.common.InheritableBoolean.TRUE ; }
public void addValue ( final java.lang.Short val ) { this . value = val ; }
public com.google.gerrit.reviewdb.client.Change update ( com.google.gerrit.reviewdb.client.Change change ) { if ( ( change.getStatus ( ) ) == ( com.google.gerrit.reviewdb.client.Change.Status.ABANDONED ) ) { change.setStatus ( Status.NEW ) ; com.google.gerrit.server.ChangeUtil.updated ( change ) ; return change ; } return null ; }
public java.lang.String getLoginHttpHeader ( ) { return getGerritConfig ( ) . getString ( "auth" , null , "httpheader" ) ; }
public void deleteFile ( org.eclipse.jgit.lib.Repository repository , com.google.gerrit.server.edit.ChangeEdit changeEdit , java.lang.String file ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.server.project.InvalidChangeOperationException , java.io.IOException { modifyTree ( repository , changeEdit , new com.google.gerrit.server.edit.tree.DeleteFileModification ( file ) ) ; }
abstract void incOther ( com.google.gerrit.prettify.common.EditList.Hunk hunk ) ;
public static synchronized java.net.InetSocketAddress getAddress ( ) { if ( ( ( com.google.gerrit.server.ssh.GerritSshDaemon.sshd ) != null ) && ( ( com.google.gerrit.server.ssh.GerritSshDaemon.preferredAddress ) == null ) ) { com.google.gerrit.server.ssh.GerritSshDaemon.preferredAddress = com.google.gerrit.server.ssh.GerritSshDaemon.computePreferredAddress ( ) ; } return com.google.gerrit.server.ssh.GerritSshDaemon.preferredAddress ; }
public boolean isVisible ( ) { return ( projectControl.visibleForReplication ( ) ) || ( canPerform ( Permission.READ ) ) ; }
private void beforeTest ( org.eclipse.jgit.lib.Config cfg ) throws java.lang.Exception { server = com.google.gerrit.acceptance.GerritServer.start ( cfg ) ; server.getTestInjector ( ) . injectMembers ( this ) ; }
public com.google.gerrit.server.account.AccountState getByUsername ( java.lang.String username ) { com.google.gerrit.reviewdb.Account.Id id = byName.get ( new com.google.gerrit.reviewdb.Account.Username ( username ) ) ; return id != null ? byId.get ( id ) : null ; }
public static final com.google.gerrit.common.data.LabelType patchSetLock ( ) { com.google.gerrit.common.data.LabelType label = com.google.gerrit.server.project.Util.category ( "Patch-Set-Lock" , com.google.gerrit.server.project.Util.value ( 1 , "Patch Set Locked" ) , com.google.gerrit.server.project.Util.value ( 0 , "Patch Set Unlocked" ) ) ; label.setFunction ( LabelFunction.PATCH_SET_LOCK ) ; return label ; }
public void testCreateGroupWhenGroupAlreadyExists_Conflict ( ) throws com.google.gwtorm.server.OrmException , com.jcraft.jsch.JSchException , java.io.IOException { com.google.gerrit.acceptance.RestResponse r = session.put ( "/groups/Administrators" ) ; org.junit.Assert.assertEquals ( HttpStatus.SC_CONFLICT , r.getStatusCode ( ) ) ; }
public void tearDown ( ) { requestContext.setContext ( null ) ; if ( ( db ) != null ) { db.close ( ) ; } com.google.gerrit.testing.InMemoryDatabase.drop ( schemaFactory ) ; }
public static java.lang.String toAccountGroup ( final com.google.gerrit.reviewdb.AccountGroup.Id id ) { return "/admin/groups/" + ( id.toString ( ) ) ; }
public static java.lang.String mediumFormat ( final java.util.Date dt ) { if ( dt == null ) { return "" ; } com.google.gerrit.client.FormatUtil.ensureInited ( ) ; return com.google.gerrit.client.FormatUtil.dtfmt.format ( new java.util.Date ( dt.getTime ( ) ) ) ; }
public int hashCode ( ) { return ( 127 * ( "value" . hashCode ( ) ) ) ^ ( value ( ) . hashCode ( ) ) ; }
void addError ( java.lang.String error ) { messages.add ( new com.google.gerrit.server.git.validators.CommitValidationMessage ( error , true ) ) ; }
private void doVerify ( ) { org.easymock.EasyMock.verify ( mockDb , pc , pcf , grm ) ; org.easymock.EasyMock.verify ( refMocks.toArray ( ) ) ; }
public void setUp ( ) throws java.lang.Exception { repo = new org.eclipse.jgit.junit.TestRepository < org.eclipse.jgit.internal.storage.dfs.DfsRepository > ( new org.eclipse.jgit.internal.storage.dfs.InMemoryRepository ( new org.eclipse.jgit.internal.storage.dfs.DfsRepositoryDescription ( "repo" ) ) ) ; }
public com.googlesource.gerrit.plugins.github.oauth.OAuthCookie getFromUser ( java.lang.String username , java.lang.String email , java.lang.String fullName , java.util.SortedSet < com.googlesource.gerrit.plugins.github.oauth.OAuthProtocol.Scope > scopes ) { try { return new com.googlesource.gerrit.plugins.github.oauth.OAuthCookie ( cipher , username , email , fullName , scopes ) ; } catch ( com.googlesource.gerrit.plugins.github.oauth.OAuthTokenException e ) { return null ; } }
public void onSuccess ( com.google.gerrit.client.data.ChangeDetail result ) { changeScreen.display ( result ) ; }
private void enable ( final boolean on ) { showSiteHeader.setEnabled ( on ) ; useFlashClipboard.setEnabled ( on ) ; copySelfOnEmails.setEnabled ( on ) ; maximumPageSize.setEnabled ( on ) ; defaultContext.setEnabled ( on ) ; }
protected java.io.Writer startRenderText ( javax.servlet.http.HttpServletRequest req , javax.servlet.http.HttpServletResponse res ) throws java.io.IOException { return startRenderText ( req , res , com.google.gitiles.FormatType.TEXT.getMimeType ( ) ) ; }
private static int version ( com.google.gerrit.server.index.Index < ? , ? > i ) { return i.getSchema ( ) . getVersion ( ) ; }
private < T > boolean isPrimitive ( org.kohsuke.args4j.spi.Setter < T > setter ) { return setter.getType ( ) . isPrimitive ( ) ; }
protected Account.Id getAccountId ( ) { com.google.gerrit.server.CurrentUser u = currentUser.get ( ) ; if ( u.isIdentifiedUser ( ) ) { return ( ( com.google.gerrit.server.IdentifiedUser ) ( u ) ) . getAccountId ( ) ; } return null ; }
private static com.google.gerrit.server.change.ConsistencyChecker.Result create ( com.google.gerrit.server.project.ChangeControl ctl , java.util.List < com.google.gerrit.extensions.common.ProblemInfo > problems ) { return new com.google.gerrit.server.change.AutoValue_ConsistencyChecker_Result ( ctl.getId ( ) , ctl.getChange ( ) , problems ) ; }
private com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > rewrite ( com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > in ) throws com.google.gerrit.server.query.QueryParseException { return rewrite.rewrite ( in , com.google.gerrit.server.index.IndexRewriteTest.options ( 0 , com.google.gerrit.common.data.GlobalCapability.DEFAULT_MAX_QUERY_LIMIT ) ) ; }
public void onSuccess ( com.google.gerrit.client.rpc.NativeString result ) { submitTypeRecord = com.google.gerrit.common.data.SubmitTypeRecord.OK ( com.google.gerrit.extensions.common.SubmitType.valueOf ( result.asString ( ) ) ) ; }
private void setNew ( com.google.gerrit.reviewdb.client.Change c , com.google.gerrit.reviewdb.client.ChangeMessage msg ) throws com.google.gwtorm.server.OrmException { sendMergeFail ( notesFactory.create ( c ) , msg , true ) ; }
public void removeCollaborators ( java.util.Collection < com.googlesource.gerrit.plugins.github.git.GHUser > users ) throws java.io.IOException { ghRepository.removeCollaborators ( users ) ; }
void sendMessages ( ) { for ( com.google.gerrit.server.git.validators.CommitValidationMessage m : messages ) { if ( m.isError ( ) ) { messageSender.sendError ( m.getMessage ( ) ) ; } else { messageSender.sendMessage ( m.getMessage ( ) ) ; } } }
public T getValue ( ) { return ignoreEditorValue ? value : asEditor ( ) . getValue ( ) ; }
private final native void emailStrategyRaw ( java.lang.String s ) ;
static boolean dryRun ( com.google.gerrit.server.git.strategy.SubmitDryRun.Arguments args , com.google.gerrit.server.git.CodeReviewCommit mergeTip , com.google.gerrit.server.git.CodeReviewCommit toMerge ) throws com.google.gerrit.server.git.IntegrationException { return args.mergeUtil.canFastForward ( args.mergeSorter , mergeTip , args.rw , toMerge ) ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { final java.util.HashSet < com.google.gerrit.reviewdb.RefRight.Key > refRightIds = rights.getRefRightIdsChecked ( ) ; doDeleteRefRights ( refRightIds ) ; }
public final boolean canLink ( com.google.gerrit.client.info.ChangeInfo.RevisionInfo revision ) { return ( revision.draft ( ) ) || ( type ( ) . linkDrafts ( ) ) ; }
public < T > T get ( com.google.gerrit.rules.StoredValue < T > sv ) { return ( ( T ) ( storedValues.get ( sv ) ) ) ; }
public com.google.gerrit.reviewdb.client.PatchSetApproval getSubmitter ( final com.google.gerrit.reviewdb.client.PatchSet.Id c ) { return approvalsUtil.getSubmitter ( db.get ( ) , c ) ; }
public com.google.gwtorm.jdbc.AbstractTestJdbcAccess.Data get ( com.google.gwtorm.jdbc.AbstractTestJdbcAccess.Data.DataKey key ) throws com.google.gwtorm.server.OrmException { throw new java.lang.UnsupportedOperationException ( ) ; }
public java.lang.String getLabel ( ) { return com.google.gerrit.common.data.Permission.extractLabel ( getName ( ) ) ; }
public void onClick ( com.google.gwt.event.dom.client.ClickEvent e ) { if ( com.google.gerrit.client.change.Reload.link.handleAsClick ( e.getNativeEvent ( ) . < com.google.gwt.user.client.Event > cast ( ) ) ) { e.preventDefault ( ) ; e.stopPropagation ( ) ; reload ( ) ; } }
private void initProviderJce ( ) { setRandomFactory ( new org.apache.sshd.common.random.SingletonRandomFactory ( org.apache.sshd.common.random.JceRandomFactory.INSTANCE ) ) ; }
protected void onOpenRow ( int row ) { final com.google.gerrit.client.info.ChangeInfo c = getRowItem ( row ) ; com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( c.projectNameKey ( ) , c.legacyId ( ) ) ) ; }
public static void createDraft ( com.google.gerrit.reviewdb.client.PatchSet.Id id , com.google.gerrit.client.changes.CommentInput content , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.changes.CommentInfo > cb ) { com.google.gerrit.client.changes.CommentApi.revision ( id , "drafts" ) . put ( content , cb ) ; }
private java.lang.String comparePattern ( ) { if ( getName ( ) . startsWith ( com.google.gerrit.common.data.AccessSection.REGEX_PREFIX ) ) { return getName ( ) . substring ( com.google.gerrit.common.data.AccessSection.REGEX_PREFIX.length ( ) ) ; } return getName ( ) ; }
public void patchSetDetail ( final com.google.gerrit.reviewdb.PatchSet.Id idA , final com.google.gerrit.reviewdb.PatchSet.Id idB , final com.google.gerrit.reviewdb.AccountDiffPreference diffPrefs , final com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.common.data.PatchSetDetail > callback ) { patchSetDetail.create ( idA , idB , diffPrefs ) . to ( callback ) ; }
public void createNewDraftChangeNotAllowed ( ) throws java.lang.Exception { com.google.gerrit.extensions.common.ChangeInput ci = newChangeInput ( ChangeStatus.DRAFT ) ; assertCreateFails ( ci , com.google.gerrit.extensions.restapi.BadRequestException.class , "unsupported change status" ) ; }
public PatchSet.Id getSideA ( ) { return idSideA ; }
public void getUrl ( ) throws java.lang.Exception { config.setString ( "database" , null , "port" , "4242" ) ; com.google.common.truth.Truth.assertThat ( hana.getUrl ( ) ) . isEqualTo ( "jdbc:sap://my.host:4242" ) ; }
public void testAcrossNewline ( ) { com.google.gerrit.client.diff.SideBySide2.EditIterator iter = new com.google.gerrit.client.diff.SideBySide2.EditIterator ( lines , 0 ) ; assertLineChsEqual ( net.codemirror.lib.LineCharacter.create ( 1 , 1 ) , iter.advance ( 5 ) ) ; }
public void resetToDefaults ( ) { defaultContext = com.google.gerrit.client.reviewdb.AccountGeneralPreferences.DEFAULT_CONTEXT ; maximumPageSize = com.google.gerrit.client.reviewdb.AccountGeneralPreferences.DEFAULT_PAGESIZE ; showSiteHeader = true ; useFlashClipboard = true ; }
public com.google.gwtorm.server.Access < ? , ? > [ ] allRelations ( ) { throw new com.google.gerrit.testutil.DisabledReviewDb.Disabled ( ) ; }
public java.util.concurrent.ExecutorService createSendEmailExecutor ( ) { return com.google.common.util.concurrent.MoreExecutors.newDirectExecutorService ( ) ; }
public com.google.gerrit.acceptance.RestResponse head ( java.lang.String endPoint ) throws java.io.IOException { return execute ( org.apache.http.client.fluent.Request.Head ( getUrl ( endPoint ) ) ) ; }
private void initUI ( ) { initName ( ) ; initOwner ( ) ; initDescription ( ) ; initMemberList ( ) ; }
public void addOtherUsersGpgKey_Conflict ( ) throws java.lang.Exception { addExternalIdEmail ( admin , "test5@example.com" ) ; com.google.gerrit.reviewdb.client.AccountExternalId extId = new com.google.gerrit.reviewdb.client.AccountExternalId ( user.getId ( ) , new com.google.gerrit.reviewdb.client.AccountExternalId.Key ( "foo:myId" ) ) ; db.accountExternalIds ( ) . insert ( java.util.Collections.singleton ( extId ) ) ; com.google.gerrit.server.git.gpg.TestKey key = com.google.gerrit.server.git.gpg.TestKey.key5 ( ) ; java.lang.String id = com.google.gerrit.server.git.gpg.PublicKeyStore.keyIdToString ( key.getKeyId ( ) ) ; gApi.accounts ( ) . self ( ) . putGpgKeys ( com.google.common.collect.ImmutableList.of ( key.getPublicKeyArmored ( ) ) ) . get ( id ) ; setApiUser ( user ) ; exception.expect ( com.google.gerrit.extensions.restapi.ResourceConflictException.class ) ; exception.expectMessage ( "GPG key already associated with another account" ) ; gApi.accounts ( ) . self ( ) . putGpgKeys ( com.google.common.collect.ImmutableList.of ( key.getPublicKeyArmored ( ) ) ) . get ( id ) ; }
public boolean isVisible ( ) { if ( ( isVisible ) == null ) { isVisible = ( ( getUser ( ) . isInternalUser ( ) ) || ( canPerform ( Permission.READ ) ) ) && ( canRead ( ) ) ; } return isVisible ; }
protected void configure ( ) { bind ( java.nio.file.Path.class ) . annotatedWith ( com.google.gerrit.server.config.SitePath.class ) . toProvider ( com.google.gerrit.httpd.SitePathFromSystemConfigProvider.class ) . in ( com.google.inject.Scopes.SINGLETON ) ; }
public boolean isVisibleTo ( com.google.gerrit.reviewdb.client.Account.Id account ) throws com.google.gwtorm.server.OrmException { com.google.gerrit.server.IdentifiedUser who = identifiedUserFactory.create ( account ) ; return perm.user ( who ) . testOrFalse ( RefPermission.READ ) ; }
public final AccountGroup.Id getGroupId ( ) { return new com.google.gerrit.reviewdb.client.AccountGroup.Id ( group_id ( ) ) ; }
public void onFocus ( final com.google.gwt.event.dom.client.FocusEvent event ) { if ( Util.C.defaultAccountName ( ) . equals ( nameTxtBox.getText ( ) ) ) { nameTxtBox.setText ( "" ) ; nameTxtBox.removeStyleName ( "gerrit-InputFieldTypeHint" ) ; } }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { header.reviewedAndNext ( ) . run ( ) ; }
public void afterRefresh ( boolean didRefresh ) throws java.io.IOException { for ( com.google.gerrit.lucene.AbstractLuceneIndex < K , V > . NrtFuture f : notDoneNrtFutures ) { f.removeIfDone ( ) ; } }
public java.util.List < ? extends com.google.gerrit.extensions.common.GroupAuditEventInfo > auditLog ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return getAuditLog.apply ( rsrc ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot get audit log" , e ) ; } }
public boolean indexChange ( final int changeId ) { return new com.ericsson.gerrit.plugins.highavailability.forwarder.rest.RestForwarder.Request ( "index change" , changeId ) { @ java.lang.Override com.ericsson.gerrit.plugins.highavailability.forwarder.rest.HttpResponseHandler.HttpResult send ( ) throws java.io.IOException { return httpSession.post ( buildIndexEndpoint ( changeId ) ) ; } } . execute ( ) ; }
public void add ( com.google.gerrit.server.notedb.ChangeDraftUpdate draftUpdate ) { com.google.common.base.Preconditions.checkState ( ( ( staged ) == null ) , "cannot add new update after staging" ) ; draftUpdates.put ( draftUpdate.getRefName ( ) , draftUpdate ) ; }
public void delete ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { deleteDraft.apply ( revision , null ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot delete draft ps" , e ) ; } }
public static com.google.gerrit.server.diff.PatchListKey againstCommit ( org.eclipse.jgit.lib.AnyObjectId otherCommitId , org.eclipse.jgit.lib.AnyObjectId newId , com.google.gerrit.extensions.client.DiffPreferencesInfo.Whitespace whitespace ) { return new com.google.gerrit.server.diff.PatchListKey ( otherCommitId , newId , whitespace , com.google.gerrit.server.diff.PatchListKey.Algorithm.OPTIMIZED_DIFF ) ; }
public static boolean readWrite ( ) { return com.google.gerrit.testutil.NoteDbMode.get ( ) . readWrite ; }
public static com.google.gerrit.lucene.LuceneIndexModule singleVersionAllLatest ( int threads ) { return new com.google.gerrit.lucene.LuceneIndexModule ( com.google.common.collect.ImmutableMap.< java.lang.String , java.lang.Integer > of ( ) , threads ) ; }
public void onSuccess ( final com.google.gerrit.common.data.HostPageData result ) { com.google.gerrit.client.Gerrit.myConfig = result.config ; if ( ( result.userAccount ) != null ) { com.google.gerrit.client.Gerrit.myAccount = result.userAccount ; com.google.gerrit.client.Gerrit.applyUserPreferences ( ) ; } onModuleLoad2 ( gStarting ) ; }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > removeAllAsync ( ) { return cache.removeAllAsync ( ) ; }
public void setTimeForTesting ( ) { systemTimeZone = java.lang.System.setProperty ( "user.timezone" , "US/Eastern" ) ; com.google.gerrit.testing.TestTimeUtil.resetWithClockStep ( 1 , java.util.concurrent.TimeUnit.SECONDS ) ; }
public void deleteBranch ( final com.google.gerrit.client.reviewdb.Project.NameKey projectName , final java.util.Set < com.google.gerrit.client.reviewdb.Branch.NameKey > toRemove , final com.google.gwt.user.client.rpc.AsyncCallback < java.util.Set < com.google.gerrit.client.reviewdb.Branch.NameKey > > callback ) { deleteBranchesFactory.create ( projectName , toRemove ) . to ( callback ) ; }
public abstract java.lang.String getSqlType ( com.google.gwtorm.schema.ColumnModel column , com.google.gwtorm.schema.sql.SqlDialect dialect ) ;
private boolean canRegisterNewEmail ( ) { return com.google.gerrit.client.Gerrit.info ( ) . auth ( ) . canEdit ( AccountFieldName.REGISTER_NEW_EMAIL ) ; }
public java.util.Optional < com.google.gerrit.server.query.change.ChangeData.ChangedLines > changedLines ( ) throws com.google.gwtorm.server.OrmException { if ( ( changedLines ) == null ) { if ( ! ( lazyLoad ) ) { return java.util.Optional.empty ( ) ; } changedLines = computeChangedLines ( ) ; } return changedLines ; }
public void onSuccess ( com.google.gerrit.client.access.ProjectAccessInfo result ) { addPanel.setVisible ( result.canAddRefs ( ) ) ; }
protected com.google.gerrit.server.notedb.ChangeUpdate newUpdate ( com.google.gerrit.reviewdb.client.Change c , com.google.gerrit.server.CurrentUser user ) throws java.lang.Exception { com.google.gerrit.server.notedb.ChangeUpdate update = com.google.gerrit.testutil.TestChanges.newUpdate ( injector , c , user ) ; update.setAllowWriteToNewRef ( true ) ; return update ; }
protected abstract java.util.Set < com.google.gerrit.client.config.DownloadInfo.DownloadCommandInfo > getCommands ( com.google.gerrit.client.config.DownloadInfo.DownloadSchemeInfo schemeInfo ) ;
public java.lang.String getName ( ) { return this . getClass ( ) . getName ( ) ; }
protected org.eclipse.jgit.lib.PersonIdent newIdent ( com.google.gerrit.reviewdb.client.Account author , java.util.Date when ) { return changeNoteUtil.newIdent ( author , when , serverIdent , anonymousCowardName ) ; }
private static com.google.common.collect.ImmutableListMultimap.Builder < org.eclipse.jgit.lib.ObjectId , com.google.gerrit.reviewdb.client.PatchSet.Id > patchSets ( ) { return com.google.common.collect.ImmutableListMultimap.builder ( ) ; }
protected java.lang.String getSourceUri ( ) { return gitHubRepository.getCloneUrl ( ) ; }
public void downloadRequired ( ) { this . required = true ; download ( ) ; }
boolean visibleForReplication ( ) { return ( ( user ) instanceof com.google.gerrit.server.ReplicationUser ) && ( ( ( com.google.gerrit.server.ReplicationUser ) ( user ) ) . isEverythingVisible ( ) ) ; }
void changeProjectAccess ( com.google.gerrit.reviewdb.client.Project.NameKey projectName , java.lang.String baseRevision , java.lang.String message , java.util.List < com.google.gerrit.common.data.AccessSection > sections , com.google.gerrit.reviewdb.client.Project.NameKey parentProjectName , com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.ProjectAccess > callback ) ;
public void deletingNonExistingEditRest ( ) throws java.lang.Exception { com.google.gerrit.acceptance.RestResponse r = session.delete ( urlEdit ( ) ) ; org.junit.Assert.assertEquals ( org.apache.http.HttpStatus.SC_NOT_FOUND , r.getStatusCode ( ) ) ; }
void storeEvent ( com.google.gerrit.server.events.ProjectEvent event ) throws java.sql.SQLException { storeEvent ( event.getProjectNameKey ( ) . get ( ) , new java.sql.Timestamp ( java.util.concurrent.TimeUnit.SECONDS.toMillis ( event.eventCreatedOn ) ) , gson.toJson ( event ) ) ; }
public void run ( ) { int w = cm.getGutterElement ( ) . getOffsetWidth ( ) ; getElement ( ) . getStyle ( ) . setPaddingLeft ( w , Unit.PX ) ; setVisible ( true ) ; }
com.google.gerrit.common.changes.Side getStoredSideFromDisplaySide ( com.google.gerrit.client.diff.DisplaySide side ) { return ( side == ( DisplaySide.A ) ) && ( ( base ) == null ) ? com.google.gerrit.common.changes.Side.PARENT : com.google.gerrit.common.changes.Side.REVISION ; }
void setLimit ( int n ) { queryProcessor.setUserProvidedLimit ( n ) ; }
protected io.searchbox.core.Bulk.Builder addActions ( io.searchbox.core.Bulk.Builder builder , com.google.gerrit.reviewdb.client.Change.Id c ) { return builder.addAction ( delete ( com.google.gerrit.elasticsearch.ElasticChangeIndex.OPEN_CHANGES , c ) ) . addAction ( delete ( com.google.gerrit.elasticsearch.ElasticChangeIndex.OPEN_CHANGES , c ) ) ; }
public java.util.List < com.google.gerrit.extensions.api.projects.ReflogEntryInfo > reflog ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return getReflog.apply ( resource ( ) ) ; } catch ( java.io.IOException | com.google.gerrit.server.permissions.PermissionBackendException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot retrieve reflog" , e ) ; } }
public static java.lang.String toChangeQuery ( final java.lang.String query ) { return com.google.gerrit.common.PageLinks.toChangeQuery ( query , com.google.gerrit.common.PageLinks.TOP ) ; }
private void logDebug ( java.lang.String msg , java.lang.Object ... args ) { if ( com.google.gerrit.server.git.SubmoduleOp.log.isDebugEnabled ( ) ) { com.google.gerrit.server.git.SubmoduleOp.log.debug ( ( ( ( "[" + ( orm.getSubmissionId ( ) ) ) + "]" ) + msg ) , args ) ; } }
public void onSuccess ( final com.google.gerrit.reviewdb.PatchLineComment result ) { enableButtons ( true ) ; notifyDraftDelta ( 1 ) ; createEditor ( result ) . setOpen ( false ) ; }
static com.google.inject.Module module ( ) { return new com.google.gerrit.server.cache.CacheModule ( ) { protected void configure ( ) { com.google.gerrit.extensions.registration.DynamicSet.bind ( binder ( ) , com.googlesource.gerrit.plugins.quota.UsageDataEventCreator.class ) . to ( com.googlesource.gerrit.plugins.quota.RepoSizeEventCreator.class ) ; } } ; }
void addFileCommentBox ( com.google.gerrit.client.diff.CommentBox box ) { diffTable.addFileCommentBox ( box ) ; }
public java.lang.String getString ( java.lang.String name ) { return cfg.getString ( com.google.gerrit.server.config.PluginConfig.PLUGIN , pluginName , name ) ; }
public void keyExpiringInFuture ( ) throws java.lang.Exception { assertProblems ( com.google.gerrit.gpg.testutil.TestKeys.validKeyWithExpiration ( ) ) ; }
public void setCurrentFilePaths ( java.util.List < java.lang.String > filePaths ) throws com.google.gwtorm.server.OrmException { com.google.gerrit.reviewdb.client.PatchSet ps = currentPatchSet ( ) ; if ( ps != null ) { initFiles ( ) . put ( ps.getPatchSetId ( ) , com.google.common.collect.ImmutableList.copyOf ( filePaths ) ) ; } }
public void onFailure ( final java.lang.Throwable caught ) { super . onFailure ( caught ) ; c.setStarred ( prior ) ; setStar ( row , c ) ; }
protected boolean hasDifferences ( com.google.gerrit.common.data.PatchScript script ) { return ( ( hasEdits ( script ) ) || ( hasMeta ( script ) ) ) || ( hasComments ( script ) ) ; }
public void testProjectWithSlashesNotFound ( ) throws java.lang.Exception { java.util.Map < java.lang.String , com.google.gerrit.server.util.SubmoduleSectionParserTest.SubmoduleSection > sectionsToReturn = new java.util.HashMap < > ( ) ; sectionsToReturn.put ( "project" , new com.google.gerrit.server.util.SubmoduleSectionParserTest.SubmoduleSection ( "ssh://localhost/company/tools/project" , "project" , "." ) ) ; java.util.Set < com.google.gerrit.reviewdb.client.SubmoduleSubscription > expectedSubscriptions = java.util.Collections.emptySet ( ) ; execute ( new com.google.gerrit.reviewdb.client.Branch.NameKey ( new com.google.gerrit.reviewdb.client.Project.NameKey ( "super-project" ) , "refs/heads/master" ) , sectionsToReturn , new java.util.HashMap < java.lang.String , java.lang.String > ( ) , expectedSubscriptions ) ; }
public void onSuccess ( final com.google.gwtjsonrpc.client.VoidResult result ) { saveStateOnUnload = false ; goChange ( ) ; }
public boolean isVisible ( ) { return getRefControl ( ) . isVisible ( ) ; }
private void assertCanAccess ( com.google.gerrit.server.project.ProjectControl u ) { boolean access = u.asForProject ( ) . testOrFalse ( ProjectPermission.ACCESS ) ; com.google.common.truth.Truth.assertThat ( access ) . named ( "can access" ) . isTrue ( ) ; }
public com.google.gerrit.server.project.ChangeControl forUser ( final com.google.gerrit.server.CurrentUser who ) { return new com.google.gerrit.server.project.ChangeControl ( approvalsUtil , changeDataFactory , getRefControl ( ) . forUser ( who ) , change ) ; }
private static synchronized com.google.gerrit.git.WorkQueue.Executor getDefaultQueue ( ) { if ( ( com.google.gerrit.git.WorkQueue.defaultQueue ) == null ) { com.google.gerrit.git.WorkQueue.defaultQueue = com.google.gerrit.git.WorkQueue.createQueue ( 1 ) ; } return com.google.gerrit.git.WorkQueue.defaultQueue ; }
public boolean canDelete ( ) { switch ( getCurrentUser ( ) . getAccessPath ( ) ) { case WEB_UI : return ( isOwner ( ) ) || ( canPushWithForce ( ) ) ; case GIT : return canPushWithForce ( ) ; default : return false ; } }
Account.Id parse ( java.lang.String id ) { return Account.Id.tryParse ( id ) . get ( ) ; }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > evictAsync ( com.google.gerrit.reviewdb.Account.Id key ) { return byAccountId.removeAsync ( key ) ; }
private void upToChange ( ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChangeInEditMode ( revision.getParentKey ( ) ) ) ; }
private void success ( com.google.gerrit.client.rpc.CallbackGroup.CallbackGlue cb ) { remaining.remove ( cb ) ; apply ( ) ; }
void onIgnoreWhitespace ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ChangeEvent e ) { prefs.ignoreWhitespace ( com.google.gerrit.extensions.client.DiffPreferencesInfo.Whitespace.valueOf ( ignoreWhitespace.getValue ( ignoreWhitespace.getSelectedIndex ( ) ) ) ) ; if ( ( view ) != null ) { view.reloadDiffInfo ( ) ; } }
protected void insertRow ( final int row ) { table.insertRow ( row ) ; table.getCellFormatter ( ) . setStyleName ( row , 0 , Gerrit.RESOURCES.css ( ) . iconCell ( ) ) ; }
public com.google.gerrit.server.CurrentUser getUser ( ) { return getRefControl ( ) . getUser ( ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { if ( ( event.getNativeEvent ( ) . getKeyCode ( ) ) == ( com.google.gwt.event.dom.client.KeyCodes.KEY_ENTER ) ) { save ( ) ; } }
private com.google.gerrit.extensions.client.ChangeStatus booleanToDraftStatus ( java.lang.Boolean draft ) { if ( draft == null ) { return com.google.gerrit.extensions.client.ChangeStatus.NEW ; } return draft ? com.google.gerrit.extensions.client.ChangeStatus.DRAFT : com.google.gerrit.extensions.client.ChangeStatus.NEW ; }
public void testExclamationMark ( ) { com.google.gerrit.common.data.GitwebType gitwebType = new com.google.gerrit.common.data.GitwebType ( ) ; gitwebType.setPathSeparator ( '!' ) ; org.junit.Assert.assertEquals ( "a!b" , gitwebType.replacePathSeparator ( "a/b" ) ) ; }
long getTimeoutMillis ( @ com.google.gerrit.server.config.GerritServerConfig final org.eclipse.jgit.lib.Config cfg ) { return com.google.gerrit.server.config.ConfigUtil.getTimeUnit ( cfg , "receive" , null , "timeout" , java.util.concurrent.TimeUnit.SECONDS.convert ( 2 , java.util.concurrent.TimeUnit.MINUTES ) , java.util.concurrent.TimeUnit.SECONDS ) ; }
public com.googlecode.prolog_cafe.lang.NumberTerm shiftLeft ( com.googlecode.prolog_cafe.lang.NumberTerm t ) { throw new com.googlecode.prolog_cafe.exceptions.IllegalTypeException ( "integer" , this ) ; }
public void startPositionEqualToEndPositionIsValidRange ( ) { com.google.gerrit.extensions.client.Comment.Range range = createRange ( 13 , 11 , 13 , 11 ) ; com.google.gerrit.extensions.client.testing.RangeSubject.assertThat ( range ) . isValid ( ) ; }
public void linkifyAmpersand ( ) throws java.lang.Exception { org.eclipse.jgit.lib.Config config = new org.eclipse.jgit.lib.Config ( ) ; com.google.gitiles.Linkifier l = new com.google.gitiles.Linkifier ( TestGitilesUrls.URLS , config ) ; com.google.common.truth.Truth.assertThat ( l.linkify ( com.google.gitiles.LinkifierTest.REQ , "http://my/url?a&b" ) ) . containsExactly ( com.google.common.collect.ImmutableMap.of ( "text" , "http://my/url?a&b" , "url" , "http://my/url?a&b" ) ) . inOrder ( ) ; com.google.common.truth.Truth.assertThat ( l.linkify ( com.google.gitiles.LinkifierTest.REQ , "http://weird/htmlified/?url&lt;p&rt;" ) ) . containsExactly ( com.google.common.collect.ImmutableMap.of ( "text" , "http://weird/htmlified/?url" , "url" , "http://weird/htmlified/?url" ) , com.google.common.collect.ImmutableMap.of ( "text" , "&lt;p&rt;" ) ) . inOrder ( ) ; }
public void testKeyIdToString ( ) throws java.lang.Exception { org.bouncycastle.openpgp.PGPPublicKey key = com.google.gerrit.gpg.testutil.TestKeys.key1 ( ) . getPublicKey ( ) ; org.junit.Assert.assertEquals ( "46328A8C" , com.google.gerrit.gpg.PublicKeyStore.keyIdToString ( key.getKeyID ( ) ) ) ; }
protected void preDisplay ( final com.google.gerrit.client.admin.ProjectDetail result ) { display ( result ) ; }
static com.google.gerrit.server.index.FieldDef < com.google.gerrit.server.query.change.ChangeData , ? > commitField ( java.lang.String id ) { if ( ( id.length ( ) ) == ( org.eclipse.jgit.lib.Constants.OBJECT_ID_STRING_LENGTH ) ) { return com.google.gerrit.server.index.change.ChangeField.EXACT_COMMIT ; } return com.google.gerrit.server.index.change.ChangeField.COMMIT ; }
public void onFailure ( java.lang.Throwable caught ) { query = new com.google.gerrit.client.admin.ProjectBranchesScreen.Query ( match ) . start ( start ) . run ( ) ; super . onFailure ( caught ) ; }
private final org.bouncycastle.openpgp.PGPEncryptedDataGenerator cpk ( ) throws java.security.NoSuchProviderException , org.bouncycastle.openpgp.PGPException { org.bouncycastle.openpgp.PGPEncryptedDataGenerator cpk = new org.bouncycastle.openpgp.PGPEncryptedDataGenerator ( org.bouncycastle.openpgp.PGPEncryptedData.CAST5 , true , prng , "BC" ) ; cpk.addMethod ( dest ) ; return cpk ; }
public void addReviewerByEmailToReviewableChangeInReviewDbBatch ( ) throws java.lang.Exception { addReviewerByEmailToReviewableChangeInReviewDb ( batch ( ) ) ; }
protected void configure ( ) { bind ( com.google.gerrit.httpd.GerritOptions.class ) . toInstance ( new com.google.gerrit.httpd.GerritOptions ( headless , slave ) ) ; if ( test ) { bind ( com.google.gerrit.server.securestore.SecureStore.class ) . toProvider ( com.google.gerrit.server.securestore.SecureStoreProvider.class ) ; } }
public void onSuccess ( java.lang.Void result ) { net.codemirror.theme.ThemeLoader.loadTheme ( prefs.theme ( ) , themeCallback ) ; group2.done ( ) ; group3.done ( ) ; }
public void setCanOverride ( boolean canOverride ) { this . canOverride = canOverride ; }
public boolean canUploadMerges ( ) { return projectControl.controlForRef ( ( "refs/for/" + ( getRefName ( ) ) ) ) . canPerform ( Permission.PUSH_MERGE ) ; }
public static java.nio.file.Path solrIndexConfig ( com.google.gerrit.server.config.SitePaths sitePaths ) { return sitePaths.index_dir.resolve ( "gerrit_index.config" ) ; }
public void onReplace ( org.eclipse.jgit.lib.ObjectId oldNotesRev , org.eclipse.jgit.lib.ObjectId newNotesRev , com.google.gerrit.reviewdb.client.Account.Id accountId , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId > toRemove , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId > toAdd ) { }
public com.google.gerrit.extensions.api.changes.Changes.QueryRequest withOption ( com.google.gerrit.extensions.common.ListChangesOption options ) { this . options.add ( options ) ; return this ; }
public com.google.gerrit.server.patch.PatchList get ( final com.google.gerrit.reviewdb.Change change , final com.google.gerrit.reviewdb.PatchSet patchSet ) { return get ( change , patchSet , Whitespace.IGNORE_NONE ) ; }
protected void configureCommands ( ) { command ( com.googlesource.gerrit.plugins.verifystatus.VerifyStatusAdminQueryShell.class ) ; command ( com.googlesource.gerrit.plugins.verifystatus.SaveCommand.class ) ; factory ( VerifyStatusQueryShell.Factory.class ) ; }
public void destroySite ( ) throws java.lang.Exception { if ( ( sitePath ) != null ) { com.google.gerrit.acceptance.TempFileUtil.cleanup ( ) ; } }
public void noNotificationForChangeThatIsTurnedPrivateForWatchersInNotifyConfig ( ) throws java.lang.Exception { com.google.gerrit.server.mail.Address addr = new com.google.gerrit.server.mail.Address ( "Watcher" , "watcher@example.com" ) ; com.google.gerrit.server.git.NotifyConfig nc = new com.google.gerrit.server.git.NotifyConfig ( ) ; nc.addEmail ( addr ) ; nc.setName ( "team" ) ; nc.setHeader ( NotifyConfig.Header.TO ) ; nc.setTypes ( java.util.EnumSet.of ( NotifyType.NEW_PATCHSETS ) ) ; com.google.gerrit.server.project.ProjectConfig cfg = projectCache.checkedGet ( project ) . getConfig ( ) ; cfg.putNotifyConfig ( "team" , nc ) ; saveProjectConfig ( project , cfg ) ; com.google.gerrit.acceptance.PushOneCommit.Result r = pushFactory.create ( db , admin.getIdent ( ) , testRepo , "subject" , "a" , "a1" ) . to ( "refs/for/master" ) ; r.assertOkStatus ( ) ; sender.clear ( ) ; r = pushFactory.create ( db , admin.getIdent ( ) , testRepo , "subject" , "a" , "a2" , r.getChangeId ( ) ) . to ( "refs/for/master%private" ) ; r.assertOkStatus ( ) ; com.google.common.truth.Truth.assertThat ( sender.getMessages ( ) ) . isEmpty ( ) ; }
public void onSuccess ( com.google.gerrit.client.account.AccountCapabilities ac ) { createProjectLinkPanel.setVisible ( ac.canPerform ( com.google.gerrit.common.data.GlobalCapability.CREATE_PROJECT ) ) ; }
public com.google.gerrit.extensions.common.WebLinkInfo getFileWebLink ( java.lang.String projectName , java.lang.String revision , java.lang.String fileName ) { return new com.google.gerrit.extensions.common.WebLinkInfo ( com.googlesource.gerrit.plugins.xdocs.XDocWebLink.PREVIEW , getImageUrl ( ) , getFileUrl ( projectName , revision , fileName , false ) , com.google.gerrit.extensions.webui.WebLinkTarget.BLANK ) ; }
public void removingReviewerTriggersNotification ( ) throws java.lang.Exception { com.google.common.truth.TruthJUnit.assume ( ) . that ( notesMigration.readChanges ( ) ) . isTrue ( ) ; com.google.gerrit.extensions.common.AccountInfo acc = new com.google.gerrit.extensions.common.AccountInfo ( "Foo Bar" , "foo.bar@gerritcodereview.com" ) ; for ( com.google.gerrit.extensions.client.ReviewerState state : com.google.common.collect.ImmutableList.of ( ReviewerState.CC , ReviewerState.REVIEWER ) ) { com.google.gerrit.acceptance.PushOneCommit.Result r = createChange ( ) ; com.google.gerrit.extensions.api.changes.AddReviewerInput addInput = new com.google.gerrit.extensions.api.changes.AddReviewerInput ( ) ; addInput.reviewer = com.google.gerrit.acceptance.rest.change.ChangeReviewersByEmailIT.toRfcAddressString ( acc ) ; addInput.state = state ; gApi.changes ( ) . id ( r.getChangeId ( ) ) . addReviewer ( addInput ) ; com.google.gerrit.extensions.api.changes.ReviewInput reviewInput = new com.google.gerrit.extensions.api.changes.ReviewInput ( ) ; reviewInput.message = "I have a comment" ; setApiUser ( user ) ; revision ( r ) . review ( reviewInput ) ; setApiUser ( admin ) ; sender.clear ( ) ; gApi.changes ( ) . id ( r.getChangeId ( ) ) . reviewer ( addInput.reviewer ) . remove ( ) ; java.util.List < com.google.gerrit.testutil.FakeEmailSender.Message > messages = sender.getMessages ( ) ; com.google.common.truth.Truth.assertThat ( messages ) . hasSize ( 1 ) ; com.google.common.truth.Truth.assertThat ( messages.get ( 0 ) . rcpt ( ) ) . containsExactly ( com.google.gerrit.server.mail.Address.parse ( addInput.reviewer ) , user.emailAddress ) ; sender.clear ( ) ; } }
public Change.Key getChangeKey ( ) { return changeKey ; }
protected com.google.gerrit.pgm.CmdLineParser newCmdLineParser ( ) { return cmdLineParserFactory.create ( this ) ; }
private java.lang.String getPluginCanonicalWebUrl ( java.lang.String name ) { java.lang.String url = java.lang.String.format ( "%s/plugins/%s/" , com.google.common.base.CharMatcher.is ( '/' ) . trimTrailingFrom ( urlProvider.get ( ) ) , name ) ; return url ; }
public java.util.Collection < com.google.gerrit.client.reviewdb.ProjectRight > getWildcardRights ( ) { return get ( wildProject ) . getRights ( ) ; }
public com.google.gerrit.server.account.AuthRequest unlink ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.Account.Id to , com.google.gerrit.server.account.AuthRequest who ) throws com.google.gerrit.server.account.AccountException ;
private static boolean isAttributeName ( java.lang.String name ) { return com.google.gwtexpui.safehtml.client.SafeHtmlBuilder.isElementName ( name ) ; }
public static void all ( com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.projects.ProjectMap > callback ) { new com.google.gerrit.client.rpc.RestApi ( "/projects/" ) . addParameterRaw ( "type" , "ALL" ) . addParameterTrue ( "all" ) . addParameterTrue ( "d" ) . get ( com.google.gerrit.client.rpc.NativeMap.copyKeysIntoChildren ( callback ) ) ; }
void setDisableHttpd ( final boolean arg ) { httpd = false ; }
protected void configure ( ) { bind ( java.io.File.class ) . annotatedWith ( com.google.gerrit.server.config.SitePath.class ) . toInstance ( sitePath ) ; bind ( com.google.gerrit.server.securestore.SecureStore.class ) . toProvider ( com.google.gerrit.pgm.util.SecureStoreProvider.class ) ; }
public void commentOnReviewableChangeByOwnerNotifyNone ( ) throws java.lang.Exception { com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableChange ( ) ; review ( sc.owner , sc.changeId , com.google.gerrit.extensions.client.GeneralPreferencesInfo.EmailStrategy.ENABLED , com.google.gerrit.extensions.api.changes.NotifyHandling.NONE ) ; assertThat ( sender ) . notSent ( ) ; }
protected void onInitUI ( ) { super . onInitUI ( ) ; if ( ( name ) != null ) { setPageTitle ( AdminMessages.I.project ( name.get ( ) ) ) ; } }
public void testCreateGroupWhenGroupAlreadyExists_Conflict ( ) throws java.lang.Exception { exception.expect ( com.google.gerrit.extensions.restapi.ResourceConflictException.class ) ; gApi.groups ( ) . create ( "Administrators" ) ; }
public com.google.gerrit.server.plugins.InstallPlugin create ( com.google.gerrit.extensions.restapi.TopLevelResource parent , java.lang.String id ) throws com.google.gerrit.extensions.restapi.ResourceNotFoundException { return new com.google.gerrit.server.plugins.InstallPlugin ( loader , com.google.gerrit.extensions.restapi.Url.decode ( id ) , true ) ; }
com.google.gerrit.server.change.EmailReviewComments create ( com.google.gerrit.extensions.api.changes.ReviewInput.NotifyHandling notify , com.google.gerrit.reviewdb.client.Change change , com.google.gerrit.reviewdb.client.PatchSet patchSet , com.google.gerrit.server.IdentifiedUser user , com.google.gerrit.reviewdb.client.ChangeMessage message , java.util.List < com.google.gerrit.reviewdb.client.PatchLineComment > comments ) ;
private com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > rewrite ( com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > in , com.google.gerrit.server.index.QueryOptions opts ) throws com.google.gerrit.server.query.QueryParseException { return rewrite.rewrite ( in , opts ) ; }
private void fill ( com.google.gerrit.reviewdb.client.Account account , boolean detailed ) { name = account.getFullName ( ) ; if ( detailed ) { _account_id = account.getId ( ) . get ( ) ; email = account.getPreferredEmail ( ) ; } }
protected void preDisplay ( com.google.gerrit.client.projects.ConfigInfoCache.Entry result ) { commentLinkProcessor = result.getCommentLinkProcessor ( ) ; setTheme ( result.getTheme ( ) ) ; com.google.gerrit.client.diff.DiffInfo diffInfo = diff ; diff = null ; display ( diffInfo ) ; }
public com.google.gerrit.server.notedb.ChangeNotes createForNew ( com.google.gerrit.reviewdb.client.Change change ) { return new com.google.gerrit.server.notedb.ChangeNotes ( repoManager , migration , allUsersProvider , change.getProject ( ) , change ) ; }
public org.eclipse.jgit.lib.PersonIdent getUserPersonIdent ( ) { return createPersonIdent ( identifiedUser.get ( ) ) ; }
protected void populateWatches ( ) { com.google.gerrit.client.account.AccountApi.getWatchedProjects ( "self" , new com.google.gerrit.client.rpc.GerritCallback < com.google.gwt.core.client.JsArray < com.google.gerrit.client.account.ProjectWatchInfo > > ( ) { @ java.lang.Override public void onSuccess ( com.google.gwt.core.client.JsArray < com.google.gerrit.client.account.ProjectWatchInfo > watchedProjects ) { display ( ) ; watchesTab.display ( watchedProjects ) ; } } ) ; }
public void testPushForMasterWithHashtagsNoteDbDisabled ( ) throws java.lang.Exception { com.google.common.truth.TruthJUnit.assume ( ) . that ( notesMigration.readChanges ( ) ) . isFalse ( ) ; com.google.gerrit.acceptance.PushOneCommit.Result r = pushTo ( "refs/for/master%hashtag=tag1" ) ; r.assertErrorStatus ( "cannot add hashtags; noteDb is disabled" ) ; }
public java.lang.String getReplacementString ( ) { final com.google.gerrit.common.data.AccountInfo accountInfo = reviewerInfo.getAccountInfo ( ) ; if ( accountInfo != null ) { return com.google.gerrit.client.FormatUtil.nameEmail ( com.google.gerrit.client.FormatUtil.asInfo ( accountInfo ) ) ; } return reviewerInfo.getGroup ( ) . getName ( ) ; }
public void linkifyMessageUrlAndChangeId ( ) throws java.lang.Exception { org.eclipse.jgit.lib.Config config = new org.eclipse.jgit.lib.Config ( ) ; com.google.gitiles.Linkifier l = new com.google.gitiles.Linkifier ( TestGitilesUrls.URLS , config ) ; com.google.common.truth.Truth.assertThat ( l.linkify ( com.google.gitiles.LinkifierTest.REQ , "http://my/url/I0123456789 is not change I0123456789" ) ) . containsExactly ( com.google.common.collect.ImmutableMap.of ( "text" , "http://my/url/I0123456789" , "url" , "http://my/url/I0123456789" ) , com.google.common.collect.ImmutableMap.of ( "text" , " is not change " ) , com.google.common.collect.ImmutableMap.of ( "text" , "I0123456789" , "url" , "http://test-host-review/foo/#/q/I0123456789,n,z" ) ) . inOrder ( ) ; }
private java.lang.String createGroup ( java.lang.String name ) throws java.lang.Exception { name = name ( name ) ; com.google.gerrit.extensions.api.groups.GroupInput in = new com.google.gerrit.extensions.api.groups.GroupInput ( ) ; in.name = name ; in.ownerId = "Administrators" ; gApi.groups ( ) . create ( in ) ; return name ; }
public static void getDefault ( com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.dashboards.DashboardInfo > callback ) { new com.google.gerrit.client.rpc.RestApi ( ( ( com.google.gerrit.client.dashboards.DashboardList.base ( project ) ) + "default" ) ) . addParameterTrue ( "inherited" ) . get ( callback ) ; }
boolean canAddPatchSet ( ) { return ( projectControl.controlForRef ( ( "refs/for/" + ( getRefName ( ) ) ) ) . canPerform ( Permission.ADD_PATCH_SET ) ) && ( isProjectStatePermittingWrite ( ) ) ; }
protected void onInitUI ( ) { super . onInitUI ( ) ; add ( com.google.gerrit.client.admin.ProjectAccessScreen.uiBinder.createAndBindUi ( this ) ) ; driver = com.google.gwt.core.client.GWT.create ( com.google.gerrit.client.admin.ProjectAccessScreen.Driver.class ) ; accessEditor.setEditing ( false ) ; driver.initialize ( accessEditor ) ; }
protected abstract com.google.gerrit.server.query.Predicate < T > enforceVisibility ( com.google.gerrit.server.query.Predicate < T > pred ) ;
public static void unmarkPrivate ( int id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwt.core.client.JavaScriptObject > cb ) { com.google.gerrit.client.changes.ChangeApi.change ( id ) . view ( "private.delete" ) . post ( com.google.gerrit.client.changes.ChangeApi.PrivateInput.create ( ) , cb ) ; }
public com.google.common.collect.ImmutableList < com.google.gerrit.testing.FakeEmailSender.Message > getMessages ( ) { waitForEmails ( ) ; synchronized ( messages ) { return com.google.common.collect.ImmutableList.copyOf ( messages ) ; } }
private void display ( final com.google.gerrit.client.groups.GroupMap result ) { groups.display ( result , subname ) ; groups.finishDisplay ( ) ; }
public void setUp ( ) throws java.lang.Exception { admin = accounts.create ( "admin" , "admin@example.com" , "Administrator" , "Administrators" ) ; session = new com.google.gerrit.acceptance.RestSession ( server , admin ) ; com.google.gerrit.acceptance.GitUtil.initSsh ( admin ) ; com.google.gerrit.reviewdb.client.Project.NameKey project = new com.google.gerrit.reviewdb.client.Project.NameKey ( "p" ) ; com.google.gerrit.acceptance.SshSession sshSession = new com.google.gerrit.acceptance.SshSession ( server , admin ) ; com.google.gerrit.acceptance.GitUtil.createProject ( sshSession , project.get ( ) ) ; git = com.google.gerrit.acceptance.GitUtil.cloneProject ( ( ( ( sshSession.getUrl ( ) ) + "/" ) + ( project.get ( ) ) ) ) ; sshSession.close ( ) ; db = reviewDbProvider.open ( ) ; }
protected void setCurrentUrl ( com.google.gerrit.client.download.DownloadUrlLink link ) { widget.setVisible ( true ) ; copyLabel.setText ( ( ( "git fetch " + ( link.getUrlData ( ) ) ) + " && git cherry-pick FETCH_HEAD" ) ) ; }
public void onSuccess ( final com.google.gwtjsonrpc.client.VoidResult result ) { if ( ( ++ ( done ) ) == ( commentEditors.size ( ) ) ) { onSend2 ( ) ; } }
public java.lang.Thread newThread ( final java.lang.Runnable task ) { final java.lang.Thread t = parent.newThread ( task ) ; t.setName ( ( ( prefix + "-" ) + ( tid.getAndIncrement ( ) ) ) ) ; return t ; }
void set ( com.google.gerrit.server.index.account.AccountIndexCollection accountIndexCollection ) { this . accountIndexCollection = accountIndexCollection ; }
public com.google.gerrit.server.project.ChangeControl getControl ( ) { com.google.common.base.Preconditions.checkNotNull ( ctl ) ; return ctl ; }
public void listEmptyGroupMembers ( ) throws java.lang.Exception { java.lang.String group = createGroup ( "empty" ) ; com.google.common.truth.Truth.assertThat ( GET ( ( ( "/groups/" + group ) + "/members/" ) ) ) . isEmpty ( ) ; }
public boolean createProject ( com.google.gerrit.reviewdb.client.Project.NameKey project , java.lang.String head ) { boolean success = false ; for ( org.eclipse.jgit.transport.URIish uri : getURIs ( project , FilterType.PROJECT_CREATION ) ) { success &= createProject ( uri , head ) ; } return success ; }
public com.google.gerrit.reviewdb.server.ChangeAccess changes ( ) { throw new com.google.gerrit.testutil.DisabledReviewDb.Disabled ( ) ; }
public java.util.List < com.google.gerrit.extensions.common.AccountExternalIdInfo > getExternalIds ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return getExternalIds.apply ( account ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot get external IDs" , e ) ; } }
private static boolean exists ( java.util.jar.JarEntry entry ) { return ( entry != null ) && ( ( entry.getSize ( ) ) > 0 ) ; }
public boolean isNested ( ) { return ( ! ( isCollection ( ) ) ) && ( ( getPrimitiveType ( ) ) == null ) ; }
protected void onPreExecute ( ) { super . onPreExecute ( ) ; progress = v ( R.id.progress ) ; initialProgress = v ( R.id.initialProgress ) ; reloadButton = v ( R.id.reloadButton ) ; statusText = tv ( R.id.statusText ) ; changeList = vg ( R.id.changeList ) ; }
public void center ( ) { super . center ( ) ; com.google.gwtexpui.globalkey.client.GlobalKey.dialog ( this ) ; if ( ( focusOn ) != null ) { focusOn.setFocus ( true ) ; } }
public void onSuccess ( com.google.gerrit.client.rpc.NativeMap < com.googlesource.gerrit.plugins.verifystatus.client.VerificationInfo > map ) { map.copyKeysIntoChildren ( "job" ) ; panel.setWidget ( new com.googlesource.gerrit.plugins.verifystatus.client.BuildsDropDownPanel ( ) ) ; }
public void buildUpdates ( com.google.gerrit.server.notedb.NoteDbUpdateManager manager , com.google.gerrit.server.notedb.ChangeBundle bundle ) { }
public java.lang.String getBaseProject ( boolean isPrivateProject ) { return com.google.common.base.MoreObjects.firstNonNull ( ( isPrivateProject ? privateBaseProject : publicBaseProject ) , allProjectsName ) ; }
public void testCreateProjectHttpWithNameMismatch_BadRequest ( ) throws java.lang.Exception { com.google.gerrit.extensions.api.projects.ProjectInput in = new com.google.gerrit.extensions.api.projects.ProjectInput ( ) ; in.name = "otherName" ; com.google.gerrit.acceptance.RestResponse r = adminSession.put ( "/projects/someName" , in ) ; com.google.common.truth.Truth.assertThat ( r.getStatusCode ( ) ) . isEqualTo ( HttpStatus.SC_BAD_REQUEST ) ; }
protected void configure ( ) { com.google.gerrit.extensions.registration.DynamicSet.bind ( binder ( ) , com.google.gerrit.server.rules.PredicateProvider.class ) . to ( com.vmware.gerrit.owners.OwnerPredicateProvider.class ) ; }
public com.google.gerrit.server.IdentifiedUser create ( com.google.gerrit.server.AccessPath accessPath , com.google.inject.Provider < java.net.SocketAddress > remotePeerProvider , com.google.gerrit.reviewdb.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( capabilityControlFactory , accessPath , authConfig , anonymousCowardName , canonicalUrl , realm , accountCache , groupIncludeCache , remotePeerProvider , null , id ) ; }
public com.google.gerrit.server.IdentifiedUser create ( com.google.gerrit.reviewdb.client.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( capabilityControlFactory , authConfig , realm , anonymousCowardName , canonicalUrl , accountCache , groupBackend , disableReverseDnsLookup , remotePeerProvider , dbProvider , id , null ) ; }
protected boolean match ( java.lang.String token ) { return ( super . match ( token ) ) || ( ( ! ( getTargetHistoryToken ( ) . isEmpty ( ) ) ) && ( ( "/admin" + token ) . startsWith ( getTargetHistoryToken ( ) ) ) ) ; }
public void getGeneralPreferences ( ) throws java.lang.Exception { com.google.gerrit.extensions.client.GeneralPreferencesInfo result = gApi.config ( ) . server ( ) . getDefaultPreferences ( ) ; com.google.gerrit.acceptance.AssertUtil.assertPrefs ( result , com.google.gerrit.extensions.client.GeneralPreferencesInfo.defaults ( ) , "changeTable" , "my" ) ; }
public void add ( final com.google.gerrit.extensions.registration.RegistrationHandle handle ) { add ( new com.google.gerrit.lifecycle.LifecycleListener ( ) { @ java.lang.Override public void start ( ) { } @ java.lang.Override public void stop ( ) { handle.remove ( ) ; } } ) ; }
public void self ( ) throws java.lang.Exception { com.google.gerrit.extensions.common.AccountInfo info = gApi.accounts ( ) . self ( ) . get ( ) ; com.google.common.truth.Truth.assertThat ( info.name ) . isEqualTo ( "Administrator" ) ; com.google.common.truth.Truth.assertThat ( info.email ) . isEqualTo ( "admin@example.com" ) ; com.google.common.truth.Truth.assertThat ( info.username ) . isEqualTo ( "admin" ) ; }
private static com.google.gerrit.server.git.PerThreadRequestScope requireContext ( ) { final com.google.gerrit.server.git.PerThreadRequestScope ctx = com.google.gerrit.server.git.PerThreadRequestScope.current.get ( ) ; if ( ctx == null ) { throw new com.google.inject.OutOfScopeException ( "Not in command/request" ) ; } return ctx ; }
public boolean canListen ( org.apache.sshd.common.SshdSocketAddress address , org.apache.sshd.common.Session session ) { return false ; }
public com.google.common.util.concurrent.CheckedFuture < ? , java.io.IOException > deleteAsync ( com.google.gerrit.server.query.change.ChangeData cd ) { return ( executor ) != null ? submit ( new com.google.gerrit.server.index.ChangeIndexer.Task ( cd , true ) ) : com.google.common.util.concurrent.Futures.< java.lang.Object , java.io.IOException > immediateCheckedFuture ( null ) ; }
private static boolean onlyMagicBranches ( java.lang.Iterable < org.eclipse.jgit.transport.ReceiveCommand > commands ) { for ( org.eclipse.jgit.transport.ReceiveCommand c : commands ) { if ( ! ( com.google.gerrit.server.util.MagicBranch.isMagicBranch ( c.getRefName ( ) ) ) ) { return false ; } } return true ; }
protected void parseCommandLine ( ) throws com.google.gerrit.sshd.commands.UnloggedFailure { parseCommandLine ( impl ) ; }
private void preMerge ( final com.google.gerrit.server.git.SubmitStrategy strategy ) throws com.google.gerrit.server.git.MergeException { openBranch ( ) ; validateChangeList ( ) ; mergeTip = strategy.run ( branchTip , toMerge ) ; refLogIdent = strategy.getRefLogIdent ( ) ; commits.putAll ( strategy.getNewCommits ( ) ) ; }
public void setLocalUser ( java.lang.String localUser ) { if ( externalId.isScheme ( com.google.gerrit.server.account.externalids.ExternalId.SCHEME_GERRIT ) ) { externalId = ExternalId.Key.create ( com.google.gerrit.server.account.externalids.ExternalId.SCHEME_GERRIT , localUser ) ; } }
public void setChanges ( java.util.List < com.google.gerrit.client.data.ChangeInfo > c , boolean end ) { changes = c ; atEnd = end ; }
protected void configure ( ) { delete ( com.google.gerrit.server.project.ProjectResource.PROJECT_KIND ) . to ( com.googlesource.gerrit.plugins.deleteproject.DeleteProject.class ) ; post ( com.google.gerrit.server.project.ProjectResource.PROJECT_KIND , "delete" ) . to ( com.googlesource.gerrit.plugins.deleteproject.DeleteAction.class ) ; }
public void testTagBr ( ) { final com.google.gwtexpui.safehtml.client.SafeHtmlBuilder b = new com.google.gwtexpui.safehtml.client.SafeHtmlBuilder ( ) ; org.junit.Assert.assertSame ( b , b.br ( ) ) ; org.junit.Assert.assertEquals ( "<br />" , b.asString ( ) ) ; }
public void setUpMocks ( ) { servlet = new com.ericsson.gerrit.plugins.highavailability.forwarder.rest.IndexAccountRestApiServlet ( indexer ) ; id = Account.Id.tryParse ( com.ericsson.gerrit.plugins.highavailability.forwarder.rest.IndexAccountRestApiServletTest.ACCOUNT_NUMBER ) . get ( ) ; org.mockito.Mockito.when ( req.getPathInfo ( ) ) . thenReturn ( ( "/index/account/" + ( com.ericsson.gerrit.plugins.highavailability.forwarder.rest.IndexAccountRestApiServletTest.ACCOUNT_NUMBER ) ) ) ; }
com.google.common.util.concurrent.ListenableFuture < java.lang.Void > delete ( org.apache.lucene.index.Term term ) throws java.io.IOException { return new com.google.gerrit.lucene.SubIndex.NrtFuture ( writer.deleteDocuments ( term ) ) ; }
public boolean containsHeader ( java.lang.String name ) { return ! ( headers.get ( name ) . isEmpty ( ) ) ; }
private com.google.gerrit.extensions.common.UserConfigInfo getUserInfo ( java.lang.String anonymousCowardName ) { com.google.gerrit.extensions.common.UserConfigInfo info = new com.google.gerrit.extensions.common.UserConfigInfo ( ) ; info.anonymousCowardName = anonymousCowardName ; return info ; }
protected void migrateData ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.server.schema.UpdateUI ui ) throws com.google.gwtorm.server.OrmException { try ( com.google.gwtorm.server.StatementExecutor e = newExecutor ( db ) ) { e.execute ( "UPDATE changes SET status = 'n' created_on = created_on WHERE status = 's'" ) ; } }
public java.lang.String format ( java.lang.String projectName , java.lang.String path , java.lang.String revision , java.lang.String abbrRev , com.googlesource.gerrit.plugins.xdocs.ConfigSection cfg , java.lang.String raw ) throws java.io.IOException ;
void addError ( java.lang.String error ) { messages.add ( new com.google.gerrit.server.git.validators.CommitValidationMessage ( error , true ) ) ; }
public void cancel ( ) { for ( com.googlesource.gerrit.plugins.github.git.GitJob job : jobs.values ( ) ) { job.cancel ( ) ; } }
private com.google.gerrit.server.project.ProjectResource checkExists ( ) throws com.google.gerrit.extensions.restapi.ResourceNotFoundException { if ( ( project ) == null ) { throw new com.google.gerrit.extensions.restapi.ResourceNotFoundException ( name ) ; } return project ; }
public com.google.gerrit.client.data.ApprovalTypes getApprovalTypes ( ) { return approvalTypes ; }
public void onClick ( com.google.gwt.event.dom.client.ClickEvent event ) { for ( com.google.gerrit.reviewdb.client.Patch p : detail.getPatches ( ) ) { openWindow ( com.google.gerrit.client.Dispatcher.toPatchUnified ( base , p.getKey ( ) ) ) ; } }
public com.google.gerrit.server.IdentifiedUser create ( com.google.gerrit.server.AccessPath accessPath , com.google.inject.Provider < java.net.SocketAddress > remotePeerProvider , com.google.gerrit.reviewdb.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( accessPath , authConfig , canonicalUrl , realm , accountCache , remotePeerProvider , null , id ) ; }
public static boolean useSsh ( ) { return ( com.google.gerrit.testing.SshMode.get ( ) ) == ( com.google.gerrit.testing.SshMode.YES ) ; }
abstract void createFileCommentEditorOnSideA ( ) ;
public static void add ( com.google.gerrit.client.info.ChangeInfo info ) { com.google.gerrit.client.projects.ConfigInfoCache.instance.changeToProject.put ( info.legacyId ( ) . get ( ) , info.project ( ) ) ; }
com.google.gerrit.httpd.raw.FontsDevServlet getFontsServlet ( @ com.google.inject.name.Named ( value = com.google.gerrit.httpd.raw.StaticModule.CACHE ) com.google.common.cache.Cache < java.nio.file.Path , com.google.gerrit.httpd.raw.ResourceServlet.Resource > cache ) throws java.io.IOException { return getPaths ( ) . isDev ( ) ? new com.google.gerrit.httpd.raw.FontsDevServlet ( cache , getPaths ( ) . builder ) : null ; }
public java.lang.String toString ( ) { return com.google.common.base.MoreObjects.toStringHelper ( this ) . addValue ( fields.keySet ( ) ) . toString ( ) ; }
private com.google.gerrit.extensions.common.ChangeInfo getWithLabels ( com.google.gerrit.acceptance.PushOneCommit.Result r ) throws java.lang.Exception { return get ( r.getChangeId ( ) , com.google.gerrit.extensions.client.ListChangesOption.LABELS , com.google.gerrit.extensions.client.ListChangesOption.DETAILED_LABELS , com.google.gerrit.extensions.client.ListChangesOption.SUBMITTABLE ) ; }
private com.google.gerrit.server.notedb.ChangeNotes incrementPatchSet ( com.google.gerrit.server.notedb.ChangeNotes notes ) throws java.lang.Exception { return incrementPatchSet ( notes , patchSetCommit ( nextPatchSetId ( notes ) ) ) ; }
protected void configure ( ) { bind ( java.nio.file.Path.class ) . annotatedWith ( com.google.gerrit.server.config.SitePath.class ) . toProvider ( com.google.gerrit.httpd.SitePathFromSystemConfigProvider.class ) . in ( com.google.inject.Scopes.SINGLETON ) ; }
public void addReviewers ( com.google.gerrit.reviewdb.client.Change change , com.google.gerrit.reviewdb.client.PatchSet ps , com.google.gerrit.reviewdb.client.PatchSetInfo info , java.util.Set < com.google.gerrit.reviewdb.client.Account.Id > wantReviewers ) throws com.google.gwtorm.server.OrmException { java.util.Set < com.google.gerrit.reviewdb.client.Account.Id > existing = com.google.common.collect.Sets.< com.google.gerrit.reviewdb.client.Account.Id > newHashSet ( ) ; addReviewers ( change , ps , info , wantReviewers , existing ) ; }
public void linkifyAmpersand ( ) throws java.lang.Exception { com.google.gitiles.Linkifier l = new com.google.gitiles.Linkifier ( TestGitilesUrls.URLS ) ; org.junit.Assert.assertEquals ( com.google.common.collect.ImmutableList.of ( com.google.common.collect.ImmutableMap.of ( "text" , "http://my/url?a&b" , "url" , "http://my/url?a&b" ) ) , l.linkify ( com.google.gitiles.LinkifierTest.REQ , "http://my/url?a&b" ) ) ; org.junit.Assert.assertEquals ( com.google.common.collect.ImmutableList.of ( com.google.common.collect.ImmutableMap.of ( "text" , "http://weird/htmlified/?url" , "url" , "http://weird/htmlified/?url" ) , com.google.common.collect.ImmutableMap.of ( "text" , "&lt;p&rt;" ) ) , l.linkify ( com.google.gitiles.LinkifierTest.REQ , "http://weird/htmlified/?url&lt;p&rt;" ) ) ; }
public void setUp ( ) throws java.lang.Exception { testEnv.getInjector ( ) . injectMembers ( this ) ; db = testEnv.getDb ( ) ; }
public void close ( ) { com.google.common.util.concurrent.MoreExecutors.shutdownAndAwaitTermination ( executor , java.lang.Long.MAX_VALUE , java.util.concurrent.TimeUnit.SECONDS ) ; try { openIndex.close ( ) ; } finally { closedIndex.close ( ) ; } }
public com.googlesource.gerrit.plugins.hooks.HookArgs createArgs ( ) { return new com.googlesource.gerrit.plugins.hooks.HookArgs ( anonymousCowardName , urlProvider , metrics ) ; }
public void downloadOptional ( ) { this . required = false ; download ( ) ; }
public void run ( ) { switch ( getIntraLineStatus ( ) ) { case OFF : case OK : toggleShowIntraline ( ) ; break ; default : break ; } }
public void evict ( com.google.gerrit.reviewdb.client.Account.Id accountId ) throws java.io.IOException { if ( accountId != null ) { byId.invalidate ( accountId ) ; indexer.get ( ) . index ( accountId ) ; } }
public void show ( ) { com.google.gwtexpui.user.client.UserAgent.fireDialogVisible ( true ) ; impl.visible ( true ) ; super . show ( ) ; }
public com.google.gerrit.server.change.ChangeInserter setGroups ( java.lang.Iterable < java.lang.String > groups ) { com.google.common.base.Preconditions.checkState ( ( ( patchSet ) == null ) , "setGroups(Iterable<String>) only valid before creating change" ) ; this . groups = groups ; return this ; }
public static com.google.gwt.event.shared.HandlerRegistration addRpcCompleteHandler ( com.google.gwtjsonrpc.client.event.RpcCompleteHandler h ) { return com.google.gwtjsonrpc.client.JsonUtil.globalHandlers.addHandler ( com.google.gwtjsonrpc.client.event.RpcCompleteEvent.getType ( ) , h ) ; }
public com.google.gerrit.server.account.AccountState getByUsername ( java.lang.String username ) { com.google.gerrit.reviewdb.Account.Id id = byName.get ( new com.google.gerrit.reviewdb.Account.Username ( username ) ) ; return id != null ? byId.get ( id ) : null ; }
protected java.lang.Iterable < com.google.gerrit.reviewdb.client.Comment > listComments ( com.google.gerrit.server.change.RevisionResource rsrc ) throws com.google.gwtorm.server.OrmException { com.google.gerrit.server.notedb.ChangeNotes notes = rsrc.getNotes ( ) ; return commentsUtil.publishedByPatchSet ( db.get ( ) , notes , rsrc.getPatchSet ( ) . getId ( ) ) ; }
public com.google.gwtorm.server.ResultSet < com.google.gerrit.reviewdb.client.PatchLineComment > draftByChangeFileAuthor ( com.google.gerrit.reviewdb.client.Change.Id id , java.lang.String file , com.google.gerrit.reviewdb.client.Account.Id author ) { throw new java.lang.UnsupportedOperationException ( com.google.gerrit.reviewdb.server.DisabledChangesReviewDbWrapper.MSG ) ; }
public com.google.gerrit.client.reviewdb.ApprovalCategoryValue getValue ( final com.google.gerrit.client.reviewdb.PatchSetApproval ca ) { initByValue ( ) ; return byValue.get ( ca.getValue ( ) ) ; }
protected void configure ( ) { bind ( com.google.inject.Key.get ( javax.sql.DataSource.class , com.google.inject.name.Names.named ( "ReviewDb" ) ) ) . toProvider ( com.google.gerrit.httpd.ReviewDbDataSourceProvider.class ) . in ( com.google.inject.Scopes.SINGLETON ) ; listener ( ) . to ( com.google.gerrit.httpd.ReviewDbDataSourceProvider.class ) ; }
public static com.google.gerrit.server.diff.ComparisonType againstOtherPatchSet ( ) { return new com.google.gerrit.server.diff.ComparisonType ( null , false ) ; }
public static com.google.gwt.event.shared.HandlerRegistration addSignOutHandler ( final com.google.gerrit.client.SignOutHandler l ) { return com.google.gerrit.client.Gerrit.globalHandlers.addHandler ( com.google.gerrit.client.SignOutEvent.getType ( ) , l ) ; }
public static void updateDraft ( @ com.google.gerrit.common.Nullable java.lang.String project , com.google.gerrit.reviewdb.client.PatchSet.Id id , java.lang.String draftId , com.google.gerrit.client.changes.CommentInfo content , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.changes.CommentInfo > cb ) { com.google.gerrit.client.changes.CommentApi.revision ( project , id , "drafts" ) . id ( draftId ) . put ( content , cb ) ; }
public static void putSoyData ( javax.servlet.http.HttpServletRequest req , java.lang.String key , java.lang.Object value ) { com.google.gitiles.BaseServlet.getData ( req ) . put ( key , value ) ; }
private static void putMessage ( com.google.gerrit.reviewdb.client.PatchSet.Id id , java.lang.String m , com.google.gerrit.client.rpc.GerritCallback < com.google.gerrit.client.VoidResult > r ) { com.google.gerrit.client.changes.ChangeFileApi.putMessage ( id.getParentKey ( ) , m , r ) ; }
public void projectDetail ( final com.google.gerrit.reviewdb.client.Project.NameKey projectName , final com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.ProjectDetail > callback ) { projectDetailFactory.create ( projectName ) . to ( callback ) ; }
public void remove ( ) { descriptions.remove ( name ) ; registry.remove ( name ) ; }
static void delete ( com.google.gerrit.reviewdb.client.Change.Id id , com.google.gwt.user.client.ui.Button ... draftButtons ) { com.google.gerrit.client.changes.ChangeApi.deleteChange ( id.get ( ) , com.google.gerrit.client.change.DraftActions.mine ( draftButtons ) ) ; }
private final native void set ( int sl , int sc , int el , int ec ) ;
public static java.lang.String toSideBySide ( com.google.gerrit.client.DiffObject diffBase , com.google.gerrit.reviewdb.client.PatchSet.Id revision , java.lang.String fileName ) { return com.google.gerrit.client.Dispatcher.toPatch ( "sidebyside" , diffBase , revision , fileName , null , 0 ) ; }
public void getOpenChange_NotFound ( ) throws java.lang.Exception { com.google.gerrit.acceptance.PushOneCommit.Result r = pushFactory.create ( db , admin.getIdent ( ) , testRepo ) . to ( "refs/for/master" ) ; r.assertOkStatus ( ) ; assertNotFound ( r.getCommit ( ) ) ; }
com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > rewrite ( com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > in , com.google.gerrit.server.query.change.QueryOptions opts ) throws com.google.gerrit.server.query.QueryParseException ;
public void close ( ) { if ( closeRepository ) { getRepository ( ) . close ( ) ; } }
public static java.util.Set < java.lang.String > getPersonParts ( org.eclipse.jgit.lib.PersonIdent person ) { if ( person == null ) { return com.google.common.collect.ImmutableSet.of ( ) ; } return com.google.gerrit.index.SchemaUtil.getNameParts ( person.getName ( ) , java.util.Collections.singleton ( person.getEmailAddress ( ) ) ) ; }
public void setWhitespace ( final com.google.gerrit.client.data.PatchScriptSettings.Whitespace ws ) { assert ws != null ; whitespace = ws ; }
public org.eclipse.jgit.lib.ObjectId insert ( int type , long length , java.io.InputStream in ) throws java.io.IOException { return insert ( com.google.gerrit.server.git.InsertedObject.create ( type , in ) ) ; }
private static boolean inProject ( com.google.gerrit.reviewdb.client.Change change , com.google.gerrit.server.project.ProjectState projectState ) { if ( projectState == null ) { return true ; } return projectState.getNameKey ( ) . equals ( change.getProject ( ) ) ; }
public void onFailure ( java.lang.Throwable caught ) { if ( com.google.gerrit.client.rpc.RestApi.isNotFound ( caught ) ) { } else { com.google.gerrit.client.rpc.GerritCallback.showFailure ( caught ) ; } }
void onHeaderClick ( com.google.gwt.event.dom.client.ClickEvent e ) { setOpen ( ( ! ( isOpen ( ) ) ) ) ; }
public void testCreateGroupWithoutCapability_Forbidden ( ) throws java.lang.Exception { setApiUser ( user ) ; exception.expect ( com.google.gerrit.extensions.restapi.AuthException.class ) ; gApi.groups ( ) . create ( name ( "newGroup" ) ) ; }
public void emptyCommitMessage ( ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( ( ( java.lang.Iterable < ? > ) ( com.google.gerrit.server.change.HashtagsUtil.extractTags ( "" ) ) ) ) . isEmpty ( ) ; }
public boolean match ( java.lang.String ref , com.google.gerrit.server.CurrentUser user ) { return ref.startsWith ( prefix ) ; }
public com.google.gitiles.GitilesView.Builder setRepositoryName ( java.lang.String repositoryName ) { if ( ( type ) == ( com.google.gitiles.GitilesView.Type.HOST_INDEX ) ) { throw new java.lang.IllegalStateException ( java.lang.String.format ( "cannot set repository name on %s view" , type ) ) ; } this . repositoryName = com.google.common.base.Preconditions.checkNotNull ( repositoryName ) ; return this ; }
public com.google.gerrit.server.notedb.DraftCommentNotes create ( com.google.gerrit.reviewdb.client.Change.Id changeId , com.google.gerrit.reviewdb.client.Account.Id accountId ) { return new com.google.gerrit.server.notedb.DraftCommentNotes ( repoManager , migration , draftsProject , changeId , accountId ) ; }
protected void saveProjectConfig ( com.google.gerrit.server.git.ProjectConfig cfg ) throws java.lang.Exception { try ( com.google.gerrit.server.git.meta.MetaDataUpdate md = metaDataUpdateFactory.create ( cfg.getName ( ) ) ) { cfg.commit ( md ) ; } projectCache.evict ( cfg.getProject ( ) ) ; }
public org.apache.sshd.common.file.FileSystemView createFileSystemView ( org.apache.sshd.common.Session session ) throws java.io.IOException { return new org.apache.sshd.common.file.FileSystemView ( ) { @ java.lang.Override public org.apache.sshd.common.file.SshFile getFile ( org.apache.sshd.common.file.SshFile baseDir , java.lang.String file ) { return null ; } @ java.lang.Override public org.apache.sshd.common.file.SshFile getFile ( java.lang.String file ) { return null ; } } ; }
public static boolean isGlobalCapability ( java.lang.String varName ) { return com.google.gerrit.common.data.GlobalCapability.NAMES_LC.contains ( varName.toLowerCase ( ) ) ; }
java.util.Set < java.lang.String > attributes ( ) { return java.util.Collections.unmodifiableSet ( atts.keySet ( ) ) ; }
com.google.gerrit.client.diff.CommentManager getCommentManager ( ) { return group.getCommentManager ( ) ; }
public boolean apply ( java.lang.String refPart ) { return refPart.endsWith ( ( "/" + ( accountId.get ( ) ) ) ) ; }
java.lang.String getHostName ( javax.servlet.http.HttpServletRequest req ) ;
java.lang.Runnable toggleA ( ) { return ( ) -> { setVisibleA ( ( ! ( isVisibleA ( ) ) ) ) ; } ; }
public final void upsert ( final java.lang.Iterable < E > instances ) throws com.google.gwtorm.client.OrmException { doUpsert ( instances ) ; }
private boolean canRestore ( com.google.gerrit.reviewdb.server.ReviewDb db ) throws com.google.gwtorm.server.OrmException { return ( ( canAbandon ( db ) ) && ( refControl.asForRef ( ) . testOrFalse ( RefPermission.CREATE_CHANGE ) ) ) && ( getProjectControl ( ) . getProjectState ( ) . statePermitsWrite ( ) ) ; }
public org.kohsuke.github.GHMyself getMyself ( ) { if ( isLoggedIn ( scopesSet ) ) { return myself ; } else { return null ; } }
public void putComment ( com.google.gerrit.reviewdb.client.Comment c ) { verifyComment ( c ) ; put.add ( c ) ; }
private static java.lang.String renderName ( com.google.gerrit.client.info.ChangeInfo.GitPerson person ) { return ( ( ( person.name ( ) ) + " <" ) + ( person.email ( ) ) ) + ">" ; }
public com.google.gerrit.server.account.GroupMembership getEffectiveGroups ( ) { return new com.google.gerrit.server.account.ListGroupMembership ( java.util.Collections.singleton ( AccountGroup.ANONYMOUS_USERS ) ) ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { showCLA ( cla ) ; }
public boolean canRunGC ( ) { return ( canPerform ( GlobalCapability.RUN_GC ) ) || ( canMaintainServer ( ) ) ; }
public void tearDown ( ) throws java.lang.Exception { if ( ( lifecycle ) != null ) { lifecycle.stop ( ) ; } com.google.gerrit.testutil.InMemoryDatabase.drop ( db ) ; }
public void execute ( ) { com.google.gerrit.client.Gerrit.doSignOut ( ) ; }
protected com.google.inject.Injector createInjector ( ) { org.eclipse.jgit.lib.Config elasticsearchConfig = new org.eclipse.jgit.lib.Config ( config ) ; com.google.gerrit.testing.InMemoryModule.setDefaults ( elasticsearchConfig ) ; com.google.gerrit.elasticsearch.ElasticTestUtils.configure ( elasticsearchConfig , com.google.gerrit.elasticsearch.ElasticQueryProjectsTest.nodeInfo.port ) ; return com.google.inject.Guice.createInjector ( new com.google.gerrit.testing.InMemoryModule ( elasticsearchConfig , notesMigration ) ) ; }
public com.googlesource.gerrit.plugins.github.git.GHMilestone getMilestone ( int number ) throws java.io.IOException { return ghRepository.getMilestone ( number ) ; }
public void description ( com.google.gerrit.extensions.api.projects.DescriptionInput in ) throws com.google.gerrit.extensions.restapi.RestApiException { try { putDescription.apply ( checkExists ( ) , in ) ; } catch ( java.io.IOException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot put project description" , e ) ; } }
com.google.gerrit.common.data.PatchScript toPatchScript ( com.google.gerrit.server.patch.PatchListEntry content , com.google.gerrit.common.data.CommentDetail comments , java.util.List < com.google.gerrit.reviewdb.client.Patch > history ) throws java.io.IOException { reader = db.newObjectReader ( ) ; try { return build ( content , comments , history ) ; } finally { reader.close ( ) ; } }
public static java.util.List < com.google.gerrit.pgm.init.InitPlugins.PluginData > listPluginsAndRemoveTempFiles ( com.google.gerrit.server.config.SitePaths site , com.google.gerrit.pgm.init.PluginsDistribution pluginsDistribution ) throws java.io.IOException { return com.google.gerrit.pgm.init.InitPlugins.listPlugins ( site , true , pluginsDistribution ) ; }
public void remove ( ) { descriptions.remove ( name ) ; registry.remove ( name ) ; }
public void configure ( ) { factory ( ChangeUpdate.Factory.class ) ; factory ( ChangeDraftUpdate.Factory.class ) ; factory ( NoteDbUpdateManager.Factory.class ) ; }
public void testEventSentFailed ( ) throws java.lang.Exception { com.google.gerrit.server.events.Event event = setUpMocksForEvent ( com.ericsson.gerrit.plugins.highavailability.forwarder.rest.RestForwarderTest.FAILED , com.ericsson.gerrit.plugins.highavailability.forwarder.rest.RestForwarderTest.ERROR_MSG , com.ericsson.gerrit.plugins.highavailability.forwarder.rest.RestForwarderTest.DO_NOT_THROW_EXCEPTION ) ; com.google.common.truth.Truth.assertThat ( restForwarder.send ( event ) ) . isFalse ( ) ; }
public void testGetSharedDirectory ( ) throws java.lang.Exception { initializeConfiguration ( ) ; org.junit.Assert.assertEquals ( configuration.main ( ) . sharedDirectory ( ) , com.ericsson.gerrit.plugins.highavailability.ConfigurationTest.SHARED_DIR_PATH ) ; }
void updateHead ( com.google.gerrit.reviewdb.client.Project.NameKey project , java.lang.String newHeadName ) { for ( org.eclipse.jgit.transport.URIish uri : getURIs ( project , FilterType.ALL ) ) { updateHead ( uri , newHeadName ) ; } }
public com.googlecode.prolog_cafe.lang.NumberTerm or ( com.googlecode.prolog_cafe.lang.NumberTerm t ) { if ( t instanceof com.googlecode.prolog_cafe.lang.DoubleTerm ) throw new com.googlecode.prolog_cafe.exceptions.IllegalTypeException ( "integer" , t ) ; return new com.googlecode.prolog_cafe.lang.IntegerTerm ( ( ( this . val ) | ( t.intValue ( ) ) ) ) ; }
private void setTabTitle ( com.google.gerrit.client.change.RelatedChanges.Tab tabInfo , java.lang.String title ) { getTabBar ( ) . setTabText ( tabInfo.ordinal ( ) , title ) ; }
int getHeaderHeight ( ) { int h = patchSetSelectBoxA.getOffsetHeight ( ) ; if ( header ) { h += diffHeaderRow.getOffsetHeight ( ) ; } return h ; }
public void normalize ( final com.google.gerrit.client.data.ApprovalType at , final com.google.gerrit.client.reviewdb.PatchSetApproval ca ) { applyTypeFloor ( at , ca ) ; applyRightFloor ( ca ) ; }
public void fire ( com.google.gerrit.reviewdb.client.Project.NameKey project , org.eclipse.jgit.lib.RefUpdate refUpdate , org.eclipse.jgit.transport.ReceiveCommand.Type type , com.google.gerrit.reviewdb.client.Account updater ) { fire ( project , refUpdate.getName ( ) , refUpdate.getOldObjectId ( ) , refUpdate.getNewObjectId ( ) , type , util.accountInfo ( updater ) ) ; }
private static native void init0 ( java.lang.String serverUrl , com.google.gwt.core.client.JavaScriptObject JsonString ) ;
public void onSuccess ( final com.google.gwtjsonrpc.client.VoidResult result ) { com.google.gerrit.client.Gerrit.getUserAccount ( ) . setShowSiteHeader ( val ) ; com.google.gerrit.client.Gerrit.applyUserPreferences ( ) ; }
public void deleteReviewerFromReviewableWipChange ( ) throws java.lang.Exception { com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableWipChangeWithExtraReviewer ( ) ; removeReviewer ( sc , extraReviewer ) ; assertThat ( sender ) . notSent ( ) ; }
public java.nio.file.Path getPath ( java.lang.String arg0 , java.lang.String ... arg1 ) { return null ; }
public final com.google.gerrit.index.Schema < V > getLatest ( ) { return schemas.lastEntry ( ) . getValue ( ) ; }
public com.google.gerrit.server.change.PatchSetInserter setNotify ( com.google.gerrit.extensions.api.changes.NotifyHandling notify ) { this . notify = com.google.common.base.Preconditions.checkNotNull ( notify ) ; return this ; }
final native int _revisionNumber ( ) ;
private static java.lang.String queryClosed ( java.lang.String who ) { return ( ( ( ( ( "is:closed (owner:" + who ) + " OR reviewer:" ) + who ) + " OR assignee:" ) + who ) + ")" ; }
public void configure ( ) { factory ( ChangeUpdate.Factory.class ) ; factory ( ChangeDraftUpdate.Factory.class ) ; }
public com.google.gwtorm.server.ResultSet < com.google.gerrit.reviewdb.client.PatchLineComment > publishedByChangeFile ( com.google.gerrit.reviewdb.client.Change.Id id , java.lang.String file ) { throw new java.lang.UnsupportedOperationException ( com.google.gerrit.reviewdb.server.DisabledChangesReviewDbWrapper.MSG ) ; }
public void onSuccess ( com.google.gerrit.client.VoidResult result ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChangeInEditMode ( curr.getParentKey ( ) ) ) ; }
private static java.io.FileNotFoundException badSourceRoot ( java.net.URI u ) { return new java.io.FileNotFoundException ( ( "Cannot find source root from " + u ) ) ; }
public void index ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.Change change ) throws com.google.gwtorm.server.OrmException , java.io.IOException { index ( newChangeData ( db , change ) ) ; autoReindexIfStale ( change.getProject ( ) , change.getId ( ) ) ; }
public void noNotificationForDraftPatchSetsForWatchersInNotifyConfig ( ) throws java.lang.Exception { com.google.gerrit.server.mail.Address addr = new com.google.gerrit.server.mail.Address ( "Watcher" , "watcher@example.com" ) ; com.google.gerrit.server.git.NotifyConfig nc = new com.google.gerrit.server.git.NotifyConfig ( ) ; nc.addEmail ( addr ) ; nc.setName ( "team" ) ; nc.setHeader ( NotifyConfig.Header.TO ) ; nc.setTypes ( java.util.EnumSet.of ( NotifyType.NEW_PATCHSETS , NotifyType.ALL_COMMENTS ) ) ; com.google.gerrit.server.git.ProjectConfig cfg = projectCache.checkedGet ( project ) . getConfig ( ) ; cfg.putNotifyConfig ( "team" , nc ) ; saveProjectConfig ( project , cfg ) ; com.google.gerrit.acceptance.PushOneCommit.Result r = pushFactory.create ( db , admin.getIdent ( ) , testRepo , "subject" , "a" , "a1" ) . to ( "refs/for/master" ) ; r.assertOkStatus ( ) ; sender.clear ( ) ; r = pushFactory.create ( db , admin.getIdent ( ) , testRepo , "subject" , "a" , "a2" , r.getChangeId ( ) ) . to ( "refs/for/master%draft" ) ; r.assertOkStatus ( ) ; com.google.common.truth.Truth.assertThat ( sender.getMessages ( ) ) . isEmpty ( ) ; setApiUser ( admin ) ; com.google.gerrit.extensions.api.changes.ReviewInput in = new com.google.gerrit.extensions.api.changes.ReviewInput ( ) ; in.message = "comment" ; gApi.changes ( ) . id ( r.getChangeId ( ) ) . current ( ) . review ( in ) ; com.google.common.truth.Truth.assertThat ( sender.getMessages ( ) ) . isEmpty ( ) ; }
public void setup ( ) throws java.lang.Exception { accounts.put ( com.vmware.gerrit.owners.common.ClassicConfig.USER_A_EMAIL_COM , com.vmware.gerrit.owners.common.ClassicConfig.USER_A_ID ) ; accounts.put ( com.vmware.gerrit.owners.common.ClassicConfig.USER_B_EMAIL_COM , com.vmware.gerrit.owners.common.ClassicConfig.USER_B_ID ) ; accounts.put ( com.vmware.gerrit.owners.common.ClassicConfig.USER_C_EMAIL_COM , com.vmware.gerrit.owners.common.ClassicConfig.USER_C_ID ) ; super . setup ( ) ; }
public static java.lang.String getVersion ( ) { return com.google.gerrit.common.Version.VERSION ; }
public com.google.gerrit.lucene.LuceneChangeIndex getChangeIndex ( @ com.google.gerrit.server.config.GerritServerConfig org.eclipse.jgit.lib.Config cfg , com.google.gerrit.server.config.SitePaths sitePaths , com.google.gerrit.server.index.FieldDef.FillArgs fillArgs ) throws java.io.IOException { return new com.google.gerrit.lucene.LuceneChangeIndex ( cfg , sitePaths , fillArgs , readOnly ) ; }
public java.util.Optional < com.google.gerrit.reviewdb.client.AccountGroup > load ( final com.google.gerrit.reviewdb.client.AccountGroup.Id key ) throws java.lang.Exception { try ( com.google.gerrit.reviewdb.server.ReviewDb db = schema.open ( ) ) { return java.util.Optional.ofNullable ( db.accountGroups ( ) . get ( key ) ) ; } }
public void readCommentLinkInvalidPattern ( ) throws java.lang.Exception { org.eclipse.jgit.revwalk.RevCommit rev = tr.commit ( ) . add ( "project.config" , ( "[commentlink \"bugzilla\"]\n" + ( "\tmatch = \"(bugs{+#?)(d+)\"\n" + "\tlink = http://bugs.example.com/show_bug.cgi?id=$2" ) ) ) . create ( ) ; com.google.gerrit.server.git.ProjectConfig cfg = read ( rev ) ; com.google.common.truth.Truth.assertThat ( cfg.getCommentLinkSections ( ) ) . isEmpty ( ) ; com.google.common.truth.Truth.assertThat ( cfg.getValidationErrors ( ) ) . containsExactly ( new com.google.gerrit.server.git.ValidationError ( ( "project.config: Invalid pattern \"(bugs{+#?)(d+)\" in commentlink.bugzilla.match: " + ( ( "Illegal repetition near index 4\n" + "(bugs{+#?)(d+)\n" ) + " ^" ) ) ) ) ; }
public void onChangeEvent ( final com.google.gerrit.server.events.ChangeEvent event ) { offer ( event ) ; }
public void onClick ( com.google.gwt.event.dom.client.ClickEvent event ) { tagTable.deleteChecked ( ) ; }
protected void parseCommandLine ( ) throws com.google.gerrit.sshd.commands.UnloggedFailure { parseCommandLine ( impl ) ; }
public void deleteBranchByAdminForcePushBlocked ( ) throws java.lang.Exception { blockForcePush ( ) ; assertDeleteSucceeds ( testBranch ) ; }
public void getCacheWithGerritPrefix ( ) throws java.lang.Exception { com.google.gerrit.acceptance.RestResponse r = adminSession.get ( "/config/server/caches/gerrit-accounts" ) ; com.google.common.truth.Truth.assertThat ( r.getStatusCode ( ) ) . isEqualTo ( HttpStatus.SC_OK ) ; }
private com.google.gerrit.ehcache.SerializableProtobuf < V > wrapValue ( final V value ) { return new com.google.gerrit.ehcache.SerializableProtobuf < V > ( value , valueCodec ) ; }
public final native int changeGeneration ( boolean closeEvent ) ;
public static void detail ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.info.ChangeInfo > cb ) { com.google.gerrit.client.changes.ChangeApi.detail ( project , id ) . get ( cb ) ; }
public com.google.gerrit.extensions.common.ProjectInfo apply ( com.google.gerrit.server.project.ProjectResource rsrc ) { return json.format ( rsrc.getControl ( ) ) ; }
public java.util.Optional < com.google.gerrit.reviewdb.client.AccountGroup > load ( java.lang.String uuid ) throws java.lang.Exception { try ( com.google.gerrit.reviewdb.server.ReviewDb db = schema.open ( ) ) { return groups.getGroup ( db , new com.google.gerrit.reviewdb.client.AccountGroup.UUID ( uuid ) ) ; } }
public void onSuccess ( com.google.gerrit.client.rpc.NativeString msg ) { b.setEnabled ( true ) ; if ( msg != null ) { com.google.gwt.user.client.Window.alert ( msg.asString ( ) ) ; } }
public static com.google.gerrit.index.query.Predicate < com.google.gerrit.server.account.AccountState > preferredEmail ( java.lang.String email ) { return new com.google.gerrit.server.query.account.AccountPredicates.AccountPredicate ( com.google.gerrit.server.index.account.AccountField.PREFERRED_EMAIL , AccountQueryBuilder.FIELD_PREFERRED_EMAIL , email.toLowerCase ( ) ) ; }
public void onSend ( ) { Util.MANAGE_SVC.abandonChange ( patchSet.getId ( ) , getMessageText ( ) , createCallback ( ) ) ; }
void prepareETag ( com.google.common.hash.Hasher h , com.google.gerrit.server.CurrentUser user ) { change.prepareETag ( h , user ) ; }
public static java.lang.String nameOf ( java.nio.file.Path plugin ) { return com.google.gerrit.server.plugins.PluginLoader.nameOf ( plugin.getFileName ( ) . toString ( ) ) ; }
public void visit ( org.pegdown.ast.ExpLinkNode node ) { html.open ( "a" ) . attribute ( "href" , href ( node.url ) ) . attribute ( "title" , node.title ) ; visitChildren ( node ) ; html.close ( "a" ) ; }
java.lang.Runnable reviewedAndNext ( ) { return new java.lang.Runnable ( ) { @ java.lang.Override public void run ( ) { if ( com.google.gerrit.client.Gerrit.isSignedIn ( ) ) { reviewed.setValue ( true , true ) ; } navigate ( Direction.NEXT ) . run ( ) ; } } ; }
public void indexChangeOnNonVisibleBranch ( ) throws java.lang.Exception { java.lang.String changeId = createChange ( ) . getChangeId ( ) ; blockRead ( "refs/heads/master" ) ; userRestSession.post ( ( ( "/changes/" + changeId ) + "/index/" ) ) . assertNotFound ( ) ; }
public void index ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { index.apply ( account , new com.google.gerrit.extensions.common.Input ( ) ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot index account" , e ) ; } }
public boolean canSubmit ( ) { if ( GitRepositoryManager.REF_CONFIG.equals ( refName ) ) { return getProjectControl ( ) . isOwner ( ) ; } return canPerform ( Permission.SUBMIT ) ; }
public void formatSeconds ( ) { com.google.gerrit.client.RelativeDateFormatterTest.assertFormat ( 1 , com.google.gerrit.client.RelativeDateFormatter.SECOND_IN_MILLIS , "1 second ago" ) ; com.google.gerrit.client.RelativeDateFormatterTest.assertFormat ( 89 , com.google.gerrit.client.RelativeDateFormatter.SECOND_IN_MILLIS , "89 seconds ago" ) ; }
public void all ( ) { com.google.common.truth.Truth.assertThat ( com.google.gerrit.testutil.IndexVersionsTest.get ( com.google.gerrit.testing.IndexVersions.ALL ) ) . containsExactlyElementsIn ( com.google.gerrit.testutil.IndexVersionsTest.SCHEMA_DEF.getSchemas ( ) . keySet ( ) ) . inOrder ( ) ; }
public java.lang.String encode ( java.lang.String e ) { e = com.google.gwt.http.client.URL.encodeQueryString ( e ) ; e = fixPathImpl ( e ) ; e = fixColonImpl ( e ) ; return e ; }
protected com.google.gson.GsonBuilder newGsonBuilder ( javax.servlet.http.HttpServletRequest req ) throws java.io.IOException { return super . newGsonBuilder ( req ) . registerTypeAdapter ( com.google.gitiles.blame.cache.Region.class , new com.google.gitiles.blame.RegionAdapter ( new com.google.gitiles.DateFormatter ( getAccess ( req ) , com.google.gitiles.DateFormatter.Format.ISO ) ) ) ; }
public java.net.SocketAddress get ( ) { return sd.getRemoteAddress ( ) ; }
public void zeroEndCharacterResultsInValidRange ( ) { com.google.gerrit.extensions.client.Comment.Range range = createRange ( 13 , 31 , 19 , 0 ) ; com.google.gerrit.extensions.client.testing.RangeSubject.assertThat ( range ) . isValid ( ) ; }
com.google.gerrit.server.permissions.RefControl controlForRef ( com.google.gerrit.reviewdb.client.Branch.NameKey ref ) { return controlForRef ( ref.get ( ) ) ; }
public void testDelimiter ( ) { com.google.gwtorm.nosql.IndexKeyBuilder ib = new com.google.gwtorm.nosql.IndexKeyBuilder ( ) ; ib.delimiter ( ) ; com.google.gwtorm.nosql.IndexKeyBuilderTest.assertEqualToBuilderResult ( new byte [ ] { 0 , 1 } , ib ) ; }
final void setUseSignedOffBy ( com.google.gerrit.extensions.client.InheritableBoolean v ) { setUseSignedOffByRaw ( v.name ( ) ) ; }
protected final void configure ( ) { com.google.common.base.Preconditions.checkState ( ( ( command ) != null ) , "@PluginName must be provided" ) ; bind ( com.google.gerrit.sshd.Commands.key ( command ) ) . toProvider ( new com.google.gerrit.sshd.DispatchCommandProvider ( command ) ) ; configureCommands ( ) ; }
public com.google.gerrit.server.account.GroupControl controlFor ( final com.google.gerrit.reviewdb.AccountGroup group ) { return new com.google.gerrit.server.account.GroupControl ( groupCache , user.get ( ) , group ) ; }
public com.google.gerrit.server.notedb.ChangeNotes createWithAutoRebuildingDisabled ( com.google.gerrit.reviewdb.client.Change change , com.google.gerrit.server.git.RefCache refs ) throws com.google.gwtorm.server.OrmException { return new com.google.gerrit.server.notedb.ChangeNotes ( args , change.getProject ( ) , change , false , refs ) . load ( ) ; }
public static void reloadChanges ( com.google.gerrit.server.git.ChangeSet changeSet ) throws com.google.gwtorm.server.OrmException { for ( com.google.gerrit.server.query.change.ChangeData cd : changeSet.changes ( ) ) { cd.reloadChange ( ) ; cd.setPatchSets ( null ) ; cd.setMergeable ( null ) ; } }
public boolean get ( org.eclipse.jgit.lib.ObjectId commit , org.eclipse.jgit.lib.Ref intoRef , com.google.gerrit.extensions.common.SubmitType submitType , java.lang.String mergeStrategy , com.google.gerrit.reviewdb.client.Branch.NameKey dest , org.eclipse.jgit.lib.Repository repo , com.google.gerrit.reviewdb.server.ReviewDb db ) { throw new java.lang.UnsupportedOperationException ( "Mergeability checking disabled" ) ; }
public void testChangeDeletedFromIndexOK ( ) throws java.lang.Exception { setUpMocks ( com.ericsson.gerrit.plugins.multimaster.RestSessionTest.DELETE_OP , com.ericsson.gerrit.plugins.multimaster.RestSessionTest.SUCCESSFUL , com.ericsson.gerrit.plugins.multimaster.RestSessionTest.EMPTY_MSG , com.ericsson.gerrit.plugins.multimaster.RestSessionTest.DO_NOT_THROW_EXCEPTION ) ; com.google.common.truth.Truth.assertThat ( restClient.deleteFromIndex ( com.ericsson.gerrit.plugins.multimaster.RestSessionTest.CHANGE_NUMBER ) ) . isTrue ( ) ; }
public void visibleGroups ( final com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.common.data.GroupList > callback ) { visibleGroupsFactory.create ( ) . to ( callback ) ; }
public static java.lang.String toEditScreen ( com.google.gerrit.reviewdb.client.PatchSet.Id revision , java.lang.String fileName ) { return com.google.gerrit.client.Dispatcher.toPatch ( "edit" , null , revision , fileName , null , 0 ) ; }
public void deleteBranchByProjectOwner ( ) throws java.lang.Exception { grantOwner ( ) ; setApiUser ( user ) ; assertDeleteSucceeds ( testBranch ) ; }
private boolean isLdapGroup ( final com.google.gerrit.client.reviewdb.AccountGroup group ) { return ( group.isAutomaticMembership ( ) ) && ( ! ( authConfig.getRegisteredGroups ( ) . contains ( group.getId ( ) ) ) ) ; }
public void listNonExistingGroupMembers_NotFound ( ) throws java.lang.Exception { exception.expect ( com.google.gerrit.extensions.restapi.ResourceNotFoundException.class ) ; gApi.groups ( ) . id ( "non-existing" ) . members ( ) ; }
void onEdit ( com.google.gwt.event.dom.client.ClickEvent event ) { resetEditors ( ) ; edit.setEnabled ( false ) ; cancel1.setVisible ( true ) ; com.google.gwt.user.client.ui.UIObject.setVisible ( commitTools , true ) ; accessEditor.setEditing ( true ) ; driver.edit ( access ) ; }
public void start ( ) { final org.eclipse.jgit.storage.file.WindowCacheConfig c = new org.eclipse.jgit.storage.file.WindowCacheConfig ( ) ; c.fromConfig ( cfg ) ; org.eclipse.jgit.storage.file.WindowCache.reconfigure ( c ) ; }
public void shouldReturnExecutor ( ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( eventsExecutorProvider.get ( ) ) . isEqualTo ( executorMock ) ; }
public void addMembers ( com.google.gerrit.reviewdb.client.AccountGroup.UUID groupUuid , java.util.Collection < com.google.gerrit.reviewdb.client.Account.Id > newMemberIds ) throws com.google.gerrit.common.errors.NoSuchGroupException , com.google.gwtorm.server.OrmException , java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { groupsUpdateProvider.get ( ) . addGroupMembers ( db.get ( ) , groupUuid , com.google.common.collect.ImmutableSet.copyOf ( newMemberIds ) ) ; }
protected void configure ( ) { persist ( com.google.gerrit.server.change.ChangeKindCache.ID_CACHE , com.google.gerrit.server.change.ChangeKindCache.Key.class , com.google.gerrit.server.change.ChangeKind.class ) . maximumWeight ( ( 2 << 20 ) ) . weigher ( com.google.gerrit.server.change.ChangeKindCache.ChangeKindWeigher.class ) . loader ( com.google.gerrit.server.change.ChangeKindCache.Loader.class ) ; }
public void configure ( ) { factory ( ReviewDbBatchUpdate.AssistedFactory.class ) ; factory ( NoteDbBatchUpdate.AssistedFactory.class ) ; }
private void initTheme ( ) { for ( com.google.gerrit.extensions.client.Theme t : com.google.gerrit.extensions.client.Theme.values ( ) ) { theme.addItem ( t.name ( ) . toLowerCase ( ) , t.name ( ) ) ; } }
public boolean isOwner ( ) { return ( controlForRef ( RefRight.ALL ) . isOwner ( ) ) || ( getCurrentUser ( ) . isAdministrator ( ) ) ; }
protected void onInitUI ( ) { super . onInitUI ( ) ; setPageTitle ( Util.C.groupListTitle ( ) ) ; initPageHeader ( ) ; groups = new com.google.gerrit.client.admin.GroupTable ( true , com.google.gerrit.common.PageLinks.ADMIN_GROUPS ) ; add ( groups ) ; }
protected long getLastModified ( final javax.servlet.http.HttpServletRequest req ) { return lastModified ; }
public boolean setTeamnamesForRepositoryRole ( java.lang.String role , java.util.List < java.lang.String > teamnames ) { return false ; }
public void validCert ( ) throws java.lang.Exception { org.eclipse.jgit.transport.PushCertificate cert = newSignedCert ( validNonce ( ) , com.google.gerrit.gpg.testutil.TestKeys.key1 ( ) ) ; assertProblems ( cert ) ; }
private java.lang.String groupOf ( final com.google.gerrit.reviewdb.RefRight r ) { return groups.get ( r.getAccountGroupId ( ) ) . getName ( ) ; }
public java.util.List < com.google.gerrit.server.account.AccountSshKey > getKeys ( com.google.gerrit.reviewdb.client.Account.Id accountId ) throws java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { return read ( accountId ) . getKeys ( ) ; }
public void onValueChange ( com.google.gwt.event.logical.shared.ValueChangeEvent < com.google.gerrit.common.data.ChangeDetail > event ) { if ( isAttached ( ) ) { display ( event.getValue ( ) ) ; } }
public java.util.List < com.google.gerrit.extensions.common.ChangeInfo > getStarredChanges ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return stars.list ( ) . apply ( account ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot get starred changes" , e ) ; } }
public java.lang.String getToken ( com.google.gwtjsonrpc.client.JsonDefTarget proxy ) { return com.google.gerrit.client.Gerrit.authorization ; }
public java.lang.Void call ( ) throws java.lang.Exception { index.replace ( new com.google.gerrit.server.query.change.ChangeData ( change ) ) ; return null ; }
public static com.google.gerrit.server.group.db.InternalGroupUpdate.Builder builder ( ) { return new com.google.gerrit.server.group.db.AutoValue_InternalGroupUpdate.Builder ( ) . setMemberModification ( java.util.function.Function.identity ( ) ) . setSubgroupModification ( java.util.function.Function.identity ( ) ) ; }
private com.google.gerrit.server.git.SubmitStrategy createStrategy ( ) throws com.google.gerrit.server.git.MergeException { return submitStrategyFactory.create ( destProject.getSubmitType ( ) , db , repo , rw , inserter , CAN_MERGE , alreadyAccepted , destBranch , destProject.isUseContentMerge ( ) ) ; }
public static java.lang.String toGroup ( com.google.gerrit.reviewdb.client.AccountGroup.Id id , java.lang.String panel ) { return ( ( ( com.google.gerrit.common.PageLinks.ADMIN_GROUPS ) + ( id.toString ( ) ) ) + "," ) + panel ; }
public void configure ( ) { factory ( ChangeUpdate.Factory.class ) ; bind ( com.google.gerrit.server.IdentifiedUser.class ) . toInstance ( user ) ; }
protected java.util.Set < com.google.gerrit.client.reviewdb.AccountGroup.Id > getGroups ( ) { if ( ( userGroups ) == null ) { userGroups = com.google.gerrit.client.rpc.Common.getGroupCache ( ) . getEffectiveGroups ( getAccountId ( ) ) ; } return userGroups ; }
protected java.nio.file.attribute.FileTime getLastModifiedTime ( java.nio.file.Path p ) throws java.io.IOException { return java.nio.file.Files.getLastModifiedTime ( p ) ; }
public void run ( ) throws java.io.IOException { try { runAsync ( ) . checkedGet ( ) ; } catch ( java.lang.Exception e ) { com.google.common.base.Throwables.propagateIfPossible ( e , java.io.IOException.class ) ; throw com.google.gerrit.server.change.MergeabilityChecker.MAPPER.apply ( e ) ; } }
public java.lang.String getScheme ( ) { int c = externalId.indexOf ( ':' ) ; return 0 < c ? externalId.substring ( 0 , c ) : null ; }
public void onFailure ( java.lang.Throwable err ) { com.google.gerrit.client.change.RelatedChangesTab tab = tabs.get ( com.google.gerrit.client.change.RelatedChanges.RELATED_CHANGES ) ; tab.setTitle ( Resources.M.relatedChanges ( Resources.C.notAvailable ( ) ) ) ; tab.setError ( err.getMessage ( ) ) ; }
public com.google.gerrit.index.query.Predicate < com.google.gerrit.index.project.ProjectData > rewrite ( com.google.gerrit.index.query.Predicate < com.google.gerrit.index.project.ProjectData > in , com.google.gerrit.index.QueryOptions opts ) throws com.google.gerrit.index.query.QueryParseException { com.google.gerrit.index.project.ProjectIndex index = indexes.getSearchIndex ( ) ; com.google.common.base.Preconditions.checkNotNull ( index , "no active search index configured for projects" ) ; return new com.google.gerrit.index.project.IndexedProjectQuery ( index , in , opts ) ; }
java.util.Collection < com.google.gerrit.common.data.AccessSection > access ( ) { if ( ( access ) == null ) { access = state.getAllAccessSections ( ) ; } return access ; }
public void setUp ( ) throws java.lang.Exception { java.lang.String url = "http://localhost:" + ( wireMockRule.port ( ) ) ; cfg = org.mockito.Mockito.mock ( com.ericsson.gerrit.plugins.highavailability.Configuration.class ) ; org.mockito.Mockito.when ( cfg.getUser ( ) ) . thenReturn ( "user" ) ; org.mockito.Mockito.when ( cfg.getPassword ( ) ) . thenReturn ( "pass" ) ; org.mockito.Mockito.when ( cfg.getMaxTries ( ) ) . thenReturn ( com.ericsson.gerrit.plugins.highavailability.forwarder.rest.HttpSessionTest.MAX_TRIES ) ; org.mockito.Mockito.when ( cfg.getConnectionTimeout ( ) ) . thenReturn ( com.ericsson.gerrit.plugins.highavailability.forwarder.rest.HttpSessionTest.TIMEOUT ) ; org.mockito.Mockito.when ( cfg.getSocketTimeout ( ) ) . thenReturn ( com.ericsson.gerrit.plugins.highavailability.forwarder.rest.HttpSessionTest.TIMEOUT ) ; org.mockito.Mockito.when ( cfg.getRetryInterval ( ) ) . thenReturn ( com.ericsson.gerrit.plugins.highavailability.forwarder.rest.HttpSessionTest.RETRY_INTERVAL ) ; com.ericsson.gerrit.plugins.highavailability.peers.PeerInfo peerInfo = org.mockito.Mockito.mock ( com.ericsson.gerrit.plugins.highavailability.peers.PeerInfo.class ) ; org.mockito.Mockito.when ( peerInfo.getDirectUrl ( ) ) . thenReturn ( url ) ; httpSession = new com.ericsson.gerrit.plugins.highavailability.forwarder.rest.HttpSession ( new com.ericsson.gerrit.plugins.highavailability.forwarder.rest.HttpClientProvider ( cfg ) . get ( ) , com.google.inject.util.Providers.of ( com.google.common.base.Optional.of ( peerInfo ) ) ) ; }
public com.google.gerrit.server.IdentifiedUser runAs ( com.google.gerrit.reviewdb.client.Account.Id id , com.google.gerrit.server.CurrentUser caller ) { return new com.google.gerrit.server.IdentifiedUser ( capabilityControlFactory , authConfig , realm , anonymousCowardName , canonicalUrl , accountCache , groupBackend , disableReverseDnsLookup , remotePeerProvider , dbProvider , id , caller ) ; }
public void noNotificationForChangeThatIsTurnedPrivateForWatchersInNotifyConfig ( ) throws java.lang.Exception { com.google.gerrit.server.mail.Address addr = new com.google.gerrit.server.mail.Address ( "Watcher" , "watcher@example.com" ) ; com.google.gerrit.server.git.NotifyConfig nc = new com.google.gerrit.server.git.NotifyConfig ( ) ; nc.addEmail ( addr ) ; nc.setName ( "team" ) ; nc.setHeader ( NotifyConfig.Header.TO ) ; nc.setTypes ( java.util.EnumSet.of ( NotifyType.NEW_PATCHSETS ) ) ; com.google.gerrit.server.git.ProjectConfig cfg = projectCache.checkedGet ( project ) . getConfig ( ) ; cfg.putNotifyConfig ( "team" , nc ) ; saveProjectConfig ( project , cfg ) ; com.google.gerrit.acceptance.PushOneCommit.Result r = pushFactory.create ( db , admin.getIdent ( ) , testRepo , "subject" , "a" , "a1" ) . to ( "refs/for/master" ) ; r.assertOkStatus ( ) ; sender.clear ( ) ; r = pushFactory.create ( db , admin.getIdent ( ) , testRepo , "subject" , "a" , "a2" , r.getChangeId ( ) ) . to ( "refs/for/master%private" ) ; r.assertOkStatus ( ) ; com.google.common.truth.Truth.assertThat ( sender.getMessages ( ) ) . isEmpty ( ) ; }
protected void configure ( ) { bindScope ( com.google.inject.servlet.RequestScoped.class , PerThreadRequestScope.REQUEST ) ; bind ( com.google.gerrit.server.project.PerRequestProjectControlCache.class ) . in ( com.google.inject.servlet.RequestScoped.class ) ; bind ( com.google.gerrit.server.CurrentUser.class ) . toInstance ( remoteUser ) ; }
public final Change.Id legacyId ( ) { return hasChangeNumber ( ) ? new com.google.gerrit.reviewdb.client.Change.Id ( _changeNumber ( ) ) : null ; }
public void onSuccess ( java.lang.Void result ) { net.codemirror.lib.Vim.initKeyMap ( ) ; cb.onSuccess ( null ) ; }
public void handle ( net.codemirror.lib.CodeMirror cm , net.codemirror.lib.CodeMirror.LineHandle lh , com.google.gwt.dom.client.Element e ) { commentManager.resizePadding ( lh ) ; chunkManager.resizePadding ( cm , lh , side ) ; }
protected void setRepo ( org.eclipse.jgit.junit.TestRepository < ? > testRepo ) throws java.lang.Exception { this . git = org.eclipse.jgit.api.Git.wrap ( testRepo.getRepository ( ) ) ; this . testRepo = new org.eclipse.jgit.junit.TestRepository ( git.getRepository ( ) ) ; }
public static PermissionRange.WithDefaults getRange ( java.lang.String varName ) { if ( com.google.gerrit.common.data.GlobalCapability.QUERY_LIMIT.equalsIgnoreCase ( varName ) ) { return new com.google.gerrit.common.data.PermissionRange.WithDefaults ( varName , 0 , java.lang.Integer.MAX_VALUE , 0 , com.google.gerrit.common.data.GlobalCapability.DEFAULT_MAX_QUERY_LIMIT ) ; } return null ; }
public int size ( ) { return ( changeData.size ( ) ) + ( furtherHiddenChanges ? 1 : 0 ) ; }
public static org.eclipse.jgit.lib.Config submitWholeTopicEnabled ( ) { return submitWholeTopicEnabledConfig ( ) ; }
private void checkRepositoryIndex ( ) { checkView ( ( ( repositoryName ) != null ) , "missing repository name on %s view" , type ) ; checkHostIndex ( ) ; }
private void rememberXsrfKey ( final com.google.gwt.http.client.Response rsp ) { final java.lang.String v = rsp.getHeader ( JsonUtil.XSRF_HEADER ) ; if ( v != null ) { proxy.xsrfKey = v ; } }
public java.util.List < com.googlesource.gerrit.plugins.manager.repository.PluginInfo > load ( com.googlesource.gerrit.plugins.manager.PluginsCentralLoader.ListKey all ) throws java.lang.Exception { return repository.list ( com.google.gerrit.common.Version.getVersion ( ) ) ; }
public void banCommit_Forbidden ( ) throws java.lang.Exception { userRestSession.put ( ( ( "/projects/" + ( project.get ( ) ) ) + "/ban/" ) , com.google.gerrit.extensions.common.BanCommitInput.fromCommits ( "a8a477efffbbf3b44169bb9a1d3a334cbbd9aa96" ) ) . assertForbidden ( ) ; }
static void savePublic ( final org.eclipse.jgit.storage.file.FileBasedConfig sec ) throws java.io.IOException { if ( com.google.gerrit.pgm.init.InitUtil.modified ( sec ) ) { sec.save ( ) ; } }
private void assertCanUpload ( com.google.gerrit.server.project.ProjectControl u ) { com.google.common.truth.Truth.assertThat ( u.canPushToAtLeastOneRef ( ) ) . named ( "can upload" ) . isTrue ( ) ; }
java.lang.Iterable < com.google.gwtorm.jdbc.TestJdbcAccess.Data > createIterable ( com.google.gwtorm.jdbc.TestJdbcAccess.Data ... data ) { java.util.List < com.google.gwtorm.jdbc.TestJdbcAccess.Data > list = java.util.Arrays.asList ( data ) ; return new com.google.gwtorm.server.ListResultSet < com.google.gwtorm.jdbc.TestJdbcAccess.Data > ( list ) ; }
public abstract com.google.gerrit.server.git.ChangeReportFormatter.Input.Builder setChange ( com.google.gerrit.reviewdb.client.Change val ) ;
public boolean isNotify ( final com.google.gerrit.reviewdb.client.AccountProjectWatch.NotifyType type ) { switch ( type ) { case NEW_CHANGES : return notifyNewChanges ; case ALL_COMMENTS : return notifyAllComments ; case SUBMITTED_CHANGES : return notifySubmittedChanges ; case ALL : break ; } return false ; }
protected static java.lang.String asString ( com.google.gson.JsonElement el ) { if ( el != null ) { try { return el.getAsString ( ) ; } catch ( java.lang.RuntimeException e ) { } } return null ; }
public com.google.gerrit.extensions.api.projects.TagInfo get ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return listTags.get ( project , com.google.gerrit.extensions.restapi.IdString.fromDecoded ( ref ) ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot get tag" , e ) ; } }
public com.google.gerrit.server.git.BatchUpdate.Order getOrder ( ) { return order ; }
public static void publishEdit ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwt.core.client.JavaScriptObject > cb ) { com.google.gwt.core.client.JavaScriptObject in = com.google.gwt.core.client.JavaScriptObject.createObject ( ) ; com.google.gerrit.client.changes.ChangeApi.change ( project , id ) . view ( "edit:publish" ) . post ( in , cb ) ; }
protected void updateIndexTs ( java.time.LocalDateTime ts ) { indexTs.update ( indexName , ts ) ; }
public java.lang.String getProject ( ) { return clean ( project ) ; }
public void run ( ) { if ( isNew ( ) ) { cancel.setVisible ( ( ! ( isDirty ( ) ) ) ) ; } expandText ( ) ; }
public boolean supportsCredentialChanges ( com.gitblit.models.UserModel user ) { return false ; }
public com.google.gerrit.server.patch.PatchListEntry get ( final java.lang.String fileName ) { final int index = search ( fileName ) ; return 0 <= index ? patches [ index ] : com.google.gerrit.server.patch.PatchListEntry.empty ( fileName ) ; }
public void evictMemberIn ( com.google.gerrit.reviewdb.client.AccountGroup.UUID groupId ) { if ( groupId != null ) { memberIn.invalidate ( groupId ) ; if ( ! ( com.google.gerrit.reviewdb.client.AccountGroup.isInternalGroup ( groupId ) ) ) { external.invalidate ( com.google.gerrit.server.account.GroupIncludeCacheImpl.EXTERNAL_NAME ) ; } } }
private boolean visible ( com.google.gerrit.server.change.ChangeResource change , com.google.gerrit.reviewdb.client.PatchSet ps ) throws com.google.gwtorm.server.OrmException { return changeControlFactory.controlFor ( change.getNotes ( ) , change.getUser ( ) ) . isPatchVisible ( ps , dbProvider.get ( ) ) ; }
public final native com.google.gwt.core.client.JsArrayString permittedValues ( java.lang.String n ) ;
public com.google.gerrit.extensions.common.CommentInfo get ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return getDraft.apply ( draft ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot retrieve draft" , e ) ; } }
public com.googlesource.gerrit.plugins.github.git.GHContentUpdateResponse createContent ( java.lang.String content , java.lang.String commitMessage , java.lang.String path , java.lang.String branch ) throws java.io.IOException { return ghRepository.createContent ( content , commitMessage , path , branch ) ; }
protected java.lang.String getMappings ( ) { return gson.toJson ( com.google.common.collect.ImmutableMap.of ( "mappings" , mapping ) ) ; }
private void injectMode ( com.google.gerrit.client.diff.DiffInfo diffInfo , com.google.gwt.user.client.rpc.AsyncCallback < java.lang.Void > cb ) { new net.codemirror.mode.ModeInjector ( ) . add ( getContentType ( diffInfo.metaA ( ) ) ) . add ( getContentType ( diffInfo.metaB ( ) ) ) . inject ( cb ) ; }
public com.google.gwtjsonrpc.client.VoidResult run ( com.google.gerrit.client.reviewdb.ReviewDb db , com.google.gwtorm.client.Transaction txn , boolean retry ) throws com.google.gwtorm.client.OrmException { return doAddReviewers ( reviewerIds , id , db , txn ) ; }
public void delete ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { deleteChange.apply ( change , null ) ; } catch ( com.google.gerrit.server.update.UpdateException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot delete change" , e ) ; } }
public void onFailure ( java.lang.Throwable caught ) { query = new com.google.gerrit.client.admin.ProjectTagsScreen.Query ( match ) . start ( start ) . run ( ) ; super . onFailure ( caught ) ; }
public void execute ( ) { com.google.gwt.user.client.Window.scrollTo ( 0 , 0 ) ; message.setFocus ( true ) ; }
private void addPermission ( java.lang.String refSpec , java.lang.String action , com.google.gerrit.common.data.PermissionRule rule ) { projectConfig.getAccessSection ( refSpec , true ) . getPermission ( action , true ) . add ( rule ) ; }
com.google.gwtorm.client.ResultSet < com.google.gerrit.reviewdb.PatchLineComment > byPatchSet ( com.google.gerrit.reviewdb.PatchSet.Id id ) throws com.google.gwtorm.client.OrmException ;
private void reindexAfterIndexUpdate ( com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.reviewdb.client.Change.Id id ) { if ( reindexAfterIndexUpdate ) { @ java.lang.SuppressWarnings ( value = "unused" ) java.util.concurrent.Future < ? > possiblyIgnoredError = reindexIfStale ( project , id ) ; } }
public boolean isAuthRequired ( ) { return false ; }
synchronized void updatingMergeabilityFlag ( com.google.gerrit.reviewdb.client.Change change , boolean force ) { if ( force ) { forcePending.remove ( change.getId ( ) ) ; } pending.remove ( change.getId ( ) ) ; }
boolean isGtEq ( ) { return com.google.gerrit.server.query.change.LabelPredicate.Test.GT_EQ.equals ( this ) ; }
public final native java.lang.String description ( ) ;
protected void configure ( ) { bind ( com.google.gerrit.common.ChangeHookRunner.class ) ; bind ( com.google.gerrit.common.ChangeHooks.class ) . to ( com.google.gerrit.common.ChangeHookRunner.class ) ; bind ( com.google.gerrit.common.EventSource.class ) . to ( com.google.gerrit.common.ChangeHookRunner.class ) ; listener ( ) . to ( com.google.gerrit.common.ChangeHookRunner.class ) ; }
public void onSuccess ( com.google.gwt.core.client.JsArray < com.google.gerrit.client.account.ProjectWatchInfo > watchedProjects ) { cbox.setEnabled ( true ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { if ( ( event.getNativeEvent ( ) . getKeyCode ( ) ) == ( com.google.gwt.event.dom.client.KeyCodes.KEY_ENTER ) ) { update ( ) ; } }
public static boolean readWrite ( ) { return ( ( com.google.gerrit.testutil.NoteDbMode.get ( ) ) == ( com.google.gerrit.testutil.NoteDbMode.READ_WRITE ) ) || ( ( com.google.gerrit.testutil.NoteDbMode.get ( ) ) == ( com.google.gerrit.testutil.NoteDbMode.PRIMARY ) ) ; }
public com.google.gerrit.index.query.InternalQuery < T > setLimit ( int n ) { queryProcessor.setUserProvidedLimit ( n ) ; return this ; }
void onCancel ( com.google.gwt.event.dom.client.ClickEvent e ) { setEdit ( false ) ; resizePaddingWidget ( ) ; }
public void onClick ( com.google.gwt.event.dom.client.ClickEvent event ) { activate ( patchSetId ) ; }
public void delete_MethodNotAllowed ( ) throws java.lang.Exception { adminRestSession.put ( ( ( "/accounts/" + ( admin.username ) ) + "/username" ) ) . assertMethodNotAllowed ( ) ; }
public void init ( javax.servlet.FilterConfig config ) throws javax.servlet.ServletException { filterConfig = config ; for ( com.google.gerrit.httpd.AllRequestFilter f : filters ) { initFilterIfNeeded ( f ) ; } }
public com.googlesource.gerrit.plugins.hooks.validation.ItsAssociationPolicy getItsAssociationPolicy ( ) { return gerritConfig.getEnum ( "commentlink" , getCommentLinkName ( ) , "association" , ItsAssociationPolicy.OPTIONAL ) ; }
public final native net.codemirror.lib.Pos to ( ) ;
public com.google.gerrit.server.IdentifiedUser create ( final com.google.gerrit.server.AccessPath accessPath , final com.google.gerrit.client.reviewdb.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( accessPath , authConfig , accountCache , realm , remotePeerProvider , dbProvider , id ) ; }
void sendMessages ( ) { for ( com.google.gerrit.server.git.validators.ValidationMessage m : messages ) { if ( m.isError ( ) ) { messageSender.sendError ( m.getMessage ( ) ) ; } else { messageSender.sendMessage ( m.getMessage ( ) ) ; } } }
com.google.gerrit.server.change.PatchSetInserter create ( com.google.gerrit.server.project.ChangeControl ctl , com.google.gerrit.reviewdb.client.PatchSet.Id psId , org.eclipse.jgit.lib.ObjectId commitId ) ;
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { com.google.gerrit.client.Gerrit.display ( url ) ; }
protected void onCellSingleClick ( com.google.gwt.user.client.Event event , int row , int column ) { movePointerTo ( row ) ; }
public void testEvictProjectListOK ( ) throws java.lang.Exception { setupMocks ( Constants.PROJECT_LIST , com.ericsson.gerrit.plugins.evictcache.RestSessionTest.EMPTY_JSON , com.ericsson.gerrit.plugins.evictcache.RestSessionTest.OK_RESPONSE , com.ericsson.gerrit.plugins.evictcache.RestSessionTest.DO_NOT_THROW_EXCEPTION ) ; com.google.common.truth.Truth.assertThat ( restClient.evict ( com.ericsson.gerrit.plugins.evictcache.RestSessionTest.SOURCE_NAME , Constants.PROJECT_LIST , new java.lang.Object ( ) ) ) . isTrue ( ) ; }
public synchronized java.io.PrintWriter getWriter ( ) { com.google.common.base.Preconditions.checkState ( ( ( outputStream ) == null ) , "getOutputStream() already called" ) ; if ( ( writer ) == null ) { writer = new java.io.PrintWriter ( actualBody ) ; } return writer ; }
public static java.util.Optional < com.google.gerrit.reviewdb.client.Account.Id > tryParse ( java.lang.String str ) { try { return java.util.Optional.of ( new com.google.gerrit.reviewdb.client.Account.Id ( java.lang.Integer.parseInt ( str ) ) ) ; } catch ( java.lang.NumberFormatException e ) { return java.util.Optional.empty ( ) ; } }
public void onSuccess ( final com.google.gerrit.client.reviewdb.PatchLineComment result ) { comment = result ; text.setReadOnly ( false ) ; discard.setEnabled ( true ) ; updateSavedAt ( ) ; }
public com.google.common.collect.ImmutableList < com.google.gerrit.server.ReviewerStatusUpdate > getReviewerUpdates ( ) { return state.reviewerUpdates ( ) ; }
public boolean canSubmit ( ) { return getRefControl ( ) . canSubmit ( isOwner ( ) ) ; }
public synchronized int getCount ( ) { return count ; }
public void setUp ( ) throws java.lang.Exception { admin = accounts.admin ( ) ; session = new com.google.gerrit.acceptance.RestSession ( server , admin ) ; com.google.gerrit.acceptance.GitUtil.initSsh ( admin ) ; project = new com.google.gerrit.reviewdb.client.Project.NameKey ( "p" ) ; db = reviewDbProvider.open ( ) ; }
public com.googlesource.gerrit.plugins.its.phabricator.conduit.results.ManiphestEdit maniphestEdit ( int taskId , java.lang.String comment ) throws com.googlesource.gerrit.plugins.its.phabricator.conduit.ConduitException { return maniphestEdit ( taskId , comment , null , com.googlesource.gerrit.plugins.its.phabricator.conduit.Conduit.ACTION_COMMENT ) ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { if ( callback != null ) { callback.onFailure ( null ) ; } hide ( ) ; }
void removeAll ( ) { if ( ( skipBars ) != null ) { for ( com.google.gerrit.client.diff.SkipBar bar : skipBars ) { bar.expandSideAll ( ) ; } skipBars = null ; line0 = null ; } }
private static native java.lang.String go ( com.google.gwt.core.client.JavaScriptObject ctx , java.lang.String srcText , java.lang.String srcType , int tabSize ) ;
public int compare ( com.google.gerrit.server.diff.PatchListEntry a , com.google.gerrit.server.diff.PatchListEntry b ) { return com.google.gerrit.server.diff.PatchList.comparePaths ( a.getNewName ( ) , b.getNewName ( ) ) ; }
public com.google.gerrit.extensions.restapi.BinaryResult apply ( com.google.gerrit.server.project.FileResource rsrc ) throws com.google.gerrit.extensions.restapi.ResourceNotFoundException , java.io.IOException { return fileContentUtil.getContent ( rsrc.getProject ( ) . getProjectState ( ) , rsrc.getRev ( ) , rsrc.getPath ( ) ) ; }
public static void draft ( @ com.google.gerrit.common.Nullable java.lang.String project , com.google.gerrit.reviewdb.client.PatchSet.Id id , java.lang.String draftId , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.changes.CommentInfo > cb ) { com.google.gerrit.client.changes.CommentApi.revision ( project , id , "drafts" ) . id ( draftId ) . get ( cb ) ; }
private java.lang.String getUrl ( java.lang.String endPoint ) { return ( ( url ) + ( ( account ) != null ? "/a" : "" ) ) + endPoint ; }
public com.google.gerrit.server.project.FileResource parse ( com.google.gerrit.server.project.BranchResource parent , com.google.gerrit.extensions.restapi.IdString id ) throws com.google.gerrit.extensions.restapi.ResourceNotFoundException , java.io.IOException { return com.google.gerrit.server.project.FileResource.create ( repoManager , parent.getControl ( ) , org.eclipse.jgit.lib.ObjectId.fromString ( parent.getRevision ( ) ) , id.get ( ) ) ; }
private com.google.gerrit.server.config.GetServerInfo.ReceiveInfo getReceiveInfo ( ) { com.google.gerrit.server.config.GetServerInfo.ReceiveInfo info = new com.google.gerrit.server.config.GetServerInfo.ReceiveInfo ( ) ; info.enableSignedPush = enableSignedPush ; return info ; }
private void wrapChildren ( java.lang.String tag , org.commonmark.node.Node node ) { html.open ( tag ) ; visitChildren ( node ) ; html.close ( tag ) ; }
protected void saveProjectConfig ( com.google.gerrit.server.project.ProjectConfig cfg ) throws java.lang.Exception { try ( com.google.gerrit.server.git.meta.MetaDataUpdate md = metaDataUpdateFactory.create ( cfg.getName ( ) ) ) { cfg.commit ( md ) ; } projectCache.evict ( cfg.getProject ( ) ) ; }
static boolean skip ( org.eclipse.jgit.lib.Ref ref ) { return ( ( ref.isSymbolic ( ) ) || ( ( ref.getObjectId ( ) ) == null ) ) || ( com.google.gerrit.reviewdb.client.PatchSet.isChangeRef ( ref.getName ( ) ) ) ; }
private java.io.Writer getWriter ( javax.servlet.http.HttpServletResponse res ) throws java.io.IOException { return new java.io.OutputStreamWriter ( res.getOutputStream ( ) , res.getCharacterEncoding ( ) ) ; }
abstract PatchScreen.Type getPatchScreenType ( ) ;
public java.lang.String get ( com.google.gerrit.server.account.AccountState input , com.google.gerrit.server.index.account.FillArgs args ) { return com.google.common.base.Strings.nullToEmpty ( input.getUserName ( ) ) . toLowerCase ( ) ; }
public boolean canRead ( ) { return ( getProjectControl ( ) . getProject ( ) . getState ( ) . equals ( ProjectState.READ_ONLY ) ) || ( canWrite ( ) ) ; }
public void onRemoveByKeys ( org.eclipse.jgit.lib.ObjectId oldNotesRev , org.eclipse.jgit.lib.ObjectId newNotesRev , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId.Key > extIdKeys ) { }
public void delete ( com.google.gerrit.server.query.change.ChangeData cd ) throws java.io.IOException { for ( com.google.gerrit.server.index.ChangeIndex i : getWriteIndexes ( ) ) { i.delete ( cd ) ; } }
public void addReviewerToWipChangeBatch ( ) throws java.lang.Exception { addReviewerToWipChange ( batch ( ) ) ; }
public void shouldHavePushTask ( ) { replicationState.increasePushTaskCount ( "someProject" , "someRef" ) ; com.google.common.truth.Truth.assertThat ( replicationState.hasPushTask ( ) ) . isTrue ( ) ; }
private static boolean isJsonBody ( com.google.gwt.http.client.Response res ) { return com.google.gerrit.client.rpc.RestApi.isContentType ( res , com.google.gerrit.client.rpc.RestApi.JSON_TYPE ) ; }
public void onResize ( com.google.gwt.event.logical.shared.ResizeEvent event ) { resizeCodeMirror ( ) ; }
public void index ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { index.apply ( change , new com.google.gerrit.extensions.common.Input ( ) ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot index change" , e ) ; } }
public void onSignOut ( ) { if ( isRequiresSignIn ( ) ) { com.google.gwt.user.client.History.newItem ( Link.ALL_OPEN ) ; } }
private com.google.inject.Module createIndexModule ( ) { switch ( indexType ) { case LUCENE : return com.google.gerrit.lucene.LuceneIndexModule.latestVersionWithOnlineUpgrade ( ) ; default : throw new java.lang.IllegalStateException ( ( "unsupported index.type = " + ( indexType ) ) ) ; } }
protected java.nio.file.Path newSitePath ( ) throws java.io.IOException { return createWorkRepository ( ) . getWorkTree ( ) . toPath ( ) . resolve ( "test_site" ) ; }
protected com.google.gerrit.reviewdb.client.Change insert ( org.eclipse.jgit.junit.TestRepository < com.google.gerrit.testutil.InMemoryRepositoryManager.Repo > repo , com.google.gerrit.server.change.ChangeInserter ins ) throws java.lang.Exception { return insert ( repo , ins , null ) ; }
public void banCommit_Forbidden ( ) throws java.lang.Exception { userRestSession.put ( ( ( "/projects/" + ( project.get ( ) ) ) + "/ban/" ) , BanCommit.Input.fromCommits ( "a8a477efffbbf3b44169bb9a1d3a334cbbd9aa96" ) ) . assertForbidden ( ) ; }
private com.googlesource.gerrit.plugins.uploadvalidator.ValidatorConfig getConfig ( java.lang.String defaultConfig ) throws org.eclipse.jgit.errors.ConfigInvalidException { com.googlesource.gerrit.plugins.uploadvalidator.ValidatorConfig config = new com.googlesource.gerrit.plugins.uploadvalidator.ValidatorConfig ( new com.googlesource.gerrit.plugins.uploadvalidator.FakeConfigFactory ( projectName , defaultConfig ) , new com.googlesource.gerrit.plugins.uploadvalidator.FakeUserProvider ( ) , new com.googlesource.gerrit.plugins.uploadvalidator.FakeGroupCacheUUIDByName ( ) ) ; return config ; }
public synchronized com.google.gerrit.testing.FakeEmailSender.Message peekMessage ( ) { if ( ( messagesRead ) >= ( messages.size ( ) ) ) { return null ; } return messages.get ( messagesRead ) ; }
public static void stopCommonServer ( ) throws java.lang.Exception { if ( ( com.google.gerrit.acceptance.AbstractDaemonTest.commonServer ) != null ) { com.google.gerrit.acceptance.AbstractDaemonTest.commonServer.stop ( ) ; com.google.gerrit.acceptance.AbstractDaemonTest.commonServer = null ; } com.google.gerrit.testutil.TempFileUtil.cleanup ( ) ; }
public java.lang.String required ( java.lang.String name ) { return com.google.gerrit.server.config.ConfigUtil.getRequired ( cfg , section , name ) ; }
public com.google.gerrit.server.project.ConfigInfo apply ( com.google.gerrit.server.project.ProjectResource resource ) { return new com.google.gerrit.server.project.ConfigInfo ( resource.getControl ( ) , resource.getControl ( ) . getProjectState ( ) , config , views , currentUser ) ; }
public void evict ( final com.google.gerrit.client.reviewdb.Project p ) { if ( p != null ) { auto.remove ( p.getNameKey ( ) ) ; } }
public com.google.gerrit.extensions.common.SshKeyInfo apply ( com.google.gerrit.server.account.AccountResource.SshKey rsrc ) { return com.google.gerrit.server.account.GetSshKeys.newSshKeyInfo ( rsrc.getSshKey ( ) ) ; }
public void setPreviewText ( final java.lang.String text ) { if ( ( textLabel ) != null ) { textLabel.setText ( text ) ; visibleLen = text.length ( ) ; } }
void onSaveSuccess ( com.google.gerrit.client.info.AccountInfo account ) { super . onSaveSuccess ( account ) ; displayHasContact ( account ) ; }
public void onSuccess ( com.google.gerrit.client.account.Preferences prefs ) { com.google.gerrit.client.Gerrit.getUserAccount ( ) . setGeneralPreferences ( p ) ; com.google.gerrit.client.Gerrit.applyUserPreferences ( ) ; enable ( true ) ; display ( prefs ) ; com.google.gerrit.client.Gerrit.refreshMenuBar ( ) ; }
public void pruneSchema ( com.google.gwtorm.server.StatementExecutor e ) { throw new com.google.gerrit.testutil.DisabledReviewDb.Disabled ( ) ; }
public void onSuccess ( final com.google.gwtjsonrpc.common.VoidResult result ) { com.google.gerrit.client.Gerrit.getUserAccount ( ) . setGeneralPreferences ( p ) ; com.google.gerrit.client.Gerrit.applyUserPreferences ( ) ; enable ( true ) ; }
void setRepository ( org.eclipse.jgit.lib.Repository r , com.google.gerrit.reviewdb.Project.NameKey projectKey ) { this . db = r ; this . projectKey = projectKey ; }
public java.util.List < com.google.gerrit.extensions.common.ChangeInfo > submittedTogether ( java.util.EnumSet < com.google.gerrit.extensions.client.SubmittedTogetherOption > o ) throws com.google.gerrit.extensions.restapi.RestApiException { throw new com.google.gerrit.extensions.restapi.NotImplementedException ( ) ; }
private static java.lang.String format ( final java.lang.String name , final java.lang.String email ) { try { return new com.google.gerrit.server.mail.Address ( name , email ) . toHeaderString ( ) ; } catch ( java.io.UnsupportedEncodingException e ) { throw new java.lang.RuntimeException ( "Cannot encode address" , e ) ; } }
com.google.gerrit.extensions.common.WebLinkInfo getPathSetWebLink ( final java.lang.String projectName , final java.lang.String commit ) ;
protected void configureServlets ( ) { install ( new com.ericsson.gerrit.plugins.highavailability.forwarder.rest.RestForwarderServletModule ( ) ) ; }
public void onSuccess ( final java.lang.Object result ) { com.google.gerrit.client.Gerrit.display ( view ) ; }
public com.google.common.collect.ImmutableListMultimap < com.google.gerrit.reviewdb.client.RevId , com.google.gerrit.reviewdb.client.PatchLineComment > getDraftComments ( com.google.gerrit.reviewdb.client.Account.Id author ) throws com.google.gwtorm.server.OrmException { loadDraftComments ( author ) ; return draftCommentNotes.getComments ( ) ; }
protected void assertIsAdministrator ( ) throws com.google.gerrit.server.ssh.Failure { if ( ! ( com.google.gerrit.client.rpc.Common.getGroupCache ( ) . isAdministrator ( getAccountId ( ) ) ) ) { throw new com.google.gerrit.server.ssh.Failure ( 1 , "fatal: Not a Gerrit administrator" ) ; } }
public void onSuccess ( final com.google.gerrit.common.data.PatchSetDetail result ) { loadInfoTable ( result ) ; loadActionPanel ( result ) ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { final java.util.HashSet < com.google.gerrit.reviewdb.RefRight.Key > refRightIds = rights.getRefRightIdsChecked ( ) ; doDeleteRefRights ( refRightIds ) ; }
protected void configure ( ) { bind ( com.google.gerrit.server.restapi.access.AccessCollection.class ) ; com.google.gerrit.extensions.registration.DynamicMap.mapOf ( binder ( ) , com.google.gerrit.server.restapi.access.AccessResource.ACCESS_KIND ) ; }
public java.lang.String intercept ( java.lang.String in ) { if ( pattern.matcher ( in ) . matches ( ) ) { return in ; } com.googlesource.gerrit.plugins.readonly.DisableCommandInterceptor.log.warn ( ( "Disabling command: " + in ) ) ; return ( pluginName ) + " disable" ; }
public com.google.gerrit.client.reviewdb.AccountAgreement.Status getStatus ( ) { return com.google.gerrit.client.reviewdb.AccountAgreement.Status.forCode ( status ) ; }
public com.google.gerrit.server.group.ListMembers setRecursive ( boolean recursive ) { this . recursive = recursive ; return this ; }
public com.google.gerrit.client.diff.DiffApi intraline ( boolean intraline ) { if ( intraline ) { call.addParameterTrue ( "intraline" ) ; } return this ; }
boolean setToRetry ( ) { retrying = true ; ( retryCount ) ++ ; return ( retryCount ) <= ( maxRetries ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { toggleShowIntraline ( ) ; }
public void movePointerTo ( final com.google.gerrit.client.reviewdb.Patch.Key k ) { myTable.movePointerTo ( k ) ; }
public static com.google.gitiles.GitilesView getView ( javax.servlet.http.HttpServletRequest req ) { return ( ( com.google.gitiles.GitilesView ) ( req.getAttribute ( com.google.gitiles.ViewFilter.VIEW_ATTRIBUTE ) ) ) ; }
private org.eclipse.jgit.lib.ObjectId getDestRef ( com.google.gerrit.server.notedb.ChangeNotes notes ) throws java.lang.Exception { return serverSideTestRepo.getRepository ( ) . exactRef ( notes.getChange ( ) . getDest ( ) . get ( ) ) . getObjectId ( ) ; }
public com.google.gerrit.server.account.AccountInfo apply ( com.google.gerrit.server.group.MemberResource rsrc ) throws com.google.gwtorm.server.OrmException { com.google.gerrit.server.account.AccountInfo.Loader loader = infoFactory.create ( true ) ; com.google.gerrit.server.account.AccountInfo info = loader.get ( rsrc.getMember ( ) . getAccountId ( ) ) ; loader.fill ( ) ; return info ; }
public com.google.common.collect.SetMultimap < com.google.gerrit.server.notedb.ReviewerState , com.google.gerrit.reviewdb.client.Account.Id > reviewers ( ) throws com.google.gwtorm.server.OrmException { return approvalsUtil.getReviewers ( notes ( ) , approvals ( ) ) ; }
public void onValueChange ( com.google.gwt.event.logical.shared.ValueChangeEvent < java.lang.Boolean > event ) { if ( event.getValue ( ) ) { scriptSettings.setContext ( com.google.gerrit.client.reviewdb.AccountGeneralPreferences.WHOLE_FILE_CONTEXT ) ; } else { initContextLines ( ) ; } refresh ( false ) ; }
protected void configureServlets ( ) { filter ( "/*" ) . through ( com.google.gerrit.server.http.RequestCleanupFilter.class ) ; filter ( "/*" ) . through ( com.google.gerrit.server.http.UrlRewriteFilter.class ) ; }
boolean isTokenValid ( final java.lang.String keyIn ) { return ( isSignedIn ( ) ) && ( key.token.equals ( keyIn ) ) ; }
public void onDoubleClick ( com.google.gwt.event.dom.client.DoubleClickEvent event ) { if ( headerSideB.isFile ( ) ) { createFileCommentEditorOnSideB ( ) ; } }
public void onSelection ( final com.google.gwt.event.logical.shared.SelectionEvent < java.lang.Integer > event ) { setToken ( tabTokens.get ( event.getSelectedItem ( ) ) ) ; }
private static java.lang.String newName ( com.google.gerrit.server.patch.PatchListEntry entry ) { switch ( entry.getChangeType ( ) ) { case DELETED : return null ; case ADDED : case MODIFIED : case COPIED : case RENAMED : case REWRITE : default : return entry.getNewName ( ) ; } }
public void invalidate ( java.lang.Object key ) { if ( key instanceof java.lang.String ) { deleteFile ( dir.resolve ( ( ( java.lang.String ) ( key ) ) ) ) ; } }
public com.googlecode.prolog_cafe.lang.Operation exec ( com.googlecode.prolog_cafe.lang.Prolog engine ) { engine.setB0 ( ) ; com.googlecode.prolog_cafe.lang.Term a1 ; a1 = arg1 ; if ( ! ( a1.unify ( engine.getException ( ) , engine.trail ) ) ) return engine.fail ( ) ; return cont ; }
public void doChangeRestoredHook ( com.google.gerrit.reviewdb.client.Change change , com.google.gerrit.reviewdb.client.Account account , java.lang.String reason , com.google.gerrit.reviewdb.server.ReviewDb db ) { }
public void deleteBranchByUserWithForcePushPermission ( ) throws java.lang.Exception { grantForcePush ( ) ; setApiUser ( user ) ; assertDeleteSucceeds ( testBranch ) ; }
boolean isNeedUpgrade ( ) { for ( java.lang.String name : com.google.gerrit.pgm.init.UpgradeFrom2_0_x.etcFiles ) { if ( java.nio.file.Files.exists ( site_path.resolve ( name ) ) ) { return true ; } } return false ; }
protected void doGet ( javax.servlet.http.HttpServletRequest request , javax.servlet.http.HttpServletResponse response ) throws java.io.IOException , javax.servlet.ServletException { handleRequest ( request.getPathInfo ( ) , request , response , logger ) ; }
protected abstract void display ( final com.google.gerrit.client.groups.GroupInfo group , final boolean canModify ) ;
public java.util.List < com.google.gerrit.common.data.GroupDetail > call ( ) throws com.google.gerrit.common.errors.NoSuchGroupException , com.google.gwtorm.client.OrmException { final com.google.gerrit.server.account.VisibleGroups visibleGroups = visibleGroupsFactory.create ( ) ; return visibleGroups.get ( user ) . getGroups ( ) ; }
public void copyInReviewDb ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.server.project.ChangeControl ctl , com.google.gerrit.reviewdb.client.PatchSet ps , @ com.google.gerrit.common.Nullable org.eclipse.jgit.revwalk.RevWalk rw , @ com.google.gerrit.common.Nullable org.eclipse.jgit.lib.Config repoConfig ) throws com.google.gwtorm.server.OrmException { copyInReviewDb ( db , ctl , ps , rw , repoConfig , java.util.Collections.emptyList ( ) ) ; }
void onLogin ( ) { async.append ( log ( ( "LOGIN FROM " + ( session.get ( ) . getRemoteAddressAsString ( ) ) ) ) ) ; audit ( "0" , "LOGIN" , new java.lang.String [ ] { } ) ; }
public com.google.gerrit.common.data.ReviewerResult call ( ) throws java.lang.Exception { com.google.gerrit.common.data.ReviewerResult result = addReviewerFactory.create ( changeId , reviewers , confirmed ) . call ( ) ; result.setChange ( changeDetailFactory.create ( changeId ) . call ( ) ) ; return result ; }
public void onSuccess ( com.google.gerrit.common.data.ChangeDetail result ) { if ( redirect ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( result.getChange ( ) . getId ( ) ) ) ; } else { changeScreen.update ( result ) ; } }
private static com.google.gerrit.server.account.AccountState newState ( com.google.gerrit.reviewdb.client.Account account ) { return com.google.gerrit.server.account.AccountState.forAccount ( new com.google.gerrit.server.config.AllUsersName ( com.google.gerrit.server.config.AllUsersNameProvider.DEFAULT ) , account ) ; }
private boolean canUpload ( ) { return ( projectControl.controlForRef ( ( "refs/for/" + ( refName ) ) ) . canPerform ( Permission.PUSH ) ) && ( isProjectStatePermittingWrite ( ) ) ; }
public void testFindInDeleteGap ( ) { com.google.gerrit.client.diff.LineMapper mapper = new com.google.gerrit.client.diff.LineMapper ( ) ; mapper.appendDelete ( 10 ) ; org.junit.Assert.assertEquals ( new com.google.gerrit.client.diff.LineMapper.LineOnOtherInfo ( ( - 1 ) , false ) , mapper.lineOnOther ( DisplaySide.A , 9 ) ) ; }
com.google.gitiles.doc.Navbar setMarkdown ( com.google.gitiles.doc.MarkdownConfig cfg , byte [ ] md ) { if ( ( md != null ) && ( ( md.length ) > 0 ) ) { parse ( cfg , org.eclipse.jgit.util.RawParseUtils.decode ( md ) ) ; } return this ; }
private static com.google.gerrit.server.query.change.QueryOptions options ( int start , int limit ) { return com.google.gerrit.server.query.change.QueryOptions.create ( com.google.gerrit.server.index.IndexRewriterTest.CONFIG , start , limit , com.google.common.collect.ImmutableSet.< java.lang.String > of ( ) ) ; }
public java.util.Collection < com.google.gerrit.reviewdb.RefRight > getRefRights ( final com.google.gerrit.common.data.ApprovalType at ) { return getRefRights ( com.google.gerrit.server.workflow.FunctionState.id ( at ) ) ; }
private void log ( final int rc ) { if ( logged.compareAndSet ( false , true ) ) { log.onExecute ( cmd , rc , ctx.getSession ( ) ) ; } }
protected void doGet ( javax.servlet.http.HttpServletRequest req , javax.servlet.http.HttpServletResponse rsp ) { if ( unhealthyFile.exists ( ) ) { sendError ( rsp , javax.servlet.http.HttpServletResponse.SC_SERVICE_UNAVAILABLE ) ; return ; } rsp.setStatus ( javax.servlet.http.HttpServletResponse.SC_NO_CONTENT ) ; }
private static boolean isNameAlreadyUsed ( final java.lang.Throwable caught ) { return ( caught instanceof com.google.gwtjsonrpc.client.RemoteJsonException ) && ( caught.getMessage ( ) . startsWith ( NameAlreadyUsedException.MESSAGE ) ) ; }
protected java.io.Writer startRenderText ( javax.servlet.http.HttpServletRequest req , javax.servlet.http.HttpServletResponse res , java.lang.String contentType ) throws java.io.IOException { setApiHeaders ( res , contentType ) ; return newWriter ( res ) ; }
public void go ( ) { com.google.gerrit.client.Dispatcher.patch ( getTargetHistoryToken ( ) , patchKey , patchIndex , parentPatchTable ) ; }
protected void configure ( ) { install ( new com.google.gerrit.rules.PrologModule.EnviromentModule ( ) ) ; bind ( PrologEnvironment.Args.class ) ; }
private void apply ( com.google.gerrit.server.index.ChangeIndex i , com.google.gerrit.server.query.change.ChangeData cd ) throws java.io.IOException { if ( delete ) { i.delete ( cd ) ; } else { i.replace ( cd ) ; } }
public boolean isAuthRequired ( ) { return true ; }
public void review ( com.google.gerrit.extensions.api.changes.ReviewInput in ) throws com.google.gerrit.extensions.restapi.RestApiException { try { review.apply ( revision , in ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot post review" , e ) ; } }
public boolean canSeeGroup ( com.google.gerrit.reviewdb.AccountGroup.Id id ) { return canSeeMembers ( ) ; }
public void onHeadUpdated ( com.google.gerrit.extensions.events.HeadUpdatedListener.Event event ) { for ( org.eclipse.jgit.transport.URIish uri : getURIs ( new com.google.gerrit.reviewdb.client.Project.NameKey ( event.getProjectName ( ) ) , FilterType.ALL ) ) { updateHead ( uri , event.getNewHeadName ( ) ) ; } }
public com.google.gerrit.server.notedb.ChangeUpdate create ( com.google.gerrit.reviewdb.client.Change change ) { return create ( change , serverIdent.getWhen ( ) ) ; }
public java.lang.Iterable < com.google.gerrit.server.query.change.ChangeData > byCommitsOnBranchNotMerged ( com.google.gerrit.reviewdb.client.Branch.NameKey branch , java.util.List < java.lang.String > hashes ) throws com.google.gwtorm.server.OrmException { return byCommitsOnBranchNotMerged ( branch , hashes , indexConfig.maxPrefixTerms ( ) ) ; }
public void createDraftChangeWhenDraftsNotAllowed ( ) throws java.lang.Exception { com.google.common.truth.TruthJUnit.assume ( ) . that ( isAllowDrafts ( ) ) . isFalse ( ) ; com.google.gerrit.acceptance.PushOneCommit.Result r = createDraftChange ( ) ; r.assertErrorStatus ( "draft workflow is disabled" ) ; }
public void onSignIn ( ) { if ( refreshOnSignIn ) { refresh ( ) ; } if ( ( starChange ) != null ) { starChange.setVisible ( true ) ; } }
public static com.google.gerrit.server.git.ProjectConfig read ( com.google.gerrit.server.git.MetaDataUpdate update , org.eclipse.jgit.lib.ObjectId id ) throws java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { com.google.gerrit.server.git.ProjectConfig r = new com.google.gerrit.server.git.ProjectConfig ( update.getProjectName ( ) ) ; r.load ( update , id ) ; return r ; }
public void getDiffPreferencesOfNonExistingAccount_NotFound ( ) throws java.lang.Exception { adminSession.get ( "/accounts/non-existing/preferences.diff" ) . assertNotFound ( ) ; }
com.google.gerrit.server.patch.DiffSummary getDiffSummary ( com.google.gerrit.reviewdb.client.Change change , com.google.gerrit.reviewdb.client.PatchSet patchSet ) throws com.google.gerrit.server.patch.PatchListNotAvailableException ;
public com.google.gerrit.reviewdb.client.Account run ( com.google.gerrit.reviewdb.server.ReviewDb db ) throws com.google.gwtorm.server.OrmException { return db.accounts ( ) . get ( currentUser.get ( ) . getAccountId ( ) ) ; }
private static boolean correctUser ( java.lang.String user , com.google.gerrit.httpd.WebSession session ) { com.google.gerrit.server.account.externalids.ExternalId.Key id = session.getLastLoginExternalId ( ) ; return ( id != null ) && ( id.equals ( ExternalId.Key.create ( com.google.gerrit.server.account.externalids.ExternalId.SCHEME_GERRIT , user ) ) ) ; }
protected void assertBadQuery ( com.google.gerrit.extensions.api.changes.Changes.QueryRequest query ) throws java.lang.Exception { try { query.get ( ) ; org.junit.Assert.fail ( ( "expected BadRequestException for query: " + query ) ) ; } catch ( com.google.gerrit.extensions.restapi.BadRequestException e ) { } }
public void onSuccess ( final com.google.gerrit.client.groups.GroupInfo result ) { com.google.gwt.user.client.History.newItem ( com.google.gerrit.client.Dispatcher.toGroup ( result.getGroupId ( ) , AccountGroupScreen.MEMBERS ) ) ; }
public static void getHttpPassword ( java.lang.String account , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.rpc.NativeString > cb ) { com.google.gerrit.client.account.AccountApi.accounts ( ) . id ( account ) . view ( "password.http" ) . get ( cb ) ; }
public com.google.common.collect.SetMultimap < com.google.gerrit.server.notedb.ReviewerState , com.google.gerrit.reviewdb.client.Account.Id > reviewers ( ) throws com.google.gwtorm.server.OrmException { return com.google.gerrit.server.ApprovalsUtil.getReviewers ( allApprovals ( ) ) ; }
public void delete ( com.google.gerrit.reviewdb.client.Change.Id id ) { throw new java.lang.UnsupportedOperationException ( ) ; }
protected void setDateText ( final java.lang.String dateText ) { header.setText ( 0 , 3 , dateText ) ; }
public void upsert ( java.lang.Iterable < T > instances ) throws com.google.gwtorm.client.OrmException { for ( T obj : instances ) { upsertOne ( obj , false ) ; } }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > replace ( com.google.gerrit.server.query.change.ChangeData cd ) throws java.io.IOException { return com.google.common.util.concurrent.Futures.immediateFuture ( null ) ; }
public void addReviewers ( final java.util.Collection < com.google.gerrit.client.reviewdb.Account.Id > cc ) { reviewers.addAll ( cc ) ; }
public final native boolean allowDrafts ( ) ;
public void setReadyForReview ( java.lang.String message ) throws com.google.gerrit.extensions.restapi.RestApiException { try { setReady.apply ( change , new com.google.gerrit.server.change.WorkInProgressOp.Input ( message ) ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot set ready for review state" , e ) ; } }
private static java.util.Date parseDate ( java.lang.String str ) throws java.lang.Exception { return new java.text.SimpleDateFormat ( "yyyy-MM-dd HH:mm:ss Z" ) . parse ( str ) ; }
public java.util.Set < com.googlesource.gerrit.plugins.github.git.GHTeam > getTeams ( ) throws java.io.IOException { return ghRepository.getTeams ( ) ; }
public void onOk ( ) { doSetUserName ( ) ; }
private static com.google.gerrit.common.data.PermissionRule grant ( com.google.gerrit.server.project.ProjectConfig project , java.lang.String permissionName , com.google.gerrit.common.data.PermissionRule rule , java.lang.String ref ) { return com.google.gerrit.server.project.testing.Util.grant ( project , permissionName , rule , ref , false ) ; }
public java.util.List < com.google.gerrit.extensions.common.AccountInfo > members ( boolean recursive ) throws com.google.gerrit.extensions.restapi.RestApiException { listMembers.setRecursive ( recursive ) ; try { return listMembers.apply ( rsrc ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot list group members" , e ) ; } }
public void getNamePartsExtractsParts ( ) { com.google.common.truth.Truth.assertThat ( com.google.gerrit.index.SchemaUtil.getNameParts ( "" ) ) . isEmpty ( ) ; com.google.common.truth.Truth.assertThat ( com.google.gerrit.index.SchemaUtil.getNameParts ( "foO-bAr_Baz a.b@c/d" ) ) . containsExactly ( "foo" , "bar" , "baz" , "a" , "b" , "c" , "d" ) ; }
public static < T extends java.lang.Throwable > void throwIfNotStaleFileHandle ( T e ) throws T { if ( ! ( com.googlesource.gerrit.plugins.events.fsstore.Nfs.isStaleFileHandleInCausalChain ( e ) ) ) { throw e ; } }
public void testCreateSchema_DefaultAccess_AnonymousUsers ( ) throws com.google.gwtorm.client.OrmException { db.create ( ) ; final com.google.gerrit.reviewdb.SystemConfig config = db.getSystemConfig ( ) ; assertDefaultRight ( "refs/*" , config.anonymousGroupId , ApprovalCategory.READ , 1 , 1 ) ; }
protected void onLoad ( ) { super . onLoad ( ) ; com.google.gerrit.client.changes.ChangeList.next ( query , start , pageSize , loadCallback ( ) ) ; }
private void writeError ( java.lang.String msg ) { try { err.write ( msg.getBytes ( com.googlesource.gerrit.plugins.verifystatus.ENC ) ) ; } catch ( java.io.IOException e ) { } }
protected abstract java.util.concurrent.Callable < ? > indexTask ( com.google.gerrit.server.query.change.ChangeData cd ) ;
private org.eclipse.jgit.transport.RemoteSession connect ( org.eclipse.jgit.transport.URIish uri ) throws org.eclipse.jgit.errors.TransportException { return sshSessionFactoryProvider.get ( ) . getSession ( uri , null , FS.DETECTED , com.googlesource.gerrit.plugins.replication.ReplicationQueue.SSH_REMOTE_TIMEOUT ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { upToChange ( true ) . run ( ) ; }
public java.util.Map < java.lang.String , java.lang.String [ ] > getParameterMap ( ) { return java.util.Collections.unmodifiableMap ( com.google.common.collect.Maps.transformValues ( parameters.asMap ( ) , ( vs ) -> vs.toArray ( new java.lang.String [ 0 ] ) ) ) ; }
public org.kohsuke.github.GitHub getHub ( ) throws java.io.IOException { return org.kohsuke.github.GitHub.connectUsingOAuth ( config.gitHubApiUrl , token.accessToken ) ; }
public com.google.gerrit.server.notedb.ChangeNotes getNotes ( ) { com.google.gerrit.server.notedb.ChangeNotes n = ctl.getNotes ( ) ; com.google.common.base.Preconditions.checkNotNull ( n ) ; return n ; }
public java.lang.String getSqlType ( final com.google.gwtorm.schema.ColumnModel column , final com.google.gwtorm.schema.sql.SqlDialect dialect ) { return ( dialect.getSqlTypeName ( getSqlTypeConstant ( ) ) ) + " DEFAULT 0 NOT NULL" ; }
public void testGcWithoutCapability_Error ( ) throws com.google.gwtorm.server.OrmException , com.jcraft.jsch.JSchException , java.io.IOException { com.google.gerrit.acceptance.SshSession s = new com.google.gerrit.acceptance.SshSession ( server , accounts.create ( "user" , "user@example.com" , "User" ) ) ; s.exec ( "gerrit gc --all" ) ; assertError ( "Capability runGC is required to access this resource" , s.getError ( ) ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { upToChange ( true ) . run ( ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { if ( ( event.getNativeEvent ( ) . getCharCode ( ) ) == 0 ) { Window.Location.reload ( ) ; return ; } topic.onEdit ( ) ; }
private com.google.gerrit.server.query.change.InternalChangeQuery query ( ) { java.util.Set < java.lang.String > fields = com.google.common.collect.ImmutableSet.of ( ChangeField.CHANGE.getName ( ) , ChangeField.PATCH_SET.getName ( ) , ChangeField.REVIEWER.getName ( ) ) ; return queryProvider.get ( ) . setRequestedFields ( fields ) ; }
public void testGetPeopleAccess ( ) throws java.lang.Exception { final com.google.gwtorm.data.PhoneBookDb schema = open ( ) ; assertNotNull ( schema.people ( ) ) ; assertEquals ( "people" , schema.people ( ) . getRelationName ( ) ) ; }
private void setDefaultFields ( javax.servlet.FilterConfig filterConfig ) throws javax.servlet.ServletException { setDefaultConfig ( filterConfig ) ; setDefaultRenderer ( filterConfig ) ; setDefaultUrls ( ) ; setDefaultAccess ( ) ; setDefaultVisbilityCache ( ) ; setDefaultTimeCache ( ) ; setDefaultBlameCache ( ) ; setDefaultGitwebRedirect ( ) ; }
public void enable ( ) throws com.google.gerrit.extensions.restapi.RestApiException { enable.apply ( resource , new com.google.gerrit.extensions.common.Input ( ) ) ; }
private com.google.gerrit.server.patch.PatchListKey keyFor ( com.google.gerrit.extensions.client.DiffPreferencesInfo.Whitespace whitespace ) { if ( ( parentNum ) < 0 ) { return com.google.gerrit.server.patch.PatchListKey.againstCommit ( aId , bId , whitespace ) ; } return com.google.gerrit.server.patch.PatchListKey.againstParentNum ( ( ( parentNum ) + 1 ) , bId , whitespace ) ; }
public void onFailure ( final java.lang.Throwable caught ) { super . onFailure ( caught ) ; enableRetryDiscovery ( ) ; }
private static boolean isConfig ( final org.eclipse.jgit.transport.ReceiveCommand cmd ) { return cmd.getRefName ( ) . equals ( RefNames.REFS_CONFIG ) ; }
private static com.google.gerrit.server.change.RebaseUtil.Base create ( com.google.gerrit.server.notedb.ChangeNotes notes , com.google.gerrit.reviewdb.client.PatchSet ps ) { if ( notes == null ) { return null ; } return new com.google.gerrit.server.change.AutoValue_RebaseUtil_Base ( notes , ps ) ; }
private com.google.gerrit.gpg.testing.TestKey add ( com.google.gerrit.gpg.testing.TestKey k ) { store.add ( k.getPublicKeyRing ( ) ) ; return k ; }
private com.google.gerrit.server.account.AuthResult auth ( com.google.gerrit.server.account.AccountState account ) { if ( account != null ) { return new com.google.gerrit.server.account.AuthResult ( account.getAccount ( ) . getId ( ) , null , false ) ; } return null ; }
public void setUpConfig ( ) throws java.lang.Exception { config.setInt ( "index" , null , "maxPages" , 10 ) ; }
static void deleteSessionCookie ( ) { com.google.gerrit.client.Gerrit.myAccount = null ; com.google.gerrit.client.Gerrit.myAccountDiffPref = null ; com.google.gerrit.client.Gerrit.xsrfToken = null ; com.google.gerrit.client.Gerrit.refreshMenuBar ( ) ; com.google.gwt.user.client.Cookies.removeCookie ( "GerritAccount" ) ; }
public org.eclipse.jgit.lib.ObjectInserter getInserter ( ) throws java.io.IOException { return getRepoView ( ) . getInserterWrapper ( ) ; }
public java.util.Map < java.lang.String , java.util.List < com.google.gerrit.extensions.common.CommentInfo > > drafts ( ) throws com.google.gerrit.extensions.restapi.RestApiException { throw new com.google.gerrit.extensions.restapi.NotImplementedException ( ) ; }
public void setName ( java.lang.String name ) { this . name = name ; }
public org.eclipse.jgit.lib.ObjectId insert ( int type , byte [ ] data , int off , int len ) { return insert ( com.google.gerrit.server.git.InsertedObject.create ( type , data , off , len ) ) ; }
long getTimeoutMillis ( @ com.google.gerrit.server.config.GerritServerConfig final org.eclipse.jgit.lib.Config cfg ) { return com.google.gerrit.server.config.ConfigUtil.getTimeUnit ( cfg , "receive" , null , "timeout" , java.util.concurrent.TimeUnit.MINUTES.toMillis ( 4 ) , java.util.concurrent.TimeUnit.MILLISECONDS ) ; }
public void onSuccess ( com.google.gwt.core.client.JavaScriptObject result ) { pendingGroup = null ; removeUI ( ) ; }
public void setSubmitRecords ( com.google.gerrit.server.project.SubmitRuleOptions options , java.util.List < com.google.gerrit.common.data.SubmitRecord > records ) { submitRecords.put ( options , records ) ; }
public abstract com.google.gerrit.server.git.ChangeReportFormatter.Input.Builder setIsEdit ( java.lang.Boolean val ) ;
public void run ( ) throws java.lang.Exception { processor.setOutput ( out , QueryProcessor.OutputFormat.TEXT ) ; parseCommandLine ( ) ; verifyCommandLine ( ) ; processor.query ( com.google.gerrit.sshd.commands.Query.join ( query , " " ) ) ; }
public void beforeTest ( ) throws java.lang.Exception { if ( com.google.gerrit.testutil.GerritServerTests.isNoteDbTestEnabled ( ) ) { com.google.gerrit.server.notedb.ConfigNotesMigration.setAllEnabledConfig ( config ) ; } }
public void testSetForwardedEvent ( ) throws java.lang.Exception { com.ericsson.gerrit.plugins.multimaster.Context.setForwardedEvent ( true ) ; try { com.google.common.truth.Truth.assertThat ( com.ericsson.gerrit.plugins.multimaster.Context.isForwardedEvent ( ) ) . isTrue ( ) ; } finally { com.ericsson.gerrit.plugins.multimaster.Context.unsetForwardedEvent ( ) ; } }
public final native java.lang.String set_name ( java.lang.String n ) ;
protected void setCurrentUrl ( com.google.gerrit.client.download.DownloadUrlLink link ) { widget.setVisible ( true ) ; copyLabel.setText ( ( "git pull " + ( link.getUrlData ( ) ) ) ) ; }
static com.google.gerrit.client.reviewdb.AccountExternalId newInstance ( int rawOldAccountId , java.lang.String rawExternalId ) { return new com.google.gerrit.client.reviewdb.AccountExternalId ( new com.google.gerrit.client.reviewdb.Account.Id ( rawOldAccountId ) , new com.google.gerrit.client.reviewdb.AccountExternalId.Key ( rawExternalId ) ) ; }
public int hashCode ( ) { return java.util.Objects.hash ( user , repositoryName , objectId ) ; }
public static java.lang.String stripAndAddCharsAtEnd ( java.lang.String str , java.lang.String chs ) { return ( org.apache.commons.lang.StringUtils.stripEnd ( str , chs ) ) + chs ; }
public void onSuccess ( final com.google.gerrit.client.reviewdb.Account result ) { if ( result != null ) { com.google.gerrit.client.Gerrit.myAccount = result ; com.google.gerrit.client.Gerrit.applyUserPreferences ( ) ; } else { com.google.gwt.user.client.Cookies.removeCookie ( com.google.gerrit.client.Gerrit.ACCOUNT_COOKIE ) ; } onModuleLoad3 ( ) ; }
public static com.google.gerrit.index.query.Predicate < com.google.gerrit.server.account.AccountState > emailIncludingSecondaryEmails ( java.lang.String email ) { return new com.google.gerrit.server.query.account.AccountPredicates.AccountPredicate ( com.google.gerrit.server.index.account.AccountField.EMAIL , AccountQueryBuilder.FIELD_EMAIL , email.toLowerCase ( ) ) ; }
private java.lang.String urlEdit2 ( ) { return ( "/changes/" + ( change2.getChangeId ( ) ) ) + "/edit/" ; }
public void onKeyPress ( final com.google.gwt.event.dom.client.KeyPressEvent event ) { if ( ( event.getNativeEvent ( ) . getKeyCode ( ) ) == ( com.google.gwt.event.dom.client.KeyCodes.KEY_ENTER ) ) { event.preventDefault ( ) ; form.submit ( ) ; } }
public void cancel ( ) { if ( ( status.getStatus ( ) ) != ( com.googlesource.gerrit.plugins.github.git.GitJobStatus.Code.SYNC ) ) { return ; } cancelled = true ; status.update ( GitJobStatus.Code.CANCELLED , "Cancelled" , "Cancelled" ) ; rollback ( ) ; }
static java.lang.String getCallerUrl ( ) { return com.google.gwt.core.client.GWT.< com.google.gerrit.client.api.PluginName > create ( com.google.gerrit.client.api.PluginName.class ) . findCallerUrl ( ) ; }
public void httpLink ( ) { com.google.gitiles.doc.MarkdownToHtml md = new com.google.gitiles.doc.MarkdownToHtml ( view , config , "index.md" ) ; java.lang.String url ; url = "http://example.com/foo.html" ; com.google.common.truth.Truth.assertThat ( md.href ( url ) ) . isEqualTo ( url ) ; url = "https://example.com/foo.html" ; com.google.common.truth.Truth.assertThat ( md.href ( url ) ) . isEqualTo ( url ) ; url = "//example.com/foo.html" ; com.google.common.truth.Truth.assertThat ( md.href ( url ) ) . isEqualTo ( url ) ; }
private void wrapChildren ( java.lang.String tag , org.commonmark.node.Node node ) { html.open ( tag ) ; visitChildren ( node ) ; html.close ( tag ) ; }
public void createBranchByAdminCreateReferenceBlocked_Forbidden ( ) throws java.lang.Exception { blockCreateReference ( ) ; assertCreateFails ( testBranch , com.google.gerrit.extensions.restapi.AuthException.class , "create not permitted for refs/heads/test" ) ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { keys.deleteChecked ( ) ; }
public com.google.gerrit.extensions.common.WebLinkInfo getFileWebLink ( java.lang.String projectName , java.lang.String revision , java.lang.String fileName ) { java.lang.String url = getFileUrl ( projectName , revision , fileName , false ) ; return url == null ? null : new com.google.gerrit.extensions.common.WebLinkInfo ( com.googlesource.gerrit.plugins.xdocs.XDocWebLink.PREVIEW , getImageUrl ( ) , url , Target.BLANK ) ; }
public void preDisplay ( final com.google.gerrit.reviewdb.Account result ) { display ( result.getGeneralPreferences ( ) ) ; }
public abstract com.google.gerrit.server.plugins.PluginContentScanner getContentScanner ( ) ;
com.google.gerrit.server.permissions.ProjectControl getProjectControl ( ) { return projectControl ; }
public void visit ( org.pegdown.ast.ExpImageNode node ) { html.open ( "img" ) . attribute ( "src" , node.url ) . attribute ( "title" , node.title ) . attribute ( "alt" , com.google.gitiles.doc.MarkdownUtil.getInnerText ( node ) ) ; }
protected void onInitUI ( ) { super . onInitUI ( ) ; initName ( ) ; initOwner ( ) ; initDescription ( ) ; initMemberList ( ) ; }
public com.google.gerrit.common.data.ParamertizedString.Builder replace ( final java.lang.String name , final java.lang.String value ) { params.put ( name , value ) ; return this ; }
public void flush_Forbidden ( ) throws java.lang.Exception { userRestSession.post ( "/config/server/caches/" , new com.google.gerrit.server.config.PostCaches.Input ( com.google.gerrit.server.config.PostCaches.Operation.FLUSH , java.util.Arrays.asList ( "projects" ) ) ) . assertForbidden ( ) ; }
public java.lang.String getCommentLinkName ( ) { java.lang.String ret ; ret = getPluginConfigString ( "commentlink" ) ; if ( ret == null ) { ret = pluginName ; } return ret ; }
protected void onLoad ( ) { super . onLoad ( ) ; setPageTitle ( AdminConstants.I.plugins ( ) ) ; display ( ) ; }
private java.lang.String newChange ( org.eclipse.jgit.lib.PersonIdent ident ) throws java.lang.Exception { com.google.gerrit.acceptance.PushOneCommit push = pushFactory.create ( db , ident , testRepo , PushOneCommit.SUBJECT , com.google.gerrit.acceptance.edit.ChangeEditIT.FILE_NAME , new java.lang.String ( com.google.gerrit.acceptance.edit.ChangeEditIT.CONTENT_OLD ) ) ; return push.to ( "refs/for/master" ) . getChangeId ( ) ; }
public java.lang.String generate ( ) { java.lang.StringBuilder message ; message = new java.lang.StringBuilder ( ) ; message.append ( "Unsupported event: " ) ; message.append ( this . event.toString ( ) ) ; return message.toString ( ) ; }
public com.google.gerrit.client.rpc.RestApi data ( java.lang.String data ) { contentType = ( com.google.gerrit.client.rpc.RestApi.TEXT_TYPE ) + "; charset=utf-8" ; contentData = data ; return this ; }
public java.util.List < java.lang.String > getAllTeamNames ( ) { return java.util.Collections.emptyList ( ) ; }
private java.lang.String reduceWildcard ( java.lang.String input ) { if ( input.endsWith ( "*" ) ) { wildcardBranch = true ; return input.substring ( 0 , input.indexOf ( "*" ) ) ; } else { wildcardBranch = false ; return input ; } }
private java.lang.Iterable < com.google.gerrit.reviewdb.client.AccountExternalId > getGpgExtIds ( com.google.gerrit.server.account.AccountResource rsrc ) throws com.google.gwtorm.server.OrmException { return com.google.gerrit.gpg.server.GpgKeys.getGpgExtIds ( db.get ( ) , rsrc.getUser ( ) . getAccountId ( ) ) ; }
public boolean canRestore ( ) { return ( canAbandon ( ) ) && ( getRefControl ( ) . canUpload ( ) ) ; }
public void setPassword ( java.lang.String hashed ) { password = hashed ; }
public boolean canRunReceivePack ( ) { return com.google.gerrit.common.CollectionsUtil.isAnyIncludedIn ( receiveGroups , user.getEffectiveGroups ( ) ) ; }
public java.util.Collection < java.lang.String > getHeaders ( java.lang.String name ) { return headers.get ( com.google.common.base.Preconditions.checkNotNull ( name.toLowerCase ( ) ) ) ; }
long getTimeoutMillis ( @ com.google.gerrit.server.config.GerritServerConfig final org.eclipse.jgit.lib.Config cfg ) { return com.google.gerrit.server.config.ConfigUtil.getTimeUnit ( cfg , "receive" , null , "timeout" , java.util.concurrent.TimeUnit.MINUTES.toMillis ( 2 ) , java.util.concurrent.TimeUnit.MILLISECONDS ) ; }
public java.util.List < com.google.gerrit.extensions.common.SshKeyInfo > listSshKeys ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return getSshKeys.apply ( account ) ; } catch ( com.google.gwtorm.server.OrmException | java.io.IOException | org.eclipse.jgit.errors.ConfigInvalidException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot list SSH keys" , e ) ; } }
public com.google.gerrit.server.change.ChangeResource parse ( com.google.gerrit.server.project.ChangeControl control ) { return changeResourceFactory.create ( control ) ; }
public void delete ( ) { com.googlesource.gerrit.plugins.repositoryuse.Ref.log.debug ( java.lang.String.format ( "Deleting Ref: %s, %s" , project , ref ) ) ; com.googlesource.gerrit.plugins.repositoryuse.Ref.table.delete ( this ) ; }
private void setRejectImplicitMerges ( ) throws java.lang.Exception { com.google.gerrit.server.git.ProjectConfig cfg = projectCache.checkedGet ( project ) . getConfig ( ) ; cfg.getProject ( ) . setBooleanConfig ( BooleanProjectConfig.REJECT_IMPLICIT_MERGES , InheritableBoolean.TRUE ) ; saveProjectConfig ( project , cfg ) ; }
private void unblockRead ( ) throws java.lang.Exception { com.google.gerrit.server.project.ProjectConfig pc = projectCache.checkedGet ( project ) . getConfig ( ) ; pc.getAccessSection ( "refs/*" ) . remove ( new com.google.gerrit.common.data.Permission ( com.google.gerrit.common.data.Permission.READ ) ) ; saveProjectConfig ( project , pc ) ; }
public char getOpeningCharacter ( ) { return '{' ; }
protected java.lang.String currentTimeFormatted ( ) { org.eclipse.jgit.lib.PersonIdent p = new org.eclipse.jgit.lib.PersonIdent ( repo.getRepository ( ) ) ; return new com.google.gitiles.DateFormatter ( java.util.Optional.empty ( ) , DateFormatter.Format.ISO ) . format ( p ) ; }
public java.lang.String getHostName ( javax.servlet.http.HttpServletRequest req ) { return com.google.gitiles.TestGitilesUrls.HOST_NAME ; }
private void createGroup ( com.google.gerrit.reviewdb.client.AccountGroup.UUID groupUuid , com.google.gerrit.reviewdb.client.AccountGroup.NameKey groupName ) throws java.lang.Exception { com.google.gerrit.server.group.db.GroupNameNotes groupNameNotes = com.google.gerrit.server.group.db.GroupNameNotes.forNewGroup ( repo , groupUuid , groupName ) ; commit ( groupNameNotes ) ; }
private void visit ( com.google.gitiles.doc.MultiColumnBlock node ) { html.open ( "div" ) . attribute ( "class" , "cols" ) ; visitChildren ( node ) ; html.close ( "div" ) ; }
public void fire ( com.google.gerrit.reviewdb.client.Project.NameKey project , org.eclipse.jgit.lib.RefUpdate refUpdate , org.eclipse.jgit.transport.ReceiveCommand.Type type , com.google.gerrit.reviewdb.client.Account.Id updater ) { fire ( project , refUpdate.getName ( ) , refUpdate.getOldObjectId ( ) , refUpdate.getNewObjectId ( ) , type , util.accountInfo ( updater ) ) ; }
public void onSuccess ( com.google.gerrit.client.info.ChangeInfo result ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( result.legacyId ( ) ) ) ; hide ( ) ; }
public void testUpdateNothing ( ) throws com.google.gwtorm.server.OrmException { createClassUnderTest ( ) . update ( noData ) ; }
private com.googlesource.gerrit.plugins.replication.ReplicationFileBasedConfig loadConfig ( ) throws java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { return new com.googlesource.gerrit.plugins.replication.ReplicationFileBasedConfig ( injector , site , remoteSiteUserFactory , pluginUser , gitRepositoryManager , groupBackend , groupIncludeCache ) ; }
public void onShowView ( ) { if ( ( windowTitle ) != null ) { com.google.gerrit.client.Gerrit.setWindowTitle ( this , windowTitle ) ; } com.google.gerrit.client.Gerrit.updateMenus ( this ) ; com.google.gerrit.client.Gerrit.setQueryString ( null ) ; registerKeys ( ) ; }
protected java.lang.Object getRowItemKey ( final com.google.gerrit.reviewdb.Project item ) { return item.getNameKey ( ) ; }
private java.io.File resolveFile ( javax.servlet.http.HttpServletRequest req ) { return new java.io.File ( site_path , ( ( req.getServletPath ( ) ) + ( req.getPathInfo ( ) ) ) ) ; }
public boolean isIgnoreWhitespace ( ) { return ( settings.getWhitespace ( ) ) != ( com.google.gerrit.reviewdb.AccountDiffPreference.Whitespace.IGNORE_NONE ) ; }
public void setUp ( ) { userId = new com.google.gerrit.reviewdb.client.Account.Id ( 1 ) ; repoManager = new com.google.gerrit.testing.InMemoryRepositoryManager ( ) ; }
private void assertUser ( com.google.gerrit.extensions.common.AccountInfo info , com.google.gerrit.acceptance.TestAccount account ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( info.name ) . isEqualTo ( account.fullName ) ; com.google.common.truth.Truth.assertThat ( info.email ) . isEqualTo ( account.email ) ; com.google.common.truth.Truth.assertThat ( info.username ) . isEqualTo ( account.username ) ; }
public com.google.gerrit.server.patch.IntraLineDiff call ( ) throws java.lang.Exception { return com.google.gerrit.server.patch.IntraLineLoader.compute ( args.aText ( ) , args.bText ( ) , args.edits ( ) ) ; }
public void onRpcComplete ( final com.google.gwtjsonrpc.client.RpcCompleteEvent event ) { if ( ( -- ( activeCalls ) ) == 0 ) { loading.setVisible ( false ) ; } }
public static com.google.gwt.dom.client.Element parse ( com.google.gwtexpui.safehtml.client.SafeHtml html ) { com.google.gwt.dom.client.Element e = com.google.gwt.user.client.DOM.createDiv ( ) ; com.google.gwtexpui.safehtml.client.SafeHtml.setInnerHTML ( e , html ) ; return com.google.gwt.user.client.DOM.getFirstChild ( e ) ; }
void onIntralineDifference ( com.google.gwt.event.logical.shared.ValueChangeEvent < java.lang.Boolean > e ) { prefs.intralineDifference ( java.lang.Boolean.valueOf ( e.getValue ( ) ) ) ; if ( ( view ) != null ) { view.setShowIntraline ( prefs.intralineDifference ( ) ) ; } }
public int hashCode ( ) { return ( ( com.google.gerrit.index.query.IntPredicate.getOperator ( ) . hashCode ( ) ) * 31 ) + ( intValue ) ; }
public static void startIndexService ( ) throws java.lang.InterruptedException , java.util.concurrent.ExecutionException { if ( ( com.google.gerrit.elasticsearch.ElasticQueryChangesTest.nodeInfo ) != null ) { return ; } com.google.gerrit.elasticsearch.ElasticQueryChangesTest.nodeInfo = com.google.gerrit.elasticsearch.ElasticTestUtils.startElasticsearchNode ( ) ; com.google.gerrit.elasticsearch.ElasticTestUtils.createAllIndexes ( com.google.gerrit.elasticsearch.ElasticQueryChangesTest.nodeInfo ) ; }
public com.google.gerrit.reviewdb.client.AccountGroup get ( final com.google.gerrit.reviewdb.client.AccountGroup.UUID uuid ) { want ( uuid ) ; return out.get ( uuid ) ; }
public static java.lang.String nameEmail ( com.google.gerrit.reviewdb.client.Account acct ) { return com.google.gerrit.client.FormatUtil.nameEmail ( com.google.gerrit.client.FormatUtil.asInfo ( acct ) ) ; }
public void setStatisticsEnabled ( boolean enableStatistics ) { self ( ) . setStatisticsEnabled ( enableStatistics ) ; }
public void testUpdateNothing ( ) throws com.google.gwtorm.server.OrmException { classUnderTest.update ( noData ) ; }
public static void permissions ( com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.client.projects.ProjectMap > callback ) { new com.google.gerrit.client.rpc.RestApi ( "/projects/" ) . addParameterRaw ( "type" , "PERMISSIONS" ) . addParameterTrue ( "all" ) . addParameterTrue ( "d" ) . send ( com.google.gerrit.client.rpc.NativeMap.copyKeysIntoChildren ( callback ) ) ; }
public static com.google.gerrit.client.info.AccountPreferencesInfo getUserPreferences ( ) { return com.google.gerrit.client.Gerrit.myPrefs ; }
private java.util.List < com.google.gerrit.server.query.change.ChangeData > byTopicOpen ( java.lang.String topic ) throws com.google.gwtorm.server.OrmException { return com.google.gerrit.server.git.MergeSuperSet.query ( queryProvider.get ( ) ) . byTopicOpen ( topic ) ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { doAddNewInclude ( oracle ) ; }
public void onSuccess ( final com.google.gerrit.client.admin.AccountGroupDetail result ) { enableForm ( true ) ; saveName.setEnabled ( false ) ; saveDesc.setEnabled ( false ) ; display ( result ) ; }
protected void onOpenRow ( final int row ) { com.google.gwt.user.client.History.newItem ( com.google.gerrit.client.Dispatcher.toGroup ( getRowItem ( row ) . getGroupId ( ) ) ) ; }
public void onSuccess ( com.google.gwtjsonrpc.common.VoidResult result ) { com.google.gerrit.client.Gerrit.setAccountDiffPreference ( get ( ) ) ; cb.onSuccess ( result ) ; }
com.googlesource.gerrit.plugins.replication.Destination create ( com.googlesource.gerrit.plugins.replication.DestinationConfiguration config ) { return new com.googlesource.gerrit.plugins.replication.Destination ( injector , config , replicationUserFactory , pluginUser , gitRepositoryManager , permissionBackend , groupBackend , stateLog , groupIncludeCache , eventDispatcher ) ; }
public com.google.gerrit.server.IdentifiedUser create ( final com.google.gerrit.reviewdb.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( AccessPath.UNKNOWN , authConfig , canonicalUrl , realm , accountCache , null , null , id ) ; }
public com.google.gerrit.extensions.api.projects.DashboardApi defaultDashboard ( ) throws com.google.gerrit.extensions.restapi.RestApiException { return dashboard ( com.google.gerrit.server.restapi.project.DashboardsCollection.DEFAULT_DASHBOARD_NAME ) ; }
protected void onOpenRow ( final int row ) { com.google.gwt.user.client.History.newItem ( link ( getRowItem ( row ) ) ) ; }
static com.google.gerrit.server.query.Predicate < com.google.gerrit.server.account.AccountState > equalsName ( java.lang.String name ) { return new com.google.gerrit.server.query.account.AccountPredicates.AccountPredicate ( com.google.gerrit.server.index.account.AccountField.NAME_PART , AccountQueryBuilder.FIELD_NAME , name ) ; }
javax.servlet.http.HttpServlet getPolyGerritUiIndexServlet ( @ com.google.gerrit.server.config.CanonicalWebUrl java.lang.String canonicalUrl , @ com.google.gerrit.server.config.GerritServerConfig org.eclipse.jgit.lib.Config cfg ) throws java.net.URISyntaxException { java.lang.String cdnPath = cfg.getString ( "gerrit" , null , "cdnPath" ) ; return new com.google.gerrit.httpd.raw.IndexServlet ( canonicalUrl , cdnPath ) ; }
public boolean isUseContentMerge ( ) { return getInheritableBoolean ( new com.google.common.base.Function < com.google.gerrit.reviewdb.client.Project , com.google.gerrit.reviewdb.client.Project.InheritableBoolean > ( ) { @ java.lang.Override public com.google.gerrit.reviewdb.client.Project.InheritableBoolean apply ( com.google.gerrit.reviewdb.client.Project input ) { return input.getUseContentMerge ( ) ; } } ) ; }
protected void setupSoyContext ( ) { super . setupSoyContext ( ) ; soyContext.put ( "ownerName" , getNameFor ( change.getOwner ( ) ) ) ; soyContextEmailData.put ( "reviewerNames" , getReviewerNames ( ) ) ; }
protected void submit ( java.lang.String changeId , com.google.gerrit.extensions.api.changes.SubmitInput input ) throws java.lang.Exception { submit ( changeId , input , null , null , true ) ; }
public com.google.gerrit.index.query.DataSource < com.google.gerrit.server.account.AccountState > getSource ( com.google.gerrit.index.query.Predicate < com.google.gerrit.server.account.AccountState > p , com.google.gerrit.index.QueryOptions opts ) throws com.google.gerrit.index.query.QueryParseException { return new com.google.gerrit.elasticsearch.ElasticAccountIndex.QuerySource ( p , opts ) ; }
com.ericsson.gerrit.plugins.multimaster.IndexResponseHandler.IndexResult delete ( java.lang.String endpoint ) throws java.io.IOException { return httpClient.execute ( new org.apache.http.client.methods.HttpDelete ( ( ( url ) + endpoint ) ) , new com.ericsson.gerrit.plugins.multimaster.IndexResponseHandler ( ) ) ; }
public void onActivityCreated ( android.os.Bundle savedInstanceState ) { super . onActivityCreated ( savedInstanceState ) ; setTitle ( getString ( R.string.app_menu_review ) ) ; setHasOptionsMenu ( true ) ; com.google.reviewit.util.TaskObserver.enableProgressBar ( getWindow ( ) ) ; init ( ) ; display ( ) ; }
com.google.gerrit.reviewdb.AccountGroupIncludeAccess accountGroupIncludes ( ) ;
private boolean canUpload ( ) { return ( projectControl.controlForRef ( ( "refs/for/" + ( refName ) ) ) . canPerform ( Permission.PUSH ) ) && ( isProjectStatePermittingWrite ( ) ) ; }
public void setNodeCoherent ( boolean b ) throws java.lang.UnsupportedOperationException { self ( ) . setNodeCoherent ( b ) ; }
public java.util.Set < com.google.gerrit.reviewdb.client.AccountGroup.UUID > parentGroupsOf ( com.google.gerrit.reviewdb.client.AccountGroup.UUID groupId ) ;
private void display ( final com.google.gerrit.client.data.UnifiedPatchDetail detail ) { diffTable.setAccountInfoCache ( detail.getAccounts ( ) ) ; diffTable.display ( detail.getLines ( ) ) ; }
public com.google.gwtorm.server.ResultSet < com.google.gerrit.reviewdb.client.PatchSetApproval > iterateAllEntities ( ) { throw new java.lang.UnsupportedOperationException ( com.google.gerrit.reviewdb.server.DisabledChangesReviewDbWrapper.MSG ) ; }
public void testBadEventAndItIsForwarded ( ) throws java.lang.Exception { setUpMocks ( false ) ; com.ericsson.gerrit.plugins.syncevents.Context.setForwardedEvent ( ) ; eventHandler.onEvent ( event ) ; com.ericsson.gerrit.plugins.syncevents.Context.unsetForwardedEvent ( ) ; org.mockito.Mockito.verifyZeroInteractions ( restSession ) ; }
public void onKeyPress ( final com.google.gwt.event.dom.client.KeyPressEvent event ) { gotoSibling ( ( - 1 ) ) ; }
public com.google.gerrit.index.query.DataSource < com.google.gerrit.server.project.ProjectData > getSource ( com.google.gerrit.index.query.Predicate < com.google.gerrit.server.project.ProjectData > p , com.google.gerrit.index.QueryOptions opts ) throws com.google.gerrit.index.query.QueryParseException { return new com.google.gerrit.lucene.LuceneProjectIndex.QuerySource ( opts , queryBuilder.toQuery ( p ) , new org.apache.lucene.search.Sort ( new org.apache.lucene.search.SortField ( com.google.gerrit.lucene.LuceneProjectIndex.NAME_SORT_FIELD , SortField.Type.STRING , false ) ) ) ; }
public void visit ( org.commonmark.node.IndentedCodeBlock node ) { codeInPre ( null , node.getLiteral ( ) ) ; }
public void onSuccess ( com.google.gerrit.client.change.RelatedChanges.RelatedInfo info ) { if ( ( info.changes ( ) ) != null ) { dependsOn ( info ) ; neededBy ( info ) ; } }
public void testPushForMasterWithHashtagsNoteDbDisabled ( ) throws java.lang.Exception { com.google.common.truth.TruthJUnit.assume ( ) . that ( notesMigration.readChanges ( ) ) . isFalse ( ) ; com.google.gerrit.acceptance.PushOneCommit.Result r = pushTo ( "refs/for/master%hashtag=tag1" ) ; r.assertErrorStatus ( "cannot add hashtags; noteDb is disabled" ) ; }
private void assertCannotRead ( com.google.gerrit.server.project.ProjectControl u ) { com.google.common.truth.Truth.assertThat ( u.isVisible ( ) ) . named ( "cannot read" ) . isFalse ( ) ; }
public com.google.gerrit.extensions.api.projects.ConfigInfo apply ( com.google.gerrit.server.project.ProjectResource rsrc , com.google.gerrit.extensions.api.projects.ConfigInput input ) throws com.google.gerrit.extensions.restapi.RestApiException , com.google.gerrit.server.permissions.PermissionBackendException { permissionBackend.user ( user ) . project ( rsrc.getNameKey ( ) ) . check ( ProjectPermission.WRITE_CONFIG ) ; return apply ( rsrc.getProjectState ( ) , input ) ; }
private java.lang.String createGroup ( java.lang.String name ) throws java.lang.Exception { return createGroup ( name , "Administrators" ) ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { form.submit ( ) ; }
public com.google.gerrit.server.notedb.ChangeNotes getNotes ( ) { return ctl.getNotes ( ) ; }
protected void configure ( ) { com.google.gerrit.extensions.registration.DynamicItem.bind ( binder ( ) , com.google.gerrit.server.events.EventDispatcher.class ) . to ( com.ericsson.gerrit.plugins.highavailability.forwarder.ForwardedAwareEventBroker.class ) ; }
public void run ( ) { widget.setVisible ( true ) ; }
com.google.gerrit.server.permissions.ChangeControl controlFor ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.Change change ) throws com.google.gwtorm.server.OrmException { return changeControlFactory.create ( controlForRef ( change.getDest ( ) ) , db , change.getProject ( ) , change.getId ( ) ) ; }
public void run ( ) { com.google.gerrit.pgm.Daemon.log.info ( "caught shutdown, cleaning up" ) ; if ( ( runId ) != null ) { runFile.delete ( ) ; } manager.stop ( ) ; }
void expandBefore ( int cnt ) { expandSideBefore ( cnt ) ; if ( ( otherBar ) != null ) { otherBar.expandSideBefore ( cnt ) ; } }
protected void upgradeFrom ( com.google.gerrit.server.schema.UpdateUI ui , com.google.gerrit.reviewdb.CurrentSchemaVersion curr , com.google.gerrit.reviewdb.ReviewDb db , boolean toTargetVersion ) throws com.google.gwtorm.client.OrmException { throw new com.google.gwtorm.client.OrmException ( ( ( ( ( "Cannot upgrade from " + ( curr.versionNbr ) ) + "; manually run scripts from" ) + " http://gerrit.googlecode.com/files/schema-upgrades003_019.zip" ) + " and restart." ) ) ; }
public com.google.gerrit.reviewdb.Account getAccount ( ) { return getAccountState ( ) . getAccount ( ) ; }
private boolean canEditSshUserName ( ) { return com.google.gerrit.client.Gerrit.getConfig ( ) . canEdit ( Account.FieldName.USER_NAME ) ; }
public void putReviewer ( com.google.gerrit.reviewdb.client.Account.Id reviewer , com.google.gerrit.server.notedb.ReviewerStateInternal type ) { com.google.common.base.Preconditions.checkArgument ( ( type != ( ReviewerStateInternal.REMOVED ) ) , "invalid ReviewerType" ) ; reviewers.put ( reviewer , type ) ; }
public void onLoad ( com.google.gwt.event.dom.client.LoadEvent event ) { setVisible ( true ) ; }
public void postEvent ( com.google.gerrit.reviewdb.client.Branch.NameKey branchName , com.google.gerrit.server.events.RefEvent event ) { }
static void initialize ( org.eclipse.jgit.lib.Config cfg ) { cfg.setString ( com.googlesource.gerrit.plugins.xdocs.XDocGlobalConfig.SECTION_FORMATTER , AsciidoctorFormatter.NAME , com.googlesource.gerrit.plugins.xdocs.XDocGlobalConfig.KEY_EXT , "adoc" ) ; cfg.setString ( com.googlesource.gerrit.plugins.xdocs.XDocGlobalConfig.SECTION_FORMATTER , MarkdownFormatter.NAME , com.googlesource.gerrit.plugins.xdocs.XDocGlobalConfig.KEY_MIME_TYPE , "text/x-markdown" ) ; cfg.setString ( com.googlesource.gerrit.plugins.xdocs.XDocGlobalConfig.SECTION_FORMATTER , PlainTextFormatter.NAME , com.googlesource.gerrit.plugins.xdocs.XDocGlobalConfig.KEY_MIME_TYPE , "text/plain" ) ; }
public java.util.List < com.google.gerrit.extensions.common.ChangeInfo > submittedTogether ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return submittedTogether.apply ( change ) ; } catch ( java.io.IOException | com.google.gwtorm.server.OrmException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot query submittedTogether" , e ) ; } }
private static com.google.gerrit.httpd.auth.openid.SignInMode signInMode ( final javax.servlet.http.HttpServletRequest req ) { try { return com.google.gerrit.httpd.auth.openid.SignInMode.valueOf ( req.getParameter ( com.google.gerrit.httpd.auth.openid.OpenIdServiceImpl.P_MODE ) ) ; } catch ( java.lang.RuntimeException e ) { return SignInMode.SIGN_IN ; } }
public static boolean isOAuthLogout ( javax.servlet.http.HttpServletRequest request ) { return ( request.getRequestURI ( ) . indexOf ( GitHubOAuthConfig.GERRIT_LOGOUT ) ) >= 0 ; }
private com.google.gerrit.server.patch.PatchListKey keyFor ( com.google.gerrit.extensions.client.DiffPreferencesInfo.Whitespace whitespace ) { if ( ( parentNum ) < 0 ) { return com.google.gerrit.server.patch.PatchListKey.againstCommit ( aId , bId , whitespace ) ; } return com.google.gerrit.server.patch.PatchListKey.againstParentNum ( ( ( parentNum ) + 1 ) , bId , whitespace ) ; }
public com.google.gerrit.server.change.PatchSetInserter setCopyApprovals ( boolean copyApprovals ) { this . copyApprovals = copyApprovals ; return this ; }
private static boolean isVerified ( com.google.gerrit.reviewdb.client.LabelId id ) { return "Verified" . equalsIgnoreCase ( id.get ( ) ) ; }
public void publish ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { publish.apply ( revision , new com.google.gerrit.server.change.PublishDraftPatchSet.Input ( ) ) ; } catch ( com.google.gwtorm.server.OrmException | java.io.IOException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot publish draft patch set" , e ) ; } }
public void execute ( com.google.gerrit.server.git.BatchUpdate.Listener listener ) throws com.google.gerrit.extensions.restapi.RestApiException , com.google.gerrit.server.git.UpdateException { com.google.gerrit.server.git.BatchUpdate.execute ( com.google.common.collect.ImmutableList.of ( this ) , listener ) ; }
protected java.lang.Object createServiceHandle ( ) throws java.lang.Exception { return this ; }
public java.lang.String encode ( java.lang.String e ) { e = com.google.gwt.http.client.URL.encodeComponent ( e ) ; e = fixPathImpl ( e ) ; e = fixColonImpl ( e ) ; return e ; }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > evictAsync ( java.lang.String username ) ;
public void onSuccess ( com.google.gerrit.client.rpc.NativeMap < com.google.gerrit.client.info.ActionInfo > actionMap ) { actionMap.copyKeysIntoChildren ( "id" ) ; renderRevisionInfo ( changeInfo , actionMap ) ; }
public void onSuccess ( com.google.gerrit.client.rpc.NativeString user ) { com.google.gerrit.client.Gerrit.getUserAccount ( ) . username ( user.asString ( ) ) ; enableUI ( true ) ; display ( ) ; }
private static native boolean hasFlash ( ) ;
private void abandon ( java.lang.String changeId , com.google.gerrit.acceptance.TestAccount by , @ com.google.gerrit.common.Nullable com.google.gerrit.extensions.api.changes.NotifyHandling.NotifyHandling notify ) throws java.lang.Exception { abandon ( changeId , by , EmailStrategy.ENABLED , notify ) ; }
public void onTabSelected ( com.google.gwt.user.client.ui.SourcesTabEvents sender , int tabIndex ) { com.google.gerrit.client.Gerrit.display ( tabTokens.get ( tabIndex ) , false ) ; }
public void onSuccess ( com.google.gwtjsonrpc.common.VoidResult result ) { com.google.gwt.user.client.History.newItem ( com.google.gerrit.client.Dispatcher.toProjectAdmin ( new com.google.gerrit.reviewdb.client.Project.NameKey ( projectName ) , ProjectScreen.INFO ) ) ; }
public void deleteComment ( com.google.gerrit.reviewdb.client.PatchLineComment c ) { verifyComment ( c ) ; com.google.common.base.Preconditions.checkArgument ( draftNotes.containsComment ( c ) , ( "Cannot delete this comment" + " because it didn't previously exist as a draft" ) ) ; deleteComments.add ( c ) ; }
public java.lang.Object apply ( com.google.gerrit.server.account.AccountResource.Email rsrc , com.google.gerrit.server.account.CreateEmail.Input input ) throws com.google.gerrit.extensions.restapi.ResourceConflictException { throw new com.google.gerrit.extensions.restapi.ResourceConflictException ( "email exists" ) ; }
public void doRefUpdatedHook ( com.google.gerrit.reviewdb.client.Branch.NameKey refName , org.eclipse.jgit.lib.ObjectId oldId , org.eclipse.jgit.lib.ObjectId newId , com.google.gerrit.reviewdb.client.Account account ) { }
protected java.nio.file.Path getSitePath ( ) { return sitePath ; }
public static org.apache.lucene.index.Term idTerm ( com.google.gerrit.reviewdb.client.Change.Id id ) { return com.google.gerrit.lucene.QueryBuilder.intTerm ( com.google.gerrit.server.index.ChangeField.LEGACY_ID2.getName ( ) , id.get ( ) ) ; }
public void operationComplete ( org.apache.sshd.common.future.CloseFuture future ) { connected.decrementAndGet ( ) ; if ( sd.isAuthenticationError ( ) ) { authFailures.increment ( ) ; sshLog.onAuthFail ( sd ) ; } }
private static com.google.gerrit.reviewdb.client.AccountPatchReview getExisting ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.server.change.FileResource resource ) throws com.google.gwtorm.server.OrmException { com.google.gerrit.reviewdb.client.AccountPatchReview.Key key = new com.google.gerrit.reviewdb.client.AccountPatchReview.Key ( resource.getPatchKey ( ) , resource.getAccountId ( ) ) ; return db.accountPatchReviews ( ) . get ( key ) ; }
public void createAssignee ( ) throws java.lang.Exception { assignee = accountCreator.create ( "assignee" , "assignee@example.com" , "assignee" ) ; }
public void insert ( java.lang.Iterable < T > instances ) throws com.google.gwtorm.client.OrmException { for ( T obj : instances ) { insertOne ( obj ) ; } db.flush ( ) ; }
public void onUpdate ( org.eclipse.jgit.lib.ObjectId oldNotesRev , org.eclipse.jgit.lib.ObjectId newNotesRev , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId > extId ) { }
private static void assertNotRef ( java.lang.String refName ) { com.google.common.truth.Truth.assertThat ( com.google.gerrit.reviewdb.client.PatchSet.isChangeRef ( refName ) ) . isFalse ( ) ; com.google.common.truth.Truth.assertThat ( PatchSet.Id.fromRef ( refName ) ) . isNull ( ) ; }
protected void onUnload ( ) { expandTimer.cancel ( ) ; resizeTimer.cancel ( ) ; super . onUnload ( ) ; }
com.google.gerrit.server.query.Predicate < T > create ( Q builder , java.lang.String value ) throws com.google.gerrit.server.query.QueryParseException ;
public void writeTo ( java.io.OutputStream out ) throws java.io.IOException { java.io.OutputStream e = com.google.common.io.BaseEncoding.base64 ( ) . encodingStream ( new java.io.OutputStreamWriter ( out , java.nio.charset.StandardCharsets.ISO_8859_1 ) ) ; src.writeTo ( e ) ; e.flush ( ) ; }
public void onFocus ( com.google.gwt.event.dom.client.FocusEvent event ) { setFocus ( true ) ; }
public void listTagsOfNonVisibleProject ( ) throws java.lang.Exception { blockRead ( project , "refs/*" ) ; com.google.common.truth.Truth.assertThat ( userSession.get ( ( ( "/projects/" + ( project.get ( ) ) ) + "/tags" ) ) . getStatusCode ( ) ) . isEqualTo ( HttpStatus.SC_NOT_FOUND ) ; }
static void deleteEdit ( com.google.gerrit.reviewdb.client.Change.Id id , com.google.gwt.user.client.ui.Button ... editButtons ) { com.google.gerrit.client.changes.ChangeApi.deleteEdit ( id.get ( ) , com.google.gerrit.client.change.EditActions.cs ( id , editButtons ) ) ; }
public com.google.common.util.concurrent.CheckedFuture < com.google.gerrit.reviewdb.client.PatchLineComment , com.google.gwtorm.server.OrmException > getAsync ( com.google.gerrit.reviewdb.client.PatchLineComment.Key key ) { throw new java.lang.UnsupportedOperationException ( com.google.gerrit.reviewdb.server.DisabledChangesReviewDbWrapper.MSG ) ; }
public void run ( ) { view.getCmFromSide ( DisplaySide.A ) . setOption ( "mode" , mode ) ; view.getCmFromSide ( DisplaySide.B ) . setOption ( "mode" , mode ) ; }
void setShowTabs ( boolean show ) { cmA.extras ( ) . showTabs ( show ) ; cmB.extras ( ) . showTabs ( show ) ; }
private int getPermittedLimit ( ) { if ( enforceVisibility ) { return capabilityFactory.create ( userProvider.get ( ) ) . getRange ( GlobalCapability.QUERY_LIMIT ) . getMax ( ) ; } return java.lang.Integer.MAX_VALUE ; }
public void testSubscriptionWildcardACLForMissingBranch ( ) throws java.lang.Exception { createProjectWithPush ( "super-project" ) ; org.eclipse.jgit.junit.TestRepository < ? > subRepo = createProjectWithPush ( "subscribed-to-project" ) ; allowMatchingSubmoduleSubscription ( "subscribed-to-project" , "refs/heads/*" , "super-project" , "refs/heads/*" ) ; pushChangeTo ( subRepo , "foo" ) ; }
protected com.google.gerrit.pgm.init.api.ConsoleUI getConsoleUI ( ) { return com.google.gerrit.pgm.init.api.ConsoleUI.getInstance ( false ) ; }
public com.google.gerrit.reviewdb.client.PatchSet getPatchSet ( ) { com.google.common.base.Preconditions.checkState ( ( ( patchSet ) != null ) , "getPatchSet() only valid after creating change" ) ; return patchSet ; }
public void run ( ) { progress.setValue ( ( ( ( 100 * ( ++ ( cycle ) ) ) * 250 ) / ( loadTimeout ) ) ) ; }
public java.lang.String format ( ) { return com.google.gerrit.reviewdb.client.ApprovalCategoryValue.format ( getName ( ) , getValue ( ) ) ; }
protected void configure ( ) { bind ( java.io.File.class ) . annotatedWith ( com.google.gerrit.server.config.SitePath.class ) . toProvider ( com.google.gerrit.httpd.SitePathFromSystemConfigProvider.class ) . in ( com.google.inject.Scopes.SINGLETON ) ; }
private void show ( com.googlesource.gerrit.plugins.xdocs.client.ChangeInfo change ) { addHeader ( change ) ; init ( ) ; display ( change ) ; }
public com.google.gerrit.server.account.CapabilityCollection getCapabilityCollection ( ) { return capabilities ; }
boolean isAllowedOpenID ( final java.lang.String id ) { for ( final com.google.gerrit.server.auth.openid.OpenIdProviderPattern pattern : allowedOpenIDs ) { if ( pattern.matches ( id ) ) { return true ; } } return false ; }
public com.google.gerrit.server.IdentifiedUser create ( com.google.gerrit.reviewdb.client.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( capabilityControlFactory , authConfig , anonymousCowardName , canonicalUrl , accountCache , groupBackend , disableReverseDnsLookup , remotePeerProvider , dbProvider , id , null ) ; }
public void removeReviewer ( final com.google.gerrit.reviewdb.client.Change.Id id , final com.google.gerrit.reviewdb.client.Account.Id reviewerId , final com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.ReviewerResult > callback ) { removeReviewerHandlerFactory.create ( id , reviewerId ) . to ( callback ) ; }
private void cancelCheckConnectionTaskIfScheduled ( boolean mayInterrupt ) { if ( ( checkConnTask ) != null ) { checkConnTask.cancel ( mayInterrupt ) ; } }
void deleteBranch ( com.google.gerrit.reviewdb.client.Project.NameKey projectName , java.util.Set < com.google.gerrit.reviewdb.client.Branch.NameKey > ids , com.google.gwtjsonrpc.common.AsyncCallback < java.util.Set < com.google.gerrit.reviewdb.client.Branch.NameKey > > callback ) ;
public java.lang.String newRandomState ( java.lang.String redirectUrl ) { byte [ ] stateBin = new byte [ 20 ] ; com.googlesource.gerrit.plugins.github.oauth.OAuthProtocol.randomState.nextBytes ( stateBin ) ; return ( ( com.google.common.io.BaseEncoding.base64Url ( ) . encode ( stateBin ) ) + ( com.googlesource.gerrit.plugins.github.oauth.OAuthProtocol.ME_SEPARATOR ) ) + redirectUrl ; }
public java.lang.String [ ] getParameterValues ( java.lang.String name ) { return com.google.gitiles.FakeHttpServletRequest.stringCollectionToArray ( parameters.get ( name ) ) ; }
protected final com.google.gerrit.pgm.CmdLineParser newCmdLineParser ( ) { final com.google.gerrit.pgm.CmdLineParser parser = super . newCmdLineParser ( ) ; for ( com.google.gerrit.server.ssh.commands.ApproveOption c : optionList ) { parser.addOption ( c , c ) ; } return parser ; }
protected void configure ( ) { bind ( org.apache.sshd.common.keyprovider.KeyPairProvider.class ) . toProvider ( com.google.gerrit.sshd.HostKeyProvider.class ) . in ( com.google.inject.Scopes.SINGLETON ) ; }
public org.parboiled.Rule [ ] blockPluginRules ( ) { return new org.parboiled.Rule [ ] { note ( ) , toc ( ) } ; }
private void readObject ( final java.io.ObjectInputStream in ) throws java.io.IOException { oldId = org.eclipse.jgit.lib.ObjectIdSerialization.readCanBeNull ( in ) ; newId = org.eclipse.jgit.lib.ObjectIdSerialization.readNotNull ( in ) ; whitespace = com.google.gerrit.server.ioutil.BasicSerialization.readEnum ( in , com.google.gerrit.reviewdb.AccountDiffPreference.Whitespace.values ( ) ) ; }
public com.googlesource.gerrit.plugins.github.git.GHCommit getCommit ( java.lang.String sha1 ) throws java.io.IOException { return ghRepository.getCommit ( sha1 ) ; }
public void setUp ( ) throws java.lang.Exception { lifecycle = new com.google.gerrit.lifecycle.LifecycleManager ( ) ; db = com.google.gerrit.testutil.InMemoryDatabase.newDatabase ( lifecycle ) ; lifecycle.start ( ) ; }
public static com.google.gerrit.client.rpc.RestApi reviewer ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , int reviewer ) { return com.google.gerrit.client.changes.ChangeApi.change ( project , id ) . view ( "reviewers" ) . id ( reviewer ) ; }
public Project.NameKey getProjectNameKey ( ) { return key.projectName ; }
public com.google.gerrit.extensions.restapi.Response < ? > apply ( com.google.gerrit.server.change.ChangeEditResource rsrc , com.google.gerrit.server.change.ChangeEdits.DeleteContent.Input input ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.extensions.restapi.ResourceConflictException , com.google.gerrit.server.permissions.PermissionBackendException , com.google.gwtorm.server.OrmException , java.io.IOException { return apply ( rsrc.getChangeResource ( ) , rsrc.getPath ( ) ) ; }
private static org.pegdown.PegDownProcessor newParser ( org.joda.time.Duration parseDeadline ) { org.pegdown.plugins.PegDownPlugins plugins = new org.pegdown.plugins.PegDownPlugins.Builder ( ) . withPlugin ( com.google.gitiles.doc.GitilesMarkdown.class , parseDeadline ) . build ( ) ; return new org.pegdown.PegDownProcessor ( com.google.gitiles.doc.GitilesMarkdown.MD_OPTIONS , parseDeadline.getMillis ( ) , plugins ) ; }
protected org.eclipse.jgit.junit.TestRepository < ? > createProjectWithPush ( java.lang.String name , boolean createEmptyCommit ) throws java.lang.Exception { return createProjectWithPush ( name , null , createEmptyCommit , getSubmitType ( ) ) ; }
protected void appendGetField ( final com.google.gwtorm.schema.ColumnModel c ) { if ( ( c.getParent ( ) ) == null ) { mv.visitVarInsn ( com.google.gwtorm.jdbc.ALOAD , keyvar ) ; } else { super . appendGetField ( c ) ; } }
public void execute ( ) { new com.google.gerrit.client.auth.openid.OpenIdSignInDialog ( SignInDialog.Mode.REGISTER , null ) . center ( ) ; }
public void onClick ( com.google.gwt.event.dom.client.ClickEvent arg0 ) { if ( cb.getValue ( ) ) { scriptSettings.setWhitespace ( com.google.gerrit.client.data.PatchScriptSettings.Whitespace.IGNORE_SPACE_CHANGE ) ; } else { scriptSettings.setWhitespace ( com.google.gerrit.client.data.PatchScriptSettings.Whitespace.IGNORE_NONE ) ; } refresh ( false ) ; }
private static boolean match ( java.lang.String value , java.lang.String pattern ) { return com.google.gerrit.server.project.RefPatternMatcher.getMatcher ( pattern ) . match ( value , null ) ; }
public boolean apply ( com.google.gerrit.reviewdb.client.ChangeMessage in ) { com.google.gerrit.reviewdb.client.PatchSet.Id psId = in.getPatchSetId ( ) ; if ( psId == null ) { return true ; } return ( upToCurrent.apply ( psId ) ) && ( patchSets.containsKey ( psId ) ) ; }
public boolean submittable ( com.google.gerrit.server.query.change.ChangeData cd ) { try { com.google.gerrit.server.git.MergeOp.checkSubmitRule ( cd ) ; return true ; } catch ( com.google.gerrit.extensions.restapi.ResourceConflictException | com.google.gwtorm.server.OrmException e ) { return false ; } }
public com.google.gerrit.server.CurrentUser getUser ( ) { return identifiedUserFactory.create ( change.getOwner ( ) ) ; }
public com.google.gerrit.extensions.api.projects.Projects.ListRequest withDescription ( boolean description ) { this . description = description ; return this ; }
public void removeCacheUsageListener ( net.sf.ehcache.statistics.CacheUsageListener cacheUsageListener ) throws java.lang.IllegalStateException { self.removeCacheUsageListener ( cacheUsageListener ) ; }
public boolean isInGroup ( final com.google.gerrit.client.reviewdb.Account.Id accountId , final com.google.gerrit.client.reviewdb.AccountGroup.Id groupId ) { if ( ( isAnonymousUsers ( groupId ) ) || ( isRegisteredUsers ( groupId ) ) ) { return true ; } return getGroups ( accountId ) . contains ( groupId ) ; }
protected boolean canPerform ( final com.google.gerrit.client.reviewdb.ApprovalCategory.Id actionId , final short val ) { return cachedProj.controlFor ( currentUser ) . canPerform ( actionId , val ) ; }
void onRemoveDraftBox ( com.google.gerrit.client.diff.DraftBox box ) { boxes.remove ( box ) ; table.setHeaderVisible ( true ) ; }
public void run ( ) { closedIndex.close ( ) ; }
public abstract boolean rawWriteChangesSetting ( ) ;
public void onSuccess ( com.google.gerrit.client.projects.BranchInfo branch ) { addBranch.setEnabled ( true ) ; nameTxtBox.setText ( "" ) ; irevTxtBox.setText ( "" ) ; branchTable.insert ( branch ) ; delBranch.setVisible ( branchTable.hasBranchCanDelete ( ) ) ; }
com.google.gerrit.server.change.PatchSetInserter create ( org.eclipse.jgit.lib.Repository git , org.eclipse.jgit.revwalk.RevWalk revWalk , com.google.gerrit.server.project.ChangeControl ctl , org.eclipse.jgit.revwalk.RevCommit commit ) ;
public void notifyDraftDelta ( final com.google.gerrit.client.reviewdb.Patch.Key k , final int delta ) { if ( ( myTable ) != null ) { myTable.notifyDraftDelta ( k , delta ) ; } }
public void nameInConfigMayBeUndefined ( ) throws java.lang.Exception { populateGroupConfig ( groupUuid , "[group]\n\tid = 42\n\townerGroupUuid = owners\n" ) ; com.google.gerrit.server.group.db.GroupConfig groupConfig = com.google.gerrit.server.group.db.GroupConfig.loadForGroup ( repository , groupUuid ) ; com.google.common.truth.Truth.assertThat ( groupConfig.getLoadedGroup ( ) . get ( ) . getName ( ) ) . isEmpty ( ) ; }
static com.google.gerrit.server.project.SectionMatcher wrap ( com.google.gerrit.common.data.AccessSection section ) { java.lang.String ref = section.getName ( ) ; if ( com.google.gerrit.common.data.AccessSection.isValid ( ref ) ) { return com.google.gerrit.server.project.SectionMatcher.wrap ( ref , section ) ; } else { return null ; } }
public com.google.gerrit.server.query.change.ChangeData setLazyLoad ( boolean load ) { lazyLoad = load ; return this ; }
public com.google.gerrit.server.plugins.PluginContentScanner getContentScanner ( ) { return PluginContentScanner.EMPTY ; }
public com.google.gerrit.server.project.ProjectResource parse ( com.google.gerrit.extensions.restapi.TopLevelResource parent , com.google.gerrit.extensions.restapi.IdString id ) throws com.google.gerrit.extensions.restapi.ResourceNotFoundException { com.google.gerrit.server.project.ProjectResource rsrc = _parse ( id.get ( ) ) ; if ( rsrc == null ) { throw new com.google.gerrit.extensions.restapi.ResourceNotFoundException ( id ) ; } return rsrc ; }
public com.google.common.base.Optional < com.google.gerrit.reviewdb.client.Account.Id > getAssignee ( ) { return com.google.common.base.Optional.fromNullable ( state.assignee ( ) ) ; }
public int hashCode ( ) { return java.util.Objects.hash ( unchanged , updated , deleted ) ; }
protected void setUp ( ) throws java.lang.Exception { super . setUp ( ) ; new com.google.gerrit.testutil.InMemoryModule ( ) . inject ( this ) ; }
private static void assertNotRef ( java.lang.String refName ) { com.google.common.truth.Truth.assertThat ( com.google.gerrit.reviewdb.client.PatchSet.isRef ( refName ) ) . isFalse ( ) ; com.google.common.truth.Truth.assertThat ( PatchSet.Id.fromRef ( refName ) ) . isNull ( ) ; }
public static void publishEdit ( int id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwt.core.client.JavaScriptObject > cb ) { com.google.gwt.core.client.JavaScriptObject in = com.google.gwt.core.client.JavaScriptObject.createObject ( ) ; com.google.gerrit.client.changes.ChangeApi.change ( id ) . view ( "edit:publish" ) . post ( in , cb ) ; }
public void onSuccess ( com.google.gerrit.client.account.AccountCapabilities ac ) { addPanel.setVisible ( ac.canPerform ( com.google.gerrit.common.data.GlobalCapability.CREATE_GROUP ) ) ; }
static void invoke ( com.google.gerrit.client.info.ChangeInfo change , com.google.gerrit.client.info.ActionInfo action , com.google.gerrit.client.rpc.RestApi api ) { com.google.gerrit.client.api.DefaultActions.invoke ( action , api , com.google.gerrit.client.api.DefaultActions.callback ( com.google.gerrit.common.PageLinks.toChange ( change.projectNameKey ( ) , change.legacyId ( ) ) ) ) ; }
public java.util.Set < com.google.gerrit.client.reviewdb.Change.Id > run ( final com.google.gerrit.client.reviewdb.ReviewDb db ) throws com.google.gwtorm.client.OrmException { return com.google.gerrit.client.changes.ChangeListServiceImpl.starredBy ( db , com.google.gerrit.client.rpc.Common.getAccountId ( ) ) ; }
public void emptyStringTest ( ) throws java.lang.Exception { queryBuilder.addParameter ( "topic" , "" ) ; com.google.common.truth.Truth.assertThat ( queryBuilder.get ( ) ) . isEqualTo ( "topic:\"\"" ) ; }
int getEnd ( com.google.gerrit.prettify.common.BaseEdit edit ) { return edit.getEndB ( ) ; }
public com.google.gerrit.extensions.common.ChangeInfo addChangeActions ( com.google.gerrit.extensions.common.ChangeInfo to , com.google.gerrit.server.project.ChangeControl ctl ) { java.util.List < com.google.gerrit.extensions.api.changes.ActionVisitor > visitors = visitors ( ) ; to.actions = toActionMap ( ctl , visitors , copy ( visitors , to ) ) ; return to ; }
private org.eclipse.jgit.revwalk.RevCommit patchSetCommit ( com.google.gerrit.reviewdb.client.PatchSet.Id psId ) throws java.lang.Exception { org.eclipse.jgit.revwalk.RevCommit c = serverSideTestRepo.commit ( ) . parent ( tip ) . message ( ( "Change " + psId ) ) . create ( ) ; return serverSideTestRepo.parseBody ( c ) ; }
public java.util.List < com.google.gerrit.server.query.change.ChangeData > byCommit ( java.lang.String hash ) throws com.google.gwtorm.server.OrmException { return query ( com.google.gerrit.server.query.change.InternalChangeQuery.commit ( com.google.gerrit.server.query.change.InternalChangeQuery.schema ( indexes ) , hash ) ) ; }
private void checkRevision ( ) { checkView ( ( ( revision ) != ( Revision.NULL ) ) , "missing revision on %s view" , type ) ; checkRepositoryIndex ( ) ; }
final native void visibleToAll ( boolean v ) ;
private java.util.Collection < com.google.gerrit.reviewdb.RefRight > getWildProjectRights ( ) { com.google.gerrit.server.project.ProjectState s = com.google.gerrit.server.util.FutureUtil.get ( projectCache.get ( wildProject ) ) ; return s != null ? s.getLocalRights ( ) : java.util.Collections.< com.google.gerrit.reviewdb.RefRight > emptyList ( ) ; }
public org.eclipse.jgit.lib.RefUpdate.Result restoreFile ( com.google.gerrit.server.edit.ChangeEdit edit , java.lang.String file ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.server.project.InvalidChangeOperationException , java.io.IOException { org.eclipse.jgit.revwalk.RevCommit editCommit = edit.getEditCommit ( ) ; return modify ( edit , new com.google.gerrit.server.edit.tree.RestoreFileModification ( editCommit , file ) ) ; }
public void execute ( ) { for ( com.google.gerrit.client.diff.CommentBox box : allBoxes ) { box.resizePaddingWidget ( ) ; } }
public com.google.gerrit.server.change.MergeabilityChecker.Check addProject ( com.google.gerrit.reviewdb.client.Project.NameKey project ) { projects.add ( project ) ; interactive = false ; return this ; }
public com.google.gerrit.server.project.ChangeControl forUser ( final com.google.gerrit.server.CurrentUser who ) { if ( getUser ( ) . equals ( who ) ) { return this ; } return new com.google.gerrit.server.project.ChangeControl ( changeDataFactory , getRefControl ( ) . forUser ( who ) , notes ) ; }
public com.google.gerrit.extensions.common.WebLinkInfo getProjectWeblink ( java.lang.String projectName ) { java.lang.String url = getBranchUrl ( projectName , Constants.HEAD ) ; return url == null ? null : new com.google.gerrit.extensions.common.WebLinkInfo ( com.googlesource.gerrit.plugins.xdocs.XDocWebLink.README , getImageUrl ( ) , url , Target.SELF ) ; }
public void putReviewer ( com.google.gerrit.reviewdb.client.Account.Id reviewer , com.google.gerrit.server.notedb.ReviewerStateInternal type ) { com.google.common.base.Preconditions.checkArgument ( ( type != ( ReviewerStateInternal.REMOVED ) ) , "invalid ReviewerType" ) ; reviewers.put ( reviewer , type ) ; }
protected java.lang.String soyTextTemplate ( java.lang.String name ) { return args.soyTofu.newRenderer ( ( "com.google.gerrit.server.mail.template." + name ) ) . setContentKind ( SanitizedContent.ContentKind.TEXT ) . setData ( soyContext ) . render ( ) ; }
public com.google.gerrit.reviewdb.client.Change atomicUpdate ( com.google.gerrit.reviewdb.client.Change.Id key , com.google.gwtorm.server.AtomicUpdate < com.google.gerrit.reviewdb.client.Change > update ) { throw new java.lang.UnsupportedOperationException ( "do not call atomicUpdate; updateChange is always called within a transaction" ) ; }
public void center ( ) { super . center ( ) ; com.google.gwtexpui.globalkey.client.GlobalKey.dialog ( this ) ; updateControls ( false ) ; }
public void run ( ) { if ( cm.vim ( ) . hasSearchHighlight ( ) ) { cm.vim ( ) . handleKey ( "N" ) ; } else { commentManager.commentNav ( cm , Direction.NEXT ) . run ( ) ; } }
public org.eclipse.jgit.transport.ReceiveCommand getCommand ( ) { return cmd ; }
ApprovalCategory.Id getCategoryId ( ) { return type.getCategory ( ) . getId ( ) ; }
public boolean isOwnerAnyRef ( ) { return ( canPerformOnAnyRef ( Permission.OWNER ) ) || ( getCurrentUser ( ) . getCapabilities ( ) . canAdministrateServer ( ) ) ; }
public void stop ( ) { com.ericsson.gerrit.plugins.highavailability.peers.jgroups.JGroupsPeerInfoProvider.log.info ( "closing jgroups channel {}" , jgroupsConfig.clusterName ( ) ) ; channel.close ( ) ; peerInfo = java.util.Optional.empty ( ) ; peerAddress = null ; }
public java.lang.String getChangeAvatarUrl ( com.google.gerrit.server.IdentifiedUser forUser ) { return changeAvatarUrl ; }
public com.google.gerrit.server.change.ChangeInserter setDraft ( boolean draft ) { com.google.common.base.Preconditions.checkState ( ( ( change ) == null ) , "setDraft(boolean) only valid before creating change" ) ; return setStatus ( ( draft ? Change.Status.DRAFT : Change.Status.NEW ) ) ; }
public com.google.gerrit.server.query.InternalQuery < T > setLimit ( int n ) { queryProcessor.setUserProvidedLimit ( n ) ; return this ; }
public com.google.gitiles.doc.html.HtmlBuilder appendAndEscape ( java.lang.CharSequence in ) { try { finishActiveTag ( ) ; textBuf.append ( in ) ; return this ; } catch ( java.io.IOException e ) { throw new com.google.gitiles.doc.RuntimeIOException ( e ) ; } }
public < T extends com.google.gwt.core.client.JavaScriptObject > void post ( com.google.gwt.core.client.JavaScriptObject content , com.google.gerrit.client.rpc.HttpCallback < T > cb ) { sendJSON ( com.google.gwt.http.client.RequestBuilder.POST , content , cb ) ; }
public void execute ( java.lang.Runnable command ) { com.google.common.truth.Truth.assertThat ( command.toString ( ) ) . isEqualTo ( java.lang.String.format ( "[%s] Send event '%s' to target instance" , com.ericsson.gerrit.plugins.highavailability.event.EventHandlerTest.PLUGIN_NAME , null ) ) ; command.run ( ) ; }
private void expandAll ( ) { expandSideAll ( ) ; if ( ( otherBar ) != null ) { otherBar.expandSideAll ( ) ; } manager.remove ( this , otherBar ) ; }
public void configure ( ) { install ( dbInjector.getInstance ( com.google.gerrit.pgm.util.BatchProgramModule.class ) ) ; bind ( com.google.gerrit.server.extensions.events.GitReferenceUpdated.class ) . toInstance ( GitReferenceUpdated.DISABLED ) ; install ( getIndexModule ( ) ) ; factory ( ChangeResource.Factory.class ) ; }
public com.google.gwtjsonrpc.common.VoidResult run ( com.google.gerrit.reviewdb.server.ReviewDb db ) throws com.google.gwtorm.server.OrmException { db.accountProjectWatches ( ) . update ( java.util.Collections.singleton ( watch ) ) ; return com.google.gwtjsonrpc.common.VoidResult.INSTANCE ; }
public com.google.gerrit.server.account.AccountInfo apply ( com.google.gerrit.server.account.AccountResource rsrc ) throws com.google.gwtorm.server.OrmException { com.google.gerrit.server.account.AccountInfo.Loader loader = infoFactory.create ( true ) ; com.google.gerrit.server.account.AccountInfo info = loader.get ( rsrc.getUser ( ) . getAccountId ( ) ) ; loader.fill ( ) ; return info ; }
public java.util.List < com.google.gerrit.extensions.client.ProjectWatchInfo > getWatchedProjects ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return getWatchedProjects.apply ( account ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot get watched projects" , e ) ; } }
protected abstract V impl ( com.google.gerrit.server.util.RequestContext ctx ) throws java.lang.Exception ;
private static void initDisableUnwantedKeys ( ) { for ( java.lang.String s : new java.lang.String [ ] { "A" , "C" , "J" , "K" , "O" , "R" , "U" , "Ctrl-C" } ) { net.codemirror.lib.CodeMirror.disableUnwantedKey ( "vim" , s ) ; } }
public org.kohsuke.github.GitHub login ( com.googlesource.gerrit.plugins.github.oauth.OAuthProtocol.AccessToken authToken ) throws java.io.IOException { this . token = authToken ; this . hub = org.kohsuke.github.GitHub.connectUsingOAuth ( authToken.access_token ) ; return this . hub ; }
public com.google.gerrit.extensions.common.WebLinkInfo getProjectWeblink ( java.lang.String projectName ) { return new com.google.gerrit.extensions.common.WebLinkInfo ( com.googlesource.gerrit.plugins.xdocs.XDocWebLink.README , getImageUrl ( ) , getBranchUrl ( projectName , Constants.HEAD ) , com.google.gerrit.extensions.webui.WebLinkTarget.SELF ) ; }
public com.google.gerrit.server.query.change.QueryResult queryByString ( java.lang.String queryString ) throws com.google.gerrit.server.query.QueryParseException , com.google.gwtorm.server.OrmException { return queryByStrings ( com.google.common.collect.ImmutableList.of ( queryString ) ) . get ( 0 ) ; }
public com.google.gerrit.reviewdb.server.ReviewDb open ( ) { return new com.google.gerrit.testing.DisabledReviewDb ( ) ; }
void setName ( final java.lang.String prefix ) { this . commandName = prefix ; }
public static com.google.gerrit.server.project.DashboardResource projectDefault ( com.google.gerrit.server.project.ProjectState projectState , com.google.gerrit.server.CurrentUser user ) { return new com.google.gerrit.server.project.DashboardResource ( projectState , user , null , null , null , true ) ; }
void onEdit ( ) { if ( canEdit ) { com.google.gwt.user.client.ui.UIObject.setVisible ( show , false ) ; com.google.gwt.user.client.ui.UIObject.setVisible ( form , true ) ; input.setText ( text.getText ( ) ) ; input.setFocus ( true ) ; } }
private void injectRuleBase ( java.lang.String rules ) throws java.io.IOException { injectRuleBase ( rules , com.googlesource.gerrit.plugins.hooks.workflow.RuleBaseTest.RuleBaseKind.GLOBAL ) ; }
private static int checkLimit ( int limit , java.lang.String name ) { if ( limit == 0 ) { return java.lang.Integer.MAX_VALUE ; } com.google.common.base.Preconditions.checkArgument ( ( limit > 0 ) , "%s must be positive: %s" , name , limit ) ; return limit ; }
public boolean isAllProjects ( ) { return allProjectsName.equals ( project.getNameKey ( ) ) ; }
protected void add ( final com.google.gerrit.extensions.api.changes.RecipientType rt , final com.google.gerrit.reviewdb.client.Account.Id to ) { if ( ( ! ( emailOnlyAuthors ) ) || ( authors.contains ( to ) ) ) { super . add ( rt , to ) ; } }
protected abstract java.lang.ProcessBuilder newBuildProcess ( com.google.gerrit.httpd.raw.BuildSystem.Label l ) throws java.io.IOException ;
public static com.google.gerrit.extensions.api.projects.BanCommitInput fromCommits ( java.util.List < java.lang.String > commits ) { com.google.gerrit.extensions.api.projects.BanCommitInput in = new com.google.gerrit.extensions.api.projects.BanCommitInput ( ) ; in.commits = commits ; return in ; }
void setOpen ( boolean open ) { resizePaddingWidget ( ) ; setRangeHighlight ( open ) ; getCm ( ) . focus ( ) ; }
public boolean canRead ( ) { return ( getProjectControl ( ) . getProject ( ) . getState ( ) . equals ( ProjectState.READ_ONLY ) ) || ( canWrite ( ) ) ; }
private void destroy ( final com.google.gerrit.reviewdb.ActiveSession.Key key ) throws com.google.gwtorm.client.OrmException { schema.activeSessions ( ) . deleteKeys ( java.util.Arrays.asList ( key ) ) ; com.google.gerrit.server.util.FutureUtil.waitFor ( cache.removeAsync ( key ) ) ; }
public void onClick ( com.google.gwt.event.dom.client.ClickEvent arg0 ) { if ( showFullFileBox.getValue ( ) ) { contextLines = com.google.gerrit.client.reviewdb.AccountGeneralPreferences.WHOLE_FILE_CONTEXT ; } else { initContextLines ( ) ; } refresh ( false ) ; }
private com.google.gitiles.doc.MarkdownToHtml repoIndexReadme ( ) { return readme ( view , "README.md" ) ; }
public com.googlecode.prolog_cafe.lang.NumberTerm divide ( com.googlecode.prolog_cafe.lang.NumberTerm t ) { if ( ( t.doubleValue ( ) ) == 0 ) throw new com.googlecode.prolog_cafe.exceptions.EvaluationException ( "zero_divisor" ) ; return new com.googlecode.prolog_cafe.lang.DoubleTerm ( ( ( this . val ) / ( t.doubleValue ( ) ) ) ) ; }
public void onHeadUpdated ( com.google.gerrit.extensions.events.HeadUpdatedListener.Event event ) { for ( org.eclipse.jgit.transport.URIish uri : getURIs ( new com.google.gerrit.reviewdb.client.Project.NameKey ( event.getProjectName ( ) ) , FilterType.ALL ) ) { updateHead ( uri , event.getNewHeadName ( ) ) ; } }
protected void onUnload ( ) { if ( ( signedInListener ) != null ) { com.google.gerrit.client.Gerrit.removeSignOutHandler ( signedInListener ) ; } super . onUnload ( ) ; }
protected com.google.gerrit.extensions.common.SubmitType getSubmitType ( ) { return com.google.gerrit.extensions.common.SubmitType.MERGE_IF_NECESSARY ; }
public void testEventSentOK ( ) throws java.lang.Exception { com.google.gerrit.server.events.Event event = setUpMocksForEvent ( com.ericsson.gerrit.plugins.highavailability.forwarder.rest.RestForwarderTest.SUCCESSFUL , com.ericsson.gerrit.plugins.highavailability.forwarder.rest.RestForwarderTest.EMPTY_MSG , com.ericsson.gerrit.plugins.highavailability.forwarder.rest.RestForwarderTest.DO_NOT_THROW_EXCEPTION ) ; com.google.common.truth.Truth.assertThat ( restForwarder.send ( event ) ) . isTrue ( ) ; }
public int compare ( final com.google.gerrit.server.patch.PatchListEntry a , final com.google.gerrit.server.patch.PatchListEntry b ) { return com.google.gerrit.server.patch.PatchList.comparePaths ( a.getNewName ( ) , b.getNewName ( ) ) ; }
public < T extends com.google.gwt.core.client.JavaScriptObject > void post ( java.lang.String content , com.google.gwt.user.client.rpc.AsyncCallback < T > cb ) { post ( content , com.google.gerrit.client.rpc.RestApi.wrap ( cb ) ) ; }
public void rollback ( ) { throw new com.google.gerrit.testutil.DisabledReviewDb.Disabled ( ) ; }
public void dontSkipByDefault ( ) throws java.lang.Exception { com.googlesource.gerrit.plugins.uploadvalidator.ValidatorConfig validatorConfig = new com.googlesource.gerrit.plugins.uploadvalidator.ValidatorConfig ( new com.googlesource.gerrit.plugins.uploadvalidator.FakeConfigFactory ( projectName , "" ) , new com.googlesource.gerrit.plugins.uploadvalidator.FakeGroupByNameFinder ( ) ) ; com.google.common.truth.Truth.assertThat ( validatorConfig.isEnabledForRef ( anyUser , projectName , "anyRef" , "anyOp" ) ) . isTrue ( ) ; }
public void confirmForOtherUser_UnprocessableEntity ( ) throws java.lang.Exception { com.google.gerrit.server.config.ConfirmEmail.Input in = new com.google.gerrit.server.config.ConfirmEmail.Input ( ) ; in.token = emailTokenVerifier.encode ( user.getId ( ) , "new.mail@example.com" ) ; adminSession.put ( "/config/server/email.confirm" , in ) . assertUnprocessableEntity ( ) ; }
protected abstract com.google.gerrit.server.mail.send.ProjectWatch.Watchers getWatchers ( com.google.gerrit.server.account.WatchConfig.NotifyType type , boolean includeWatchersFromNotifyConfig ) throws com.google.gwtorm.server.OrmException ;
public void onSuccess ( com.google.gwt.core.client.JsArray < com.google.gerrit.client.account.ProjectWatchInfo > watchedProjects ) { remove ( infos ) ; }
private boolean isEditable ( com.google.gerrit.client.diff.FileInfo info ) { java.lang.String status = info.status ( ) ; return ( status == null ) || ( ! ( ChangeType.DELETED.matches ( status ) ) ) ; }
private com.google.gerrit.client.patches.CommentEditorPanel findOrCreateEditor ( com.google.gerrit.reviewdb.client.PatchLineComment newComment , boolean create ) { int row = rowOf ( getElement ( ) ) ; int column = columnOf ( getElement ( ) ) ; return findOrCreateCommentEditor ( ( row + 1 ) , column , newComment , create ) ; }
public com.google.gerrit.server.project.FileResource parse ( com.google.gerrit.server.project.CommitResource parent , com.google.gerrit.extensions.restapi.IdString id ) throws com.google.gerrit.extensions.restapi.ResourceNotFoundException { return new com.google.gerrit.server.project.FileResource ( parent.getProject ( ) , parent.getCommit ( ) . getName ( ) , id.get ( ) ) ; }
private java.lang.String readEmail ( com.google.gerrit.reviewdb.client.AccountSshKey sshKey ) { java.lang.String defaultEmail = "admin@example.com" ; if ( ( sshKey != null ) && ( ( sshKey.getComment ( ) ) != null ) ) { java.lang.String c = sshKey.getComment ( ) . trim ( ) ; if ( org.apache.commons.validator.routines.EmailValidator.getInstance ( ) . isValid ( c ) ) { defaultEmail = c ; } } return readEmail ( defaultEmail ) ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { doBrowse ( ) ; }
private org.eclipse.jgit.revwalk.RevCommit writeCommit ( java.lang.String body ) throws java.lang.Exception { return writeCommit ( body , changeNoteUtil.newIdent ( changeOwner.getAccount ( ) , com.google.gerrit.common.TimeUtil.nowTs ( ) , serverIdent , "Anonymous Coward" ) ) ; }
protected com.google.gwtorm.server.ResultSet < T > getBySqlIn ( final java.util.Collection < K > keys ) throws com.google.gwtorm.server.OrmException { return super . get ( keys ) ; }
public void changeProjectAccess ( com.google.gerrit.reviewdb.client.Project.NameKey projectName , java.lang.String baseRevision , java.lang.String msg , java.util.List < com.google.gerrit.common.data.AccessSection > sections , com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.ProjectAccess > cb ) { changeProjectAccessFactory.create ( projectName , com.google.gerrit.httpd.rpc.project.ProjectAdminServiceImpl.getBase ( baseRevision ) , sections , msg ) . to ( cb ) ; }
public static org.eclipse.jgit.transport.ReceiveCommand getCommand ( org.eclipse.jgit.lib.RefUpdate update , org.eclipse.jgit.transport.ReceiveCommand.Type type ) { return new org.eclipse.jgit.transport.ReceiveCommand ( update.getExpectedOldObjectId ( ) , update.getNewObjectId ( ) , update.getName ( ) , type ) ; }
public java.lang.String getAuthorizationUrl ( org.scribe.model.Token requestToken ) { return api.getAuthorizationUrl ( config ) ; }
public boolean canUploadMerges ( ) { return getProjectControl ( ) . controlForRef ( ( "refs/for/" + ( getRefName ( ) ) ) ) . canPerform ( Permission.PUSH_MERGE ) ; }
void setUpBlameIconA ( net.codemirror.lib.CodeMirror cm , boolean isBase , com.google.gerrit.reviewdb.client.PatchSet.Id rev , java.lang.String path ) { patchSetSelectBoxA.setUpBlame ( cm , isBase , rev , path ) ; }
final native void restore_path ( java.lang.String p ) ;
public java.lang.String getUserName ( ) { return state ( ) . getUserName ( ) . orElse ( null ) ; }
public void onClick ( com.google.gwt.event.dom.client.ClickEvent event ) { doAddNewTag ( ) ; }
void set ( com.google.gerrit.client.changes.ChangeInfo info ) { this . changeId = info.legacyId ( ) ; display ( info ) ; reviewerSuggestOracle.setChange ( changeId ) ; openForm.setVisible ( com.google.gerrit.client.Gerrit.isSignedIn ( ) ) ; }
public com.google.gerrit.extensions.common.GroupInfo format ( com.google.gerrit.common.data.GroupDescription.Basic group ) throws com.google.gwtorm.server.OrmException { return createGroupInfo ( group , com.google.common.base.Suppliers.memoize ( ( ) -> groupControlFactory.controlFor ( group ) ) ) ; }
public com.google.gerrit.server.plugins.PluginContentScanner getContentScanner ( ) { return scanner ; }
public java.lang.String toString ( ) { if ( ( forUser ) == ( com.google.gerrit.server.permissions.LabelPermission.ForUser.ON_BEHALF_OF ) ) { return ( "LabelAs[" + ( label.format ( ) ) ) + ']' ; } return ( "Label[" + ( label.format ( ) ) ) + ']' ; }
public com.google.gerrit.extensions.common.CommentInfo update ( com.google.gerrit.extensions.api.changes.DraftInput in ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return putDraft.apply ( draft , in ) . value ( ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot update draft" , e ) ; } }
void onExpandAllComments ( com.google.gwt.event.logical.shared.ValueChangeEvent < java.lang.Boolean > e ) { prefs.expandAllComments ( e.getValue ( ) ) ; if ( ( view ) != null ) { view.getCommentManager ( ) . setExpandAllComments ( prefs.expandAllComments ( ) ) ; } }
public void evaluate ( ) throws java.lang.Throwable { try { setUp ( target ) ; base.evaluate ( ) ; } finally { tearDown ( ) ; } }
private static com.google.gerrit.server.account.AccountState newState ( com.google.gerrit.reviewdb.client.Account account ) { return new com.google.gerrit.server.account.AccountState ( account , com.google.common.collect.ImmutableSet.< com.google.gerrit.reviewdb.client.AccountGroup.UUID > of ( ) , com.google.common.collect.ImmutableSet.< com.google.gerrit.reviewdb.client.AccountExternalId > of ( ) , com.google.common.collect.ImmutableSet.< com.google.gerrit.reviewdb.client.AccountProjectWatch > of ( ) ) ; }
public void onSuccess ( com.google.gerrit.client.changes.ChangeList result ) { changes = com.google.gerrit.client.rpc.Natives.asList ( result ) ; updateControls ( true ) ; }
public final void init ( ) { if ( ( labels0 ( ) ) != null ) { labels0 ( ) . copyKeysIntoChildren ( "_name" ) ; } }
public static void updated ( final com.google.gerrit.reviewdb.client.Change c ) { c.setLastUpdatedOn ( new java.sql.Timestamp ( com.google.gerrit.server.util.TimeUtil.nowMs ( ) ) ) ; com.google.gerrit.server.ChangeUtil.computeSortKey ( c ) ; }
public void run ( ) { resizeCodeMirror ( ) ; chunkManager.adjustPadding ( ) ; cmA.refresh ( ) ; cmB.refresh ( ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { toggleReviewed ( ) . run ( ) ; }
protected void configure ( ) { its = createMock ( com.googlesource.gerrit.plugins.hooks.its.ItsFacade.class ) ; bind ( com.googlesource.gerrit.plugins.hooks.its.ItsFacade.class ) . toInstance ( its ) ; addStandardCommentFactory = createMock ( AddStandardComment.Factory.class ) ; bind ( AddStandardComment.Factory.class ) . toInstance ( addStandardCommentFactory ) ; }
public void onResize ( final com.google.gwt.event.logical.shared.ResizeEvent event ) { sp.setSize ( "100%" , "100%" ) ; popup.setHeight ( "100%" ) ; popupPosition.setPosition ( preferredPopupWidth , popup.getOffsetHeight ( ) ) ; }
public void abandonReviewableChangeNotifyOwnerCcingSelf ( ) throws java.lang.Exception { com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableChange ( com.google.gerrit.server.account.WatchConfig.NotifyType.ABANDONED_CHANGES ) ; abandon ( sc.changeId , sc.owner , com.google.gerrit.extensions.client.GeneralPreferencesInfo.EmailStrategy.CC_ON_OWN_COMMENTS , com.google.gerrit.acceptance.server.mail.OWNER ) ; assertThat ( sender ) . notSent ( ) ; }
private static com.google.gerrit.extensions.api.changes.ReviewInput.CommentInput newComment ( java.lang.String path , com.google.gerrit.extensions.client.Side side , int line , java.lang.String message ) { com.google.gerrit.extensions.api.changes.ReviewInput.CommentInput c = new com.google.gerrit.extensions.api.changes.ReviewInput.CommentInput ( ) ; return com.google.gerrit.acceptance.server.change.CommentsIT.populate ( c , path , side , null , line , message ) ; }
public void setSession ( final org.apache.sshd.server.session.ServerSession session ) { this . context = sshScope.newContext ( session.getAttribute ( SshSession.KEY ) , "" ) ; }
public java.util.List < com.gitblit.models.UserModel > getAllUsers ( ) { return java.util.Collections.emptyList ( ) ; }
public com.google.gerrit.server.change.CommentInfo apply ( com.google.gerrit.server.change.DraftResource rsrc ) throws com.google.gwtorm.server.OrmException { com.google.gerrit.server.account.AccountInfo.Loader accountLoader = accountLoaderFactory.create ( true ) ; com.google.gerrit.server.change.CommentInfo ci = new com.google.gerrit.server.change.CommentInfo ( rsrc.getComment ( ) , accountLoader ) ; accountLoader.fill ( ) ; return ci ; }
public static com.google.gerrit.index.query.Predicate < com.google.gerrit.server.account.AccountState > cansee ( com.google.gerrit.server.query.account.AccountQueryBuilder.Arguments args , com.google.gerrit.server.notedb.ChangeNotes changeNotes ) { return new com.google.gerrit.server.query.account.CanSeeChangePredicate ( args.db , args.permissionBackend , args.userFactory , changeNotes ) ; }
public net.sf.ehcache.config.CacheConfiguration getCacheConfiguration ( ) { if ( ( self ) == null ) { return new net.sf.ehcache.config.CacheConfiguration ( ) ; } return self ( ) . getCacheConfiguration ( ) ; }
public void execute ( ) { hide ( ) ; com.google.gerrit.client.Gerrit.postSignIn ( result , ac ) ; }
public java.nio.ByteBuffer encodeToByteBuffer ( T obj ) { java.nio.ByteBuffer data = java.nio.ByteBuffer.allocate ( sizeof ( obj ) ) ; encode ( obj , data ) ; data.flip ( ) ; return data ; }
public void visit ( org.pegdown.ast.ExpImageNode node ) { html.open ( "img" ) . attribute ( "src" , resolveImageUrl ( node.url ) ) . attribute ( "title" , node.title ) . attribute ( "alt" , com.google.gitiles.doc.MarkdownUtil.getInnerText ( node ) ) ; }
public < T extends com.google.gwt.core.client.JavaScriptObject > void post ( com.google.gwt.core.client.JavaScriptObject content , com.google.gerrit.client.rpc.HttpCallback < T > cb ) { sendJSON ( com.google.gwt.http.client.RequestBuilder.POST , content , cb ) ; }
protected com.google.gerrit.server.project.ProjectData fromDocument ( org.apache.lucene.document.Document doc ) { com.google.gerrit.reviewdb.client.Project.NameKey nameKey = new com.google.gerrit.reviewdb.client.Project.NameKey ( doc.getField ( com.google.gerrit.server.index.project.ProjectField.NAME.getName ( ) ) . stringValue ( ) ) ; return projectCache.get ( ) . get ( nameKey ) . toProjectData ( ) ; }
public void run ( ) { try { reindex ( ) ; } finally { running.set ( false ) ; } }
public void publish ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { publishDraftChange.apply ( change , null ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot publish change" , e ) ; } }
public void evictAfterRename ( final com.google.gerrit.reviewdb.AccountGroup.NameKey oldName , final com.google.gerrit.reviewdb.AccountGroup.NameKey newName ) ;
static org.eclipse.jgit.lib.ObjectId keyObjectId ( long keyId ) { byte [ ] buf = new byte [ org.eclipse.jgit.lib.Constants.OBJECT_ID_LENGTH ] ; org.eclipse.jgit.util.NB.encodeInt64 ( buf , 0 , keyId ) ; return org.eclipse.jgit.lib.ObjectId.fromRaw ( buf ) ; }
private com.google.gerrit.server.notedb.ChangeNotes getNotes ( com.google.gerrit.extensions.common.ChangeInfo info ) throws com.google.gwtorm.server.OrmException { try { return changeNotesFactory.createChecked ( new com.google.gerrit.reviewdb.client.Change.Id ( info._number ) ) ; } catch ( com.google.gerrit.server.project.NoSuchChangeException e ) { throw new com.google.gwtorm.server.OrmException ( e ) ; } }
public static java.lang.String toGroup ( com.google.gerrit.reviewdb.client.AccountGroup.UUID uuid ) { return com.google.gerrit.common.PageLinks.toGroup ( uuid ) ; }
public java.util.List < com.google.gerrit.reviewdb.client.AccountGroupById > getIncludes ( ) { return includes ; }
public void onSuccess ( final com.google.gerrit.reviewdb.AccountGroup.Id result ) { com.google.gwt.user.client.History.newItem ( com.google.gerrit.client.Dispatcher.toAccountGroup ( result ) ) ; }
private com.google.gerrit.server.project.ProjectControl user ( com.google.gerrit.reviewdb.AccountGroup ... memberOf ) { return user ( null , memberOf ) ; }
public void copySettingsFrom ( final com.google.gerrit.client.reviewdb.Project update ) { description = update.description ; useContributorAgreements = update.useContributorAgreements ; useSignedOffBy = update.useSignedOffBy ; submitType = update.submitType ; }
public static final native net.codemirror.lib.KeyMap getKeyMap ( java.lang.String name ) ;
public void testDefaultIsMIXED ( ) { com.google.common.truth.Truth.assertThat ( create ( ) ) . isInstanceOf ( FromAddressGeneratorProvider.PatternGen.class ) ; }
com.google.gerrit.server.change.EmailReviewComments create ( com.google.gerrit.extensions.api.changes.NotifyHandling notify , com.google.common.collect.Multimap < com.google.gerrit.extensions.api.changes.RecipientType , com.google.gerrit.reviewdb.client.Account.Id > accountsToNotify , com.google.gerrit.server.notedb.ChangeNotes notes , com.google.gerrit.reviewdb.client.PatchSet patchSet , com.google.gerrit.server.IdentifiedUser user , com.google.gerrit.reviewdb.client.ChangeMessage message , java.util.List < com.google.gerrit.reviewdb.client.Comment > comments ) ;
public void doCommentAddedHook ( com.google.gerrit.reviewdb.client.Change change , com.google.gerrit.reviewdb.client.Account account , com.google.gerrit.reviewdb.client.PatchSet patchSet , java.lang.String comment , java.util.Map < java.lang.String , java.lang.Short > approvals , java.util.Map < java.lang.String , java.lang.Short > oldApprovals , com.google.gerrit.reviewdb.server.ReviewDb db ) { }
public void setPosition ( int offsetWidth , int offsetHeight ) { popup.setPopupPosition ( 300 , 120 ) ; }
protected java.util.Set < com.google.gerrit.client.info.DownloadInfo.DownloadCommandInfo > getCommands ( com.google.gerrit.client.info.DownloadInfo.DownloadSchemeInfo schemeInfo ) { return schemeInfo.cloneCommands ( project ) ; }
private java.lang.String link ( final com.google.gerrit.reviewdb.Project item ) { return com.google.gerrit.client.Dispatcher.toProjectAdmin ( item.getNameKey ( ) , ProjectAdminScreen.INFO_TAB ) ; }
public void onSuccess ( final com.google.gerrit.common.data.AccountProjectWatchInfo result ) { addNew.setEnabled ( true ) ; nameBox.setEnabled ( true ) ; filterTxt.setEnabled ( true ) ; nameTxt.setText ( "" ) ; watches.insertWatch ( result ) ; }
public final void theme ( com.google.gerrit.extensions.client.Theme i ) { setThemeRaw ( ( i != null ? i.toString ( ) : Theme.DEFAULT.toString ( ) ) ) ; }
void onCloseForm ( ) { com.google.gwt.user.client.ui.UIObject.setVisible ( form , false ) ; com.google.gwt.user.client.ui.UIObject.setVisible ( show , true ) ; com.google.gwt.user.client.ui.UIObject.setVisible ( error , false ) ; editAssigneeIcon.setVisible ( true ) ; suggestBox.setFocus ( false ) ; }
public void onSignOut ( final com.google.gerrit.client.SignOutEvent event ) { addReviewer.setVisible ( false ) ; regSignOut.removeHandler ( ) ; regSignOut = null ; }
public void emptyPathInfo ( ) { com.google.common.truth.Truth.assertThat ( com.google.gerrit.util.http.RequestUtil.getEncodedPathInfo ( fakeRequest ( "/c" , "/s" , "" ) ) ) . isNull ( ) ; }
public com.google.gitiles.Revision getOldRevision ( ) { return oldRevision ; }
com.google.gerrit.gpg.GerritPushCertificateChecker create ( com.google.gerrit.server.IdentifiedUser expectedUser , boolean checkNonce ) ;
public com.google.gitiles.GitilesView.Builder setExtension ( java.lang.String extension ) { if ( ( type ) != ( com.google.gitiles.GitilesView.Type.ARCHIVE ) ) { com.google.common.base.Preconditions.checkState ( ( extension == null ) , "cannot set extension on %s view" , type ) ; } this . extension = extension ; return this ; }
public com.googlesource.gerrit.plugins.manager.gson.SmartJson get ( java.lang.String fieldName ) { return getOptional ( fieldName ) . get ( ) ; }
public boolean apply ( com.google.gerrit.server.account.ExternalId externalId ) { return externalId.key ( ) . get ( ) . startsWith ( IdentifiedUserGitHubLoginProvider.EXTERNAL_ID_PREFIX ) ; }
public java.lang.String getRefName ( ) { return ( org.eclipse.jgit.lib.Constants.R_HEADS ) + ( change.branch ) ; }
private com.google.gerrit.server.git.strategy.SubmitStrategy createStrategy ( final com.google.gerrit.reviewdb.client.Project.SubmitType submitType ) throws com.google.gerrit.server.git.MergeException , com.google.gerrit.server.project.NoSuchProjectException { return submitStrategyFactory.create ( submitType , db , repo , rw , inserter , canMergeFlag , getAlreadyAccepted ( branchTip ) , destBranch ) ; }
protected void configure ( ) { bind ( java.io.File.class ) . annotatedWith ( com.google.gerrit.server.config.SitePath.class ) . toInstance ( sitePath ) ; bind ( com.google.gerrit.server.securestore.SecureStore.class ) . toProvider ( com.google.gerrit.server.securestore.SecureStoreProvider.class ) ; }
public boolean canAddMember ( com.google.gerrit.reviewdb.Account.Id id ) { return isOwner ( ) ; }
private void uncacheSshKeys ( ) { sshKeyCache.evict ( user.get ( ) . getUserName ( ) ) ; }
public void onKeyPress ( final com.google.gwt.event.dom.client.KeyPressEvent event ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChangeQuery ( "owner:self is:draft" ) ) ; }
public void onSuccess ( com.google.gwt.core.client.JavaScriptObject result ) { removeUI ( ) ; }
public void stop ( ) { if ( ( async ) != null ) { async.close ( ) ; } }
protected void configure ( ) { com.google.gerrit.extensions.registration.DynamicItem.itemOf ( binder ( ) , com.google.gerrit.common.EventDispatcher.class ) ; com.google.gerrit.extensions.registration.DynamicItem.bind ( binder ( ) , com.google.gerrit.common.EventDispatcher.class ) . to ( com.google.gerrit.common.EventBroker.class ) ; }
public void onSuccess ( com.google.gerrit.client.changes.CommentInfo result ) { enableEdit ( true ) ; set ( result ) ; setEdit ( false ) ; if ( autoClosed ) { setOpen ( false ) ; } parent.updateUnsaved ( this , false ) ; }
public void tearDownInjector ( ) { lifecycle.stop ( ) ; requestContext.setContext ( null ) ; db.close ( ) ; com.google.gerrit.testutil.InMemoryDatabase.drop ( schemaFactory ) ; }
public void isDisabledForInvalidRef ( ) throws java.lang.Exception { com.googlesource.gerrit.plugins.uploadvalidator.ValidatorConfig config = getConfig ( ( "[plugin \"uploadvalidator\"]\n" + ( " ref = anInvalidRef\n" + " blockedFileExtension = jar" ) ) ) ; com.google.common.truth.Truth.assertThat ( config.isEnabledForRef ( anyUser , projectName , "refs/heads/anyref" , "blockedFileExtension" ) ) . isFalse ( ) ; }
public com.google.gerrit.server.group.CreateGroup create ( com.google.gerrit.extensions.restapi.TopLevelResource root , com.google.gerrit.extensions.restapi.IdString name ) { return createGroup.create ( name.get ( ) ) ; }
protected void openRow ( java.lang.String projectName ) { nameBox.setText ( projectName ) ; doAddNew ( ) ; }
protected void configure ( ) { bind ( com.google.gerrit.server.notedb.ChangeNotesCache.class ) ; cache ( com.google.gerrit.server.notedb.ChangeNotesCache.CACHE_NAME , com.google.gerrit.server.notedb.ChangeNotesCache.Key.class , com.google.gerrit.server.notedb.ChangeNotesState.class ) . weigher ( com.google.gerrit.server.notedb.ChangeNotesCache.Weigher.class ) . maximumWeight ( ( 10 << 20 ) ) ; }
private void enableRetryDiscovery ( ) { enable ( true ) ; providerId.selectAll ( ) ; providerId.setFocus ( true ) ; }
public java.util.Map < java.lang.String , java.util.List < com.google.gerrit.extensions.common.CommentInfo > > apply ( com.google.gerrit.server.change.RevisionResource rsrc ) throws com.google.gwtorm.server.OrmException { return commentJson.get ( ) . setFillAccounts ( includeAuthorInfo ( ) ) . format ( listComments ( rsrc ) ) ; }
protected void configureServlets ( ) { if ( wantSsl ) { filter ( "/*" ) . through ( com.google.gerrit.httpd.RequireSslFilter.class ) ; } }
public void update ( java.lang.Iterable < T > instances ) throws com.google.gwtorm.client.OrmException { for ( T obj : instances ) { upsertOne ( obj , true ) ; } db.flush ( ) ; }
public void onLoad ( ) { super . onLoad ( ) ; Util.LIST_SVC.myDraftChanges ( loadCallback ( ) ) ; }
protected void configure ( ) { bind ( com.google.gerrit.server.index.change.IndexRewriter.class ) ; bind ( com.google.gerrit.server.index.IndexCollection.class ) ; listener ( ) . to ( com.google.gerrit.server.index.IndexCollection.class ) ; factory ( ChangeIndexer.Factory.class ) ; }
protected com.google.gwtorm.client.ResultSet scanPrimaryKey ( byte [ ] fromKey , byte [ ] toKey , int limit , boolean order ) { throw new java.lang.UnsupportedOperationException ( ) ; }
public void onGitReferenceUpdated ( com.google.gerrit.extensions.events.GitReferenceUpdatedListener.Event event ) { if ( event.getRefName ( ) . startsWith ( "refs/heads/" ) ) { networkGraphDataCache.refresh ( event.getProjectName ( ) ) ; } }
public void setRevision ( java.lang.String str ) { revision = str ; }
public void testEvictGroupsOK ( ) throws java.lang.Exception { setupMocks ( Constants.GROUPS , com.ericsson.gerrit.plugins.evictcache.RestSessionTest.ID_RESPONSE , com.ericsson.gerrit.plugins.evictcache.RestSessionTest.OK_RESPONSE , com.ericsson.gerrit.plugins.evictcache.RestSessionTest.DO_NOT_THROW_EXCEPTION ) ; com.google.common.truth.Truth.assertThat ( restClient.evict ( com.ericsson.gerrit.plugins.evictcache.RestSessionTest.SOURCE_NAME , Constants.GROUPS , org.mockito.Mockito.mock ( AccountGroup.Id.class ) ) ) . isTrue ( ) ; }
public com.google.gerrit.extensions.api.projects.ConfigInfo config ( com.google.gerrit.extensions.api.projects.ConfigInput in ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return putConfig.apply ( checkExists ( ) , in ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot list tags" , e ) ; } }
private com.google.gerrit.server.notedb.ChangeNotesParser newParser ( org.eclipse.jgit.lib.ObjectId tip ) throws java.lang.Exception { com.google.gerrit.reviewdb.client.Change c = newChange ( ) ; return new com.google.gerrit.server.notedb.ChangeNotesParser ( c.getProject ( ) , c.getId ( ) , tip , walk , repoManager , changeNoteUtil , commentsUtil ) ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { form.submit ( ) ; }
public com.google.gerrit.server.project.SubmitRuleEvaluator setRule ( @ com.google.gerrit.common.Nullable java.lang.String rule ) { checkNotStarted ( ) ; optsBuilder.rule ( rule ) ; return this ; }
void deleteSshKeys ( java.util.Set < com.google.gerrit.client.reviewdb.AccountSshKey.Id > ids , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwtjsonrpc.client.VoidResult > callback ) ;
public void updateRepo ( com.google.gerrit.server.git.BatchUpdate.RepoContext ctx ) throws com.google.gerrit.server.project.InvalidChangeOperationException , java.io.IOException { init ( ) ; validate ( ) ; ctx.addRefUpdate ( new org.eclipse.jgit.transport.ReceiveCommand ( org.eclipse.jgit.lib.ObjectId.zeroId ( ) , commit , getPatchSetId ( ) . toRefName ( ) , ReceiveCommand.Type.CREATE ) ) ; }
public int getSessionAge ( ) { return sessionAge ; }
public void run ( ) { if ( cm.hasVimSearchHighlight ( ) ) { net.codemirror.lib.CodeMirror.handleVimKey ( cm , "n" ) ; } else { chunkManager.diffChunkNav ( cm , Direction.NEXT ) . run ( ) ; } }
public void testEndsOnNewline ( ) { com.google.gerrit.client.diff.SideBySide2.EditIterator iter = new com.google.gerrit.client.diff.SideBySide2.EditIterator ( lines , 0 ) ; assertLineChsEqual ( net.codemirror.lib.LineCharacter.create ( 1 ) , iter.advance ( 4 ) ) ; }
void onEditMode ( com.google.gwt.event.dom.client.ClickEvent e ) { fileTableMode = FileTable.Mode.EDIT ; refreshFileTable ( ) ; editMode.setVisible ( false ) ; addFile.setVisible ( true ) ; reviewMode.setVisible ( true ) ; }
public final void init ( ) { if ( ( all_labels ( ) ) != null ) { all_labels ( ) . copyKeysIntoChildren ( "_name" ) ; } }
public com.google.gerrit.reviewdb.client.ChangeMessage getChangeMessage ( ) { if ( ( message ) == null ) { return null ; } com.google.common.base.Preconditions.checkState ( ( ( changeMessage ) != null ) , "getChangeMessage() only valid after inserting change" ) ; return changeMessage ; }
public void groupCannotBeRenamedWithoutSpecifiedUuid ( ) throws java.lang.Exception { createGroup ( groupUuid , groupName ) ; com.google.gerrit.reviewdb.client.AccountGroup.NameKey anotherName = new com.google.gerrit.reviewdb.client.AccountGroup.NameKey ( "admins" ) ; expectedException.expect ( java.lang.NullPointerException.class ) ; com.google.gerrit.server.group.db.GroupNameNotes.forRename ( repo , null , groupName , anotherName ) ; }
private static boolean isChangeDeletable ( com.google.gerrit.reviewdb.client.Change.Status status ) { if ( status == ( Change.Status.MERGED ) ) { return false ; } return true ; }
public static com.google.gerrit.index.query.Predicate < com.google.gerrit.server.account.AccountState > externalIdIncludingSecondaryEmails ( java.lang.String externalId ) { return new com.google.gerrit.server.query.account.AccountPredicates.AccountPredicate ( com.google.gerrit.server.index.account.AccountField.EXTERNAL_ID , externalId ) ; }
public com.google.gerrit.extensions.api.projects.BranchInfo apply ( com.google.gerrit.server.project.BranchResource rsrc , com.google.gerrit.extensions.api.projects.BranchInput input ) throws com.google.gerrit.extensions.restapi.ResourceConflictException { throw new com.google.gerrit.extensions.restapi.ResourceConflictException ( ( ( "Branch \"" + ( rsrc.getRef ( ) ) ) + "\" already exists" ) ) ; }
public com.google.gerrit.server.group.CreateGroup create ( com.google.gerrit.extensions.restapi.TopLevelResource root , java.lang.String name ) { return createGroup.create ( com.google.gerrit.server.util.Url.decode ( name ) ) ; }
protected void configure ( ) { bind ( com.google.gerrit.server.config.SitePaths.class ) . toInstance ( site ) ; factory ( ChangeData.Factory.class ) ; }
public java.lang.String getSchemeRest ( ) { java.lang.String id = getExternalId ( ) ; int c = id.indexOf ( ':' ) ; return 0 < c ? id.substring ( ( c + 1 ) ) : null ; }
com.google.gerrit.client.diff.DraftBox addReplyBox ( ) { com.google.gerrit.client.diff.DraftBox box = parent.addDraftBox ( parent.createReply ( comment ) ) ; registerReplyBox ( box ) ; return box ; }
com.google.gerrit.server.change.ChangeInserter create ( com.google.gerrit.server.project.RefControl ctl , com.google.gerrit.reviewdb.client.Change.Id cid , org.eclipse.jgit.revwalk.RevCommit rc ) ;
public synchronized void destroy ( ) { java.lang.Iterable < com.google.gerrit.httpd.AllRequestFilter > filtersToDestroy = initializedFilters ; initializedFilters = new com.google.gerrit.extensions.registration.DynamicSet ( ) ; for ( com.google.gerrit.httpd.AllRequestFilter filter : filtersToDestroy ) { filter.destroy ( ) ; } }
public com.googlesource.gerrit.plugins.github.git.GHCompare getCompare ( com.googlesource.gerrit.plugins.github.git.GHCommit id1 , com.googlesource.gerrit.plugins.github.git.GHCommit id2 ) throws java.io.IOException { return ghRepository.getCompare ( id1 , id2 ) ; }
public void onCellClicked ( com.google.gwt.user.client.ui.SourcesTableEvents sender , int row , int cell ) { if ( cell == ( com.google.gerrit.client.changes.ChangeTable.C_STAR ) ) { onStarClick ( row ) ; } }
public void onValueChange ( com.google.gwt.event.logical.shared.ValueChangeEvent < java.lang.Boolean > event ) { setReviewedByCurrentUser ( event.getValue ( ) ) ; }
com.google.gerrit.server.account.PerformCreateGroup create ( com.google.gerrit.server.account.CreateGroupArgs createGroupArgs ) ;
public java.util.Optional < com.googlesource.gerrit.plugins.webhooks.EventProcessor.Request > doProcess ( com.google.gerrit.server.events.ProjectEvent event , com.googlesource.gerrit.plugins.webhooks.RemoteConfig remote ) { return java.util.Optional.of ( new com.googlesource.gerrit.plugins.webhooks.EventProcessor.Request ( com.googlesource.gerrit.plugins.webhooks.processors.GerritEventProcessor.GSON.toJson ( event ) ) ) ; }
void setVisibleA ( boolean show ) { visibleA = show ; if ( show ) { removeStyleName ( com.google.gerrit.client.diff.DiffTable.style.hideA ( ) ) ; parent.syncScroll ( DisplaySide.B ) ; } else { addStyleName ( com.google.gerrit.client.diff.DiffTable.style.hideA ( ) ) ; } }
private java.lang.String link ( final com.google.gerrit.reviewdb.Project item ) { return com.google.gerrit.client.Dispatcher.toProjectAdmin ( item.getNameKey ( ) , ProjectScreen.INFO ) ; }
public com.google.gitiles.GitilesView.Builder setExtension ( java.lang.String extension ) { switch ( type ) { default : com.google.common.base.Preconditions.checkState ( ( extension == null ) , "cannot set extension on %s view" , type ) ; case ARCHIVE : this . extension = extension ; break ; } return this ; }
public void onSuccess ( com.google.gerrit.client.access.ProjectAccessInfo result ) { addPanel.setVisible ( result.canAddRefs ( ) ) ; }
private org.eclipse.jgit.lib.PersonIdent newRefLogIdent ( ) { com.google.gerrit.server.CurrentUser u = user.get ( ) ; if ( u.isIdentifiedUser ( ) ) { return u.asIdentifiedUser ( ) . newRefLogIdent ( ) ; } else { return serverIdent.get ( ) ; } }
public com.google.gerrit.extensions.client.DiffPreferencesInfo apply ( com.google.gerrit.server.config.ConfigResource configResource ) throws com.google.gerrit.extensions.restapi.BadRequestException , com.google.gerrit.extensions.restapi.ResourceConflictException , java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { try ( org.eclipse.jgit.lib.Repository git = gitManager.openRepository ( allUsersName ) ) { return com.google.gerrit.server.account.Preferences.readDefaultDiffPreferences ( git ) ; } }
public static com.google.gerrit.client.reviewdb.Account getUserAccount ( ) { return com.google.gerrit.client.Gerrit.myAccount ; }
private net.sf.ehcache.constructs.blocking.SelfPopulatingCache startCacheSshKeys ( ) { final net.sf.ehcache.Cache dc = com.google.gerrit.server.GerritServer.cacheMgr.getCache ( "sshkeys" ) ; final net.sf.ehcache.constructs.blocking.SelfPopulatingCache r ; r = new net.sf.ehcache.constructs.blocking.SelfPopulatingCache ( dc , new com.google.gerrit.server.ssh.SshKeyCacheEntryFactory ( db ) ) ; com.google.gerrit.server.GerritServer.cacheMgr.replaceCacheWithDecoratedCache ( dc , r ) ; return r ; }
private java.lang.String link ( final com.google.gerrit.client.reviewdb.Project item ) { return com.google.gerrit.client.Link.toProjectAdmin ( item.getNameKey ( ) , ProjectAdminScreen.INFO_TAB ) ; }
private com.googlesource.gerrit.plugins.its.rtc.network.RTCHttpParams.ParameterParser getParameterParser ( java.lang.String name ) { return com.google.common.base.MoreObjects.firstNonNull ( com.googlesource.gerrit.plugins.its.rtc.network.RTCHttpParams.TYPES.get ( name ) , com.googlesource.gerrit.plugins.its.rtc.network.RTCHttpParams.TYPE_STRING ) ; }
public void allRefsVisibleWithRefsMetaConfig ( ) throws java.lang.Exception { allow ( Permission.READ , com.google.gerrit.server.group.SystemGroupBackend.REGISTERED_USERS , "refs/*" ) ; allow ( Permission.READ , com.google.gerrit.server.group.SystemGroupBackend.REGISTERED_USERS , "refs/meta/config" ) ; assertRefs ( "HEAD" , "refs/changes/01/1/1" , "refs/changes/01/1/meta" , "refs/changes/02/2/1" , "refs/changes/02/2/meta" , "refs/heads/branch" , "refs/heads/master" , "refs/meta/config" ) ; }
public com.google.common.util.concurrent.CheckedFuture < ? , java.io.IOException > indexAsync ( com.google.gerrit.reviewdb.client.Change.Id id ) { return ( executor ) != null ? submit ( new com.google.gerrit.server.index.ChangeIndexer.IndexTask ( id ) ) : com.google.common.util.concurrent.Futures.< java.lang.Object , java.io.IOException > immediateCheckedFuture ( null ) ; }
private void logDebug ( java.lang.String msg , java.lang.Throwable t ) { if ( com.google.gerrit.server.git.BatchUpdate.log.isDebugEnabled ( ) ) { this . logDebug ( ( ( ( "[" + ( taskId ) ) + "]" ) + msg ) , t ) ; } }
public void unblockMoreSpecificRef_Fails ( ) { com.google.gerrit.server.project.testing.Util.block ( local , com.google.gerrit.common.data.Permission.PUSH , com.google.gerrit.server.group.SystemGroupBackend.ANONYMOUS_USERS , "refs/heads/*" ) ; com.google.gerrit.server.project.testing.Util.allow ( local , com.google.gerrit.common.data.Permission.PUSH , com.google.gerrit.server.project.testing.Util.DEVS , "refs/heads/master" ) ; com.google.gerrit.server.project.ProjectControl u = user ( local , com.google.gerrit.server.project.testing.Util.DEVS ) ; assertCannotUpdate ( "refs/heads/master" , u ) ; }
java.util.List < org.eclipse.jgit.dircache.DirCacheEditor.PathEdit > getPathEdits ( org.eclipse.jgit.lib.Repository repository , org.eclipse.jgit.revwalk.RevCommit baseCommit ) throws java.io.IOException ;
public void onValueChange ( com.google.gwt.event.logical.shared.ValueChangeEvent < java.lang.Boolean > event ) { if ( event.getValue ( ) ) { scriptSettings.setWhitespace ( com.google.gerrit.client.data.PatchScriptSettings.Whitespace.IGNORE_SPACE_CHANGE ) ; } else { scriptSettings.setWhitespace ( com.google.gerrit.client.data.PatchScriptSettings.Whitespace.IGNORE_NONE ) ; } refresh ( false ) ; }
public void listEmptyGroupIncludes ( ) throws java.lang.Exception { java.lang.String gx = group ( "gx" ) ; com.google.common.truth.Truth.assertThat ( gApi.groups ( ) . id ( gx ) . includedGroups ( ) ) . isEmpty ( ) ; }
private java.nio.file.Path getReplicationStatusPath ( java.lang.String key ) throws java.io.IOException { java.nio.file.Path projectPath = pluginData.resolve ( ( ( getSanitizedKey ( key ) ) + ".replication-error.json" ) ) ; java.nio.file.Files.createDirectories ( projectPath.getParent ( ) ) ; return projectPath ; }
private java.lang.String urlPublish ( ) { return ( "/changes/" + ( change.getChangeId ( ) ) ) + "/publish_edit" ; }
void reviewProjectAccess ( com.google.gerrit.reviewdb.client.Project.NameKey projectName , java.lang.String baseRevision , java.lang.String message , java.util.List < com.google.gerrit.common.data.AccessSection > sections , com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.reviewdb.client.Change.Id > callback ) ;
protected void preDisplay ( com.google.gerrit.client.projects.ConfigInfoCache.Entry result ) { commentManager = new com.google.gerrit.client.diff.CommentManager ( this , base , revision , path , result.getCommentLinkProcessor ( ) ) ; setTheme ( result.getTheme ( ) ) ; display ( comments ) ; }
private void autoReindexIfStale ( com.google.gerrit.reviewdb.client.Account.Id id ) { if ( autoReindexIfStale ) { @ java.lang.SuppressWarnings ( value = "unused" ) java.util.concurrent.Future < ? > possiblyIgnoredError = reindexIfStaleAsync ( id ) ; } }
public abstract java.util.Optional < com.google.gerrit.common.data.GroupReference > getOwnerGroupReference ( ) ;
public java.lang.String getHttpUrl ( com.google.gerrit.acceptance.GerritServer server ) { java.lang.StringBuilder b = new java.lang.StringBuilder ( ) ; b.append ( "http://" ) ; b.append ( username ) ; b.append ( ":" ) ; b.append ( httpPassword ) ; b.append ( ( "@localhost:" + ( server.getHttpPort ( ) ) ) ) ; return b.toString ( ) ; }
public com.googlesource.gerrit.plugins.webhooks.HttpSession get ( ) { return session.create ( remote ) ; }
private boolean include ( org.commonmark.node.Heading h ) { if ( ( h.getLevel ( ) ) == 1 ) { return ( countH1 ) > 1 ; } return ( h.getLevel ( ) ) <= ( maxLevel ) ; }
public void noNotificationForDraftChangesForWatchersInNotifyConfig ( ) throws java.lang.Exception { com.google.gerrit.server.mail.Address addr = new com.google.gerrit.server.mail.Address ( "Watcher" , "watcher@example.com" ) ; com.google.gerrit.server.git.NotifyConfig nc = new com.google.gerrit.server.git.NotifyConfig ( ) ; nc.addEmail ( addr ) ; nc.setName ( "team" ) ; nc.setHeader ( NotifyConfig.Header.TO ) ; nc.setTypes ( java.util.EnumSet.of ( NotifyType.NEW_CHANGES , NotifyType.ALL_COMMENTS ) ) ; com.google.gerrit.server.git.ProjectConfig cfg = projectCache.checkedGet ( project ) . getConfig ( ) ; cfg.putNotifyConfig ( "team" , nc ) ; saveProjectConfig ( project , cfg ) ; com.google.gerrit.acceptance.PushOneCommit.Result r = pushFactory.create ( db , admin.getIdent ( ) , testRepo , "draft change" , "a" , "a1" ) . to ( "refs/for/master%draft" ) ; r.assertOkStatus ( ) ; com.google.common.truth.Truth.assertThat ( sender.getMessages ( ) ) . isEmpty ( ) ; setApiUser ( admin ) ; com.google.gerrit.extensions.api.changes.ReviewInput in = new com.google.gerrit.extensions.api.changes.ReviewInput ( ) ; in.message = "comment" ; gApi.changes ( ) . id ( r.getChangeId ( ) ) . current ( ) . review ( in ) ; com.google.common.truth.Truth.assertThat ( sender.getMessages ( ) ) . isEmpty ( ) ; }
public ExternalId.Key getExternalIdKey ( ) { return externalId ; }
public void getCache_NotFound ( ) throws java.lang.Exception { com.google.gerrit.acceptance.RestResponse r = adminSession.get ( "/config/server/caches/nonExisting" ) ; com.google.common.truth.Truth.assertThat ( r.getStatusCode ( ) ) . isEqualTo ( HttpStatus.SC_NOT_FOUND ) ; }
private void enableForm ( final boolean on ) { ownerTxtBox.setEnabled ( on ) ; descTxt.setEnabled ( on ) ; delRight.setEnabled ( on ) ; }
private com.google.gerrit.client.diff.DraftBox addNewDraft ( net.codemirror.lib.CodeMirror cm , int line ) { return addDraftBox ( com.google.gerrit.client.changes.CommentInfo.createLine ( path , getSideFromCm ( cm ) , ( line + 1 ) , null , null ) ) ; }
public boolean equals ( java.lang.Object o ) { return ( o instanceof com.google.gerrit.gpg.Fingerprint ) && ( equalsBytes ( ( ( com.google.gerrit.gpg.Fingerprint ) ( o ) ) . fp ) ) ; }
static com.google.gerrit.client.account.AccountApi.HttpPasswordInput create ( ) { return createObject ( ) . cast ( ) ; }
public void onResize ( com.google.gwt.event.logical.shared.ResizeEvent event ) { cm.adjustHeight ( header.getOffsetHeight ( ) ) ; }
public void onSuccess ( com.google.gerrit.client.changes.ReviewInput result ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( changeId ) , new com.google.gerrit.client.change.ChangeScreen2 ( changeId , null , null , false , true ) ) ; }
public void destroy ( ) { com.google.gerrit.git.WorkQueue.terminate ( ) ; com.google.gerrit.server.GerritServer.closeDataSource ( ) ; super . destroy ( ) ; }
void replyTo ( com.google.gerrit.client.info.ChangeInfo.MessageInfo info ) { replyAction.onReply ( info ) ; }
public java.lang.String getContentType ( ) { java.nio.charset.Charset enc = getCharacterEncoding ( ) ; if ( enc != null ) { return ( ( contentType ) + "; charset=" ) + ( enc.name ( ) ) ; } return contentType ; }
public java.lang.String getLoggableName ( ) { return getUserName ( ) . orElseGet ( ( ) -> com.google.common.base.MoreObjects.firstNonNull ( getAccount ( ) . getPreferredEmail ( ) , ( "a/" + ( getAccountId ( ) . get ( ) ) ) ) ) ; }
public int compare ( com.google.gerrit.server.schema.Schema_65.AccountGroupAgreement a1 , com.google.gerrit.server.schema.Schema_65.AccountGroupAgreement a2 ) { return java.lang.Long.compare ( a1.getTime ( ) , a2.getTime ( ) ) ; }
public void onKeyPress ( final com.google.gwt.event.dom.client.KeyPressEvent event ) { if ( com.google.gerrit.client.Gerrit.isSignedIn ( ) ) { com.google.gerrit.client.Gerrit.display ( PageLinks.MINE ) ; } else { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChangeQuery ( "status:open" ) ) ; } }
void index ( com.google.gerrit.reviewdb.client.Account.Id id , com.ericsson.gerrit.plugins.highavailability.forwarder.rest.Operation operation ) throws java.io.IOException { indexer.index ( id ) ; com.ericsson.gerrit.plugins.highavailability.forwarder.rest.IndexAccountRestApiServlet.logger.debug ( "Account {} successfully indexed" , id ) ; updateIndexTs ( java.time.LocalDateTime.now ( ) ) ; }
public Account.Id getAssignee ( ) { return state.assignee ( ) ; }
public com.googlesource.gerrit.plugins.github.git.GHHook createHook ( java.lang.String name , java.util.Map < java.lang.String , java.lang.String > config , java.util.Collection < com.googlesource.gerrit.plugins.github.git.GHEvent > events , boolean active ) throws java.io.IOException { return ghRepository.createHook ( name , config , events , active ) ; }
public static com.google.gerrit.server.git.ProjectConfig read ( com.google.gerrit.server.git.meta.MetaDataUpdate update , org.eclipse.jgit.lib.ObjectId id ) throws java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { com.google.gerrit.server.git.ProjectConfig r = new com.google.gerrit.server.git.ProjectConfig ( update.getProjectName ( ) ) ; r.load ( update , id ) ; return r ; }
private static java.lang.StringBuilder buildRefsPrefix ( java.lang.String prefix , int id ) { java.lang.StringBuilder r = com.google.gerrit.reviewdb.client.RefNames.newStringBuilder ( ) . append ( prefix ) ; return com.google.gerrit.reviewdb.client.RefNames.shard ( id , r ) . append ( '/' ) ; }
public boolean canViewConnections ( ) { return ( canPerform ( GlobalCapability.VIEW_CONNECTIONS ) ) || ( canAdministrateServer ( ) ) ; }
private void init ( com.google.gerrit.reviewdb.client.Project.NameKey project , org.eclipse.jgit.transport.ReceivePack rp ) { for ( com.google.gerrit.server.git.ReceivePackInitializer initializer : receivePackInitializers ) { initializer.init ( project , rp ) ; } }
public void listTagsOfNonVisibleProject ( ) throws java.lang.Exception { blockRead ( "refs/*" ) ; userRestSession.get ( ( ( "/projects/" + ( project.get ( ) ) ) + "/tags" ) ) . assertNotFound ( ) ; }
public java.lang.String apply ( com.google.gerrit.extensions.api.projects.CommentLinkInfo input ) { return input.match ; }
private void assertNoProblems ( com.google.gerrit.server.notedb.ChangeNotes notes , @ com.google.gerrit.common.Nullable com.google.gerrit.extensions.api.changes.FixInput fix ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( checker.check ( controlForNotes ( notes ) , fix ) . problems ( ) ) . isEmpty ( ) ; }
public void postEvent ( com.google.gerrit.reviewdb.client.Branch.NameKey branchName , com.google.gerrit.common.Event event ) { fireEvent ( branchName , event ) ; }
public static UnifiedPatchScreen.TopView getPatchScreenTopView ( ) { if ( ( com.google.gerrit.client.Gerrit.patchScreen ) == null ) { return null ; } return com.google.gerrit.client.Gerrit.patchScreen.getTopView ( ) ; }
private void commit ( com.google.gerrit.server.group.db.GroupNameNotes groupNameNotes ) throws java.io.IOException { try ( com.google.gerrit.server.git.meta.MetaDataUpdate metaDataUpdate = createMetaDataUpdate ( ) ) { groupNameNotes.commit ( metaDataUpdate ) ; } }
public void putApprovalFor ( com.google.gerrit.reviewdb.client.Account.Id reviewer , java.lang.String label , short value ) { approvals.put ( label , reviewer , java.util.Optional.of ( value ) ) ; }
public void onFocus ( com.google.gwt.event.dom.client.FocusEvent event ) { if ( Util.C.defaultProjectName ( ) . equals ( nameBox.getText ( ) ) ) { nameBox.setText ( "" ) ; nameBox.removeStyleName ( Gerrit.RESOURCES.css ( ) . inputFieldTypeHint ( ) ) ; } }
com.google.gerrit.server.index.IndexConfig getIndexConfig ( @ com.google.gerrit.server.config.GerritServerConfig org.eclipse.jgit.lib.Config cfg ) { return com.google.gerrit.server.index.IndexConfig.fromConfig ( cfg ) . separateChangeSubIndexes ( true ) . build ( ) ; }
public void setContext ( final int ctx ) { assert ( 0 <= ctx ) || ( ctx == ( com.google.gerrit.reviewdb.AccountDiffPreference.WHOLE_FILE_CONTEXT ) ) ; context = ctx ; }
private void initPatchSet ( ) throws com.google.gwtorm.server.OrmException { if ( ( patchSet ) == null ) { patchSet = cd.currentPatchSet ( ) ; } }
public void onSuccess ( final com.google.gwtjsonrpc.client.VoidResult result ) { cbox.setEnabled ( true ) ; }
private java.util.List < com.google.gerrit.common.data.SubmitRecord > ruleError ( java.lang.String err ) { return ruleError ( err , null ) ; }
public < T extends com.google.gwt.core.client.JavaScriptObject > void post ( com.google.gwt.core.client.JavaScriptObject content , com.google.gwt.user.client.rpc.AsyncCallback < T > cb ) { post ( content , com.google.gerrit.client.rpc.RestApi.wrap ( cb ) ) ; }
public void rebuildAndCheckAllChanges ( ) throws java.lang.Exception { rebuildAndCheckChanges ( com.google.common.collect.Iterables.transform ( getUnwrappedDb ( ) . changes ( ) . all ( ) , com.google.gerrit.reviewdb.server.ReviewDbUtil.changeIdFunction ( ) ) ) ; }
public java.util.List < com.google.gerrit.extensions.client.ProjectWatchInfo > getWatchedProjects ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return getWatchedProjects.apply ( account ) ; } catch ( com.google.gwtorm.server.OrmException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot get watched projects" , e ) ; } }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > putAsync ( final K key , final V value ) { return cache.putAsync ( wrapKey ( key ) , wrapValue ( value ) ) ; }
public void setSubject ( final java.lang.String s ) { if ( ( s != null ) && ( ( s.length ( ) ) > 255 ) ) { subject = s.substring ( 0 , 255 ) ; } else { subject = s ; } }
com.google.gerrit.extensions.api.changes.Changes.QueryRequest query ( java.lang.String query ) ;
com.google.gerrit.extensions.common.ParentInput newParentInput ( java.lang.String project ) { com.google.gerrit.extensions.common.ParentInput in = new com.google.gerrit.extensions.common.ParentInput ( ) ; in.parent = project ; return in ; }
void setId ( com.google.gerrit.reviewdb.client.Account.Id i ) { accountId = i.get ( ) ; id = com.google.gerrit.extensions.restapi.Url.encode ( java.lang.Integer.toString ( accountId ) ) ; }
public com.google.gerrit.server.events.AccountAttribute asAccountAttribute ( final com.google.gerrit.reviewdb.client.Account account ) { com.google.gerrit.server.events.AccountAttribute who = new com.google.gerrit.server.events.AccountAttribute ( ) ; who.name = account.getFullName ( ) ; who.email = account.getPreferredEmail ( ) ; who.username = account.getUserName ( ) ; return who ; }
static org.eclipse.jgit.lib.Config readDefaultConfig ( org.eclipse.jgit.lib.Repository allUsersRepo ) throws java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { com.google.gerrit.server.account.Preferences.VersionedDefaultPreferences defaultPrefs = new com.google.gerrit.server.account.Preferences.VersionedDefaultPreferences ( ) ; defaultPrefs.load ( allUsersRepo ) ; return defaultPrefs.getConfig ( ) ; }
public void onSuccess ( com.google.gerrit.client.rpc.NativeMap < com.google.gwt.core.client.JsArray < com.google.gerrit.client.changes.CommentInfo > > result ) { addComments ( revisionNumber , result ) ; update ( revisionNumber ) ; -- ( active ) ; start ( ) ; }
public void onRemoveByKeys ( org.eclipse.jgit.lib.ObjectId newNotesRev , com.google.gerrit.reviewdb.client.Account.Id accountId , java.lang.Iterable < com.google.gerrit.server.account.externalids.ExternalId.Key > extIdKeys ) { }
public void index ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { index.apply ( account , new com.google.gerrit.server.account.Index.Input ( ) ) ; } catch ( java.io.IOException | com.google.gerrit.server.permissions.PermissionBackendException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot index account" , e ) ; } }
protected void format ( ) { formatSalutation ( ) ; formatChangeDetail ( ) ; appendText ( "\n" ) ; appendText ( ( ( " " + ( getPullUrl ( ) ) ) + "\n" ) ) ; }
private void setupDefaultOperations ( ) { new org.eclipse.example.calc.internal.operations.Equals ( ) ; new org.eclipse.example.calc.internal.operations.Minus ( ) ; new org.eclipse.example.calc.internal.operations.Plus ( ) ; new org.eclipse.example.calc.internal.operations.Square ( ) ; new org.eclipse.example.calc.internal.operations.Divide ( ) ; }
public void onFailure ( final java.lang.Throwable caught ) { if ( com.google.gerrit.client.rpc.RestApi.isNotFound ( caught ) ) { display ( null ) ; display ( ) ; } else { super . onFailure ( caught ) ; } }
public final java.lang.Class < ? extends org.kohsuke.args4j.spi.OptionHandler < java.lang.Short > > handler ( ) { return com.google.gerrit.server.ssh.commands.CmdOption.Handler.class ; }
public void delete ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { deleteDraft.apply ( revision , null ) ; } catch ( com.google.gerrit.server.git.UpdateException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot delete draft ps" , e ) ; } }
public static java.lang.String refsDraftComments ( com.google.gerrit.reviewdb.client.Account.Id accountId , com.google.gerrit.reviewdb.client.Change.Id changeId ) { java.lang.StringBuilder r = com.google.gerrit.reviewdb.client.RefNames.buildRefsPrefix ( com.google.gerrit.reviewdb.client.RefNames.REFS_DRAFT_COMMENTS , accountId ) ; r.append ( changeId.get ( ) ) ; return r.toString ( ) ; }
private boolean checkConnection ( ) { com.ericsson.gerrit.plugins.eventslog.SQLStore.log.info ( "Checking database connection..." ) ; try { eventsDb.queryOne ( ) ; return true ; } catch ( java.sql.SQLException e ) { com.ericsson.gerrit.plugins.eventslog.SQLStore.log.debug ( "Problem checking database connection" , e ) ; return false ; } }
public void assertStatus ( int status ) throws java.lang.Exception { com.google.common.truth.Truth.assertWithMessage ( java.lang.String.format ( "Expected status code %d" , status ) ) . that ( getStatusCode ( ) ) . isEqualTo ( status ) ; }
public void testNeedsUrlEncoding ( ) throws java.net.URISyntaxException { com.google.common.truth.Truth.assertThat ( com.googlesource.gerrit.plugins.replication.Destination.needsUrlEncoding ( new org.eclipse.jgit.transport.URIish ( "http://host/path" ) ) ) . isTrue ( ) ; com.google.common.truth.Truth.assertThat ( com.googlesource.gerrit.plugins.replication.Destination.needsUrlEncoding ( new org.eclipse.jgit.transport.URIish ( "https://host/path" ) ) ) . isTrue ( ) ; com.google.common.truth.Truth.assertThat ( com.googlesource.gerrit.plugins.replication.Destination.needsUrlEncoding ( new org.eclipse.jgit.transport.URIish ( "amazon-s3://config/bucket/path" ) ) ) . isTrue ( ) ; com.google.common.truth.Truth.assertThat ( com.googlesource.gerrit.plugins.replication.Destination.needsUrlEncoding ( new org.eclipse.jgit.transport.URIish ( "host:path" ) ) ) . isFalse ( ) ; com.google.common.truth.Truth.assertThat ( com.googlesource.gerrit.plugins.replication.Destination.needsUrlEncoding ( new org.eclipse.jgit.transport.URIish ( "user@host:path" ) ) ) . isFalse ( ) ; com.google.common.truth.Truth.assertThat ( com.googlesource.gerrit.plugins.replication.Destination.needsUrlEncoding ( new org.eclipse.jgit.transport.URIish ( "git://host/path" ) ) ) . isFalse ( ) ; com.google.common.truth.Truth.assertThat ( com.googlesource.gerrit.plugins.replication.Destination.needsUrlEncoding ( new org.eclipse.jgit.transport.URIish ( "ssh://host/path" ) ) ) . isFalse ( ) ; }
private void initSignatures ( ) { setSignatureFactories ( java.util.Arrays.< org.apache.sshd.common.NamedFactory < org.apache.sshd.common.Signature > > asList ( new org.apache.sshd.common.signature.SignatureDSA.Factory ( ) , new org.apache.sshd.common.signature.SignatureRSA.Factory ( ) , new org.apache.sshd.common.signature.SignatureECDSA.NISTP256Factory ( ) , new org.apache.sshd.common.signature.SignatureECDSA.NISTP384Factory ( ) , new org.apache.sshd.common.signature.SignatureECDSA.NISTP521Factory ( ) ) ) ; }
com.google.gerrit.index.project.ProjectIndexer getProjectIndexer ( com.google.gerrit.server.index.project.ProjectIndexerImpl.Factory factory , com.google.gerrit.index.project.ProjectIndexCollection indexes ) { return factory.create ( indexes ) ; }
public com.google.gerrit.index.query.DataSource < com.google.gerrit.server.project.ProjectData > getSource ( com.google.gerrit.index.query.Predicate < com.google.gerrit.server.project.ProjectData > p , com.google.gerrit.index.QueryOptions opts ) throws com.google.gerrit.index.query.QueryParseException { return new com.google.gerrit.elasticsearch.ElasticProjectIndex.QuerySource ( p , opts ) ; }
public com.googlesource.gerrit.plugins.github.git.GitJobStatus getStatus ( ) { return status ; }
static com.google.gerrit.server.notedb.NotesMigration.Snapshot.Builder builder ( ) { return com.google.gerrit.server.notedb.NotesMigration.Snapshot.create ( new org.eclipse.jgit.lib.Config ( ) ) . toBuilder ( ) ; }
public com.google.common.base.Optional < com.google.gerrit.server.plugins.PluginEntry > getEntry ( java.lang.String resourcePath ) { return com.google.common.base.Optional.absent ( ) ; }
private static com.google.gerrit.client.rpc.RestApi group ( java.lang.String group ) { return new com.google.gerrit.client.rpc.RestApi ( "/groups/" ) . id ( group ) ; }
public static com.google.gerrit.index.query.Predicate < com.google.gerrit.server.project.ProjectData > name ( com.google.gerrit.reviewdb.client.Project.NameKey nameKey ) { return new com.google.gerrit.server.query.project.ProjectPredicates.ProjectPredicate ( com.google.gerrit.server.index.project.ProjectField.NAME , nameKey.get ( ) ) ; }
public static com.google.gerrit.client.changes.ChangeInfo.RevisionInfo fromEdit ( com.google.gerrit.client.changes.ChangeInfo.EditInfo edit ) { com.google.gerrit.client.changes.ChangeInfo.RevisionInfo revisionInfo = createObject ( ) . cast ( ) ; revisionInfo.takeFromEdit ( edit ) ; return revisionInfo ; }
public void setSortKey ( final java.lang.String newSortKey ) { sortKey = newSortKey ; sortKeyDesc = java.lang.Long.toHexString ( ( ( - 1L ) - ( java.lang.Long.parseLong ( sortKey , 16 ) ) ) ) ; }
boolean canRenderEntireFile ( com.google.gerrit.client.account.DiffPreferences prefs ) { return ( ( fileSize.compareTo ( com.google.gerrit.client.diff.DiffScreen.FileSize.HUGE ) ) < 0 ) || ( ( ( prefs.context ( ) ) != ( com.google.gerrit.extensions.client.DiffPreferencesInfo.WHOLE_FILE_CONTEXT ) ) && ( ( prefs.context ( ) ) < 100 ) ) ; }
public boolean matches ( com.google.gerrit.server.account.ExternalId extId ) { return matches ( extId.key ( ) . get ( ) ) ; }
public com.google.gwtorm.server.ResultSet < com.google.gerrit.reviewdb.client.PatchSetApproval > byChange ( com.google.gerrit.reviewdb.client.Change.Id id ) { throw new java.lang.UnsupportedOperationException ( com.google.gerrit.reviewdb.server.DisabledChangesReviewDbWrapper.MSG ) ; }
public org.eclipse.jgit.lib.RefUpdate.Result renameFile ( com.google.gerrit.server.edit.ChangeEdit edit , java.lang.String file , java.lang.String newFile ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.server.project.InvalidChangeOperationException , java.io.IOException { org.eclipse.jgit.revwalk.RevCommit editCommit = edit.getEditCommit ( ) ; return modify ( edit , new com.google.gerrit.server.edit.tree.RenameFileModification ( editCommit , file , newFile ) ) ; }
public boolean allowsEdit ( final com.google.gerrit.extensions.client.AccountFieldName field ) { return ! ( readOnlyAccountFields.contains ( field ) ) ; }
public void updateRepo ( com.google.gerrit.server.update.RepoContext ctx ) throws java.lang.Exception { ctx.addRefUpdate ( new org.eclipse.jgit.transport.ReceiveCommand ( edit.getEditCommit ( ) . copy ( ) , org.eclipse.jgit.lib.ObjectId.zeroId ( ) , edit.getRefName ( ) ) ) ; }
private static java.lang.String providersListToString ( java.lang.Iterable < com.google.gerrit.server.plugins.ServerPluginProvider > providersHandlers ) { return com.google.common.collect.Streams.stream ( providersHandlers ) . map ( ServerPluginProvider :: getProviderPluginName ) . collect ( java.util.stream.Collectors.joining ( ", " ) ) ; }
public boolean isOAuthLogin ( javax.servlet.http.HttpServletRequest request ) { return ( request.getRequestURI ( ) . indexOf ( OAuthConfig.OAUTH_LOGIN ) ) >= 0 ; }
private final native java.lang.String configured_valueRaw ( ) ;
public static com.google.gerrit.server.index.IndexConfig createDefault ( ) { return com.google.gerrit.server.index.IndexConfig.create ( 0 , 0 , com.google.gerrit.server.index.IndexConfig.DEFAULT_MAX_TERMS , com.google.gerrit.server.index.IndexConfig.DEFAULT_MAX_PREFIX_TERMS ) ; }
public void noNotificationForPrivateChangesForWatchersInNotifyConfig ( ) throws java.lang.Exception { com.google.gerrit.server.mail.Address addr = new com.google.gerrit.server.mail.Address ( "Watcher" , "watcher@example.com" ) ; com.google.gerrit.server.git.NotifyConfig nc = new com.google.gerrit.server.git.NotifyConfig ( ) ; nc.addEmail ( addr ) ; nc.setName ( "team" ) ; nc.setHeader ( NotifyConfig.Header.TO ) ; nc.setTypes ( java.util.EnumSet.of ( NotifyType.NEW_CHANGES , NotifyType.ALL_COMMENTS ) ) ; com.google.gerrit.server.project.ProjectConfig cfg = projectCache.checkedGet ( project ) . getConfig ( ) ; cfg.putNotifyConfig ( "team" , nc ) ; saveProjectConfig ( project , cfg ) ; sender.clear ( ) ; com.google.gerrit.acceptance.PushOneCommit.Result r = pushFactory.create ( db , admin.getIdent ( ) , testRepo , "private change" , "a" , "a1" ) . to ( "refs/for/master%private" ) ; r.assertOkStatus ( ) ; com.google.common.truth.Truth.assertThat ( sender.getMessages ( ) ) . isEmpty ( ) ; setApiUser ( admin ) ; com.google.gerrit.extensions.api.changes.ReviewInput in = new com.google.gerrit.extensions.api.changes.ReviewInput ( ) ; in.message = "comment" ; gApi.changes ( ) . id ( r.getChangeId ( ) ) . current ( ) . review ( in ) ; com.google.common.truth.Truth.assertThat ( sender.getMessages ( ) ) . isEmpty ( ) ; }
public java.util.List < com.google.gerrit.server.query.change.ChangeData > toList ( ) { java.util.List < com.google.gerrit.server.query.change.ChangeData > r = rs.toList ( ) ; for ( com.google.gerrit.server.query.change.ChangeData cd : r ) { cd.cacheFromSource ( source ) ; } return r ; }
void evictAllNoReindex ( ) ;
public boolean containsComment ( com.google.gerrit.reviewdb.client.Comment c ) throws com.google.gwtorm.server.OrmException { if ( containsCommentPublished ( c ) ) { return true ; } loadDraftComments ( c.author.getId ( ) ) ; return draftCommentNotes.containsComment ( c ) ; }
void doClaSignupHook ( com.google.gerrit.reviewdb.client.Account account , java.lang.String claName ) ;
boolean canRebase ( ) { return ( canPerform ( Permission.REBASE ) ) && ( isProjectStatePermittingWrite ( ) ) ; }
public void testCreatePermissionOnlyProject ( ) throws java.io.IOException { final java.lang.String newProjectName = "newProject" ; com.google.gerrit.server.project.CreateProject.Input in = new com.google.gerrit.server.project.CreateProject.Input ( ) ; in.permissionsOnly = true ; session.put ( ( "/projects/" + newProjectName ) , in ) ; assertHead ( newProjectName , RefNames.REFS_CONFIG ) ; }
public java.lang.String getName ( ) { return clean ( name ) ; }
private java.lang.String readFile ( java.nio.file.Path p ) throws java.io.IOException { return java.nio.file.Files.exists ( p ) ? new java.lang.String ( java.nio.file.Files.readAllBytes ( p ) , java.nio.charset.StandardCharsets.UTF_8 ) : null ; }
java.util.Optional < com.google.gerrit.server.group.InternalGroup > get ( com.google.gerrit.reviewdb.client.AccountGroup.UUID groupUuid ) ;
void suggestReviewer ( com.google.gerrit.reviewdb.client.Project.NameKey project , java.lang.String query , int limit , com.google.gwtjsonrpc.common.AsyncCallback < java.util.List < com.google.gerrit.common.data.ReviewerInfo > > callback ) ;
AccountGroup.UUID getOwnerGroupUUID ( ) ;
public com.google.gwtorm.server.ResultSet < com.google.gerrit.server.query.change.ChangeData > read ( ) throws com.google.gwtorm.server.OrmException { return source.read ( ) ; }
protected void configure ( ) { get ( com.google.gerrit.server.project.ProjectResource.PROJECT_KIND , "reviewers" ) . to ( com.googlesource.gerrit.plugins.reviewers.GetReviewers.class ) ; put ( com.google.gerrit.server.project.ProjectResource.PROJECT_KIND , "reviewers" ) . to ( com.googlesource.gerrit.plugins.reviewers.PutReviewers.class ) ; get ( com.google.gerrit.server.project.ProjectResource.PROJECT_KIND , "suggest_reviewers" ) . to ( com.googlesource.gerrit.plugins.reviewers.SuggestProjectReviewers.class ) ; }
public com.google.gerrit.httpd.raw.BazelBuild.Label gwtZipLabel ( java.lang.String agent ) { return new com.google.gerrit.httpd.raw.BazelBuild.Label ( "gerrit-gwtui" , ( ( "ui_" + agent ) + ".zip" ) ) ; }
com.google.gerrit.server.update.RepoView getRepoView ( ) throws java.io.IOException ;
public void run ( ) { try { synchronized ( list ) { list.add ( this ) ; } runImp ( ) ; } finally { synchronized ( list ) { list.remove ( this ) ; } } }
private void inject ( ) { dbInjector = createDbInjector ( com.google.gerrit.pgm.util.DataSourceProvider.Context.SINGLE_USER ) ; sysInjector = createSysInjector ( ) ; sysInjector.injectMembers ( this ) ; }
public net.sf.ehcache.statistics.sampled.SampledCacheStatistics getSampledCacheStatistics ( ) { return self ( ) . getSampledCacheStatistics ( ) ; }
public void testNoAdvance ( ) { com.google.gerrit.client.diff.SideBySide2.EditIterator iter = new com.google.gerrit.client.diff.SideBySide2.EditIterator ( lines , 0 ) ; assertLineChsEqual ( net.codemirror.lib.LineCharacter.create ( 0 ) , iter.advance ( 0 ) ) ; }
java.util.Set < com.google.gerrit.extensions.webui.UiCommand.Place > getPlaces ( ) ;
public void setUp ( ) throws java.lang.Exception { com.google.gerrit.acceptance.GitUtil.fetch ( git , ( ( com.google.gerrit.reviewdb.client.RefNames.REFS_CONFIG ) + ":refs/heads/config" ) ) ; testRepo.reset ( "refs/heads/config" ) ; }
java.lang.String idFromHeader ( org.pegdown.ast.HeaderNode header ) { java.lang.String t = com.google.gitiles.doc.MarkdownUtil.getInnerText ( header ) ; return t != null ? com.google.gitiles.doc.TocFormatter.idFromTitle ( t ) : null ; }
public com.google.gerrit.server.project.ProjectControl forUser ( com.google.gerrit.server.CurrentUser who ) { com.google.gerrit.server.project.ProjectControl r = state.controlFor ( who ) ; r.allSections = allSections ; return r ; }
public void insert ( java.lang.Iterable < T > instances ) throws com.google.gwtorm.client.OrmException { for ( T obj : instances ) { insertOne ( obj ) ; } maybeFlush ( ) ; }
public void onRpcStart ( final com.google.gwtjsonrpc.client.RpcStartEvent event ) { if ( ( ++ ( activeCalls ) ) == 1 ) { if ( ( com.google.gerrit.client.RpcStatus.hideDepth ) == 0 ) { loading.setVisible ( true ) ; } } }
void onLogout ( ) { async.append ( log ( "LOGOUT" ) ) ; audit ( context.get ( ) , "0" , "LOGOUT" , new java.lang.String [ ] { } ) ; }
public static com.google.gerrit.client.rpc.RestApi comments ( @ com.google.gerrit.common.Nullable java.lang.String project , int id ) { return com.google.gerrit.client.changes.ChangeApi.call ( project , id , "comments" ) ; }
protected void configureServlets ( ) { if ( ( authConfig.getLoginUrl ( ) ) == null ) { filter ( "/" ) . through ( com.google.gerrit.httpd.auth.container.HttpAuthFilter.class ) ; } serve ( "/login" , "/login/*" ) . with ( com.google.gerrit.httpd.auth.container.HttpLoginServlet.class ) ; }
private com.google.gerrit.reviewdb.client.Project fetchGerritProject ( com.google.gerrit.server.project.ProjectCache projectCache , java.lang.String organisation , java.lang.String repoName ) { com.google.gerrit.reviewdb.client.Project.NameKey projectNameKey = Project.NameKey.parse ( ( ( organisation + "/" ) + repoName ) ) ; com.google.gerrit.server.project.ProjectState projectState = projectCache.get ( projectNameKey ) ; return projectState.getProject ( ) ; }
static java.lang.Boolean isForwardedEvent ( ) { return com.ericsson.gerrit.plugins.multimaster.Context.FORWARDED_EVENT.get ( ) ; }
private static java.lang.StringBuffer toGerrit ( final javax.servlet.http.HttpServletRequest req ) { final java.lang.StringBuffer url = new java.lang.StringBuffer ( ) ; url.append ( req.getContextPath ( ) ) ; url.append ( "/" ) ; return url ; }
public void move ( java.lang.String destination ) throws com.google.gerrit.extensions.restapi.RestApiException { com.google.gerrit.extensions.api.changes.MoveInput in = new com.google.gerrit.extensions.api.changes.MoveInput ( ) ; in.destinationBranch = destination ; move ( in ) ; }
public void testKeyIdToString ( ) throws java.lang.Exception { org.bouncycastle.openpgp.PGPPublicKey key = com.google.gerrit.gpg.testutil.TestKeys.validKeyWithoutExpiration ( ) . getPublicKey ( ) ; org.junit.Assert.assertEquals ( "46328A8C" , com.google.gerrit.gpg.PublicKeyStore.keyIdToString ( key.getKeyID ( ) ) ) ; }
public com.google.gerrit.server.CurrentUser getUser ( ) { if ( ! ( ReviewAssistant.realUser ) ) { return pluginUser ; } else { return identifiedUserFactory.create ( change.getOwner ( ) ) ; } }
public void run ( ) { java.lang.String token = host.getToken ( ) ; if ( cm.hasActiveLine ( ) ) { net.codemirror.lib.CodeMirror.LineHandle handle = cm.activeLine ( ) ; int line = ( cm.getLineNumber ( handle ) ) + 1 ; token += ( "@" + ( ( cm.side ( ) ) == ( DisplaySide.A ) ? "a" : "" ) ) + line ; } com.google.gerrit.client.Gerrit.doSignIn ( token ) ; }
public void visit ( org.pegdown.ast.TableHeaderNode node ) { mustBeInsideTable ( node ) ; table.inHeader = true ; wrapChildren ( "thead" , node ) ; table.inHeader = false ; }
public java.lang.String getUrl ( ) { return null ; }
com.google.gerrit.server.project.ChangeControl create ( com.google.gerrit.server.project.RefControl refControl , com.google.gerrit.server.notedb.ChangeNotes notes ) { return new com.google.gerrit.server.project.ChangeControl ( changeDataFactory , approvalsUtil , refControl , notes ) ; }
public com.google.gerrit.server.diff.DiffSummary.ChangedLines getChangedLines ( ) { return new com.google.gerrit.server.diff.DiffSummary.ChangedLines ( insertions , deletions ) ; }
public void onFailure ( java.lang.Throwable err ) { getTab ( ) . setTitle ( Resources.M.sameTopic ( Resources.C.notAvailable ( ) ) ) ; getTab ( ) . setError ( err.getMessage ( ) ) ; }
public static void addGpgKey ( java.lang.String account , java.lang.String armored , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.rpc.NativeMap < com.google.gerrit.client.info.GpgKeyInfo > > cb ) { new com.google.gerrit.client.rpc.RestApi ( "/accounts/" ) . id ( account ) . view ( "gpgkeys" ) . post ( com.google.gerrit.client.account.AccountApi.GpgKeysInput.add ( armored ) , cb ) ; }
public void onSuccess ( com.google.gerrit.common.data.PatchSetDetail result ) { if ( ( actionsPanel ) != null ) { actionsPanel.setVisible ( true ) ; } else { loadActionPanel ( result ) ; } loadPatchTable ( result ) ; }
public boolean isDislikeWarnings ( ) { return dislikeWarnings ; }
public com.google.gerrit.extensions.restapi.RestView < com.google.gerrit.server.change.RevisionResource > list ( ) throws com.google.gerrit.extensions.restapi.AuthException { return new com.google.gerrit.server.change.Files.List ( ) ; }
javax.naming.directory.Attribute getAll ( final java.lang.String attName ) { return atts.get ( attName ) ; }
public java.util.Set < com.google.gerrit.reviewdb.client.Account.Id > editsByUser ( ) throws com.google.gwtorm.server.OrmException { return editRefs ( ) . keySet ( ) ; }
public void onSuccess ( com.google.gerrit.client.rpc.HttpResponse < com.google.gerrit.client.rpc.NativeString > fc ) { baseContent = fc ; group3.done ( ) ; }
public void setIntHeader ( java.lang.String name , int value ) { headers.removeAll ( name ) ; addIntHeader ( name , value ) ; }
java.lang.String getRemoteUser ( javax.servlet.http.HttpServletRequest req ) { java.lang.String remoteUser = com.google.gerrit.httpd.RemoteUserUtil.getRemoteUser ( req , loginHeader ) ; return userNameToLowerCase ? remoteUser.toLowerCase ( java.util.Locale.US ) : remoteUser ; }
public void setUp ( ) throws java.lang.Exception { admin = accounts.create ( "admin" , "admin@example.com" , "Administrator" , "Administrators" ) ; com.google.gerrit.acceptance.SshSession sshSession = new com.google.gerrit.acceptance.SshSession ( server , admin ) ; project1 = new com.google.gerrit.reviewdb.client.Project.NameKey ( "p1" ) ; com.google.gerrit.acceptance.GitUtil.createProject ( sshSession , project1.get ( ) ) ; project2 = new com.google.gerrit.reviewdb.client.Project.NameKey ( "p2" ) ; com.google.gerrit.acceptance.GitUtil.createProject ( sshSession , project2.get ( ) ) ; sshSession.close ( ) ; session = new com.google.gerrit.acceptance.RestSession ( server , admin ) ; }
protected void configure ( ) { get ( com.google.gerrit.server.project.ProjectResource.PROJECT_KIND , "reviewers" ) . to ( com.googlesource.gerrit.plugins.reviewers.GetReviewers.class ) ; put ( com.google.gerrit.server.project.ProjectResource.PROJECT_KIND , "reviewers" ) . to ( com.googlesource.gerrit.plugins.reviewers.PutReviewers.class ) ; get ( com.google.gerrit.server.project.ProjectResource.PROJECT_KIND , "suggest_reviewers" ) . to ( com.googlesource.gerrit.plugins.reviewers.SuggestProjectReviewers.class ) ; }
public void destroy ( ) { for ( com.google.gerrit.httpd.AllRequestFilter f : filters ) { f.destroy ( ) ; } }
public com.google.gerrit.extensions.common.WebLinkInfo getBranchWebLink ( java.lang.String projectName , java.lang.String branchName ) { return new com.google.gerrit.extensions.common.WebLinkInfo ( name , null , java.lang.String.format ( "%s/%s/+/%s" , baseUrl , projectName , branchName ) , target ) ; }
public org.apache.sshd.server.CommandFactory get ( ) { return new org.apache.sshd.server.CommandFactory ( ) { public com.google.gerrit.server.ssh.Command createCommand ( final java.lang.String requestCommand ) { final com.google.gerrit.server.ssh.DispatchCommand c = dispatcher.get ( ) ; c.setCommandLine ( requestCommand ) ; return c ; } } ; }
public static com.google.gwtexpui.safehtml.client.SafeHtml toSafeHtml ( final com.google.gerrit.client.reviewdb.PatchLineComment msg ) { return new com.google.gwtexpui.safehtml.client.SafeHtmlBuilder ( ) . append ( msg.getMessage ( ) . trim ( ) ) . wikify ( ) ; }
private static void export ( org.spearce.jgit.lib.RepositoryConfig config , java.sql.ResultSet rs ) throws java.sql.SQLException { com.google.gerrit.pgm.ConvertSystemConfig.sshd ( config , rs ) ; com.google.gerrit.pgm.ConvertSystemConfig.contactstore ( config , rs ) ; }
private static long getLastModified ( com.googlesource.gerrit.plugins.replication.ReplicationFileBasedConfig cfg ) { return com.google.gerrit.common.FileUtil.lastModified ( cfg.getCfgPath ( ) ) ; }
void addRef ( final java.lang.String ref ) { if ( com.google.gerrit.git.PushOp.MIRROR_ALL.equals ( ref ) ) { delta.clear ( ) ; mirror = true ; } else if ( ! ( mirror ) ) { delta.add ( ref ) ; } }
private void fail ( com.google.gerrit.reviewdb.client.Project.NameKey project , java.lang.Throwable t ) { com.google.gerrit.pgm.Reindex.log.error ( ( "Failed to index project " + project ) , t ) ; ok.set ( false ) ; }
private long extractCreated ( final com.google.gerrit.sshd.SshScope.Context ctx ) { return ctx != null ? ctx.created : com.google.gerrit.server.util.TimeUtil.nowMs ( ) ; }
public void run ( ) { if ( ! ( isConnected ( ) ) ) { com.googlesource.gerrit.plugins.rabbitmq.message.MessagePublisher.LOGGER.info ( "#start: try to reconnect" ) ; connect ( ) ; } }
public void listEmptyGroupMembers ( ) throws java.lang.Exception { java.lang.String group = createGroup ( "empty" ) ; com.google.common.truth.Truth.assertThat ( GET ( ( ( "/groups/" + group ) + "/members/" ) ) ) . isEmpty ( ) ; }
protected void configure ( ) { persist ( com.googlesource.gerrit.plugins.quota.MaxRepositorySizeQuota.REPO_SIZE_CACHE , Project.NameKey.class , java.util.concurrent.atomic.AtomicLong.class ) . loader ( com.googlesource.gerrit.plugins.quota.MaxRepositorySizeQuota.Loader.class ) . expireAfterWrite ( 1 , java.util.concurrent.TimeUnit.DAYS ) ; }
public com.google.gerrit.server.account.GroupControl validateFor ( com.google.gerrit.reviewdb.client.AccountGroup.UUID groupUUID ) throws com.google.gerrit.common.errors.NoSuchGroupException { final com.google.gerrit.server.account.GroupControl c = controlFor ( groupUUID ) ; if ( ! ( c.isVisible ( ) ) ) { throw new com.google.gerrit.common.errors.NoSuchGroupException ( groupUUID ) ; } return c ; }
public static void setCurrentMillisSupplier ( java.util.function.LongSupplier customCurrentMillisSupplier ) { com.google.gerrit.common.TimeUtil.currentMillisSupplier = customCurrentMillisSupplier ; org.eclipse.jgit.util.SystemReader oldSystemReader = org.eclipse.jgit.util.SystemReader.getInstance ( ) ; if ( ! ( oldSystemReader instanceof com.google.gerrit.common.TimeUtil.GerritSystemReader ) ) { org.eclipse.jgit.util.SystemReader.setInstance ( new com.google.gerrit.common.TimeUtil.GerritSystemReader ( oldSystemReader ) ) ; } }
private org.eclipse.jgit.junit.TestRepository < com.google.gerrit.testing.InMemoryRepositoryManager.Repo > newRepo ( java.lang.String name ) throws java.lang.Exception { return new org.eclipse.jgit.junit.TestRepository ( repoManager.createRepository ( new com.google.gerrit.reviewdb.client.Project.NameKey ( name ) ) ) ; }
private com.google.gerrit.extensions.auth.oauth.OAuthUserInfo getAsOAuthUserInfo ( com.googlesource.gerrit.plugins.cfoauth.AccessToken accessToken , java.lang.String displayName ) { return new com.google.gerrit.extensions.auth.oauth.OAuthUserInfo ( accessToken.getExternalId ( ) , accessToken.getUserName ( ) , accessToken.getEmailAddress ( ) , displayName , null ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { upToChange ( true ) . run ( ) ; }
void onExpandAll ( com.google.gwt.event.dom.client.ClickEvent e ) { expandAll ( ) ; updateSelection ( ) ; otherBar.updateSelection ( ) ; cm.focus ( ) ; }
public void onTabSelected ( com.google.gwt.user.client.ui.SourcesTabEvents sender , int tabIndex ) { com.google.gerrit.client.Gerrit.display ( tabTokens.get ( tabIndex ) , false ) ; }
public com.google.gerrit.extensions.api.changes.ChangeApi revert ( ) throws com.google.gerrit.extensions.restapi.RestApiException { throw new com.google.gerrit.extensions.restapi.NotImplementedException ( ) ; }
public com.google.gerrit.server.update.BatchUpdate addRepoOnlyOp ( com.google.gerrit.server.update.RepoOnlyOp op ) { com.google.common.base.Preconditions.checkArgument ( ( ! ( op instanceof com.google.gerrit.server.update.BatchUpdateOp ) ) , "use addOp()" ) ; repoOnlyOps.add ( op ) ; return this ; }
public com.google.gerrit.extensions.common.EditInfo applyFix ( java.lang.String fixId ) throws com.google.gerrit.extensions.restapi.RestApiException { throw new com.google.gerrit.extensions.restapi.NotImplementedException ( ) ; }
public void testNonIndexPredicate ( ) throws java.lang.Exception { com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > in = parse ( "foo:a" ) ; com.google.common.truth.Truth.assertThat ( in ) . isSameAs ( rewrite ( in ) ) ; }
public java.util.List < com.google.gerrit.extensions.common.AccountInfo > apply ( com.google.gerrit.server.group.GroupResource resource ) throws com.google.gerrit.extensions.restapi.MethodNotAllowedException , com.google.gwtorm.server.OrmException { com.google.gerrit.common.data.GroupDescription.Internal group = resource.asInternalGroup ( ) . orElseThrow ( MethodNotAllowedException :: new ) ; return apply ( group.getGroupUUID ( ) ) ; }
public com.googlesource.gerrit.plugins.its.phabricator.conduit.results.ManiphestEdit maniphestEdit ( int taskId , java.lang.Iterable < java.lang.String > projects , java.lang.String action ) throws com.googlesource.gerrit.plugins.its.phabricator.conduit.ConduitException { return maniphestEdit ( taskId , null , projects , action ) ; }
private void init ( org.eclipse.jgit.transport.ReceivePack rp ) { for ( com.google.gerrit.server.git.ReceivePackInitializer initializer : receivePackInitializers ) { initializer.init ( projectControl.getProject ( ) . getNameKey ( ) , rp ) ; } }
private static java.util.List < com.google.gerrit.common.auth.openid.OpenIdProviderPattern > toPatterns ( org.eclipse.jgit.lib.Config cfg , java.lang.String name ) { java.lang.String [ ] s = cfg.getStringList ( "auth" , null , name ) ; if ( ( s.length ) == 0 ) { s = new java.lang.String [ ] { "http://" , "https://" } ; } java.util.List < com.google.gerrit.common.auth.openid.OpenIdProviderPattern > r = new java.util.ArrayList < com.google.gerrit.common.auth.openid.OpenIdProviderPattern > ( ) ; for ( java.lang.String pattern : s ) { r.add ( com.google.gerrit.common.auth.openid.OpenIdProviderPattern.create ( pattern ) ) ; } return java.util.Collections.unmodifiableList ( r ) ; }
public void run ( ) { cm.getInputField ( ) . blur ( ) ; clearActiveLine ( cm ) ; clearActiveLine ( otherCm ( cm ) ) ; }
public Response.Action getDownloadAction ( org.eclipse.jgit.lfs.lib.AnyLongObjectId id ) { org.eclipse.jgit.lfs.server.Response.Action action = super . getDownloadAction ( id ) ; action.header = java.util.Collections.singletonMap ( org.eclipse.jgit.util.HttpSupport.HDR_AUTHORIZATION , authorizer.generateToken ( com.googlesource.gerrit.plugins.lfs.fs.LocalLargeFileRepository.DOWNLOAD , id , expirationSeconds ) ) ; return action ; }
private com.google.gitiles.doc.MarkdownToHtml readme ( com.google.gitiles.GitilesView v , java.lang.String path ) { return com.google.gitiles.doc.MarkdownToHtml.builder ( ) . setGitilesView ( v ) . setConfig ( new com.google.gitiles.doc.MarkdownConfig ( config ) ) . setFilePath ( path ) . build ( ) ; }
public void login ( final com.google.gerrit.client.reviewdb.Account.Id id , final boolean rememberMe ) { logout ( ) ; key = manager.createKey ( id ) ; val = manager.createVal ( key , id , rememberMe ) ; saveCookie ( ) ; }
public com.google.gerrit.server.diff.PatchListKey toPatchListKey ( ) { return new com.google.gerrit.server.diff.PatchListKey ( oldId , parentNum , newId , whitespace , PatchListKey.Algorithm.OPTIMIZED_DIFF ) ; }
protected com.google.gerrit.index.Schema < T > schema ( ) { com.google.gerrit.index.Index < ? , T > index = ( ( indexes ) != null ) ? indexes.getSearchIndex ( ) : null ; return index != null ? index.getSchema ( ) : null ; }
public com.google.gerrit.reviewdb.client.Change abandon ( com.google.gerrit.server.update.BatchUpdate.Factory updateFactory , com.google.gerrit.server.project.ChangeControl control , java.lang.String msgTxt ) throws com.google.gerrit.extensions.restapi.RestApiException , com.google.gerrit.server.update.UpdateException { return abandon ( updateFactory , control , msgTxt , defaultNotify ( control ) , com.google.common.collect.ImmutableListMultimap.of ( ) ) ; }
com.google.gerrit.pgm.init.Section get ( @ com.google.inject.assistedinject.Assisted ( value = "section" ) java.lang.String section , @ com.google.inject.assistedinject.Assisted ( value = "subsection" ) java.lang.String subsection ) ;
protected void service ( javax.servlet.http.HttpServletRequest req , javax.servlet.http.HttpServletResponse resp ) throws java.io.IOException { resp.sendError ( HttpServletResponse.SC_NOT_FOUND ) ; }
public java.util.Map < java.lang.String , com.google.gerrit.extensions.common.ActionInfo > actions ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return revisionActions.apply ( revision ) . value ( ) ; } catch ( com.google.gwtorm.server.OrmException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot get actions" , e ) ; } }
protected com.google.gerrit.server.notedb.ChangeUpdate newUpdate ( com.google.gerrit.reviewdb.client.Change c , com.google.gerrit.server.CurrentUser user ) throws java.lang.Exception { com.google.gerrit.server.notedb.ChangeUpdate update = com.google.gerrit.testutil.TestChanges.newUpdate ( injector , c , user ) ; update.setPatchSetId ( c.currentPatchSetId ( ) ) ; update.setAllowWriteToNewRef ( true ) ; return update ; }
public void onSuccess ( final com.google.gerrit.client.data.MineStarredInfo result ) { table.setAccountInfoCache ( result.getAccounts ( ) ) ; starred.display ( result.getStarred ( ) ) ; table.finishDisplay ( true ) ; }
private com.google.gerrit.extensions.restapi.Response < com.google.gerrit.server.change.ChangeJson.ChangeInfo > cache ( com.google.gerrit.server.change.ChangeJson.ChangeInfo res ) { return com.google.gerrit.extensions.restapi.Response.ok ( res ) . caching ( com.google.gerrit.extensions.restapi.CacheControl.PRIVATE ( 0 , java.util.concurrent.TimeUnit.SECONDS ) . setMustRevalidate ( ) ) ; }
com.google.gerrit.extensions.client.ChangeKind getChangeKind ( @ com.google.gerrit.common.Nullable org.eclipse.jgit.revwalk.RevWalk rw , @ com.google.gerrit.common.Nullable org.eclipse.jgit.lib.Config repoConfig , com.google.gerrit.server.query.change.ChangeData cd , com.google.gerrit.reviewdb.client.PatchSet patch ) ;
void onLogout ( ) { async.append ( log ( "LOGOUT" ) ) ; audit ( "0" , "LOGOUT" , new java.lang.String [ ] { } ) ; }
private void toggleCurrentRow ( ) { final com.google.gwt.user.client.ui.CheckBox cb = ( ( com.google.gwt.user.client.ui.CheckBox ) ( table.getWidget ( getCurrentRow ( ) , 1 ) ) ) ; cb.setValue ( ( ! ( cb.getValue ( ) ) ) ) ; }
private com.googlesource.gerrit.plugins.uploadvalidator.ValidatorConfig getConfig ( java.lang.String defaultConfig ) throws org.eclipse.jgit.errors.ConfigInvalidException { return new com.googlesource.gerrit.plugins.uploadvalidator.ValidatorConfig ( new com.googlesource.gerrit.plugins.uploadvalidator.FakeConfigFactory ( projectName , defaultConfig ) , new com.googlesource.gerrit.plugins.uploadvalidator.FakeGroupByNameFinder ( ) ) ; }
public boolean accept ( java.io.File pathname ) { java.lang.String n = pathname.getName ( ) ; return ( ( n.endsWith ( ".jar" ) ) || ( n.endsWith ( ".jar.disabled" ) ) ) && ( pathname.isFile ( ) ) ; }
private void appendLineText ( final com.google.gwtexpui.safehtml.client.SafeHtmlBuilder m , final com.google.gerrit.client.patches.PatchLine.Type type , final com.google.gerrit.prettify.client.SparseHtmlFile src , final int i , final boolean fullBlock ) { appendLineText ( m , type , src.getSafeHtmlLine ( i ) , src.hasTrailingEdit ( i ) , fullBlock ) ; }
public void checkChanges ( com.google.gerrit.reviewdb.client.Change ... changeIds ) throws java.lang.Exception { checkActual ( readExpected ( java.util.Arrays.stream ( changeIds ) ) , com.google.common.collect.ImmutableListMultimap.of ( ) , new java.util.ArrayList < > ( ) ) ; }
public com.google.gitiles.GitilesView.Builder setExtension ( java.lang.String extension ) { switch ( type ) { default : com.google.common.base.Preconditions.checkState ( ( extension == null ) , "cannot set extension on %s view" , type ) ; case ARCHIVE : this . extension = extension ; break ; } return this ; }
public static void deleteAssignee ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.info.AccountInfo > cb ) { com.google.gerrit.client.changes.ChangeApi.change ( project , id ) . view ( "assignee" ) . delete ( cb ) ; }
public void evictAll ( ) { byId.invalidateAll ( ) ; }
public com.google.gerrit.reviewdb.client.PatchSet get ( com.google.gerrit.reviewdb.client.PatchSet.Id id ) { throw new java.lang.UnsupportedOperationException ( com.google.gerrit.reviewdb.server.DisabledChangesReviewDbWrapper.MSG ) ; }
public final com.google.gerrit.index.IndexDefinition.IndexFactory < K , V , I > getIndexFactory ( ) { return indexFactory ; }
private synchronized void runHook ( com.google.common.base.Optional < java.nio.file.Path > hook , java.util.List < java.lang.String > args ) { if ( hook.isPresent ( ) ) { hookQueue.execute ( new com.google.gerrit.common.ChangeHookRunner.AsyncHookTask ( null , hook.get ( ) , args ) ) ; } }
public static void putContent ( com.google.gerrit.reviewdb.client.PatchSet.Id id , java.lang.String filename , java.lang.String content , com.google.gerrit.client.rpc.GerritCallback < com.google.gerrit.client.VoidResult > result ) { com.google.gerrit.client.changes.ChangeFileApi.contentEdit ( id.getParentKey ( ) , filename ) . put ( content , result ) ; }
public com.google.gerrit.reviewdb.client.CurrentSchemaVersion getSchemaVersion ( ) throws com.google.gwtorm.server.OrmException { try ( com.google.gerrit.reviewdb.server.ReviewDb c = open ( ) ) { return c.schemaVersion ( ) . get ( new com.google.gerrit.reviewdb.client.CurrentSchemaVersion.Key ( ) ) ; } }
public com.googlesource.gerrit.plugins.its.phabricator.conduit.results.ManiphestEdit maniphestEdit ( int taskId , java.lang.String comment ) throws com.googlesource.gerrit.plugins.its.phabricator.conduit.ConduitException { return maniphestEdit ( taskId , comment , null , com.googlesource.gerrit.plugins.its.phabricator.conduit.Conduit.ACTION_COMMENT ) ; }
public void setFocus ( boolean focused ) { suggestBox.setFocus ( focused ) ; }
private void group ( java.lang.String name , java.lang.String ownerGroup ) throws java.io.IOException { com.google.gerrit.server.group.CreateGroup.Input in = new com.google.gerrit.server.group.CreateGroup.Input ( ) ; in.ownerId = ownerGroup ; session.put ( ( "/groups/" + name ) , in ) . consume ( ) ; }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > apply ( java.util.List < ? > input ) throws java.lang.Exception { mpm.end ( ) ; return com.google.common.util.concurrent.Futures.immediateFuture ( null ) ; }
private boolean canRead ( com.google.gerrit.server.notedb.ChangeNotes notes ) throws com.google.gerrit.server.permissions.PermissionBackendException { return permissionBackend.user ( user ) . change ( notes ) . database ( db ) . test ( ChangePermission.READ ) ; }
private java.util.Optional < com.google.gerrit.server.edit.ChangeEdit > lookupChangeEdit ( com.google.gerrit.server.notedb.ChangeNotes notes ) throws com.google.gerrit.extensions.restapi.AuthException , java.io.IOException { return changeEditUtil.byChange ( notes ) ; }
public com.google.gerrit.extensions.common.ChangeInfo get ( java.util.EnumSet < com.google.gerrit.extensions.client.ListChangesOption > s ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return changeJson.create ( s ) . format ( change ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot retrieve change" , e ) ; } }
public void noNotificationForPrivateChangesForWatchersInNotifyConfig ( ) throws java.lang.Exception { com.google.gerrit.server.mail.Address addr = new com.google.gerrit.server.mail.Address ( "Watcher" , "watcher@example.com" ) ; com.google.gerrit.server.git.NotifyConfig nc = new com.google.gerrit.server.git.NotifyConfig ( ) ; nc.addEmail ( addr ) ; nc.setName ( "team" ) ; nc.setHeader ( NotifyConfig.Header.TO ) ; nc.setTypes ( java.util.EnumSet.of ( NotifyType.NEW_CHANGES , NotifyType.ALL_COMMENTS ) ) ; com.google.gerrit.server.git.ProjectConfig cfg = projectCache.checkedGet ( project ) . getConfig ( ) ; cfg.putNotifyConfig ( "team" , nc ) ; saveProjectConfig ( project , cfg ) ; sender.clear ( ) ; com.google.gerrit.acceptance.PushOneCommit.Result r = pushFactory.create ( db , admin.getIdent ( ) , testRepo , "private change" , "a" , "a1" ) . to ( "refs/for/master%private" ) ; r.assertOkStatus ( ) ; com.google.common.truth.Truth.assertThat ( sender.getMessages ( ) ) . isEmpty ( ) ; setApiUser ( admin ) ; com.google.gerrit.extensions.api.changes.ReviewInput in = new com.google.gerrit.extensions.api.changes.ReviewInput ( ) ; in.message = "comment" ; gApi.changes ( ) . id ( r.getChangeId ( ) ) . current ( ) . review ( in ) ; com.google.common.truth.Truth.assertThat ( sender.getMessages ( ) ) . isEmpty ( ) ; }
public void generateResultSetGet ( final com.google.gwtorm.server.CodeGenSupport cgs ) { cgs.fieldSetBegin ( ) ; cgs.pushSqlHandle ( ) ; cgs.pushColumnIndex ( ) ; cgs.invokeResultSetGet ( getJavaSqlTypeAlias ( ) ) ; cgs.fieldSetEnd ( ) ; }
protected org.apache.sshd.common.session.AbstractSession doCreateSession ( org.apache.sshd.common.io.IoSession ioSession ) throws java.lang.Exception { return new com.google.gerrit.sshd.GerritServerSession ( getServer ( ) , ioSession ) ; }
public java.lang.String apply ( com.google.gerrit.server.change.ChangeResource rsrc ) throws com.google.gerrit.server.project.NoSuchProjectException { com.google.gerrit.server.config.PluginConfig cfg = cfgFactory.getFromProjectConfig ( rsrc.getProject ( ) , pluginName ) ; return cfg.getString ( "changeInfo" ) ; }
private void initCodeRepo ( ) throws java.io.IOException { if ( ( codeRepo ) == null ) { codeRepo = openRepo ( projectName , false ) ; } }
com.google.gerrit.server.notedb.NoteDbUpdateManager.OpenRepo getCodeRepo ( ) throws java.io.IOException { initCodeRepo ( ) ; return codeRepo ; }
void patchSetDetail2 ( com.google.gerrit.reviewdb.PatchSet.Id baseId , com.google.gerrit.reviewdb.PatchSet.Id key , com.google.gerrit.reviewdb.AccountDiffPreference diffPrefs , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.common.data.PatchSetDetail > callback ) ;
public void setUp ( ) throws java.lang.Exception { com.google.gerrit.acceptance.TestAccount admin = accounts.admin ( ) ; adminSession = new com.google.gerrit.acceptance.RestSession ( server , admin ) ; com.google.gerrit.acceptance.TestAccount user = accounts.create ( "user" , "user@example.com" , "User" ) ; userSession = new com.google.gerrit.acceptance.RestSession ( server , user ) ; project = new com.google.gerrit.reviewdb.client.Project.NameKey ( "p" ) ; branch = new com.google.gerrit.reviewdb.client.Branch.NameKey ( project , "test" ) ; com.google.gerrit.acceptance.GitUtil.initSsh ( admin ) ; com.google.gerrit.acceptance.SshSession sshSession = new com.google.gerrit.acceptance.SshSession ( server , admin ) ; try { com.google.gerrit.acceptance.GitUtil.createProject ( sshSession , project.get ( ) , null , true ) ; } finally { sshSession.close ( ) ; } adminSession.put ( ( ( ( "/projects/" + ( project.get ( ) ) ) + "/branches/" ) + ( branch.getShortName ( ) ) ) ) . consume ( ) ; }
public static java.lang.String op ( java.lang.String op , java.lang.String value ) { if ( com.google.gerrit.common.PageLinks.isSingleWord ( value ) ) { return ( op + ":" ) + value ; } return ( ( op + ":\"" ) + value ) + "\"" ; }
public void testCustomTopLevelDomain ( ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( validator.isValid ( "foo@bar.local" ) ) . isFalse ( ) ; com.google.common.truth.Truth.assertThat ( validator.isValid ( "foo@bar.example" ) ) . isTrue ( ) ; com.google.common.truth.Truth.assertThat ( validator.isValid ( "foo@example" ) ) . isTrue ( ) ; }
public com.google.gerrit.server.change.ChangeJson addOption ( com.google.gerrit.common.changes.ListChangesOption o ) { options.add ( o ) ; return this ; }
public void run ( ) { if ( cm.hasVimSearchHighlight ( ) ) { net.codemirror.lib.CodeMirror.handleVimKey ( cm , "n" ) ; } else { diffChunkNav ( cm , false ) . run ( ) ; } }
public void index ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.reviewdb.client.Change.Id changeId ) throws com.google.gwtorm.server.OrmException , java.io.IOException { index ( newChangeData ( db , project , changeId ) ) ; }
void onEditSetting ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { editPrefsAction.show ( ) ; }
public void deleteBranch_Forbidden ( ) throws java.lang.Exception { setApiUser ( user ) ; assertDeleteForbidden ( testBranch ) ; }
public com.google.gerrit.server.IdentifiedUser create ( final com.google.gerrit.server.AccessPath accessPath , final com.google.gerrit.reviewdb.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( capabilityControlFactory , accessPath , authConfig , anonymousCowardName , canonicalUrl , realm , accountCache , groupIncludeCache , remotePeerProvider , dbProvider , id ) ; }
static com.google.gerrit.server.query.change.ChangeData createForTest ( com.google.gerrit.reviewdb.client.Change.Id id ) { return new com.google.gerrit.server.query.change.ChangeData ( null , null , null , null , null , null , id ) ; }
public void start ( ) { com.google.gerrit.server.index.GerritIndexStatus cfg = createIndexStatus ( ) ; for ( com.google.gerrit.index.IndexDefinition < ? , ? , ? > def : defs.values ( ) ) { initIndex ( def , cfg ) ; } }
public void onSuccess ( T value ) { this . result = value ; success ( this ) ; }
public org.eclipse.jgit.lib.ObjectId getNewId ( ) { if ( ( newId ) == null ) { newId = org.eclipse.jgit.lib.ObjectId.fromString ( newIdName ) ; } return newId ; }
, @ com.google.gerrit.acceptance.GerritConfig ( name = "suggest.fullTextSearchMaxMatches" , value = "2" ) } ) public void suggestReviewersFullTextSearchLimitMaxMatches ( ) throws java.lang.Exception { java.lang.String changeId = createChange ( ) . getChangeId ( ) ; java.util.List < com.google.gerrit.server.change.SuggestReviewers.SuggestedReviewerInfo > reviewers = suggestReviewers ( changeId , "ser" , 3 ) ; com.google.common.truth.Truth.assertThat ( reviewers ) . hasSize ( 2 ) ; }
public void setUp ( ) throws java.lang.Exception { group1 = group ( "users1" ) ; group ( "users2" ) ; group ( "users3" ) ; user1 = accounts.create ( "user1" , "user1@example.com" , "User1" , "users1" ) ; user2 = accounts.create ( "user2" , "user2@example.com" , "User2" , "users2" ) ; user3 = accounts.create ( "user3" , "user3@example.com" , "User3" , "users1" , "users2" ) ; }
public com.google.gerrit.client.ui.Screen recycleThis ( final com.google.gerrit.client.ui.Screen newScreen ) { final com.google.gerrit.client.account.AccountSettings s = ( ( com.google.gerrit.client.account.AccountSettings ) ( newScreen ) ) ; initialTabToken = s.initialTabToken ; return this ; }
protected final com.google.gerrit.util.cli.CmdLineParser newCmdLineParser ( java.lang.Object options ) { final com.google.gerrit.util.cli.CmdLineParser parser = super . newCmdLineParser ( options ) ; for ( com.google.gerrit.sshd.commands.ApproveOption c : optionList ) { parser.addOption ( c , c ) ; } return parser ; }
void changeProjectSettings ( com.google.gerrit.client.reviewdb.Project update , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.admin.ProjectDetail > callback ) ;
public void setMatchRegex ( java.lang.String matchRegex ) { this . matchRegex = matchRegex ; }
void cacheVisibleTo ( com.google.gerrit.server.project.ChangeControl ctl ) { visibleTo = ctl.getUser ( ) ; changeControl = ctl ; }
void changeProjectSettings ( com.google.gerrit.reviewdb.client.Project update , com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.ProjectDetail > callback ) ;
public com.google.gerrit.extensions.api.projects.BranchInfo get ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return resource ( ) . getBranchInfo ( ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot read branch" , e ) ; } }
public com.googlesource.gerrit.plugins.github.git.GHMilestone createMilestone ( java.lang.String title , java.lang.String description ) throws java.io.IOException { return ghRepository.createMilestone ( title , description ) ; }
public final void update ( final java.lang.Iterable < E > instances ) throws com.google.gwtorm.client.OrmException { doUpdate ( instances ) ; }
boolean hasMessage ( ) { return ! ( message.getText ( ) . trim ( ) . isEmpty ( ) ) ; }
public void usernamePatternCanUploadToAnyRef ( ) { com.google.gerrit.server.project.testing.Util.allow ( local , com.google.gerrit.common.data.Permission.PUSH , com.google.gerrit.server.group.SystemGroupBackend.REGISTERED_USERS , "refs/heads/users/${username}/*" ) ; com.google.gerrit.server.project.ProjectControl u = user ( local , "a-registered-user" ) ; assertCanUpload ( u ) ; }
public void onFailure ( java.lang.Throwable caught ) { loaded.remove ( revisionNumber ) ; loaded.removeAll ( toLoad ) ; toLoad.clear ( ) ; ( active ) -- ; }
public void onPreMerge ( org.eclipse.jgit.lib.Repository repo , com.google.gerrit.server.git.CodeReviewCommit commit , com.google.gerrit.server.project.ProjectState destProject , com.google.gerrit.reviewdb.client.Branch.NameKey destBranch , com.google.gerrit.reviewdb.client.PatchSet.Id patchSetId ) throws com.google.gerrit.server.git.validators.MergeValidationException { for ( com.google.gerrit.server.git.validators.MergeValidationListener validator : mergeValidationListeners ) { validator.onPreMerge ( repo , commit , destProject , destBranch , patchSetId ) ; } }
public static void confirmEmail ( java.lang.String token , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.VoidResult > cb ) { com.google.gerrit.client.config.ConfigServerApi.EmailConfirmationInput input = com.google.gerrit.client.config.ConfigServerApi.EmailConfirmationInput.create ( ) ; input.setToken ( token ) ; new com.google.gerrit.client.rpc.RestApi ( "/config/server/email.confirm" ) . put ( input , cb ) ; }
public void error ( java.lang.String message ) { throw new com.google.gerrit.common.Die ( ( "Cannot open log file: " + message ) ) ; }
public void onFailure ( java.lang.Throwable caught ) { super . onFailure ( caught ) ; enableForm ( true ) ; }
com.google.gerrit.testutil.InMemoryDatabase getInMemoryDatabase ( com.google.gerrit.server.schema.SchemaCreator schemaCreator , com.google.gerrit.server.index.SingleVersionModule.SingleVersionListener singleVersionListener ) throws com.google.gwtorm.server.OrmException { return new com.google.gerrit.testutil.InMemoryDatabase ( schemaCreator , singleVersionListener ) ; }
public void start ( ) { indexes.setSearchIndex ( this ) ; indexes.addWriteIndex ( this ) ; }
private static com.google.gerrit.client.rpc.RestApi base ( com.google.gerrit.reviewdb.client.Project.NameKey project ) { return new com.google.gerrit.client.rpc.RestApi ( "projects" ) . id ( project.get ( ) ) . view ( "dashboards" ) ; }
public java.lang.String [ ] getStringList ( java.lang.String name ) { return cfg.getStringList ( com.google.gerrit.server.config.PluginConfig.PLUGIN , pluginName , name ) ; }
private com.google.gerrit.extensions.common.ProblemInfo problem ( java.lang.String msg ) { com.google.gerrit.extensions.common.ProblemInfo p = new com.google.gerrit.extensions.common.ProblemInfo ( ) ; p.message = com.google.common.base.Preconditions.checkNotNull ( msg ) ; problems.add ( p ) ; return p ; }
public void delete ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { deleteBranch.apply ( resource ( ) , new com.google.gerrit.server.project.DeleteBranch.Input ( ) ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot delete branch" , e ) ; } }
public void deleteComment ( com.google.gerrit.reviewdb.client.PatchLineComment comment ) throws com.google.gwtorm.server.OrmException { if ( ( comment.getStatus ( ) ) == ( PatchLineComment.Status.DRAFT ) ) { deleteDraftComment ( comment ) ; } else { throw new java.lang.IllegalArgumentException ( "Cannot delete a published comment." ) ; } }
void onReviewMode ( com.google.gwt.event.dom.client.ClickEvent e ) { fileTableMode = FileTable.Mode.REVIEW ; refreshFileTable ( ) ; editMode.setVisible ( true ) ; addFile.setVisible ( false ) ; reviewMode.setVisible ( false ) ; }
protected java.lang.String getName ( ) { return com.google.common.base.MoreObjects.firstNonNull ( name , com.google.gerrit.testing.ConfigSuite.DEFAULT ) ; }
boolean canForceEditTopicName ( ) { return canPerform ( Permission.EDIT_TOPIC_NAME , false , true ) ; }
private org.eclipse.jgit.lib.PersonIdent getRefLogIdent ( com.google.gerrit.server.IdentifiedUser user , java.sql.Timestamp when ) { return user.newRefLogIdent ( when , tz ) ; }
public int intValue ( ) { return ( ( int ) ( val ) ) ; }
private void preMerge ( final com.google.gerrit.server.git.SubmitStrategy strategy ) throws com.google.gerrit.server.git.MergeException { openBranch ( ) ; validateChangeList ( ) ; mergeTip = strategy.run ( branchTip , toMerge ) ; refLogIdent = strategy.getRefLogIdent ( ) ; commits.putAll ( strategy.getNewCommits ( ) ) ; }
public void destroy ( ) { com.google.gerrit.git.WorkQueue.terminate ( ) ; super . destroy ( ) ; }
public void createBranchByAdmin ( ) throws java.lang.Exception { assertCreateSucceeds ( testBranch ) ; }
private void wrapChildren ( java.lang.String tag , org.commonmark.node.Node node ) { html.open ( tag ) ; visitChildren ( node ) ; html.close ( tag ) ; }
public void onSuccess ( com.google.gerrit.client.diff.DiffInfo info ) { new net.codemirror.mode.ModeInjector ( ) . add ( getContentType ( info.meta_a ( ) ) ) . add ( getContentType ( info.meta_b ( ) ) ) . inject ( com.google.gerrit.client.rpc.CallbackGroup.< java.lang.Void > emptyCallback ( ) ) ; }
void onPublish ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { com.google.gerrit.client.change.ChangeActions.publish ( getProject ( ) , changeId , revision , publish , deleteRevision ) ; }
public void testEvictCacheThrowsException ( ) throws java.lang.Exception { setupMocks ( Constants.DEFAULT , com.ericsson.gerrit.plugins.evictcache.RestSessionTest.EMPTY_JSON2 , com.ericsson.gerrit.plugins.evictcache.RestSessionTest.FAIL_RESPONSE , com.ericsson.gerrit.plugins.evictcache.RestSessionTest.THROW_EXCEPTION ) ; com.google.common.truth.Truth.assertThat ( restClient.evict ( com.ericsson.gerrit.plugins.evictcache.RestSessionTest.SOURCE_NAME , Constants.DEFAULT , com.ericsson.gerrit.plugins.evictcache.RestSessionTest.EMPTY_JSON ) ) . isFalse ( ) ; }
public void run ( ) { rc.processCommands ( commands , progress ) ; }
protected java.lang.Integer getValueInt ( com.google.gerrit.server.query.change.ChangeData changeData ) throws com.google.gwtorm.server.OrmException { return ChangeField.ADDED.get ( changeData , null ) ; }
protected java.lang.Object createServiceHandle ( ) throws java.lang.Exception { return new com.google.gerrit.server.AccountSecurityImpl ( com.google.gerrit.server.GerritServer.getInstance ( ) ) ; }
protected void configure ( ) { com.google.gerrit.extensions.registration.DynamicSet.setOf ( binder ( ) , com.google.gerrit.server.audit.AuditListener.class ) ; com.google.gerrit.extensions.registration.DynamicSet.setOf ( binder ( ) , com.google.gerrit.server.audit.group.GroupAuditListener.class ) ; bind ( com.google.gerrit.server.audit.AuditService.class ) ; }
public boolean isMatchable ( ) { return that.isMatchable ( ) ; }
private static org.eclipse.jgit.util.TemporaryBuffer.Heap heap ( int est , int max ) { return new org.eclipse.jgit.util.TemporaryBuffer.Heap ( est , max ) ; }
public org.apache.sshd.server.Command get ( ) { return new com.google.gerrit.sshd.AliasCommand ( root , permissionBackend , currentUser , command ) ; }
public void onSuccess ( final com.google.gwtjsonrpc.client.VoidResult result ) { saveOwner.setEnabled ( false ) ; }
public static java.lang.String getXGerritAuth ( ) { return com.google.gerrit.client.Gerrit.xGerritAuth ; }
private void initNoMembersInfo ( ) { noMembersInfo = new com.google.gwt.user.client.ui.FlowPanel ( ) ; noMembersInfo.setVisible ( false ) ; noMembersInfo.add ( new com.google.gerrit.client.ui.SmallHeading ( AdminConstants.I.noMembersInfo ( ) ) ) ; add ( noMembersInfo ) ; }
public boolean isDone ( ) { if ( super . isDone ( ) ) { return true ; } else if ( isGenAvailableNowForCurrentSearcher ( ) ) { set ( null ) ; return true ; } return false ; }
public long getLong ( java.lang.String name , long defaultValue ) { return cfg.getLong ( com.google.gerrit.server.config.PluginConfig.PLUGIN , pluginName , name , defaultValue ) ; }
private static void mainImpl ( final java.lang.String [ ] argv ) throws com.google.gwtjsonrpc.server.XsrfException , com.google.gwtorm.client.OrmException { com.google.gerrit.server.GerritServer.getInstance ( ) ; com.google.gerrit.client.rpc.Common.getSchemaFactory ( ) . open ( ) . close ( ) ; java.lang.System.out.println ( "Gerrit2 schema initialized" ) ; }
private static boolean match ( java.lang.String value , java.lang.String pattern , boolean refMatcher ) { if ( refMatcher ) { return com.google.gerrit.server.project.RefPatternMatcher.getMatcher ( pattern ) . match ( value , null ) ; } else { return java.util.regex.Pattern.matches ( pattern , value ) ; } }
public com.google.gerrit.extensions.restapi.Response < com.google.gerrit.extensions.common.ChangeInfo > apply ( com.google.gerrit.server.change.ChangeResource rsrc ) throws com.google.gwtorm.server.OrmException { return com.google.gerrit.server.change.GetChange.cache ( json.format ( rsrc ) ) ; }
public boolean isOwner ( ) { return ( controlForRef ( AccessSection.ALL ) . isOwner ( ) ) || ( getCurrentUser ( ) . isAdministrator ( ) ) ; }
public void stop ( ) { scanner.end ( ) ; synchronized ( this ) { for ( com.google.gerrit.server.plugins.Plugin p : running.values ( ) ) { p.stop ( ) ; } running.clear ( ) ; broken.clear ( ) ; } }
public com.google.common.util.concurrent.CheckedFuture < ? , java.io.IOException > deleteAsync ( com.google.gerrit.server.query.change.ChangeData cd ) { return ( executor ) != null ? submit ( deleteTask ( cd ) ) : com.google.common.util.concurrent.Futures.< java.lang.Object , java.io.IOException > immediateCheckedFuture ( null ) ; }
private com.google.common.collect.Multiset < com.google.gerrit.server.notedb.ChangeBundle.NormalizedChangeMessage > normalizeChangeMessages ( ) { com.google.common.collect.Multiset < com.google.gerrit.server.notedb.ChangeBundle.NormalizedChangeMessage > normalized = com.google.common.collect.TreeMultiset.create ( ) ; for ( com.google.gerrit.reviewdb.client.ChangeMessage msg : changeMessages.values ( ) ) { normalized.add ( com.google.gerrit.server.notedb.ChangeBundle.NormalizedChangeMessage.create ( msg ) ) ; } return normalized ; }
public java.util.Map < java.lang.String , java.util.List < com.google.gerrit.extensions.common.CommentInfo > > comments ( ) throws com.google.gerrit.extensions.restapi.RestApiException { throw new com.google.gerrit.extensions.restapi.NotImplementedException ( ) ; }
public void onFocus ( com.google.gwt.event.dom.client.FocusEvent event ) { focusHint ( ) ; prevText = getText ( ) ; isFocused = true ; }
public com.google.gerrit.reviewdb.Project getProject ( ) { return getConfig ( ) . getProject ( ) ; }
private static void doCreateTable ( java.sql.Statement stmt ) throws java.sql.SQLException { stmt.executeUpdate ( ( "CREATE TABLE IF NOT EXISTS account_patch_reviews (" + ( ( ( ( ( ( "account_id INTEGER DEFAULT 0 NOT NULL, " + "change_id INTEGER DEFAULT 0 NOT NULL, " ) + "patch_set_id INTEGER DEFAULT 0 NOT NULL, " ) + "file_name VARCHAR(4096) DEFAULT '' NOT NULL, " ) + "CONSTRAINT primary_key_account_patch_reviews " ) + "PRIMARY KEY (change_id, patch_set_id, account_id, file_name)" ) + ")" ) ) ) ; }
public void testBadEventAndItIsForwarded ( ) throws java.lang.Exception { setUpMocks ( false ) ; com.ericsson.gerrit.plugins.syncevents.Context.setForwardedEvent ( ) ; eventHandler.onEvent ( event ) ; com.ericsson.gerrit.plugins.syncevents.Context.unsetForwardedEvent ( ) ; org.mockito.Mockito.verifyZeroInteractions ( restSession ) ; }
public void run ( ) { fixScroll ( cmA ) ; }
public org.apache.sshd.common.file.SshFile getFile ( org.apache.sshd.common.file.SshFile baseDir , java.lang.String file ) { return null ; }
private static void assertModified ( java.lang.String expectedNewName , com.google.gerrit.server.patch.PatchListEntry e ) { com.google.gerrit.acceptance.server.change.PatchListCacheIT.assertName ( expectedNewName , e ) ; org.junit.Assert.assertEquals ( ChangeType.MODIFIED , e.getChangeType ( ) ) ; }
protected Project.NameKey getProjectName ( ) { return com.google.gerrit.server.notedb.ChangeUpdate.getProjectName ( ctl ) ; }
private static java.lang.String checkLeadingSlash ( java.lang.String str ) { com.google.common.base.Preconditions.checkArgument ( str.startsWith ( "/" ) , "expected string starting with a slash: %s" , str ) ; return str ; }
private com.google.common.collect.SetMultimap < com.google.gerrit.server.ApprovalsUtil.ReviewerState , com.google.gerrit.reviewdb.client.Account.Id > getReviewers ( ) throws com.google.gwtorm.server.OrmException { if ( ( reviewers ) == null ) { reviewers = args.approvalsUtil.getReviewers ( args.db.get ( ) , change.getId ( ) ) ; } return reviewers ; }
public void onPluginLoad ( ) { com.google.gerrit.plugin.client.Plugin.get ( ) . screenRegex ( "p/(.*)" , new com.googlesource.gerrit.plugins.reviewers.client.ReviewersScreen.Factory ( ) ) ; }
public synchronized void sendRedirect ( java.lang.String loc ) { status = SC_FOUND ; setHeader ( com.google.common.net.HttpHeaders.LOCATION , loc ) ; committed = true ; }
private java.io.File gitDirOf ( com.google.gerrit.reviewdb.Project.NameKey name ) { return new java.io.File ( getBasePath ( ) , name.get ( ) ) ; }
public void onLogout ( com.google.gerrit.server.IdentifiedUser user , javax.servlet.http.HttpServletRequest request , javax.servlet.http.HttpServletResponse response ) { }
public void setNew_MethodNotAllowed ( ) throws java.lang.Exception { com.google.gerrit.extensions.api.accounts.UsernameInput in = new com.google.gerrit.extensions.api.accounts.UsernameInput ( ) ; in.username = "newUsername" ; adminRestSession.put ( ( ( "/accounts/" + ( admin.username ) ) + "/username" ) , in ) . assertMethodNotAllowed ( ) ; }
public abstract java.util.SortedSet < com.google.gerrit.reviewdb.Project.NameKey > list ( ) ;
public com.google.gerrit.client.workflow.CategoryFunction getFunction ( ) { final com.google.gerrit.client.workflow.CategoryFunction r = com.google.gerrit.client.workflow.CategoryFunction.forName ( functionName ) ; return r != null ? r : new com.google.gerrit.client.workflow.NoOpFunction ( ) ; }
private org.eclipse.jgit.lib.Repository getRepository ( ) { try { return args.server.openRepository ( projectState.getProject ( ) . getNameKey ( ) ) ; } catch ( org.eclipse.jgit.errors.RepositoryNotFoundException e ) { return null ; } }
public void execute ( ) { final java.lang.String base = com.google.gwt.core.client.GWT.getHostPageBaseURL ( ) ; Window.Location.assign ( ( base + "__BecomeAnyAccount" ) ) ; }
public UiAction.Description getDescription ( com.google.gerrit.server.change.ChangeResource rsrc ) { return new com.google.gerrit.extensions.webui.UiAction.Description ( ) . setLabel ( "Edit Topic" ) . setVisible ( rsrc.permissions ( ) . testOrFalse ( ChangePermission.EDIT_TOPIC_NAME ) ) ; }
void set ( com.google.gerrit.client.changes.ChangeInfo info ) { this . changeId = info.legacy_id ( ) ; display ( info ) ; reviewerSuggestOracle.setChange ( changeId ) ; openForm.setVisible ( com.google.gerrit.client.Gerrit.isSignedIn ( ) ) ; }
default com.google.common.collect.ImmutableSet < com.google.gerrit.server.account.externalids.ExternalId > byEmail ( java.lang.String email ) throws java.io.IOException { return byEmails ( email ) . get ( email ) ; }
public void testEvictCacheOK ( ) throws java.lang.Exception { setupMocks ( Constants.DEFAULT , com.ericsson.gerrit.plugins.evictcache.RestSessionTest.EMPTY_JSON2 , com.ericsson.gerrit.plugins.evictcache.RestSessionTest.OK_RESPONSE , com.ericsson.gerrit.plugins.evictcache.RestSessionTest.DO_NOT_THROW_EXCEPTION ) ; com.google.common.truth.Truth.assertThat ( restClient.evict ( com.ericsson.gerrit.plugins.evictcache.RestSessionTest.SOURCE_NAME , Constants.DEFAULT , com.ericsson.gerrit.plugins.evictcache.RestSessionTest.EMPTY_JSON ) ) . isTrue ( ) ; }
public void dontBumpLastUpdatedOn ( ) { bumpLastUpdatedOn = false ; }
public java.lang.Object getInternalContext ( ) { return self ( ) . getInternalContext ( ) ; }
public void registerKeys ( ) { super . registerKeys ( ) ; contentTable.setRegisterKeys ( contentTable.isVisible ( ) ) ; regAction = com.google.gwtexpui.globalkey.client.GlobalKey.add ( this , keysAction ) ; }
public com.google.gerrit.reviewdb.client.Change getChange ( ) { com.google.common.base.Preconditions.checkState ( ( ( change ) != null ) , "getChange() only valid after creating change" ) ; return change ; }
public void onValueChange ( com.google.gwt.event.logical.shared.ValueChangeEvent < com.google.gerrit.common.data.ProjectDetail > event ) { display ( event.getValue ( ) ) ; }
public void mergeReview ( java.lang.String project , int number ) throws java.lang.Exception { submitter.apply ( getRevisionResource ( project , number ) , new com.google.gerrit.extensions.api.changes.SubmitInput ( ) ) ; }
public void getDiffPreferences ( ) throws java.lang.Exception { com.google.gerrit.extensions.client.DiffPreferencesInfo result = get ( ) ; assertPrefsEqual ( result , com.google.gerrit.extensions.client.DiffPreferencesInfo.defaults ( ) ) ; }
public static void editWithFiles ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.info.ChangeInfo.EditInfo > cb ) { com.google.gerrit.client.changes.ChangeApi.edit ( project , id ) . addParameterTrue ( "list" ) . get ( cb ) ; }
private void showSideBySide ( final com.google.gerrit.client.data.SideBySidePatchDetail r ) { sbsTable.setAccountInfoCache ( r.getAccounts ( ) ) ; sbsTable.display ( r ) ; sbsTable.finishDisplay ( true ) ; }
public com.google.gerrit.extensions.common.WebLinkInfo getBranchWebLink ( java.lang.String projectName , java.lang.String branchName ) { java.lang.String url = getBranchUrl ( projectName , branchName ) ; return url == null ? null : new com.google.gerrit.extensions.common.WebLinkInfo ( com.googlesource.gerrit.plugins.xdocs.XDocWebLink.README , getImageUrl ( ) , url , Target.SELF ) ; }
public static java.lang.String permalink ( final com.google.gerrit.client.reviewdb.Change.Id c ) { return ( com.google.gwt.core.client.GWT.getHostPageBaseURL ( ) ) + ( c.get ( ) ) ; }
private void assertIllegalArgument ( java.lang.String value , java.lang.String expectedMessage ) { exception.expect ( java.lang.IllegalArgumentException.class ) ; exception.expectMessage ( expectedMessage ) ; com.google.gerrit.testing.IndexVersionsTest.get ( value ) ; }
public final java.sql.Timestamp updated ( ) { java.lang.String updatedRaw = updatedRaw ( ) ; return updatedRaw == null ? null : com.google.gwtjsonrpc.client.impl.ser.JavaSqlTimestamp_JsonSerializer.parseTimestamp ( updatedRaw ( ) ) ; }
protected void configureServlets ( ) { serve ( "/login/*" ) . with ( com.google.gerrit.httpd.auth.ldap.LoginRedirectServlet.class ) ; install ( new com.google.gerrit.httpd.rpc.RpcServletModule ( com.google.gerrit.httpd.rpc.UiRpcModule.PREFIX ) { @ java.lang.Override protected void configureServlets ( ) { rpc ( com.google.gerrit.httpd.auth.ldap.UserPassAuthServiceImpl.class ) ; } } ) ; }
org.eclipse.jgit.lib.Repository createRepository ( com.google.gerrit.reviewdb.client.Project.NameKey name ) throws com.google.gerrit.server.git.RepositoryCaseMismatchException , java.io.IOException , org.eclipse.jgit.errors.RepositoryNotFoundException ;
void appendSubmittedBy ( com.google.gerrit.reviewdb.client.Account.Id accountId , java.util.Optional < com.google.gerrit.reviewdb.client.Account > account ) { sb.append ( "Submitted-by: " ) ; appendUserData ( accountId , account ) ; sb.append ( "\n" ) ; }
public void deleteComment ( com.google.gerrit.reviewdb.client.PatchLineComment comment ) throws com.google.gwtorm.server.OrmException { if ( ( comment.getStatus ( ) ) == ( PatchLineComment.Status.DRAFT ) ) { deleteDraftComment ( comment ) ; } else { throw new java.lang.IllegalArgumentException ( "Cannot delete a published comment." ) ; } }
com.google.gerrit.server.git.ReplaceOp create ( com.google.gerrit.server.project.ProjectControl projectControl , com.google.gerrit.reviewdb.client.Branch.NameKey dest , boolean checkMergedInto , @ com.google.inject.assistedinject.Assisted ( value = "priorPatchSetId" ) com.google.gerrit.reviewdb.client.PatchSet.Id priorPatchSetId , @ com.google.inject.assistedinject.Assisted ( value = "priorCommitId" ) org.eclipse.jgit.lib.ObjectId priorCommit , @ com.google.inject.assistedinject.Assisted ( value = "patchSetId" ) com.google.gerrit.reviewdb.client.PatchSet.Id patchSetId , @ com.google.inject.assistedinject.Assisted ( value = "commitId" ) org.eclipse.jgit.lib.ObjectId commitId , com.google.gerrit.reviewdb.client.PatchSetInfo info , java.util.List < java.lang.String > groups , @ com.google.gerrit.common.Nullable com.google.gerrit.server.git.ReceiveCommits.MagicBranchInput magicBranch , @ com.google.gerrit.common.Nullable org.eclipse.jgit.transport.PushCertificate pushCertificate ) ;
private java.util.Set < com.google.gerrit.reviewdb.client.AccountGroup.UUID > groupsOf ( com.google.gerrit.reviewdb.client.Account account ) { return userFactory.create ( account.getId ( ) ) . getEffectiveGroups ( ) . getKnownGroups ( ) ; }
public void setRequireChangeID ( final com.google.gerrit.reviewdb.client.Project.InheritedBoolean cid ) { requireChangeID = cid ; }
public com.google.gerrit.reviewdb.client.PatchSetApproval get ( com.google.gerrit.reviewdb.client.PatchSetApproval.Key key ) { throw new java.lang.UnsupportedOperationException ( com.google.gerrit.reviewdb.server.DisabledChangesReviewDbWrapper.MSG ) ; }
public void selfRevokedKey ( ) throws java.lang.Exception { assertProblems ( com.google.gerrit.gpg.testutil.TestKeys.key4 ( ) , "Key is revoked" ) ; }
public void onSuccess ( java.lang.String result ) { type = result ; injectMode ( result , modeInjectorCb ) ; }
public void addPatchSets ( com.google.gerrit.server.data.ChangeAttribute ca , java.util.Collection < com.google.gerrit.reviewdb.client.PatchSet > ps , java.util.Map < com.google.gerrit.reviewdb.client.PatchSet.Id , java.util.Collection < com.google.gerrit.reviewdb.client.PatchSetApproval > > approvals , com.google.gerrit.common.data.LabelTypes labelTypes ) { addPatchSets ( ca , ps , approvals , false , null , labelTypes ) ; }
private void preMerge ( final com.google.gerrit.server.git.SubmitStrategy strategy , final java.util.List < com.google.gerrit.server.git.CodeReviewCommit > toMerge ) throws com.google.gerrit.server.git.MergeException { mergeTip = strategy.run ( branchTip , toMerge ) ; refLogIdent = strategy.getRefLogIdent ( ) ; commits.putAll ( strategy.getNewCommits ( ) ) ; }
public com.googlecode.prolog_cafe.lang.NumberTerm shiftRight ( com.googlecode.prolog_cafe.lang.NumberTerm t ) { if ( t instanceof com.googlecode.prolog_cafe.lang.DoubleTerm ) throw new com.googlecode.prolog_cafe.exceptions.IllegalTypeException ( "integer" , t ) ; return new com.googlecode.prolog_cafe.lang.IntegerTerm ( ( ( this . val ) > > ( t.intValue ( ) ) ) ) ; }
private void setupDefaultOperations ( ) { new org.eclipse.example.calc.internal.operations.Equals ( ) ; new org.eclipse.example.calc.internal.operations.Minus ( ) ; new org.eclipse.example.calc.internal.operations.Plus ( ) ; new org.eclipse.example.calc.internal.operations.Square ( ) ; new org.eclipse.example.calc.internal.Divide ( ) ; new org.eclipse.example.calc.internal.Multiply ( ) ; }
public void isEnabledForAllRefsByDefault ( ) throws java.lang.Exception { com.googlesource.gerrit.plugins.uploadvalidator.ValidatorConfig config = getConfig ( ( "[plugin \"uploadvalidator\"]\n" + "blockedFileExtension = jar" ) ) ; com.google.common.truth.Truth.assertThat ( config.isEnabledForRef ( anyUser , projectName , "anyRef" , "blockedFileExtension" ) ) . isTrue ( ) ; }
private final native boolean isDefaultNew ( ) ;
public static void init ( ) { com.google.gerrit.client.api.ApiGlue.init0 ( ) ; com.google.gerrit.client.api.ActionContext.init ( ) ; com.google.gerrit.client.api.HtmlTemplate.init ( ) ; com.google.gerrit.client.api.Plugin.init ( ) ; com.google.gerrit.client.api.ApiGlue.addHistoryHook ( ) ; }
public static com.google.gerrit.common.data.SubmitTypeRecord error ( java.lang.String err ) { return new com.google.gerrit.common.data.SubmitTypeRecord ( com.google.gerrit.common.data.SubmitTypeRecord.Status.RULE_ERROR , null , err ) ; }
public < T extends java.lang.Enum < ? > , A extends java.util.EnumSet < ? extends T > > T readEnum ( T def , A options , java.lang.String fmt , java.lang.Object ... args ) { return def ; }
public void onSelection ( com.google.gwt.event.logical.shared.SelectionEvent < com.google.gwt.user.client.ui.SuggestOracle.Suggestion > event ) { nameTxtBox.setFocus ( true ) ; if ( submitOnSelection ) { submitOnSelection = false ; doAdd ( ) ; } }
private static com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > equalsLabelPredicate ( com.google.gerrit.server.project.ProjectCache projectCache , com.google.gerrit.server.project.ChangeControl.GenericFactory ccFactory , com.google.gerrit.server.IdentifiedUser.GenericFactory userFactory , com.google.inject.Provider < com.google.gerrit.reviewdb.server.ReviewDb > dbProvider , java.lang.String label , int expVal ) { return new com.google.gerrit.server.query.change.EqualsLabelPredicate ( projectCache , ccFactory , userFactory , dbProvider , label , expVal ) ; }
public final com.google.common.collect.ImmutableSortedMap < java.lang.Integer , com.google.gerrit.index.Schema < V > > getSchemas ( ) { return schemaDefs.getSchemas ( ) ; }
public void setUp ( ) throws java.lang.Exception { project = new com.google.gerrit.reviewdb.client.Project.NameKey ( "test" ) ; org.eclipse.jgit.lib.Repository inMemoryRepo = repoManager.createRepository ( project ) ; repo = new org.eclipse.jgit.junit.TestRepository ( inMemoryRepo ) ; }
public java.lang.String getName ( ) { return "Group " + uuid ; }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > putAsync ( final K key , final V value ) { self.put ( new net.sf.ehcache.Element ( key , value ) ) ; return com.google.common.util.concurrent.Futures.immediateFuture ( null ) ; }
com.google.gerrit.server.git.strategy.SubmitStrategy.Arguments create ( com.google.gerrit.extensions.client.SubmitType submitType , com.google.gerrit.reviewdb.client.Branch.NameKey destBranch , com.google.gerrit.server.git.MergeOp.CommitStatus commits , com.google.gerrit.server.git.CodeReviewCommit.CodeReviewRevWalk rw , com.google.gerrit.server.IdentifiedUser caller , com.google.gerrit.server.git.MergeTip mergeTip , org.eclipse.jgit.lib.ObjectInserter inserter , org.eclipse.jgit.lib.Repository repo , org.eclipse.jgit.revwalk.RevFlag canMergeFlag , com.google.gerrit.reviewdb.server.ReviewDb db , java.util.Set < org.eclipse.jgit.revwalk.RevCommit > alreadyAccepted , java.lang.String submissionId , com.google.gerrit.extensions.api.changes.ReviewInput.NotifyHandling notifyHandling ) ;
public void onSuccess ( java.lang.Void result ) { net.codemirror.lib.Loader.initDisableUnwantedKeys ( ) ; cb.onSuccess ( null ) ; }
public static java.lang.String toProjectAcceess ( final com.google.gerrit.reviewdb.Project.NameKey p ) { return ( "/admin/projects/" + ( p.get ( ) ) ) + ",access" ; }
public boolean headless ( ) { return headless ; }
public void addNonExistingMember_NotFound ( ) throws java.lang.Exception { adminRestSession.put ( "/groups/Administrators/members/non-existing" ) . assertNotFound ( ) ; }
public void maxAutomergeVoteDisabledTest ( ) throws java.lang.Exception { defaultSetup ( "automerger.config" ) ; com.google.common.truth.Truth.assertThat ( configLoader.maxAutomergeVoteDisabled ( ) ) . isFalse ( ) ; }
private GitilesView.Builder parseDescribeCommand ( javax.servlet.http.HttpServletRequest req , java.lang.String repoName , java.lang.String path ) { if ( com.google.gitiles.ViewFilter.isEmptyOrSlash ( path ) ) { return null ; } return com.google.gitiles.GitilesView.describe ( ) . setRepositoryName ( repoName ) . setPathPart ( path ) ; }
public java.util.List < com.google.gerrit.extensions.common.ChangeInfo > submittedTogether ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return submittedTogether.apply ( change ) ; } catch ( java.lang.Exception e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot query submittedTogether" , e ) ; } }
public void onMouseMove ( com.google.gwt.event.dom.client.MouseMoveEvent event ) { resizePaddingWidget ( ) ; }
protected void setHeader ( final java.lang.String name , final java.util.Date date ) { headers.put ( name , new com.google.gerrit.server.mail.EmailHeader.Date ( date ) ) ; }
public void setHashtags ( com.google.gerrit.extensions.api.changes.HashtagsInput input ) throws com.google.gerrit.extensions.restapi.RestApiException { try { postHashtags.apply ( change , input ) ; } catch ( com.google.gerrit.server.update.UpdateException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot post hashtags" , e ) ; } }
public static org.eclipse.jgit.revwalk.RevWalk newRevWalk ( org.eclipse.jgit.lib.Repository repo ) { return new com.google.gerrit.server.git.CodeReviewCommit.CodeReviewRevWalk ( repo ) ; }
protected void onLoad ( ) { com.google.gerrit.client.Gerrit.addSignOutHandler ( signedInListener ) ; super . onLoad ( ) ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { doSign ( ) ; }
public void onSuccess ( com.google.gerrit.client.changes.ChangeInfo info ) { info.init ( ) ; loadConfigInfo ( info , base ) ; }
private void toggleShowIntraline ( ) { prefs.intralineDifference ( ( ! ( java.lang.Boolean.valueOf ( prefs.intralineDifference ( ) ) ) ) ) ; setShowIntraline ( prefs.intralineDifference ( ) ) ; prefsAction.update ( ) ; }
public void onSuccess ( com.google.gwt.resources.client.TextResource resource ) { com.google.gwt.dom.client.StyleInjector.inject ( resource.getText ( ) ) ; cb.onSuccess ( null ) ; }
public void batchAbandon ( com.google.gerrit.server.update.BatchUpdate.Factory updateFactory , com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.server.CurrentUser user , java.util.Collection < com.google.gerrit.server.project.ChangeControl > controls ) throws com.google.gerrit.extensions.restapi.RestApiException , com.google.gerrit.server.update.UpdateException { batchAbandon ( updateFactory , project , user , controls , "" , NotifyHandling.ALL , com.google.common.collect.ImmutableListMultimap.of ( ) ) ; }
private static java.lang.String getExtension ( java.nio.file.Path path ) { return com.google.gerrit.server.plugins.JarPluginProvider.getExtension ( path.getFileName ( ) . toString ( ) ) ; }
public boolean match ( com.google.gerrit.server.project.ProjectData pd ) throws com.google.gwtorm.server.OrmException { return permissionBackend.user ( user ) . project ( pd.getProject ( ) . getNameKey ( ) ) . testOrFalse ( ProjectPermission.READ ) ; }
private void assertParseNotifyValueFails ( java.lang.String notifyValue ) { com.google.common.truth.Truth.assertThat ( validationErrors ) . isEmpty ( ) ; parseNotifyValue ( notifyValue ) ; com.google.common.truth.Truth.assertThat ( validationErrors ) . named ( ( "expected validation error for notifyValue: " + notifyValue ) ) . isNotEmpty ( ) ; validationErrors.clear ( ) ; }
public void testAppend_float ( ) { final com.google.gwtexpui.safehtml.client.SafeHtmlBuilder b = new com.google.gwtexpui.safehtml.client.SafeHtmlBuilder ( ) ; com.google.common.truth.Truth.assertThat ( b ) . isSameAs ( b.append ( 0.0F ) ) ; com.google.common.truth.Truth.assertThat ( b.asString ( ) ) . isEqualTo ( "0.0" ) ; }
public com.google.gerrit.server.change.ChangeEditResource parse ( com.google.gerrit.server.change.ChangeResource parent , com.google.gerrit.extensions.restapi.IdString id ) { throw new com.google.gerrit.extensions.restapi.NotImplementedException ( ) ; }
private static java.lang.String my ( org.eclipse.jgit.lib.Config cfg , java.lang.String subsection , java.lang.String key , java.lang.String defaultValue ) { java.lang.String val = cfg.getString ( UserConfigSections.MY , subsection , key ) ; return ! ( com.google.common.base.Strings.isNullOrEmpty ( val ) ) ? val : defaultValue ; }
public static java.lang.String toSideBySide ( @ com.google.gerrit.common.Nullable com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.client.DiffObject diffBase , com.google.gerrit.reviewdb.client.PatchSet.Id revision , java.lang.String fileName ) { return com.google.gerrit.client.Dispatcher.toPatch ( "sidebyside" , project , diffBase , revision , fileName , null , 0 ) ; }
public com.google.gerrit.acceptance.PushOneCommit.Result to ( java.lang.String ref ) throws java.io.IOException , org.eclipse.jgit.api.errors.GitAPIException { com.google.gerrit.acceptance.GitUtil.add ( git , fileName , content ) ; return execute ( ref ) ; }
public boolean match ( com.google.gerrit.index.project.ProjectData pd ) throws com.google.gwtorm.server.OrmException { return permissionBackend.user ( user ) . project ( pd.getProject ( ) . getNameKey ( ) ) . testOrFalse ( ProjectPermission.READ ) ; }
static com.google.gerrit.server.query.Predicate < com.google.gerrit.server.account.AccountState > email ( java.lang.String email ) { return new com.google.gerrit.server.query.account.AccountPredicates.AccountPredicate ( com.google.gerrit.server.index.account.AccountField.EMAIL , AccountQueryBuilder.FIELD_EMAIL , email.toLowerCase ( ) ) ; }
public void createEventsRestApiServlet ( ) throws java.lang.Exception { eventRestApiServlet = new com.ericsson.gerrit.plugins.highavailability.forwarder.rest.EventRestApiServlet ( dispatcher ) ; org.mockito.Mockito.when ( req.getContentType ( ) ) . thenReturn ( com.google.common.net.MediaType.JSON_UTF_8.toString ( ) ) ; }
public static synchronized void useSystemTime ( ) { com.google.gerrit.testing.TestTimeUtil.clockMs = null ; com.google.gerrit.common.TimeUtil.resetCurrentMillisSupplier ( ) ; }
public void setContentType ( java.lang.String type ) { headers.removeAll ( com.google.common.net.HttpHeaders.CONTENT_TYPE ) ; addHeader ( com.google.common.net.HttpHeaders.CONTENT_TYPE , type ) ; }
public static com.google.common.collect.FluentIterable < com.google.gerrit.reviewdb.client.Account.Id > ids ( java.lang.Iterable < com.google.gerrit.acceptance.TestAccount > accounts ) { return com.google.common.collect.FluentIterable.from ( accounts ) . transform ( ( a ) -> a.id ) ; }
public void listTagsOfNonVisibleProject ( ) throws java.lang.Exception { blockRead ( project , "refs/*" ) ; userSession.get ( ( ( "/projects/" + ( project.get ( ) ) ) + "/tags" ) ) . assertNotFound ( ) ; }
void reject ( final org.eclipse.jgit.transport.ReceiveCommand cmd , final java.lang.String why ) { cmd.setResult ( ReceiveCommand.Result.REJECTED_OTHER_REASON , why ) ; commandProgress.update ( 1 ) ; }
default com.google.gerrit.server.account.AccountState getAccount ( ) { return getIdentifiedUser ( ) . state ( ) ; }
protected void init ( ) { super . init ( ) ; setHeader ( "Message-ID" , getChangeMessageThreadId ( ) ) ; add ( RecipientType.TO , reviewers ) ; add ( RecipientType.CC , extraCC ) ; rcptToAuthors ( RecipientType.CC ) ; }
void rebaseChange ( com.google.gerrit.reviewdb.client.PatchSet.Id patchSetId , com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.ChangeDetail > callback ) ;
protected void onUnload ( ) { com.google.gerrit.client.Gerrit.removeSignOutHandler ( signedInListener ) ; super . onUnload ( ) ; }
public void onKeyPress ( final com.google.gwt.event.dom.client.KeyPressEvent event ) { if ( ( event.getNativeEvent ( ) . getKeyCode ( ) ) == ( com.google.gwt.event.dom.client.KeyCodes.KEY_ENTER ) ) { if ( ! ( suggestionDisplay.isSuggestionSelected ) ) { doSearch ( ) ; } } }
void visibleProjects ( com.google.gwt.user.client.rpc.AsyncCallback < java.util.List < com.google.gerrit.reviewdb.Project > > callback ) ;
public java.lang.String getMessageText ( ) { return ( message.getText ( ) . replaceAll ( "\r\n" , "\n" ) . trim ( ) ) + '\n' ; }
public com.google.gerrit.extensions.restapi.BinaryResult submitPreview ( java.lang.String format ) throws com.google.gerrit.extensions.restapi.RestApiException { try { submitPreview.setFormat ( format ) ; return submitPreview.apply ( revision ) ; } catch ( com.google.gwtorm.server.OrmException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot get submit preview" , e ) ; } }
public void addReviewerToReviewableChangeInNoteDbBatch ( ) throws java.lang.Exception { addReviewerToReviewableChangeInNoteDb ( batch ( ) ) ; }
public java.lang.String apply ( com.google.gerrit.server.project.ProjectResource resource ) { com.google.gerrit.reviewdb.client.Project project = resource.getProjectState ( ) . getProject ( ) ; com.google.gerrit.reviewdb.client.Project.NameKey parentName = project.getParent ( allProjectsName ) ; return parentName != null ? parentName.get ( ) : "" ; }
private java.util.Collection < com.google.gerrit.reviewdb.client.Account.Id > fetchAccountIds ( com.google.gerrit.server.change.ChangeResource rsrc ) throws com.google.gwtorm.server.OrmException { return approvalsUtil.getReviewers ( dbProvider.get ( ) , rsrc.getNotes ( ) ) . values ( ) ; }
public com.google.gerrit.server.patch.DiffCacheContent get ( final com.google.gerrit.server.patch.DiffCacheKey key ) { return self.get ( key ) ; }
public int intValue ( ) { return this . val ; }
public com.google.gerrit.extensions.client.ChangeKind getChangeKind ( @ com.google.gerrit.common.Nullable org.eclipse.jgit.revwalk.RevWalk rw , @ com.google.gerrit.common.Nullable org.eclipse.jgit.lib.Config repoConfig , com.google.gerrit.server.query.change.ChangeData cd , com.google.gerrit.reviewdb.client.PatchSet patch ) { return com.google.gerrit.server.change.ChangeKindCacheImpl.getChangeKindInternal ( this , rw , repoConfig , cd , patch ) ; }
private static org.eclipse.jgit.lib.ObjectId toObjectId ( java.lang.String id ) { return ! ( com.google.common.base.Strings.isNullOrEmpty ( id ) ) ? org.eclipse.jgit.lib.ObjectId.fromString ( id ) : null ; }
public com.google.gerrit.server.notedb.ChangeNotes createFromIndexedChange ( com.google.gerrit.reviewdb.client.Change change ) { return new com.google.gerrit.server.notedb.ChangeNotes ( repoManager , migration , allUsersProvider , change.getProject ( ) , change ) ; }
protected void provideStateTo ( final org.apache.sshd.server.Command cmd ) { cmd.setInputStream ( in ) ; cmd.setOutputStream ( out ) ; cmd.setErrorStream ( err ) ; cmd.setExitCallback ( exit ) ; }
protected void ccAllApprovals ( ) { try { for ( com.google.gerrit.reviewdb.client.Account.Id id : getReviewers ( ) . values ( ) ) { add ( RecipientType.CC , id ) ; } } catch ( com.google.gwtorm.server.OrmException err ) { com.google.gerrit.server.mail.ChangeEmail.log.warn ( "Cannot CC users that reviewed updated change" , err ) ; } }
public void preDisplay ( final java.util.List < com.google.gerrit.common.data.AccountProjectWatchInfo > result ) { watchesTab.display ( result ) ; }
public void abandonChange ( final com.google.gerrit.reviewdb.client.PatchSet.Id patchSetId , final java.lang.String message , final com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.ChangeDetail > callback ) { abandonChangeHandlerFactory.create ( patchSetId , message ) . to ( callback ) ; }
private static java.util.List < java.lang.String > transformCommits ( java.util.List < org.eclipse.jgit.lib.ObjectId > commits ) { if ( ( commits == null ) || ( commits.isEmpty ( ) ) ) { return null ; } return com.google.common.collect.Lists.transform ( commits , ObjectId :: getName ) ; }
public void remove ( ) { for ( com.google.gerrit.metrics.CallbackMetric < ? > m : all ) { m.remove ( ) ; } }
public static void unmarkPrivate ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwt.core.client.JavaScriptObject > cb ) { com.google.gerrit.client.changes.ChangeApi.change ( project , id ) . view ( "private.delete" ) . post ( com.google.gerrit.client.changes.ChangeApi.PrivateInput.create ( ) , cb ) ; }
public com.google.gwtorm.server.ResultSet < com.google.gerrit.reviewdb.client.PatchSet > byChange ( com.google.gerrit.reviewdb.client.Change.Id id ) { throw new java.lang.UnsupportedOperationException ( com.google.gerrit.reviewdb.server.DisabledChangesReviewDbWrapper.MSG ) ; }
private void assertDeleteForbidden ( ) throws java.lang.Exception { exception.expect ( com.google.gerrit.extensions.restapi.AuthException.class ) ; exception.expectMessage ( "Cannot delete branch" ) ; branch ( ) . delete ( ) ; }
void removeAll ( ) { if ( ( skipBars ) != null ) { for ( com.google.gerrit.client.diff.SkipBar bar : skipBars ) { bar.expandSideAll ( ) ; } getOverviewBar ( ) . refresh ( ) ; skipBars = null ; line0 = null ; } }
protected abstract int printJsonImpl ( int field , java.lang.StringBuilder sb , java.lang.Object o ) ;
public int compareTo ( com.ericsson.gerrit.plugins.eventslog.sql.SQLEntry o ) { return java.lang.Integer.compare ( this . id , o.id ) ; }
public static boolean hasRange ( java.lang.String varName ) { for ( java.lang.String n : com.google.gerrit.common.data.GlobalCapability.RANGE_NAMES ) { if ( n.equalsIgnoreCase ( varName ) ) { return true ; } } return false ; }
public static java.lang.String toGroup ( final com.google.gerrit.reviewdb.client.AccountGroup.Id id ) { return ( com.google.gerrit.common.PageLinks.ADMIN_GROUPS ) + ( id.toString ( ) ) ; }
public static Account.Id getAccountId ( ) { return com.google.gerrit.client.rpc.Common.caImpl.getAccountId ( ) ; }
protected void assertResultEquals ( java.lang.String message , com.google.gerrit.reviewdb.client.Change expected , com.google.gerrit.extensions.common.ChangeInfo actual ) { com.google.common.truth.Truth.assert_ ( ) . withFailureMessage ( message ) . that ( actual._number ) . isEqualTo ( expected.getId ( ) . get ( ) ) ; }
void appendSubmittedBy ( com.google.gerrit.reviewdb.client.Account.Id accountId , java.util.Optional < com.google.gerrit.reviewdb.client.Account > account ) { sb.append ( "Submitted-by: " ) ; appendUserData ( accountId , account ) ; sb.append ( "\n" ) ; }
public void onSuccess ( com.google.gerrit.client.VoidResult result ) { query = new com.google.gerrit.client.admin.ProjectTagsScreen.Query ( match ) . start ( start ) . run ( ) ; }
public long getMinValue ( com.google.gerrit.server.index.Schema < com.google.gerrit.server.query.change.ChangeData > schema ) { return 0 ; }
public com.google.gerrit.reviewdb.client.Change abandon ( com.google.gerrit.server.update.BatchUpdate.Factory updateFactory , com.google.gerrit.server.notedb.ChangeNotes notes , com.google.gerrit.server.CurrentUser user ) throws com.google.gerrit.extensions.restapi.RestApiException , com.google.gerrit.server.update.UpdateException { return abandon ( updateFactory , notes , user , "" , defaultNotify ( notes.getChange ( ) ) , com.google.common.collect.ImmutableListMultimap.of ( ) ) ; }
public void writeTo ( java.io.OutputStream os ) throws java.io.IOException { object.copyTo ( os ) ; }
public void configure ( ) { bind ( com.google.gerrit.server.index.VersionManager.class ) . to ( com.google.gerrit.lucene.LuceneVersionManager.class ) ; listener ( ) . to ( com.google.gerrit.lucene.LuceneVersionManager.class ) ; if ( onlineUpgrade ) { listener ( ) . to ( com.google.gerrit.server.index.OnlineUpgrader.class ) ; } }
public void schemaThrowsExceptionWhenLookingUpForChange ( ) throws java.lang.Exception { setupPostMocks ( com.ericsson.gerrit.plugins.multimaster.SyncIndexRestApiServletTest.CHANGE_EXISTS , com.ericsson.gerrit.plugins.multimaster.SyncIndexRestApiServletTest.THROW_ORM_EXCEPTION ) ; syncIndexRestApiServlet.doPost ( req , rsp ) ; org.mockito.Mockito.verify ( rsp ) . sendError ( javax.servlet.http.HttpServletResponse.SC_NOT_FOUND , "Error trying to find a change \n" ) ; }
public void cleanupIndex ( ) { if ( ( com.google.gerrit.elasticsearch.ElasticQueryAccountsTest.nodeInfo ) != null ) { com.google.gerrit.elasticsearch.ElasticTestUtils.deleteAllIndexes ( com.google.gerrit.elasticsearch.ElasticQueryAccountsTest.nodeInfo ) ; com.google.gerrit.elasticsearch.ElasticTestUtils.createAllIndexes ( com.google.gerrit.elasticsearch.ElasticQueryAccountsTest.nodeInfo ) ; } }
public static boolean isBazel ( ) { java.lang.Class < com.google.gerrit.launcher.GerritLauncher > self = com.google.gerrit.launcher.GerritLauncher.class ; java.net.URL rootURL = self.getResource ( com.google.gerrit.launcher.GerritLauncher.SOURCE_ROOT_RESOURCE ) ; return rootURL != null ; }
private void initRow ( final int row , final java.lang.String name ) { table.setText ( row , 0 , name ) ; table.getCellFormatter ( ) . addStyleName ( row , 0 , Gerrit.RESOURCES.css ( ) . header ( ) ) ; }
public final com.google.gerrit.index.query.Predicate < T > getChild ( int i ) { if ( i != 0 ) { throw new java.lang.ArrayIndexOutOfBoundsException ( i ) ; } return that ; }
public void onSuccess ( com.google.gerrit.client.rpc.NativeMap < com.google.gwt.core.client.JsArray < com.google.gerrit.client.changes.CommentInfo > > result ) { r.add ( result ) ; hasDraftComments = ! ( result.isEmpty ( ) ) ; }
public java.util.Map < java.lang.String , java.lang.Object > toSoyData ( org.eclipse.jgit.revwalk.RevWalk walk , int limit , @ javax.annotation.Nullable java.lang.String revision , @ javax.annotation.Nullable org.eclipse.jgit.lib.ObjectId start , com.google.gitiles.DateFormatterBuilder.DateFormatter df ) throws java.io.IOException { return toSoyData ( new com.google.gitiles.Paginator ( walk , limit , start ) , revision , df ) ; }
public static void get ( com.google.gerrit.reviewdb.client.Project.NameKey project , java.lang.String dashboardId , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.dashboards.DashboardInfo > callback ) { new com.google.gerrit.client.rpc.RestApi ( ( ( com.google.gerrit.client.dashboards.DashboardList.base ( project ) ) + ( com.google.gerrit.client.dashboards.DashboardList.encodeDashboardId ( dashboardId ) ) ) ) . get ( callback ) ; }
protected void configure ( ) { bind ( com.google.gerrit.extensions.systemstatus.ServerInformation.class ) . toInstance ( env.getServerInformation ( ) ) ; }
private void allowPushOnRefsTags ( ) throws java.lang.Exception { removePushFromRefsTags ( ) ; grant ( Permission.PUSH , project , "refs/tags/*" , false , com.google.gerrit.server.group.SystemGroupBackend.REGISTERED_USERS ) ; }
public com.google.protobuf.ByteString encodeToByteString ( T obj ) { return com.google.protobuf.ByteString.copyFrom ( encodeToByteBuffer ( obj ) ) ; }
public static void updateImpl ( final java.lang.String token ) { com.google.gwt.user.client.History.newItem ( token , false ) ; if ( ( com.google.gerrit.client.Gerrit.historyHooks ) != null ) { com.google.gerrit.client.Gerrit.dispatchHistoryHooks ( token ) ; } }
public void createNewWorkInProgressChange ( ) throws java.lang.Exception { com.google.gerrit.extensions.common.ChangeInput input = newChangeInput ( ChangeStatus.NEW ) ; input.workInProgress = true ; assertCreateSucceeds ( input ) ; }
public abstract com.google.gerrit.reviewdb.client.Change createChange ( com.google.gerrit.server.git.BatchUpdate.Context ctx ) ;
public void onSuccess ( com.google.gerrit.client.changes.ChangeInfo result ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( id ) ) ; }
public static java.lang.String toGroup ( final com.google.gerrit.reviewdb.AccountGroup.UUID uuid ) { return "/admin/groups/uuid-" + ( uuid.toString ( ) ) ; }
public void listEmptyGroupMembers ( ) throws java.lang.Exception { java.lang.String group = createGroup ( "empty" ) ; com.google.common.truth.Truth.assertThat ( gApi.groups ( ) . id ( group ) . members ( ) ) . isEmpty ( ) ; }
public void onSuccess ( ) { com.google.gerrit.client.Gerrit.display ( token , new com.google.gerrit.client.diff.Unified ( base , com.google.gerrit.client.DiffObject.patchSet ( id.getParentKey ( ) ) , id.get ( ) , side , line ) ) ; }
public void resetColumnIndex ( final int s ) { columnIdx = s ; }
public void unblockInLocal_Fails ( ) { com.google.gerrit.server.project.testing.Util.block ( parent , com.google.gerrit.common.data.Permission.PUSH , com.google.gerrit.server.group.SystemGroupBackend.ANONYMOUS_USERS , "refs/heads/*" ) ; com.google.gerrit.server.project.testing.Util.allow ( local , com.google.gerrit.common.data.Permission.PUSH , fixers , "refs/heads/*" ) ; com.google.gerrit.server.project.ProjectControl f = user ( local , fixers ) ; assertCannotUpdate ( "refs/heads/master" , f ) ; }
public boolean match ( com.google.gerrit.server.query.change.ChangeData cd ) throws com.google.gwtorm.server.OrmException { return ( cd.isFromSource ( source ) ) || ( pred.match ( cd ) ) ; }
public java.lang.Void call ( ) throws java.lang.Exception { rebuild ( change , bru ) ; return null ; }
public java.util.List < com.google.gerrit.common.data.SubmitRecord > getSubmitRecords ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.PatchSet patchSet ) { return canSubmit ( db , patchSet , null , false , true ) ; }
public com.ericsson.gerrit.plugins.highavailability.IndexResponseHandler.IndexResult handleResponse ( org.apache.http.HttpResponse response ) { return new com.ericsson.gerrit.plugins.highavailability.IndexResponseHandler.IndexResult ( isSuccessful ( response ) , parseResponse ( response ) ) ; }
com.google.gerrit.server.notedb.ChangeDraftUpdate createDraftUpdateIfNull ( ) { if ( ( draftUpdate ) == null ) { draftUpdate = draftUpdateFactory.create ( ctl , when ) ; } return draftUpdate ; }
public boolean canAddMember ( final com.google.gerrit.reviewdb.Account.Id id ) { return isOwner ( ) ; }
abstract com.google.gerrit.client.diff.CommentGroup group ( com.google.gerrit.client.diff.DisplaySide side , int cmLinePlusOne ) ;
private static < T > com.google.common.util.concurrent.CheckedFuture < T , java.io.IOException > submit ( java.util.concurrent.Callable < T > task , com.google.common.util.concurrent.ListeningExecutorService executor ) { return com.google.common.util.concurrent.Futures.makeChecked ( com.google.common.util.concurrent.Futures.nonCancellationPropagating ( executor.submit ( task ) ) , IndexUtils.MAPPER ) ; }
public void submit ( final com.google.gerrit.reviewdb.client.PatchSet.Id patchSetId , final com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.ChangeDetail > cb ) { submitAction.create ( patchSetId ) . to ( cb ) ; }
protected void configure ( ) { factory ( PatchScriptFactory.Factory.class ) ; factory ( SaveDraft.Factory.class ) ; }
public void setContentLengthLong ( long length ) { headers.removeAll ( com.google.common.net.HttpHeaders.CONTENT_LENGTH ) ; addHeader ( com.google.common.net.HttpHeaders.CONTENT_LENGTH , java.lang.Long.toString ( length ) ) ; }
private com.google.gerrit.client.diff.DisplaySide displaySide ( com.google.gerrit.client.changes.CommentInfo info , com.google.gerrit.client.diff.DisplaySide forSide ) { if ( ( info.side ( ) ) == ( com.google.gerrit.extensions.client.Side.PARENT ) ) { return ( base ) == null ? DisplaySide.A : null ; } return forSide ; }
public static void init ( ) { com.google.gerrit.client.api.ApiGlue.init0 ( ) ; com.google.gerrit.client.api.ActionContext.init ( ) ; com.google.gerrit.client.api.ApiGlue.addHistoryHook ( ) ; }
public void parseReviewer ( ) throws java.lang.Exception { assertParseSucceeds ( ( "Update change\n" + ( ( ( ( ( ( "\n" + "Branch: refs/heads/master\n" ) + "Change-id: I577fb248e474018276351785930358ec0450e9f7\n" ) + "Patch-set: 1\n" ) + "Reviewer: Change Owner <1@gerrit>\n" ) + "CC: Other Account <2@gerrit>\n" ) + "Subject: This is a test change\n" ) ) ) ; assertParseFails ( ( "Update change\n" + ( ( "\n" + "Patch-set: 1\n" ) + "Reviewer: 1@gerrit\n" ) ) ) ; }
private static com.google.gwtorm.jdbc.JdbcAccess < com.google.gwtorm.jdbc.AbstractTestJdbcAccess.Data , com.google.gwtorm.jdbc.AbstractTestJdbcAccess.Data.DataKey > createJdbcAccess ( final com.google.gwtorm.schema.sql.SqlDialect dialect , java.sql.Connection conn ) { com.google.gwtorm.jdbc.JdbcSchema schema = com.google.gwtorm.jdbc.AbstractTestJdbcAccess.setupSchema ( dialect , conn ) ; com.google.gwtorm.jdbc.JdbcAccess < com.google.gwtorm.jdbc.AbstractTestJdbcAccess.Data , com.google.gwtorm.jdbc.AbstractTestJdbcAccess.Data.DataKey > classUnderTest = new com.google.gwtorm.jdbc.AbstractTestJdbcAccess.DataJdbcAccess ( schema ) ; return classUnderTest ; }
void changeProjectAccess ( com.google.gerrit.reviewdb.client.Project.NameKey projectName , java.lang.String baseRevision , java.lang.String message , java.util.List < com.google.gerrit.common.data.AccessSection > sections , com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.ProjectAccess > callback ) ;
public void logout ( com.gitblit.models.UserModel user ) { }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { upToChange ( true ) . run ( ) ; }
private void fireRefUpdated ( org.eclipse.jgit.lib.RefUpdate branchUpdate ) { logDebug ( "Firing ref updated hooks for {}" , branchUpdate.getName ( ) ) ; gitRefUpdated.fire ( destBranch.getParentKey ( ) , branchUpdate ) ; hooks.doRefUpdatedHook ( destBranch , branchUpdate , getAccount ( mergeTip ) ) ; }
protected com.google.gerrit.server.change.ChangeInserter newChangeWithTopic ( org.eclipse.jgit.junit.TestRepository < com.google.gerrit.testutil.InMemoryRepositoryManager.Repo > repo , java.lang.String topic ) throws java.lang.Exception { return newChange ( repo , null , null , null , topic ) ; }
public static java.lang.String toChange ( final com.google.gerrit.reviewdb.PatchSet.Id ps ) { return ( ( "/c/" + ( ps.getParentKey ( ) ) ) + "/" ) + ( ps.get ( ) ) ; }
private void assertNotesMigrationState ( com.google.gerrit.server.notedb.NotesMigrationState expected ) throws java.lang.Exception { gerritConfig.load ( ) ; com.google.common.truth.Truth.assertThat ( com.google.gerrit.server.notedb.NotesMigrationState.forConfig ( gerritConfig ) ) . hasValue ( expected ) ; }
private boolean inProject ( com.google.gerrit.server.project.ProjectState projectState , com.google.gerrit.reviewdb.client.Project.NameKey project ) { if ( projectState != null ) { return projectState.getNameKey ( ) . equals ( project ) ; } return true ; }
public void markReady ( boolean ready ) { throw new java.lang.UnsupportedOperationException ( ) ; }
private boolean isLogFile ( java.nio.file.Path entry ) { return java.nio.file.Files.isRegularFile ( entry ) ; }
public void preDisplay ( com.google.gwt.core.client.JsArray < com.google.gerrit.client.account.AgreementInfo > result ) { agreements.display ( com.google.gerrit.client.rpc.Natives.asList ( result ) ) ; }
public int compareTo ( final com.google.gerrit.server.project.ProjectNode o ) { return project.getNameKey ( ) . compareTo ( o.project.getNameKey ( ) ) ; }
private void updateForm ( ) { tagTable.updateDeleteButton ( ) ; addTag.setEnabled ( true ) ; nameTxtBox.setEnabled ( true ) ; irevTxtBox.setEnabled ( true ) ; annotationTxtBox.setEnabled ( true ) ; }
void submit ( com.google.gerrit.client.reviewdb.PatchSet.Id patchSetId , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.data.ChangeDetail > callback ) ;
public com.google.gerrit.gpg.server.GpgKeys.ListGpgKeys list ( ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.extensions.restapi.ResourceNotFoundException { com.google.gerrit.gpg.server.GpgKeys.checkEnabled ( ) ; return new com.google.gerrit.gpg.server.GpgKeys.ListGpgKeys ( ) ; }
public void run ( ) { if ( cm.vim ( ) . hasSearchHighlight ( ) ) { cm.vim ( ) . handleKey ( "N" ) ; } else { getCommentManager ( ) . commentNav ( cm , Direction.NEXT ) . run ( ) ; } }
protected void configureCommands ( ) { command ( com.googlesource.gerrit.plugins.events.StreamEvents.class ) ; command ( com.googlesource.gerrit.plugins.events.TrimCommand.class ) ; }
public int getIntParameter ( java.lang.String name , int defaultValue ) { return config.getInt ( pluginName , null , getParamName ( name ) , defaultValue ) ; }
private boolean isRecoverable ( java.lang.Throwable e ) { return ( e instanceof java.io.IOException ) && ( ! ( e instanceof javax.net.ssl.SSLException ) ) ; }
protected java.lang.String prettify ( java.lang.String html , java.lang.String type ) { return com.google.gerrit.prettify.client.ClientSideFormatter.go ( com.google.gerrit.prettify.client.ClientSideFormatter.prettify.getContext ( ) , html , type , diffPrefs.getTabSize ( ) ) ; }
void reviewer ( com.google.gerrit.reviewdb.client.Account.Id id ) { reviewer.add ( id ) ; }
static void savePublic ( final org.eclipse.jgit.storage.file.FileBasedConfig sec ) throws java.io.IOException { sec.save ( ) ; }
public void onRefresh ( ) { refresh ( change ) ; }
void setOptionFlagsHex ( java.lang.String hex ) { options.addAll ( com.google.gerrit.extensions.client.ListChangesOption.fromBits ( java.lang.Integer.parseInt ( hex , 16 ) ) ) ; }
public void testDefaultBehaviour ( ) { org.junit.Assert.assertEquals ( "a/b" , new com.google.gerrit.common.data.GitwebType ( ) . replacePathSeparator ( "a/b" ) ) ; }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > replace ( com.google.gerrit.server.query.change.ChangeData cd ) throws java.io.IOException { return com.google.common.util.concurrent.Futures.immediateFuture ( null ) ; }
private synchronized void runHook ( java.io.File hook , java.util.List < java.lang.String > args ) { if ( hook.exists ( ) ) { hookQueue.execute ( new com.google.gerrit.common.ChangeHookRunner.AsyncHookTask ( null , hook , args ) ) ; } }
private com.google.gerrit.common.data.PermissionRange getRange ( java.lang.String permission ) { return refControl.getRange ( permission , isOwner ( ) ) ; }
public static void resetFromEnv ( com.google.gerrit.server.notedb.MutableNotesMigration migration ) { migration.setFrom ( com.google.gerrit.testing.NoteDbMode.get ( ) . state ) ; }
com.google.gerrit.server.notedb.ChangeDraftUpdate create ( com.google.gerrit.server.notedb.ChangeNotes notes , com.google.gerrit.reviewdb.client.Account.Id accountId , org.eclipse.jgit.lib.PersonIdent authorIdent , java.util.Date when ) ;
void update ( final com.google.gerrit.common.data.ChangeDetail detail ) { display ( detail ) ; patchSetsBlock.setRegisterKeys ( true ) ; }
public net.sf.ehcache.statistics.sampled.SampledCacheStatistics getSampledCacheStatistics ( ) { return self.getSampledCacheStatistics ( ) ; }
public void onFailure ( final java.lang.Throwable caught ) { enableUI ( true ) ; }
public java.util.Map < java.lang.Object , com.codahale.metrics.Metric > getCells ( ) { return com.google.common.collect.Maps.transformValues ( cells , ( in ) -> ( ( com.codahale.metrics.Metric ) ( in ) ) ) ; }
private static < T > com.google.gwtorm.server.GeneratedClassLoader newLoader ( final java.lang.Class < T > schema ) { return new com.google.gwtorm.server.GeneratedClassLoader ( schema.getClassLoader ( ) ) ; }
public void onSuccess ( com.google.gerrit.client.info.ChangeInfo.CommitInfo info ) { rev.setCommit ( info ) ; }
private java.util.List < com.google.gerrit.extensions.api.projects.TagInfo > getTags ( ) throws java.lang.Exception { return gApi.projects ( ) . name ( project.get ( ) ) . tags ( ) . get ( ) ; }
public void onLoad ( com.google.gerrit.plugin.client.extension.Panel panel ) { com.google.gerrit.client.info.ChangeInfo.RevisionInfo rev = panel.getObject ( GerritUiExtensionPoint.Key.REVISION_INFO ) . cast ( ) ; if ( rev.isEdit ( ) ) { return ; } panel.setWidget ( new com.googlesource.gerrit.plugins.verifystatus.client.JobsDropDownPanel ( panel ) ) ; }
public void onPreMerge ( org.eclipse.jgit.lib.Repository repo , com.google.gerrit.server.git.CodeReviewCommit commit , com.google.gerrit.server.project.ProjectState destProject , com.google.gerrit.reviewdb.client.Branch.NameKey destBranch , com.google.gerrit.reviewdb.client.PatchSet.Id patchSetId , com.google.gerrit.server.IdentifiedUser caller ) throws com.google.gerrit.server.git.validators.MergeValidationException ;
public boolean shouldPublish ( ) { return config.isEnabled ( ) ; }
public void projectDetail ( final com.google.gerrit.reviewdb.client.Project.NameKey projectName , final com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.ProjectDetail > callback ) { projectDetailFactory.create ( projectName ) . to ( callback ) ; }
private static com.google.gwt.user.client.ui.Anchor anchor ( final java.lang.String text , final java.lang.String to ) { final com.google.gwt.user.client.ui.Anchor a = new com.google.gwt.user.client.ui.Anchor ( text , to ) ; a.setStyleName ( "gerrit-MenuItem" ) ; com.google.gwt.user.client.ui.Accessibility.setRole ( a.getElement ( ) , Accessibility.ROLE_MENUITEM ) ; return a ; }
void projectDetail ( com.google.gerrit.reviewdb.Project.NameKey projectName , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.common.data.ProjectDetail > callback ) ;
public void onSuccess ( com.google.gerrit.client.changes.ChangeInfo.CommitInfo info ) { rev.setCommit ( info ) ; }
protected static MailMessage.Builder newMailMessageBuilder ( ) { com.google.gerrit.server.mail.receive.MailMessage.Builder b = com.google.gerrit.server.mail.receive.MailMessage.builder ( ) ; b.id ( "id" ) ; b.from ( new com.google.gerrit.server.mail.Address ( "Foo Bar" , "foo@bar.com" ) ) ; b.dateReceived ( java.time.Instant.now ( ) ) ; b.subject ( "" ) ; return b ; }
public com.google.gerrit.server.query.change.ChangeDataSource getSource ( com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > p , int limit ) { throw new java.lang.UnsupportedOperationException ( ) ; }
private boolean canCopy ( ) { return ( permissionBackend.user ( currentUserProvider ) . testOrFalse ( com.google.gerrit.server.permissions.GlobalPermission.ADMINISTRATE_SERVER ) ) || ( permissionBackend.user ( currentUserProvider ) . testOrFalse ( new com.google.gerrit.extensions.api.access.PluginPermission ( pluginName , CopyProjectCapability.ID ) ) ) ; }
public void testCreateSchema ( ) throws java.lang.Exception { final com.google.gwtorm.data.PhoneBookDb schema = open ( ) ; schema.updateSchema ( ) ; }
public void doChangeMergedHook ( com.google.gerrit.reviewdb.client.Change change , com.google.gerrit.reviewdb.client.Account account , com.google.gerrit.reviewdb.client.PatchSet patchSet , com.google.gerrit.reviewdb.server.ReviewDb db , java.lang.String mergeResultRev ) { }
private void assertBadRequest ( com.google.gerrit.extensions.api.projects.Projects.ListRequest req ) throws java.lang.Exception { exception.expect ( com.google.gerrit.extensions.restapi.BadRequestException.class ) ; req.get ( ) ; }
com.google.gerrit.server.change.ChangeEdits.DeleteFile create ( java.lang.String path ) ;
public void setStars ( com.google.common.collect.ListMultimap < com.google.gerrit.reviewdb.client.Account.Id , java.lang.String > stars ) { this . stars = com.google.common.collect.ImmutableListMultimap.copyOf ( stars ) ; }
com.google.gerrit.server.notedb.ChangeUpdate create ( com.google.gerrit.server.project.ChangeControl ctl , java.util.Date when ) ;
public final com.google.gerrit.extensions.client.ProjectState state ( ) { if ( ( stateRaw ( ) ) == null ) { return com.google.gerrit.extensions.client.ProjectState.ACTIVE ; } return com.google.gerrit.extensions.client.ProjectState.valueOf ( stateRaw ( ) ) ; }
public void onClick ( com.google.gwt.event.dom.client.ClickEvent event ) { if ( ! ( isEdit ( ) ) ) { setOpen ( ( ! ( isOpen ( ) ) ) ) ; } }
public void onSuccess ( final com.google.gerrit.client.reviewdb.PatchLineComment result ) { comment = result ; text.setReadOnly ( false ) ; cancel.setEnabled ( true ) ; discard.setEnabled ( true ) ; render ( ) ; }
public void testAcrossMultipleLines ( ) { com.google.gerrit.client.diff.EditIterator iter = new com.google.gerrit.client.diff.EditIterator ( lines , 0 ) ; assertLineChsEqual ( net.codemirror.lib.Pos.create ( 2 , 2 ) , iter.advance ( 10 ) ) ; }
private java.io.InputStream open ( java.lang.String name ) { return com.google.gerrit.launcher.GerritLauncher.class . getClassLoader ( ) . getResourceAsStream ( name ) ; }
public void setRange ( com.google.gerrit.extensions.common.Comment.Range r ) { if ( r != null ) { range = new com.google.gerrit.reviewdb.client.CommentRange ( r.startLine , r.startCharacter , r.endLine , r.endCharacter ) ; } else { range = null ; } }
public void onFailure ( java.lang.Throwable err ) { getTab ( ) . setTitle ( Resources.M.relatedChanges ( Resources.C.notAvailable ( ) ) ) ; getTab ( ) . setError ( err.getMessage ( ) ) ; }
public org.eclipse.jgit.lib.ObjectId insert ( com.google.gerrit.server.git.InsertedObject obj ) { inserted.put ( obj.id ( ) , obj ) ; return obj.id ( ) ; }
public void testChangeDeletedFromIndexFailed ( ) throws java.lang.Exception { setUpMocks ( com.ericsson.gerrit.plugins.multimaster.RestEventForwarderTest.DELETE_OP , com.ericsson.gerrit.plugins.multimaster.RestEventForwarderTest.FAILED , com.ericsson.gerrit.plugins.multimaster.RestEventForwarderTest.ERROR_MSG , com.ericsson.gerrit.plugins.multimaster.RestEventForwarderTest.DO_NOT_THROW_EXCEPTION ) ; com.google.common.truth.Truth.assertThat ( eventForwarder.deleteChangeFromIndex ( com.ericsson.gerrit.plugins.multimaster.RestEventForwarderTest.CHANGE_NUMBER ) ) . isFalse ( ) ; }
void onReplaceByKeys ( org.eclipse.jgit.lib.ObjectId oldNotesRev , org.eclipse.jgit.lib.ObjectId newNotesRev , com.google.gerrit.reviewdb.client.Account.Id accountId , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId.Key > toRemove , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId > toAdd ) throws java.io.IOException ;
public void setArguments ( final java.lang.String [ ] argv ) { this . argv = argv ; }
public final native com.google.gerrit.client.rpc.NativeMap < com.google.gerrit.client.projects.ConfigInfo.ConfigParameterInfo > pluginConfig ( java.lang.String p ) ;
public void onSuccess ( com.google.gerrit.reviewdb.client.Account result ) { if ( ! ( isAttached ( ) ) ) { return ; } display ( com.google.gerrit.client.FormatUtil.asInfo ( result ) ) ; haveAccount = true ; postLoad ( ) ; }
private void addWebLink ( java.lang.String href , java.lang.String name ) { com.google.gwt.dom.client.AnchorElement a = com.google.gwt.user.client.DOM.createAnchor ( ) . cast ( ) ; a.setHref ( href ) ; a.setInnerText ( name ) ; webLinkCell.appendChild ( a ) ; }
public java.lang.Boolean call ( ) throws com.google.gerrit.server.project.NoSuchProjectException { com.google.gerrit.server.project.ProjectControl projectControl = controlFor ( project ) ; return ( shouldReplicate ( projectControl ) ) && ( ( PushOne.ALL_REFS.equals ( ref ) ) || ( projectControl.controlForRef ( ref ) . isVisible ( ) ) ) ; }
public void onSuccess ( com.google.gerrit.client.rpc.NativeMap < com.google.gwt.core.client.JsArray < com.google.gerrit.client.changes.CommentInfo > > result ) { com.google.gwt.core.client.JsArray < com.google.gerrit.client.changes.CommentInfo > in = result.get ( path ) ; if ( in != null ) { addAllToCommentList ( in , toDrafts ) ; } }
public java.io.File getBasePath ( ) { return repoManager.getBasePath ( ) . toFile ( ) ; }
public com.google.gerrit.extensions.common.CommitInfo commit ( boolean addLinks ) throws com.google.gerrit.extensions.restapi.RestApiException { throw new com.google.gerrit.extensions.restapi.NotImplementedException ( ) ; }
public boolean isLdapAuthType ( ) { return ( ( authType ) == ( com.google.gerrit.extensions.client.AuthType.LDAP ) ) || ( ( authType ) == ( com.google.gerrit.extensions.client.AuthType.LDAP_BIND ) ) ; }
private org.eclipse.jgit.lib.PersonIdent getRefLogIdent ( java.sql.Timestamp timestamp ) { com.google.gerrit.server.IdentifiedUser user = currentUser.get ( ) . asIdentifiedUser ( ) ; return user.newRefLogIdent ( timestamp , tz ) ; }
public com.googlesource.gerrit.plugins.findowners.OwnersDb call ( ) { com.googlesource.gerrit.plugins.findowners.Cache.log.trace ( ( "Create new OwnersDb, key=" + key ) ) ; return new com.googlesource.gerrit.plugins.findowners.OwnersDb ( accountCache , accounts , key , repository , project , branch , files ) ; }
protected com.google.gwtorm.data.PhoneBookDb openAndCreate ( ) throws com.google.gwtorm.client.OrmException { final com.google.gwtorm.data.PhoneBookDb schema = open ( ) ; schema.updateSchema ( ) ; return schema ; }
protected void loadPrev ( ) { Util.LIST_SVC.byProjectOpenPrev ( projectKey , pos , pageSize , loadCallback ( ) ) ; }
public com.googlesource.gerrit.plugins.github.git.GHContentUpdateResponse createContent ( java.lang.String content , java.lang.String commitMessage , java.lang.String path ) throws java.io.IOException { return ghRepository.createContent ( content , commitMessage , path ) ; }
protected com.google.gwtjsonrpc.server.SignedToken createXsrfSignedToken ( ) throws com.google.gwtjsonrpc.server.XsrfException { return new com.google.gwtjsonrpc.server.SignedToken ( ( ( 4 * 60 ) * 60 ) ) ; }
private com.google.gerrit.server.patch.PatchList listFor ( final com.google.gerrit.server.patch.PatchListKey key ) { return patchListCache.get ( key ) ; }
public com.google.gerrit.server.patch.DiffSummary call ( ) throws java.lang.Exception { com.google.gerrit.server.patch.PatchList patchList = patchListCache.get ( key.toPatchListKey ( ) , project ) ; return com.google.gerrit.server.patch.DiffSummaryLoader.toDiffSummary ( patchList ) ; }
com.google.gerrit.server.index.account.AccountIndexer getAccountIndexer ( com.google.gerrit.server.index.account.AccountIndexerImpl.Factory factory , com.google.gerrit.server.index.account.AccountIndexCollection indexes ) { return factory.create ( indexes ) ; }
private com.google.gerrit.client.diff.CommentGroup newGroup ( com.google.gerrit.client.diff.DisplaySide side , int line ) { return new com.google.gerrit.client.diff.CommentGroup ( this , host.getCmFromSide ( side ) , line ) ; }
public com.googlesource.gerrit.plugins.its.phabricator.conduit.results.ManiphestEdit maniphestEdit ( int taskId , java.lang.Iterable < java.lang.String > projects ) throws com.googlesource.gerrit.plugins.its.phabricator.conduit.ConduitException { return maniphestEdit ( taskId , null , projects ) ; }
public void fire ( com.google.gerrit.reviewdb.client.Project.NameKey project , org.eclipse.jgit.lib.RefUpdate refUpdate , org.eclipse.jgit.transport.ReceiveCommand.Type type ) { fire ( project , refUpdate.getName ( ) , refUpdate.getOldObjectId ( ) , refUpdate.getNewObjectId ( ) , type ) ; }
public AccountExternalId.Key apply ( com.google.gerrit.gpg.Fingerprint fp ) { return toExtIdKey ( fp.get ( ) ) ; }
protected void configure ( ) { post ( com.google.gerrit.server.change.RevisionResource.REVISION_KIND , "hello-revision" ) . to ( com.googlesource.gerrit.plugins.cookbook.HelloRevisionAction.class ) ; post ( com.google.gerrit.server.project.ProjectResource.PROJECT_KIND , "hello-project" ) . to ( com.googlesource.gerrit.plugins.cookbook.HelloProjectAction.class ) ; get ( com.google.gerrit.server.change.RevisionResource.REVISION_KIND , "greetings" ) . to ( com.googlesource.gerrit.plugins.cookbook.Greetings.class ) ; }
private java.lang.String relativePathOf ( java.nio.file.Path path ) { return path.toFile ( ) . getAbsolutePath ( ) . substring ( basicPathLength ) ; }
public void restore ( com.google.gerrit.extensions.api.changes.RestoreInput in ) throws com.google.gerrit.extensions.restapi.RestApiException { try { restore.apply ( change , in ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot restore change" , e ) ; } }
public static java.util.EnumSet < com.google.gerrit.reviewdb.client.Change.Status > getPossibleStatus ( com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > in ) { java.util.EnumSet < com.google.gerrit.reviewdb.client.Change.Status > s = com.google.gerrit.server.index.change.ChangeIndexRewriter.extractStatus ( in ) ; return s != null ? s : java.util.EnumSet.allOf ( com.google.gerrit.reviewdb.client.Change.Status.class ) ; }
public void printJson ( java.io.PrintWriter out ) throws java.io.IOException { try ( com.google.gson.stream.JsonWriter writer = new com.google.gson.stream.JsonWriter ( out ) ) { new com.google.gson.Gson ( ) . toJson ( this , com.googlesource.gerrit.plugins.github.git.GitJobStatus.class , writer ) ; } }
protected com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > enforceVisibility ( com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > pred ) { return new com.google.gerrit.server.query.change.AndChangeSource ( pred , new com.google.gerrit.server.query.change.ChangeIsVisibleToPredicate ( db , notesFactory , changeControlFactory , userProvider.get ( ) , permissionBackend ) , start ) ; }
static com.google.gerrit.server.account.externalids.ExternalId create ( com.google.gerrit.server.account.externalids.ExternalId.Key key , com.google.gerrit.reviewdb.client.Account.Id accountId , @ com.google.gerrit.common.Nullable java.lang.String email , @ com.google.gerrit.common.Nullable java.lang.String hashedPassword , @ com.google.gerrit.common.Nullable org.eclipse.jgit.lib.ObjectId blobId ) { return new com.google.gerrit.server.account.externalids.AutoValue_ExternalId ( key , accountId , com.google.common.base.Strings.emptyToNull ( email ) , com.google.common.base.Strings.emptyToNull ( hashedPassword ) , blobId ) ; }
protected void setUp ( ) throws java.lang.Exception { repo = new org.eclipse.jgit.junit.TestRepository < org.eclipse.jgit.internal.storage.dfs.DfsRepository > ( new org.eclipse.jgit.internal.storage.dfs.InMemoryRepository ( new org.eclipse.jgit.internal.storage.dfs.DfsRepositoryDescription ( "test" ) ) ) ; servlet = com.google.gitiles.TestGitilesServlet.create ( repo ) ; }
private < V > boolean isDirty ( java.util.Collection < com.google.gerrit.server.index.VersionManager.Version < V > > inUse , com.google.gerrit.server.index.VersionManager.Version < V > v ) { return ( ! ( inUse.contains ( v ) ) ) && ( v.exists ) ; }
public boolean canUpload ( ) { return ( projectControl.controlForRef ( ( "refs/for/" + ( getRefName ( ) ) ) ) . canPerform ( Permission.PUSH ) ) && ( isProjectStatePermittingWrite ( ) ) ; }
protected void run ( ) { while ( ( ( count ) -- ) > 0 ) { stdout.print ( "Hello, example administrator\n" ) ; } }
public static boolean isSignedIn ( ) { return ( com.google.gerrit.client.Gerrit.xGerritAuth ) != null ; }
private static java.lang.String tempNameFor ( java.lang.String name ) { java.text.SimpleDateFormat fmt = new java.text.SimpleDateFormat ( "yyMMdd_HHmm" ) ; return ( ( ( ( com.google.gerrit.server.plugins.PluginLoader.PLUGIN_TMP_PREFIX ) + name ) + "_" ) + ( fmt.format ( new java.util.Date ( ) ) ) ) + "_" ; }
private boolean canUpload ( ) { return ( projectControl.controlForRef ( ( "refs/for/" + ( refName ) ) ) . canPerform ( Permission.PUSH ) ) && ( getProjectControl ( ) . getProject ( ) . getState ( ) . permitsWrite ( ) ) ; }
private void addReviewerToReviewableChangeInReviewDb ( com.google.gerrit.acceptance.server.mail.AddReviewerSenderIT.Adder adder ) throws java.lang.Exception { com.google.common.truth.TruthJUnit.assume ( ) . that ( notesMigration.readChanges ( ) ) . isFalse ( ) ; com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableChange ( ) ; com.google.gerrit.acceptance.TestAccount reviewer = accountCreator.create ( "added" , "added@example.com" , "added" ) ; addReviewer ( adder , sc.changeId , sc.owner , reviewer.email ) ; assertThat ( sender ) . sent ( "newchange" , sc ) . to ( reviewer ) . cc ( sc.reviewer , sc.ccer ) . cc ( sc.reviewerByEmail , sc.ccerByEmail ) . noOneElse ( ) ; }
public java.lang.String myUrl ( ) { return myUrl ; }
public int getStoryId ( final java.lang.String issueId ) throws java.io.IOException { java.lang.String taskJson = getTask ( issueId ) ; com.google.gson.JsonObject jobj = new com.google.gson.Gson ( ) . fromJson ( taskJson , com.google.gson.JsonObject.class ) ; return jobj.get ( "story_id" ) . getAsInt ( ) ; }
static void deleteAllIndexes ( com.google.gerrit.elasticsearch.ElasticTestUtils.ElasticNodeInfo nodeInfo ) { nodeInfo.node.client ( ) . admin ( ) . indices ( ) . prepareDelete ( "_all" ) . execute ( ) . actionGet ( ) ; }
public com.google.common.collect.ImmutableList < com.google.gerrit.server.git.InsertedObject > getInsertedObjects ( ) { return com.google.common.collect.ImmutableList.copyOf ( inserted.values ( ) ) ; }
public void start ( ) throws com.google.gerrit.server.StartupException { for ( com.google.gerrit.server.StartupCheck startupCheck : startupChecks ) { startupCheck.check ( ) ; } }
static void deleteAllIndexes ( com.google.gerrit.elasticsearch.ElasticTestUtils.ElasticNodeInfo nodeInfo ) { nodeInfo.node.client ( ) . admin ( ) . indices ( ) . prepareDelete ( "_all" ) . execute ( ) ; }
public void createDraftChange ( ) throws java.lang.Exception { com.google.common.truth.TruthJUnit.assume ( ) . that ( isAllowDrafts ( ) ) . isTrue ( ) ; assertCreateSucceeds ( newChangeInfo ( ChangeStatus.DRAFT ) ) ; }
public boolean canDelete ( ) { switch ( getCurrentUser ( ) . getAccessPath ( ) ) { case WEB_UI : return ( isOwner ( ) ) || ( canPushWithForce ( ) ) ; case GIT : return canPushWithForce ( ) ; default : return false ; } }
public static java.lang.String toChange ( final com.google.gerrit.client.data.ChangeInfo c ) { return com.google.gerrit.client.Link.toChange ( c.getId ( ) ) ; }
private void assertProblems ( org.eclipse.jgit.transport.PushCertificate cert , java.lang.String ... expected ) throws java.lang.Exception { com.google.gerrit.gpg.CheckResult result = checker.check ( cert ) . getCheckResult ( ) ; org.junit.Assert.assertEquals ( java.util.Arrays.asList ( expected ) , result.getProblems ( ) ) ; }
public void onSuccess ( java.lang.String result ) { sent = true ; com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( change.getId ( ) ) ) ; hide ( ) ; }
protected void loadNext ( ) { Util.LIST_SVC.byProjectOpenNext ( projectKey , pos , pageSize , loadCallback ( ) ) ; }
private static com.google.gwt.user.client.ui.Anchor anchor ( final java.lang.String text , final java.lang.String to ) { final com.google.gwt.user.client.ui.Anchor a = new com.google.gwt.user.client.ui.Anchor ( text , to ) ; a.setStyleName ( "gerrit-MenuItem" ) ; com.google.gwt.user.client.ui.Accessibility.setRole ( a.getElement ( ) , Accessibility.ROLE_MENUITEM ) ; return a ; }
public void onFailure ( java.lang.Throwable caught ) { enableButtons ( true ) ; super . onFailure ( caught ) ; }
void setContext ( final int context ) { operation ( new java.lang.Runnable ( ) { @ java.lang.Override public void run ( ) { skipManager.removeAll ( ) ; skipManager.render ( context , diff ) ; updateRenderEntireFile ( ) ; } } ) ; }
public boolean apply ( com.google.gerrit.reviewdb.client.Project project , java.lang.String hash , java.lang.String name , com.google.gerrit.server.git.GitRepositoryManager gitRepoManager ) { project.setRevision ( hash ) ; if ( ! ( org.eclipse.jgit.lib.ObjectId.isId ( name ) ) ) { project.setUpstream ( name ) ; } return true ; }
public com.google.gerrit.server.project.ChangeControl getControl ( ) { com.google.common.base.Preconditions.checkNotNull ( ctl ) ; return ctl ; }
public com.google.common.util.concurrent.CheckedFuture < ? , java.io.IOException > indexAsync ( com.google.gerrit.server.query.change.ChangeData cd ) { return com.google.common.util.concurrent.Futures.immediateCheckedFuture ( null ) ; }
void onCancel ( com.google.gwt.event.dom.client.ClickEvent e ) { setEdit ( false ) ; cm.focus ( ) ; }
private static org.eclipse.jgit.errors.ConfigInvalidException invalidConfig ( java.lang.String noteId , java.lang.String message ) { return new org.eclipse.jgit.errors.ConfigInvalidException ( java.lang.String.format ( "Invalid external ID config for note '%s': %s" , noteId , message ) ) ; }
public int getCost ( ) { return 1 ; }
public UiAction.Description getDescription ( com.google.gerrit.server.change.ChangeResource resource ) { return new com.google.gerrit.extensions.webui.UiAction.Description ( ) . setLabel ( "Edit Topic" ) . setVisible ( resource.getControl ( ) . canEditTopicName ( ) ) ; }
protected PushOneCommit.Result createChange ( ) throws java.lang.Exception { com.google.gerrit.acceptance.PushOneCommit push = pushFactory.create ( db , admin.getIdent ( ) , testRepo ) ; return push.to ( "refs/for/master" ) ; }
public void addReviewers ( final com.google.gerrit.reviewdb.client.Change.Id id , final java.util.List < java.lang.String > reviewers , final boolean confirmed , final com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.ReviewerResult > callback ) { addReviewerHandlerFactory.create ( id , reviewers , confirmed ) . to ( callback ) ; }
protected void migrateData ( com.google.gerrit.reviewdb.ReviewDb db , com.google.gerrit.server.schema.UpdateUI ui ) throws com.google.gwtorm.client.OrmException { db.approvalCategoryValues ( ) . insert ( java.util.Collections.singleton ( new com.google.gerrit.reviewdb.ApprovalCategoryValue ( new com.google.gerrit.reviewdb.ApprovalCategoryValue.Id ( com.google.gerrit.reviewdb.ApprovalCategory.FORGE_IDENTITY , com.google.gerrit.reviewdb.ApprovalCategory.FORGE_SERVER ) , "Forge Gerrit Code Review Server Identity" ) ) ) ; }
public void destroy ( ) { if ( ( manager ) != null ) { manager.stop ( ) ; manager = null ; } }
private void fastForwardTagToExistingCommit ( com.google.gerrit.acceptance.rest.project.PushTagIT.TagType tagType , java.lang.String tagName , org.eclipse.jgit.transport.RemoteRefUpdate.Status expectedStatus ) throws java.lang.Exception { pushTag ( tagType , tagName , false , false , expectedStatus ) ; }
public static com.google.gerrit.client.rpc.RestApi edit ( @ com.google.gerrit.common.Nullable java.lang.String project , int id ) { return com.google.gerrit.client.changes.ChangeApi.change ( project , id ) . view ( "edit" ) ; }
private org.antlr.runtime.tree.Tree onlyChildOf ( org.antlr.runtime.tree.Tree r ) throws com.google.gerrit.index.query.QueryParseException { if ( ( r.getChildCount ( ) ) != 1 ) { throw com.google.gerrit.index.query.QueryBuilder.error ( ( "Expected exactly one child: " + r ) ) ; } return r.getChild ( 0 ) ; }
final native void restorePath ( java.lang.String p ) ;
public java.util.List < com.google.gerrit.index.query.Predicate < T > > getChildren ( ) { return com.google.common.collect.ImmutableList.of ( pred ) ; }
public abstract com.google.gerrit.server.plugins.PluginContentScanner getContentScanner ( ) ;
public boolean isOwnerAnyRef ( ) { return ( canPerformOnAnyRef ( Permission.OWNER ) ) || ( user.getCapabilities ( ) . isAdmin_DoNotUse ( ) ) ; }
public abstract void display ( com.google.gerrit.client.patches.CommentDetail comments ) ;
public boolean hasChange ( ) { return index.getSchema ( ) . hasField ( ChangeField.CHANGE ) ; }
public java.lang.String asString ( ) { if ( ( html ) == null ) { com.google.gwtexpui.safehtml.client.SafeHtmlBuilder sb = new com.google.gwtexpui.safehtml.client.SafeHtmlBuilder ( ) ; renderRow ( sb ) ; html = sb.asString ( ) ; info = null ; } return html ; }
private com.google.gerrit.index.query.Predicate < com.google.gerrit.server.query.change.ChangeData > rewrite ( com.google.gerrit.index.query.Predicate < com.google.gerrit.server.query.change.ChangeData > in ) throws com.google.gerrit.index.query.QueryParseException { return rewrite.rewrite ( in , com.google.gerrit.server.index.change.ChangeIndexRewriterTest.options ( 0 , com.google.gerrit.common.data.GlobalCapability.DEFAULT_MAX_QUERY_LIMIT ) ) ; }
private boolean isDeclaredOwner ( ) { if ( ( declaredOwner ) == null ) { com.google.gerrit.server.account.GroupMembership effectiveGroups = user.getEffectiveGroups ( ) ; declaredOwner = effectiveGroups.containsAnyOf ( state.getAllOwners ( ) ) ; } return declaredOwner ; }
public com.google.gerrit.reviewdb.client.PatchSet getCurrentPatchSet ( ) { return currentPatchSet ; }
public final native void downloadScheme ( java.lang.String d ) ;
public void onSuccess ( com.google.gerrit.client.access.ProjectAccessInfo result ) { addPanel.setVisible ( result.canAddRefs ( ) ) ; }
private void visitChildren ( org.commonmark.node.Node node ) { for ( org.commonmark.node.Node c = node.getFirstChild ( ) ; c != null ; c = c.getNext ( ) ) { c.accept ( this ) ; } }
public void display ( com.google.gerrit.client.groups.GroupList groups ) { display ( groups.asList ( ) , null ) ; }
public final native com.google.gwt.core.client.JsArray < com.google.gerrit.client.DiffWebLinkInfo > webLinks ( ) ;
public static java.util.EnumSet < com.google.gerrit.reviewdb.client.Change.Status > getPossibleStatus ( com.google.gerrit.index.query.Predicate < com.google.gerrit.server.query.change.ChangeData > in ) { java.util.EnumSet < com.google.gerrit.reviewdb.client.Change.Status > s = com.google.gerrit.server.index.change.ChangeIndexRewriter.extractStatus ( in ) ; return s != null ? s : java.util.EnumSet.allOf ( com.google.gerrit.reviewdb.client.Change.Status.class ) ; }
public void start ( ) { if ( replicateOnStartup ) { pushAll.create ( null ) . start ( 30 , java.util.concurrent.TimeUnit.SECONDS ) ; } submit.create ( ) . start ( 15 , java.util.concurrent.TimeUnit.SECONDS ) ; }
public boolean canAdministrateServer ( ) { if ( ( canAdministrateServer ) == null ) { canAdministrateServer = ( ( user ) instanceof com.google.gerrit.server.PeerDaemonUser ) || ( matchAny ( capabilities.administrateServer ) ) ; } return canAdministrateServer ; }
public void testParse_Email1 ( ) { final com.google.gerrit.server.mail.Address a = com.google.gerrit.server.mail.Address.parse ( "author@example.com" ) ; org.junit.Assert.assertNull ( a.name ) ; org.junit.Assert.assertEquals ( "author@example.com" , a.email ) ; }
public void createEmptyChange_InvalidStatus ( ) throws java.lang.Exception { com.google.gerrit.extensions.common.ChangeInfo ci = newChangeInfo ( ChangeStatus.MERGED ) ; assertCreateFails ( ci , com.google.gerrit.extensions.restapi.BadRequestException.class , "unsupported change status" ) ; }
private void blockReviewDbUpdates ( boolean block ) { cfg.setBoolean ( "user" , null , "blockReviewDbGroupUpdates" , block ) ; }
public void onSuccess ( com.google.gerrit.common.data.ChangeDetail result ) { onSubmitResult ( result ) ; }
private static com.google.common.base.Optional < com.google.gitiles.FormatType > set ( javax.servlet.http.HttpServletRequest req , com.google.common.base.Optional < com.google.gitiles.FormatType > format ) { req.setAttribute ( com.google.gitiles.FormatType.FORMAT_TYPE_ATTRIBUTE , format ) ; return format ; }
public java.util.Collection < java.lang.String > getWarnings ( com.google.gerrit.server.project.ProjectResource rsrc ) throws com.google.gwtorm.server.OrmException { return dbHandler.getWarnings ( rsrc.getControl ( ) . getProject ( ) ) ; }
public void onSuccess ( com.google.gwtjsonrpc.client.VoidResult result ) { actionsPanel.remove ( b ) ; fireOnSuggestRefresh ( ) ; }
private static boolean canCoalesce ( com.google.gerrit.server.patch.CharText a , int b , int e ) { while ( b < e ) { if ( ( a.charAt ( ( b ++ ) ) ) == '\n' ) { return false ; } } return true ; }
public static void register ( java.lang.String eventType , java.lang.Class < ? extends com.google.gerrit.server.events.Event > eventClass ) { com.google.gerrit.server.events.EventTypes.typesByString.put ( eventType , eventClass ) ; }
protected void configure ( ) { bind ( new com.google.inject.TypeLiteral < com.google.common.base.Optional < com.ericsson.gerrit.plugins.highavailability.peers.PeerInfo > > ( ) { } ) . toProvider ( com.ericsson.gerrit.plugins.highavailability.peers.PluginConfigPeerInfoProvider.class ) ; }
public void onSuccess ( com.google.gerrit.client.info.ChangeInfo info ) { info.init ( ) ; addExtensionPoints ( info ) ; loadConfigInfo ( info , base ) ; }
private com.google.gerrit.acceptance.AcceptanceTestRequestScope.Context newContinuingContext ( com.google.gerrit.acceptance.AcceptanceTestRequestScope.Context ctx ) { return new com.google.gerrit.acceptance.AcceptanceTestRequestScope.Context ( ctx , ctx.getSession ( ) , ctx.getUser ( ) ) ; }
private void assertApproveFails ( com.google.gerrit.acceptance.TestAccount a , java.lang.String changeId ) throws java.lang.Exception { exception.expect ( com.google.gerrit.extensions.restapi.AuthException.class ) ; approve ( a , changeId ) ; }
protected void onUnload ( ) { super . onUnload ( ) ; if ( saveStateOnUnload ) { com.google.gerrit.client.changes.PublishCommentScreen.lastState = new com.google.gerrit.client.changes.PublishCommentScreen.SavedState ( this ) ; } }
public java.lang.String getText ( ) { java.lang.String s = nameTxtBox.getText ( ) ; if ( ( s == null ) || ( s.equals ( Util.C.defaultAccountName ( ) ) ) ) { s = "" ; } return s ; }
public void setSubmitTypeRecord ( com.google.gerrit.common.data.SubmitTypeRecord submitTypeRecord ) { this . submitTypeRecord = submitTypeRecord ; }
public static void markPrivate ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwt.core.client.JavaScriptObject > cb ) { com.google.gerrit.client.changes.ChangeApi.change ( project , id ) . view ( "private" ) . post ( com.google.gerrit.client.changes.ChangeApi.PrivateInput.create ( ) , cb ) ; }
public static com.google.common.cache.CacheBuilder < java.lang.Object , java.lang.Object > defaultBuilder ( ) { return com.google.common.cache.CacheBuilder.newBuilder ( ) . maximumSize ( ( 10 << 10 ) ) ; }
com.google.gerrit.server.git.receive.ReplaceOp create ( com.google.gerrit.server.project.ProjectState projectState , com.google.gerrit.reviewdb.client.Branch.NameKey dest , boolean checkMergedInto , @ com.google.inject.assistedinject.Assisted ( value = "priorPatchSetId" ) com.google.gerrit.reviewdb.client.PatchSet.Id priorPatchSetId , @ com.google.inject.assistedinject.Assisted ( value = "priorCommitId" ) org.eclipse.jgit.lib.ObjectId priorCommit , @ com.google.inject.assistedinject.Assisted ( value = "patchSetId" ) com.google.gerrit.reviewdb.client.PatchSet.Id patchSetId , @ com.google.inject.assistedinject.Assisted ( value = "commitId" ) org.eclipse.jgit.lib.ObjectId commitId , com.google.gerrit.reviewdb.client.PatchSetInfo info , java.util.List < java.lang.String > groups , @ com.google.gerrit.common.Nullable com.google.gerrit.server.git.receive.ReceiveCommits.MagicBranchInput magicBranch , @ com.google.gerrit.common.Nullable org.eclipse.jgit.transport.PushCertificate pushCertificate ) ;
public void onClick ( com.google.gwt.event.dom.client.ClickEvent event ) { buttonClicked = true ; hide ( ) ; com.google.gerrit.client.Gerrit.doSignIn ( com.google.gwt.user.client.History.getToken ( ) ) ; }
public java.util.List < com.google.gerrit.reviewdb.client.PatchSetApproval > allApprovals ( ) throws com.google.gwtorm.server.OrmException { return com.google.common.collect.ImmutableList.copyOf ( allApprovalsMap ( ) . values ( ) ) ; }
void addFileCommentBox ( com.google.gerrit.client.diff.CommentBox box , com.google.gerrit.common.changes.Side side ) { diffTable.addFileCommentBox ( box , side ) ; }
private static com.google.gerrit.common.data.ParameterizedString parse ( java.lang.String pattern ) { if ( ! ( com.google.common.base.Strings.isNullOrEmpty ( pattern ) ) ) { return new com.google.gerrit.common.data.ParameterizedString ( pattern ) ; } return null ; }
public void close ( ) { try { openIndex.close ( ) ; } finally { closedIndex.close ( ) ; } }
private static boolean isJsonBody ( com.google.gwt.http.client.Response res ) { return com.google.gerrit.client.rpc.RestApi.isContentType ( res , com.google.gerrit.client.rpc.RestApi.JSON_TYPE ) ; }
boolean isAdmin ( ) { try { perm.check ( GlobalPermission.ADMINISTRATE_SERVER ) ; return true ; } catch ( com.google.gerrit.extensions.restapi.AuthException | com.google.gerrit.server.permissions.PermissionBackendException e ) { return false ; } }
void operation ( java.lang.Runnable apply ) { cmA.operation ( ( ) -> { cmB.operation ( apply :: run ) ; } ) ; }
public static void draft ( @ com.google.gerrit.common.Nullable java.lang.String project , com.google.gerrit.reviewdb.client.PatchSet.Id id , java.lang.String draftId , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.changes.CommentInfo > cb ) { com.google.gerrit.client.changes.CommentApi.revision ( project , id , "drafts" ) . id ( draftId ) . get ( cb ) ; }
public static com.google.gerrit.lucene.LuceneIndexModule singleVersionAllLatest ( int threads , boolean slave ) { return new com.google.gerrit.lucene.LuceneIndexModule ( com.google.common.collect.ImmutableMap.of ( ) , threads , false , slave ) ; }
public static boolean hasDocSearch ( ) { return com.google.gerrit.client.Gerrit.docSearch ; }
public void onEvent ( final com.google.gerrit.server.events.Event event ) { if ( ( subscribedToEvents.isEmpty ( ) ) || ( subscribedToEvents.contains ( event.getType ( ) ) ) ) { offer ( event ) ; } }
private static java.lang.String safeHostname ( java.lang.String hostname ) { if ( 0 <= ( hostname.indexOf ( ':' ) ) ) { hostname = ( "[" + hostname ) + "]" ; } return hostname ; }
public static void all ( com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.projects.ProjectMap > callback ) { new com.google.gerrit.client.rpc.RestApi ( "/projects/" ) . addParameterRaw ( "type" , "ALL" ) . addParameterTrue ( "all" ) . addParameterTrue ( "d" ) . get ( com.google.gerrit.client.rpc.NativeMap.copyKeysIntoChildren ( callback ) ) ; }
void appendUser ( java.lang.String key , com.google.gerrit.extensions.common.AccountInfo user ) { sb.append ( key ) ; sb.append ( ": " ) ; appendUserData ( user ) ; sb.append ( "\n" ) ; }
public void remove ( com.google.gerrit.extensions.api.changes.DeleteReviewerInput input ) throws com.google.gerrit.extensions.restapi.RestApiException { try { deleteReviewer.apply ( reviewer , input ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot remove reviewer" , e ) ; } }
private static boolean acceptsJson ( javax.servlet.http.HttpServletRequest req ) { return ( req != null ) && ( com.google.gerrit.httpd.restapi.RestApiServlet.isType ( com.google.gerrit.httpd.restapi.RestApiServlet.JSON_TYPE , req.getHeader ( com.google.common.net.HttpHeaders.ACCEPT ) ) ) ; }
protected void configure ( ) { factory ( LfsGetLocksAction.Factory.class ) ; factory ( LfsPutLocksAction.Factory.class ) ; factory ( LfsProjectLocks.Factory.class ) ; install ( com.googlesource.gerrit.plugins.lfs.locks.LfsLocksHandler.module ( ) ) ; }
public void onSuccess ( com.google.gerrit.client.changes.ChangeList result ) { changes = com.google.gerrit.client.rpc.Natives.asList ( result ) ; base.setEnabled ( true ) ; base.setFocus ( true ) ; }
public final java.util.List < com.google.gerrit.client.info.AgreementInfo > contributorAgreements ( ) { java.util.List < com.google.gerrit.client.info.AgreementInfo > agreements = new java.util.ArrayList < > ( ) ; for ( com.google.gerrit.client.info.AgreementInfo a : com.google.gerrit.client.rpc.Natives.asList ( _contributorAgreements ( ) ) ) { agreements.add ( a ) ; } return agreements ; }
private com.google.gerrit.server.project.ChangeControl changeControl ( com.google.gerrit.server.query.change.ChangeData cd ) throws com.google.gwtorm.server.OrmException { return cd.changeControl ( internalUserFactory.create ( ) ) ; }
public void onRemoveByKeys ( org.eclipse.jgit.lib.ObjectId oldNotesRev , org.eclipse.jgit.lib.ObjectId newNotesRev , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId.Key > extIdKeys ) { }
public void testContainsFalseWithTwoElements ( ) throws java.lang.Exception { com.google.gerrit.extensions.registration.DynamicSet < java.lang.Integer > ds = new com.google.gerrit.extensions.registration.DynamicSet ( ) ; ds.add ( 2 ) ; ds.add ( 4 ) ; com.google.common.truth.Truth.assertThat ( ds.contains ( 3 ) ) . isFalse ( ) ; }
public com.google.gerrit.extensions.common.WebLinkInfo getPatchSetWebLink ( java.lang.String projectName , java.lang.String commit ) { return new com.google.gerrit.extensions.common.WebLinkInfo ( name , null , java.lang.String.format ( "%s/%s/+/%s" , baseUrl , projectName , commit ) , target ) ; }
public com.google.gerrit.server.IdentifiedUser create ( final com.google.gerrit.server.AccessPath accessPath , final com.google.gerrit.reviewdb.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( accessPath , authConfig , canonicalUrl , realm , accountCache , starredChangesCache , accountProjectWatchCache , remotePeerProvider , dbProvider , id ) ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { doAddNew ( ) ; }
com.google.gerrit.server.IdentifiedUser provideCurrentUser ( com.google.gerrit.server.CurrentUser user ) { if ( user.isIdentifiedUser ( ) ) { return ( ( com.google.gerrit.server.IdentifiedUser ) ( user ) ) ; } throw new com.google.inject.ProvisionException ( com.google.gerrit.common.errors.NotSignedInException.MESSAGE , new com.google.gerrit.common.errors.NotSignedInException ( ) ) ; }
private org.eclipse.jgit.lib.Ref getDraftRef ( com.google.gerrit.acceptance.TestAccount account , com.google.gerrit.reviewdb.client.Change.Id changeId ) throws java.lang.Exception { try ( org.eclipse.jgit.lib.Repository repo = repoManager.openRepository ( allUsers ) ) { return repo.exactRef ( com.google.gerrit.reviewdb.client.RefNames.refsDraftComments ( account.id , changeId ) ) ; } }
public void write ( byte [ ] what , int off , int len ) { messageSender.sendBytes ( what , off , len ) ; }
public static com.google.gerrit.server.diff.PatchListEntry empty ( java.lang.String fileName ) { return new com.google.gerrit.server.diff.PatchListEntry ( com.google.gerrit.reviewdb.client.Patch.ChangeType.MODIFIED , com.google.gerrit.reviewdb.client.Patch.PatchType.UNIFIED , null , fileName , com.google.gerrit.server.diff.PatchListEntry.EMPTY_HEADER , com.google.common.collect.ImmutableList.of ( ) , com.google.common.collect.ImmutableSet.of ( ) , 0 , 0 , 0 , 0 ) ; }
public java.lang.String describeForException ( ) { if ( ( forUser ) == ( com.google.gerrit.server.permissions.LabelPermission.ForUser.ON_BEHALF_OF ) ) { return "label on behalf of " + ( label.formatWithEquals ( ) ) ; } return "label " + ( label.formatWithEquals ( ) ) ; }
public boolean getAbstain ( ) { return abstain ; }
public com.google.gerrit.reviewdb.server.ReviewDb get ( ) { if ( ( db ) == null ) { try { db = schemaFactory.open ( ) ; } catch ( com.google.gwtorm.server.OrmException e ) { throw new com.google.inject.ProvisionException ( "Cannot open ReviewDb" , e ) ; } } return db ; }
public com.googlesource.gerrit.plugins.github.git.GHContent getFileContent ( java.lang.String path ) throws java.io.IOException { return ghRepository.getFileContent ( path ) ; }
public com.google.gerrit.server.project.ChangeControl forUser ( final com.google.gerrit.server.CurrentUser who ) { return new com.google.gerrit.server.project.ChangeControl ( approvalsUtil , changeDataFactory , getRefControl ( ) . forUser ( who ) , notes ) ; }
public java.lang.Class < com.google.gerrit.server.group.AddMembers.Input > inputType ( ) { return com.google.gerrit.server.group.AddMembers.Input.class ; }
private boolean isLive ( final java.io.File entry ) { final java.lang.String name = entry.getName ( ) ; return ( ErrorLogFile.LOG_NAME.equals ( name ) ) || ( name.endsWith ( ".pid" ) ) ; }
public static void drop ( com.google.gerrit.testing.InMemoryDatabase db ) { if ( db != null ) { db.dbInstance.drop ( ) ; } }
protected java.lang.Object getRowItemKey ( final com.google.gerrit.client.info.GroupInfo item ) { return item.getGroupId ( ) ; }
private void removeEventListenerRegistration ( ) { if ( ( eventListenerRegistration ) != null ) { eventListenerRegistration.remove ( ) ; } }
public boolean canAdministrateServer ( ) { if ( ( canAdministrateServer ) == null ) { canAdministrateServer = ( ( user ) instanceof com.google.gerrit.server.PeerDaemonUser ) || ( canPerform ( GlobalCapability.ADMINISTRATE_SERVER ) ) ; } return canAdministrateServer ; }
public long getTail ( ) throws java.io.IOException { if ( ( getHead ( ) ) == 0 ) { return 0 ; } long tail = stores.tail.spinGet ( com.googlesource.gerrit.plugins.events.fsstore.FsStore.MAX_GET_SPINS ) ; return tail < 1 ? 1 : tail ; }
static void postSignIn ( ) { com.google.gerrit.client.Gerrit.refreshMenuBar ( ) ; com.google.gwt.user.client.DeferredCommand.addCommand ( new com.google.gwt.user.client.Command ( ) { public void execute ( ) { for ( final com.google.gerrit.client.SignedInListener l : com.google.gerrit.client.Gerrit.signedInListeners ) { l.onSignIn ( ) ; } } } ) ; }
public com.google.gerrit.server.OutputFormat getFormat ( ) { return format ; }
private Account.Id parseIdent ( org.eclipse.jgit.revwalk.RevCommit commit ) throws org.eclipse.jgit.errors.ConfigInvalidException { return parseIdent ( commit.getAuthorIdent ( ) ) ; }
private java.lang.String pushTagForNewCommit ( com.google.gerrit.acceptance.rest.project.PushTagIT.TagType tagType , org.eclipse.jgit.transport.RemoteRefUpdate.Status expectedStatus ) throws java.lang.Exception { return pushTag ( tagType , null , true , false , expectedStatus ) ; }
java.util.List < com.google.gerrit.extensions.common.AccountInfo > getReviewers ( ) ;
public void testCreateProjectHttpWhenProjectAlreadyExists_Conflict ( ) throws java.lang.Exception { adminSession.put ( ( "/projects/" + ( allProjects.get ( ) ) ) ) . assertConflict ( ) ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { doAddNewRight ( ) ; }
protected void configure ( ) { bind ( com.google.gerrit.server.index.ChangeIndex.class ) . toInstance ( ChangeIndex.DISABLED ) ; bind ( com.google.gerrit.server.index.ChangeIndexer.class ) . toInstance ( ChangeIndexer.DISABLED ) ; bind ( com.google.gerrit.server.query.change.IndexRewrite.class ) . toInstance ( IndexRewrite.DISABLED ) ; }
public void write ( int c ) throws java.io.IOException { osWriter.write ( c ) ; osWriter.flush ( ) ; }
public Account.Id getDeletedAssignee ( ) { return ( deletedAssignee ) != null ? deletedAssignee.getAccount ( ) . getId ( ) : null ; }
public java.util.List < java.lang.String > getTeamNamesForRepositoryRole ( java.lang.String role ) { return null ; }
private com.google.gerrit.client.diff.DraftBox addNewDraft ( net.codemirror.lib.CodeMirror cm , int line ) { return addDraftBox ( com.google.gerrit.client.changes.CommentInfo.createRange ( path , getStoredSideFromDisplaySide ( getSideFromCm ( cm ) ) , ( line + 1 ) , null , null , null ) , getSideFromCm ( cm ) ) ; }
public void testChangeOwner_OwnerACLGranted ( ) throws java.lang.Exception { grantApproveToChangeOwner ( project ) ; approve ( user , createMyChange ( testRepo ) ) ; }
public void run ( ) { expandText ( ) ; }
com.google.gerrit.server.index.IndexConfig getIndexConfig ( @ com.google.gerrit.server.config.GerritServerConfig org.eclipse.jgit.lib.Config cfg ) { org.apache.lucene.search.BooleanQuery.setMaxClauseCount ( cfg.getInt ( "index" , "maxTerms" , org.apache.lucene.search.BooleanQuery.getMaxClauseCount ( ) ) ) ; return com.google.gerrit.server.index.IndexConfig.fromConfig ( cfg ) ; }
private boolean isSignIn ( final com.google.gerrit.httpd.auth.openid.SignInMode mode ) { switch ( mode ) { case SIGN_IN : case REGISTER : return true ; case LINK_IDENTIY : default : return false ; } }
private java.lang.String url ( com.google.gerrit.client.info.ChangeInfo.RevisionInfo r ) { return com.google.gerrit.common.PageLinks.toChange ( changeId , r.id ( ) ) ; }
private static com.google.gerrit.reviewdb.client.AccountGroup missing ( com.google.gerrit.reviewdb.client.AccountGroup.Id key ) { com.google.gerrit.reviewdb.client.AccountGroup.NameKey name = new com.google.gerrit.reviewdb.client.AccountGroup.NameKey ( ( "Deleted Group" + key ) ) ; return new com.google.gerrit.reviewdb.client.AccountGroup ( name , key , null , com.google.gerrit.common.TimeUtil.nowTs ( ) ) ; }
public com.googlesource.gerrit.plugins.findowners.OwnersDb call ( ) { com.googlesource.gerrit.plugins.findowners.Cache.log.trace ( ( "Create new OwnersDb, key=" + key ) ) ; return new com.googlesource.gerrit.plugins.findowners.OwnersDb ( accountCache , emails , key , repository , changeData , project , branch , files ) ; }
public void setCharacterEncoding ( java.lang.String name ) { com.google.common.base.Preconditions.checkArgument ( com.google.common.base.Charsets.UTF_8.equals ( java.nio.charset.Charset.forName ( name ) ) , "unsupported charset: %s" , name ) ; }
void unregisterReplyBox ( ) { replyBox = null ; com.google.gwt.user.client.ui.UIObject.setVisible ( buttons , isOpen ( ) ) ; }
void onDeleteChange ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { if ( com.google.gwt.user.client.Window.confirm ( Resources.C.deleteDraftChange ( ) ) ) { com.google.gerrit.client.change.DraftActions.delete ( changeId ) ; } }
private static boolean isHead ( com.google.gerrit.extensions.api.projects.BranchInfo i ) { return Constants.HEAD.equals ( i.ref ) ; }
private void autoReindexIfStale ( com.google.gerrit.reviewdb.client.AccountGroup.UUID uuid ) { if ( autoReindexIfStale ) { @ java.lang.SuppressWarnings ( value = "unused" ) java.util.concurrent.Future < ? > possiblyIgnoredError = reindexIfStaleAsync ( uuid ) ; } }
boolean canSubmit ( boolean isChangeOwner ) { if ( RefNames.REFS_CONFIG.equals ( refName ) ) { return projectControl.isOwner ( ) ; } return canPerform ( Permission.SUBMIT , isChangeOwner , false ) ; }
public void addEventListener ( com.google.gerrit.common.EventListener listener , com.google.gerrit.server.CurrentUser user ) { }
com.google.gerrit.server.notedb.ChangeUpdate create ( com.google.gerrit.server.notedb.ChangeNotes notes , com.google.gerrit.server.CurrentUser user , java.util.Date when , java.util.Comparator < java.lang.String > labelNameComparator ) ;
private com.google.gerrit.server.index.change.IndexedChangeQuery query ( com.google.gerrit.index.query.Predicate < com.google.gerrit.server.query.change.ChangeData > p ) throws com.google.gerrit.index.query.QueryParseException { return query ( p , com.google.gerrit.common.data.GlobalCapability.DEFAULT_MAX_QUERY_LIMIT ) ; }
public void suggestParentCandidates ( com.google.gwtjsonrpc.common.AsyncCallback < java.util.List < com.google.gerrit.reviewdb.client.Project > > callback ) { suggestParentCandidatesHandlerFactory.create ( ) . to ( callback ) ; }
public void onEvent ( final com.google.gerrit.server.events.Event event ) { offer ( event ) ; }
public void printTest ( ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( adminSshSession.exec ( "cookbook print" ) ) . isEqualTo ( "Hello world!\n" ) ; com.google.common.truth.Truth.assertThat ( adminSshSession.hasError ( ) ) . isFalse ( ) ; }
protected void doGet ( final javax.servlet.http.HttpServletRequest req , final javax.servlet.http.HttpServletResponse rsp ) throws java.io.IOException { com.google.gerrit.httpd.UrlModule.toGerrit ( com.google.gerrit.common.PageLinks.toChangeQuery ( query ) , req , rsp ) ; }
void onCreate ( org.eclipse.jgit.lib.ObjectId oldNotesRev , org.eclipse.jgit.lib.ObjectId newNotesRev , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId > extId ) throws java.io.IOException ;
public void onSuccess ( com.googlesource.gerrit.plugins.xdocs.client.ChangeInfo change ) { setRevisions ( change , patchSet ) ; addHeader ( change ) ; init ( ) ; display ( change ) ; }
public boolean isStatisticsEnabled ( ) { return self.isStatisticsEnabled ( ) ; }
public com.google.gerrit.extensions.registration.DynamicMap < com.google.gerrit.extensions.restapi.RestView < com.google.gerrit.server.change.ChangeEditResource > > views ( ) { throw new com.google.gerrit.extensions.restapi.NotImplementedException ( ) ; }
com.google.gerrit.client.diff.UnifiedChunkManager.LineRegionInfo getLineRegionInfoFromCmLine ( int cmLine ) { return chunkManager.getLineRegionInfoFromCmLine ( cmLine ) ; }
void onCherryPick ( com.google.gwt.event.dom.client.ClickEvent e ) { com.google.gerrit.client.change.CherryPickAction.call ( cherrypick , changeInfo , revision , project , message ) ; }
void setContext ( final int context ) { operation ( new java.lang.Runnable ( ) { @ java.lang.Override public void run ( ) { getSkipManager ( ) . removeAll ( ) ; getSkipManager ( ) . render ( context , diff ) ; updateRenderEntireFile ( ) ; } } ) ; }
public < T extends com.google.gwt.core.client.JavaScriptObject > void get ( com.google.gerrit.client.rpc.HttpCallback < T > cb ) { send ( com.google.gwt.http.client.RequestBuilder.GET , cb ) ; }
public void anonymousAccess ( ) throws java.lang.Exception { configureContributorAgreement ( true ) ; setApiUserAnonymous ( ) ; gApi.config ( ) . server ( ) . getInfo ( ) ; }
private static void checkMutuallyExclusiveLabels ( java.util.Set < java.lang.String > labels ) { if ( labels.containsAll ( com.google.common.collect.ImmutableSet.of ( com.google.gerrit.server.StarredChangesUtil.DEFAULT_LABEL , com.google.gerrit.server.StarredChangesUtil.IGNORE_LABEL ) ) ) { throw new com.google.gerrit.server.StarredChangesUtil.MutuallyExclusiveLabelsException ( com.google.gerrit.server.StarredChangesUtil.DEFAULT_LABEL , com.google.gerrit.server.StarredChangesUtil.IGNORE_LABEL ) ; } }
private java.lang.String commitId ( int i ) { return results.get ( i ) . getCommit ( ) . name ( ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { if ( ( event.getCharCode ( ) ) == ( com.google.gwt.event.dom.client.KeyCodes.KEY_ENTER ) ) { doAddNew ( ) ; } }
public void setEmailStrategy ( com.google.gerrit.reviewdb.client.AccountGeneralPreferences.EmailStrategy strategy ) { this . emailStrategy = strategy.name ( ) ; }
public static com.google.gerrit.client.rpc.RestApi revision ( com.google.gerrit.reviewdb.client.PatchSet.Id id ) { return com.google.gerrit.client.changes.ChangeApi.change ( id.getParentKey ( ) . get ( ) ) . view ( "revisions" ) . id ( id.get ( ) ) ; }
public void addBranch ( final com.google.gerrit.reviewdb.client.Project.NameKey projectName , final java.lang.String branchName , final java.lang.String startingRevision , final com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.ListBranchesResult > callback ) { addBranchFactory.create ( projectName , branchName , startingRevision ) . to ( callback ) ; }
private com.google.gerrit.httpd.raw.StaticModule.Paths getPaths ( ) { if ( ( paths ) == null ) { paths = new com.google.gerrit.httpd.raw.StaticModule.Paths ( ) ; } return paths ; }
public void run ( com.google.gerrit.server.project.ProjectState project , com.google.gerrit.server.CurrentUser user ) throws java.io.IOException , org.eclipse.jgit.lfs.errors.LfsException { com.googlesource.gerrit.plugins.lfs.locks.LfsPutLocksAction.log.debug ( "Verify list of locks for {} project" , project ) ; context.sendResponse ( new com.googlesource.gerrit.plugins.lfs.locks.LfsVerifyLocksResponse ( java.util.Collections.emptyList ( ) , java.util.Collections.emptyList ( ) , null ) ) ; }
public void setParentToSelfNotAllowed ( ) throws java.lang.Exception { exception.expect ( com.google.gerrit.extensions.restapi.ResourceConflictException.class ) ; exception.expectMessage ( "cannot set parent to self" ) ; gApi.projects ( ) . name ( project.get ( ) ) . parent ( project.get ( ) ) ; }
public void setUp ( ) throws java.lang.Exception { testEnv.getInjector ( ) . injectMembers ( this ) ; db = testEnv.getDb ( ) ; }
static java.nio.file.Path getDir ( com.google.gerrit.server.config.SitePaths sitePaths , java.lang.String name , com.google.gerrit.index.Schema < ? > schema ) { return sitePaths.index_dir.resolve ( java.lang.String.format ( "%s_%04d" , name , schema.getVersion ( ) ) ) ; }
public java.lang.String toString ( ) { return com.google.common.base.MoreObjects.toStringHelper ( this ) . addValue ( getId ( ) ) . toString ( ) ; }
public void onClick ( final com.google.gwt.user.client.ui.Widget sender ) { doAddNew ( ) ; }
protected void add ( com.google.gerrit.server.mail.RecipientType type , com.google.gerrit.server.mail.ProjectWatch.Watchers.List list ) { for ( com.google.gerrit.reviewdb.client.Account.Id user : list.accounts ) { add ( type , user ) ; } for ( com.google.gerrit.server.mail.Address addr : list.emails ) { add ( type , addr ) ; } }
public com.google.gerrit.server.account.GroupMembership groups ( final com.google.gerrit.server.account.AccountState who ) { return groupMembershipFactory.create ( who.getInternalGroups ( ) ) ; }
public java.util.Optional < java.lang.String > getUserName ( ) { return state ( ) . getUserName ( ) ; }
private static com.google.common.base.Function < com.google.gerrit.extensions.common.CommentInfo , com.google.gerrit.extensions.api.changes.ReviewInput.CommentInput > infoToInput ( java.lang.String path ) { return com.google.gerrit.acceptance.server.change.CommentsIT.infoToInput ( path , CommentInput :: new ) ; }
public void setUp ( ) { com.google.gerrit.testing.TestTimeUtil.resetWithClockStep ( 1 , java.util.concurrent.TimeUnit.SECONDS ) ; }
private PushOneCommit.Result createChange ( ) throws java.io.IOException , org.eclipse.jgit.api.errors.GitAPIException { com.google.gerrit.acceptance.PushOneCommit push = pushFactory.create ( db , admin.getIdent ( ) ) ; return push.to ( git , "refs/for/master" ) ; }
public void listNonExistingGroupIncludes_NotFound ( ) throws java.lang.Exception { try { gApi.groups ( ) . id ( "non-existing" ) . includedGroups ( ) ; } catch ( com.google.gerrit.extensions.restapi.ResourceNotFoundException expected ) { } }
void onMessageDoubleClick ( com.google.gwt.event.dom.client.DoubleClickEvent e ) { setEdit ( true ) ; }
public void emptyChangeUpdate ( ) throws java.lang.Exception { com.google.gerrit.server.notedb.ChangeUpdate update = newUpdate ( newChange ( ) , changeOwner ) ; update.commit ( ) ; com.google.common.truth.Truth.assertThat ( update.getRevision ( ) ) . isNull ( ) ; }
public void onSuccess ( com.google.gerrit.client.rpc.HttpResponse < com.google.gerrit.client.rpc.NativeString > fc ) { content = fc ; if ( prefs.syntaxHighlighting ( ) ) { injectMode ( fc.getContentType ( ) , modeCallback ) ; } else { modeCallback.onSuccess ( null ) ; } }
public com.google.gerrit.server.project.TagResource parse ( com.google.gerrit.server.project.ProjectResource rsrc , com.google.gerrit.extensions.restapi.IdString id ) throws com.google.gerrit.extensions.restapi.ResourceNotFoundException , java.io.IOException { return new com.google.gerrit.server.project.TagResource ( rsrc.getProjectState ( ) , rsrc.getUser ( ) , list.get ( ) . get ( rsrc , id ) ) ; }
public void run ( ) { if ( cm.extras ( ) . hasActiveLine ( ) ) { newDraft ( cm ) ; } }
void parseLabel ( java.lang.String label , java.lang.String text , com.google.gerrit.server.git.ValidationError.Sink errors ) throws java.io.IOException { destinations.replaceValues ( label , com.google.gerrit.server.account.DestinationList.toSet ( parse ( text , ( ( com.google.gerrit.server.account.DestinationList.DIR_NAME ) + label ) , com.google.gerrit.server.account.TRIM , null , errors ) ) ) ; }
public void addUser ( ) throws java.lang.Exception { gApi.accounts ( ) . create ( "sandboxuser" ) ; }
private void disableChangeCache ( ) { globalConfig.setLong ( "cache" , "changes" , "maximumWeight" , 0 ) ; }
public void onSuccess ( java.lang.Object result ) { actionsPanel.remove ( b ) ; fireOnSuggestRefresh ( ) ; }
public void testIndexChangeTaskToString ( ) throws java.lang.Exception { com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler.IndexChangeTask task = indexEventHandler.new com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler.IndexChangeTask ( com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandlerTest.CHANGE_ID , false ) ; com.google.common.truth.Truth.assertThat ( task.toString ( ) ) . isEqualTo ( java.lang.String.format ( "[%s] Index change %s in target instance" , com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandlerTest.PLUGIN_NAME , com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandlerTest.CHANGE_ID ) ) ; }
private java.nio.file.Path getFile ( java.lang.String includeFileName ) { if ( includeFileName.startsWith ( "/" ) ) { return basePath.resolve ( includeFileName ) ; } else { return currentIs.getCurrentDir ( ) . resolve ( includeFileName ) ; } }
public void testLinkify_Parens ( ) { final com.google.gwtexpui.safehtml.client.SafeHtml o = com.google.gwtexpui.safehtml.client.SafeHtml_WikifyTest.html ( "A http://go.here/#m() B" ) ; final com.google.gwtexpui.safehtml.client.SafeHtml n = o.wikify ( ) ; com.google.common.truth.Truth.assertThat ( o ) . isNotSameAs ( n ) ; com.google.common.truth.Truth.assertThat ( n.asString ( ) ) . isEqualTo ( "<p>A <a href=\"http://go.here/#m()\" target=\"_blank\">http://go.here/#m()</a> B</p>" ) ; }
void onRebaseEdit ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { com.google.gerrit.client.change.EditActions.rebaseEdit ( changeId , publishEdit , rebaseEdit , deleteEdit ) ; }
public int hashCode ( ) { return com.google.common.base.Objects.hashCode ( formatter , project , resource , revId ) ; }
public void removeEventListener ( com.google.gerrit.common.EventListener listener ) { listeners.remove ( listener ) ; }
private com.cisco.gerrit.plugins.slack.config.ProjectConfig getConfig ( boolean publishOnPatchSetCreated , boolean ignoreUnchangedPatchSet , boolean ignoreWorkInProgressPatchSet , boolean ignorePrivatePatchSet ) throws java.lang.Exception { return getConfig ( "^WIP.*" , publishOnPatchSetCreated , ignoreUnchangedPatchSet , ignoreWorkInProgressPatchSet , ignorePrivatePatchSet ) ; }
private void configureCmdLineParser ( ) { factory ( CmdLineParser.Factory.class ) ; registerOptionHandler ( Account.Id.class , com.google.gerrit.server.ssh.commands.AccountIdHandler.class ) ; registerOptionHandler ( PatchSet.Id.class , com.google.gerrit.server.ssh.commands.PatchSetIdHandler.class ) ; registerOptionHandler ( com.google.gerrit.server.project.ProjectControl.class , com.google.gerrit.server.ssh.commands.ProjectControlHandler.class ) ; }
public void testIsEnabledUnknownEvent ( ) { com.google.gerrit.server.events.Event event = new com.google.gerrit.server.events.Event ( "foo" ) { } ; com.googlesource.gerrit.plugins.its.base.its.ItsConfig itsConfig = createItsConfig ( ) ; replayMocks ( ) ; assertFalse ( itsConfig.isEnabled ( event ) ) ; assertLogMessageContains ( "not recognised and ignored" ) ; }
private void colorLines ( net.codemirror.lib.CodeMirror cm , java.lang.String color , int line , int cnt ) { for ( int i = 0 ; i < cnt ; i ++ ) { cm.addLineClass ( ( line + i ) , LineClassWhere.WRAP , color ) ; } }
public void execute ( ) { for ( final com.google.gerrit.client.SignedInListener l : com.google.gerrit.client.Gerrit.signedInListeners ) { l.onSignIn ( ) ; } }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { doAddNewInclude ( ) ; }
private void updateSelection ( ) { if ( cm.somethingSelected ( ) ) { net.codemirror.lib.TextMarker.FromTo sel = cm.getSelectedRange ( ) ; cm.setSelection ( sel.from ( ) , sel.to ( ) ) ; } }
private void assumeNoteDbDisabled ( ) { com.google.common.truth.TruthJUnit.assume ( ) . that ( notesMigration.readChanges ( ) ) . isFalse ( ) ; com.google.common.truth.TruthJUnit.assume ( ) . that ( com.google.gerrit.testing.NoteDbMode.get ( ) ) . isNotEqualTo ( NoteDbMode.CHECK ) ; }
private java.util.List < com.google.gerrit.common.data.SubmitRecord > ruleError ( java.lang.String err ) { return ruleError ( err , null ) ; }
public com.googlesource.gerrit.plugins.github.git.GHPullRequest getPullRequest ( int i ) throws java.io.IOException { return ghRepository.getPullRequest ( i ) ; }
com.google.gerrit.server.CurrentUser getCurrentUser ( ) { if ( isSignedIn ( ) ) { return identified.create ( accessPath , val.getAccountId ( ) ) ; } return anonymous ; }
public boolean supportsCookies ( ) { return false ; }
private org.eclipse.jgit.lib.ObjectId createCommit ( com.google.gerrit.server.IdentifiedUser me , org.eclipse.jgit.lib.ObjectInserter inserter , org.eclipse.jgit.revwalk.RevCommit revision , org.eclipse.jgit.lib.ObjectId tree , java.sql.Timestamp when ) throws java.io.IOException { return createCommit ( me , inserter , revision , tree , revision.getFullMessage ( ) , when ) ; }
protected void onOpenRow ( final int row ) { final com.google.gerrit.client.changes.ChangeInfo c = getRowItem ( row ) ; final com.google.gerrit.reviewdb.client.Change.Id id = c.legacyId ( ) ; com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( id ) ) ; }
protected void configure ( ) { bind ( com.ericsson.gerrit.plugins.highavailability.Configuration.class ) . in ( Scopes.SINGLETON ) ; install ( new com.ericsson.gerrit.plugins.highavailability.forwarder.rest.RestForwarderModule ( ) ) ; install ( new com.ericsson.gerrit.plugins.highavailability.event.EventModule ( ) ) ; install ( new com.ericsson.gerrit.plugins.highavailability.index.IndexModule ( ) ) ; install ( new com.ericsson.gerrit.plugins.highavailability.cache.CacheModule ( ) ) ; }
public void onSuccess ( final com.google.gerrit.common.data.ListBranchesResult result ) { addBranch.setEnabled ( true ) ; nameTxtBox.setText ( "" ) ; irevTxtBox.setText ( "" ) ; display ( result.getBranches ( ) ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { toggleReviewed ( ) . run ( ) ; }
public void onReplace ( org.eclipse.jgit.lib.ObjectId oldNotesRev , org.eclipse.jgit.lib.ObjectId newNotesRev , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId > toRemove , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId > toAdd ) { }
public static void edit ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.info.ChangeInfo.EditInfo > cb ) { com.google.gerrit.client.changes.ChangeApi.edit ( project , id ) . get ( cb ) ; }
public void noRevisionOptions ( ) throws java.lang.Exception { com.google.gerrit.extensions.common.ChangeInfo c = info ( changeId ) ; org.junit.Assert.assertNull ( c.currentRevision ) ; org.junit.Assert.assertNull ( c.revisions ) ; }
com.google.gerrit.server.notedb.NoteDbUpdateManager.OpenRepo getChangeRepo ( ) throws java.io.IOException { initChangeRepo ( ) ; return changeRepo ; }
private com.google.gerrit.client.diff.FileCommentPanel getPanelFromSide ( com.google.gerrit.client.diff.SideBySide2.DisplaySide side ) { return side == ( com.google.gerrit.client.diff.SideBySide2.DisplaySide.A ) ? fileCommentPanelA : fileCommentPanelB ; }
public boolean updateChange ( com.google.gerrit.server.update.ChangeContext ctx ) throws com.google.gerrit.extensions.restapi.ResourceConflictException , com.google.gwtorm.server.OrmException , java.io.IOException { boolean ret = patchSetInserter.updateChange ( ctx ) ; rebasedPatchSet = patchSetInserter.getPatchSet ( ) ; return ret ; }
void expandBefore ( int cnt ) { expandSideBefore ( cnt ) ; otherBar.expandSideBefore ( cnt ) ; }
protected void doPost ( javax.servlet.http.HttpServletRequest req , javax.servlet.http.HttpServletResponse rsp ) { process ( req , rsp , Operation.INDEX ) ; }
public java.util.Map < java.lang.String , com.google.gitiles.RepositoryDescription > listRepositories ( @ javax.annotation.Nullable java.lang.String prefix , java.util.Set < java.lang.String > branches ) throws java.io.IOException , org.eclipse.jgit.transport.resolver.ServiceNotAuthorizedException , org.eclipse.jgit.transport.resolver.ServiceNotEnabledException ;
public void copy ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.server.project.ChangeControl ctl , com.google.gerrit.reviewdb.client.PatchSet ps , java.lang.Iterable < com.google.gerrit.reviewdb.client.PatchSetApproval > dontCopy ) throws com.google.gwtorm.server.OrmException { db.patchSetApprovals ( ) . insert ( getForPatchSet ( db , ctl , ps , dontCopy ) ) ; }
private void reject ( final org.eclipse.jgit.transport.ReceiveCommand cmd , final java.lang.String why ) { cmd.setResult ( org.eclipse.jgit.transport.ReceiveCommand.Result.REJECTED_OTHER_REASON , why ) ; commandProgress.update ( 1 ) ; }
private static java.util.Properties readAttributes ( ) throws java.io.IOException { java.util.Properties attributes = new java.util.Properties ( ) ; try ( java.io.InputStream in = com.googlesource.gerrit.plugins.xdocs.formatter.AsciidoctorFormatter.class . getResourceAsStream ( "asciidoctor.properties" ) ) { attributes.load ( in ) ; } return attributes ; }
public void write ( java.io.Writer w ) throws java.io.IOException { final java.text.SimpleDateFormat fmt ; fmt = new java.text.SimpleDateFormat ( "EEE, d MMM yyyy HH:mm:ss Z" , java.util.Locale.US ) ; w.write ( fmt.format ( value ) ) ; }
public void fire ( com.google.gerrit.reviewdb.client.Project.NameKey project , org.eclipse.jgit.lib.RefUpdate refUpdate , com.google.gerrit.reviewdb.client.Account updater ) { fire ( project , refUpdate.getName ( ) , refUpdate.getOldObjectId ( ) , refUpdate.getNewObjectId ( ) , ReceiveCommand.Type.UPDATE , util.accountInfo ( updater ) ) ; }
private org.spearce.jgit.lib.Repository getRepository ( ) { try { return server.openRepository ( projectName ) ; } catch ( org.spearce.jgit.errors.RepositoryNotFoundException e ) { return null ; } }
void destroy ( final com.google.gerrit.httpd.WebSessionManager.Key key ) { self.remove ( key ) ; }
private com.google.gerrit.extensions.common.Side getStoredSideFromDisplaySide ( com.google.gerrit.client.diff.DisplaySide side ) { return ( side == ( DisplaySide.A ) ) && ( ( base ) == null ) ? com.google.gerrit.extensions.common.Side.PARENT : com.google.gerrit.extensions.common.Side.REVISION ; }
public static java.lang.String toEditScreen ( @ com.google.gerrit.common.Nullable com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.reviewdb.client.PatchSet.Id revision , java.lang.String fileName , int line ) { return com.google.gerrit.client.Dispatcher.toPatch ( "edit" , project , com.google.gerrit.client.DiffObject.base ( ) , revision , fileName , null , line ) ; }
public void selectHttpUrl ( ) throws java.lang.Exception { org.eclipse.jgit.transport.CredentialsProvider.setDefault ( new org.eclipse.jgit.transport.UsernamePasswordCredentialsProvider ( admin.username , admin.httpPassword ) ) ; selectProtocol ( Protocol.HTTP ) ; }
public static com.google.gerrit.client.changes.ReviewInput create ( ) { com.google.gerrit.client.changes.ReviewInput r = createObject ( ) . cast ( ) ; r.init ( ) ; r.drafts ( com.google.gerrit.client.changes.ReviewInput.DraftHandling.PUBLISH ) ; return r ; }
public com.google.gerrit.server.mail.CommentSender create ( com.google.gerrit.server.change.PostReview.NotifyHandling notify , com.google.gerrit.reviewdb.client.Change change ) ;
private void removeProjectEvents ( java.lang.String project ) { try { sqlClient.removeProjectEvents ( project ) ; } catch ( java.sql.SQLException e ) { com.ericsson.gerrit.plugins.eventslog.SQLStore.log.warn ( ( ( "Cannot remove project " + project ) + " from database" ) , e ) ; } }
protected com.google.gerrit.server.notedb.AbstractChangeNotes.LoadHandle openHandle ( org.eclipse.jgit.lib.Repository repo ) throws java.io.IOException { return com.google.gerrit.server.notedb.AbstractChangeNotes.LoadHandle.create ( com.google.gerrit.server.notedb.ChangeNotesCommit.newRevWalk ( repo ) , readRef ( repo ) ) ; }
protected static void sendError ( javax.servlet.http.HttpServletResponse res , int statusCode , java.lang.String msg ) throws java.io.IOException { res.setStatus ( statusCode ) ; com.google.gerrit.httpd.RestApiServlet.sendText ( null , res , msg ) ; }
public final com.google.gerrit.extensions.common.ChangeStatus getStatus ( ) { return com.google.gerrit.extensions.common.ChangeStatus.valueOf ( statusRaw ( ) ) ; }
public void destroy ( ) { monitoring.destroy ( ) ; }
public com.google.gerrit.server.IdentifiedUser create ( java.net.SocketAddress remotePeer , com.google.gerrit.reviewdb.client.Account.Id id ) { return runAs ( remotePeer , id , null ) ; }
private java.util.Collection < com.google.gerrit.server.index.account.AccountIndex > getWriteIndexes ( ) { return ( indexes ) != null ? indexes.getWriteIndexes ( ) : java.util.Collections.singleton ( index ) ; }
private void addReviewerByEmailToReviewableChangeInNoteDb ( com.google.gerrit.acceptance.server.mail.AddReviewerSenderIT.Adder adder ) throws java.lang.Exception { com.google.common.truth.TruthJUnit.assume ( ) . that ( notesMigration.readChanges ( ) ) . isTrue ( ) ; java.lang.String email = "addedbyemail@example.com" ; com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableChange ( ) ; addReviewer ( adder , sc.changeId , sc.owner , email ) ; assertThat ( sender ) . sent ( "newchange" , sc ) . to ( email ) . cc ( sc.reviewer ) . cc ( sc.reviewerByEmail , sc.ccerByEmail ) . noOneElse ( ) ; }
T call ( com.google.gerrit.server.update.BatchUpdate.Factory batchUpdateFactory ) throws java.lang.Exception ;
protected void configure ( ) { bind ( com.google.gerrit.pgm.init.ConsoleUI.class ) . toInstance ( init.ui ) ; bind ( com.google.gerrit.pgm.init.InitFlags.class ) . toInstance ( init.flags ) ; }
public static void setup ( ) { com.google.gerrit.server.events.EventTypes.register ( com.ericsson.gerrit.plugins.highavailability.forwarder.rest.EventRestApiServletTest.RefReplicationDoneEvent.TYPE , com.ericsson.gerrit.plugins.highavailability.forwarder.rest.EventRestApiServletTest.RefReplicationDoneEvent.class ) ; com.google.gwtorm.client.KeyUtil.setEncoderImpl ( new com.google.gwtorm.server.StandardKeyEncoder ( ) ) ; }
public void BROKEN_testIsEnabledUnknownEvent ( ) { com.google.gerrit.server.events.RefEvent event = createMock ( com.google.gerrit.server.events.RefEvent.class ) ; com.googlesource.gerrit.plugins.its.base.its.ItsConfig itsConfig = createItsConfig ( ) ; replayMocks ( ) ; assertFalse ( itsConfig.isEnabled ( event ) ) ; assertLogMessageContains ( "not recognised and ignored" ) ; }
private org.eclipse.jgit.revwalk.RevCommit getHead ( org.eclipse.jgit.lib.Repository repo , java.lang.String name ) throws java.io.IOException { try ( org.eclipse.jgit.revwalk.RevWalk rw = new org.eclipse.jgit.revwalk.RevWalk ( repo ) ) { return rw.parseCommit ( repo.exactRef ( name ) . getObjectId ( ) ) ; } }
private static com.google.gerrit.server.index.Schema < com.google.gerrit.server.query.change.ChangeData > schema ( java.util.Collection < com.google.gerrit.server.index.FieldDef < com.google.gerrit.server.query.change.ChangeData , ? > > fields ) { return new com.google.gerrit.server.index.Schema ( com.google.common.collect.ImmutableList.copyOf ( fields ) ) ; }
public void onFailure ( final java.lang.Throwable caught ) { addNew.setEnabled ( true ) ; nameBox.setEnabled ( true ) ; filterTxt.setEnabled ( true ) ; super . onFailure ( caught ) ; }
public void execute ( java.lang.String issue , java.lang.Iterable < com.googlesource.gerrit.plugins.hooks.workflow.ActionRequest > actions , java.util.Set < com.googlesource.gerrit.plugins.hooks.workflow.Property > properties ) { for ( com.googlesource.gerrit.plugins.hooks.workflow.ActionRequest actionRequest : actions ) { execute ( issue , actionRequest , properties ) ; } }
public WorkQueue.Executor get ( ) { com.google.gerrit.server.git.WorkQueue.Executor executor ; if ( user.isBatchUser ( ) ) { executor = queues.getBatchQueue ( ) ; } else { executor = queues.getInteractiveQueue ( ) ; } return executor ; }
public com.google.gerrit.server.change.ChangeJson.ChangeInfo format ( com.google.gerrit.server.change.ChangeResource rsrc ) throws com.google.gwtorm.server.OrmException { return format ( changeDataFactory.create ( db.get ( ) , rsrc.getControl ( ) ) ) ; }
private void fastForwardTagToNewCommit ( com.google.gerrit.acceptance.rest.project.PushTagIT.TagType tagType , java.lang.String tagName , org.eclipse.jgit.transport.RemoteRefUpdate.Status expectedStatus ) throws java.lang.Exception { pushTag ( tagType , tagName , true , expectedStatus ) ; }
private com.google.gerrit.client.change.RelatedChangesTab getTab ( ) { if ( ( sameTopicTab ) == null ) { sameTopicTab = createTab ( Resources.C.sameTopic ( ) , Resources.C.sameTopicTooltip ( ) ) ; } return sameTopicTab ; }
public static com.google.gerrit.server.notedb.MutableNotesMigration newNotesMigrationFromEnv ( ) { com.google.gerrit.server.notedb.MutableNotesMigration m = com.google.gerrit.server.notedb.MutableNotesMigration.newDisabled ( ) ; com.google.gerrit.testing.NoteDbMode.resetFromEnv ( m ) ; return m ; }
java.lang.String onSubmit ( java.lang.String newCommitMessage , org.eclipse.jgit.revwalk.RevCommit original , org.eclipse.jgit.revwalk.RevCommit mergeTip , com.google.gerrit.reviewdb.client.Branch.NameKey destination ) ;
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > removeAllAsync ( ) { return cache.removeAllAsync ( ) ; }
private void addReviewerToWipChangeInReviewDbNotifyAll ( com.google.gerrit.acceptance.server.mail.AddReviewerSenderIT.Adder adder ) throws java.lang.Exception { com.google.common.truth.TruthJUnit.assume ( ) . that ( notesMigration.readChanges ( ) ) . isFalse ( ) ; com.google.gerrit.acceptance.server.mail.StagedChange sc = stageWipChange ( ) ; com.google.gerrit.acceptance.TestAccount reviewer = accountCreator.create ( "added" , "added@example.com" , "added" ) ; addReviewer ( adder , sc.changeId , sc.owner , reviewer.email , NotifyHandling.ALL ) ; assertThat ( sender ) . sent ( "newchange" , sc ) . to ( reviewer ) . cc ( sc.reviewer , sc.ccer ) . cc ( sc.reviewerByEmail , sc.ccerByEmail ) . noOneElse ( ) ; }
public void onSuccess ( com.google.gerrit.client.rpc.HttpResponse < com.google.gerrit.client.rpc.NativeString > result ) { textArea.setText ( result.getResult ( ) . asString ( ) ) ; }
protected com.google.gson.JsonElement buildJson ( java.lang.String path , java.lang.String additionalQueryString ) throws java.lang.Exception { return new com.google.gson.JsonParser ( ) . parse ( buildJsonRaw ( path , additionalQueryString ) ) ; }
void onRemoveByKeys ( org.eclipse.jgit.lib.ObjectId oldNotesRev , org.eclipse.jgit.lib.ObjectId newNotesRev , com.google.gerrit.reviewdb.client.Account.Id accountId , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId.Key > extIdKeys ) throws java.io.IOException ;
protected void configure ( ) { bind ( com.google.gerrit.server.permissions.PermissionBackend.class ) . to ( com.google.gerrit.server.project.DefaultPermissionBackend.class ) . in ( Scopes.SINGLETON ) ; install ( new com.google.gerrit.server.project.DefaultPermissionBackendModule.LegacyControlsModule ( ) ) ; }
public java.lang.String toString ( ) { return "hook " + ( hook.getFileName ( ) ) ; }
static ExternalId.Key toExtIdKey ( org.bouncycastle.openpgp.PGPPublicKey key ) { return ExternalId.Key.create ( com.google.gerrit.server.account.externalids.ExternalId.SCHEME_GPGKEY , com.google.common.io.BaseEncoding.base16 ( ) . encode ( key.getFingerprint ( ) ) ) ; }
private void updateManifest ( java.lang.String projectName , java.lang.String refName , com.amd.gerrit.plugins.manifestsubscription.manifest.Manifest manifest , java.lang.String manifestSrc ) throws java.io.IOException , javax.xml.bind.JAXBException { com.amd.gerrit.plugins.manifestsubscription.Utilities.updateManifest ( gitRepoManager , metaDataUpdateFactory , changeHooks , projectName , refName , manifest , manifestSrc , "" , null ) ; }
void onCancel ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { openForm.setVisible ( true ) ; com.google.gwt.user.client.ui.UIObject.setVisible ( form , false ) ; suggestBox.setFocus ( false ) ; suggestBox.setText ( "" ) ; }
protected void configureCommands ( ) { command ( com.google.gerrit.plugins.ShowAccountCommand.class ) ; alias ( "show-account" , com.google.gerrit.plugins.ShowAccountCommand.class ) ; alias ( "show-repo-account-access" , com.google.gerrit.plugins.ShowRepoAccountAccessCommand.class ) ; alias ( "show-repo-access" , com.google.gerrit.plugins.ShowRepoAccessCommand.class ) ; }
public void onClick ( final com.google.gwt.user.client.ui.Widget sender ) { doRegisterNewEmail ( ) ; }
public org.eclipse.jgit.merge.ThreeWayMerger newThreeWayMerger ( final org.eclipse.jgit.lib.Repository repo , final org.eclipse.jgit.lib.ObjectInserter inserter ) { return com.google.gerrit.server.git.MergeUtil.newThreeWayMerger ( repo , inserter , mergeStrategyName ( ) ) ; }
public abstract boolean more ( ) ;
protected abstract com.google.gwtorm.nosql.IndexFunction < T > [ ] getIndexes ( ) ;
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { toggleReviewed ( ) . run ( ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { if ( ( event.getCharCode ( ) ) == ( com.google.gwt.event.dom.client.KeyCodes.KEY_ENTER ) ) { doChangeUserName ( ) ; } }
void canceledByReplication ( ) { canceled = true ; }
public synchronized java.util.Optional < com.google.gerrit.server.account.AccountState > getByUsername ( java.lang.String username ) { return java.util.Optional.ofNullable ( byUsername.get ( username ) ) ; }
private long getGerritSessionMaxAgeMillis ( ) { return com.google.gerrit.server.config.ConfigUtil.getTimeUnit ( config.gerritConfig , "cache" , com.googlesource.gerrit.plugins.github.oauth.OAuthCookieProvider.CACHE_NAME , "maxAge" , TokenCipher.MAX_COOKIE_TIMEOUT_SECS , java.util.concurrent.TimeUnit.SECONDS ) ; }
public abstract java.lang.String uuid ( ) ;
java.lang.String getTitle ( java.lang.String count ) { return Resources.M.conflictingChanges ( count ) ; }
public java.util.Enumeration < com.google.gerrit.server.plugins.PluginEntry > entries ( ) { return java.util.Collections.emptyEnumeration ( ) ; }
private void initChannels ( ) { setChannelFactories ( java.util.Arrays.< org.apache.sshd.common.NamedFactory < org.apache.sshd.common.Channel > > asList ( new org.apache.sshd.server.channel.ChannelSession.Factory ( ) , new org.apache.sshd.server.channel.ChannelDirectTcpip.Factory ( ) ) ) ; }
public java.lang.String intercept ( java.lang.String in ) { if ( pattern.matcher ( in ) . matches ( ) ) { return in ; } com.googlesource.gerrit.plugins.readonly.DisableCommandInterceptor.log.warn ( "Disabling command: {}" , in ) ; return ( pluginName ) + " disable" ; }
public GroupDescription.Internal parseInternal ( java.lang.String id ) throws com.google.gerrit.extensions.restapi.UnprocessableEntityException { com.google.gerrit.common.data.GroupDescription.Basic group = parse ( id ) ; if ( group instanceof com.google.gerrit.common.data.GroupDescription.Internal ) { return ( ( com.google.gerrit.common.data.GroupDescription.Internal ) ( group ) ) ; } throw new com.google.gerrit.extensions.restapi.UnprocessableEntityException ( java.lang.String.format ( "External Group Not Allowed: %s" , id ) ) ; }
public void testUserNotPresent2 ( ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( gApi.accounts ( ) . query ( "sandboxuser" ) . get ( ) ) . isEmpty ( ) ; }
public void close ( ) { transactionException = null ; if ( ( conn ) != null ) { try { conn.close ( ) ; } catch ( java.sql.SQLException err ) { } conn = null ; } }
public java.lang.Object createEntry ( java.lang.Object key ) throws java.lang.Exception { return creator.createEntry ( ( ( K ) ( key ) ) ) ; }
public void changeDetail ( final com.google.gerrit.client.reviewdb.Change.Id id , final com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.data.ChangeDetail > callback ) { run ( callback , changeDetail.create ( id ) ) ; }
com.google.gerrit.server.account.AccountSshKey create ( com.google.gerrit.reviewdb.client.Account.Id accountId , int seq , java.lang.String encoded ) throws com.google.gerrit.common.errors.InvalidSshKeyException ;
public com.google.gerrit.extensions.client.SubmitType testSubmitType ( com.google.gerrit.extensions.common.TestSubmitRuleInput in ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return testSubmitType.apply ( revision , in ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot test submit type" , e ) ; } }
public com.google.gerrit.server.project.ProjectControl ownerFor ( final com.google.gerrit.client.reviewdb.Project.NameKey nameKey ) throws com.google.gerrit.server.project.NoSuchProjectException { return validateFor ( nameKey , com.google.gerrit.server.project.ProjectControl.OWNER ) ; }
public void setReductionLimit ( long limit ) { reductionLimit = java.lang.Math.max ( 0 , limit ) ; }
public void manualCertificationMatchesExternalId ( ) throws java.lang.Exception { addExternalId ( "foo" , "myId" , null ) ; com.google.gerrit.gpg.GerritPublicKeyChecker checker = checkerFactory.create ( user ) ; assertNoProblems ( checker.check ( com.google.gerrit.gpg.testutil.TestKeys.key5 ( ) . getPublicKey ( ) ) ) ; }
public static java.lang.String refsStarredChanges ( com.google.gerrit.reviewdb.client.Change.Id changeId , com.google.gerrit.reviewdb.client.Account.Id accountId ) { return com.google.gerrit.reviewdb.client.RefNames.buildRefsPrefix ( com.google.gerrit.reviewdb.client.RefNames.REFS_STARRED_CHANGES , changeId.get ( ) ) . append ( accountId.get ( ) ) . toString ( ) ; }
private void checkPermission ( ) throws com.google.gerrit.common.errors.PermissionDeniedException { if ( ! ( currentUser.getCapabilities ( ) . canAccessDatabase ( ) ) ) { throw new com.google.gerrit.common.errors.PermissionDeniedException ( java.lang.String.format ( "%s does not have \"Access Database\" capability." , currentUser.getUserName ( ) ) ) ; } }
public boolean updateUserModels ( java.util.Collection < com.gitblit.models.UserModel > models ) { return false ; }
public com.google.gerrit.acceptance.PushOneCommit setParents ( java.util.List < org.eclipse.jgit.revwalk.RevCommit > parents ) throws java.lang.Exception { commitBuilder.noParents ( ) ; for ( org.eclipse.jgit.revwalk.RevCommit p : parents ) { commitBuilder.parent ( p ) ; } return this ; }
public static com.google.gerrit.index.query.Predicate < com.google.gerrit.server.group.InternalGroup > member ( com.google.gerrit.reviewdb.client.Account.Id memberId ) { return new com.google.gerrit.server.query.group.GroupPredicates.GroupPredicate ( com.google.gerrit.server.index.group.GroupField.MEMBER , memberId.toString ( ) ) ; }
public com.google.gerrit.server.patch.PatchListEntry get ( java.lang.String fileName ) throws com.google.gerrit.server.project.NoSuchFileException { int index = search ( fileName ) ; if ( 0 <= index ) { return patches [ index ] ; } throw new com.google.gerrit.server.project.NoSuchFileException ( fileName ) ; }
private static org.apache.lucene.index.Term idTerm ( com.google.gerrit.server.group.InternalGroup group ) { return com.google.gerrit.lucene.LuceneGroupIndex.idTerm ( group.getGroupUUID ( ) ) ; }
public void testLinkify_SimpleHttp1 ( ) { final com.google.gwtexpui.safehtml.client.SafeHtml o = com.google.gwtexpui.safehtml.client.SafeHtml_WikifyTest.html ( "A http://go.here/ B" ) ; final com.google.gwtexpui.safehtml.client.SafeHtml n = o.wikify ( ) ; org.junit.Assert.assertNotSame ( o , n ) ; org.junit.Assert.assertEquals ( "<p>A <a href=\"http://go.here/\" target=\"_blank\">http://go.here/</a> B</p>" , n.asString ( ) ) ; }
public static com.google.gerrit.server.account.AuthRequest forExternalUser ( java.lang.String username ) { com.google.gerrit.server.account.AuthRequest r = new com.google.gerrit.server.account.AuthRequest ( ExternalId.Key.create ( com.google.gerrit.server.account.ExternalId.SCHEME_EXTERNAL , username ) ) ; r.setUserName ( username ) ; return r ; }
void onDeleteEdit ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { if ( com.google.gwt.user.client.Window.confirm ( Resources.C.deleteChangeEdit ( ) ) ) { com.google.gerrit.client.change.EditActions.deleteEdit ( changeId ) ; } }
public com.google.gerrit.reviewdb.client.Change update ( com.google.gerrit.reviewdb.client.Change change ) { if ( change.getStatus ( ) . isClosed ( ) ) { return null ; } change.updateNumberOfPatchSets ( newPatchSet.getPatchSetId ( ) ) ; return change ; }
public void onSuccess ( com.google.gwtjsonrpc.common.VoidResult result ) { com.google.gerrit.client.Gerrit.setDiffPreferences ( get ( ) ) ; cb.onSuccess ( result ) ; }
public void parse ( ) { generalPreferences = parseGeneralPreferences ( null ) ; diffPreferences = parseDiffPreferences ( null ) ; }
public com.google.gerrit.extensions.common.WebLinkInfo getFileWebLink ( java.lang.String projectName , java.lang.String revision , java.lang.String fileName ) { return new com.google.gerrit.extensions.common.WebLinkInfo ( name , null , java.lang.String.format ( "%s/%s/+/%s/%s" , baseUrl , projectName , revision , fileName ) , target ) ; }
public void createBranch_Forbidden ( ) throws java.lang.Exception { setApiUser ( user ) ; assertCreateFails ( com.google.gerrit.extensions.restapi.AuthException.class , "create not permitted for refs/heads/test" ) ; }
private static java.lang.String queryOutgoing ( java.lang.String who ) { return "is:open -is:wip owner:" + who ; }
public void onClick ( com.google.gwt.event.dom.client.ClickEvent event ) { buttonClicked = true ; com.google.gerrit.client.Gerrit.deleteSessionCookie ( ) ; hide ( ) ; }
public void contextDestroyed ( final javax.servlet.ServletContextEvent event ) { if ( ( manager ) != null ) { manager.stop ( ) ; manager = null ; } super . contextDestroyed ( event ) ; }
public void reviewersByEmailAreServedFromIndex ( ) throws java.lang.Exception { com.google.common.truth.TruthJUnit.assume ( ) . that ( notesMigration.readChanges ( ) ) . isTrue ( ) ; com.google.gerrit.extensions.common.AccountInfo acc = new com.google.gerrit.extensions.common.AccountInfo ( "Foo Bar" , "foo.bar@gerritcodereview.com" ) ; for ( com.google.gerrit.extensions.client.ReviewerState state : com.google.common.collect.ImmutableList.of ( ReviewerState.CC , ReviewerState.REVIEWER ) ) { com.google.gerrit.acceptance.PushOneCommit.Result r = createChange ( ) ; com.google.gerrit.extensions.api.changes.AddReviewerInput input = new com.google.gerrit.extensions.api.changes.AddReviewerInput ( ) ; input.reviewer = com.google.gerrit.acceptance.rest.change.ChangeReviewersByEmailIT.toRfcAddressString ( acc ) ; input.state = state ; gApi.changes ( ) . id ( r.getChangeId ( ) ) . addReviewer ( input ) ; notesMigration.setFailOnLoadForTest ( true ) ; try { com.google.gerrit.extensions.common.ChangeInfo info = com.google.common.collect.Iterables.getOnlyElement ( gApi.changes ( ) . query ( r.getChangeId ( ) ) . withOption ( ListChangesOption.DETAILED_LABELS ) . get ( ) ) ; com.google.common.truth.Truth.assertThat ( info.reviewers ) . isEqualTo ( com.google.common.collect.ImmutableMap.of ( state , com.google.common.collect.ImmutableList.of ( acc ) ) ) ; } finally { notesMigration.setFailOnLoadForTest ( false ) ; } } }
public void run ( ) { eventForwarder.send ( event ) ; }
private void assertCannotUpdate ( java.lang.String ref , com.google.gerrit.server.project.ProjectControl u ) { boolean update = u.asForProject ( ) . ref ( ref ) . testOrFalse ( RefPermission.UPDATE ) ; com.google.common.truth.Truth.assertThat ( update ) . named ( ( "cannot update " + ref ) ) . isFalse ( ) ; }
public boolean canMaintainServer ( ) { return ( canPerform ( GlobalCapability.MAINTAIN_SERVER ) ) || ( canAdministrateServer ( ) ) ; }
public com.google.gerrit.server.CurrentUser getUser ( ) { return requestUser ; }
protected java.lang.String getMappings ( ) { return gson.toJson ( com.google.common.collect.ImmutableMap.of ( "mappings" , mapping ) ) ; }
public static com.google.gerrit.common.data.ParamertizedString asis ( final java.lang.String constant ) { return new com.google.gerrit.common.data.ParamertizedString ( new com.google.gerrit.common.data.ParamertizedString.Constant ( constant ) ) ; }
public boolean allRefsAreVisible ( java.util.Set < java.lang.String > ignore ) { return ( user.isInternalUser ( ) ) || ( canPerformOnAllRefs ( Permission.READ , ignore ) ) ; }
public com.google.gwtorm.server.ResultSet < com.google.gerrit.reviewdb.client.PatchLineComment > publishedByPatchSet ( com.google.gerrit.reviewdb.client.PatchSet.Id patchset ) { throw new java.lang.UnsupportedOperationException ( com.google.gerrit.reviewdb.server.DisabledChangesReviewDbWrapper.MSG ) ; }
public void onSuccess ( com.google.gerrit.client.info.ChangeInfo.CommitInfo info ) { parents = info.parents ( ) . length ( ) ; }
public synchronized void evictAll ( ) { byId.clear ( ) ; }
public static void unsetForwardedEvent ( ) { com.ericsson.gerrit.plugins.highavailability.forwarder.Context.forwardedEvent.remove ( ) ; }
public void replace ( com.google.gerrit.index.project.ProjectData projectState ) throws java.io.IOException { try { replace ( com.google.gerrit.lucene.LuceneProjectIndex.idTerm ( projectState ) , toDocument ( projectState ) ) . get ( ) ; } catch ( java.util.concurrent.ExecutionException | java.lang.InterruptedException e ) { throw new java.io.IOException ( e ) ; } }
com.google.gerrit.server.CurrentUser getUser ( com.google.gerrit.server.IdentifiedUser.GenericFactory userFactory ) { return userFactory.create ( ownerId ) ; }
public com.google.gitiles.doc.html.HtmlBuilder space ( ) { finishActiveTag ( ) ; try { htmlBuf.append ( ' ' ) ; } catch ( java.io.IOException e ) { throw new com.google.gitiles.doc.RuntimeIOException ( e ) ; } return this ; }
void renameGroup ( com.google.gerrit.reviewdb.client.AccountGroup.Id groupId , java.lang.String newName , com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.GroupDetail > callback ) ;
private java.lang.String getUsername ( ) { final java.lang.String user = gerritConfig.getString ( pluginName , null , com.googlesource.gerrit.plugins.hooks.bz.BugzillaItsFacade.GERRIT_CONFIG_USERNAME ) ; return user ; }
public boolean containsComment ( com.google.gerrit.reviewdb.client.Comment c ) throws com.google.gwtorm.server.OrmException { if ( containsCommentPublished ( c ) ) { return true ; } loadDraftComments ( c.author.getId ( ) ) ; return draftCommentNotes.containsComment ( c ) ; }
public void onSuccess ( com.google.gerrit.client.rpc.NativeString newPassword ) { label.setText ( newPassword.asString ( ) ) ; label.setVisible ( true ) ; delete.setVisible ( true ) ; }
public com.google.gerrit.reviewdb.client.Change change ( ) throws com.google.gwtorm.server.OrmException { if ( ( change ) == null ) { reloadChange ( ) ; } return change ; }
private com.google.gerrit.extensions.restapi.Response < com.google.gerrit.extensions.common.ChangeInfo > cache ( com.google.gerrit.extensions.common.ChangeInfo res ) { return com.google.gerrit.extensions.restapi.Response.ok ( res ) . caching ( com.google.gerrit.extensions.restapi.CacheControl.PRIVATE ( 0 , java.util.concurrent.TimeUnit.SECONDS ) . setMustRevalidate ( ) ) ; }
abstract void incSelf ( com.google.gerrit.prettify.common.EditList.Hunk hunk ) ;
protected static com.google.gerrit.common.Die abort ( ) { return new com.google.gerrit.common.Die ( "aborted by user" ) ; }
protected java.io.Writer startRenderText ( javax.servlet.http.HttpServletRequest req , javax.servlet.http.HttpServletResponse res , java.lang.String contentType ) throws java.io.IOException { setApiHeaders ( res , contentType ) ; return getWriter ( res ) ; }
public java.lang.String toString ( ) { return ( "Stream Events (" + ( currentUser.state ( ) . getUserName ( ) ) ) + ")" ; }
private static java.lang.String fileName ( org.eclipse.jgit.revwalk.RevWalk rw , org.eclipse.jgit.revwalk.RevCommit commit ) throws java.io.IOException { org.eclipse.jgit.lib.AbbreviatedObjectId id = rw.getObjectReader ( ) . abbreviate ( commit , 7 ) ; return ( id.name ( ) ) + ".diff" ; }
public java.lang.Void call ( ) throws com.google.gerrit.extensions.restapi.RestApiException , com.google.gerrit.server.git.UpdateException , com.google.gwtorm.server.OrmException , java.io.IOException , org.eclipse.jgit.errors.RepositoryNotFoundException { try ( com.google.gerrit.server.git.ReceiveCommits.RequestState state = requestState ( caller ) ) { insertChange ( state ) ; } com.google.gerrit.server.git.ReceiveCommits.synchronizedIncrement ( newProgress ) ; return null ; }
public int getDelimiterUse ( org.commonmark.parser.delimiter.DelimiterRun opener , org.commonmark.parser.delimiter.DelimiterRun closer ) { return 1 ; }
public com.google.gerrit.reviewdb.client.PatchSetApproval.LabelId getLabelId ( ) { return new com.google.gerrit.reviewdb.client.PatchSetApproval.LabelId ( ( ( id ) != null ? id : name ) ) ; }
protected com.google.gerrit.client.account.AgreementPanel createWidget ( ) { return new com.google.gerrit.client.account.AgreementPanel ( ) ; }
public void onEvent ( com.google.gerrit.server.events.Event event ) { publisher.getEventListener ( ) . onEvent ( event ) ; }
public com.google.gerrit.server.CurrentUser getUser ( ) { return identifiedUserFactory.create ( change.getOwner ( ) ) ; }
static com.google.gerrit.client.changes.ChangeApi.MessageInput create ( ) { return ( ( com.google.gerrit.client.changes.ChangeApi.MessageInput ) ( createObject ( ) ) ) ; }
private static java.util.List < com.google.gerrit.reviewdb.client.PatchLineComment > sort ( java.util.List < com.google.gerrit.reviewdb.client.PatchLineComment > comments ) { java.util.Collections.sort ( comments , com.google.gerrit.server.PatchLineCommentsUtil.PLC_ORDER ) ; return comments ; }
public java.lang.String healthCheck ( final com.googlesource.gerrit.plugins.its.jira.Check check ) throws java.io.IOException { return execute ( ( ) -> { if ( check.equals ( Check.ACCESS ) ) return healthCheckAccess ( ) ; return healthCheckSysinfo ( ) ; } ) ; }
private static boolean isValidRevision ( java.lang.String revision ) { return ( ( ! ( revision.contains ( ":" ) ) ) && ( ! ( revision.contains ( "^{" ) ) ) ) && ( ! ( revision.contains ( "@" ) ) ) ; }
public java.lang.String getReplacementString ( ) { return com.google.gerrit.client.FormatUtil.nameEmail ( info ) ; }
public void addPatchSets ( com.google.gerrit.server.data.ChangeAttribute a , java.util.Collection < com.google.gerrit.reviewdb.client.PatchSet > ps , com.google.gerrit.common.data.LabelTypes labelTypes ) { addPatchSets ( a , ps , null , false , null , labelTypes ) ; }
public void tesEventTaskToString ( ) throws java.lang.Exception { com.google.gerrit.server.events.Event event = new com.google.gerrit.server.events.RefUpdatedEvent ( ) ; com.ericsson.gerrit.plugins.highavailability.event.EventHandler.EventTask task = eventHandler.new com.ericsson.gerrit.plugins.highavailability.event.EventHandler.EventTask ( event ) ; com.google.common.truth.Truth.assertThat ( task.toString ( ) ) . isEqualTo ( java.lang.String.format ( "[%s] Send event '%s' to target instance" , com.ericsson.gerrit.plugins.highavailability.event.EventHandlerTest.PLUGIN_NAME , event.type ) ) ; }
public final com.google.gerrit.client.diff.DisplaySide side ( ) { return extras ( ) . side ( ) ; }
public void addChild ( final com.google.gerrit.server.project.ProjectNode child ) { children.add ( child ) ; }
public void changeProjectSettings ( final com.google.gerrit.reviewdb.client.Project update , final com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.ProjectDetail > callback ) { changeProjectSettingsFactory.create ( update ) . to ( callback ) ; }
public void remove ( ) { ref.compareAndSet ( item , defaultItem ) ; }
public com.google.gerrit.index.query.Predicate < T > getChild ( int i ) { return getChildren ( ) . get ( i ) ; }
public static com.google.gerrit.server.diff.PatchListKey againstDefaultBase ( org.eclipse.jgit.lib.AnyObjectId newId , com.google.gerrit.extensions.client.DiffPreferencesInfo.Whitespace ws ) { return new com.google.gerrit.server.diff.PatchListKey ( null , newId , ws , com.google.gerrit.server.diff.PatchListKey.Algorithm.OPTIMIZED_DIFF ) ; }
public boolean isDeny ( ) { return ( action ) == ( com.google.gerrit.common.data.PermissionRule.Action.DENY ) ; }
private void init ( net.codemirror.lib.Pos anchor ) { bubble = new com.google.gerrit.client.diff.InsertCommentBubble ( commentManager , cm ) ; add ( bubble ) ; cm.addWidget ( anchor , bubble.getElement ( ) ) ; }
public com.google.gerrit.reviewdb.client.PatchSetApproval getSubmitter ( com.google.gerrit.server.git.CodeReviewCommit c ) { return approvalsUtil.getSubmitter ( db.get ( ) , c.notes ( ) , c.getPatchsetId ( ) ) ; }
public com.google.gerrit.reviewdb.Patch.PatchType getPatchType ( ) { if ( ( patchType ) == null ) { patchType = com.google.gerrit.reviewdb.Patch.PatchType.forCode ( patchTypeCode ) ; } return patchType ; }
private java.lang.String newChange2 ( org.eclipse.jgit.api.Git git , org.eclipse.jgit.lib.PersonIdent ident ) throws java.lang.Exception { com.google.gerrit.acceptance.PushOneCommit push = pushFactory.create ( db , ident , PushOneCommit.SUBJECT , com.google.gerrit.acceptance.edit.ChangeEditIT.FILE_NAME , new java.lang.String ( com.google.gerrit.acceptance.edit.ChangeEditIT.CONTENT_OLD ) ) ; return push.rm ( git , "refs/for/master" ) . getChangeId ( ) ; }
private void assertNoMembers ( java.lang.String group ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( gApi.groups ( ) . id ( group ) . members ( ) . isEmpty ( ) ) ; }
public static com.google.gerrit.common.data.PermissionRule allow ( com.google.gerrit.server.project.ProjectConfig project , java.lang.String permissionName , com.google.gerrit.reviewdb.client.AccountGroup.UUID group , java.lang.String ref ) { return com.google.gerrit.server.project.testing.Util.grant ( project , permissionName , com.google.gerrit.server.project.testing.Util.newRule ( project , group ) , ref ) ; }
public void onSuccess ( final com.google.gerrit.client.data.PatchScript result ) { if ( ( rpcSequence ) == rpcseq ) { script = result ; onResult ( ) ; } }
public com.google.gerrit.common.data.Capable canUpload ( ) { com.google.gerrit.common.data.Capable result = projectControl.canPushToAtLeastOneRef ( ) ; if ( result != ( com.google.gerrit.common.data.Capable.OK ) ) { return result ; } if ( receiveConfig.checkMagicRefs ) { result = com.google.gerrit.server.util.MagicBranch.checkMagicBranchRefs ( repo , project ) ; } return result ; }
static void fireEvent ( com.google.gwtjsonrpc.client.BaseRpcEvent < ? > event ) { com.google.gwtjsonrpc.client.JsonUtil.globalHandlers.fireEvent ( event ) ; event.call = null ; }
public void onShowView ( ) { if ( ( windowTitle ) != null ) { com.google.gerrit.client.Gerrit.setWindowTitle ( this , windowTitle ) ; } com.google.gerrit.client.Gerrit.updateMenus ( this ) ; registerKeys ( ) ; }
public java.lang.String describeForException ( ) { if ( ( forUser ) == ( com.google.gerrit.server.permissions.LabelPermission.ForUser.ON_BEHALF_OF ) ) { return "labelAs " + ( label.formatWithEquals ( ) ) ; } return "label " + ( label.formatWithEquals ( ) ) ; }
private void writeObject ( java.io.ObjectOutputStream out ) throws java.io.IOException { org.eclipse.jgit.lib.ObjectIdSerialization.writeNotNull ( out , prior ) ; org.eclipse.jgit.lib.ObjectIdSerialization.writeNotNull ( out , next ) ; out.writeUTF ( strategyName ) ; }
boolean isEmpty ( ) { return list.isEmpty ( ) ; }
protected void configureCommands ( ) { command ( com.amd.gerrit.plugins.manifestsubscription.ShowSubscriptionCommand.class ) ; command ( com.amd.gerrit.plugins.manifestsubscription.BranchManifestCommand.class ) ; command ( com.amd.gerrit.plugins.manifestsubscription.TagManifestCommand.class ) ; }
java.util.List < com.google.gerrit.extensions.common.ChangeInfo > submittedTogether ( java.util.EnumSet < com.google.gerrit.extensions.client.SubmittedTogetherOption > o ) throws com.google.gerrit.extensions.restapi.RestApiException ;
java.util.Map < java.lang.String , java.lang.String > map ( ) { return java.util.Collections.unmodifiableMap ( attsSingle ) ; }
private com.google.gerrit.acceptance.PushOneCommit.Result createChange ( ) throws java.io.IOException , org.eclipse.jgit.api.errors.GitAPIException { com.google.gerrit.acceptance.PushOneCommit push = pushFactory.create ( db , admin.getIdent ( ) ) ; return push.to ( git , "refs/for/master" ) ; }
public static com.google.gerrit.extensions.client.DiffPreferencesInfo getDiffPreferences ( ) { return com.google.gerrit.client.Gerrit.myAccountDiffPref ; }
public synchronized void stop ( ) { if ( ( basicDataSource ) != null ) { try { basicDataSource.close ( ) ; } catch ( java.sql.SQLException e ) { } finally { basicDataSource = null ; } } }
private com.google.gerrit.extensions.api.changes.ReviewInput createComment ( java.lang.String comment ) { return new com.google.gerrit.extensions.api.changes.ReviewInput ( ) . message ( ( ( com.criteo.gerrit.plugins.automerge.ReviewUpdater.commentsPrefix ) + comment ) ) ; }
public static void editWithFiles ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.info.ChangeInfo.EditInfo > cb ) { com.google.gerrit.client.changes.ChangeApi.edit ( project , id ) . addParameterTrue ( "list" ) . get ( cb ) ; }
public void visit ( org.commonmark.node.FencedCodeBlock node ) { codeInPre ( node.getInfo ( ) , node.getLiteral ( ) ) ; }
public void onFailure ( final java.lang.Throwable caught ) { }
public java.util.Iterator < E > iterator ( ) { return list.iterator ( ) ; }
public final native void indentUnit ( int c ) ;
private void assertDeleteForbidden ( ) throws java.lang.Exception { exception.expect ( com.google.gerrit.extensions.restapi.AuthException.class ) ; exception.expectMessage ( "delete not permitted" ) ; tag ( ) . delete ( ) ; }
public java.lang.Iterable < com.google.gerrit.sshd.SshKeyCacheEntry > get ( java.lang.String username ) { return cache.get ( username ) . getSshKeyCacheEntries ( ) ; }
com.google.gerrit.server.permissions.ProjectControl forUser ( com.google.gerrit.server.CurrentUser who ) { com.google.gerrit.server.permissions.ProjectControl r = new com.google.gerrit.server.permissions.ProjectControl ( uploadGroups , receiveGroups , permissionFilter , changeControlFactory , permissionBackend , refFilterFactory , who , state ) ; r.allSections = allSections ; return r ; }
private void testPushForMaster ( com.google.gerrit.acceptance.git.PushForReviewIT.Protocol p ) throws com.google.gwtorm.server.OrmException , java.io.IOException , org.eclipse.jgit.api.errors.GitAPIException { selectProtocol ( p ) ; com.google.gerrit.acceptance.git.PushOneCommit.Result r = pushTo ( "refs/for/master" ) ; r.assertOkStatus ( ) ; r.assertChange ( Change.Status.NEW , null ) ; }
public static java.lang.String shard ( int id ) { if ( id < 0 ) { return null ; } return com.google.gerrit.reviewdb.client.RefNames.shard ( id , com.google.gerrit.reviewdb.client.RefNames.newStringBuilder ( ) ) . toString ( ) ; }
public java.lang.String encodedKey ( ) { return publicKeyPart ( 1 , null ) ; }
public static java.lang.String toPatch ( com.google.gerrit.reviewdb.client.PatchSet.Id diffBase , com.google.gerrit.reviewdb.client.PatchSet.Id revision , java.lang.String fileName , com.google.gerrit.client.diff.DisplaySide side , int line ) { return com.google.gerrit.client.Dispatcher.toPatch ( "" , diffBase , revision , fileName , side , line ) ; }
private void checkFinalAdded ( ) { if ( finalAdded ) { throw new java.lang.IllegalStateException ( "final callback already added" ) ; } }
public com.google.gerrit.server.index.ChangeIndex getWriteIndex ( int version ) { for ( com.google.gerrit.server.index.ChangeIndex i : writeIndexes ) { if ( ( i.getSchema ( ) . getVersion ( ) ) == version ) { return i ; } } return null ; }
com.google.gwtorm.client.ResultSet < com.google.gerrit.reviewdb.PatchLineComment > draftByChangeFile ( com.google.gerrit.reviewdb.Change.Id id , java.lang.String file , com.google.gerrit.reviewdb.Account.Id author ) throws com.google.gwtorm.client.OrmException ;
static void publish ( com.google.gerrit.reviewdb.client.Change.Id id , java.lang.String revision , com.google.gwt.user.client.ui.Button ... draftButtons ) { com.google.gerrit.client.changes.ChangeApi.publish ( id.get ( ) , revision , com.google.gerrit.client.change.ChangeActions.cs ( id , draftButtons ) ) ; }
com.google.gerrit.server.patch.PatchScriptFactory create ( com.google.gerrit.server.notedb.ChangeNotes notes , java.lang.String fileName , @ com.google.inject.assistedinject.Assisted ( value = "patchSetA" ) com.google.gerrit.reviewdb.client.PatchSet.Id patchSetA , @ com.google.inject.assistedinject.Assisted ( value = "patchSetB" ) com.google.gerrit.reviewdb.client.PatchSet.Id patchSetB , com.google.gerrit.extensions.client.DiffPreferencesInfo diffPrefs ) ;
public void setUp ( ) { checker = new com.google.gerrit.gpg.PublicKeyChecker ( ) ; }
public com.google.gerrit.extensions.common.ChangeInfo get ( ) throws com.google.gerrit.extensions.restapi.RestApiException { return get ( java.util.EnumSet.complementOf ( java.util.EnumSet.of ( ListChangesOption.CHECK , ListChangesOption.SKIP_MERGEABLE ) ) ) ; }
public com.google.gerrit.server.change.PatchSetInserter setNotify ( com.google.gerrit.extensions.api.changes.NotifyHandling notify ) { this . notify = notify ; return this ; }
void sendAsync ( ) { @ java.lang.SuppressWarnings ( value = "unused" ) java.util.concurrent.Future < ? > possiblyIgnoredError = sendEmailsExecutor.submit ( this ) ; }
public void onSuccess ( com.google.gerrit.common.data.ChangeDetail result ) { buttonClicked = true ; if ( callback != null ) { callback.onSuccess ( result ) ; } hide ( ) ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { addTxt.setText ( "" ) ; addTxt.setFocus ( true ) ; }
public java.lang.Boolean call ( ) throws com.google.gerrit.server.project.NoSuchProjectException { com.google.gerrit.server.project.ProjectControl projectControl = controlFor ( project ) ; return ( projectControl.isVisible ( ) ) && ( ( PushOne.ALL_REFS.equals ( ref ) ) || ( projectControl.controlForRef ( ref ) . isVisible ( ) ) ) ; }
public static com.google.common.collect.FluentIterable < java.lang.String > names ( java.lang.Iterable < com.google.gerrit.acceptance.TestAccount > accounts ) { return com.google.common.collect.FluentIterable.from ( accounts ) . transform ( ( a ) -> a.fullName ) ; }
private java.lang.String encoding ( javax.servlet.http.HttpServletRequest req ) { return com.google.common.base.MoreObjects.firstNonNull ( req.getCharacterEncoding ( ) , java.nio.charset.StandardCharsets.UTF_8.name ( ) ) ; }
private com.google.gerrit.extensions.common.ApprovalInfo approvalInfo ( com.google.gerrit.reviewdb.client.Account.Id id , java.lang.Integer value , com.google.gerrit.extensions.common.VotingRangeInfo permittedVotingRange , java.lang.String tag , java.sql.Timestamp date ) { com.google.gerrit.extensions.common.ApprovalInfo ai = com.google.gerrit.server.change.ChangeJson.getApprovalInfo ( id , value , permittedVotingRange , tag , date ) ; accountLoader.put ( ai ) ; return ai ; }
public org.eclipse.jgit.merge.ThreeWayMerger newThreeWayMerger ( final org.eclipse.jgit.lib.Repository repo , final org.eclipse.jgit.lib.ObjectInserter inserter ) { return com.google.gerrit.server.git.MergeUtil.newThreeWayMerger ( repo , inserter , mergeStrategyName ( ) ) ; }
public java.lang.String getHostName ( javax.servlet.http.HttpServletRequest req ) { return com.google.gitiles.TestGitilesUrls.HOST_NAME ; }
private void logDebug ( java.lang.String msg , java.lang.Object ... args ) { if ( com.google.gerrit.server.git.SubmoduleOp.log.isDebugEnabled ( ) ) { com.google.gerrit.server.git.SubmoduleOp.log.debug ( ( ( ( "[" + ( orm.getSubmissionId ( ) ) ) + "]" ) + msg ) , args ) ; } }
public final native net.codemirror.lib.CodeMirror.LineHandle activeLine ( ) ;
public static void updateDraft ( @ com.google.gerrit.common.Nullable java.lang.String project , com.google.gerrit.reviewdb.client.PatchSet.Id id , java.lang.String draftId , com.google.gerrit.client.changes.CommentInfo content , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.changes.CommentInfo > cb ) { com.google.gerrit.client.changes.CommentApi.revision ( project , id , "drafts" ) . id ( draftId ) . put ( content , cb ) ; }
public com.google.gerrit.extensions.client.EditPreferencesInfo getEditPreferences ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return getEditPreferences.apply ( account ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot query edit preferences" , e ) ; } }
private void reject ( final org.eclipse.jgit.transport.ReceiveCommand cmd , final java.lang.String why ) { cmd.setResult ( org.eclipse.jgit.transport.ReceiveCommand.Result.REJECTED_OTHER_REASON , why ) ; commandProgress.update ( 1 ) ; }
public void handle ( net.codemirror.lib.CodeMirror instance , int line , java.lang.String gutter , com.google.gwt.event.dom.client.MouseDownEvent clickEvent ) ;
private int getRandomExecutionDelay ( com.googlesource.gerrit.plugins.github.git.GitJob job ) { java.util.Random rnd = new java.util.Random ( ( ( java.lang.System.currentTimeMillis ( ) ) + ( job.hashCode ( ) ) ) ) ; return rnd.nextInt ( config.jobExecTimeout ) ; }
private void enable ( final boolean on ) { showSiteHeader.setEnabled ( on ) ; useFlashClipboard.setEnabled ( on ) ; maximumPageSize.setEnabled ( on ) ; defaultContext.setEnabled ( on ) ; }
public void onFailure ( java.lang.Throwable e ) { if ( com.google.gerrit.client.rpc.RestApi.isNotFound ( e ) ) { content = null ; modeCallback.onSuccess ( null ) ; } else { com.google.gerrit.client.rpc.GerritCallback.showFailure ( e ) ; } }
protected com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > enforceVisibility ( com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > pred ) { return new com.google.gerrit.server.query.change.AndChangeSource ( pred , new com.google.gerrit.server.query.change.ChangeIsVisibleToPredicate ( db , notesFactory , changeControlFactory , userProvider.get ( ) ) , start ) ; }
public com.google.gerrit.server.IdentifiedUser create ( com.google.gerrit.reviewdb.client.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( capabilityControlFactory , starredChangesUtil , authConfig , realm , anonymousCowardName , canonicalUrl , accountCache , groupBackend , disableReverseDnsLookup , remotePeerProvider , dbProvider , id , null ) ; }
public com.google.gerrit.client.ui.Screen recycleThis ( final com.google.gerrit.client.ui.Screen newScreen ) { final com.google.gerrit.client.changes.ChangeScreen s = ( ( com.google.gerrit.client.changes.ChangeScreen ) ( newScreen ) ) ; changeId = s.changeId ; changeInfo = s.changeInfo ; return this ; }
public < T extends com.google.gwt.core.client.JavaScriptObject > void delete ( com.google.gwt.user.client.rpc.AsyncCallback < T > cb ) { delete ( com.google.gerrit.client.rpc.RestApi.wrap ( cb ) ) ; }
public final boolean requireXsrfValid ( ) { if ( isXsrfValid ( ) ) { return true ; } else { onFailure ( new java.lang.Exception ( com.google.gwtjsonrpc.common.JsonConstants.ERROR_INVALID_XSRF ) ) ; return false ; } }
private java.lang.String expand ( com.google.gerrit.common.data.ParameterizedString parameterizedRef , java.lang.String userName ) { return parameterizedRef.replace ( java.util.Collections.singletonMap ( RefPattern.USERNAME , userName ) ) ; }
protected void configure ( ) { listener ( ) . to ( GitRepositoryManager.Lifecycle.class ) ; listener ( ) . to ( CachePool.Lifecycle.class ) ; listener ( ) . to ( WorkQueue.Lifecycle.class ) ; }
private com.google.common.util.concurrent.CheckedFuture < ? , java.io.IOException > submit ( java.util.concurrent.Callable < ? > task ) { return com.google.common.util.concurrent.Futures.makeChecked ( com.google.common.util.concurrent.Futures.nonCancellationPropagating ( executor.submit ( task ) ) , com.google.gerrit.server.index.change.ChangeIndexer.MAPPER ) ; }
public java.lang.String getShortName ( ) { return com.google.gerrit.reviewdb.client.RefNames.shortName ( get ( ) ) ; }
public int hashCode ( ) { return java.util.Objects.hash ( line , aligned ) ; }
public void onBlur ( com.google.gwt.event.dom.client.BlurEvent event ) { setFocus ( false ) ; }
com.google.gerrit.httpd.rpc.changedetail.PatchSetDetailFactory create ( @ com.google.inject.assistedinject.Assisted ( value = "psIdNew" ) com.google.gerrit.reviewdb.PatchSet.Id psIdA , @ com.google.inject.assistedinject.Assisted ( value = "psIdOld" ) com.google.gerrit.reviewdb.PatchSet.Id psIdB , com.google.gerrit.reviewdb.AccountDiffPreference diffPrefs ) ;
public static java.util.Map < java.lang.String , org.eclipse.jgit.lib.Config > againstPreviousIndexVersion ( ) { java.util.List < java.lang.Integer > schemaVersions = com.google.gerrit.testing.IndexVersions.getWithoutLatest ( com.google.gerrit.index.project.ProjectSchemaDefinitions.INSTANCE ) ; return com.google.gerrit.testing.IndexVersions.asConfigMap ( ProjectSchemaDefinitions.INSTANCE , schemaVersions , "againstIndexVersion" , com.google.gerrit.server.query.project.LuceneQueryProjectsTest.defaultConfig ( ) ) ; }
private void preMerge ( final com.google.gerrit.server.git.SubmitStrategy strategy ) throws com.google.gerrit.server.git.MergeException { openBranch ( ) ; validateChangeList ( ) ; mergeTip = strategy.run ( branchTip , toMerge ) ; refLogIdent = strategy.getRefLogIdent ( ) ; commits.putAll ( strategy.getNewCommits ( ) ) ; }
public static byte [ ] asByteArray ( org.eclipse.jgit.lib.ObjectLoader ldr ) throws java.io.IOException , org.eclipse.jgit.errors.LargeObjectException , org.eclipse.jgit.errors.MissingObjectException { return ldr.getCachedBytes ( com.google.gerrit.server.diff.Text.bigFileThreshold ) ; }
public void preDisplay ( final com.google.gwt.core.client.JsArray < com.google.gerrit.client.projects.BranchInfo > result ) { java.util.Set < java.lang.String > checkedRefs = branchTable.getCheckedRefs ( ) ; display ( com.google.gerrit.client.rpc.Natives.asList ( result ) ) ; branchTable.setChecked ( checkedRefs ) ; updateForm ( ) ; }
public void update ( com.googlesource.gerrit.plugins.github.git.GitJobStatus.Code statusCode ) { this . status = statusCode ; this . shortDescription = statusCode.name ( ) ; this . value = statusCode.name ( ) ; }
public void testThreeLevelTreeWithAllIndexPredicates ( ) throws java.lang.Exception { com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > in = parse ( "-status:abandoned (status:open OR status:merged)" ) ; org.junit.Assert.assertEquals ( query ( parse ( "status:new OR status:submitted OR status:draft OR status:merged" ) ) , rewrite.rewrite ( in , 0 , com.google.gerrit.common.data.GlobalCapability.DEFAULT_MAX_QUERY_LIMIT ) ) ; }
private static org.eclipse.jgit.lib.ObjectId emptyTree ( org.eclipse.jgit.lib.ObjectInserter ins ) throws java.io.IOException { return ins.insert ( Constants.OBJ_TREE , new byte [ ] { } ) ; }
private java.lang.String expand ( java.lang.String parameterizedRef , java.lang.String userName , com.google.gerrit.reviewdb.client.Account.Id accountId ) { if ( parameterizedRef.contains ( "${" ) ) { return expand ( new com.google.gerrit.common.data.ParameterizedString ( parameterizedRef ) , userName , accountId ) ; } return parameterizedRef ; }
public boolean handles ( java.nio.file.Path srcPath ) { java.lang.String fileName = srcPath.getFileName ( ) . toString ( ) ; return ( fileName.endsWith ( com.google.gerrit.server.plugins.JarPluginProvider.JAR_EXTENSION ) ) || ( fileName.endsWith ( ( ( com.google.gerrit.server.plugins.JarPluginProvider.JAR_EXTENSION ) + ".disabled" ) ) ) ; }
void pushWasCanceled ( com.googlesource.gerrit.plugins.replication.PushOne pushOp ) { synchronized ( stateLock ) { org.eclipse.jgit.transport.URIish uri = pushOp.getURI ( ) ; pending.remove ( uri ) ; } }
public final native net.codemirror.lib.Pos from ( ) ;
public void start ( final org.apache.sshd.server.Environment env ) { java.lang.String msg = "error: That command is disabled on this server.\n\n" + "Please use the master server URL.\n" ; try { err.write ( msg.getBytes ( com.google.gerrit.sshd.commands.ENC ) ) ; err.flush ( ) ; } catch ( java.io.IOException e ) { } onExit ( 1 ) ; }
protected void onInitUI ( ) { super . onInitUI ( ) ; initName ( ) ; initOwner ( ) ; initDescription ( ) ; initGroupType ( ) ; initMemberList ( ) ; initExternal ( ) ; }
public com.google.gerrit.extensions.api.changes.SubmittedTogetherInfo submittedTogether ( java.util.EnumSet < com.google.gerrit.extensions.api.changes.SubmittedTogetherOption > options ) throws com.google.gerrit.extensions.restapi.RestApiException { return submittedTogether ( java.util.EnumSet.noneOf ( com.google.gerrit.extensions.client.ListChangesOption.class ) , options ) ; }
public com.googlesource.gerrit.plugins.lfs.LfsBackendType getBackendType ( ) { return cfg.getEnum ( "storage" , null , "backend" , LfsBackendType.FS ) ; }
private static com.google.gwtexpui.safehtml.client.SafeHtml showTrailingWhitespace ( com.google.gwtexpui.safehtml.client.SafeHtml src ) { return src.replaceFirst ( "([ \t][ \t]*)(\r?\n?)$" , ( ( "<span class=\"" + ( Resources.I.css ( ) . whitespaceerror ( ) ) ) + "\">$1</span>$2" ) ) ; }
public static void includedIn ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.info.ChangeInfo.IncludedInInfo > cb ) { com.google.gerrit.client.changes.ChangeApi.call ( project , id , "in" ) . get ( cb ) ; }
private static com.google.common.collect.ImmutableList < org.eclipse.jgit.diff.Edit > deepCopyEdits ( java.util.List < org.eclipse.jgit.diff.Edit > edits ) { return edits.stream ( ) . map ( com.google.gerrit.server.diff.IntraLineDiffArgs :: copy ) . collect ( com.google.common.collect.ImmutableList.toImmutableList ( com.google.common.collect.ImmutableList ) ) ; }
protected static void usage ( ) { java.lang.System.err.println ( "Usage:" ) ; java.lang.System.err.println ( " java -jar cafeteria.jar package:predicate" ) ; java.lang.System.err.println ( " java -jar cafeteria.jar predicate" ) ; java.lang.System.err.println ( " package: package name\n" ) ; java.lang.System.err.println ( " predicate: predicate name (only atom)" ) ; }
public void cleanup ( ) { source.removeEventListener ( eventListener ) ; db.close ( ) ; }
public void manualCertificationMatchesExternalId ( ) throws java.lang.Exception { addExternalId ( "foo" , "myId" , null ) ; com.google.gerrit.gpg.GerritPublicKeyChecker checker = checkerFactory.create ( user ) ; assertNoProblems ( checker.check ( com.google.gerrit.gpg.testutil.TestKeys.validKeyWithSecondUserId ( ) . getPublicKey ( ) ) ) ; }
protected void run ( ) { for ( com.googlesource.gerrit.plugins.replication.Destination d : config.getDestinations ( FilterType.ALL ) ) { if ( matches ( d.getRemoteConfigName ( ) ) ) { printRemote ( d ) ; } } }
public void onClick ( com.google.gwt.event.dom.client.ClickEvent event ) { event.preventDefault ( ) ; event.stopPropagation ( ) ; select ( ) ; }
public com.google.gerrit.extensions.api.projects.ProjectApi.ListRefsRequest < T > withStart ( int start ) { this . start = start ; return this ; }
java.util.Set < com.google.gerrit.server.account.externalids.ExternalId > all ( org.eclipse.jgit.lib.ObjectId rev ) throws java.io.IOException { checkReadEnabled ( ) ; try ( org.eclipse.jgit.lib.Repository repo = repoManager.openRepository ( allUsersName ) ) { return com.google.gerrit.server.account.externalids.ExternalIdReader.all ( repo , rev ) ; } }
public java.lang.String getUrl ( java.lang.String project ) { return "repo download " + project ; }
public static synchronized void setClock ( java.sql.Timestamp ts ) { com.google.common.base.Preconditions.checkState ( ( ( com.google.gerrit.testing.TestTimeUtil.clockMs ) != null ) , "call resetWithClockStep first" ) ; com.google.gerrit.testing.TestTimeUtil.clockMs.set ( ts.getTime ( ) ) ; }
public final native void inReplyTo ( java.lang.String i ) ;
public void setStars ( com.google.common.collect.ListMultimap < com.google.gerrit.reviewdb.client.Account.Id , java.lang.String > stars ) { this . stars = com.google.common.collect.ImmutableListMultimap.copyOf ( stars ) ; }
public static com.google.gerrit.client.rpc.RestApi reviewers ( @ com.google.gerrit.common.Nullable java.lang.String project , int id ) { return com.google.gerrit.client.changes.ChangeApi.change ( project , id ) . view ( "reviewers" ) ; }
public boolean isEditable ( com.google.gerrit.server.project.ProjectState project ) { return true ; }
public com.google.common.collect.ImmutableListMultimap < com.google.gerrit.reviewdb.client.RevId , com.google.gerrit.reviewdb.client.RobotComment > getRobotComments ( ) throws com.google.gwtorm.server.OrmException { loadRobotComments ( ) ; return robotCommentNotes.getComments ( ) ; }
private static boolean autoReindexIfStale ( org.eclipse.jgit.lib.Config cfg ) { return cfg.getBoolean ( "index" , null , "testAutoReindexIfStale" , true ) ; }
public void preDisplay ( final com.google.gwt.core.client.JsArray < com.google.gerrit.client.projects.BranchInfo > result ) { display ( com.google.gerrit.client.rpc.Natives.asList ( result ) ) ; updateForm ( ) ; }
public void setUp ( ) { easyMock = new org.easymock.EasyMockSupport ( ) ; storeMock = easyMock.createMock ( com.ericsson.gerrit.plugins.eventslog.EventStore.class ) ; poolMock = new com.ericsson.gerrit.plugins.eventslog.EventHandlerTest.PoolMock ( 1 ) ; listener = new com.ericsson.gerrit.plugins.eventslog.EventHandler ( storeMock , poolMock ) ; }
public void onSuccess ( final com.google.gerrit.client.data.ChangeDetail r ) { if ( isAttached ( ) ) { setAccountInfoCache ( r.getAccounts ( ) ) ; display ( r.getChange ( ) , r.getMissingApprovals ( ) , r.getApprovals ( ) ) ; } }
public static int toIndexTime ( java.util.Date ts ) { return ( ( int ) ( ( ts.getTime ( ) ) / 60000 ) ) ; }
public void noExternalIds ( ) throws java.lang.Exception { db.accountExternalIds ( ) . delete ( db.accountExternalIds ( ) . byAccount ( user.getAccountId ( ) ) ) ; reloadUser ( ) ; assertProblems ( com.google.gerrit.gpg.testutil.TestKey.key5 ( ) , ( "No identities found for user; check" + " http://test/#/settings/web-identities" ) ) ; }
public final void init ( ) { if ( ( labels0 ( ) ) != null ) { labels0 ( ) . copyKeysIntoChildren ( "_name" ) ; } }
public void onClick ( com.google.gwt.event.dom.client.ClickEvent arg0 ) { if ( cb.getValue ( ) ) { scriptSettings.setWhitespace ( Whitespace.IGNORE_SPACE_CHANGE ) ; } else { scriptSettings.setWhitespace ( Whitespace.IGNORE_NONE ) ; } refresh ( false ) ; }
public void newPatchSetByOtherOnReviewableChangeOwnerSelfCcNotifyNone ( ) throws java.lang.Exception { com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableChange ( ) ; pushTo ( sc , "refs/for/master%notify=NONE" , other , EmailStrategy.CC_ON_OWN_COMMENTS ) ; assertThat ( sender ) . notSent ( ) ; }
protected com.google.gerrit.gpg.CheckResult checkCustom ( org.eclipse.jgit.lib.Repository repo ) { return com.google.gerrit.gpg.CheckResult.ok ( ) ; }
public java.util.concurrent.ExecutorService createSendEmailExecutor ( ) { return com.google.common.util.concurrent.MoreExecutors.newDirectExecutorService ( ) ; }
private void onDiscoveryFailure ( ) { showError ( OpenIdUtil.C.notSupported ( ) ) ; enable ( true ) ; providerId.selectAll ( ) ; providerId.setFocus ( true ) ; }
private static com.google.gerrit.client.rpc.RestApi call ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , java.lang.String commit , java.lang.String action ) { return com.google.gerrit.client.changes.ChangeApi.change ( project , id ) . view ( "revisions" ) . id ( commit ) . view ( action ) ; }
public WorkQueue.Executor getQueue ( com.google.gerrit.sshd.QueueType type ) { switch ( type ) { case INTERACTIVE : return interactiveExecutor ; case BATCH : default : return batchExecutor ; } }
public java.util.Optional < java.lang.String > getUserName ( ) { return java.util.Optional.of ( ( "plugin " + ( pluginName ) ) ) ; }
public java.util.concurrent.ExecutorService createDiffExecutor ( ) { return com.google.common.util.concurrent.MoreExecutors.newDirectExecutorService ( ) ; }
protected void postDisplay ( ) { com.google.gwt.user.client.History.newItem ( Link.SETTINGS_CONTACT , true ) ; }
com.google.gerrit.server.plugins.ServerPlugin get ( java.nio.file.Path srcPath , org.eclipse.jgit.internal.storage.file.FileSnapshot snapshot , com.google.gerrit.server.plugins.ServerPluginProvider.PluginDescription pluginDescriptor ) throws com.google.gerrit.server.plugins.InvalidPluginException ;
public int getCardinality ( ) { return ( source ) != null ? source.getCardinality ( ) : opts.limit ( ) ; }
public com.google.gerrit.extensions.webui.UiAction.Description setEnabled ( com.google.gerrit.extensions.conditions.BooleanCondition enabled ) { this . enabled = enabled ; return this ; }
public void putApproval ( java.lang.String label , short value ) { putApprovalFor ( getUser ( ) . getAccountId ( ) , label , value ) ; }
void setSettings ( final com.google.gerrit.common.data.PatchScriptSettings s ) { settings = s ; context = settings.getContext ( ) ; }
private void setRefLogIdent ( final com.google.gerrit.client.reviewdb.ChangeApproval submitAudit ) { if ( submitAudit != null ) { branchUpdate.setRefLogIdent ( identifiedUserFactory.create ( submitAudit.getAccountId ( ) ) . newPersonIdent ( ) ) ; } }
public synchronized void deleteRepository ( com.google.gerrit.reviewdb.client.Project.NameKey name ) { repos.remove ( com.google.gerrit.testing.InMemoryRepositoryManager.normalize ( name ) ) ; }
public com.google.gerrit.server.project.FileResource parse ( com.google.gerrit.server.project.CommitResource parent , com.google.gerrit.extensions.restapi.IdString id ) throws com.google.gerrit.extensions.restapi.ResourceNotFoundException , java.io.IOException { return com.google.gerrit.server.project.FileResource.create ( repoManager , parent.getProject ( ) , parent.getCommit ( ) , id.get ( ) ) ; }
public void doReviewerDeletedHook ( com.google.gerrit.reviewdb.client.Change change , com.google.gerrit.reviewdb.client.Account account , com.google.gerrit.reviewdb.client.PatchSet patchSet , java.lang.String comment , java.util.Map < java.lang.String , java.lang.Short > approvals , java.util.Map < java.lang.String , java.lang.Short > oldApprovals , com.google.gerrit.reviewdb.server.ReviewDb db ) { }
static void invoke ( com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.client.info.ActionInfo action , com.google.gerrit.client.rpc.RestApi api ) { com.google.gerrit.client.api.DefaultActions.invoke ( action , api , com.google.gerrit.client.api.DefaultActions.callback ( com.google.gerrit.common.PageLinks.toProject ( project ) ) ) ; }
protected com.google.gerrit.server.change.ChangeJson.ChangeInfo getChange ( java.lang.String changeId , com.google.gerrit.extensions.common.ListChangesOption ... options ) throws java.io.IOException { return getChange ( adminSession , changeId , options ) ; }
public void run ( ) { fixScroll ( cmA ) ; }
public static java.lang.String toChange ( @ com.google.gerrit.common.Nullable com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.reviewdb.client.Change.Id c ) { return ( com.google.gerrit.common.PageLinks.toChangeNoSlash ( project , c ) ) + "/" ; }
public final native void setScrollSetAt ( double when ) ;
static int getMaxCacheSize ( ) { return com.googlesource.gerrit.plugins.findowners.Config.maxCacheSize ; }
public com.google.gerrit.client.rpc.RestApi data ( com.google.gwt.json.client.JSONObject obj ) { contentType = ( com.google.gerrit.client.rpc.RestApi.JSON_TYPE ) + "; charset=utf-8" ; contentData = obj.toString ( ) ; return this ; }
public com.google.gerrit.extensions.common.GroupOptionsInfo apply ( com.google.gerrit.server.group.GroupResource resource ) { return com.google.gerrit.server.group.GroupJson.createOptions ( resource.getGroup ( ) ) ; }
public void remove ( ) { descriptions.remove ( name ) ; registry.remove ( name ) ; }
protected void doGet ( final javax.servlet.http.HttpServletRequest req , final javax.servlet.http.HttpServletResponse rsp ) throws java.io.IOException { com.google.gerrit.httpd.UrlModule.toGerrit ( req.getRequestURI ( ) . substring ( req.getContextPath ( ) . length ( ) ) , req , rsp ) ; }
protected void submit ( java.lang.String changeId ) throws java.lang.Exception { submit ( changeId , new com.google.gerrit.extensions.api.changes.SubmitInput ( ) , null , null ) ; }
public void cancel ( ) { try { SshScopes.current.set ( context ) ; onExit ( com.google.gerrit.sshd.BaseCommand.STATUS_CANCEL ) ; } finally { SshScopes.current.set ( null ) ; } }
private static dk.brics.automaton.RegExp toRegExp ( java.lang.String refPattern ) { if ( com.google.gerrit.server.project.RefControl.isRE ( refPattern ) ) { refPattern = refPattern.substring ( 1 ) ; } return new dk.brics.automaton.RegExp ( refPattern ) ; }
protected abstract void encode ( T obj , com.google.protobuf.CodedOutputStream out ) ;
public static com.google.gerrit.acceptance.GitUtil.Commit createCommit ( org.eclipse.jgit.api.Git git , org.eclipse.jgit.lib.PersonIdent i , java.lang.String msg ) throws java.io.IOException , org.eclipse.jgit.api.errors.GitAPIException { return com.google.gerrit.acceptance.GitUtil.createCommit ( git , i , msg , null ) ; }
public java.lang.String getDisplayString ( ) { return info.name ( ) ; }
private void assertNotOwner ( com.google.gerrit.server.project.ProjectControl u ) { com.google.common.truth.Truth.assertThat ( u.isOwner ( ) ) . named ( "not owner" ) . isFalse ( ) ; }
com.google.gerrit.server.index.ChangeIndexer create ( com.google.common.util.concurrent.ListeningExecutorService executor , com.google.gerrit.server.index.ChangeIndex index ) ;
public void setLocalUser ( java.lang.String localUser ) { if ( externalId.isScheme ( com.google.gerrit.server.account.ExternalId.SCHEME_GERRIT ) ) { externalId = ExternalId.Key.create ( com.google.gerrit.server.account.ExternalId.SCHEME_GERRIT , localUser ) ; } }
public static com.google.gerrit.server.patch.PatchListKey againstParentNum ( int parentNum , org.eclipse.jgit.lib.AnyObjectId newId , com.google.gerrit.extensions.client.DiffPreferencesInfo.Whitespace ws ) { return new com.google.gerrit.server.patch.PatchListKey ( parentNum , newId , ws , com.google.gerrit.server.patch.PatchListKey.Algorithm.OPTIMIZED_DIFF ) ; }
public void testSyncIndexTaskToString ( ) throws java.lang.Exception { com.ericsson.gerrit.plugins.multimaster.IndexEventHandler.SyncIndexTask syncIndexTask = indexEventHandler.new com.ericsson.gerrit.plugins.multimaster.IndexEventHandler.SyncIndexTask ( com.ericsson.gerrit.plugins.multimaster.IndexEventHandlerTest.CHANGE_ID , false ) ; com.google.common.truth.Truth.assertThat ( syncIndexTask.toString ( ) ) . isEqualTo ( java.lang.String.format ( "[%s] Index change %s in target instance" , com.ericsson.gerrit.plugins.multimaster.IndexEventHandlerTest.PLUGIN_NAME , com.ericsson.gerrit.plugins.multimaster.IndexEventHandlerTest.CHANGE_ID ) ) ; }
public com.google.gerrit.extensions.common.WebLinkInfo getPathSetWebLink ( java.lang.String projectName , java.lang.String commit ) { return new com.google.gerrit.extensions.common.WebLinkInfo ( name , myImageUrl , java.lang.String.format ( placeHolderUrlProjectCommit , projectName , commit ) , Target.BLANK ) ; }
public com.google.gerrit.pgm.init.api.Section get ( java.lang.String name , java.lang.String subsection ) { return new com.google.gerrit.pgm.init.api.Section ( flags , site , secureStore , ui , name , subsection ) ; }
public java.util.List < com.google.gerrit.common.data.PermissionRange > getLabelRanges ( ) { return getRefControl ( ) . getLabelRanges ( ) ; }
private java.lang.String newChange ( org.eclipse.jgit.api.Git git , org.eclipse.jgit.lib.PersonIdent ident ) throws java.lang.Exception { com.google.gerrit.acceptance.PushOneCommit push = pushFactory.create ( db , ident , PushOneCommit.SUBJECT , com.google.gerrit.acceptance.edit.ChangeEditIT.FILE_NAME , new java.lang.String ( com.google.gerrit.acceptance.edit.ChangeEditIT.CONTENT_OLD ) ) ; return push.to ( git , "refs/for/master" ) . getChangeId ( ) ; }
private com.google.gerrit.extensions.common.FixReplacementInfo createFixReplacementInfo ( ) { com.google.gerrit.extensions.common.FixReplacementInfo newFixReplacementInfo = new com.google.gerrit.extensions.common.FixReplacementInfo ( ) ; newFixReplacementInfo.path = com.google.gerrit.acceptance.PushOneCommit.FILE_NAME ; newFixReplacementInfo.replacement = "some replacement code" ; newFixReplacementInfo.range = createRange ( 3 , 12 , 15 , 4 ) ; return newFixReplacementInfo ; }
protected PatchScreen.Type getPatchScreenType ( ) { return PatchScreen.Type.UNIFIED ; }
public void repeatedHashtag ( ) throws java.lang.Exception { java.lang.String commitMessage = "#Subject\n\n#Hashtag1\n\n#Hashtag2\n\n#Hashtag1" ; com.google.common.truth.Truth.assertThat ( ( ( java.lang.Iterable < ? > ) ( com.google.gerrit.server.change.HashtagsUtil.extractTags ( commitMessage ) ) ) ) . containsExactlyElementsIn ( com.google.common.collect.Sets.newHashSet ( "Subject" , "Hashtag1" , "Hashtag2" ) ) ; }
com.google.gerrit.index.IndexConfig getIndexConfig ( @ com.google.gerrit.server.config.GerritServerConfig org.eclipse.jgit.lib.Config cfg ) { org.apache.lucene.search.BooleanQuery.setMaxClauseCount ( cfg.getInt ( "index" , "maxTerms" , org.apache.lucene.search.BooleanQuery.getMaxClauseCount ( ) ) ) ; return com.google.gerrit.index.IndexConfig.fromConfig ( cfg ) . separateChangeSubIndexes ( true ) . build ( ) ; }
public static org.eclipse.jgit.merge.ThreeWayMergeStrategy getMergeStrategy ( org.eclipse.jgit.lib.Config cfg ) { return com.google.gerrit.server.git.MergeUtil.useRecursiveMerge ( cfg ) ? org.eclipse.jgit.merge.MergeStrategy.RECURSIVE : org.eclipse.jgit.merge.MergeStrategy.RESOLVE ; }
private com.google.gerrit.reviewdb.client.Change insertChange ( ) throws java.lang.Exception { com.google.gerrit.reviewdb.client.Change c = com.google.gerrit.testutil.TestChanges.newChange ( project , adminId ) ; db.changes ( ) . insert ( java.util.Collections.singleton ( c ) ) ; return c ; }
java.lang.String patchTableSize_ModifyBinaryFilesWithPercentages ( java.lang.String bytesInserted , java.lang.String percentageInserted , java.lang.String bytesDeleted , java.lang.String percentageDeleted ) ;
public boolean isAccessTokenForUser ( java.lang.String username , java.lang.String accessToken ) { try { com.google.gson.JsonObject jsonWebToken = toJsonWebToken ( accessToken ) ; return equalsAdjustCase ( username , getAttribute ( jsonWebToken , com.googlesource.gerrit.plugins.cfoauth.UAAClient.USER_NAME_ATTRIBUTE ) ) ; } catch ( com.googlesource.gerrit.plugins.cfoauth.UAAClientException e ) { return false ; } }
public static com.google.gerrit.server.mail.MailUtil.MailRecipients getRecipientsFromReviewers ( com.google.gerrit.server.ReviewerSet reviewers ) { com.google.gerrit.server.mail.MailUtil.MailRecipients recipients = new com.google.gerrit.server.mail.MailUtil.MailRecipients ( ) ; recipients.reviewers.addAll ( reviewers.byState ( com.google.gerrit.server.notedb.ReviewerStateInternal.REVIEWER ) ) ; recipients.cc.addAll ( reviewers.byState ( com.google.gerrit.server.notedb.ReviewerStateInternal.CC ) ) ; return recipients ; }
protected abstract void onLoad ( org.eclipse.jgit.revwalk.RevWalk walk ) throws java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException ;
public java.lang.String getPluginName ( java.nio.file.Path srcPath ) { return com.google.common.base.MoreObjects.firstNonNull ( getGerritPluginName ( srcPath ) , com.google.gerrit.server.plugins.PluginLoader.nameOf ( srcPath ) ) ; }
public com.google.common.util.concurrent.ListenableFuture < ? > delete ( com.google.gerrit.server.query.change.ChangeData cd ) { return ( executor ) != null ? executor.submit ( deleteTask ( cd ) ) : com.google.common.util.concurrent.Futures.immediateFuture ( null ) ; }
public void confirmInvalidToken_UnprocessableEntity ( ) throws java.lang.Exception { com.google.gerrit.server.config.ConfirmEmail.Input in = new com.google.gerrit.server.config.ConfirmEmail.Input ( ) ; in.token = "invalidToken" ; adminSession.put ( "/config/server/email.confirm" , in ) . assertUnprocessableEntity ( ) ; }
public void onFailure ( java.lang.Throwable caught ) { com.google.gerrit.client.change.ChangeScreen.logger.log ( java.util.logging.Level.SEVERE , ( "Loading file list and inline comments failed: " + ( caught.getMessage ( ) ) ) ) ; loadConfigInfo ( info , rev ) ; }
public java.util.List < com.google.gerrit.server.query.change.ChangeData > query ( com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > p ) throws com.google.gwtorm.server.OrmException { try { return qp.query ( p ) . entities ( ) ; } catch ( com.google.gerrit.server.query.QueryParseException e ) { throw new com.google.gwtorm.server.OrmException ( e ) ; } }
public void setHashtags ( com.google.gerrit.extensions.api.changes.HashtagsInput input ) throws com.google.gerrit.extensions.restapi.RestApiException { try { postHashtags.apply ( change , input ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot post hashtags" , e ) ; } }
private static java.io.FileNotFoundException badSourceRoot ( java.net.URI u , java.lang.Throwable cause ) { java.io.FileNotFoundException notFound = com.google.gitiles.dev.DevServer.badSourceRoot ( u ) ; notFound.initCause ( cause ) ; return notFound ; }
public com.googlesource.gerrit.plugins.github.oauth.OAuthCookie getFromCookie ( javax.servlet.http.Cookie cookie ) throws com.googlesource.gerrit.plugins.github.oauth.OAuthTokenException { return new com.googlesource.gerrit.plugins.github.oauth.OAuthCookie ( cipher , cookie ) ; }
public com.google.gerrit.server.group.GroupJson.GroupInfo apply ( com.google.gerrit.server.group.GroupResource resource ) throws com.google.gerrit.extensions.restapi.ResourceNotFoundException , com.google.gwtorm.server.OrmException { return json.format ( resource.getGroup ( ) ) ; }
public static < T > com.google.gerrit.index.query.Predicate < T > not ( com.google.gerrit.index.query.Predicate < T > that ) { if ( that instanceof com.google.gerrit.index.query.NotPredicate ) { return that.getChild ( 0 ) ; } return new com.google.gerrit.index.query.NotPredicate ( that ) ; }
public com.google.gerrit.index.query.InternalQuery < T > enforceVisibility ( boolean enforce ) { queryProcessor.enforceVisibility ( enforce ) ; return this ; }
protected abstract void authorizeUser ( com.google.gerrit.server.permissions.PermissionBackend.ForProject project ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.server.permissions.PermissionBackendException ;
void setNoFilters ( boolean no ) { input.filters = ( no ) ? com.google.gerrit.extensions.common.TestSubmitRuleInput.Filters.SKIP : com.google.gerrit.extensions.common.TestSubmitRuleInput.Filters.RUN ; }
private com.google.gerrit.server.CurrentUser getUser ( ) { return refControl.getUser ( ) ; }
protected void configure ( ) { bind ( com.google.gerrit.server.git.GitRepositoryManager.class ) . to ( com.google.gerrit.server.git.LocalDiskRepositoryManager.class ) ; listener ( ) . to ( com.google.gerrit.server.git.LocalDiskRepositoryManager.Lifecycle.class ) ; }
protected boolean supportsHtml ( ) { return true ; }
public com.google.gerrit.server.project.ChangeControl getReviewerControl ( ) { com.google.common.base.Preconditions.checkArgument ( ( ( user ) != null ) , "no user provided" ) ; return change.getControl ( ) . forUser ( user ) ; }
public void index ( com.google.gerrit.server.query.change.ChangeData cd ) throws java.io.IOException { for ( com.google.gerrit.server.index.ChangeIndex i : getWriteIndexes ( ) ) { i.replace ( cd ) ; } }
protected abstract org.eclipse.jgit.lib.CommitBuilder applyImpl ( org.eclipse.jgit.revwalk.RevWalk rw , org.eclipse.jgit.lib.ObjectInserter ins , org.eclipse.jgit.lib.ObjectId curr ) throws com.google.gwtorm.server.OrmException , java.io.IOException ;
public static java.lang.String refsDraftComments ( com.google.gerrit.reviewdb.client.Change.Id changeId , com.google.gerrit.reviewdb.client.Account.Id accountId ) { java.lang.StringBuilder r = com.google.gerrit.reviewdb.client.RefNames.buildRefsPrefix ( com.google.gerrit.reviewdb.client.RefNames.REFS_DRAFT_COMMENTS , changeId.get ( ) ) ; r.append ( accountId.get ( ) ) ; return r.toString ( ) ; }
static com.google.gerrit.server.query.Predicate < com.google.gerrit.server.account.AccountState > username ( java.lang.String username ) { return new com.google.gerrit.server.query.account.AccountPredicates.AccountPredicate ( com.google.gerrit.server.index.account.AccountField.USERNAME , AccountQueryBuilder.FIELD_USERNAME , username.toLowerCase ( ) ) ; }
public void onSuccess ( com.google.gerrit.client.VoidResult result ) { id.setPassword ( null ) ; display ( id ) ; }
public java.util.Optional < com.google.gerrit.reviewdb.client.AccountGroup > load ( java.lang.String name ) throws java.lang.Exception { try ( com.google.gerrit.reviewdb.server.ReviewDb db = schema.open ( ) ) { return groups.getGroup ( db , new com.google.gerrit.reviewdb.client.AccountGroup.NameKey ( name ) ) ; } }
public java.util.Map < java.lang.String , com.google.gerrit.server.restapi.config.ListCapabilities.CapabilityInfo > apply ( com.google.gerrit.server.config.ConfigResource resource ) throws java.lang.IllegalAccessException , java.lang.NoSuchFieldException { return com.google.common.collect.ImmutableMap.< java.lang.String , com.google.gerrit.server.restapi.config.ListCapabilities.CapabilityInfo > builder ( ) . putAll ( collectCoreCapabilities ( ) ) . putAll ( collectPluginCapabilities ( ) ) . build ( ) ; }
public com.google.gerrit.server.git.BatchUpdate create ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.server.CurrentUser user , java.sql.Timestamp when ) ;
public void want ( final com.google.gerrit.reviewdb.client.AccountGroup.UUID uuid ) { if ( ( uuid != null ) && ( ! ( out.containsKey ( uuid ) ) ) ) { out.put ( uuid , groupCache.get ( uuid ) ) ; } }
public void set ( com.google.gerrit.reviewdb.client.Project.NameKey projectKey , java.lang.String refKey , com.google.gson.JsonObject statusEvent ) throws java.io.IOException ;
protected java.lang.String getRefName ( ) { return com.google.gerrit.reviewdb.client.RefNames.changeMetaRef ( getId ( ) ) ; }
public com.google.gerrit.reviewdb.client.Change abandon ( com.google.gerrit.server.project.ChangeControl control ) throws com.google.gerrit.extensions.restapi.RestApiException , com.google.gerrit.server.git.UpdateException { return abandon ( control , "" , NotifyHandling.ALL , com.google.common.collect.ImmutableListMultimap.of ( ) ) ; }
public com.google.gerrit.server.change.ChangeJson.ChangeInfo format ( com.google.gerrit.server.query.change.ChangeData cd ) throws com.google.gwtorm.server.OrmException { return format ( cd , com.google.common.base.Optional.< com.google.gerrit.reviewdb.client.PatchSet.Id > absent ( ) ) ; }
public com.google.gerrit.extensions.common.WebLinkInfo getBranchWebLink ( java.lang.String projectName , java.lang.String branchName ) { return new com.google.gerrit.extensions.common.WebLinkInfo ( com.googlesource.gerrit.plugins.xdocs.XDocWebLink.README , getImageUrl ( ) , getBranchUrl ( projectName , branchName ) , com.google.gerrit.extensions.webui.WebLinkTarget.SELF ) ; }
public void current ( ) { com.google.common.truth.Truth.assertThat ( com.google.gerrit.testing.IndexVersionsTest.get ( com.google.gerrit.testing.IndexVersions.CURRENT ) ) . containsExactly ( com.google.gerrit.testing.IndexVersionsTest.SCHEMA_DEF.getLatest ( ) . getVersion ( ) ) ; }
void reviewProjectAccess ( com.google.gerrit.reviewdb.client.Project.NameKey projectName , java.lang.String baseRevision , java.lang.String message , java.util.List < com.google.gerrit.common.data.AccessSection > sections , com.google.gerrit.reviewdb.client.Project.NameKey parentProjectName , com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.reviewdb.client.Change.Id > callback ) ;
private void checkLoaded ( ) { com.google.common.base.Preconditions.checkState ( isLoaded , "Account %s not loaded yet" , accountId.get ( ) ) ; }
public static com.google.gerrit.client.rpc.RestApi detail ( @ com.google.gerrit.common.Nullable java.lang.String project , int id ) { return com.google.gerrit.client.changes.ChangeApi.call ( project , id , "detail" ) ; }
public boolean isDefaults ( ) { return RefNames.REFS_USERS_DEFAULT.equals ( getRefName ( ) ) ; }
public void getCacheWithGerritPrefix ( ) throws java.lang.Exception { adminSession.get ( "/config/server/caches/gerrit-accounts" ) . assertOK ( ) ; }
public com.google.gerrit.extensions.api.changes.NotifyHandling getNotify ( ) { return com.google.gerrit.extensions.api.changes.NotifyHandling.ALL ; }
public void onSuccess ( final com.google.gwtjsonrpc.client.VoidResult result ) { com.google.gerrit.client.Gerrit.getUserAccount ( ) . setUserName ( newUserName ) ; enableUI ( true ) ; }
public com.googlecode.prolog_cafe.lang.Term getSubmitRule ( ) { com.google.common.base.Preconditions.checkState ( ( ( submitRule ) != null ) , "getSubmitRule() invalid before evaluation" ) ; return submitRule ; }
protected void preDisplay ( com.google.gerrit.client.projects.ConfigInfoCache.Entry result ) { commentManager = new com.google.gerrit.client.diff.CommentManager ( this , base , revision , path , result.getCommentLinkProcessor ( ) , changeStatus.isOpen ( ) ) ; setTheme ( result.getTheme ( ) ) ; display ( comments ) ; }
public java.lang.Iterable < com.google.gerrit.prettify.common.EditList.Hunk > getHunks ( ) { return getEditList ( ) . getHunks ( ) ; }
public void postUpdateImpl ( com.google.gerrit.server.git.BatchUpdate.Context ctx ) throws com.google.gwtorm.server.OrmException { if ( ( rebaseOp ) != null ) { rebaseOp.postUpdate ( ctx ) ; } }
private void setListIdHeader ( ) throws com.google.gerrit.common.errors.EmailException { setVHeader ( "List-Id" , "<$email.listId.replace('@', '.')>" ) ; if ( ( getSettingsUrl ( ) ) != null ) { setVHeader ( "List-Unsubscribe" , "<$email.settingsUrl>" ) ; } }
com.google.gerrit.server.account.IncludingGroupMembership create ( com.google.gerrit.server.IdentifiedUser user ) ;
com.google.gerrit.rules.PrologEnvironment create ( com.googlecode.prolog_cafe.lang.PrologMachineCopy src ) ;
private static boolean isGoogleAccount ( final com.dyuproject.openid.OpenIdUser user ) { return user.getClaimedId ( ) . startsWith ( ( ( com.google.gerrit.client.openid.OpenIdUtil.URL_GOOGLE ) + "?" ) ) ; }
public void invalidNonce ( ) throws java.lang.Exception { org.eclipse.jgit.transport.PushCertificate cert = newSignedCert ( "invalid-nonce" , com.google.gerrit.gpg.testutil.TestKeys.validKeyWithoutExpiration ( ) ) ; assertProblems ( cert , "Invalid nonce" ) ; }
public void onSuccess ( com.google.gerrit.client.info.ChangeInfo info ) { info.init ( ) ; addExtensionPoints ( info ) ; loadConfigInfo ( info , base ) ; }
private java.nio.file.Path getReplicationStatusPath ( java.lang.String key ) throws java.io.IOException { java.nio.file.Path projectPath = pluginData.resolve ( ( ( getSanitizedKey ( key ) ) + ".replication-error.json" ) ) ; java.nio.file.Files.createDirectories ( projectPath.getParent ( ) ) ; return projectPath ; }
protected org.apache.sshd.server.session.ServerSessionImpl doCreateSession ( org.apache.sshd.common.io.IoSession ioSession ) throws java.lang.Exception { return new org.apache.sshd.server.session.ServerSessionImpl ( getServer ( ) , ioSession ) ; }
public void handle ( net.codemirror.lib.CodeMirror instance , int line , java.lang.String gutter , com.google.gwt.dom.client.NativeEvent clickEvent ) ;
private boolean isConnected ( ) { return ( ( session ) != null ) && ( session.isOpen ( ) ) ; }
public static com.google.gerrit.common.data.GroupReference groupReference ( java.lang.String orgName ) { return new com.google.gerrit.common.data.GroupReference ( com.googlesource.gerrit.plugins.github.group.GitHubOrganisationGroup.uuid ( orgName ) , ( ( NAME_PREFIX ) + orgName ) ) ; }
public void onKeyPress ( final com.google.gwt.event.dom.client.KeyPressEvent event ) { if ( ( com.google.gwtexpui.globalkey.client.KeyCommandSet.toMask ( event ) ) == ( ShowHelpCommand.INSTANCE.keyMask ) ) { event.stopPropagation ( ) ; event.preventDefault ( ) ; } hide ( ) ; }
private static final com.google.gwt.resources.client.ExternalTextResource findTheme ( com.google.gerrit.extensions.client.Theme theme ) { for ( com.google.gwt.resources.client.ExternalTextResource r : net.codemirror.theme.ThemeLoader.THEMES ) { if ( theme.name ( ) . toLowerCase ( ) . equals ( r.getName ( ) ) ) { return r ; } } return null ; }
public void onKeyPress ( final com.google.gwt.event.dom.client.KeyPressEvent event ) { if ( ( event.getNativeEvent ( ) . getKeyCode ( ) ) == ( com.google.gwt.event.dom.client.KeyCodes.KEY_ENTER ) ) { doExternalSearch ( ) ; } }
public static void main ( java.lang.String [ ] argv ) throws java.lang.Exception { com.google.gerrit.gwtdebug.GerritGwtDebugLauncher launcher = new com.google.gerrit.gwtdebug.GerritGwtDebugLauncher ( ) ; launcher.mainImpl ( argv ) ; }
public static java.lang.String toPatch ( java.lang.String type , com.google.gerrit.client.DiffObject diffBase , com.google.gerrit.reviewdb.client.Patch.Key id ) { return com.google.gerrit.client.Dispatcher.toPatch ( type , diffBase , id.getParentKey ( ) , id.get ( ) , null , 0 ) ; }
public void testUndefinedFunctionName ( ) { com.google.gerrit.common.data.ParamertizedString p = new com.google.gerrit.common.data.ParamertizedString ( "${a.anUndefinedMethod}" ) ; assertEquals ( 1 , p.getParameterNames ( ) . size ( ) ) ; assertTrue ( p.getParameterNames ( ) . contains ( "a.anUndefinedMethod" ) ) ; }
public static void clearHttpPassword ( java.lang.String account , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.VoidResult > cb ) { new com.google.gerrit.client.rpc.RestApi ( "/accounts/" ) . id ( account ) . view ( "password.http" ) . delete ( cb ) ; }
public org.eclipse.jgit.lib.PersonIdent getIdent ( ) { return new org.eclipse.jgit.lib.PersonIdent ( fullName , email ) ; }
private void showError ( final java.lang.String msgText ) { errorMsg.setText ( msgText ) ; errorLine.setVisible ( true ) ; }
public void load ( org.eclipse.jgit.lib.Repository db ) throws java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { org.eclipse.jgit.lib.Ref ref = db.getRefDatabase ( ) . exactRef ( getRefName ( ) ) ; load ( db , ( ref != null ? ref.getObjectId ( ) : null ) ) ; }
private void superWindowResolution ( ) { com.google.gerrit.testutil.TestTimeUtil.setClockStep ( ( ( ChangeRebuilderImpl.MAX_WINDOW_MS ) * 2 ) , java.util.concurrent.TimeUnit.MILLISECONDS ) ; com.google.gerrit.common.TimeUtil.nowTs ( ) ; }
public static boolean isInternalGroup ( com.google.gerrit.reviewdb.client.AccountGroup.UUID uuid ) { return ( uuid.get ( ) . startsWith ( "global:" ) ) || ( uuid.get ( ) . matches ( "^[0-9a-f]{40}$" ) ) ; }
public void listTagsOfNonExistingProject ( ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( adminSession.get ( "/projects/non-existing/tags" ) . getStatusCode ( ) ) . isEqualTo ( HttpStatus.SC_NOT_FOUND ) ; }
public static void getUsername ( java.lang.String account , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.rpc.NativeString > cb ) { new com.google.gerrit.client.rpc.RestApi ( "/accounts/" ) . id ( account ) . view ( "username" ) . get ( cb ) ; }
private void readObject ( final java.io.ObjectInputStream in ) throws java.io.IOException { aId = org.eclipse.jgit.lib.ObjectIdSerialization.readNotNull ( in ) ; bId = org.eclipse.jgit.lib.ObjectIdSerialization.readNotNull ( in ) ; ignoreWhitespace = in.readBoolean ( ) ; }
public void invalidNonceNotChecked ( ) throws java.lang.Exception { checker = newChecker ( false ) ; org.eclipse.jgit.transport.PushCertificate cert = newSignedCert ( "invalid-nonce" , com.google.gerrit.gpg.testutil.TestKeys.validKeyWithoutExpiration ( ) ) ; assertProblems ( cert ) ; }
private com.google.gerrit.extensions.common.ApprovalInfo getVote ( com.google.gerrit.extensions.api.changes.ChangeApi change , java.lang.String label ) throws com.google.gerrit.extensions.restapi.RestApiException { return change.get ( java.util.EnumSet.of ( ListChangesOption.DETAILED_LABELS ) ) . labels.get ( label ) . all.get ( 0 ) ; }
public void onSuccess ( com.google.gerrit.client.changes.ChangeInfo.EditInfo result ) { fetch = result.fetch ( ) ; renderScheme ( ) ; }
com.google.gerrit.server.index.ChangeIndexer getChangeIndexer ( @ com.google.gerrit.server.index.IndexExecutor ( value = com.google.gerrit.server.git.QueueProvider.QueueType.INTERACTIVE ) com.google.common.util.concurrent.ListeningExecutorService executor , com.google.gerrit.server.index.ChangeIndexer.Factory factory , com.google.gerrit.server.index.IndexCollection indexes ) { return factory.create ( executor , indexes ) ; }
public com.google.gerrit.extensions.common.AccountInfo setAssignee ( com.google.gerrit.extensions.api.changes.AssigneeInput input ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return putAssignee.apply ( change , input ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot set assignee" , e ) ; } }
public com.google.gerrit.client.reviewdb.Account run ( com.google.gerrit.client.reviewdb.ReviewDb db ) throws com.google.gwtorm.client.OrmException { return db.accounts ( ) . get ( com.google.gerrit.client.rpc.Common.getAccountId ( ) ) ; }
void addStates ( com.google.common.collect.ListMultimap < java.lang.String , com.googlesource.gerrit.plugins.replication.ReplicationState > states ) { stateMap.putAll ( states ) ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { sendButton.setEnabled ( false ) ; cancelButton.setEnabled ( false ) ; onSend ( ) ; }
private void removeChangeIdLock ( com.google.gerrit.reviewdb.client.Change.Id id ) { synchronized ( com.ericsson.gerrit.plugins.syncindex.SyncIndexRestApiServlet.changeIdLocks ) { com.ericsson.gerrit.plugins.syncindex.SyncIndexRestApiServlet.changeIdLocks.remove ( id ) ; } }
private final native void set ( int sl , int sc , int el , int ec ) ;
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { toggleShowIntraline ( ) ; }
public final java.lang.String getShortName ( ) { return com.google.gerrit.reviewdb.client.RefNames.shortName ( ref ( ) ) ; }
com.google.gerrit.server.change.ChangeInserter create ( com.google.gerrit.server.project.RefControl ctl , com.google.gerrit.reviewdb.client.Change c , org.eclipse.jgit.revwalk.RevCommit rc ) ;
public < I > com.google.gerrit.server.index.FieldDef < I , T > build ( com.google.gerrit.server.index.FieldDef.Getter < I , T > getter ) { return new com.google.gerrit.server.index.FieldDef ( name , type , stored , false , getter ) ; }
private boolean isRepo ( java.nio.file.Path p ) { java.lang.String name = p.getFileName ( ) . toString ( ) ; return ( ! ( name.equals ( Constants.DOT_GIT ) ) ) && ( name.endsWith ( Constants.DOT_GIT_EXT ) ) ; }
private com.google.gerrit.server.notedb.ChangeNotesParser newParser ( org.eclipse.jgit.lib.ObjectId tip ) throws java.lang.Exception { walk.reset ( ) ; com.google.gerrit.server.notedb.ChangeNoteUtil noteUtil = injector.getInstance ( com.google.gerrit.server.notedb.ChangeNoteUtil.class ) ; return new com.google.gerrit.server.notedb.ChangeNotesParser ( newChange ( ) . getId ( ) , tip , walk , noteUtil , args.metrics ) ; }
public static boolean isMagic ( java.lang.String path ) { return ( com.google.gerrit.reviewdb.client.Patch.COMMIT_MSG.equals ( path ) ) || ( com.google.gerrit.reviewdb.client.Patch.MERGE_LIST.equals ( path ) ) ; }
public org.eclipse.jgit.lib.ObjectInserter getInserter ( ) throws java.io.IOException { return getRepoView ( ) . getInserter ( ) ; }
public com.google.gerrit.server.project.SubmitRuleEvaluator setFastEvalLabels ( boolean fast ) { checkNotStarted ( ) ; optsBuilder.fastEvalLabels ( fast ) ; return this ; }
private static com.google.gerrit.server.IdentifiedUser checkUser ( com.google.gerrit.server.project.RefControl ctl ) { com.google.common.base.Preconditions.checkArgument ( ctl.getCurrentUser ( ) . isIdentifiedUser ( ) , "only IdentifiedUser may create change" ) ; return ( ( com.google.gerrit.server.IdentifiedUser ) ( ctl.getCurrentUser ( ) ) ) ; }
private java.lang.Iterable < com.google.gerrit.extensions.common.AccountInfo > getReviewers ( com.google.gerrit.acceptance.PushOneCommit.Result r , com.google.gerrit.extensions.client.ReviewerState state ) throws java.lang.Exception { return get ( r.getChangeId ( ) , com.google.gerrit.extensions.client.ListChangesOption.DETAILED_LABELS ) . reviewers.get ( state ) ; }
public void test ( ) throws java.lang.Exception { java.lang.String [ ] invalidFilenamePattern = new java.lang.String [ ] { "\\[|\\]|\\*|#" , "[%:@]" } ; org.eclipse.jgit.revwalk.RevCommit c = makeCommit ( ) ; java.util.List < com.google.gerrit.server.git.validators.CommitValidationMessage > m = com.googlesource.gerrit.plugins.uploadvalidator.InvalidFilenameValidator.performValidation ( repo , c , invalidFilenamePattern ) ; java.util.Set < java.lang.String > expected = new java.util.HashSet < > ( ) ; for ( java.lang.String filenames : com.googlesource.gerrit.plugins.uploadvalidator.InvalidFilenameValidatorTest.getInvalidFilenames ( ) ) { expected.add ( ( "ERROR: invalid characters found in filename: " + filenames ) ) ; } com.google.common.truth.Truth.assertThat ( com.googlesource.gerrit.plugins.uploadvalidator.TestUtils.transformMessages ( m ) ) . containsExactlyElementsIn ( expected ) ; }
protected com.google.gerrit.index.query.Predicate < com.google.gerrit.server.query.change.ChangeData > enforceVisibility ( com.google.gerrit.index.query.Predicate < com.google.gerrit.server.query.change.ChangeData > pred ) { return new com.google.gerrit.server.query.change.AndChangeSource ( pred , new com.google.gerrit.server.query.change.ChangeIsVisibleToPredicate ( db , notesFactory , userProvider.get ( ) , permissionBackend , projectCache ) , start ) ; }
private org.eclipse.jgit.lib.PersonIdent getRefLogIdent ( com.google.gerrit.server.IdentifiedUser user , java.sql.Timestamp when ) { return user.newRefLogIdent ( when , tz ) ; }
public void deleteBranchByAdminForcePushBlocked ( ) throws java.lang.Exception { blockForcePush ( ) ; assertDeleteSucceeds ( testBranch ) ; }
private com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > rewrite ( com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > in , com.google.gerrit.server.query.change.QueryOptions opts ) throws com.google.gerrit.server.query.QueryParseException { return rewrite.rewrite ( in , opts ) ; }
public static void rebaseEdit ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwt.core.client.JavaScriptObject > cb ) { com.google.gwt.core.client.JavaScriptObject in = com.google.gwt.core.client.JavaScriptObject.createObject ( ) ; com.google.gerrit.client.changes.ChangeApi.change ( project , id ) . view ( "edit:rebase" ) . post ( in , cb ) ; }
void pushCodedOutputStream ( ) { mv.visitVarInsn ( com.google.gwtorm.protobuf.ALOAD , 2 ) ; }
private static com.google.common.collect.Table < java.lang.String , com.google.gerrit.reviewdb.client.Account.Id , com.google.common.base.Optional < java.lang.Short > > approvals ( java.util.Comparator < java.lang.String > nameComparator ) { return com.google.common.collect.TreeBasedTable.create ( nameComparator , java.util.Comparator.comparing ( IntKey :: get ) ) ; }
private PushOneCommit.Result createANewChangeWithTopic ( ) throws java.lang.Exception { return pushFactory.create ( db , admin.getIdent ( ) , testRepo , "a message" , "a.txt" , "content\n" ) . to ( ( "refs/for/master/" + ( name ( "topic" ) ) ) ) ; }
void add ( org.pegdown.ast.RootNode node ) { for ( org.pegdown.ast.ReferenceNode ref : node.getReferences ( ) ) { java.lang.String id = com.google.gitiles.doc.MarkdownUtil.getInnerText ( ref ) ; references.put ( com.google.gitiles.doc.ReferenceMap.key ( id ) , ref ) ; } }
private void initCompression ( ) { setCompressionFactories ( java.util.Arrays.< org.apache.sshd.common.NamedFactory < org.apache.sshd.common.Compression > > asList ( new org.apache.sshd.common.compression.CompressionNone.Factory ( ) ) ) ; }
public void invalidNonce ( ) throws java.lang.Exception { org.eclipse.jgit.transport.PushCertificate cert = newSignedCert ( "invalid-nonce" , com.google.gerrit.gpg.testing.TestKeys.validKeyWithoutExpiration ( ) ) ; assertProblems ( cert , "Invalid nonce" ) ; }
public void run ( ) { switch ( getIntraLineStatus ( ) ) { case OFF : case OK : toggleShowIntraline ( ) ; break ; default : break ; } }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { com.google.gerrit.client.Gerrit.display ( ( "change,publish," + ( patchSet.getId ( ) . toString ( ) ) ) , new com.google.gerrit.client.changes.PublishCommentScreen ( patchSet.getId ( ) ) ) ; }
protected com.google.inject.Injector createInjector ( ) { org.eclipse.jgit.lib.Config luceneConfig = new org.eclipse.jgit.lib.Config ( config ) ; com.google.gerrit.testutil.InMemoryModule.setDefaults ( luceneConfig ) ; return com.google.inject.Guice.createInjector ( new com.google.gerrit.testutil.InMemoryModule ( luceneConfig ) ) ; }
static com.google.gerrit.server.git.InsertedObject create ( int type , byte [ ] src , int off , int len ) { return com.google.gerrit.server.git.InsertedObject.create ( type , com.google.protobuf.ByteString.copyFrom ( src , off , len ) ) ; }
private static com.google.gerrit.client.rpc.RestApi base ( com.google.gerrit.reviewdb.client.Project.NameKey project ) { return new com.google.gerrit.client.rpc.RestApi ( "/projects/" ) . id ( project.get ( ) ) . view ( "dashboards" ) ; }
public void update ( com.googlesource.gerrit.plugins.github.git.GitJobStatus.Code code , java.lang.String sDescription , java.lang.String description ) { this . status = code ; this . shortDescription = sDescription ; this . value = description ; }
void updateUnsaved ( com.google.gerrit.client.diff.DraftBox box , boolean isUnsaved ) { if ( isUnsaved ) { unsaved.add ( box ) ; } else { unsaved.remove ( box ) ; } }
public boolean getSuggestAccounts ( ) { return suggestAccounts ; }
public void zipFormatDisabled ( ) throws java.lang.Exception { assertArchiveNotPermitted ( ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { onCollapseAll ( null ) ; }
synchronized void remove ( java.lang.String name ) { bucketed.remove ( name ) ; descriptions.remove ( name ) ; }
public static com.google.gerrit.server.query.change.InternalChangeQuery query ( com.google.gerrit.server.query.change.InternalChangeQuery q ) { java.util.Set < java.lang.String > fields = com.google.common.collect.ImmutableSet.of ( ChangeField.CHANGE.getName ( ) , ChangeField.PATCH_SET.getName ( ) , ChangeField.MERGEABLE.getName ( ) ) ; return q.setRequestedFields ( fields ) ; }
public java.util.Optional < java.lang.String > getUserName ( ) { return java.util.Optional.ofNullable ( username ) ; }
java.util.Optional < com.googlesource.gerrit.plugins.webhooks.EventProcessor.Request > process ( com.google.gerrit.server.events.ProjectEvent event , com.googlesource.gerrit.plugins.webhooks.RemoteConfig remote ) ;
protected com.google.gerrit.server.notedb.ChangeUpdate newUpdate ( com.google.gerrit.reviewdb.client.Change c , com.google.gerrit.server.CurrentUser user ) throws java.lang.Exception { com.google.gerrit.server.notedb.ChangeUpdate update = com.google.gerrit.testutil.TestChanges.newUpdate ( injector , c , user ) ; update.setAllowWriteToNewRef ( true ) ; return update ; }
static com.google.gerrit.server.git.CodeReviewCommit noPatchSet ( com.google.gerrit.server.project.ChangeControl ctl ) { return com.google.gerrit.server.git.CodeReviewCommit.error ( ctl , CommitMergeStatus.NO_PATCH_SET ) ; }
public static void main ( java.lang.String [ ] args ) { try { new AsciiDoctor ( ) . invoke ( args ) ; } catch ( java.io.IOException e ) { java.lang.System.err.println ( e.getMessage ( ) ) ; java.lang.System.exit ( 1 ) ; } }
public < T extends com.google.gwt.core.client.JavaScriptObject > void post ( com.google.gwt.user.client.rpc.AsyncCallback < T > cb ) { send ( com.google.gwt.http.client.RequestBuilder.POST , cb ) ; }
com.google.gerrit.acceptance.PushOneCommit create ( com.google.gerrit.reviewdb.server.ReviewDb db , org.eclipse.jgit.lib.PersonIdent i , org.eclipse.jgit.api.Git git , @ com.google.inject.assistedinject.Assisted ( value = "subject" ) java.lang.String subject , @ com.google.inject.assistedinject.Assisted ( value = "fileName" ) java.lang.String fileName , @ com.google.inject.assistedinject.Assisted ( value = "content" ) java.lang.String content ) ;
static com.google.gerrit.server.notedb.NotesMigration allEnabled ( ) { org.eclipse.jgit.lib.Config cfg = new org.eclipse.jgit.lib.Config ( ) ; cfg.setBoolean ( "notedb" , null , "write" , true ) ; cfg.setBoolean ( "notedb" , "patchSetApprovals" , "read" , true ) ; return new com.google.gerrit.server.notedb.NotesMigration ( cfg ) ; }
public void index ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.Change change ) throws java.io.IOException { index ( changeDataFactory.create ( db , change ) ) ; }
public final native boolean somethingSelected ( ) ;
private com.google.inject.Injector createWebInjector ( ) { final java.util.List < com.google.inject.Module > modules = new java.util.ArrayList < com.google.inject.Module > ( ) ; modules.add ( sshInjector.getInstance ( com.google.gerrit.server.http.WebModule.class ) ) ; return sysInjector.createChildInjector ( modules ) ; }
public void onFailure ( java.lang.Throwable caught ) { b.setEnabled ( true ) ; }
void maybeRegisterRenderEntireFileKeyMap ( net.codemirror.lib.CodeMirror cm ) { if ( renderEntireFile ( ) ) { cm.addKeyMap ( com.google.gerrit.client.diff.DiffScreen.RENDER_ENTIRE_FILE_KEYMAP ) ; } }
public void onSuccess ( com.google.gerrit.client.changes.ReviewInput result ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( changeId ) ) ; }
public void publish ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { publish.apply ( revision , new com.google.gerrit.server.change.PublishDraftPatchSet.Input ( ) ) ; } catch ( com.google.gerrit.server.git.UpdateException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot publish draft patch set" , e ) ; } }
public final native void skipDeleted ( java.lang.Boolean s ) ;
public static void deleteDraft ( @ com.google.gerrit.common.Nullable java.lang.String project , com.google.gerrit.reviewdb.client.PatchSet.Id id , java.lang.String draftId , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwt.core.client.JavaScriptObject > cb ) { com.google.gerrit.client.changes.CommentApi.revision ( project , id , "drafts" ) . id ( draftId ) . delete ( cb ) ; }
public boolean equals ( java.lang.Object other ) { return ( other instanceof com.google.gerrit.server.query.change.ChangeStatusPredicate ) && ( java.util.Objects.equals ( status , ( ( com.google.gerrit.server.query.change.ChangeStatusPredicate ) ( other ) ) . status ) ) ; }
public com.google.reviewit.app.Preferences build ( ) { return new com.google.reviewit.app.Preferences ( showIntro , startScreen , colorBackground , showPatchSets , showPositiveCodeReviewVotes , showNegativeCodeReviewVotes , showComments , showReviewers , commitMessageFontSize ) ; }
private void doReplay ( ) { org.easymock.classextension.EasyMock.replay ( mockDb , pc , pcf , grm ) ; org.easymock.classextension.EasyMock.replay ( refMocks.toArray ( ) ) ; }
private static boolean correctUser ( java.lang.String user , com.google.gerrit.httpd.WebSession session ) { com.google.gerrit.server.account.ExternalId.Key id = session.getLastLoginExternalId ( ) ; return ( id != null ) && ( id.equals ( ExternalId.Key.create ( com.google.gerrit.server.account.ExternalId.SCHEME_GERRIT , user ) ) ) ; }
private void ensureOptionsInitialized ( ) { if ( ( options ) == null ) { help = new com.google.gerrit.util.cli.CmdLineParser.HelpOption ( ) ; options = com.google.common.collect.Lists.newArrayList ( ) ; addOption ( help , help ) ; } }
protected boolean isVisibleTo ( com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.server.CurrentUser user ) { try { permissionBackend.user ( user ) . project ( project ) . check ( ProjectPermission.ACCESS ) ; return true ; } catch ( com.google.gerrit.extensions.restapi.AuthException | com.google.gerrit.server.permissions.PermissionBackendException e ) { return false ; } }
public com.google.gitiles.doc.html.HtmlBuilder space ( ) { finishActiveTag ( ) ; try { htmlBuf.append ( ' ' ) ; } catch ( java.io.IOException e ) { throw new com.google.gitiles.doc.RuntimeIOException ( e ) ; } return this ; }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > evictAsync ( com.google.gerrit.reviewdb.Project p ) ;
public static void addOptions ( com.google.gerrit.plugin.client.rpc.RestApi call , java.util.EnumSet < com.google.gerrit.extensions.client.ListChangesOption > s ) { call.addParameterRaw ( "O" , java.lang.Integer.toHexString ( com.google.gerrit.extensions.client.ListChangesOption.toBits ( s ) ) ) ; }
public void clear ( ) { body.clear ( ) ; }
public com.google.gerrit.index.query.InternalQuery < T > setRequestedFields ( java.util.Set < java.lang.String > fields ) { queryProcessor.setRequestedFields ( fields ) ; return this ; }
public void onClick ( android.view.View v ) { disableButtons ( ) ; getSortActionHandler ( ) . skip ( ) ; animate ( changeBox , SortActionHandler.Action.SKIP ) ; widgetUtil.toast ( R.string.change_skipped ) ; }
com.google.gwtorm.client.ResultSet < com.google.gerrit.reviewdb.AccountGroup > byUUID ( com.google.gerrit.reviewdb.AccountGroup.UUID uuid ) throws com.google.gwtorm.client.OrmException ;
public com.google.gerrit.acceptance.AcceptanceTestRequestScope.Context newContext ( com.google.gwtorm.server.SchemaFactory < com.google.gerrit.reviewdb.server.ReviewDb > sf , com.google.gerrit.acceptance.SshSession s , com.google.gerrit.server.CurrentUser user ) { return new com.google.gerrit.acceptance.AcceptanceTestRequestScope.Context ( sf , s , user , com.google.gerrit.common.TimeUtil.nowMs ( ) ) ; }
public void setUp ( ) throws java.lang.Exception { testEnv.getInjector ( ) . injectMembers ( this ) ; db = testEnv.getDb ( ) ; com.google.common.truth.TruthJUnit.assume ( ) . that ( ( ( db ) instanceof com.google.gwtorm.jdbc.JdbcSchema ) ) . isTrue ( ) ; }
public void confirmInvalidToken_UnprocessableEntity ( ) throws java.lang.Exception { com.google.gerrit.server.config.ConfirmEmail.Input in = new com.google.gerrit.server.config.ConfirmEmail.Input ( ) ; in.token = "invalidToken" ; adminRestSession.put ( "/config/server/email.confirm" , in ) . assertUnprocessableEntity ( ) ; }
private com.google.gerrit.server.git.strategy.SubmitStrategy createStrategy ( com.google.gerrit.extensions.client.SubmitType submitType , org.eclipse.jgit.lib.BatchRefUpdate branchUpdate ) throws com.google.gerrit.server.git.MergeException , com.google.gerrit.server.project.NoSuchProjectException { return submitStrategyFactory.create ( submitType , db , repo , rw , inserter , canMergeFlag , branchUpdate , getAlreadyAccepted ( branchTip ) , destBranch ) ; }
protected abstract java.util.List < com.google.gerrit.server.git.strategy.SubmitStrategyOp > buildOps ( java.util.Collection < com.google.gerrit.server.git.CodeReviewCommit > toMerge ) throws com.google.gerrit.server.git.IntegrationException ;
void removeStates ( ) { stateMap.clear ( ) ; }
private com.google.gerrit.server.IdentifiedUser addUser ( java.lang.String name ) throws java.lang.Exception { com.google.gerrit.server.account.AuthRequest req = com.google.gerrit.server.account.AuthRequest.forUser ( name ) ; com.google.gerrit.reviewdb.client.Account.Id id = accountManager.authenticate ( req ) . getAccountId ( ) ; return userFactory.create ( com.google.inject.util.Providers.of ( db ) , id ) ; }
public com.google.gerrit.reviewdb.client.Change getChange ( ) { com.google.gerrit.reviewdb.client.Change c = ctl.getChange ( ) ; com.google.common.base.Preconditions.checkNotNull ( c ) ; return c ; }
private boolean canEditAssignee ( ) { return ( ( ( isOwner ( ) ) || ( getProjectControl ( ) . isOwner ( ) ) ) || ( refControl.canEditAssignee ( ) ) ) || ( isAssignee ( ) ) ; }
public static void unregisterAll ( ) { for ( com.google.gitiles.ArchiveFormat fmt : com.google.gitiles.ArchiveFormat.values ( ) ) { org.eclipse.jgit.api.ArchiveCommand.unregisterFormat ( fmt.getRegisteredName ( ) ) ; } }
int getCookieAge ( final com.google.gerrit.httpd.WebSessionManager.Val val ) { if ( val.isPersistentCookie ( ) ) { return ( ( int ) ( java.util.concurrent.TimeUnit.MILLISECONDS.toSeconds ( sessionMaxAgeMillis ) ) ) ; } else { return - 1 ; } }
public void onSuccess ( ) { com.google.gerrit.client.Gerrit.display ( token , new com.google.gerrit.client.diff.Unified ( base , com.google.gerrit.client.DiffObject.patchSet ( id.getParentKey ( ) ) , id.get ( ) , side , line ) ) ; }
public com.google.gerrit.server.change.Description getDescription ( com.google.gerrit.server.change.ChangeResource rsrc ) { return new com.google.gerrit.extensions.webui.UiAction.Description ( ) . setLabel ( "Unignore" ) . setTitle ( "Unignore the change" ) . setVisible ( isIgnored ( rsrc ) ) ; }
public void deleteWatchedProjects ( java.util.List < com.google.gerrit.extensions.client.ProjectWatchInfo > in ) throws com.google.gerrit.extensions.restapi.RestApiException { throw new com.google.gerrit.extensions.restapi.NotImplementedException ( ) ; }
public void run ( ) { switch ( getIntraLineStatus ( ) ) { case OFF : case OK : toggleShowIntraline ( ) ; break ; case FAILURE : case TIMEOUT : default : break ; } }
public void currentAndInvalid ( ) { assertIllegalArgument ( ( ( com.google.gerrit.testing.IndexVersions.CURRENT ) + ",foo" ) , "Invalid value for test: foo" ) ; }
public com.google.common.util.concurrent.ListenableFuture < java.util.List < com.google.gerrit.reviewdb.StarredChange > > byAccount ( com.google.gerrit.reviewdb.Account.Id id ) { return com.google.common.util.concurrent.Futures.compose ( byAccountId.get ( id ) , com.google.gerrit.server.StarredChangesCacheImpl.unpack ) ; }
private com.google.gerrit.server.permissions.ProjectControl user ( com.google.gerrit.server.git.ProjectConfig local , com.google.gerrit.reviewdb.client.AccountGroup ... memberOf ) { return user ( local , null , memberOf ) ; }
public abstract < T extends java.lang.Enum < ? > , A extends java.util.EnumSet < ? extends T > > T readEnum ( T def , A options , java.lang.String fmt , java.lang.Object ... args ) ;
public void doChangeRestoredHook ( com.google.gerrit.reviewdb.client.Change change , com.google.gerrit.reviewdb.client.Account account , java.lang.String reason , com.google.gerrit.reviewdb.server.ReviewDb db ) { }
com.google.gerrit.server.notedb.ChangeUpdate create ( com.google.gerrit.server.notedb.ChangeNotes notes , com.google.gerrit.server.CurrentUser user ) ;
public void getTask_NotFound ( ) throws java.lang.Exception { userRestSession.get ( ( "/config/server/tasks/" + ( getLogFileCompressorTaskId ( ) ) ) ) . assertNotFound ( ) ; }
public void commentOnReviewableChangeByOtherCcingSelf ( ) throws java.lang.Exception { com.google.gerrit.acceptance.TestAccount other = accountCreator.create ( "other" , "other@example.com" , "other" ) ; com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableChange ( com.google.gerrit.server.account.WatchConfig.NotifyType.ALL_COMMENTS ) ; review ( other , sc.changeId , com.google.gerrit.extensions.client.GeneralPreferencesInfo.EmailStrategy.CC_ON_OWN_COMMENTS ) ; assertThat ( sender ) . sent ( "comment" , sc ) . to ( sc.owner ) . cc ( sc.reviewer , sc.ccer , other ) . cc ( sc.reviewerByEmail , sc.ccerByEmail ) . bcc ( sc.starrer ) . bcc ( com.google.gerrit.server.account.WatchConfig.NotifyType.ALL_COMMENTS ) ; }
public void resetToDefaults ( ) { maximumPageSize = com.google.gerrit.reviewdb.AccountGeneralPreferences.DEFAULT_PAGESIZE ; showSiteHeader = true ; useFlashClipboard = true ; copySelfOnEmail = false ; displayPatchSetsInReverseOrder = false ; downloadUrl = null ; downloadCommand = null ; dateFormat = null ; timeFormat = null ; }
public void updateRepo ( com.google.gerrit.server.git.BatchUpdate.RepoContext ctx ) { toMerge.setStatusCode ( CommitMergeStatus.CANNOT_CHERRY_PICK_ROOT ) ; }
protected com.google.gerrit.server.account.AccountState fromDocument ( org.apache.lucene.document.Document doc ) { com.google.gerrit.reviewdb.client.Account.Id id = new com.google.gerrit.reviewdb.client.Account.Id ( doc.getField ( com.google.gerrit.server.index.account.AccountField.ID.getName ( ) ) . numericValue ( ) . intValue ( ) ) ; return accountCache.get ( ) . getEvenIfMissing ( id ) ; }
public void testToHeaderString_Email2 ( ) { com.google.common.truth.Truth.assertThat ( com.google.gerrit.server.mail.AddressTest.format ( null , "a,b@a" ) ) . isEqualTo ( "<a,b@a>" ) ; }
public void visit ( org.commonmark.node.HtmlBlock node ) { }
void start ( ) { if ( ( request.getQuery ( ) ) == null ) { request.setQuery ( "" ) ; } oracle.requestSuggestions ( request , this ) ; }
public static java.lang.String toPatch ( com.google.gerrit.client.DiffObject diffBase , com.google.gerrit.reviewdb.client.PatchSet.Id revision , java.lang.String fileName , com.google.gerrit.client.diff.DisplaySide side , int line ) { return com.google.gerrit.client.Dispatcher.toPatch ( "" , diffBase , revision , fileName , side , line ) ; }
private java.lang.String encoding ( javax.servlet.http.HttpServletRequest req ) { return com.google.common.base.MoreObjects.firstNonNull ( req.getCharacterEncoding ( ) , "UTF-8" ) ; }
public com.google.gerrit.reviewdb.client.Change abandon ( com.google.gerrit.server.update.BatchUpdate.Factory updateFactory , com.google.gerrit.server.project.ChangeControl control ) throws com.google.gerrit.extensions.restapi.RestApiException , com.google.gerrit.server.update.UpdateException { return abandon ( updateFactory , control , "" , defaultNotify ( control ) , com.google.common.collect.ImmutableListMultimap.of ( ) ) ; }
java.lang.String get ( final java.lang.String attName ) throws javax.naming.NamingException { return java.lang.String.valueOf ( atts.get ( attName ) . get ( 0 ) ) ; }
protected java.io.Writer newWriter ( javax.servlet.http.HttpServletResponse res ) throws java.io.IOException { return com.google.gitiles.BaseServlet.newWriter ( res.getOutputStream ( ) , res ) ; }
private static java.nio.file.NoSuchFileException badSourceRoot ( java.net.URI u ) { return new java.nio.file.NoSuchFileException ( ( "Cannot find source root from " + u ) ) ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { if ( ! ( discovering ) ) { providerId.setText ( identUrl ) ; form.submit ( ) ; } }
public void onBlur ( com.google.gwt.event.dom.client.BlurEvent event ) { if ( "" . equals ( irevTxtBox.getText ( ) ) ) { irevTxtBox.setText ( Util.C.defaultRevisionSpec ( ) ) ; irevTxtBox.addStyleName ( "gerrit-InputFieldTypeHint" ) ; } }
public void includeNonExistingGroup ( ) throws java.lang.Exception { java.lang.String gx = createGroup ( "gx" ) ; exception.expect ( com.google.gerrit.extensions.restapi.UnprocessableEntityException.class ) ; gApi.groups ( ) . id ( gx ) . addGroups ( "non-existing" ) ; }
com.ericsson.gerrit.plugins.multimaster.HttpResponseHandler.HttpResult post ( java.lang.String endpoint ) throws java.io.IOException { return httpClient.execute ( new org.apache.http.client.methods.HttpPost ( ( ( url ) + endpoint ) ) , new com.ericsson.gerrit.plugins.multimaster.HttpResponseHandler ( ) ) ; }
public boolean updateTeamModels ( java.util.Collection < com.gitblit.models.TeamModel > arg0 ) { return false ; }
public void index ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.Change change ) throws java.io.IOException { index ( changeDataFactory.create ( db , change ) ) ; }
public com.googlesource.gerrit.plugins.its.phabricator.conduit.results.ManiphestEdit maniphestEdit ( int taskId , java.lang.String comment ) throws com.googlesource.gerrit.plugins.its.phabricator.conduit.ConduitException { return maniphestEdit ( taskId , comment , null ) ; }
public static void putMessage ( com.google.gerrit.reviewdb.client.PatchSet.Id id , java.lang.String m , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.VoidResult > r ) { com.google.gerrit.client.changes.ChangeFileApi.putMessage ( id.getParentKey ( ) , m , r ) ; }
void applyDraft ( com.google.gerrit.server.notedb.ChangeDraftUpdate draftUpdate ) throws com.google.gwtorm.server.OrmException { if ( ( c.revId ) == null ) { com.google.gerrit.server.CommentsUtil.setCommentRevId ( c , cache , change , ps ) ; } draftUpdate.putComment ( c ) ; }
void onCancel ( com.google.gwt.event.dom.client.ClickEvent e ) { message.setText ( "" ) ; hide ( ) ; }
public void parseReviewer ( ) throws java.lang.Exception { assertParseSucceeds ( ( "Update change\n" + ( ( ( ( ( ( "\n" + "Branch: refs/heads/master\n" ) + "Change-id: I577fb248e474018276351785930358ec0450e9f7\n" ) + "Patch-Set: 1\n" ) + "Reviewer: Change Owner <1@gerrit>\n" ) + "CC: Other Account <2@gerrit>\n" ) + "Subject: This is a test change\n" ) ) ) ; assertParseFails ( ( "Update change\n" + ( ( "\n" + "Patch-Set: 1\n" ) + "Reviewer: 1@gerrit\n" ) ) ) ; }
public static org.eclipse.jgit.lib.Config newDefaultConfig ( ) { org.eclipse.jgit.lib.Config cfg = new org.eclipse.jgit.lib.Config ( ) ; com.google.gerrit.testing.InMemoryModule.setDefaults ( cfg ) ; return cfg ; }
public com.google.gerrit.server.plugins.Plugin.ApiType getApiType ( ) { return apiType ; }
public void onKeyPress ( final com.google.gwt.event.dom.client.KeyPressEvent event ) { int index = ( indexOf ( activePatchSetId ) ) - 1 ; if ( 0 <= index ) { activate ( patchSets.get ( index ) . getId ( ) ) ; } }
public void revisionTest ( ) throws java.lang.Exception { createChange ( ) ; com.google.gerrit.acceptance.RestResponse response = adminRestSession.post ( "/changes/1/revisions/1/cookbook~hello-revision" ) ; com.google.common.truth.Truth.assertThat ( response.getEntityContent ( ) ) . contains ( "Hello admin from change 1, patch set 1!" ) ; }
com.google.gerrit.httpd.rpc.patch.PatchScriptFactory create ( com.google.gerrit.reviewdb.Patch.Key patchKey , @ com.google.inject.assistedinject.Assisted ( value = "patchSetA" ) com.google.gerrit.reviewdb.PatchSet.Id patchSetA , @ com.google.inject.assistedinject.Assisted ( value = "patchSetB" ) com.google.gerrit.reviewdb.PatchSet.Id patchSetB , com.google.gerrit.reviewdb.AccountDiffPreference diffPrefs ) ;
public void publish ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { publish.apply ( revision , new com.google.gerrit.server.change.PublishDraftPatchSet.Input ( ) ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot publish draft patch set" , e ) ; } }
public void onSuccess ( java.lang.Boolean result ) { if ( result ) { link ( AdminConstants.I.groupTabAuditLog ( ) , auditLogTabToken , com.google.gerrit.reviewdb.client.AccountGroup.isInternalGroup ( group.getGroupUUID ( ) ) ) ; setToken ( token ) ; } display ( group , result ) ; }
public void apply ( org.eclipse.jgit.dircache.DirCacheEntry ent ) { if ( ( ent.getRawMode ( ) ) == 0 ) { ent.setFileMode ( FileMode.REGULAR_FILE ) ; } ent.setObjectId ( content ) ; }
private static com.google.gerrit.client.rpc.RestApi call ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , java.lang.String action ) { return com.google.gerrit.client.changes.ChangeApi.change ( project , id ) . view ( action ) ; }
public void projectDetail ( final com.google.gerrit.reviewdb.client.Project.NameKey projectName , final com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.ProjectDetail > callback ) { projectDetailFactory.create ( projectName ) . to ( callback ) ; }
public Account.Id apply ( java.lang.String refPart ) { return Account.Id.parse ( refPart ) ; }
public java.util.SortedMap < java.lang.String , com.google.gerrit.extensions.common.ProjectInfo > getAsMap ( ) throws com.google.gerrit.extensions.restapi.RestApiException { return list ( this ) ; }
private short getListBox ( final com.google.gwt.user.client.ui.ListBox f , final short defaultValue ) { final int idx = f.getSelectedIndex ( ) ; if ( 0 <= idx ) { return java.lang.Short.parseShort ( f.getValue ( idx ) ) ; } return defaultValue ; }
public void flushCache_NotFound ( ) throws java.lang.Exception { adminRestSession.post ( "/config/server/caches/nonExisting/flush" ) . assertNotFound ( ) ; }
public void deleteBranchByAdmin ( ) throws java.lang.Exception { assertDeleteSucceeds ( testBranch ) ; }
private native void init ( com.google.gwt.core.client.JsArrayString add , com.google.gwt.core.client.JsArrayString remove ) ;
private static boolean matchExact ( java.lang.String want , java.lang.String token ) { return token.equals ( want ) ; }
public java.lang.String apply ( com.google.gerrit.extensions.common.ProblemInfo in ) { com.google.common.base.Preconditions.checkArgument ( ( ( in.status ) == null ) , ( "Status is not null: " + ( in.message ) ) ) ; return in.message ; }
public com.google.gerrit.server.CurrentUser getUser ( ) { return getControl ( ) . getUser ( ) ; }
public final java.util.List < java.lang.String > commandNames ( ) { return _commands ( ) . sortedKeys ( ) ; }
public void testCreateLinkForWebUiDifferentUrlAndText ( ) { mockUnconnectableStoryboard ( ) ; replayMocks ( ) ; com.googlesource.gerrit.plugins.its.storyboard.StoryboardItsFacade itsFacade = createStoryboardItsFacade ( ) ; java.lang.String actual = itsFacade.createLinkForWebui ( "Test-Url" , "Test-Text" ) ; assertEquals ( "[Test-Text](Test-Url)" , actual ) ; }
public static com.google.gerrit.server.index.IndexConfig create ( int maxLimit ) { if ( maxLimit == 0 ) { maxLimit = java.lang.Integer.MAX_VALUE ; } else { com.google.common.base.Preconditions.checkArgument ( ( maxLimit > 0 ) , "maxLimit must be positive: %s" , maxLimit ) ; } return new com.google.gerrit.server.index.AutoValue_IndexConfig ( maxLimit ) ; }
public boolean isReadable ( ) { return ( user.isInternalUser ( ) ) || ( canPerformOnAnyRef ( Permission.READ ) ) ; }
public void readCommentLinks ( ) throws java.lang.Exception { org.eclipse.jgit.revwalk.RevCommit rev = tr.commit ( ) . add ( "project.config" , ( "[commentlink \"bugzilla\"]\n" + ( "\tmatch = \"(bug\\\\s+#?)(\\\\d+)\"\n" + "\tlink = http://bugs.example.com/show_bug.cgi?id=$2" ) ) ) . create ( ) ; com.google.gerrit.server.git.ProjectConfig cfg = read ( rev ) ; com.google.common.truth.Truth.assertThat ( cfg.getCommentLinkSections ( ) ) . containsExactly ( new com.google.gerrit.server.project.CommentLinkInfoImpl ( "bugzilla" , "(bug\\s+#?)(\\d+)" , "http://bugs.example.com/show_bug.cgi?id=$2" , null , null ) ) ; }
private com.google.gerrit.server.project.GroupList readGroupList ( ) throws java.io.IOException { return com.google.gerrit.server.project.GroupList.parse ( new com.google.gerrit.reviewdb.client.Project.NameKey ( project ) , readUTF8 ( GroupList.FILE_NAME ) , com.google.gerrit.server.project.GroupList.createLoggerSink ( GroupList.FILE_NAME , com.google.gerrit.pgm.init.api.AllProjectsConfig.log ) ) ; }
public java.util.List < com.google.gerrit.server.account.GetSshKeys.SshKeyInfo > apply ( com.googlesource.gerrit.plugins.serviceuser.ServiceUserResource rsrc ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gwtorm.server.OrmException { return getSshKeys.get ( ) . apply ( rsrc.getUser ( ) ) ; }
public static void fetch ( org.eclipse.jgit.junit.TestRepository < ? > testRepo , java.lang.String spec ) throws org.eclipse.jgit.api.errors.GitAPIException { org.eclipse.jgit.api.FetchCommand fetch = testRepo.git ( ) . fetch ( ) ; fetch.setRefSpecs ( new org.eclipse.jgit.transport.RefSpec ( spec ) ) ; fetch.call ( ) ; }
private PushOneCommit.Result createDraft ( ) throws java.lang.Exception { com.google.gerrit.acceptance.PushOneCommit push = pushFactory.create ( db , admin.getIdent ( ) , testRepo ) ; return push.to ( "refs/drafts/master" ) ; }
com.google.gerrit.extensions.restapi.Response < com.google.gerrit.extensions.common.ChangeInfo > apply ( com.google.gerrit.server.change.RevisionResource rsrc ) throws com.google.gwtorm.server.OrmException { return cache ( json.format ( rsrc ) ) ; }
public void onSuccess ( final com.google.gerrit.client.data.GerritConfig result ) { com.google.gerrit.client.Gerrit.config = result ; onModuleLoad2 ( ) ; }
public void finish ( ) { finishActiveTag ( ) ; }
public void postEvent ( com.google.gerrit.reviewdb.client.Branch.NameKey branchName , com.google.gerrit.server.events.RefEvent event ) { fireEvent ( branchName , event ) ; }
public static com.google.gerrit.client.reviewdb.Change.Id parse ( final java.lang.String str ) { final com.google.gerrit.client.reviewdb.Change.Id r = new com.google.gerrit.client.reviewdb.Change.Id ( ) ; r.fromString ( str ) ; return r ; }
protected void formatChange ( ) throws com.google.gerrit.common.errors.EmailException { appendText ( textTemplate ( "ReplacePatchSet" ) ) ; if ( useHtml ( ) ) { appendHtml ( soyHtmlTemplate ( "ReplacePatchSetHtml" ) ) ; } }
public void visit ( org.commonmark.node.Code node ) { html.open ( "code" ) . attribute ( "class" , "code" ) . appendAndEscape ( node.getLiteral ( ) ) . close ( "code" ) ; }
public void postEvent ( com.google.gerrit.reviewdb.client.Change change , com.google.gerrit.server.events.ChangeEvent event , com.google.gerrit.reviewdb.server.ReviewDb db ) throws com.google.gwtorm.server.OrmException { fireEvent ( change , event , db ) ; }
protected void postDisplay ( ) { patchSetsBlock.setRegisterKeys ( true ) ; }
public boolean canListen ( org.apache.sshd.common.util.net.SshdSocketAddress address , org.apache.sshd.common.session.Session session ) { return false ; }
java.lang.String apply ( java.lang.String a ) { int at = a.indexOf ( '@' ) ; return at < 0 ? a : a.substring ( 0 , at ) ; }
public boolean isVisible ( ) { return ( getProjectControl ( ) . visibleForReplication ( ) ) || ( canPerform ( com.google.gerrit.reviewdb.ApprovalCategory.READ , ( ( short ) ( 1 ) ) ) ) ; }
public void start ( ) { scheduledCleanupTask = queue.getDefaultQueue ( ) . scheduleAtFixedRate ( cleaner , com.googlesource.gerrit.plugins.websession.flatfile.FlatFileWebSessionCacheCleaner.CleanerLifecycle.INITIAL_DELAY_MS , cleanupInterval , java.util.concurrent.TimeUnit.MILLISECONDS ) ; }
public static com.google.gerrit.client.UrlAliasMatcher getUrlAliasMatcher ( ) { return com.google.gerrit.client.Gerrit.urlAliasMatcher ; }
static synchronized void notifyStarting ( final com.google.gerrit.git.PushOp op ) { com.google.gerrit.git.PushQueue.pending.remove ( op.getURI ( ) ) ; }
private java.lang.String urlEdit2 ( ) { return ( "/changes/" + ( change2.getChangeId ( ) ) ) + "/edit/" ; }
public java.lang.Boolean call ( ) throws com.google.gerrit.server.project.NoSuchProjectException { return shouldReplicate ( controlFor ( project ) ) ; }
public java.lang.String apply ( com.google.gerrit.server.git.validators.CommitValidationMessage input ) { java.lang.String pre = ( input.isError ( ) ) ? "ERROR: " : "MSG: " ; return pre + ( input.getMessage ( ) ) ; }
public void fire ( com.google.gerrit.reviewdb.client.Project.NameKey project , org.eclipse.jgit.lib.RefUpdate refUpdate , org.eclipse.jgit.transport.ReceiveCommand.Type type , com.google.gerrit.reviewdb.client.Account updater ) { fire ( project , refUpdate.getName ( ) , refUpdate.getOldObjectId ( ) , refUpdate.getNewObjectId ( ) , type , util.accountInfo ( updater ) ) ; }
public void restoreFile ( org.eclipse.jgit.lib.Repository repository , com.google.gerrit.server.edit.ChangeEdit edit , java.lang.String file ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.server.project.InvalidChangeOperationException , java.io.IOException { org.eclipse.jgit.revwalk.RevCommit editCommit = edit.getEditCommit ( ) ; modifyTree ( repository , edit , new com.google.gerrit.server.edit.tree.RestoreFileModification ( editCommit , file ) ) ; }
public static final com.google.gwtjsonrpc.server.ActiveCall getCurrentCall ( ) { return com.google.gwtjsonrpc.server.JsonServlet.perThreadCall.get ( ) ; }
public static com.google.gerrit.server.diff.PatchListKey againstParentNum ( int parentNum , org.eclipse.jgit.lib.AnyObjectId newId , com.google.gerrit.extensions.client.DiffPreferencesInfo.Whitespace ws ) { return new com.google.gerrit.server.diff.PatchListKey ( parentNum , newId , ws , com.google.gerrit.server.diff.PatchListKey.Algorithm.OPTIMIZED_DIFF ) ; }
public static boolean isSignedIn ( ) { return ( com.google.gerrit.client.Gerrit.myAccount ) != null ; }
void removeAll ( ) { if ( ( skipBars ) != null ) { for ( com.google.gerrit.client.diff.SkipBar bar : skipBars ) { bar.expandAll ( ) ; } skipBars = null ; line0 = null ; } }
protected void updateRepoImpl ( com.google.gerrit.server.git.BatchUpdate.RepoContext ctx ) throws com.google.gerrit.server.git.IntegrationException { com.google.gerrit.server.git.CodeReviewCommit newCommit = amendGitlink ( toMerge ) ; args.mergeTip.moveTipTo ( newCommit , toMerge ) ; newCommit.setStatusCode ( CommitMergeStatus.CLEAN_MERGE ) ; }
protected void onLoad ( ) { super . onLoad ( ) ; if ( ( signedInListener ) != null ) { com.google.gerrit.client.Gerrit.addSignOutHandler ( signedInListener ) ; } }
private com.google.gerrit.reviewdb.server.ReviewDb getUnwrappedDb ( ) { com.google.gerrit.reviewdb.server.ReviewDb db = dbProvider.get ( ) ; return com.google.gerrit.reviewdb.server.ReviewDbUtil.unwrapDb ( db ) ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { b.setEnabled ( false ) ; Util.MANAGE_SVC.publish ( patchSet.getId ( ) , new com.google.gerrit.client.changes.ChangeDetailCache.GerritWidgetCallback ( b ) ) ; }
protected abstract com.google.inject.Injector createInjector ( com.google.gerrit.lifecycle.LifecycleManager lifecycle ) ;
public com.googlecode.prolog_cafe.lang.PrologMachineCopy loadMachine ( java.lang.String name , java.io.InputStream in ) throws com.googlecode.prolog_cafe.exceptions.CompileException { com.googlecode.prolog_cafe.lang.PrologMachineCopy pmc = consultRules ( name , new java.io.InputStreamReader ( in ) ) ; if ( pmc == null ) { throw new com.googlecode.prolog_cafe.exceptions.CompileException ( ( "Cannot consult rules from the stream " + name ) ) ; } return pmc ; }
public boolean accept ( java.nio.file.Path entry ) throws java.io.IOException { return ( entry.getFileName ( ) . toString ( ) . endsWith ( ".jar" ) ) && ( java.nio.file.Files.isRegularFile ( entry ) ) ; }
com.google.gerrit.reviewdb.client.Change getChange ( ) { return ins.getChange ( ) ; }
boolean wouldPushRef ( final java.lang.String ref ) { for ( final org.spearce.jgit.transport.RefSpec s : remote.getPushRefSpecs ( ) ) { if ( s.matchSource ( ref ) ) { return true ; } } return false ; }
public com.google.gerrit.reviewdb.client.Change getChange ( ) { return rev.getChange ( ) ; }
public int getCardinality ( ) { return ( source ) != null ? source.getCardinality ( ) : limit ( ) ; }
public void backupTimestampRefNameForUnsupportedNamespace ( ) throws java.lang.Exception { java.lang.String ref = "refs/changes/45/12345/1" ; com.google.common.truth.Truth.assertThat ( com.googlesource.gerrit.plugins.refprotection.BackupRef.getTimestampBranch ( ref ) ) . isEqualTo ( ref ) ; }
protected static com.google.gerrit.index.query.QueryParseException error ( java.lang.String msg ) { return new com.google.gerrit.index.query.QueryParseException ( msg ) ; }
private static boolean isRewritePossible ( com.google.gerrit.index.query.Predicate < com.google.gerrit.server.query.change.ChangeData > p ) { return ( ( p.getChildCount ( ) ) > 0 ) && ( ( ( p instanceof com.google.gerrit.index.query.AndPredicate ) || ( p instanceof com.google.gerrit.index.query.OrPredicate ) ) || ( p instanceof com.google.gerrit.index.query.NotPredicate ) ) ; }
protected void init ( ) throws com.google.gerrit.common.errors.EmailException { super . init ( ) ; ccAllApprovals ( ) ; bccStarredBy ( ) ; includeWatchers ( NotifyType.ABANDONED_CHANGES ) ; includeWatchers ( NotifyType.ALL_COMMENTS ) ; }
public void onFailure ( java.lang.Throwable caught ) { enableButtons ( true ) ; super . onFailure ( caught ) ; }
final void setSubmitType ( com.google.gerrit.extensions.client.SubmitType t ) { setSubmitTypeRaw ( t.name ( ) ) ; }
com.google.gerrit.server.change.EmailReviewComments create ( com.google.gerrit.server.change.PostReview.NotifyHandling notify , com.google.gerrit.reviewdb.client.Change change , com.google.gerrit.reviewdb.client.PatchSet patchSet , com.google.gerrit.reviewdb.client.Account.Id authorId , com.google.gerrit.reviewdb.client.ChangeMessage message , java.util.List < com.google.gerrit.reviewdb.client.PatchLineComment > comments ) ;
public int hashCode ( ) { return ( com.ericsson.gerrit.plugins.eventslog.sql.SQLEntry.SEED ) + ( id ) ; }
public void copySettingsFrom ( final com.google.gerrit.reviewdb.Project update ) { description = update.description ; useContributorAgreements = update.useContributorAgreements ; useSignedOffBy = update.useSignedOffBy ; useContentMerge = update.useContentMerge ; requireChangeID = update.requireChangeID ; submitType = update.submitType ; state = update.state ; }
private < S extends com.google.gwt.event.shared.EventHandler > void fireEvent ( com.google.gwtjsonrpc.client.BaseRpcEvent < S > e ) { e.call = this ; com.google.gwtjsonrpc.client.JsonUtil.fireEvent ( e ) ; }
public java.lang.String toString ( ) { return ( ( ( "Range[" + ( base ) ) + "," ) + ( end ( ) ) ) + ")" ; }
public java.util.List < com.google.gerrit.server.query.change.ChangeData > byCommit ( org.eclipse.jgit.lib.ObjectId id ) throws com.google.gwtorm.server.OrmException { return query ( com.google.gerrit.server.query.change.InternalChangeQuery.commit ( com.google.gerrit.server.query.change.InternalChangeQuery.schema ( indexes ) , id.name ( ) ) ) ; }
public Response.Action getUploadAction ( org.eclipse.jgit.lfs.lib.AnyLongObjectId id , long size ) { org.eclipse.jgit.lfs.server.Response.Action action = super . getUploadAction ( id , size ) ; action.header = java.util.Collections.singletonMap ( org.eclipse.jgit.util.HttpSupport.HDR_AUTHORIZATION , authorizer.generateToken ( com.googlesource.gerrit.plugins.lfs.fs.LocalLargeFileRepository.UPLOAD , id , expirationSeconds ) ) ; return action ; }
public void preDisplay ( final com.google.gwt.core.client.JsArray < com.google.gerrit.client.projects.BranchInfo > result ) { display ( com.google.gerrit.client.rpc.Natives.asList ( result ) ) ; updateForm ( ) ; }
private org.spearce.jgit.lib.PersonIdent toPersonIdent ( final com.google.gerrit.client.reviewdb.PatchSetApproval audit ) { if ( audit == null ) { return null ; } return identifiedUserFactory.create ( audit.getAccountId ( ) ) . newPersonIdent ( audit.getGranted ( ) , myIdent.getTimeZone ( ) ) ; }
public void remove ( ) { descriptions.remove ( name ) ; registry.remove ( name ) ; }
public void markReady ( boolean ready ) throws java.io.IOException ;
public boolean canUpdate ( ) { if ( ( GitRepositoryManager.REF_CONFIG.equals ( refName ) ) && ( ! ( getProjectControl ( ) . isOwner ( ) ) ) ) { return false ; } return canPerform ( Permission.PUSH ) ; }
public static java.lang.String toChangeQuery ( java.lang.String query ) { return ( com.google.gerrit.common.PageLinks.QUERY ) + ( com.google.gwtorm.client.KeyUtil.encode ( query ) ) ; }
public void close ( ) { try { openIndex.close ( ) ; } finally { closedIndex.close ( ) ; } }
public void handle ( net.codemirror.lib.CodeMirror instance , int line , java.lang.String gutter , com.google.gwt.event.dom.client.MouseDownEvent clickEvent ) ;
protected void onInsertComment ( final com.google.gerrit.client.patches.PatchLine line ) { final int row = getCurrentRow ( ) ; createCommentEditor ( ( row + 1 ) , com.google.gerrit.client.patches.SideBySideTable.B , line.getLineB ( ) , ( ( short ) ( 1 ) ) ) ; }
public java.lang.Void call ( ) { runPushOperation ( ) ; return null ; }
public void onBrowserEvent ( final com.google.gwt.user.client.Event event ) { if ( ( ( com.google.gwt.user.client.DOM.eventGetType ( event ) ) == ( com.google.gwt.user.client.Event.ONCLICK ) ) && ( com.google.gerrit.client.ui.LinkMenuItem.impl.handleAsClick ( event ) ) ) { onClick ( event ) ; } }
public com.google.gerrit.reviewdb.client.Change getChange ( ) { com.google.gerrit.reviewdb.client.Change c = ctl.getChange ( ) ; com.google.common.base.Preconditions.checkNotNull ( c ) ; return c ; }
protected void configure ( ) { bind ( com.ericsson.gerrit.plugins.highavailability.Configuration.class ) . in ( Scopes.SINGLETON ) ; install ( new com.ericsson.gerrit.plugins.highavailability.forwarder.rest.RestEventForwarderModule ( ) ) ; install ( new com.ericsson.gerrit.plugins.highavailability.event.EventModule ( ) ) ; install ( new com.ericsson.gerrit.plugins.highavailability.index.IndexModule ( ) ) ; }
protected void configureServlets ( ) { if ( enabled ) { filter ( "/*" ) . through ( com.google.gerrit.httpd.GetUserFilter.class ) ; } }
static void unsetForwardedEvent ( ) { com.ericsson.gerrit.plugins.multimaster.Context.FORWARDED_EVENT.remove ( ) ; }
private static java.lang.Iterable < java.nio.file.Path > filterDisabledPlugins ( java.util.Collection < java.nio.file.Path > paths ) { return com.google.common.collect.Iterables.filter ( paths , ( p ) -> ! ( p.getFileName ( ) . toString ( ) . endsWith ( ".disabled" ) ) ) ; }
public void setNotify ( final com.google.gerrit.reviewdb.AccountProjectWatch.NotifyType type , final boolean v ) { switch ( type ) { case NEW_CHANGES : notifyNewChanges = v ; break ; case ALL_COMMENTS : notifyAllComments = v ; break ; case SUBMITTED_CHANGES : notifySubmittedChanges = v ; break ; } }
public com.google.gerrit.server.CurrentUser getCurrentUser ( ) { return context.getCurrentUser ( ) ; }
public static net.codemirror.lib.LineCharacter create ( int line ) { return net.codemirror.lib.LineCharacter.createImpl ( line , 0 ) ; }
public void onSuccess ( com.google.gwt.core.client.JsArray < com.google.gerrit.client.account.ProjectWatchInfo > watchedProjects ) { addNew.setEnabled ( true ) ; nameBox.setEnabled ( true ) ; filterTxt.setEnabled ( true ) ; nameBox.setText ( "" ) ; watchesTab.insertWatch ( projectWatchInfo ) ; }
public void addOtherUsersGpgKey_Conflict ( ) throws java.lang.Exception { addExternalIdEmail ( admin , "test5@example.com" ) ; com.google.gerrit.reviewdb.client.AccountExternalId extId = new com.google.gerrit.reviewdb.client.AccountExternalId ( user.getId ( ) , new com.google.gerrit.reviewdb.client.AccountExternalId.Key ( "foo:myId" ) ) ; db.accountExternalIds ( ) . insert ( java.util.Collections.singleton ( extId ) ) ; com.google.gerrit.server.git.gpg.TestKey key = com.google.gerrit.server.git.gpg.TestKey.key5 ( ) ; java.lang.String id = com.google.gerrit.server.git.gpg.PublicKeyStore.keyIdToString ( key.getKeyId ( ) ) ; gApi.accounts ( ) . self ( ) . putGpgKeys ( com.google.common.collect.ImmutableList.of ( key.getPublicKeyArmored ( ) ) ) . get ( id ) ; setApiUser ( user ) ; exception.expect ( com.google.gerrit.extensions.restapi.ResourceConflictException.class ) ; exception.expectMessage ( "GPG key already associated with another account" ) ; gApi.accounts ( ) . self ( ) . putGpgKeys ( com.google.common.collect.ImmutableList.of ( key.getPublicKeyArmored ( ) ) ) . get ( id ) ; }
public com.google.gerrit.extensions.api.projects.ConfigInfo apply ( com.google.gerrit.server.project.ProjectResource resource ) { return new com.google.gerrit.server.project.ConfigInfoImpl ( serverEnableSignedPush , resource.getControl ( ) , config , pluginConfigEntries , cfgFactory , allProjects , uiActions , views ) ; }
public com.google.gerrit.extensions.api.projects.ConfigInfo apply ( com.google.gerrit.server.project.ProjectResource rsrc , com.google.gerrit.extensions.api.projects.ConfigInput input ) throws com.google.gerrit.extensions.restapi.RestApiException , com.google.gerrit.server.permissions.PermissionBackendException { permissionBackend.currentUser ( ) . project ( rsrc.getNameKey ( ) ) . check ( ProjectPermission.WRITE_CONFIG ) ; return apply ( rsrc.getProjectState ( ) , input ) ; }
void doCommentAddedHook ( com.google.gerrit.reviewdb.client.Change change , com.google.gerrit.reviewdb.client.Account account , com.google.gerrit.reviewdb.client.PatchSet patchSet , java.lang.String comment , java.util.Map < java.lang.String , java.lang.Short > approvals , java.util.Map < java.lang.String , java.lang.Short > oldApprovals , com.google.gerrit.reviewdb.server.ReviewDb db ) throws com.google.gwtorm.server.OrmException ;
public void onKeyPress ( final com.google.gwt.event.dom.client.KeyPressEvent event ) { if ( this . onKeyPress ( event ) ) { event.stopPropagation ( ) ; event.preventDefault ( ) ; } }
public com.google.gerrit.server.change.RebaseChangeOp setValidate ( boolean validate ) { this . validate = validate ; return this ; }
public final void set ( java.lang.String section , java.lang.String subsection , java.lang.String name , java.lang.String value ) { setList ( section , subsection , name , com.google.common.collect.Lists.newArrayList ( value ) ) ; }
private com.cisco.gerrit.plugins.slack.config.ProjectConfig getConfig ( java.lang.String ignore ) throws java.lang.Exception { return getConfig ( ignore , true , true ) ; }
private boolean isVisible ( com.google.gerrit.reviewdb.server.ReviewDb db , @ com.google.gerrit.common.Nullable com.google.gerrit.server.query.change.ChangeData cd ) throws com.google.gwtorm.server.OrmException { if ( ( getChange ( ) . isPrivate ( ) ) && ( ! ( isPrivateVisible ( db , cd ) ) ) ) { return false ; } return refControl.isVisible ( ) ; }
public final native int mark ( ) ;
private com.google.gerrit.extensions.api.changes.DraftInput newDraft ( java.lang.String path , com.google.gerrit.extensions.client.Side side , int line , java.lang.String message ) { com.google.gerrit.extensions.api.changes.DraftInput d = new com.google.gerrit.extensions.api.changes.DraftInput ( ) ; return com.google.gerrit.acceptance.server.change.CommentsIT.populate ( d , path , side , null , line , message ) ; }
protected org.eclipse.jetty.server.HttpConfiguration defaultConfig ( ) { org.eclipse.jetty.server.HttpConfiguration config = new org.eclipse.jetty.server.HttpConfiguration ( ) ; config.setRequestHeaderSize ( 16386 ) ; config.setSendServerVersion ( false ) ; config.setSendDateHeader ( true ) ; return config ; }
public static long getOpenBytes ( ) { return org.eclipse.jgit.internal.storage.file.WindowCache.getInstance ( ) . getOpenBytes ( ) ; }
protected void display ( com.google.gerrit.client.info.AccountInfo account ) { super . display ( account ) ; displayHasContact ( account ) ; addressTxt.setText ( "" ) ; countryTxt.setText ( "" ) ; phoneTxt.setText ( "" ) ; faxTxt.setText ( "" ) ; }
protected void configureServlets ( ) { serveRegex ( "/index/\\d+$" ) . with ( com.ericsson.gerrit.plugins.highavailability.forwarder.rest.IndexRestApiServlet.class ) ; serve ( "/event" ) . with ( com.ericsson.gerrit.plugins.highavailability.forwarder.rest.EventRestApiServlet.class ) ; serve ( "/cache/*" ) . with ( com.ericsson.gerrit.plugins.highavailability.forwarder.rest.CacheRestApiServlet.class ) ; }
public java.util.Map < java.lang.String , com.google.gerrit.extensions.common.GpgKeyInfo > listGpgKeys ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return gpgApiAdapter.listGpgKeys ( account ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot list GPG keys" , e ) ; } }
private com.google.gerrit.server.patch.PatchListKey getKey ( org.eclipse.jgit.lib.ObjectId revisionIdA , org.eclipse.jgit.lib.ObjectId revisionIdB ) { return com.google.gerrit.server.patch.PatchListKey.againstCommit ( revisionIdA , revisionIdB , Whitespace.IGNORE_NONE ) ; }
public void createBranch ( ) throws java.lang.Exception { allow ( Permission.READ , com.google.gerrit.server.group.SystemGroupBackend.ANONYMOUS_USERS , "refs/*" ) ; gApi.projects ( ) . name ( project.get ( ) ) . branch ( "foo" ) . create ( new com.google.gerrit.extensions.api.projects.BranchInput ( ) ) ; }
private void addReviewerByEmailToReviewableChangeInReviewDb ( com.google.gerrit.acceptance.server.mail.AddReviewerSenderIT.Adder adder ) throws java.lang.Exception { com.google.common.truth.TruthJUnit.assume ( ) . that ( notesMigration.readChanges ( ) ) . isFalse ( ) ; java.lang.String email = "addedbyemail@example.com" ; com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableChange ( ) ; addReviewer ( adder , sc.changeId , sc.owner , email ) ; assertThat ( sender ) . notSent ( ) ; }
void renameGroup ( com.google.gerrit.reviewdb.client.AccountGroup.Id groupId , java.lang.String newName , com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.GroupDetail > callback ) ;
public void contextInitialized ( final javax.servlet.ServletContextEvent event ) { super . contextInitialized ( event ) ; init ( ) ; manager.start ( ) ; }
public static java.lang.String toGroup ( com.google.gerrit.reviewdb.client.AccountGroup.Id id , java.lang.String panel ) { return ( ( ( com.google.gerrit.common.PageLinks.ADMIN_GROUPS ) + ( id.toString ( ) ) ) + "," ) + panel ; }
Account.Id getAuthorId ( ) { return ( ( com.google.gerrit.server.IdentifiedUser ) ( getControl ( ) . getUser ( ) ) ) . getAccountId ( ) ; }
private java.nio.file.Path randomTargetPath ( ) { return java.nio.file.Paths.get ( "target" , ( "random-name-" + ( java.util.UUID.randomUUID ( ) . toString ( ) ) ) ) ; }
public T decode ( byte [ ] data , int offset , int length ) { return decode ( com.google.protobuf.CodedInputStream.newInstance ( data , offset , length ) ) ; }
public static boolean isMagicBranch ( java.lang.String refName ) { return ( ( refName.startsWith ( com.google.gerrit.server.util.MagicBranch.NEW_DRAFT_CHANGE ) ) || ( refName.startsWith ( com.google.gerrit.server.util.MagicBranch.NEW_PUBLISH_CHANGE ) ) ) || ( refName.startsWith ( com.google.gerrit.server.util.MagicBranch.NEW_CHANGE ) ) ; }
public void testCreateProjectWithEmptyCommit ( ) throws java.io.IOException { final java.lang.String newProjectName = "newProject" ; com.google.gerrit.server.project.CreateProject.Input in = new com.google.gerrit.server.project.CreateProject.Input ( ) ; in.createEmptyCommit = true ; session.put ( ( "/projects/" + newProjectName ) , in ) ; assertEmptyCommit ( newProjectName , "refs/heads/master" ) ; }
public boolean supportsEmailAddressChanges ( ) { return false ; }
public com.google.gerrit.extensions.restapi.BinaryResult patch ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return getPatch.apply ( revision ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot get patch" , e ) ; } }
void addMessage ( final java.lang.String token ) { message = token.replace ( "_" , " " ) ; }
public synchronized com.google.gerrit.testing.InMemoryRepositoryManager.Repo openRepository ( com.google.gerrit.reviewdb.client.Project.NameKey name ) throws org.eclipse.jgit.errors.RepositoryNotFoundException { return get ( name ) ; }
public final native void intralineDifference ( java.lang.Boolean i ) ;
public < T extends com.google.gwt.core.client.JavaScriptObject > void post ( java.lang.String content , com.google.gerrit.client.rpc.HttpCallback < T > cb ) { sendRaw ( com.google.gwt.http.client.RequestBuilder.POST , content , cb ) ; }
private void render ( com.google.gerrit.client.diff.DiffInfo diff ) { header.setNoDiff ( diff ) ; chunkManager.render ( diff ) ; }
protected org.eclipse.jgit.internal.storage.dfs.InMemoryRepository repo ( ) { return testRepo.getRepository ( ) ; }
void setReplyBox ( com.google.gerrit.client.diff.DraftBox box ) { replyBox = box ; box.setReplyToBox ( this ) ; }
private com.google.gerrit.server.git.strategy.SubmitStrategy createStrategy ( final com.google.gerrit.extensions.common.SubmitType submitType ) throws com.google.gerrit.server.git.MergeException , com.google.gerrit.server.project.NoSuchProjectException { return submitStrategyFactory.create ( submitType , db , repo , rw , inserter , canMergeFlag , getAlreadyAccepted ( branchTip ) , destBranch ) ; }
public int compare ( com.google.gerrit.extensions.common.EmailInfo a , com.google.gerrit.extensions.common.EmailInfo b ) { return a.email.compareTo ( b.email ) ; }
private com.google.gerrit.server.git.strategy.SubmitStrategy createStrategy ( com.google.gerrit.extensions.client.SubmitType submitType ) throws com.google.gerrit.server.git.MergeException , com.google.gerrit.server.project.NoSuchProjectException { return submitStrategyFactory.create ( submitType , db , repo , rw , inserter , canMergeFlag , getAlreadyAccepted ( branchTip ) , destBranch ) ; }
void notifyStarting ( final com.google.gerrit.server.git.PushOp op ) { synchronized ( pending ) { if ( ! ( op.wasCanceled ( ) ) ) { pending.remove ( op.getURI ( ) ) ; } } }
private static void assertExpectedIdsUsed ( java.sql.PreparedStatement statement , int ... ids ) throws java.sql.SQLException { for ( int id : ids ) { org.mockito.Mockito.verify ( statement ) . setInt ( 1 , id ) ; } }
public com.google.gerrit.server.IdentifiedUser parse ( java.lang.String id ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.extensions.restapi.UnprocessableEntityException , com.google.gwtorm.server.OrmException { com.google.gerrit.server.IdentifiedUser user = parseId ( id ) ; if ( user == null ) { throw new com.google.gerrit.extensions.restapi.UnprocessableEntityException ( java.lang.String.format ( "Account Not Found: %s" , id ) ) ; } return user ; }
void set ( com.google.gerrit.client.changes.ChangeInfo info ) { this . changeId = info.legacy_id ( ) ; display ( info ) ; reviewerSuggestOracle.setChange ( changeId ) ; openForm.setVisible ( com.google.gerrit.client.Gerrit.isSignedIn ( ) ) ; }
public org.eclipse.jgit.revwalk.RevWalk getRevWalk ( ) throws java.io.IOException { return getRepoView ( ) . getRevWalk ( ) ; }
protected boolean removeEldestEntry ( java.util.Map.Entry < java.lang.String , com.google.gerrit.client.projects.ConfigInfoCache.Entry > e ) { return ( size ( ) ) > ( com.google.gerrit.client.projects.ConfigInfoCache.PROJECT_LIMIT ) ; }
private com.google.gerrit.extensions.api.changes.AddReviewerResult addReviewer ( java.lang.String changeId , java.lang.String reviewer ) throws java.lang.Exception { return addReviewer ( changeId , reviewer , javax.servlet.http.HttpServletResponse.SC_OK ) ; }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > evictAsync ( com.google.gerrit.reviewdb.StarredChange.Key key ) { return com.google.gerrit.server.util.CompoundFuture.wrap ( byAccountId.removeAsync ( key.getParentKey ( ) ) , byChangeId.removeAsync ( key.getChangeId ( ) ) ) ; }
public static native com.google.gerrit.client.account.AccountInfo create ( int id , java.lang.String name , java.lang.String email , java.lang.String username ) ;
private static java.util.Optional < com.google.gitiles.FormatType > set ( javax.servlet.http.HttpServletRequest req , java.util.Optional < com.google.gitiles.FormatType > format ) { req.setAttribute ( com.google.gitiles.FormatType.FORMAT_TYPE_ATTRIBUTE , format ) ; return format ; }
public static java.sql.Timestamp roundToSecond ( java.sql.Timestamp t ) { return new java.sql.Timestamp ( ( ( ( t.getTime ( ) ) / 1000 ) * 1000 ) ) ; }
public void testInsertNothing ( ) throws com.google.gwtorm.server.OrmException { setup ( ) ; createClassUnderTest ( ) . insert ( noData ) ; }
void onCancel ( com.google.gwt.event.dom.client.ClickEvent event ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toProjectAcceess ( getProjectKey ( ) ) ) ; }
public void allRefsVisibleWithRefsMetaConfig ( ) throws java.lang.Exception { allow ( Permission.READ , com.google.gerrit.server.group.SystemGroupBackend.REGISTERED_USERS , "refs/*" ) ; allow ( Permission.READ , com.google.gerrit.server.group.SystemGroupBackend.REGISTERED_USERS , "refs/meta/config" ) ; assertRefs ( "HEAD" , "refs/changes/01/1/1" , "refs/changes/01/1/meta" , "refs/changes/02/2/1" , "refs/changes/02/2/meta" , "refs/heads/branch" , "refs/heads/master" , "refs/meta/config" ) ; }
void cacheVisibleTo ( com.google.gerrit.server.project.ChangeControl ctl ) { visibleTo = ctl.getCurrentUser ( ) ; changeControl = ctl ; }
public com.google.gerrit.extensions.api.projects.BranchInfo get ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return getBranch.apply ( resource ( ) ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot read branch" , e ) ; } }
public com.google.gerrit.server.notedb.ChangeNotes notes ( ) { return getControl ( ) . getNotes ( ) ; }
public void badParameters ( ) throws java.lang.Exception { queryMaker.formQueryFromRequestParameters ( com.google.common.collect.ImmutableMap.of ( com.ericsson.gerrit.plugins.eventslog.sql.QueryMakerTest.T1 , "13/13/32" , com.ericsson.gerrit.plugins.eventslog.sql.QueryMakerTest.T2 , "14/10/10" ) ) ; }
public com.google.gwtexpui.safehtml.client.SafeHtml linkify ( ) { final java.lang.String part = "(?:[a-zA-Z0-9$_+!*\'%;:@=?#/~-]|&(?!lt;|gt;)|[.,](?!(?:\\s|$)))" ; return replaceAll ( ( ( ( ( ( ( "(https?://" + part ) + "{2,}(?:[(]" ) + part ) + "*[)])*" ) + part ) + "*)" ) , "<a href=\"$1\" target=\"_blank\" rel=\"nofollow\">$1</a>" ) ; }
public java.util.List < com.google.gerrit.reviewdb.client.AccountGroupMember > getMembers ( ) { return members ; }
public void flushAll_Forbidden ( ) throws java.lang.Exception { userRestSession.post ( "/config/server/caches/" , new com.google.gerrit.server.config.PostCaches.Input ( com.google.gerrit.server.config.PostCaches.Operation.FLUSH_ALL ) ) . assertForbidden ( ) ; }
public void visit ( org.commonmark.node.HardLineBreak node ) { html.open ( "br" ) ; }
public void setStatus ( final com.google.gerrit.client.reviewdb.Change.Status newStatus ) { open = newStatus.isOpen ( ) ; status = newStatus.getCode ( ) ; }
public Response.Action getDownloadAction ( org.eclipse.jgit.lfs.lib.AnyLongObjectId id ) { org.eclipse.jgit.lfs.server.Response.Action action = super . getDownloadAction ( id ) ; com.googlesource.gerrit.plugins.lfs.AuthInfo authInfo = authorizer.generateAuthInfo ( org.eclipse.jgit.lfs.lib.Constants.DOWNLOAD , id , expirationSeconds ) ; return new com.googlesource.gerrit.plugins.lfs.ExpiringAction ( action.href , authInfo ) ; }
public boolean execute ( ) { if ( ( prefs.syntaxHighlighting ( ) ) && ( isAttached ( ) ) ) { setSyntaxHighlighting ( prefs.syntaxHighlighting ( ) ) ; } return false ; }
public void review ( final com.google.gerrit.client.reviewdb.AccountAgreement.Status newStatus , final com.google.gerrit.client.reviewdb.Account.Id by ) { status = newStatus.getCode ( ) ; reviewedBy = by ; reviewedOn = new java.sql.Timestamp ( java.lang.System.currentTimeMillis ( ) ) ; }
public void removeApprovalFor ( com.google.gerrit.reviewdb.client.Account.Id reviewer , java.lang.String label ) { approvals.put ( label , reviewer , com.google.common.base.Optional.< java.lang.Short > absent ( ) ) ; }
public void myStarredChangeIds ( final com.google.gwtjsonrpc.common.AsyncCallback < java.util.Set < com.google.gerrit.reviewdb.client.Change.Id > > callback ) { callback.onSuccess ( currentUser.get ( ) . getStarredChanges ( ) ) ; }
public void renameFile ( org.eclipse.jgit.lib.Repository repository , com.google.gerrit.server.edit.ChangeEdit edit , java.lang.String currentFilePath , java.lang.String newFilePath ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.server.project.InvalidChangeOperationException , java.io.IOException { org.eclipse.jgit.revwalk.RevCommit editCommit = edit.getEditCommit ( ) ; modifyTree ( repository , edit , new com.google.gerrit.server.edit.tree.RenameFileModification ( editCommit , currentFilePath , newFilePath ) ) ; }
protected com.google.gerrit.client.admin.ProjectRightsPanel createWidget ( ) { return new com.google.gerrit.client.admin.ProjectRightsPanel ( projectId ) ; }
void syncScroll ( com.google.gerrit.client.diff.DisplaySide masterSide ) { if ( ( scrollSynchronizer ) != null ) { scrollSynchronizer.syncScroll ( masterSide ) ; } }
public java.util.Collection < com.google.gerrit.reviewdb.client.PatchSet > patchSets ( ) throws com.google.gwtorm.server.OrmException { if ( ( patchSets ) == null ) { patchSets = psUtil.byChange ( db , notes ( ) ) ; } return patchSets ; }
public com.google.gerrit.extensions.client.GeneralPreferencesInfo apply ( com.google.gerrit.server.config.ConfigResource rsrc ) throws java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { try ( org.eclipse.jgit.lib.Repository git = gitMgr.openRepository ( allUsersName ) ) { return com.google.gerrit.server.account.PreferencesConfig.readDefaultGeneralPreferences ( git ) ; } }
public void setUp ( ) throws java.lang.Exception { setApiUser ( user ) ; user2 = accountCreator.user2 ( ) ; }
public boolean failOnLoadForTest ( ) { return snapshot.get ( ) . failOnLoadForTest ( ) ; }
private static java.lang.String id ( final com.google.gerrit.sshd.SshSession sd ) { return sd != null ? com.google.gerrit.server.util.IdGenerator.format ( sd.getSessionId ( ) ) : "" ; }
public void setContentLength ( int length ) { headers.removeAll ( com.google.common.net.HttpHeaders.CONTENT_LENGTH ) ; headers.put ( com.google.common.net.HttpHeaders.CONTENT_LENGTH , java.lang.Integer.toString ( length ) ) ; }
public int hashCode ( ) { return java.util.Objects.hash ( commit , otherCommit , submitType , contentMerge ) ; }
public final java.lang.String idAbbreviated ( ) { return new com.google.gerrit.reviewdb.client.Change.Key ( changeId ( ) ) . abbreviate ( ) ; }
private void grantTagPermissions ( ) throws java.lang.Exception { grant ( Permission.SUBMIT , project , "refs/for/refs/heads/master" ) ; grant ( Permission.CREATE , project , ( ( org.eclipse.jgit.lib.Constants.R_TAGS ) + "*" ) ) ; grant ( Permission.PUSH , project , ( ( org.eclipse.jgit.lib.Constants.R_TAGS ) + "*" ) ) ; }
public com.google.gerrit.server.CurrentUser getCurrentUser ( ) { return requestUser ; }
public void accountTest ( ) throws java.lang.Exception { java.lang.String [ ] myTestEmails = new java.lang.String [ ] { "abc@g.com" , "abc+xyz@g.com" , "xyz@g.com" } ; for ( java.lang.String email : myTestEmails ) { com.google.gerrit.reviewdb.client.Account.Id id = accountCreator.create ( ( "User" + email ) , email , ( "FullName" + email ) ) . getId ( ) ; com.google.common.truth.Truth.assertThat ( accountCache.get ( id ) . getAccount ( ) . getPreferredEmail ( ) ) . isEqualTo ( email ) ; com.google.common.truth.Truth.assertThat ( db.accounts ( ) . get ( id ) . getPreferredEmail ( ) ) . isEqualTo ( email ) ; } }
protected void configure ( ) { bind ( com.google.gerrit.server.change.ChangeKindCache.class ) . to ( com.google.gerrit.server.change.ChangeKindCacheImpl.class ) ; persist ( com.google.gerrit.server.change.ChangeKindCacheImpl.ID_CACHE , com.google.gerrit.server.change.ChangeKindCacheImpl.Key.class , com.google.gerrit.extensions.client.ChangeKind.class ) . maximumWeight ( ( 2 << 20 ) ) . weigher ( com.google.gerrit.server.change.ChangeKindCacheImpl.ChangeKindWeigher.class ) ; }
protected com.google.gerrit.pgm.init.api.ConsoleUI getConsoleUI ( ) { return com.google.gerrit.pgm.init.api.ConsoleUI.getInstance ( batchMode ) ; }
public void onFailure ( java.lang.Throwable caught ) { enableButtons ( true ) ; new com.google.gerrit.client.ErrorDialog ( caught.getMessage ( ) ) . center ( ) ; }
public void log ( final org.eclipse.jetty.server.Request req , final org.eclipse.jetty.server.Response rsp ) { com.google.gerrit.server.CurrentUser user = ( ( com.google.gerrit.server.CurrentUser ) ( req.getAttribute ( GetUserFilter.REQ_ATTR_KEY ) ) ) ; doLog ( req , rsp , user ) ; }
public void rebase ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { rebaseChangeEdit.apply ( changeResource , null ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot rebase change edit" , e ) ; } }
protected < T > T buildJson ( java.lang.String path , java.lang.Class < T > classOfT ) throws java.lang.Exception { return new com.google.gson.Gson ( ) . fromJson ( buildJsonRaw ( path , "" ) , classOfT ) ; }
public void onCreateAccount ( final com.google.gerrit.server.account.AuthRequest who , final com.google.gerrit.reviewdb.client.Account account ) { usernameCache.put ( who.getLocalUser ( ) , java.util.Optional.of ( account.getId ( ) ) ) ; }
public void doChangeRestoredHook ( com.google.gerrit.reviewdb.client.Change change , com.google.gerrit.reviewdb.client.Account account , java.lang.String reason , com.google.gerrit.reviewdb.server.ReviewDb db ) throws com.google.gwtorm.server.OrmException ;
public java.lang.String getXGerritAuth ( ) { return isSignedIn ( ) ? val.getAuth ( ) : null ; }
public static com.google.gerrit.server.index.IndexConfig createDefault ( ) { return com.google.gerrit.server.index.IndexConfig.builder ( ) . build ( ) ; }
org.eclipse.jgit.lib.ObjectId getCommit ( ) { return org.eclipse.jgit.lib.ObjectId.fromString ( commit ) ; }
public void onSuccess ( com.google.gerrit.client.changes.SubmitInfo result ) { redisplay ( ) ; }
private void enableForm ( final boolean on ) { submitType.setEnabled ( on ) ; ownerTxtBox.setEnabled ( on ) ; descTxt.setEnabled ( on ) ; }
public void create ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { changeEditsPost.apply ( changeResource , null ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot create change edit" , e ) ; } }
public void putComments ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.server.notedb.ChangeUpdate update , java.lang.Iterable < com.google.gerrit.reviewdb.client.PatchLineComment > comments ) throws com.google.gwtorm.server.OrmException { for ( com.google.gerrit.reviewdb.client.PatchLineComment c : comments ) { update.putComment ( c ) ; } db.patchComments ( ) . upsert ( comments ) ; }
public void execute ( java.lang.String issue , java.lang.Iterable < com.googlesource.gerrit.plugins.hooks.workflow.ActionRequest > actions ) { for ( com.googlesource.gerrit.plugins.hooks.workflow.ActionRequest actionRequest : actions ) { execute ( issue , actionRequest ) ; } }
public final native net.codemirror.lib.CodeMirror.Viewport getViewport ( ) ;
private static com.google.gerrit.client.rpc.RestApi groups ( ) { return new com.google.gerrit.client.rpc.RestApi ( "groups" ) ; }
public void reviewCurrent ( ) throws com.google.gerrit.extensions.restapi.RestApiException , java.io.IOException , org.eclipse.jgit.api.errors.GitAPIException { com.google.gerrit.acceptance.PushOneCommit.Result r = createChange ( ) ; gApi.changes ( ) . id ( r.getChangeId ( ) ) . current ( ) . review ( com.google.gerrit.extensions.api.changes.ReviewInput.approve ( ) ) ; }
com.google.gerrit.sshd.SshScope.Context set ( com.google.gerrit.sshd.SshScope.Context ctx ) { com.google.gerrit.sshd.SshScope.Context old = com.google.gerrit.sshd.SshScope.current.get ( ) ; com.google.gerrit.sshd.SshScope.current.set ( ctx ) ; local.setContext ( ctx ) ; return old ; }
public java.lang.String getReplacementString ( ) { return info.getName ( ) ; }
void forAccount ( com.google.gerrit.client.reviewdb.Account.Id id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.data.AccountDashboardInfo > callback ) ;
public void allRefsVisibleWithRefsMetaConfig ( ) throws java.lang.Exception { allow ( Permission.READ , com.google.gerrit.server.group.SystemGroupBackend.REGISTERED_USERS , "refs/*" ) ; allow ( Permission.READ , com.google.gerrit.server.group.SystemGroupBackend.REGISTERED_USERS , "refs/meta/config" ) ; assertRefs ( "HEAD" , "refs/changes/01/1/1" , "refs/changes/01/1/meta" , "refs/changes/02/2/1" , "refs/changes/02/2/meta" , "refs/heads/branch" , "refs/heads/master" , "refs/meta/config" , "refs/tags/branch-tag" , "refs/tags/master-tag" ) ; }
private boolean isRepo ( java.nio.file.Path p ) { java.lang.String name = p.getFileName ( ) . toString ( ) ; return ( ! ( name.equals ( Constants.DOT_GIT ) ) ) && ( name.endsWith ( Constants.DOT_GIT ) ) ; }
public void addItem ( final com.google.gerrit.client.ui.LinkMenuItem i ) { add ( i ) ; }
public java.lang.String src ( ) { java.lang.String src = srcRef ; if ( destBranch.equals ( "*" ) ) { src = "*" ; } return ( ( ( ( srcRepoKey ) + ":" ) + src ) + ":" ) + ( xmlPath ) ; }
public void execute ( ) { commentManager.insertNewDraft ( cm ) . run ( ) ; }
private java.io.File getResourceFile ( java.lang.String resourcePath ) { java.io.File resourceFile = new java.io.File ( staticResourcesPath , resourcePath ) ; return resourceFile ; }
public static com.google.gerrit.server.index.IndexConfig createDefault ( ) { return com.google.gerrit.server.index.IndexConfig.create ( 0 , 0 , com.google.gerrit.server.index.IndexConfig.DEFAULT_MAX_PREFIX_TERMS ) ; }
public void onBlur ( com.google.gwt.event.dom.client.BlurEvent event ) { if ( "" . equals ( nameTxtBox.getText ( ) ) ) { nameTxtBox.setText ( Util.C.defaultAccountGroupName ( ) ) ; nameTxtBox.addStyleName ( Gerrit.RESOURCES.css ( ) . inputFieldTypeHint ( ) ) ; } }
public < T extends com.google.gwt.core.client.JavaScriptObject > void delete ( com.google.gwt.user.client.rpc.AsyncCallback < T > cb ) { delete ( com.google.gerrit.client.rpc.RestApi.wrap ( cb ) ) ; }
public void operationComplete ( org.apache.mina.core.future.IoFuture future ) { final com.google.gerrit.sshd.SshScope.Context ctx = new com.google.gerrit.sshd.SshScope.Context ( sd ) ; final com.google.gerrit.sshd.SshScope.Context old = com.google.gerrit.sshd.SshScope.set ( ctx ) ; try { sshLog.onLogout ( ) ; } finally { com.google.gerrit.sshd.SshScope.set ( old ) ; } }
public static com.google.gerrit.reviewdb.client.Account.Id fromRefSuffix ( java.lang.String name ) { java.lang.Integer id = com.google.gerrit.reviewdb.client.RefNames.parseRefSuffix ( name ) ; return id != null ? new com.google.gerrit.reviewdb.client.Account.Id ( id ) : null ; }
com.google.gerrit.client.diff.DraftBox addReplyBox ( ) { com.google.gerrit.client.diff.DraftBox box = getCommentManager ( ) . addDraftBox ( getCommentManager ( ) . createReply ( comment ) , getCm ( ) . side ( ) ) ; registerReplyBox ( box ) ; return box ; }
public void configureCommands ( ) { command ( "print" ) . to ( com.google.gerrit.plugins.PrintHelloWorldCommand.class ) ; }
public void onSuccess ( com.google.gerrit.client.projects.ProjectMap map ) { callback.onSuggestionsReady ( req , new com.google.gerrit.client.ui.Response ( com.google.gerrit.client.rpc.Natives.asList ( map.values ( ) ) ) ) ; }
protected void preDisplay ( com.google.gerrit.common.data.GroupList result ) { addPanel.setVisible ( result.isCanCreateGroup ( ) ) ; groups.display ( result.getGroups ( ) ) ; groups.finishDisplay ( ) ; }
public void reload ( ) { execResource ( com.google.gerrit.pgm.JythonShell.STARTUP_RESOURCE ) ; execFile ( com.google.gerrit.launcher.GerritLauncher.getHomeDirectory ( ) , com.google.gerrit.pgm.JythonShell.STARTUP_FILE ) ; }
protected void setApiHeaders ( javax.servlet.http.HttpServletRequest req , javax.servlet.http.HttpServletResponse res , com.google.gitiles.FormatType type ) throws java.io.IOException { setApiHeaders ( req , res , type.getMimeType ( ) ) ; }
public final boolean siteHasUsernames ( ) { if ( ( ( isCustomExtension ( ) ) && ( ( httpPasswordUrl ( ) ) != null ) ) && ( ! ( canEdit ( AccountFieldName.USER_NAME ) ) ) ) { return false ; } return true ; }
public com.google.gerrit.reviewdb.AccountGroup get ( final com.google.gerrit.reviewdb.AccountGroup.NameKey name ) { return byName.get ( name ) ; }
protected void configure ( ) { bind ( com.google.gerrit.server.schema.SchemaVersion.class ) . annotatedWith ( com.google.gerrit.server.schema.Current.class ) . to ( com.google.gerrit.server.schema.SchemaVersion.C ) ; }
public void setPatchSets ( java.util.Collection < com.google.gerrit.reviewdb.client.PatchSet > patchSets ) { this . currentPatchSet = null ; this . patchSets = patchSets ; }
public final native void setOldViewportSize ( int lines ) ;
private static java.lang.String findId ( final java.util.Collection < com.google.gerrit.reviewdb.AccountExternalId > ids ) { for ( final com.google.gerrit.reviewdb.AccountExternalId i : ids ) { if ( i.isScheme ( AccountExternalId.SCHEME_GERRIT ) ) { return i.getSchemeRest ( ) ; } } return null ; }
protected int findRow ( java.lang.Object id ) { com.google.gerrit.client.info.FileInfo info = map.get ( ( ( java.lang.String ) ( id ) ) ) ; return info != null ? 1 + ( info._row ( ) ) : - 1 ; }
protected void onInitUI ( ) { super . onInitUI ( ) ; initName ( ) ; initOwner ( ) ; initDescription ( ) ; initRealmProperties ( ) ; initMemberList ( ) ; }
public void onSuccess ( final com.google.gerrit.client.groups.GroupInfo result ) { updateOwnerGroup ( result ) ; saveOwner.setEnabled ( false ) ; }
public void execute ( ) { try { onResult ( lastScript , false ) ; } finally { RpcStatus.INSTANCE.onRpcComplete ( null ) ; } }
private static java.lang.String providersListToString ( java.lang.Iterable < com.google.gerrit.server.plugins.ServerPluginProvider > providersHandlers ) { return java.util.stream.StreamSupport.stream ( providersHandlers.spliterator ( ) , false ) . map ( ServerPluginProvider :: getProviderPluginName ) . collect ( java.util.stream.Collectors.joining ( ", " ) ) ; }
public void defaultGpgCertificationMatchesEmail ( ) throws java.lang.Exception { com.google.gerrit.gpg.testutil.TestKey key = com.google.gerrit.gpg.testutil.TestKeys.key5 ( ) ; assertProblems ( com.google.gerrit.gpg.testutil.TestKeys.key5 ( ) , ( "Key must contain a valid certification for one of the following " + ( ( "identities:\n" + " gerrit:user\n" ) + " username:user" ) ) ) ; addExternalId ( "test" , "test" , "test5@example.com" ) ; assertNoProblems ( key ) ; }
public void execute ( ) { paddingWidgetEle.getStyle ( ) . setHeight ( getOffsetHeight ( ) , Unit.PX ) ; paddingWidget.changed ( ) ; selfWidget.changed ( ) ; }
public void setRefStates ( java.lang.Iterable < byte [ ] > refStates ) { this . refStates = com.google.common.collect.ImmutableList.copyOf ( refStates ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { header.reviewedAndNext ( ) . run ( ) ; }
protected java.lang.Object getRowItemKey ( final com.google.gerrit.client.groups.GroupInfo item ) { return item.getGroupId ( ) ; }
public void testIndexChangeThrowsException ( ) throws java.lang.Exception { setUpMocks ( com.ericsson.gerrit.plugins.multimaster.RestEventForwarderTest.INDEX_OP , com.ericsson.gerrit.plugins.multimaster.RestEventForwarderTest.FAILED , com.ericsson.gerrit.plugins.multimaster.RestEventForwarderTest.EXCEPTION_MSG , com.ericsson.gerrit.plugins.multimaster.RestEventForwarderTest.THROW_EXCEPTION ) ; com.google.common.truth.Truth.assertThat ( eventForwarder.indexChange ( com.ericsson.gerrit.plugins.multimaster.RestEventForwarderTest.CHANGE_NUMBER ) ) . isFalse ( ) ; }
public org.eclipse.jgit.lib.ObjectInserter getInserter ( ) throws java.io.IOException { return this . getObjectInserter ( ) ; }
public void afterTest ( ) { com.google.gerrit.testutil.NoteDbMode.resetFromEnv ( notesMigration ) ; }
private com.google.inject.Injector createHttpdInjector ( ) { final java.util.List < com.google.inject.Module > modules = new java.util.ArrayList < com.google.inject.Module > ( ) ; modules.add ( new com.google.gerrit.pgm.http.jetty.JettyModule ( new com.google.gerrit.pgm.http.jetty.JettyEnv ( webInjector ) ) ) ; return sysInjector.createChildInjector ( modules ) ; }
public void removed ( final com.google.gerrit.reviewdb.client.Account.Id deleter , final java.sql.Timestamp when ) { removedBy = deleter ; removedOn = when ; }
public static java.lang.String toChange ( com.google.gerrit.reviewdb.client.Change.Id c , java.lang.String p ) { return ( ( "/c/" + c ) + "/" ) + p ; }
boolean handles ( java.nio.file.Path srcPath ) ;
private static void addFooter ( java.lang.StringBuilder sb , org.eclipse.jgit.revwalk.FooterKey footer , java.lang.Object value ) { com.google.gerrit.server.notedb.ChangeUpdate.addFooter ( sb , footer ) . append ( value ) . append ( '\n' ) ; }
public final com.google.gerrit.index.Schema < V > getPrevious ( ) { if ( ( schemas.size ( ) ) <= 1 ) { return null ; } return com.google.common.collect.Iterables.get ( schemas.descendingMap ( ) . values ( ) , 1 ) ; }
public static void addSshKey ( java.lang.String account , java.lang.String sshPublicKey , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.account.SshKeyInfo > cb ) { new com.google.gerrit.client.rpc.RestApi ( "/accounts/" ) . id ( account ) . view ( "sshkeys" ) . post ( sshPublicKey , cb ) ; }
public void startEventRecorder ( ) { eventRecorder = eventRecorderFactory.create ( user ) ; }
public boolean deleteChangeFromIndex ( final int changeId ) { return new com.ericsson.gerrit.plugins.highavailability.forwarder.rest.RestForwarder.Request ( "delete change" , changeId ) { @ java.lang.Override com.ericsson.gerrit.plugins.highavailability.forwarder.rest.HttpResponseHandler.HttpResult send ( ) throws java.io.IOException { return httpSession.delete ( buildIndexEndpoint ( changeId ) ) ; } } . execute ( ) ; }
public void voteOnBehalfOfWithCommentWritingJson ( ) throws java.lang.Exception { com.google.common.truth.TruthJUnit.assume ( ) . that ( notesMigration.readChanges ( ) ) . isTrue ( ) ; testVoteOnBehalfOfWithComment ( ) ; }
static java.lang.String encoding ( javax.servlet.http.HttpServletRequest req ) { return com.google.common.base.MoreObjects.firstNonNull ( req.getCharacterEncoding ( ) , "UTF-8" ) ; }
void restore ( com.googlecode.prolog_cafe.lang.Prolog engine ) { engine.cont = this . cont ; engine.r1 = this . r1 ; engine.r2 = this . r2 ; engine.r3 = this . r3 ; engine.r4 = this . r4 ; }
protected java.lang.String getId ( com.google.gerrit.index.project.ProjectData projectState ) { return projectState.getProject ( ) . getName ( ) ; }
java.lang.String getPluginName ( java.nio.file.Path srcPath ) ;
final native void setSubmittable ( boolean s ) ;
public java.lang.Boolean run ( com.google.gerrit.client.reviewdb.ReviewDb db , com.google.gwtorm.client.Transaction txn , boolean retry ) throws com.google.gwtorm.client.OrmException { return doAbandonChange ( message , change , patchSetId , cmsg , db , txn ) ; }
void addProjectWatch ( java.lang.String projectName , java.lang.String filter , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.common.data.AccountProjectWatchInfo > callback ) ;
public void init ( javax.servlet.FilterConfig cfg ) throws javax.servlet.ServletException { servletContext = cfg.getServletContext ( ) ; contextInitialized ( new javax.servlet.ServletContextEvent ( servletContext ) ) ; init ( ) ; manager.start ( ) ; }
public void noCopyAllScoresIfNoChange ( ) throws java.lang.Exception { codeReview.setCopyAllScoresIfNoChange ( false ) ; saveLabelConfig ( ) ; com.google.gerrit.acceptance.PushOneCommit.Result patchSet = readyPatchSetForNoChangeRebase ( ) ; rebase ( patchSet ) ; assertApproval ( patchSet , 0 ) ; }
public void run ( ) { skipManager.removeAll ( ) ; skipManager.render ( context , diff ) ; diffTable.overview.refresh ( ) ; }
public com.google.gerrit.client.diff.DiffApi webLinksOnly ( ) { call.addParameterTrue ( "weblinks-only" ) ; return this ; }
public void onLoad ( com.google.gerrit.plugin.client.extension.Panel panel ) { com.google.gerrit.client.info.AccountInfo accountInfo = panel.getObject ( GerritUiExtensionPoint.Key.ACCOUNT_INFO ) . cast ( ) ; panel.setWidget ( new com.googlesource.gerrit.plugins.cookbook.client.CookBookProfileExtension ( accountInfo ) ) ; }
private int getSepPos ( java.lang.String fromTo , boolean redirect ) { int sepPos = fromTo.indexOf ( getSeparator ( redirect ) ) ; if ( sepPos < 0 ) { throw new com.googlesource.gerrit.plugins.github.InvalidGitHubConfigException ( fromTo ) ; } return sepPos ; }
public com.google.common.util.concurrent.CheckedFuture < ? , java.io.IOException > indexAsync ( com.google.gerrit.server.query.change.ChangeData cd ) { return ( executor ) != null ? submit ( indexTask ( cd ) ) : com.google.common.util.concurrent.Futures.< java.lang.Object , java.io.IOException > immediateCheckedFuture ( null ) ; }
public java.lang.String getAuthorization ( ) ;
public void onFailure ( java.lang.Throwable caught ) { super . onFailure ( caught ) ; enableForm ( true ) ; }
public long longValue ( ) { return ( ( long ) ( this . val ) ) ; }
public void testUpdateNothing ( ) throws com.google.gwtorm.server.OrmException { createClassUnderTest ( ) . update ( noData ) ; }
public void deleteGpgKey ( ) throws java.lang.Exception { com.google.gerrit.gpg.testutil.TestKey key = com.google.gerrit.gpg.testutil.TestKeys.key1 ( ) ; java.lang.String id = key.getKeyIdString ( ) ; addExternalIdEmail ( admin , "test1@example.com" ) ; addGpgKey ( key.getPublicKeyArmored ( ) ) ; assertKeys ( key ) ; gApi.accounts ( ) . self ( ) . gpgKey ( id ) . delete ( ) ; assertKeys ( ) ; exception.expect ( com.google.gerrit.extensions.restapi.ResourceNotFoundException.class ) ; exception.expectMessage ( id ) ; gApi.accounts ( ) . self ( ) . gpgKey ( id ) . get ( ) ; }
private static com.google.gerrit.server.query.change.QueryOptions options ( int start , int limit ) { return com.google.gerrit.server.query.change.QueryOptions.create ( com.google.gerrit.server.index.IndexRewriteTest.CONFIG , start , limit ) ; }
private com.google.gerrit.httpd.raw.StaticModule.Paths getPaths ( ) { if ( ( paths ) == null ) { paths = new com.google.gerrit.httpd.raw.StaticModule.Paths ( options ) ; } return paths ; }
public void submit ( com.google.gerrit.extensions.api.changes.SubmitInput in ) throws com.google.gerrit.extensions.restapi.RestApiException { try { submit.apply ( revision , in ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot submit change" , e ) ; } }
public void move ( com.google.gerrit.extensions.api.changes.MoveInput in ) throws com.google.gerrit.extensions.restapi.RestApiException { try { move.apply ( change , in ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot move change" , e ) ; } }
public java.lang.String apply ( com.google.gerrit.pgm.init.InitPlugins.PluginData input ) { return input.name ; }
private java.lang.String comparePattern ( ) { if ( getName ( ) . startsWith ( com.google.gerrit.common.data.REGEX_PREFIX ) ) { return getName ( ) . substring ( com.google.gerrit.common.data.REGEX_PREFIX.length ( ) ) ; } return getName ( ) ; }
com.google.gerrit.reviewdb.client.PatchSetApproval getSubmitter ( com.google.gerrit.server.git.CodeReviewCommit c ) { return approvalsUtil.getSubmitter ( db.get ( ) , c.notes , c.patchsetId ) ; }
private void resizeBoxPaddings ( ) { for ( com.google.gerrit.client.diff.CommentBox box : allBoxes ) { box.resizePaddingWidget ( ) ; } }
protected java.util.Optional < com.googlesource.gerrit.plugins.lfs.LfsAuthTokenTest.TestToken > createToken ( java.util.List < java.lang.String > values ) { return java.util.Optional.of ( new com.googlesource.gerrit.plugins.lfs.LfsAuthTokenTest.TestToken ( values.get ( 0 ) ) ) ; }
public org.eclipse.jgit.lib.PersonIdent getUserPersonIdent ( ) { return createPersonIdent ( identifiedUser.get ( ) ) ; }
public void setup ( com.gitblit.IStoredSettings settings ) { }
public void addPublishedComments ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.server.notedb.ChangeUpdate update , java.lang.Iterable < com.google.gerrit.reviewdb.client.PatchLineComment > comments ) throws com.google.gwtorm.server.OrmException { for ( com.google.gerrit.reviewdb.client.PatchLineComment c : comments ) { update.upsertComment ( c ) ; } db.patchComments ( ) . upsert ( comments ) ; }
boolean canAddPatchSet ( ) { return projectControl.controlForRef ( ( ( com.google.gerrit.server.util.MagicBranch.NEW_CHANGE ) + ( refName ) ) ) . canPerform ( Permission.ADD_PATCH_SET ) ; }
public void display ( com.google.gerrit.client.groups.GroupMap groups , java.lang.String toHighlight ) { display ( groups.values ( ) . asList ( ) , toHighlight ) ; }
public void onSuccess ( com.google.gerrit.client.rpc.NativeString newPassword ) { id.setPassword ( newPassword.asString ( ) ) ; display ( id ) ; }
public void onClick ( com.google.gwt.event.dom.client.ClickEvent event ) { setReviewedByCurrentUser ( true ) ; reviewedLink.go ( ) ; }
public final boolean isCustomExtension ( ) { return ( authType ( ) ) == ( com.google.gerrit.reviewdb.client.AuthType.CUSTOM_EXTENSION ) ; }
public void onSuccess ( final com.google.gerrit.common.data.ProjectList result ) { projectsTab.display ( result.getProjects ( ) ) ; if ( firstPopupLoad ) { firstPopupLoad = false ; displayPopup ( ) ; } }
void add ( E e ) { list.add ( e ) ; }
public static com.google.gerrit.client.ui.PagingHyperlink createPrev ( ) { return new com.google.gerrit.client.ui.PagingHyperlink ( AdminConstants.I.pagedListPrev ( ) ) ; }
public com.google.gerrit.server.cache.h2.DiskStats diskStats ( ) { return store.diskStats ( ) ; }
protected void preDisplay ( com.google.gerrit.client.projects.ConfigInfoCache.Entry result ) { commentLinkProcessor = result.getCommentLinkProcessor ( ) ; setTheme ( result.getTheme ( ) ) ; display ( comments ) ; }
public void setClassName ( java.lang.String clazz ) { this . clazz = clazz ; }
public void onSuccess ( com.google.gerrit.client.changes.SubmitInfo result ) { saveStateOnUnload = false ; goChange ( ) ; }
public void testEvictGroupsOK ( ) throws java.lang.Exception { setupMocks ( Constants.GROUPS , com.ericsson.gerrit.plugins.evictcache.RestSessionTest.ID_RESPONSE , com.ericsson.gerrit.plugins.evictcache.RestSessionTest.OK_RESPONSE , com.ericsson.gerrit.plugins.evictcache.RestSessionTest.DO_NOT_THROW_EXCEPTION ) ; com.google.common.truth.Truth.assertThat ( restClient.evict ( com.ericsson.gerrit.plugins.evictcache.RestSessionTest.SOURCE_NAME , Constants.GROUPS , org.mockito.Mockito.mock ( AccountGroup.Id.class ) ) ) . isTrue ( ) ; }
void deleteGroupMembers ( com.google.gerrit.reviewdb.client.AccountGroup.Id groupId , java.util.Set < com.google.gerrit.reviewdb.client.AccountGroupMember.Key > keys , com.google.gwtjsonrpc.common.AsyncCallback < com.google.gwtjsonrpc.common.VoidResult > callback ) ;
public static void setHeaderVisible ( boolean visible ) { com.google.gerrit.client.Gerrit.topMenu.setVisible ( visible ) ; com.google.gerrit.client.Gerrit.siteHeader.setVisible ( ( visible && ( com.google.gerrit.client.Gerrit.getUserPreferences ( ) . showSiteHeader ( ) ) ) ) ; }
private boolean hasUpToDateCachedResource ( com.google.gerrit.httpd.resources.Resource cachedResource , long lastUpdateTime ) { return ( cachedResource != null ) && ( cachedResource.isUnchanged ( lastUpdateTime ) ) ; }
public boolean getDeny ( ) { return ( action ) == ( com.google.gerrit.common.data.PermissionRule.Action.DENY ) ; }
public static com.google.gerrit.sshd.CommandName named ( final java.lang.String value ) { return new com.google.gerrit.sshd.AutoAnnotation_Commands_named ( value ) ; }
public java.util.List < org.eclipse.jgit.dircache.DirCacheEditor.PathEdit > getPathEdits ( org.eclipse.jgit.lib.Repository repository , org.eclipse.jgit.revwalk.RevCommit baseCommit ) { org.eclipse.jgit.dircache.DirCacheEditor.DeletePath deletePathEdit = new org.eclipse.jgit.dircache.DirCacheEditor.DeletePath ( filePath ) ; return java.util.Collections.singletonList ( deletePathEdit ) ; }
protected void preDisplay ( com.google.gerrit.client.projects.ConfigInfoCache.Entry result ) { loaded = true ; commentLinkProcessor = result.getCommentLinkProcessor ( ) ; setTheme ( result.getTheme ( ) ) ; renderChangeInfo ( info ) ; }
public org.eclipse.jgit.lib.RefUpdate.Result modifyFile ( com.google.gerrit.server.edit.ChangeEdit edit , java.lang.String file , com.google.gerrit.extensions.restapi.RawInput content ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.server.project.InvalidChangeOperationException , java.io.IOException { return modify ( edit , new com.google.gerrit.server.edit.tree.ChangeFileContentModification ( file , content ) ) ; }
public void onSelection ( com.google.gwt.event.logical.shared.SelectionEvent < java.lang.String > event ) { addMember.fireEvent ( new com.google.gwt.event.dom.client.ClickEvent ( ) { } ) ; }
public void tearDown ( ) throws java.lang.Exception { stat.execute ( ( "DROP TABLE IF EXISTS " + ( com.ericsson.gerrit.plugins.eventslog.sql.SQLTable.TABLE_NAME ) ) ) ; store.stop ( ) ; }
com.google.gerrit.server.change.PatchSetInserter create ( com.google.gerrit.server.project.ChangeControl ctl , com.google.gerrit.reviewdb.client.PatchSet.Id psId , org.eclipse.jgit.revwalk.RevCommit commit ) ;
protected com.google.gerrit.server.change.ChangeInserter newChangeForCommit ( org.eclipse.jgit.junit.TestRepository < com.google.gerrit.testutil.InMemoryRepositoryManager.Repo > repo , org.eclipse.jgit.revwalk.RevCommit commit ) throws java.lang.Exception { return newChange ( repo , commit , null , null , null ) ; }
public void closeEventRecorder ( ) { eventRecorder.close ( ) ; }
public void linkifyAmpersand ( ) throws java.lang.Exception { org.eclipse.jgit.lib.Config config = new org.eclipse.jgit.lib.Config ( ) ; com.google.gitiles.Linkifier l = new com.google.gitiles.Linkifier ( TestGitilesUrls.URLS , config ) ; org.junit.Assert.assertEquals ( com.google.common.collect.ImmutableList.of ( com.google.common.collect.ImmutableMap.of ( "text" , "http://my/url?a&b" , "url" , "http://my/url?a&b" ) ) , l.linkify ( com.google.gitiles.LinkifierTest.REQ , "http://my/url?a&b" ) ) ; org.junit.Assert.assertEquals ( com.google.common.collect.ImmutableList.of ( com.google.common.collect.ImmutableMap.of ( "text" , "http://weird/htmlified/?url" , "url" , "http://weird/htmlified/?url" ) , com.google.common.collect.ImmutableMap.of ( "text" , "&lt;p&rt;" ) ) , l.linkify ( com.google.gitiles.LinkifierTest.REQ , "http://weird/htmlified/?url&lt;p&rt;" ) ) ; }
private static com.google.gerrit.server.git.CodeReviewCommit error ( com.google.gerrit.server.project.ChangeControl ctl , com.google.gerrit.server.git.CommitMergeStatus s ) { com.google.gerrit.server.git.CodeReviewCommit r = new com.google.gerrit.server.git.CodeReviewCommit ( org.eclipse.jgit.lib.ObjectId.zeroId ( ) ) ; r.setControl ( ctl ) ; r.statusCode = s ; return r ; }
public void currentPatchSetMissing ( ) throws java.lang.Exception { com.google.gerrit.reviewdb.client.Change c = com.google.gerrit.testutil.TestChanges.newChange ( project , userId ) ; db.changes ( ) . insert ( java.util.Collections.singleton ( c ) ) ; assertProblems ( c , "Current patch set 1 not found" ) ; }
public void onSuccess ( com.google.gerrit.client.info.ChangeInfo result ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( result.projectNameKey ( ) , result.legacyId ( ) ) ) ; hide ( ) ; }
private static java.lang.String findId ( java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId > extIds ) { for ( com.google.gerrit.server.account.externalids.ExternalId extId : extIds ) { if ( extId.isScheme ( com.google.gerrit.server.account.externalids.ExternalId.SCHEME_GERRIT ) ) { return extId.key ( ) . id ( ) ; } } return null ; }
public com.google.gerrit.server.change.MergeabilityChecker.Check addBranch ( com.google.gerrit.reviewdb.client.Branch.NameKey branch ) { branches.add ( branch ) ; interactive = false ; return this ; }
public com.google.gerrit.server.group.GroupJson.GroupInfo apply ( com.google.gerrit.server.group.IncludedGroupResource rsrc ) throws com.google.gerrit.extensions.restapi.ResourceNotFoundException , com.google.gwtorm.server.OrmException { return json.format ( rsrc.getMemberDescription ( ) ) ; }
public void setUseContributorAgreements ( final com.google.gerrit.extensions.common.InheritableBoolean u ) { useContributorAgreements = u ; }
protected < T > T buildJson ( java.lang.String path , java.lang.reflect.Type typeOfT ) throws java.lang.Exception { return new com.google.gson.Gson ( ) . < T > fromJson ( buildJsonRaw ( path , "" ) , typeOfT ) ; }
com.google.gerrit.httpd.rpc.changedetail.PatchSetDetailFactory create ( @ com.google.inject.assistedinject.Assisted ( value = "psIdBase" ) com.google.gerrit.reviewdb.PatchSet.Id psIdBase , @ com.google.inject.assistedinject.Assisted ( value = "psIdNew" ) com.google.gerrit.reviewdb.PatchSet.Id psIdNew , @ javax.annotation.Nullable com.google.gerrit.reviewdb.AccountDiffPreference diffPrefs ) ;
public java.lang.Object getScreenCacheToken ( ) { return getClass ( ) ; }
protected void configure ( ) { factory ( ProjectControl.Factory.class ) ; factory ( DefaultRefFilter.Factory.class ) ; bind ( ChangeControl.Factory.class ) ; }
public void onChangeEvent ( com.google.gerrit.server.events.ChangeEvent event ) { if ( event instanceof com.google.gerrit.server.events.ChangeMergedEvent ) { com.google.gerrit.server.events.ChangeMergedEvent cMEvent = ( ( com.google.gerrit.server.events.ChangeMergedEvent ) ( event ) ) ; mergeResults.put ( cMEvent.change.number , cMEvent.newRev ) ; } }
private static void addCommand ( com.google.gerrit.extensions.common.FetchInfo fetchInfo , java.lang.String commandName , java.lang.String c ) { if ( ( fetchInfo.commands ) == null ) { fetchInfo.commands = new java.util.TreeMap < > ( ) ; } fetchInfo.commands.put ( commandName , c ) ; }
public void testCreateProjectWithEmptyCommit ( ) throws java.io.IOException { final java.lang.String newProjectName = "newProject" ; com.google.gerrit.extensions.api.projects.ProjectInput in = new com.google.gerrit.extensions.api.projects.ProjectInput ( ) ; in.createEmptyCommit = true ; adminSession.put ( ( "/projects/" + newProjectName ) , in ) ; assertEmptyCommit ( newProjectName , "refs/heads/master" ) ; }
public void testCreateSchema_DefaultAccess_Administrators ( ) throws com.google.gwtorm.client.OrmException { db.create ( ) ; final com.google.gerrit.reviewdb.SystemConfig config = db.getSystemConfig ( ) ; assertDefaultRight ( config.adminGroupId , ApprovalCategory.READ , 1 , 1 ) ; }
public java.util.List < com.google.gerrit.client.reviewdb.AccountExternalId > run ( com.google.gerrit.client.reviewdb.ReviewDb db ) throws com.google.gwtorm.client.OrmException { final com.google.gerrit.client.reviewdb.Account.Id me = com.google.gerrit.client.rpc.Common.getAccountId ( ) ; return db.accountExternalIds ( ) . byAccount ( me ) . toList ( ) ; }
public com.google.gerrit.server.IdentifiedUser create ( com.google.gerrit.server.AccessPath accessPath , com.google.inject.Provider < java.net.SocketAddress > remotePeerProvider , com.google.gerrit.reviewdb.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( capabilityControlFactory , accessPath , authConfig , canonicalUrl , realm , accountCache , groupIncludeCache , remotePeerProvider , null , id ) ; }
private void assertNotOwner ( java.lang.String ref , com.google.gerrit.server.permissions.ProjectControl u ) { com.google.common.truth.Truth.assertThat ( u.controlForRef ( ref ) . isOwner ( ) ) . named ( ( "NOT OWN " + ref ) ) . isFalse ( ) ; }
public static java.lang.String toChangeQuery ( java.lang.String query , java.lang.String page ) { query = com.google.gwtorm.client.KeyUtil.encode ( query ) . replaceAll ( "%3[Aa]" , ":" ) ; return ( ( "/q/" + query ) + "," ) + page ; }
com.google.gerrit.server.change.RebaseChangeOp create ( com.google.gerrit.server.notedb.ChangeNotes notes , com.google.gerrit.reviewdb.client.PatchSet originalPatchSet , org.eclipse.jgit.lib.ObjectId baseCommitId ) ;
protected void onUnload ( ) { super . onUnload ( ) ; if ( saveStateOnUnload ) { com.google.gerrit.client.changes.PublishCommentScreen.lastState = new com.google.gerrit.client.changes.PublishCommentScreen.SavedState ( this ) ; } }
public void run ( ) { if ( cm.hasVimSearchHighlight ( ) ) { net.codemirror.lib.CodeMirror.handleVimKey ( cm , "n" ) ; } else { chunkManager.diffChunkNav ( cm , Direction.NEXT ) . run ( ) ; } }
void add ( com.google.gwt.user.client.ui.Widget widget ) { widgets.add ( widget ) ; }
public final native void activeLine ( net.codemirror.lib.CodeMirror.LineHandle line ) ;
protected void configureServlets ( ) { serveRegex ( ( ( "^" + ( XDocServlet.PATH_PREFIX ) ) + "(.+)?$" ) ) . with ( com.googlesource.gerrit.plugins.xdocs.XDocServlet.class ) ; }
public void handle ( net.codemirror.lib.CodeMirror cm ) { setClean ( cm.isClean ( generation ) ) ; }
protected void configureServlets ( ) { install ( new com.ericsson.gerrit.plugins.highavailability.forwarder.rest.RestForwarderServletModule ( ) ) ; if ( config.websession ( ) . synchronize ( ) ) { install ( new com.ericsson.gerrit.plugins.highavailability.websession.file.FileBasedWebsessionModule ( ) ) ; } }
private static boolean isControlBlockStart ( com.google.gerrit.server.patch.Text a , int idx ) { final java.lang.String l = a.getString ( idx ) ; return com.google.gerrit.server.patch.PatchListCacheImpl.CONTROL_BLOCK_START_RE.matcher ( l ) . find ( ) ; }
protected java.util.Set < com.google.gerrit.reviewdb.client.AccountGroup.UUID > getProjectOwners ( ) { final com.google.gerrit.server.project.ProjectState r ; r = args.projectCache.get ( change.getProject ( ) ) ; return r != null ? r.getOwners ( ) : java.util.Collections.< com.google.gerrit.reviewdb.client.AccountGroup.UUID > emptySet ( ) ; }
public boolean isMatchable ( ) { return ( this ) instanceof com.google.gerrit.index.query.Matchable ; }
public java.util.Optional < com.google.gerrit.server.plugins.PluginEntry > getEntry ( java.lang.String resourcePath ) { return java.util.Optional.empty ( ) ; }
static java.lang.String computeCanonicalPath ( java.lang.String canonicalURL ) throws java.net.URISyntaxException { if ( com.google.common.base.Strings.isNullOrEmpty ( canonicalURL ) ) { return "" ; } java.net.URI uri = new java.net.URI ( canonicalURL ) ; return uri.getPath ( ) . replaceAll ( "/$" , "" ) ; }
public void manualCertificationMatchesExternalId ( ) throws java.lang.Exception { addExternalId ( "foo" , "myId" , null ) ; assertNoProblems ( com.google.gerrit.gpg.testutil.TestKey.key5 ( ) ) ; }
private void fireEvent ( com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.server.events.ProjectEvent event ) { for ( com.google.gerrit.common.UserScopedEventListener listener : listeners ) { if ( isVisibleTo ( project , listener.getUser ( ) ) ) { listener.onEvent ( event ) ; } } fireEventForUnrestrictedListeners ( event ) ; }
public org.eclipse.jgit.lib.RefUpdate.Result restoreFile ( com.google.gerrit.server.edit.ChangeEdit edit , java.lang.String file ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.server.project.InvalidChangeOperationException , java.io.IOException { org.eclipse.jgit.revwalk.RevCommit editCommit = edit.getEditCommit ( ) ; return modify ( edit , new com.google.gerrit.server.edit.tree.RestoreFileModification ( editCommit , file ) ) ; }
java.lang.Runnable toggleOpenBox ( final net.codemirror.lib.CodeMirror cm ) { return new java.lang.Runnable ( ) { @ java.lang.Override public void run ( ) { com.google.gerrit.client.diff.CommentGroup group = getCommentGroupOnActiveLine ( cm ) ; if ( group != null ) { group.openCloseLast ( ) ; } } } ; }
protected void preDisplay ( com.google.gerrit.client.rpc.NativeList < com.google.gerrit.client.changes.ChangeList > result ) { display ( result ) ; }
public void stop ( ) { if ( enabled ) { consoleReporter.stop ( ) ; } }
private static boolean isRecognizedScheme ( com.google.gerrit.extensions.config.DownloadScheme scheme ) { return ! ( scheme instanceof com.googlesource.gerrit.plugins.download.scheme.RepoScheme ) ; }
private com.google.gerrit.extensions.common.ServerInfo getServerConfig ( ) throws java.lang.Exception { com.google.gerrit.acceptance.RestResponse r = adminRestSession.get ( "/config/server/info/" ) ; r.assertOK ( ) ; return newGson ( ) . fromJson ( r.getReader ( ) , com.google.gerrit.extensions.common.ServerInfo.class ) ; }
public com.google.gerrit.server.account.AccountState get ( final com.google.gerrit.reviewdb.Account.Id accountId ) { return byId.get ( accountId ) ; }
private static java.lang.String my ( org.eclipse.jgit.lib.Config cfg , java.lang.String subsection , java.lang.String key , java.lang.String defaultValue ) { java.lang.String val = cfg.getString ( com.google.gerrit.server.account.GetPreferences.MY , subsection , key ) ; return ! ( com.google.common.base.Strings.isNullOrEmpty ( val ) ) ? val : defaultValue ; }
public void setStatus ( java.lang.String status ) throws com.google.gerrit.extensions.restapi.RestApiException { com.google.gerrit.extensions.api.accounts.StatusInput in = new com.google.gerrit.extensions.api.accounts.StatusInput ( status ) ; try { putStatus.apply ( account , in ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot set status" , e ) ; } }
public boolean isExpandAllComments ( ) { return diffPrefs.expandAllComments ; }
public org.eclipse.jgit.lib.ObjectId getNewId ( ) { if ( ( newId ) == null ) { newId = org.eclipse.jgit.lib.ObjectId.fromString ( newIdName ) ; } return newId ; }
void load ( int revisionNumber ) { if ( ( revisionNumber > 0 ) && ( loaded.add ( revisionNumber ) ) ) { toLoad.add ( revisionNumber ) ; start ( ) ; } }
void setOptionFlagsHex ( java.lang.String hex ) { json.addOptions ( com.google.gerrit.extensions.client.ListChangesOption.fromBits ( java.lang.Integer.parseInt ( hex , 16 ) ) ) ; }
public com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > r00_ageToSortKey ( @ com.google.inject.name.Named ( value = "A" ) com.google.gerrit.server.query.change.AgePredicate a ) { java.lang.String cut = com.google.gerrit.server.ChangeUtil.sortKey ( a.getCut ( ) , java.lang.Integer.MAX_VALUE ) ; return and ( new com.google.gerrit.server.query.change.SortKeyPredicate.Before ( com.google.gerrit.server.query.change.BasicChangeRewrites.schema ( indexes ) , dbProvider , cut ) , a ) ; }
public < T extends com.google.gwt.core.client.JavaScriptObject > void delete ( com.google.gerrit.client.rpc.HttpCallback < T > cb ) { send ( com.google.gwt.http.client.RequestBuilder.DELETE , cb ) ; }
public java.lang.String Key ( ) { return ( ( name ) + "=" ) + ( org.apache.commons.lang.StringUtils.strip ( remote , "/" ) ) ; }
public boolean isVisible ( com.google.gerrit.reviewdb.client.Account account ) throws com.google.gwtorm.server.OrmException { return accountControlFactory.get ( ) . canSee ( account ) ; }
public void addColumn ( java.lang.String content ) { if ( ! ( firstColumn ) ) { out.print ( columnSeparator ) ; } out.print ( com.google.gerrit.server.ioutil.StringUtil.escapeString ( content ) ) ; firstColumn = false ; }
public void onSuccess ( com.google.gerrit.client.projects.ConfigInfoCache.Entry result ) { commentLinkProcessor = result.getCommentLinkProcessor ( ) ; contentTable.setCommentLinkProcessor ( commentLinkProcessor ) ; }
public static java.lang.String linkify ( final java.lang.String in ) { return in.replaceAll ( "(https?://[^ \n\r\t]*)" , "<a href=\"$1\">$1</a>" ) ; }
public < T > com.google.gerrit.client.rpc.CallbackGroup.Callback < T > addEmpty ( ) { com.google.gerrit.client.rpc.CallbackGroup.Callback < T > cb = com.google.gerrit.client.rpc.CallbackGroup.emptyCallback ( ) ; return add ( cb ) ; }
public void onSuccess ( final com.google.gerrit.client.data.AccountDashboardInfo r ) { if ( isAttached ( ) ) { display ( r ) ; } }
public com.google.gerrit.server.account.AccountIdSet get ( final java.lang.String email ) { return cache.get ( new com.google.gerrit.reviewdb.Account.Email ( email ) ) ; }
public com.google.gerrit.server.account.AccountState state ( ) { if ( ( state ) == null ) { state = accountCache.getEvenIfMissing ( getAccountId ( ) ) ; } return state ; }
protected void parseCommandLine ( ) throws com.google.gerrit.sshd.commands.UnloggedFailure { parseCommandLine ( impl ) ; }
public int getSizeBasedOnAccuracy ( int statisticsAccuracy ) throws java.lang.IllegalArgumentException , java.lang.IllegalStateException , net.sf.ehcache.CacheException { return self ( ) . getSizeBasedOnAccuracy ( statisticsAccuracy ) ; }
protected void configure ( ) { bind ( com.google.gerrit.httpd.GitWebConfig.class ) ; }
public void onSuccess ( com.google.gerrit.client.info.ChangeInfo info ) { info.init ( ) ; addExtensionPoints ( info , initCurrentRevision ( info ) ) ; loadConfigInfo ( info , base ) ; }
void setUserAccountId ( com.google.gerrit.reviewdb.Account.Id id ) { key = new com.google.gerrit.httpd.WebSessionManager.Key ( ( "id:" + id ) ) ; val = new com.google.gerrit.httpd.WebSessionManager.Val ( id , 0 , false , null , "" ) ; }
private static boolean isUiPlugin ( java.lang.String name ) { return ( com.google.gerrit.server.plugins.PluginLoader.isPlugin ( name , "js" ) ) || ( com.google.gerrit.server.plugins.PluginLoader.isPlugin ( name , "html" ) ) ; }
static com.google.gerrit.client.account.AccountApi.GpgKeysInput add ( java.lang.String key ) { return com.google.gerrit.client.account.AccountApi.GpgKeysInput.createWithAdd ( com.google.gerrit.client.rpc.Natives.arrayOf ( key ) ) ; }
public void upsert ( java.lang.Iterable < T > instances ) throws com.google.gwtorm.client.OrmException { for ( T obj : instances ) { upsertOne ( obj , false ) ; } db.flush ( ) ; }
public static java.lang.Boolean isForwardedEvent ( ) { return com.ericsson.gerrit.plugins.highavailability.forwarder.Context.forwardedEvent.get ( ) ; }
public com.google.gerrit.sshd.SshKeyCacheEntryCollection missing ( com.google.gerrit.reviewdb.Account.Username username ) { return new com.google.gerrit.sshd.SshKeyCacheEntryCollection ( SshKeyCacheEntryCollection.Type.INVALID_USER ) ; }
public void abandonReviewableChangeByOtherCcingSelfNotifyOwner ( ) throws java.lang.Exception { com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableChange ( ) ; com.google.gerrit.acceptance.TestAccount other = accountCreator.create ( "other" , "other@example.com" , "other" ) ; abandon ( sc.changeId , other , com.google.gerrit.extensions.client.GeneralPreferencesInfo.EmailStrategy.CC_ON_OWN_COMMENTS , com.google.gerrit.extensions.api.changes.NotifyHandling.OWNER ) ; assertThat ( sender ) . sent ( "abandon" , sc ) . to ( sc.owner ) . cc ( other ) . noOneElse ( ) ; }
public static org.eclipse.jgit.transport.ReceiveCommand getCommand ( org.eclipse.jgit.lib.RefUpdate update , org.eclipse.jgit.transport.ReceiveCommand.Type type ) { return new org.eclipse.jgit.transport.ReceiveCommand ( update.getExpectedOldObjectId ( ) , update.getNewObjectId ( ) , update.getName ( ) , type ) ; }
private com.google.gerrit.server.query.change.ChangeData getChange ( com.google.gerrit.acceptance.GitUtil.Commit c ) throws com.google.gwtorm.server.OrmException { return com.google.common.collect.Iterables.getOnlyElement ( queryProvider.get ( ) . byKeyPrefix ( c.getChangeId ( ) ) ) ; }
private void display ( final com.google.gerrit.client.projects.ProjectMap result ) { projectsTab.display ( result , subname ) ; if ( firstPopupLoad ) { firstPopupLoad = false ; displayPopup ( ) ; } }
private static void assertEqualToBuilderResult ( byte [ ] exp , com.google.gwtorm.nosql.IndexKeyBuilder ic ) { org.junit.Assert.assertEquals ( com.google.gwtorm.nosql.IndexKeyBuilderTest.toString ( exp ) , com.google.gwtorm.nosql.IndexKeyBuilderTest.toString ( ic.toByteArray ( ) ) ) ; }
public static void replyError ( javax.servlet.http.HttpServletResponse res , int statusCode , java.lang.String msg ) throws java.io.IOException { res.setStatus ( statusCode ) ; com.google.gwtexpui.server.CacheHeaders.setNotCacheable ( res ) ; com.google.gerrit.httpd.restapi.RestApiServlet.replyText ( null , res , msg ) ; }
public com.google.gerrit.extensions.registration.DynamicMap < com.google.gerrit.extensions.restapi.RestView < com.google.gerrit.gpg.server.GpgKey > > views ( ) { return views ; }
private void parseDelete ( final org.eclipse.jgit.transport.ReceiveCommand cmd ) { com.google.gerrit.server.project.RefControl ctl = projectControl.controlForRef ( cmd.getRefName ( ) ) ; if ( ctl.canDelete ( ) ) { } else { com.google.gerrit.server.git.ReceiveCommits.reject ( cmd , "can not delete references" ) ; } }
public void postEvent ( com.google.gerrit.reviewdb.client.Project.NameKey projectName , com.google.gerrit.server.events.ProjectEvent event ) { fireEvent ( projectName , event ) ; }
public void postUpdate ( com.google.gerrit.server.git.BatchUpdate.Context ctx ) throws com.google.gwtorm.server.OrmException { if ( ( updated ( ) ) && ( fireEvent ) ) { hashtagsEdited.fire ( change , ctx.getAccount ( ) , updatedHashtags , toAdd , toRemove , ctx.getWhen ( ) ) ; } }
public org.eclipse.jgit.lib.Config getProjectPluginConfig ( com.google.gerrit.server.project.ProjectState projectState , java.lang.String pluginName ) { return projectState.getConfig ( ( pluginName + ( com.google.gerrit.server.config.PluginConfigFactory.EXTENSION ) ) ) . get ( ) ; }
private com.google.gerrit.server.query.change.ChangeData changeData ( com.google.gerrit.reviewdb.server.ReviewDb db , @ com.google.gerrit.common.Nullable com.google.gerrit.server.query.change.ChangeData cd ) { return cd != null ? cd : changeDataFactory.create ( db , getNotes ( ) ) ; }
private java.util.List < com.google.gerrit.common.data.SubmitRecord > submitRecords ( com.google.gerrit.server.query.change.ChangeData cd ) throws com.google.gwtorm.server.OrmException { return cd.submitRecords ( com.google.gerrit.server.change.ChangeJson.SUBMIT_RULE_OPTIONS_LENIENT ) ; }
public com.google.gerrit.reviewdb.server.PatchSetAccess patchSets ( ) { throw new com.google.gerrit.testutil.DisabledReviewDb.Disabled ( ) ; }
public void addReviewerToWipChangeInReviewDbNotifyAllBatch ( ) throws java.lang.Exception { addReviewerToWipChangeInReviewDbNotifyAll ( batch ( ) ) ; }
private java.lang.String buildIndexEndpoint ( int changeId ) { return com.google.common.base.Joiner.on ( "/" ) . join ( pluginRelativePath , "index/change" , changeId ) ; }
public com.google.gerrit.index.FieldType < ? > getType ( ) { return type ; }
com.google.gerrit.server.notedb.NoteDbUpdateManager.OpenRepo getCodeRepo ( ) throws java.io.IOException { initCodeRepo ( ) ; return codeRepo ; }
public java.util.Map < java.lang.String , com.google.gerrit.server.config.ListCapabilities.CapabilityInfo > apply ( com.google.gerrit.server.config.ConfigResource resource ) throws java.lang.IllegalAccessException , java.lang.NoSuchFieldException { java.util.Map < java.lang.String , com.google.gerrit.server.config.ListCapabilities.CapabilityInfo > output = new java.util.TreeMap < > ( ) ; collectCoreCapabilities ( output ) ; collectPluginCapabilities ( output ) ; return output ; }
public static com.google.gerrit.client.rpc.RestApi actions ( int id , java.lang.String revision ) { if ( ( revision == null ) || ( revision.equals ( "" ) ) ) { revision = "current" ; } return com.google.gerrit.client.changes.ChangeApi.call ( id , revision , "actions" ) ; }
public java.lang.String get ( ) { return com.google.gerrit.reviewdb.CurrentSchemaVersion.Key.VALUE ; }
public void onSuccess ( com.google.gerrit.client.rpc.HttpResponse < com.google.gerrit.client.rpc.NativeString > result ) { textArea.setText ( result.getResult ( ) . asString ( ) ) ; }
public int compare ( java.lang.String o1 , java.lang.String o2 ) { return com.google.gerrit.server.diff.PatchList.comparePaths ( o1 , o2 ) ; }
public void setWorkInProgress ( java.lang.String message ) { throw new com.google.gerrit.extensions.restapi.NotImplementedException ( ) ; }
private void initChannels ( ) { setChannelFactories ( java.util.Arrays.< org.apache.sshd.common.NamedFactory < org.apache.sshd.common.Channel > > asList ( new org.apache.sshd.server.channel.ChannelSession.Factory ( ) , new org.apache.sshd.common.forward.TcpipServerChannel.DirectTcpipFactory ( ) ) ) ; }
public < I > com.google.gerrit.server.index.FieldDef < I , java.lang.Iterable < T > > buildRepeatable ( com.google.gerrit.server.index.FieldDef.Getter < I , java.lang.Iterable < T > > getter ) { return new com.google.gerrit.server.index.FieldDef ( name , type , stored , true , getter ) ; }
private java.lang.String urlEdit ( ) { return ( "/changes/" + ( change.getChangeId ( ) ) ) + "/edit" ; }
public com.google.gerrit.server.account.AccountState getAccountState ( ) { if ( ( state ) == null ) { state = com.google.gerrit.server.util.FutureUtil.get ( accountCache.get ( getAccountId ( ) ) ) ; } return state ; }
public com.googlesource.gerrit.plugins.hooks.HookArgs createArgs ( ) { return new com.googlesource.gerrit.plugins.hooks.HookArgs ( anonymousCowardName , urlProvider , metrics , gitManager , sitePaths ) ; }
public com.google.gerrit.extensions.api.projects.ProjectApi create ( com.google.gerrit.extensions.api.projects.ProjectInput in ) throws com.google.gerrit.extensions.restapi.RestApiException { if ( ( in.name ) == null ) { throw new com.google.gerrit.extensions.restapi.BadRequestException ( "input.name is required" ) ; } return name ( in.name ) . create ( in ) ; }
public com.google.gerrit.server.change.ChangeResource getChangeResource ( ) { return change ; }
private com.google.gerrit.server.notedb.ChangeUpdate newUpdate ( com.google.gerrit.reviewdb.client.Change c , com.google.gerrit.server.IdentifiedUser user ) throws java.lang.Exception { return new com.google.gerrit.server.notedb.ChangeUpdate ( serverIdent , repoManager , com.google.gerrit.server.notedb.NotesMigration.allEnabled ( ) , accountCache , null , com.google.gerrit.server.notedb.ChangeNotesTest.LABEL_TYPES , stubChangeControl ( c , user ) , com.google.gerrit.server.util.TimeUtil.nowTs ( ) ) ; }
public com.google.gerrit.extensions.common.ProjectInfo get ( ) throws com.google.gerrit.extensions.restapi.RestApiException { if ( ( project ) == null ) { throw new com.google.gerrit.extensions.restapi.ResourceNotFoundException ( name ) ; } return projectJson.format ( project.getControl ( ) ) ; }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > removeAsync ( K key ) ;
public void onSuccess ( com.google.gerrit.client.changes.ChangeList result ) { hasDraftComments = ( result.length ( ) ) > 0 ; }
public void run ( ) { skipManager.removeAll ( ) ; skipManager.render ( context , diff ) ; updateRenderEntireFile ( ) ; }
void resizeCodeMirror ( ) { int height = getCodeMirrorHeight ( ) ; cmA.setHeight ( height ) ; cmB.setHeight ( height ) ; diffTable.overview.refresh ( ) ; }
public void flushAll_BadRequest ( ) throws java.lang.Exception { adminSession.post ( "/config/server/caches/" , new com.google.gerrit.server.config.PostCaches.Input ( com.google.gerrit.server.config.PostCaches.Operation.FLUSH_ALL , java.util.Arrays.asList ( "projects" ) ) ) . assertBadRequest ( ) ; }
private void enable ( final boolean on ) { showSiteHeader.setEnabled ( on ) ; defaultContext.setEnabled ( on ) ; }
private PatchSet.Id nextPatchSetId ( com.google.gerrit.server.notedb.ChangeNotes notes ) throws java.lang.Exception { return com.google.gerrit.server.ChangeUtil.nextPatchSetId ( testRepo.getRepository ( ) , notes.getChange ( ) . currentPatchSetId ( ) ) ; }
public com.google.gerrit.extensions.restapi.BinaryResult patch ( java.lang.String path ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return getPatch.setPath ( path ) . apply ( revision ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot get patch" , e ) ; } }
com.google.gerrit.server.git.BatchUpdate newBatchUpdate ( java.sql.Timestamp when ) { return batchUpdateFactory.create ( db , destBranch.getParentKey ( ) , caller , when ) . setRepository ( repo , rw , inserter ) ; }
public void index ( com.google.gerrit.reviewdb.client.AccountGroup.UUID uuid ) throws java.io.IOException { for ( com.google.gerrit.index.Index < ? , com.google.gerrit.reviewdb.client.AccountGroup > i : getWriteIndexes ( ) ) { i.replace ( groupCache.get ( uuid ) ) ; } fireGroupIndexedEvent ( uuid.get ( ) ) ; }
void sync ( ) { dst.scrollToY ( align ( src.getScrollInfo ( ) . top ( ) ) ) ; }
public void before ( ) { com.google.common.truth.TruthJUnit.assume ( ) . that ( notesMigration.readChanges ( ) ) . isTrue ( ) ; }
public void evict ( com.google.gerrit.reviewdb.client.Account.Id accountId ) throws java.io.IOException { if ( accountId != null ) { byId.invalidate ( accountId ) ; indexer.get ( ) . index ( accountId ) ; } }
public void unblockMoreSpecificRefInLocal_Fails ( ) { com.google.gerrit.server.project.testing.Util.block ( parent , com.google.gerrit.common.data.Permission.PUSH , com.google.gerrit.server.group.SystemGroupBackend.ANONYMOUS_USERS , "refs/heads/*" ) ; com.google.gerrit.server.project.testing.Util.allow ( local , com.google.gerrit.common.data.Permission.PUSH , com.google.gerrit.server.project.testing.Util.DEVS , "refs/heads/master" ) ; com.google.gerrit.server.project.ProjectControl u = user ( local , com.google.gerrit.server.project.testing.Util.DEVS ) ; assertCannotUpdate ( "refs/heads/master" , u ) ; }
com.google.gerrit.client.GerritCss css ( ) ;
public void listTagsOfNonExistingProject ( ) throws java.lang.Exception { exception.expect ( com.google.gerrit.extensions.restapi.ResourceNotFoundException.class ) ; gApi.projects ( ) . name ( "does-not-exist" ) . tags ( ) . get ( ) ; }
private java.util.List < com.google.gerrit.client.WebLinkInfo > getWebLinks ( com.google.gerrit.client.diff.DiffInfo diffInfo ) { return diffInfo.unifiedWebLinks ( ) ; }
public void threeLevelTreeWithAllIndexPredicates ( ) throws java.lang.Exception { com.google.gerrit.index.query.Predicate < com.google.gerrit.server.query.change.ChangeData > in = parse ( "-status:abandoned (file:a OR file:b)" ) ; com.google.common.truth.Truth.assertThat ( rewrite.rewrite ( in , com.google.gerrit.server.index.change.ChangeIndexRewriterTest.options ( 0 , com.google.gerrit.common.data.GlobalCapability.DEFAULT_MAX_QUERY_LIMIT ) ) ) . isEqualTo ( query ( in ) ) ; }
public void evict ( final com.google.gerrit.client.reviewdb.Project p ) { if ( p != null ) { byName.remove ( p.getNameKey ( ) ) ; } }
public com.google.common.util.concurrent.CheckedFuture < ? , java.io.IOException > indexAsync ( com.google.gerrit.server.query.change.ChangeData cd ) { return ( executor ) != null ? submit ( new com.google.gerrit.server.index.ChangeIndexer.Task ( cd , false ) ) : com.google.common.util.concurrent.Futures.< java.lang.Object , java.io.IOException > immediateCheckedFuture ( null ) ; }
void onReplace ( org.eclipse.jgit.lib.ObjectId oldNotesRev , org.eclipse.jgit.lib.ObjectId newNotesRev , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId > toRemove , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId > toAdd ) throws java.io.IOException ;
public void onSuccess ( com.google.gerrit.client.VoidResult result ) { generation = g ; setClean ( cm.isClean ( g ) ) ; }
static void delete ( com.google.gerrit.reviewdb.client.Change.Id id , com.google.gwt.user.client.ui.Button ... draftButtons ) { com.google.gerrit.client.changes.ChangeApi.deleteChange ( id.get ( ) , com.google.gerrit.client.change.ChangeActions.mine ( draftButtons ) ) ; }
public void negativeStartCharacterResultsInInvalidRange ( ) { com.google.gerrit.extensions.client.Comment.Range range = createRange ( 13 , ( - 1 ) , 19 , 10 ) ; com.google.gerrit.extensions.common.testing.RangeSubject.assertThat ( range ) . isInvalid ( ) ; }
public static com.google.gerrit.testutil.InMemoryDatabase newDatabase ( com.google.gerrit.lifecycle.LifecycleManager lifecycle ) { return com.google.gerrit.testutil.InMemoryModule.createInjector ( lifecycle ) . getInstance ( com.google.gerrit.testutil.InMemoryDatabase.class ) ; }
protected void onInitUI ( ) { super . onInitUI ( ) ; setPageTitle ( AdminConstants.I.createGroupTitle ( ) ) ; addCreateGroupPanel ( ) ; }
public com.google.gerrit.reviewdb.AccountGroup get ( com.google.gerrit.reviewdb.AccountGroup.NameKey name ) ;
public void onSuccess ( T value ) { this . result = value ; success ( this ) ; }
public static boolean hasActive ( com.google.gerrit.index.query.Predicate < com.google.gerrit.server.account.AccountState > p ) { return ( com.google.gerrit.index.query.QueryBuilder.find ( p , com.google.gerrit.server.query.account.AccountPredicates.AccountPredicate.class , AccountField.ACTIVE.getName ( ) ) ) != null ; }
public static void editWithFiles ( int id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.changes.ChangeInfo.EditInfo > cb ) { com.google.gerrit.client.changes.ChangeApi.edit ( id ) . addParameter ( "list" , true ) . get ( cb ) ; }
public void onClick ( com.google.gwt.event.dom.client.ClickEvent event ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toProjectDefaultDashboard ( info.project_name_key ( ) ) ) ; }
void onReviewersAdded ( com.google.gerrit.extensions.events.ReviewerAddedListener.Event event ) ;
public com.google.gerrit.extensions.common.WebLinkInfo getPathSetWebLink ( java.lang.String projectName , java.lang.String commit ) { return new com.google.gerrit.extensions.common.WebLinkInfo ( name , myImageUrl , java.lang.String.format ( placeHolderUrlProjectCommit , projectName , commit ) , com.google.gerrit.extensions.webui.WebLinkTarget.BLANK ) ; }
public com.google.gwtjsonrpc.common.VoidResult fromResult ( com.google.gwt.core.client.JavaScriptObject responseObject ) { return com.google.gwtjsonrpc.common.VoidResult.INSTANCE ; }
private com.google.gerrit.server.notedb.ChangeUpdate newUpdate ( com.google.gerrit.reviewdb.client.Change c , com.google.gerrit.server.IdentifiedUser user ) throws java.lang.Exception { return com.google.gerrit.testutil.TestChanges.newUpdate ( injector , repoManager , c , user ) ; }
, @ com.google.gerrit.acceptance.GerritConfig ( name = "suggest.fullTextSearchMaxMatches" , value = "2" ) } ) public void suggestReviewersFullTextSearchLimitMaxMatches ( ) throws java.lang.Exception { java.lang.String changeId = createChange ( ) . getChangeId ( ) ; java.util.List < com.google.gerrit.extensions.common.SuggestedReviewerInfo > reviewers = suggestReviewers ( changeId , "user" , 3 ) ; com.google.common.truth.Truth.assertThat ( reviewers ) . hasSize ( 3 ) ; }
private < T > com.google.common.util.concurrent.CheckedFuture < T , java.io.IOException > submit ( java.util.concurrent.Callable < T > task ) { return com.google.gerrit.server.index.change.ChangeIndexer.submit ( task , executor ) ; }
void dontBumpLastUpdatedOn ( ) ;
public org.apache.mina.core.service.IoAcceptor getIoAcceptor ( ) { return acceptor ; }
private java.lang.String parseBranch ( com.google.gerrit.server.notedb.ChangeNotesCommit commit ) throws org.eclipse.jgit.errors.ConfigInvalidException { java.lang.String branch = parseOneFooter ( commit , com.google.gerrit.server.notedb.ChangeNoteUtil.FOOTER_BRANCH ) ; return branch != null ? com.google.gerrit.reviewdb.client.RefNames.fullName ( branch ) : null ; }
protected com.google.gerrit.acceptance.server.mail.StagedChange stageWipChange ( ) throws java.lang.Exception { return stageChange ( ( ) -> super . stageWipChange ( ) ) ; }
public void start ( final org.apache.sshd.server.Environment env ) { startThread ( new com.google.gerrit.sshd.commands.CommandRunnable ( ) { @ java.lang.Override public void run ( ) throws java.lang.Exception { parseCommandLine ( ) ; display ( ) ; } } ) ; }
private com.google.gerrit.common.ChangeHookRunner.AuthorAttribute getAccountAttribute ( final com.google.gerrit.reviewdb.Account account ) { com.google.gerrit.common.ChangeHookRunner.AuthorAttribute author = new com.google.gerrit.common.ChangeHookRunner.AuthorAttribute ( ) ; author.name = account.getFullName ( ) ; author.email = account.getPreferredEmail ( ) ; return author ; }
public java.lang.Object apply ( com.google.gerrit.server.group.MemberResource resource , com.google.gerrit.server.group.AddMembers.PutMember.Input input ) { return get.get ( ) . apply ( resource ) ; }
public void onSuccess ( final com.google.gerrit.client.info.GroupInfo result ) { com.google.gwt.user.client.History.newItem ( com.google.gerrit.client.Dispatcher.toGroup ( result.getGroupId ( ) , AccountGroupScreen.MEMBERS ) ) ; }
public java.util.Map < java.lang.String , java.lang.Object > toSoyData ( javax.servlet.http.HttpServletRequest req , org.eclipse.jgit.revwalk.RevCommit commit ) throws java.io.IOException { return toSoyData ( req , commit , com.google.gitiles.CommitSoyData.KeySet.DEFAULT ) ; }
public com.google.gerrit.extensions.common.ChangeInfo check ( com.google.gerrit.extensions.api.changes.FixInput fix ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return check.apply ( change , fix ) . value ( ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot check change" , e ) ; } }
public java.util.Map < java.lang.String , com.googlesource.gerrit.plugins.github.git.GHBranch > getBranches ( ) throws java.io.IOException { return ghRepository.getBranches ( ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { onExpandAll ( null ) ; }
public java.util.Set < com.google.gerrit.reviewdb.client.AccountGroup.UUID > subgroupsOf ( com.google.gerrit.reviewdb.client.AccountGroup.UUID group ) ;
public void setUseContentMerge ( final com.google.gerrit.reviewdb.client.Project.InheritedBoolean cm ) { useContentMerge = cm ; }
public WorkQueue.Executor getQueue ( com.google.gerrit.sshd.QueueType type ) { switch ( type ) { case INTERACTIVE : return interactiveExecutor ; case BATCH : default : return batchExecutor ; } }
public void addBranch ( final com.google.gerrit.reviewdb.client.Project.NameKey projectName , final java.lang.String branchName , final java.lang.String startingRevision , final com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.ListBranchesResult > callback ) { addBranchFactory.create ( projectName , branchName , startingRevision ) . to ( callback ) ; }
public void revokedKeyDueToNoLongerBeingUsed ( ) throws java.lang.Exception { com.google.gerrit.gpg.testing.TestKey k = add ( com.google.gerrit.gpg.testing.TestKeys.revokedNoLongerUsedKey ( ) ) ; add ( com.google.gerrit.gpg.testing.TestKeys.validKeyWithoutExpiration ( ) ) ; save ( ) ; assertProblems ( k , "Key is revoked (retired and no longer valid): test7 not used" ) ; }
public void testPushForMasterWithHashtagsNoteDbDisabled ( ) throws java.io.IOException , org.eclipse.jgit.api.errors.GitAPIException { com.google.common.truth.TruthJUnit.assume ( ) . that ( notesMigration.enabled ( ) ) . isFalse ( ) ; com.google.gerrit.acceptance.PushOneCommit.Result r = pushTo ( "refs/for/master%hashtag=tag1" ) ; r.assertErrorStatus ( "cannot add hashtags; noteDb is disabled" ) ; }
public com.google.gerrit.server.query.change.ChangeDataSource getSource ( com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > p , int start , int limit ) throws com.google.gerrit.server.query.QueryParseException { return new com.google.gerrit.server.index.FakeIndex.Source ( p ) ; }
public void onSuccess ( final com.google.gerrit.common.data.AccountProjectWatchInfo result ) { addNew.setEnabled ( true ) ; nameBox.setEnabled ( true ) ; filterTxt.setEnabled ( true ) ; nameTxt.setText ( "" ) ; watchesTab.insertWatch ( result ) ; }
public static com.google.gerrit.index.query.Predicate < com.google.gerrit.reviewdb.client.AccountGroup > name ( java.lang.String name ) { return new com.google.gerrit.server.query.group.GroupPredicates.GroupPredicate ( com.google.gerrit.server.index.group.GroupField.NAME , GroupQueryBuilder.FIELD_NAME , name.toLowerCase ( java.util.Locale.US ) ) ; }
public void changeIsDeletedFromIndex ( ) throws java.lang.Exception { syncIndexRestApiServlet.doDelete ( req , rsp ) ; org.mockito.Mockito.verify ( indexer , org.mockito.Mockito.times ( 1 ) ) . delete ( id ) ; org.mockito.Mockito.verify ( rsp ) . setStatus ( javax.servlet.http.HttpServletResponse.SC_NO_CONTENT ) ; }
private org.eclipse.jgit.lib.PersonIdent toCommitterIdent ( final com.google.gerrit.reviewdb.client.PatchSetApproval audit ) { if ( audit != null ) { return args.identifiedUserFactory.create ( audit.getAccountId ( ) ) . newCommitterIdent ( audit.getGranted ( ) , args.myIdent.getTimeZone ( ) ) ; } return args.myIdent ; }
public java.lang.Iterable < com.google.gerrit.server.project.ProjectState > parents ( ) { return com.google.common.collect.Iterables.skip ( tree ( ) , 1 ) ; }
public void onSuccess ( com.google.gerrit.client.account.AccountCapabilities result ) { if ( result.canPerform ( com.google.gerrit.common.data.GlobalCapability.ADMINISTRATE_SERVER ) ) { com.google.gerrit.client.Gerrit.addLink ( pluginsBar , com.google.gerrit.client.Gerrit.C.menuPluginsInstalled ( ) , PageLinks.ADMIN_PLUGINS ) ; com.google.gerrit.client.Gerrit.menuLeft.add ( pluginsBar , com.google.gerrit.client.Gerrit.C.menuPlugins ( ) ) ; } }
public static void addSignOutHandler ( final com.google.gerrit.client.SignOutHandler l ) { if ( ! ( com.google.gerrit.client.Gerrit.signOutHandlers.contains ( l ) ) ) { com.google.gerrit.client.Gerrit.signOutHandlers.add ( l ) ; } }
public void formatChange ( ) throws com.google.gerrit.common.errors.EmailException { appendText ( textTemplate ( "Comment" ) ) ; }
protected void configure ( ) { bind ( com.google.gerrit.server.extensions.events.GitReferenceUpdated.class ) . toInstance ( GitReferenceUpdated.DISABLED ) ; factory ( MetaDataUpdate.InternalFactory.class ) ; install ( com.google.gerrit.server.account.externalids.DisabledExternalIdCache.module ( ) ) ; }
public void onSuccess ( java.lang.Void result ) { display ( event.getValue ( ) ) ; }
public com.google.gerrit.extensions.restapi.Response < com.google.gerrit.server.plugins.ListPlugins.PluginInfo > apply ( com.google.gerrit.server.plugins.PluginResource resource , com.google.gerrit.server.plugins.InstallPlugin.Input input ) throws com.google.gerrit.extensions.restapi.BadRequestException , java.io.IOException { return new com.google.gerrit.server.plugins.InstallPlugin ( loader , resource.getName ( ) , false ) . apply ( TopLevelResource.INSTANCE , input ) ; }
private final native java.lang.String emailStrategyRaw ( ) ;
public com.google.gerrit.server.CurrentUser getUser ( ) { return context.getUser ( ) ; }
public void update ( java.lang.Iterable < com.google.gerrit.reviewdb.client.Change > instances ) { throw new java.lang.UnsupportedOperationException ( "do not call update; change is updated automatically" ) ; }
private static java.util.Optional < com.google.gerrit.reviewdb.client.Account > getAccount ( com.google.gerrit.reviewdb.client.Account.Id id ) { com.google.gerrit.reviewdb.client.Account account = new com.google.gerrit.reviewdb.client.Account ( id , com.google.gerrit.common.TimeUtil.nowTs ( ) ) ; account.setFullName ( ( "Account " + id ) ) ; return java.util.Optional.of ( account ) ; }
public void rebuildAndCheckChanges ( com.google.gerrit.reviewdb.client.Change ... changeIds ) throws java.lang.Exception { rebuildAndCheckChanges ( java.util.Arrays.stream ( changeIds ) , com.google.common.collect.ImmutableListMultimap.of ( ) ) ; }
com.google.gerrit.server.git.MetaDataUpdate create ( @ com.google.inject.assistedinject.Assisted com.google.gerrit.reviewdb.client.Project.NameKey projectName , @ com.google.inject.assistedinject.Assisted org.eclipse.jgit.lib.Repository db , @ com.google.inject.assistedinject.Assisted org.eclipse.jgit.lib.BatchRefUpdate batch ) ;
void halt ( ) { synchronized ( this ) { stop = true ; notify ( ) ; } try { join ( ) ; } catch ( java.lang.InterruptedException e ) { com.google.gerrit.lucene.LuceneChangeIndex.log.warn ( "error stopping refresh thread" , e ) ; } }
public com.google.gerrit.server.project.RefControl controlForRef ( com.google.gerrit.reviewdb.Branch.NameKey ref ) { return controlForRef ( ref.get ( ) ) ; }
private void postReplicationScheduledEvent ( com.googlesource.gerrit.plugins.replication.PushOne pushOp ) { postReplicationScheduledEvent ( pushOp , null ) ; }
static com.googlesource.gerrit.plugins.verifystatus.VerifyStatusQueryShell.Identity create ( final java.sql.ResultSet rs , final java.lang.String name ) throws java.sql.SQLException { return new com.googlesource.gerrit.plugins.verifystatus.VerifyStatusQueryShell.Identity ( rs.findColumn ( name ) , name ) ; }
void onCreateGroup ( com.google.gerrit.reviewdb.client.AccountGroup.UUID groupUuid ) throws java.io.IOException ;
public com.google.gerrit.server.IdentifiedUser create ( final com.google.gerrit.server.AccessPath accessPath , final com.google.gerrit.reviewdb.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( accessPath , authConfig , canonicalUrl , realm , accountCache , groupIncludeCache , remotePeerProvider , dbProvider , id ) ; }
protected void onUnload ( ) { if ( ( com.google.gerrit.client.SignInDialog.current ) == ( this ) ) { signInCallback.cancel ( ) ; com.google.gerrit.client.SignInDialog.current = null ; } super . onUnload ( ) ; }
private java.nio.file.Path getPluginDataDir ( java.lang.String name ) { return dataDir.resolve ( name ) ; }
protected void preDisplay ( final java.util.List < com.google.gerrit.client.reviewdb.Project > result ) { projects.display ( result ) ; projects.finishDisplay ( true ) ; }
void setTrees ( final boolean ap , final org.eclipse.jgit.lib.ObjectId a , final org.eclipse.jgit.lib.ObjectId b ) { againstParent = ap ; aId = a ; bId = b ; }
public void onFailure ( final java.lang.Throwable caught ) { save.setEnabled ( true ) ; registerNewEmail.setEnabled ( true ) ; super . onFailure ( caught ) ; }
public void onSuccess ( final com.google.gerrit.client.data.ChangeDetail r ) { if ( isAttached ( ) ) { setStarred ( r.isStarred ( ) ) ; display ( r ) ; } }
AccountGroup.UUID parse ( java.lang.String id ) { return new com.google.gerrit.reviewdb.client.AccountGroup.UUID ( id ) ; }
protected java.io.File newSitePath ( ) throws java.io.IOException { return new java.io.File ( createWorkRepository ( ) . getWorkTree ( ) , "test_site" ) ; }
public void testWithSectionOfNonexistingProject ( ) throws java.lang.Exception { org.eclipse.jgit.lib.Config cfg = new org.eclipse.jgit.lib.Config ( ) ; cfg.fromText ( ( "\n" + ( ( ( "[submodule \"a\"]\n" + "path = a\n" ) + "url = ssh://non-localhost/a\n" ) + "branch = .\\n" ) ) ) ; com.google.gerrit.reviewdb.client.Branch.NameKey targetBranch = new com.google.gerrit.reviewdb.client.Branch.NameKey ( new com.google.gerrit.reviewdb.client.Project.NameKey ( "project" ) , "master" ) ; java.util.Set < com.google.gerrit.reviewdb.client.SubmoduleSubscription > res = new com.google.gerrit.server.util.SubmoduleSectionParser ( cfg , com.google.gerrit.acceptance.git.SubmoduleSectionParserIT.THIS_SERVER , targetBranch ) . parseAllSections ( ) ; com.google.common.truth.Truth.assertThat ( res ) . isEmpty ( ) ; }
static void delete ( com.google.gerrit.reviewdb.client.Change.Id id , java.lang.String revision , com.google.gwt.user.client.ui.Button ... draftButtons ) { com.google.gerrit.client.changes.ChangeApi.deleteRevision ( id.get ( ) , revision , com.google.gerrit.client.change.ChangeActions.cs ( id , draftButtons ) ) ; }
public void submit ( java.lang.Iterable < com.google.gerrit.common.data.SubmitRecord > submitRecords ) { this . status = com.google.gerrit.reviewdb.client.PatchLineComment.Status.MERGED ; this . submitRecords = com.google.common.collect.ImmutableList.copyOf ( submitRecords ) ; com.google.common.base.Preconditions.checkArgument ( ( ! ( this . submitRecords.isEmpty ( ) ) ) , "no submit records specified at submit time" ) ; }
private void assertCreateFails ( com.google.gerrit.reviewdb.client.Branch.NameKey branch , java.lang.Class < ? extends com.google.gerrit.extensions.restapi.RestApiException > errType , java.lang.String errMsg ) throws java.lang.Exception { assertCreateFails ( branch , null , errType , errMsg ) ; }
public void assertStatus ( int status ) throws java.lang.Exception { com.google.common.truth.Truth.assert_ ( ) . withMessage ( java.lang.String.format ( "Expected status code %d" , status ) ) . that ( getStatusCode ( ) ) . isEqualTo ( status ) ; }
public com.google.gerrit.server.notedb.ChangeNotes notes ( ) throws com.google.gwtorm.server.OrmException { if ( ( notes ) == null ) { notes = notesFactory.create ( db , project , legacyId ) ; } return notes ; }
public abstract com.google.gerrit.server.mail.receive.MailMessage.Builder from ( com.google.gerrit.server.mail.Address val ) ;
boolean hasHeader ( ) { return header ; }
protected void destroyCommentRow ( final int row ) { super . destroyCommentRow ( row ) ; if ( row == ( ( R_HEAD ) + 1 ) ) { table.removeRow ( row ) ; isFileCommentBorderRowExist = false ; } }
public abstract java.util.SortedSet < com.google.gerrit.reviewdb.Project.NameKey > list ( ) ;
public void onSuccess ( com.google.gerrit.client.info.AccountPreferencesInfo prefs ) { com.google.gerrit.client.Gerrit.getUserAccount ( ) . setGeneralPreferences ( p ) ; com.google.gerrit.client.Gerrit.applyUserPreferences ( ) ; enable ( true ) ; display ( prefs ) ; com.google.gerrit.client.Gerrit.refreshMenuBar ( ) ; }
public java.util.List < com.google.gerrit.extensions.api.projects.TagInfo > get ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return listTags.request ( this ) . apply ( checkExists ( ) ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot list tags" , e ) ; } }
com.google.gerrit.server.project.RefControl forUser ( com.google.gerrit.server.CurrentUser who ) { com.google.gerrit.server.project.ProjectControl newCtl = projectControl.forUser ( who ) ; if ( relevant.isUserSpecific ( ) ) { return newCtl.controlForRef ( refName ) ; } return new com.google.gerrit.server.project.RefControl ( newCtl , refName , relevant ) ; }
public com.google.gerrit.server.group.GroupInfo apply ( com.google.gerrit.server.group.IncludedGroupResource rsrc ) { return new com.google.gerrit.server.group.GroupInfo ( rsrc.getMemberDescription ( ) ) ; }
protected void configure ( ) { bind ( com.google.gerrit.server.index.ChangeIndexer.class ) . to ( com.google.gerrit.server.index.ChangeIndexerImpl.class ) ; bind ( com.google.gerrit.server.query.change.ChangeQueryRewriter.class ) . to ( com.google.gerrit.server.index.IndexRewriteImpl.class ) ; bind ( IndexRewriteImpl.BasicRewritesImpl.class ) ; }
void setLineNumber ( com.google.gerrit.client.diff.DisplaySide side , int cmLine , int line ) { setLineNumber ( side , cmLine , java.lang.String.valueOf ( line ) , UnifiedTable.style.unifiedLineNumber ( ) ) ; }
private void subWindowResolution ( ) { com.google.gerrit.testing.TestTimeUtil.setClockStep ( 1 , java.util.concurrent.TimeUnit.SECONDS ) ; com.google.gerrit.common.TimeUtil.nowTs ( ) ; }
private static com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > commit ( com.google.gerrit.server.index.Schema < com.google.gerrit.server.query.change.ChangeData > schema , java.lang.String id ) { return new com.google.gerrit.server.query.change.CommitPredicate ( schema , id ) ; }
public void previous ( ) { com.google.common.truth.TruthJUnit.assume ( ) . that ( com.google.gerrit.testing.IndexVersionsTest.SCHEMA_DEF.getPrevious ( ) ) . isNotNull ( ) ; com.google.common.truth.Truth.assertThat ( com.google.gerrit.testing.IndexVersionsTest.get ( com.google.gerrit.testing.IndexVersions.PREVIOUS ) ) . containsExactly ( com.google.gerrit.testing.IndexVersionsTest.SCHEMA_DEF.getPrevious ( ) . getVersion ( ) ) ; }
public void nonProjectEventNotProcessed ( ) { com.google.gerrit.server.events.Event nonProjectEvent = new com.google.gerrit.server.events.Event ( "non-project-event" ) { } ; eventHandler.onEvent ( nonProjectEvent ) ; org.mockito.Mockito.verifyZeroInteractions ( remoteFactory ) ; org.mockito.Mockito.verifyZeroInteractions ( taskFactory ) ; org.mockito.Mockito.verifyZeroInteractions ( postTask ) ; }
public void testChangeOwner_OwnerACLGranted ( ) throws com.google.gwtorm.server.OrmException , java.io.IOException , org.eclipse.jgit.api.errors.GitAPIException , org.eclipse.jgit.errors.ConfigInvalidException { grantApproveToChangeOwner ( ) ; approve ( sessionOwner , createMyChange ( ) , HttpStatus.SC_OK ) ; }
public void onSuccess ( com.google.gerrit.client.info.AccountPreferencesInfo prefs ) { com.google.gerrit.client.Gerrit.setUserPreferences ( prefs ) ; enable ( true ) ; display ( prefs ) ; }
public boolean execute ( ) { java.lang.String t = message.getText ( ) ; if ( t != null ) { message.setCursorPos ( t.length ( ) ) ; } return false ; }
private final native int group_id ( ) ;
public void onFailure ( java.lang.Throwable err ) { setTabTitle ( tabInfo , tabInfo.getTitle ( Resources.C.notAvailable ( ) ) ) ; getTab ( tabInfo ) . setError ( err.getMessage ( ) ) ; onDone ( true ) ; }
public < T > com.google.common.base.Optional < T > getResource ( java.lang.String resourcePath , java.lang.Class < ? extends T > resourceClass ) { return com.google.common.base.Optional.absent ( ) ; }
public static com.google.web.bindery.event.shared.HandlerRegistration addHandler ( com.google.gerrit.reviewdb.client.Change.Id source , com.google.gerrit.client.changes.StarredChanges.ChangeStarHandler handler ) { return Gerrit.EVENT_BUS.addHandlerToSource ( com.google.gerrit.client.changes.TYPE , source , handler ) ; }
public final boolean disableChangeReviewDb ( ) { return snapshot.get ( ) . disableChangeReviewDb ( ) ; }
public static void deleteByBranch ( java.lang.String project , java.lang.String branch ) { com.googlesource.gerrit.plugins.repositoryuse.Usage.log.debug ( java.lang.String.format ( "Deleting all uses: %s, %s" , project , branch ) ) ; com.googlesource.gerrit.plugins.repositoryuse.Usage.table.deleteByBranch ( project , branch ) ; }
void onRefReplicatedToOneNode ( java.lang.String project , java.lang.String ref , org.eclipse.jgit.transport.URIish uri , com.googlesource.gerrit.plugins.replication.ReplicationState.RefPushResult status ) { }
public com.google.gerrit.server.change.ChangeJson addOption ( com.google.gerrit.common.changes.ListChangesOption o ) { options.add ( o ) ; return this ; }
public void visit ( org.commonmark.node.Paragraph node ) { if ( com.google.gitiles.doc.MarkdownToHtml.isInTightList ( node ) ) { visitChildren ( node ) ; } else { wrapChildren ( "p" , node ) ; } }
public com.google.gerrit.reviewdb.server.AccountGroupByIdAccess accountGroupById ( ) { throw new com.google.gerrit.testing.DisabledReviewDb.Disabled ( ) ; }
void changePreferences ( com.google.gerrit.client.reviewdb.AccountGeneralPreferences pref , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwtjsonrpc.client.VoidResult > gerritCallback ) ;
public java.lang.String toString ( ) { return java.lang.String.format ( "[%s] Evict key '%s' from cache '%s' in target instance" , pluginName , key , cacheName ) ; }
public void listBranchesOfEmptyProject ( ) throws java.lang.Exception { com.google.gerrit.acceptance.rest.project.RefAssert.assertRefs ( com.google.common.collect.ImmutableList.of ( com.google.gerrit.acceptance.rest.project.ListBranchesIT.branch ( "HEAD" , null , false ) , com.google.gerrit.acceptance.rest.project.ListBranchesIT.branch ( RefNames.REFS_CONFIG , null , false ) ) , list ( ) . get ( ) ) ; }
public com.google.gerrit.sshd.SshKeyCacheEntryIterable missing ( java.lang.String username ) { return SshKeyCacheEntryIterable.EMPTY ; }
public void assertPushOptions ( java.util.List < java.lang.String > pushOptions ) { org.junit.Assert.assertEquals ( pushOptions , getPushOptions ( ) ) ; }
private void redisplay ( ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( patchSet.getId ( ) . getParentKey ( ) ) , new com.google.gerrit.client.changes.ChangeScreen ( patchSet.getId ( ) . getParentKey ( ) ) ) ; }
private void initHttpd ( ) { webInjector = createWebInjector ( ) ; sysInjector.getInstance ( com.google.gerrit.httpd.HttpCanonicalWebUrlProvider.class ) . setHttpServletRequest ( webInjector.getProvider ( javax.servlet.http.HttpServletRequest.class ) ) ; httpdInjector = createHttpdInjector ( ) ; manager.add ( webInjector , httpdInjector ) ; }
public void onKeyPress ( final com.google.gwt.event.dom.client.KeyPressEvent event ) { final com.google.gerrit.reviewdb.PatchSet.Id id = patchKey.getParentKey ( ) ; com.google.gerrit.client.Gerrit.display ( com.google.gerrit.client.Dispatcher.toPublish ( id ) ) ; }
public void start ( final org.apache.sshd.server.Environment env ) { startThread ( new com.google.gerrit.sshd.commands.CommandRunnable ( ) { @ java.lang.Override public void run ( ) throws java.lang.Exception { parseCommandLine ( ) ; com.google.gerrit.sshd.commands.ListProjects.this . display ( ) ; } } ) ; }
void revertChange ( com.google.gerrit.reviewdb.client.PatchSet.Id patchSetId , java.lang.String message , com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.ChangeDetail > callback ) ;
void load ( ) throws java.io.IOException { css = com.google.gerrit.httpd.HtmlDomUtil.readFile ( cssFile.path.getParent ( ) , cssFile.path.getFileName ( ) . toString ( ) ) ; header = com.google.gerrit.httpd.template.SiteHeaderFooter.Template.readXml ( headerFile ) ; footer = com.google.gerrit.httpd.template.SiteHeaderFooter.Template.readXml ( footerFile ) ; }
public void deleteReviewerFromWipChange ( ) throws java.lang.Exception { com.google.gerrit.acceptance.server.mail.StagedChange sc = stageWipChangeWithExtraReviewer ( ) ; removeReviewer ( sc , extraReviewer ) ; assertThat ( sender ) . notSent ( ) ; }
public com.google.gerrit.server.change.ChangeInserter setGroups ( java.util.List < java.lang.String > groups ) { com.google.common.base.Preconditions.checkNotNull ( groups , "groups may not be empty" ) ; com.google.common.base.Preconditions.checkState ( ( ( patchSet ) == null ) , "setGroups(Iterable<String>) only valid before creating change" ) ; this . groups = groups ; return this ; }
void createGroup ( java.lang.String newName , com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.reviewdb.client.AccountGroup.Id > callback ) ;
public synchronized com.google.gerrit.server.account.AccountSshKey addKey ( com.google.gerrit.reviewdb.client.Account.Id accountId , java.lang.String pub ) throws com.google.gerrit.common.errors.InvalidSshKeyException , java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { com.google.gerrit.server.account.VersionedAuthorizedKeys authorizedKeys = read ( accountId ) ; com.google.gerrit.server.account.AccountSshKey key = authorizedKeys.addKey ( pub ) ; commit ( authorizedKeys ) ; return key ; }
public void write ( int c ) throws java.io.IOException { osWriter.write ( c ) ; osWriter.flush ( ) ; }
abstract boolean match ( short psValue , short expValue ) ;
public synchronized void sendError ( int sc , java.lang.String msg ) { status = sc ; committed = true ; }
public com.googlesource.gerrit.plugins.github.git.PagedIterable < com.googlesource.gerrit.plugins.github.git.GHMilestone > listMilestones ( com.googlesource.gerrit.plugins.github.git.GHIssueState state ) { return ghRepository.listMilestones ( state ) ; }
com.google.gwtorm.client.ResultSet < com.google.gerrit.client.reviewdb.ProjectRight > byCategoryGroup ( com.google.gerrit.client.reviewdb.ApprovalCategory.Id cat , com.google.gerrit.client.reviewdb.AccountGroup.Id group ) throws com.google.gwtorm.client.OrmException ;
public void configure ( ) { factory ( ChangeUpdate.Factory.class ) ; factory ( ChangeDraftUpdate.Factory.class ) ; bind ( com.google.gerrit.server.CurrentUser.class ) . toInstance ( user ) ; }
void setNoSignedOffBy ( boolean on ) { signedOffBy = com.google.gerrit.reviewdb.client.Project.InheritableBoolean.FALSE ; }
public java.lang.String getKeyIdString ( ) { return com.google.gerrit.gpg.PublicKeyStore.keyIdToString ( getPublicKey ( ) . getKeyID ( ) ) ; }
public double doubleValue ( ) { return val ; }
public final native void baseChange ( java.lang.String b ) ;
private org.eclipse.jgit.lib.PersonIdent getRefLogIdent ( com.google.gerrit.server.IdentifiedUser user ) { return user.newRefLogIdent ( com.google.gerrit.common.TimeUtil.nowTs ( ) , tz ) ; }
public void onFailure ( java.lang.Throwable caught ) { new com.google.gerrit.client.ErrorDialog ( caught.getMessage ( ) ) . center ( ) ; enableForm ( true ) ; }
public static org.eclipse.jgit.transport.PushResult pushHead ( org.eclipse.jgit.junit.TestRepository < ? > testRepo , java.lang.String ref , boolean pushTags , boolean force ) throws org.eclipse.jgit.api.errors.GitAPIException { return com.google.gerrit.acceptance.GitUtil.pushOne ( testRepo , "HEAD" , ref , pushTags , force , null ) ; }
abstract java.lang.String getLineNumberClassName ( ) ;
public java.util.List < com.google.gerrit.reviewdb.client.PatchSet > patchSets ( ) throws com.google.gwtorm.server.OrmException { if ( ( patchSets ) == null ) { patchSets = psUtil.byChange ( db , notes ( ) ) ; } return patchSets ; }
public com.googlesource.gerrit.plugins.xdocs.ConfigSection getFormatterConfig ( java.lang.String formatterName ) { return new com.googlesource.gerrit.plugins.xdocs.ConfigSection ( cfg , com.googlesource.gerrit.plugins.xdocs.XDocGlobalConfig.SECTION_FORMATTER , formatterName ) ; }
public void testMIXED_FullyConfiguredUser ( ) { setFrom ( "MIXED" ) ; final java.lang.String name = "A U. Thor" ; final java.lang.String email = "a.u.thor@test.example.com" ; final com.google.gerrit.reviewdb.client.Account.Id user = user ( name , email ) ; org.easymock.EasyMock.replay ( accountCache ) ; final com.google.gerrit.server.mail.Address r = create ( ) . from ( user ) ; com.google.common.truth.Truth.assertThat ( r ) . isNotNull ( ) ; com.google.common.truth.Truth.assertThat ( r.name ) . isEqualTo ( ( name + " (Code Review)" ) ) ; com.google.common.truth.Truth.assertThat ( r.email ) . isEqualTo ( ident.getEmailAddress ( ) ) ; org.easymock.EasyMock.verify ( accountCache ) ; }
com.google.gerrit.server.CurrentUser getCurrentUser ( ) { if ( isSignedIn ( ) ) { return identified.create ( AccessPath.WEB , val.getAccountId ( ) ) ; } return anonymous ; }
private com.google.gerrit.reviewdb.client.PatchSet lookupCurrentPatchSet ( com.google.gerrit.server.notedb.ChangeNotes notes ) throws com.google.gwtorm.server.OrmException { return patchSetUtil.current ( reviewDb.get ( ) , notes ) ; }
public void setUp ( ) throws java.lang.Exception { admin = accounts.create ( "admin" , "admin@example.com" , "Administrator" , "Administrators" ) ; project = new com.google.gerrit.reviewdb.client.Project.NameKey ( "p" ) ; com.google.gerrit.acceptance.git.GitUtil.initSsh ( admin ) ; com.google.gerrit.acceptance.SshSession sshSession = new com.google.gerrit.acceptance.SshSession ( admin ) ; com.google.gerrit.acceptance.git.GitUtil.createProject ( sshSession , project.get ( ) ) ; java.lang.String url ; switch ( protocol ) { case SSH : url = sshSession.getUrl ( ) ; break ; case HTTP : url = admin.getHttpUrl ( ) ; break ; default : throw new java.lang.IllegalStateException ( ( "unexpected protocol: " + ( protocol ) ) ) ; } git = com.google.gerrit.acceptance.git.GitUtil.cloneProject ( ( ( url + "/" ) + ( project.get ( ) ) ) ) ; sshSession.close ( ) ; db = reviewDbProvider.open ( ) ; }
static com.google.gerrit.server.query.Predicate < com.google.gerrit.server.account.AccountState > username ( java.lang.String username ) { return new com.google.gerrit.server.query.account.AccountPredicates.AccountPredicate ( com.google.gerrit.server.index.account.AccountField.USERNAME , AccountQueryBuilder.FIELD_USERNAME , username ) ; }
protected void onInitUI ( ) { super . onInitUI ( ) ; setWindowTitle ( Gerrit.C.menuMyDrafts ( ) ) ; setPageTitle ( Util.C.draftsHeading ( ) ) ; }
public boolean containsCommentPublished ( com.google.gerrit.reviewdb.client.Comment c ) { for ( com.google.gerrit.reviewdb.client.Comment l : getComments ( ) . values ( ) ) { if ( c.key.equals ( l.key ) ) { return true ; } } return false ; }
public com.google.gerrit.server.query.change.QueryOptions withLimit ( int newLimit ) { return com.google.gerrit.server.query.change.QueryOptions.create ( config ( ) , start ( ) , newLimit , fields ( ) ) ; }
public static com.google.gerrit.client.rpc.RestApi editWithCommands ( @ com.google.gerrit.common.Nullable java.lang.String project , int id ) { return com.google.gerrit.client.changes.ChangeApi.edit ( project , id ) . addParameterTrue ( "download-commands" ) ; }
protected void ccAllApprovals ( ) { try { for ( com.google.gerrit.reviewdb.client.Account.Id id : getReviewers ( ) . values ( ) ) { add ( RecipientType.CC , id ) ; } } catch ( com.google.gwtorm.server.OrmException err ) { com.google.gerrit.server.mail.ChangeEmail.log.warn ( "Cannot CC users that reviewed updated change" , err ) ; } }
public void onLoad ( ) { super . onLoad ( ) ; Util.LIST_SVC.myStarredChanges ( loadCallback ( ) ) ; }
public java.util.Map < java.lang.Integer , com.googlesource.gerrit.plugins.github.git.GHMilestone > getMilestones ( ) throws java.io.IOException { return ghRepository.getMilestones ( ) ; }
public void addOtherUsersGpgKey_Conflict ( ) throws java.lang.Exception { addExternalIdEmail ( admin , "test5@example.com" ) ; com.google.gerrit.reviewdb.client.AccountExternalId extId = new com.google.gerrit.reviewdb.client.AccountExternalId ( user.getId ( ) , new com.google.gerrit.reviewdb.client.AccountExternalId.Key ( "foo:myId" ) ) ; db.accountExternalIds ( ) . insert ( java.util.Collections.singleton ( extId ) ) ; com.google.gerrit.gpg.testutil.TestKey key = com.google.gerrit.gpg.testutil.TestKeys.validKeyWithSecondUserId ( ) ; addGpgKey ( key.getPublicKeyArmored ( ) ) ; setApiUser ( user ) ; exception.expect ( com.google.gerrit.extensions.restapi.ResourceConflictException.class ) ; exception.expectMessage ( "GPG key already associated with another account" ) ; addGpgKey ( key.getPublicKeyArmored ( ) ) ; }
public static boolean isInvalidXSRF ( final java.lang.Throwable caught ) { return ( caught instanceof com.google.gwt.user.client.rpc.InvocationException ) && ( caught.getMessage ( ) . equals ( JsonUtil.ERROR_INVALID_XSRF ) ) ; }
private com.google.gerrit.extensions.api.projects.TagApi tag ( ) throws java.lang.Exception { return gApi.projects ( ) . name ( project.get ( ) ) . tag ( com.google.gerrit.acceptance.rest.project.DeleteTagIT.TAG ) ; }
void onAddMe ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { java.lang.String accountId = java.lang.String.valueOf ( com.google.gerrit.client.Gerrit.getUserAccount ( ) . _accountId ( ) ) ; addReviewer ( accountId , false ) ; }
public void testInsertNothing ( ) throws com.google.gwtorm.server.OrmException { setup ( ) ; createClassUnderTest ( ) . insert ( noData ) ; }
public final native boolean isClean ( int generation ) ;
void patchSetDetail ( com.google.gerrit.reviewdb.PatchSet.Id keyA , com.google.gerrit.reviewdb.PatchSet.Id keyB , com.google.gerrit.reviewdb.AccountDiffPreference diffPrefs , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.common.data.PatchSetDetail > callback ) ;
public java.lang.String algorithm ( ) { return publicKeyPart ( 0 , "none" ) ; }
public com.googlesource.gerrit.plugins.github.git.GHIssueBuilder createIssue ( java.lang.String title ) { return ghRepository.createIssue ( title ) ; }
public com.google.gerrit.server.update.BatchUpdate create ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.server.CurrentUser user , java.sql.Timestamp when ) { return reviewDbBatchUpdateFactory.create ( db , project , user , when ) ; }
public com.google.gerrit.extensions.common.WebLinkInfo getProjectWeblink ( java.lang.String projectName ) { return new com.google.gerrit.extensions.common.WebLinkInfo ( name , null , java.lang.String.format ( "%s/%s" , baseUrl , projectName ) , target ) ; }
protected void onCellSingleClick ( com.google.gwt.user.client.Event event , int row , int column ) { super . onCellSingleClick ( event , row , column ) ; if ( ( column == 1 ) || ( column == 4 ) ) { onCellDoubleClick ( row , column ) ; } }
public java.util.List < com.google.gerrit.reviewdb.client.ChangeMessage > messages ( ) throws com.google.gwtorm.server.OrmException { if ( ( messages ) == null ) { messages = cmUtil.byChange ( db , notes ) ; } return messages ; }
public static java.lang.String fullName ( java.lang.String ref ) { return ( ref.startsWith ( com.google.gerrit.reviewdb.client.RefNames.REFS ) ) || ( ref.equals ( com.google.gerrit.reviewdb.client.RefNames.HEAD ) ) ? ref : ( com.google.gerrit.reviewdb.client.RefNames.REFS_HEADS ) + ref ; }
void onLogin ( ) { async.append ( log ( ( "LOGIN FROM " + ( session.get ( ) . getRemoteAddressAsString ( ) ) ) ) ) ; audit ( context.get ( ) , "0" , "LOGIN" , new java.lang.String [ ] { } ) ; }
public com.google.gwt.event.shared.HandlerRegistration addBlurHandler ( com.google.gwt.event.dom.client.BlurHandler handler ) { if ( ( focusy ) != null ) { return focusy.addBlurHandler ( handler ) ; } return com.google.gerrit.client.ui.FancyFlexTable.NoopRegistration.INSTANCE ; }
public java.lang.String getRefName ( ) { return com.google.gerrit.server.edit.ChangeEditUtil.editRefName ( user.getAccountId ( ) , change.getId ( ) ) ; }
public com.googlecode.prolog_cafe.lang.Term getMessageTerm ( ) { com.googlecode.prolog_cafe.lang.Term [ ] args = new com.googlecode.prolog_cafe.lang.Term [ ] { new com.googlecode.prolog_cafe.lang.JavaObjectTerm ( goal ) , new com.googlecode.prolog_cafe.lang.IntegerTerm ( argNo ) , com.googlecode.prolog_cafe.lang.SymbolTerm.create ( flag ) } ; return new com.googlecode.prolog_cafe.lang.StructureTerm ( com.googlecode.prolog_cafe.exceptions.RepresentationException.REPRESENTATION_ERROR , args ) ; }
public void onSuccess ( com.google.gerrit.client.info.ChangeInfo c ) { project.setInnerText ( c.project ( ) ) ; com.google.gwtexpui.safehtml.client.SafeHtml.setInnerHTML ( filePath , com.google.gerrit.client.diff.Header.formatPath ( path , null , null ) ) ; }
public java.lang.String apply ( com.google.gerrit.gpg.testutil.TestKey in ) { return in.getKeyIdString ( ) ; }
public void getOpenChange_NotFound ( ) throws java.lang.Exception { com.google.gerrit.acceptance.PushOneCommit.Result r = pushFactory.create ( db , admin.getIdent ( ) , testRepo ) . to ( "refs/for/master" ) ; r.assertOkStatus ( ) ; assertNotFound ( r.getCommitId ( ) ) ; }
public long getDateHeader ( java.lang.String name ) { java.lang.String v = getHeader ( name ) ; return v == null ? 0 : com.google.gerrit.util.http.testutil.FakeHttpServletRequest.rfcDateformatter.parse ( v , java.time.Instant :: from ) . getEpochSecond ( ) ; }
public void run ( ) { try { wrapped.call ( ) ; } catch ( java.lang.Exception e ) { com.google.common.base.Throwables.propagateIfPossible ( e ) ; throw new java.lang.RuntimeException ( e ) ; } }
public void commit ( ) throws com.google.gwtorm.client.OrmException ;
public com.google.gerrit.server.IdentifiedUser create ( java.net.SocketAddress remotePeer , com.google.gerrit.reviewdb.client.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( capabilityControlFactory , authConfig , anonymousCowardName , canonicalUrl , realm , accountCache , groupBackend , com.google.inject.util.Providers.of ( remotePeer ) , null , id ) ; }
void onIgnore ( com.google.gwt.event.dom.client.ClickEvent e ) { onIgnore ( updated ) ; removeFromParent ( ) ; }
public boolean canAddGroup ( final com.google.gerrit.reviewdb.AccountGroup.Id id ) { return isOwner ( ) ; }
public java.lang.String getChannel ( ) { return clean ( channel ) ; }
public void rebuildEmptySiteStartingWithNoteDbDisabed ( ) throws java.lang.Exception { assertNotesMigrationState ( NotesMigrationState.REVIEW_DB ) ; com.google.gerrit.acceptance.pgm.MigrateToNoteDbIT.runGerrit ( "MigrateToNoteDb" , "-d" , sitePath , "--show-stack-trace" ) ; assertNotesMigrationState ( NotesMigrationState.READ_WRITE_NO_SEQUENCE ) ; }
com.google.gerrit.extensions.client.Side getStoredSideFromDisplaySide ( com.google.gerrit.client.diff.DisplaySide side ) { if ( ( side == ( DisplaySide.A ) ) && ( ( ( base ) == null ) || ( ( base.get ( ) ) < 0 ) ) ) { return com.google.gerrit.extensions.client.Side.PARENT ; } return com.google.gerrit.extensions.client.Side.REVISION ; }
void onEdit ( com.google.gwt.event.dom.client.ClickEvent e ) { e.stopPropagation ( ) ; setEdit ( true ) ; }
public java.util.Collection < com.google.gerrit.reviewdb.AccountGroup.UUID > getByInclude ( com.google.gerrit.reviewdb.AccountGroup.UUID groupId ) { return byInclude.get ( groupId ) ; }
com.google.gerrit.server.account.IncludingGroupMembership create ( java.lang.Iterable < com.google.gerrit.reviewdb.client.AccountGroup.UUID > groupIds ) ;
public com.google.gerrit.reviewdb.client.Change abandon ( com.google.gerrit.server.project.ChangeControl control , java.lang.String msgTxt ) throws com.google.gerrit.extensions.restapi.RestApiException , com.google.gerrit.server.git.UpdateException { return abandon ( control , msgTxt , NotifyHandling.ALL , com.google.common.collect.ImmutableListMultimap.of ( ) ) ; }
private java.lang.String urlEdit ( ) { return ( "/changes/" + ( change.getChangeId ( ) ) ) + "/edit" ; }
public static PatchSet.Id nextPatchSetId ( org.eclipse.jgit.lib.Repository git , com.google.gerrit.reviewdb.client.PatchSet.Id id ) throws java.io.IOException { return com.google.gerrit.server.ChangeUtil.nextPatchSetId ( git.getRefDatabase ( ) . getRefs ( RefDatabase.ALL ) , id ) ; }
public void display ( com.google.gerrit.client.dashboards.DashboardList dashes ) { display ( com.google.gerrit.client.rpc.Natives.asList ( dashes ) ) ; }
public void run ( ) { if ( cm.extras ( ) . hasActiveLine ( ) ) { newDraft ( cm , ( ( cm.getLineNumber ( cm.extras ( ) . activeLine ( ) ) ) + 1 ) ) ; } }
public com.google.gerrit.server.git.ReplaceOp setRequestScopePropagator ( com.google.gerrit.server.util.RequestScopePropagator requestScopePropagator ) { this . requestScopePropagator = requestScopePropagator ; return this ; }
java.lang.Iterable < java.lang.String > getMetricNames ( ) { return descriptions.keySet ( ) ; }
public void onSuccess ( com.google.gerrit.client.changes.ChangeInfo c ) { project.setInnerText ( c.project ( ) ) ; com.google.gwtexpui.safehtml.client.SafeHtml.setInnerHTML ( filePath , com.google.gerrit.client.diff.Header.formatPath ( path , null , null ) ) ; }
public void testOnTime ( ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( Verifier.onTime ( formatter.format ( now ( ) . plusMillis ( 1 ) ) ) ) . isTrue ( ) ; }
public void setMessages ( java.util.List < com.google.gerrit.client.reviewdb.ChangeMessage > m ) { messages = m ; }
public static com.google.gerrit.index.IndexConfig.Builder builder ( ) { return new com.google.gerrit.index.AutoValue_IndexConfig.Builder ( ) . maxLimit ( java.lang.Integer.MAX_VALUE ) . maxPages ( java.lang.Integer.MAX_VALUE ) . maxTerms ( com.google.gerrit.index.IndexConfig.DEFAULT_MAX_TERMS ) . separateChangeSubIndexes ( false ) ; }
public void testWarnExistingFaultyNameRuleBaseFile ( ) throws java.io.IOException { injectRuleBase ( "" , com.googlesource.gerrit.plugins.hooks.workflow.RuleBaseTest.RuleBaseKind.FAULTY ) ; replayMocks ( ) ; createRuleBase ( ) ; assertLogMessageContains ( "Please migrate" ) ; assertLogMessageContains ( "Neither global" ) ; }
public java.lang.Iterable < com.google.gerrit.prettify.common.EditList.Hunk > getHunks ( ) { return new com.google.gerrit.prettify.common.EditList ( edits , getContext ( ) , a.size ( ) , b.size ( ) ) . getHunks ( ) ; }
private static java.lang.String getJsPluginPath ( com.google.gerrit.server.plugins.Plugin plugin ) { return java.lang.String.format ( "/plugins/%s/static/%s" , plugin.getName ( ) , plugin.getSrcFile ( ) . getFileName ( ) ) ; }
public void resetToDefaults ( ) { maximumPageSize = com.google.gerrit.reviewdb.AccountGeneralPreferences.DEFAULT_PAGESIZE ; showSiteHeader = true ; useFlashClipboard = true ; copySelfOnEmail = false ; downloadUrl = null ; downloadCommand = null ; dateFormat = null ; timeFormat = null ; }
public void BROKEN_testIsEnabledUnknownEvent ( ) { com.google.gerrit.server.events.Event event = new com.google.gerrit.server.events.Event ( "foo" ) { } ; com.googlesource.gerrit.plugins.its.base.its.ItsConfig itsConfig = createItsConfig ( ) ; replayMocks ( ) ; assertFalse ( itsConfig.isEnabled ( event ) ) ; assertLogMessageContains ( "not recognised and ignored" ) ; }
public boolean isOwnerAnyRef ( ) { return ( canPerformOnAnyRef ( Permission.OWNER ) ) || ( isAdmin ( ) ) ; }
private static Rebuild.Input input ( java.lang.Boolean force ) { com.google.gerrit.server.restapi.group.Rebuild.Input input = new com.google.gerrit.server.restapi.group.Rebuild.Input ( ) ; input.force = force ; return input ; }
public com.google.gerrit.server.notedb.ChangeNotes getNotes ( ) { return update.getChangeNotes ( ) ; }
public com.google.gerrit.server.project.ChangeControl controlFor ( final com.google.gerrit.reviewdb.client.Change change ) { return new com.google.gerrit.server.project.ChangeControl ( approvalsUtil , controlForRef ( change.getDest ( ) ) , change ) ; }
void scrollToPath ( java.lang.String path ) { com.google.gerrit.client.info.FileInfo info = map.get ( path ) ; if ( info != null ) { movePointerTo ( ( 1 + ( info._row ( ) ) ) , true ) ; } }
private com.google.gerrit.server.index.IndexedChangeQuery query ( com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > p , int limit ) throws com.google.gerrit.server.query.QueryParseException { return new com.google.gerrit.server.index.IndexedChangeQuery ( index , p , com.google.gerrit.server.index.IndexRewriteTest.options ( 0 , limit ) ) ; }
public final boolean readChangeSequence ( ) { return snapshot.get ( ) . readChangeSequence ( ) ; }
public void onSuccess ( final com.google.gerrit.common.data.ListBranchesResult result ) { addBranch.setEnabled ( true ) ; nameTxtBox.setText ( "" ) ; irevTxtBox.setText ( "" ) ; display ( result.getBranches ( ) ) ; }
public void sendRedirect ( java.lang.String location ) throws java.io.IOException { this . status = SC_MOVED_TEMPORARILY ; setHeader ( com.google.gerrit.httpd.HttpServletResponseRecorder.LOCATION_HEADER , location ) ; }
void projectAccess ( com.google.gerrit.reviewdb.client.Project.NameKey projectName , com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.ProjectAccess > callback ) ;
public void nullCommitMessage ( ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( ( ( java.lang.Iterable < ? > ) ( com.google.gerrit.server.change.HashtagsUtil.extractTags ( null ) ) ) ) . isEmpty ( ) ; }
private java.lang.String createGroup ( java.lang.String name ) throws java.io.IOException { name = name ( name ) ; com.google.gerrit.extensions.api.groups.GroupInput in = new com.google.gerrit.extensions.api.groups.GroupInput ( ) ; in.ownerId = "Administrators" ; adminSession.put ( ( "/groups/" + name ) , in ) . consume ( ) ; return name ; }
public boolean match ( com.google.gerrit.server.query.change.ChangeData object ) throws com.google.gwtorm.server.OrmException { return com.google.gerrit.server.index.change.ChangeField.getFileParts ( object ) . contains ( value ) ; }
public void testToJsonWebToken ( ) throws java.lang.Exception { com.google.gson.JsonObject jsonWebToken = client.toJsonWebToken ( com.googlesource.gerrit.plugins.cfoauth.UAAClientTest.HS256_TEST_TOKEN ) ; assertEquals ( "marissa" , com.googlesource.gerrit.plugins.cfoauth.JsonUtils.getAttribute ( jsonWebToken , "user_name" ) ) ; assertEquals ( "marissa@test.org" , com.googlesource.gerrit.plugins.cfoauth.JsonUtils.getAttribute ( jsonWebToken , "email" ) ) ; assertEquals ( 1436232932L , com.googlesource.gerrit.plugins.cfoauth.JsonUtils.getLongAttribute ( jsonWebToken , "exp" , 0 ) ) ; }
public java.util.List < T > query ( com.google.gerrit.index.query.Predicate < T > p ) throws com.google.gwtorm.server.OrmException { try { return queryProcessor.query ( p ) . entities ( ) ; } catch ( com.google.gerrit.index.query.QueryParseException e ) { throw new com.google.gwtorm.server.OrmException ( e ) ; } }
public void warn ( java.lang.String warning ) { msg.print ( ( ( "warning: " + warning ) + "\n" ) ) ; msg.flush ( ) ; }
public void onSuccess ( java.lang.Boolean result ) { if ( result ) { link ( Util.C.groupTabAuditLog ( ) , auditLogTabToken , com.google.gerrit.reviewdb.client.AccountGroup.isInternalGroup ( group.getGroupUUID ( ) ) ) ; setToken ( token ) ; } display ( group , result ) ; }
public abstract java.util.SortedMap < java.lang.String , com.google.gerrit.extensions.common.ProjectInfo > getAsMap ( ) throws com.google.gerrit.extensions.restapi.RestApiException ;
com.google.gerrit.httpd.rpc.project.ChangeProjectAccess create ( @ com.google.inject.assistedinject.Assisted ( value = "projectName" ) com.google.gerrit.reviewdb.client.Project.NameKey projectName , @ com.google.gerrit.common.Nullable org.eclipse.jgit.lib.ObjectId base , @ com.google.inject.assistedinject.Assisted java.util.List < com.google.gerrit.common.data.AccessSection > sectionList , @ com.google.gerrit.common.Nullable com.google.gerrit.reviewdb.client.Project.NameKey parentProjectName , @ com.google.gerrit.common.Nullable java.lang.String message ) ;
public void execute ( ) { cm.operation ( new java.lang.Runnable ( ) { @ java.lang.Override public void run ( ) { updateActiveLine ( ) ; } } ) ; }
public static com.google.gerrit.reviewdb.client.Change newChange ( com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.reviewdb.client.Account.Id userId ) { return com.google.gerrit.testing.TestChanges.newChange ( project , userId , com.google.gerrit.testing.TestChanges.nextChangeId.getAndIncrement ( ) ) ; }
void onDeleteRevision ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { if ( com.google.gwt.user.client.Window.confirm ( Resources.C.deleteDraftRevision ( ) ) ) { com.google.gerrit.client.change.DraftActions.delete ( changeId , revision , publish , deleteRevision , deleteChange ) ; } }
public static void deleteRevision ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , java.lang.String commit , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwt.core.client.JavaScriptObject > cb ) { com.google.gerrit.client.changes.ChangeApi.revision ( project , id , commit ) . delete ( cb ) ; }
private static native net.codemirror.lib.CodeMirror newCM ( com.google.gwt.dom.client.Element p , net.codemirror.lib.Configuration cfg ) ;
public com.google.gerrit.server.diff.IntraLineDiff.Status getStatus ( ) { return status ; }
void setDiffScreen ( com.google.gerrit.client.diff.SideBySide2 diffScreen ) { this . diffScreen = diffScreen ; }
protected void postDisplay ( ) { com.google.gerrit.client.Gerrit.display ( PageLinks.SETTINGS_CONTACT ) ; }
public void branchAlreadyExists_Conflict ( ) throws java.lang.Exception { assertCreateSucceeds ( testBranch ) ; assertCreateFails ( testBranch , com.google.gerrit.extensions.restapi.ResourceConflictException.class ) ; }
private java.lang.Iterable < T > buffer ( com.google.gwtorm.server.ResultSet < T > scanner ) { return com.google.common.collect.FluentIterable.from ( com.google.common.collect.Iterables.partition ( scanner , 50 ) ) . transformAndConcat ( this :: transformBuffer ) ; }
public static void createProject ( com.google.gerrit.acceptance.SshSession s , java.lang.String name ) throws com.jcraft.jsch.JSchException , java.io.IOException { com.google.gerrit.acceptance.GitUtil.createProject ( s , name , null ) ; }
public void postEvent ( final com.google.gerrit.reviewdb.client.Branch.NameKey branchName , final com.google.gerrit.server.events.Event event ) { fireEvent ( branchName , event ) ; }
public void fire ( com.google.gerrit.reviewdb.client.Project.NameKey project , org.eclipse.jgit.lib.RefUpdate refUpdate , com.google.gerrit.extensions.common.AccountInfo updater ) { fire ( project , refUpdate.getName ( ) , refUpdate.getOldObjectId ( ) , refUpdate.getNewObjectId ( ) , ReceiveCommand.Type.UPDATE , updater ) ; }
private void assertNotBlocked ( java.lang.String p , java.lang.String ref , com.google.gerrit.server.permissions.ProjectControl u ) { com.google.common.truth.Truth.assertThat ( u.controlForRef ( ref ) . isBlocked ( p ) ) . named ( ( ( p + " is blocked for " ) + ref ) ) . isFalse ( ) ; }
public java.util.Map < java.lang.String , java.lang.Object > toSoyData ( javax.servlet.http.HttpServletRequest req , org.eclipse.jgit.revwalk.RevCommit commit , org.eclipse.jgit.util.GitDateFormatter df ) throws java.io.IOException { return toSoyData ( req , commit , com.google.gitiles.CommitSoyData.KeySet.DEFAULT , df ) ; }
public com.google.common.util.concurrent.CheckedFuture < com.google.gerrit.reviewdb.client.PatchSetApproval , com.google.gwtorm.server.OrmException > getAsync ( com.google.gerrit.reviewdb.client.PatchSetApproval.Key key ) { throw new java.lang.UnsupportedOperationException ( com.google.gerrit.reviewdb.server.DisabledChangesReviewDbWrapper.MSG ) ; }
public int compare ( com.google.gwtexpui.globalkey.client.KeyCommand arg0 , com.google.gwtexpui.globalkey.client.KeyCommand arg1 ) { return arg0.getHelpText ( ) . compareTo ( arg1.getHelpText ( ) ) ; }
public com.google.gerrit.server.project.ChangeControl getControl ( ) { return control ; }
public boolean isDark ( ) { switch ( this ) { case MIDNIGHT : case NIGHT : case TWILIGHT : return true ; case DEFAULT : case ECLIPSE : case ELEGANT : case NEAT : default : return false ; } }
public void check ( com.google.gerrit.server.permissions.ChangePermissionOrLabel perm ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.server.permissions.PermissionBackendException { if ( ! ( can ( perm ) ) ) { throw new com.google.gerrit.extensions.restapi.AuthException ( ( ( perm.describeForException ( ) ) + " not permitted" ) ) ; } }
public boolean canSubmit ( boolean isChangeOwner ) { if ( RefNames.REFS_CONFIG.equals ( refName ) ) { return projectControl.isOwner ( ) ; } return ( canPerform ( Permission.SUBMIT , isChangeOwner ) ) && ( canWrite ( ) ) ; }
void updateSchema ( ) throws com.google.gwtorm.client.OrmException ;
public void index ( com.google.gerrit.reviewdb.client.AccountGroup.UUID uuid ) throws java.io.IOException { for ( com.google.gerrit.server.index.Index < ? , com.google.gerrit.reviewdb.client.AccountGroup > i : getWriteIndexes ( ) ) { i.replace ( groupCache.get ( uuid ) ) ; } fireGroupIndexedEvent ( uuid.get ( ) ) ; }
public java.net.InetSocketAddress getAddress ( ) { return preferredAddress ; }
private java.lang.String createChange ( com.google.gerrit.acceptance.TestAccount account ) throws java.io.IOException , org.eclipse.jgit.api.errors.GitAPIException { com.google.gerrit.acceptance.PushOneCommit push = pushFactory.create ( db , account.getIdent ( ) ) ; return push.to ( git , "refs/for/master" ) . getChangeId ( ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { header.toggleReviewed ( ) . run ( ) ; }
public void onEvent ( com.google.gerrit.server.events.Event event ) { if ( event instanceof com.google.gerrit.server.events.ChangeMergedEvent ) { com.google.gerrit.server.events.ChangeMergedEvent changeMergedEvent = ( ( com.google.gerrit.server.events.ChangeMergedEvent ) ( event ) ) ; mergeResults.put ( changeMergedEvent.change.get ( ) . number , changeMergedEvent.newRev ) ; } }
public com.google.gerrit.extensions.restapi.BinaryResult apply ( com.google.gerrit.server.project.FileResource rsrc ) throws com.google.gerrit.extensions.restapi.ResourceNotFoundException , java.io.IOException { return getContent.get ( ) . apply ( rsrc.getProject ( ) , rsrc.getRev ( ) , rsrc.getPath ( ) ) ; }
public com.google.gerrit.common.data.PatchScriptSettings getSettings ( ) { return settings ; }
static boolean isActive ( com.google.gerrit.server.config.PluginConfig cfg ) { return ( cfg.getStringList ( com.googlesource.gerrit.plugins.uploadvalidator.BlockedKeywordValidator.KEY_CHECK_BLOCKED_KEYWORD_PATTERN ) . length ) > 0 ; }
public void addChangeListener ( com.google.gerrit.common.ChangeListener listener , com.google.gerrit.server.CurrentUser user ) { listeners.put ( listener , new com.google.gerrit.common.ChangeHookRunner.ChangeListenerHolder ( listener , user ) ) ; }
public void suggestReviewersFullTextSearch ( ) throws java.lang.Exception { java.lang.String changeId = createChange ( ) . getChangeId ( ) ; java.util.List < com.google.gerrit.server.change.SuggestReviewers.SuggestedReviewerInfo > reviewers = suggestReviewers ( changeId , "ser" , 5 ) ; com.google.common.truth.Truth.assertThat ( reviewers ) . hasSize ( 4 ) ; }
protected static java.sql.Timestamp parse ( java.lang.String value ) throws com.google.gerrit.index.query.QueryParseException { try { return com.google.gwtjsonrpc.common.JavaSqlTimestampHelper.parseTimestamp ( value ) ; } catch ( java.lang.IllegalArgumentException e ) { throw new com.google.gerrit.index.query.QueryParseException ( e.getMessage ( ) , e ) ; } }
private void displayView ( android.support.v4.app.Fragment fragment ) { android.support.v4.app.FragmentManager fragmentManager = getSupportFragmentManager ( ) ; fragmentManager.beginTransaction ( ) . replace ( R.id.mainFrame , fragment ) . addToBackStack ( null ) . commit ( ) ; }
protected com.google.gerrit.acceptance.StandaloneSiteTest.ServerContext startServer ( @ com.google.gerrit.common.Nullable com.google.inject.Module testSysModule ) throws java.lang.Exception { return new com.google.gerrit.acceptance.StandaloneSiteTest.ServerContext ( startImpl ( testSysModule ) ) ; }
public < T extends com.google.gwt.core.client.JavaScriptObject > void put ( com.google.gwt.core.client.JavaScriptObject content , com.google.gwt.user.client.rpc.AsyncCallback < T > cb ) { put ( content , com.google.gerrit.client.rpc.RestApi.wrap ( cb ) ) ; }
private java.lang.String urlEditFile ( boolean base ) { return ( ( ( urlEdit ( ) ) + "/" ) + ( com.google.gerrit.acceptance.edit.ChangeEditIT.FILE_NAME ) ) + ( base ? "?base" : "" ) ; }
protected void init ( ) throws com.google.gerrit.common.errors.EmailException { super . init ( ) ; ccAllApprovals ( ) ; bccStarredBy ( ) ; ccExistingReviewers ( ) ; includeWatchers ( NotifyType.ALL_COMMENTS ) ; add ( RecipientType.TO , reviewers ) ; removeUsersThatIgnoredTheChange ( ) ; }
public void preDisplay ( com.google.gerrit.common.data.ProjectAccess access ) { displayReadOnly ( access ) ; }
private void setupPostMocks ( boolean changeExist ) throws java.lang.Exception { setupPostMocks ( changeExist , com.ericsson.gerrit.plugins.multimaster.SyncIndexRestApiServletTest.DO_NOT_THROW_ORM_EXCEPTION , com.ericsson.gerrit.plugins.multimaster.SyncIndexRestApiServletTest.DO_NOT_THROW_IO_EXCEPTION ) ; }
protected void configureServlets ( ) { install ( new com.google.gerrit.extensions.config.FactoryModule ( ) { @ java.lang.Override protected void configure ( ) { factory ( PatchSetDetailFactory.Factory.class ) ; } } ) ; rpc ( com.google.gerrit.httpd.rpc.changedetail.ChangeDetailServiceImpl.class ) ; }
public void setName ( final java.lang.String n ) { name = n ; labelName = null ; }
public void onBlur ( final com.google.gwt.event.dom.client.BlurEvent event ) { if ( "" . equals ( nameTxtBox.getText ( ) ) ) { nameTxtBox.setText ( Util.C.defaultAccountName ( ) ) ; nameTxtBox.addStyleName ( "gerrit-InputFieldTypeHint" ) ; } }
private void failAndThrow ( com.google.gerrit.reviewdb.client.Project.NameKey project , java.lang.Error e ) { fail ( project , e ) ; throw e ; }
public void index ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.Change change ) throws com.google.gwtorm.server.OrmException , java.io.IOException { index ( newChangeData ( db , change ) ) ; reindexAfterIndexUpdate ( change.getProject ( ) , change.getId ( ) ) ; }
public com.google.common.base.Optional < com.googlesource.gerrit.plugins.webhooks.EventProcessor.Request > doProcess ( com.google.gerrit.server.events.ProjectEvent event , com.googlesource.gerrit.plugins.webhooks.RemoteConfig remote ) { return com.google.common.base.Optional.absent ( ) ; }
private void grantApprove ( com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.reviewdb.client.AccountGroup.UUID groupUUID , boolean exclusive ) throws java.lang.Exception { grantLabel ( "Code-Review" , ( - 2 ) , 2 , project , "refs/heads/*" , false , groupUUID , exclusive ) ; }
public com.google.gerrit.extensions.restapi.BinaryResult apply ( com.google.gerrit.server.account.AccountResource.Capability resource ) throws com.google.gerrit.extensions.restapi.ResourceNotFoundException { permissionBackend.checkUsesDefaultCapabilities ( ) ; return com.google.gerrit.extensions.restapi.BinaryResult.create ( "ok\n" ) ; }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > delete ( com.google.gerrit.server.query.change.ChangeData cd ) throws java.io.IOException { return com.google.common.util.concurrent.Futures.immediateFuture ( null ) ; }
public void addReviewerToReviewableChangeByOwnerCcingSelfInNoteDbSingly ( ) throws java.lang.Exception { addReviewerToReviewableChangeByOwnerCcingSelfInNoteDb ( singly ( ) ) ; }
public final java.lang.String maxValue ( ) { return com.google.gerrit.common.data.LabelValue.formatValue ( valueSet ( ) . last ( ) ) ; }
public void onFailure ( final java.lang.Throwable caught ) { enableUI ( true ) ; }
public void setText ( java.lang.String text ) { nameTxtBox.setText ( text ) ; }
public void subsetOfBranchesVisibleNotIncludingHead ( ) throws java.lang.Exception { deny ( Permission.READ , com.google.gerrit.server.group.SystemGroupBackend.REGISTERED_USERS , "refs/heads/master" ) ; allow ( Permission.READ , com.google.gerrit.server.group.SystemGroupBackend.REGISTERED_USERS , "refs/heads/branch" ) ; assertRefs ( "refs/changes/02/2/1" , "refs/changes/02/2/meta" , "refs/heads/branch" , "refs/tags/branch-tag" , "refs/tags/master-tag" ) ; }
private void setupNavigationLink ( com.google.gerrit.client.ui.Hyperlink link , java.lang.String filter , int skip ) { link.setTargetHistoryToken ( getTokenForScreen ( filter , skip ) ) ; link.setVisible ( true ) ; }
java.lang.String getLabelName ( ) { return type.getCategory ( ) . getLabelName ( ) ; }
public synchronized com.google.gerrit.server.account.AccountState get ( com.google.gerrit.reviewdb.client.Account.Id accountId ) { com.google.gerrit.server.account.AccountState state = byId.get ( accountId ) ; if ( state != null ) { return state ; } return com.google.gerrit.testing.FakeAccountCache.newState ( new com.google.gerrit.reviewdb.client.Account ( accountId , com.google.gerrit.common.TimeUtil.nowTs ( ) ) ) ; }
void init ( com.google.gerrit.client.change.ChangeScreen2.Style style , com.google.gwt.dom.client.Element reviewersText ) { this . style = style ; this . reviewersText = reviewersText ; }
public boolean dryRun ( final com.google.gerrit.server.git.CodeReviewCommit mergeTip , final com.google.gerrit.server.git.CodeReviewCommit toMerge ) throws com.google.gerrit.server.git.MergeException { return args.mergeUtil.canCherryPick ( args.mergeSorter , args.repo , mergeTip , args.rw , toMerge ) ; }
void destroy ( final com.google.gerrit.server.http.WebSessionManager.Key key ) { self.remove ( key ) ; }
private boolean can ( com.google.gerrit.extensions.api.access.GlobalOrPluginPermission perm ) throws com.google.gerrit.server.permissions.PermissionBackendException { return user.getCapabilities ( ) . doCanForDefaultPermissionBackend ( perm ) ; }
java.lang.Runnable reviewedAndNext ( ) { return ( ) -> { if ( com.google.gerrit.client.Gerrit.isSignedIn ( ) ) { reviewed.setValue ( true , true ) ; } navigate ( Direction.NEXT ) . run ( ) ; } ; }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > evictEmailAsync ( java.lang.String email ) { if ( email == null ) { return com.google.common.util.concurrent.Futures.immediateFuture ( null ) ; } return byEmail.removeAsync ( new com.google.gerrit.server.account.AccountCacheImpl.Email ( email ) ) ; }
private static boolean isEmptyOrSlash ( java.lang.String path ) { return ( path.isEmpty ( ) ) || ( path.equals ( "/" ) ) ; }
private void fireEventForUnrestrictedListeners ( final com.google.gerrit.server.events.Event event ) { for ( com.google.gerrit.common.EventListener listener : unrestrictedListeners ) { listener.onEvent ( event ) ; } }
public final int hashCode ( ) { return snapshot.get ( ) . hashCode ( ) ; }
private void fail ( com.google.gerrit.reviewdb.client.Project.NameKey project , java.lang.Throwable t ) { com.google.gerrit.pgm.Reindex.log.error ( ( "Failed to index project " + project ) , t ) ; ok.set ( false ) ; }
protected void configure ( ) { facade = createMock ( com.googlesource.gerrit.plugins.its.base.its.ItsFacade.class ) ; bind ( com.googlesource.gerrit.plugins.its.base.its.ItsFacade.class ) . toInstance ( facade ) ; propertyFactory = createMock ( Property.Factory.class ) ; bind ( Property.Factory.class ) . toInstance ( propertyFactory ) ; }
protected void configure ( ) { install ( new com.google.gerrit.server.rules.PrologModule.EnvironmentModule ( ) ) ; bind ( PrologEnvironment.Args.class ) ; bind ( com.google.gerrit.server.rules.PrologRule.class ) ; factory ( PrologRuleEvaluator.Factory.class ) ; }
public abstract com.google.gerrit.server.git.ChangeReportFormatter.Input.Builder setIsWorkInProgress ( java.lang.Boolean val ) ;
private java.lang.String comparePattern ( ) { if ( getName ( ) . startsWith ( com.google.gerrit.common.data.REGEX_PREFIX ) ) { return getName ( ) . substring ( com.google.gerrit.common.data.REGEX_PREFIX.length ( ) ) ; } return getName ( ) ; }
public com.google.gerrit.server.mail.receive.MailMessage.Builder addCc ( com.google.gerrit.server.mail.Address val ) { ccBuilder ( ) . add ( val ) ; return this ; }
public void resetToDefaults ( ) { defaultContext = com.google.gerrit.client.reviewdb.AccountGeneralPreferences.DEFAULT_CONTEXT ; showSiteHeader = true ; useFlashClipboard = true ; }
protected void onInitUI ( ) { super . onInitUI ( ) ; setHeaderVisible ( false ) ; setWindowTitle ( com.google.gerrit.client.diff.FileInfo.getFileName ( path ) ) ; }
public void run ( ) { cm.getInputField ( ) . blur ( ) ; clearActiveLine ( cm ) ; clearActiveLine ( otherCm ( cm ) ) ; }
public Project.NameKey getNameKey ( ) { return projectState.getNameKey ( ) ; }
static net.codemirror.lib.CodeMirror.Style style ( ) { return Lib.I.style ( ) ; }
public void run ( ) { header.setReviewed ( ( ! ( header.isReviewed ( ) ) ) ) ; }
public void deleteBranch ( final com.google.gerrit.reviewdb.client.Project.NameKey projectName , final java.util.Set < com.google.gerrit.reviewdb.client.Branch.NameKey > toRemove , final com.google.gwtjsonrpc.common.AsyncCallback < java.util.Set < com.google.gerrit.reviewdb.client.Branch.NameKey > > callback ) { deleteBranchesFactory.create ( projectName , toRemove ) . to ( callback ) ; }
protected java.lang.String decode ( int s , int e ) { if ( ( charset ) == null ) { charset = com.google.gerrit.server.diff.Text.charset ( content , null ) ; } return org.eclipse.jgit.util.RawParseUtils.decode ( charset , content , s , e ) ; }
public java.util.Optional < com.googlesource.gerrit.plugins.webhooks.EventProcessor.Request > doProcess ( com.google.gerrit.server.events.ProjectEvent event , com.googlesource.gerrit.plugins.webhooks.RemoteConfig remote ) { return java.util.Optional.of ( new com.googlesource.gerrit.plugins.webhooks.EventProcessor.Request ( com.googlesource.gerrit.plugins.webhooks.processors.GerritEventProcessor.GSON.toJson ( event ) ) ) ; }
java.lang.String patchTableSize_ModifyBinaryFilesWithPercentages ( java.lang.String bytesInserted , java.lang.String percentageInserted , java.lang.String bytesDeleted , java.lang.String percentageDeleted ) ;
public void onSuccess ( com.google.gerrit.client.info.GeneralPreferences result ) { display ( result ) ; }
void deleteBranch ( com.google.gerrit.client.reviewdb.Project.NameKey projectName , java.util.Set < com.google.gerrit.client.reviewdb.Branch.NameKey > ids , com.google.gwt.user.client.rpc.AsyncCallback < java.util.Set < com.google.gerrit.client.reviewdb.Branch.NameKey > > callback ) ;
public com.google.gerrit.extensions.api.changes.ChangeApi create ( com.google.gerrit.extensions.common.ChangeInput in ) throws com.google.gerrit.extensions.restapi.RestApiException { throw new com.google.gerrit.extensions.restapi.NotImplementedException ( ) ; }
public void parseFullTimestamp ( ) { org.junit.Assert.assertEquals ( "2006-01-02 15:04:05.789 -0500" , reformat ( "2006-01-02 20:04:05.789000000" ) ) ; org.junit.Assert.assertEquals ( "2006-01-02 15:04:05.000 -0500" , reformat ( "2006-01-02 20:04:05" ) ) ; }
public com.google.gerrit.extensions.client.RangeSubject range ( ) { return com.google.gerrit.extensions.client.RangeSubject.assertThat ( actual ( ) . range ) . named ( "range" ) ; }
public void onSuccess ( com.google.gerrit.client.changes.CommentInfo result ) { enableEdit ( true ) ; pendingGroup = null ; set ( result ) ; setEdit ( false ) ; if ( autoClosed ) { setOpen ( false ) ; } getCommentManager ( ) . setUnsaved ( this , false ) ; }
com.google.gerrit.server.notedb.ChangeUpdate create ( com.google.gerrit.server.project.ChangeControl ctl ) ;
public void configure ( ) { install ( new com.google.inject.assistedinject.FactoryModuleBuilder ( ) . build ( com.google.gerrit.server.git.AsyncReceiveCommits.Factory.class ) ) ; expose ( com.google.gerrit.server.git.AsyncReceiveCommits.Factory.class ) ; install ( new com.google.inject.assistedinject.FactoryModuleBuilder ( ) . build ( ReceiveCommits.Factory.class ) ) ; }
public java.lang.String replace ( final java.util.Map < java.lang.String , java.lang.String > params ) { final java.lang.StringBuilder r = new java.lang.StringBuilder ( ) ; for ( final com.google.gerrit.common.data.ParamertizedString.Format f : patternOps ) { f.format ( r , params ) ; } return r.toString ( ) ; }
public void onSuccess ( final com.google.gwtjsonrpc.client.VoidResult result ) { goChange ( ) ; }
protected void updateOwnerGroup ( com.google.gerrit.client.info.GroupInfo ownerGroup ) { group.setOwnerUUID ( ownerGroup.getGroupUUID ( ) ) ; group.owner ( ownerGroup.name ( ) ) ; }
public void putApprovalFor ( com.google.gerrit.reviewdb.client.Account.Id reviewer , java.lang.String label , short value ) { approvals.put ( label , reviewer , com.google.common.base.Optional.of ( value ) ) ; }
protected void configure ( ) { persist ( com.googlesource.gerrit.plugins.github.group.GitHubGroupsCache.ORGS_CACHE_NAME , java.lang.String.class , com.googlesource.gerrit.plugins.github.groups.OrganizationStructure.class ) . expireAfterWrite ( com.googlesource.gerrit.plugins.github.group.GitHubGroupsCache.GROUPS_CACHE_TTL_MINS , java.util.concurrent.TimeUnit.MINUTES ) . loader ( com.googlesource.gerrit.plugins.github.group.GitHubGroupsCache.OrganisationLoader.class ) ; bind ( com.googlesource.gerrit.plugins.github.group.GitHubGroupsCache.class ) ; }
public boolean canOverride ( ) { return canOverride ; }
public void onReplaceByKeys ( org.eclipse.jgit.lib.ObjectId oldNotesRev , org.eclipse.jgit.lib.ObjectId newNotesRev , com.google.gerrit.reviewdb.client.Account.Id accountId , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId.Key > toRemove , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId > toAdd ) { }
public void upsertComment ( com.google.gerrit.reviewdb.client.PatchLineComment c ) { verifyComment ( c ) ; com.google.common.base.Preconditions.checkArgument ( ( ( c.getStatus ( ) ) == ( PatchLineComment.Status.DRAFT ) ) , "Cannot upsert a published comment into a ChangeDraftUpdate" ) ; upsertComments.add ( c ) ; }
public void setText ( java.lang.String text ) { focusHint ( ) ; super . setText ( text ) ; if ( ! ( isFocused ) ) { blurHint ( ) ; } }
public void testUpsertNothing ( ) throws com.google.gwtorm.server.OrmException , java.sql.SQLException { createClassUnderTest ( ) . upsert ( noData ) ; }
public java.lang.String getDisplayString ( ) { return branch.getShortName ( ) ; }
public com.google.gerrit.reviewdb.client.PatchSetApproval.LabelId getLabelId ( ) { return categoryId ; }
public void modifyFile ( org.eclipse.jgit.lib.Repository repository , com.google.gerrit.server.edit.ChangeEdit changeEdit , java.lang.String filePath , com.google.gerrit.extensions.restapi.RawInput newContent ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.server.project.InvalidChangeOperationException , java.io.IOException { modifyTree ( repository , changeEdit , new com.google.gerrit.server.edit.tree.ChangeFileContentModification ( filePath , newContent ) ) ; }
public int compare ( final com.google.gerrit.client.data.ApprovalDetail o1 , final com.google.gerrit.client.data.ApprovalDetail o2 ) { int cmp ; cmp = ( o2.hasNonZero ) - ( o1.hasNonZero ) ; if ( cmp != 0 ) return cmp ; return o1.sortOrder.compareTo ( o2.sortOrder ) ; }
java.lang.Runnable signInCallback ( final net.codemirror.lib.CodeMirror cm ) { return new java.lang.Runnable ( ) { @ java.lang.Override public void run ( ) { java.lang.String token = host.getToken ( ) ; if ( cm.extras ( ) . hasActiveLine ( ) ) { token += "@" + ( getTokenSuffixForActiveLine ( cm ) ) ; } com.google.gerrit.client.Gerrit.doSignIn ( token ) ; } } ; }
private void assertNoProblems ( com.google.gerrit.gpg.testutil.TestKey key ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( checker.check ( key.getPublicKey ( ) ) . getProblems ( ) ) . isEmpty ( ) ; }
public static final java.lang.String escapeString ( java.lang.String val ) { return com.google.gwt.core.client.JsonUtils.escapeValue ( val ) ; }
public boolean rawWriteChangesSetting ( ) { return writeChanges ; }
public boolean verify ( ) { return ( onTime ( java.time.Instant.now ( ) ) ) && ( verifyTokenValues ( ) ) ; }
public void onFailure ( final java.lang.Throwable caught ) { showSiteHeader.setValue ( ( ! val ) ) ; super . onFailure ( caught ) ; }
public static com.google.gerrit.index.IndexConfig createDefault ( ) { return com.google.gerrit.index.IndexConfig.builder ( ) . build ( ) ; }
public void registerCacheUsageListener ( net.sf.ehcache.statistics.CacheUsageListener cacheUsageListener ) throws java.lang.IllegalStateException { self ( ) . registerCacheUsageListener ( cacheUsageListener ) ; }
public void run ( ) { ( header.hasPrev ( ) ? header.prev : header.up ) . go ( ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { com.google.gerrit.client.info.FileInfo info = list.get ( index ) ; if ( canOpen ( info.path ( ) ) ) { com.google.gerrit.client.Gerrit.display ( url ( info ) ) ; } }
private void assertProblems ( org.eclipse.jgit.transport.PushCertificate cert , java.lang.String ... expected ) throws java.lang.Exception { com.google.gerrit.gpg.CheckResult result = checker.check ( cert ) ; org.junit.Assert.assertEquals ( java.util.Arrays.asList ( expected ) , result.getProblems ( ) ) ; }
public com.google.gerrit.extensions.restapi.Response < java.lang.String > apply ( com.google.gerrit.server.change.ChangeResource rsrc , com.google.gerrit.server.change.Unignore.Input input ) throws com.google.gerrit.extensions.restapi.RestApiException , com.google.gwtorm.server.OrmException { if ( isIgnored ( rsrc ) ) { stars.unignore ( rsrc ) ; } return com.google.gerrit.extensions.restapi.Response.ok ( "" ) ; }
public org.eclipse.jgit.lib.RefUpdate.Result deleteFile ( com.google.gerrit.server.edit.ChangeEdit edit , java.lang.String file ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.server.project.InvalidChangeOperationException , java.io.IOException { return modify ( edit , new com.google.gerrit.server.edit.tree.DeleteFileModification ( file ) ) ; }
public void save ( java.lang.String message ) throws java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { save ( new com.google.gerrit.server.GerritPersonIdentProvider ( flags.cfg ) . get ( ) , message ) ; }
public AccountGroup.UUID getGroupUUID ( ) { return uuid ; }
public void onSuccess ( final com.google.gerrit.client.reviewdb.PatchLineComment result ) { comment = result ; text.setReadOnly ( false ) ; cancel.setEnabled ( true ) ; discard.setEnabled ( true ) ; render ( ) ; }
public java.lang.String getAccessToken ( ) { return isSignedIn ( ) ? key.getToken ( ) : null ; }
private com.google.gerrit.pgm.Init.SiteRun createSiteRun ( final com.google.gerrit.pgm.Init.SiteInit init ) { return createSysInjector ( init ) . getInstance ( com.google.gerrit.pgm.Init.SiteRun.class ) ; }
public void submit ( java.lang.Iterable < com.google.gerrit.common.data.SubmitRecord > submitRecords ) { status = com.google.gerrit.reviewdb.client.PatchLineComment.Status.SUBMITTED ; this . submitRecords = com.google.common.collect.ImmutableList.copyOf ( submitRecords ) ; com.google.common.base.Preconditions.checkArgument ( ( ! ( this . submitRecords.isEmpty ( ) ) ) , "no submit records specified at submit time" ) ; }
public void oldNameOfGroupMustBeSpecifiedForRename ( ) throws java.lang.Exception { createGroup ( groupUuid , groupName ) ; com.google.gerrit.reviewdb.client.AccountGroup.NameKey anotherName = new com.google.gerrit.reviewdb.client.AccountGroup.NameKey ( "admins" ) ; expectedException.expect ( java.lang.NullPointerException.class ) ; com.google.gerrit.server.group.db.GroupNameNotes.forRename ( repo , groupUuid , null , anotherName ) ; }
public void start ( ) { com.google.gerrit.sshd.commands.ShowCaches.serverStarted = com.google.gerrit.server.util.TimeUtil.nowMs ( ) ; }
public com.google.gwtorm.server.ResultSet < com.google.gerrit.reviewdb.client.PatchLineComment > iterateAllEntities ( ) { throw new java.lang.UnsupportedOperationException ( com.google.gerrit.reviewdb.server.DisabledChangesReviewDbWrapper.MSG ) ; }
protected com.google.gitiles.DefaultAccess newAccess ( java.io.File basePath , java.lang.String canonicalBasePath , java.lang.String baseGitUrl , org.eclipse.jgit.transport.resolver.FileResolver < javax.servlet.http.HttpServletRequest > resolver , javax.servlet.http.HttpServletRequest req ) { return new com.google.gitiles.DefaultAccess ( basePath , canonicalBasePath , baseGitUrl , baseConfig , resolver , req ) ; }
private void init ( ) { tv ( R.id.commitMessage ) . setLinksClickable ( true ) ; }
public boolean supportsCredentialChanges ( com.gitblit.models.UserModel user ) { return false ; }
public final void reviewCategoryStrategy ( com.google.gerrit.extensions.client.GeneralPreferencesInfo.ReviewCategoryStrategy s ) { reviewCategoryStrategyRaw ( ( s != null ? s.toString ( ) : null ) ) ; }
private synchronized void runHook ( com.google.common.base.Optional < java.nio.file.Path > hook , java.util.List < java.lang.String > args ) { if ( hook.isPresent ( ) ) { hookQueue.execute ( new com.google.gerrit.common.ChangeHookRunner.AsyncHookTask ( null , hook.get ( ) , args ) ) ; } }
public com.google.gerrit.sshd.SshKeyCacheEntryCollection get ( java.lang.String username ) { return cache.get ( new com.google.gerrit.reviewdb.Account.Username ( username ) ) ; }
public void postUpdate ( com.google.gerrit.server.git.BatchUpdate.Context ctx ) { if ( ( change ) != null ) { topicEdited.fire ( change , ctx.getUser ( ) . asIdentifiedUser ( ) . getAccount ( ) , oldTopicName , ctx.getWhen ( ) ) ; } }
public java.util.regex.Pattern getIssuePattern ( ) { java.util.regex.Pattern ret = null ; java.lang.String match = gerritConfig.getString ( "commentlink" , pluginName , "match" ) ; if ( match != null ) { ret = java.util.regex.Pattern.compile ( match ) ; } return ret ; }
public static com.google.gerrit.git.WorkQueue.Executor createQueue ( final int poolsize ) { final com.google.gerrit.git.WorkQueue.Executor r = new com.google.gerrit.git.WorkQueue.Executor ( poolsize ) ; r.setContinueExistingPeriodicTasksAfterShutdownPolicy ( false ) ; r.setExecuteExistingDelayedTasksAfterShutdownPolicy ( false ) ; com.google.gerrit.git.WorkQueue.queues.add ( r ) ; return r ; }
public void listTagsOfNonExistingProject ( ) throws java.lang.Exception { adminRestSession.get ( "/projects/non-existing/tags" ) . assertNotFound ( ) ; }
private static void assertNotRef ( java.lang.String refName ) { com.google.common.truth.Truth.assertThat ( Change.Id.fromRef ( refName ) ) . isNull ( ) ; }
public void defaultSubmitTypeWhenNotConfigured ( ) { com.google.common.truth.Truth.assertThat ( repoCfg.getDefaultSubmitType ( new com.google.gerrit.reviewdb.client.Project.NameKey ( "someProject" ) ) ) . isEqualTo ( SubmitType.INHERIT ) ; }
public java.lang.Object apply ( com.google.gerrit.server.account.AccountResource rsrc ) { if ( rsrc.getUser ( ) . getAccount ( ) . isActive ( ) ) { return com.google.gerrit.extensions.restapi.BinaryResult.create ( "ok\n" ) ; } return com.google.gerrit.extensions.restapi.Response.none ( ) ; }
public com.google.gerrit.common.data.ApprovalType byId ( final com.google.gerrit.reviewdb.ApprovalCategory.Id id ) { return byCategory ( ) . get ( id ) ; }
public com.google.gerrit.reviewdb.client.Change abandon ( com.google.gerrit.server.update.BatchUpdate.Factory updateFactory , com.google.gerrit.server.project.ChangeControl control ) throws com.google.gerrit.extensions.restapi.RestApiException , com.google.gerrit.server.update.UpdateException { return abandon ( updateFactory , control , "" , NotifyHandling.ALL , com.google.common.collect.ImmutableListMultimap.of ( ) ) ; }
private static com.google.gerrit.client.rpc.RestApi revision ( com.google.gerrit.reviewdb.client.PatchSet.Id id , java.lang.String type ) { return com.google.gerrit.client.changes.ChangeApi.revision ( id ) . view ( type ) ; }
public com.googlecode.prolog_cafe.lang.Operation exec ( com.googlecode.prolog_cafe.lang.Prolog engine ) { com.googlecode.prolog_cafe.lang.Term a1 ; a1 = arg1 ; if ( ! ( a1.unify ( new com.googlecode.prolog_cafe.lang.IntegerTerm ( engine.B0 ) , engine.trail ) ) ) { return engine.fail ( ) ; } return cont ; }
com.googlesource.gerrit.plugins.replication.Destination create ( com.googlesource.gerrit.plugins.replication.DestinationConfiguration config ) { return new com.googlesource.gerrit.plugins.replication.Destination ( injector , config , replicationUserFactory , pluginUser , gitRepositoryManager , groupBackend , stateLog , groupIncludeCache , eventDispatcher ) ; }
public Account.Id getAccountId ( ) { final com.google.gerrit.server.GerritCall c = com.google.gwtjsonrpc.server.JsonServlet.getCurrentCall ( ) ; return c != null ? c.getAccountId ( ) : null ; }
public void setUp ( ) { com.google.gerrit.testing.TestTimeUtil.resetWithClockStep ( 10 , java.util.concurrent.TimeUnit.SECONDS ) ; changeCreatedOn = com.google.gerrit.common.TimeUtil.nowTs ( ) ; }
protected void onLoad ( ) throws java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { queryList = com.google.gerrit.server.git.QueryList.parse ( readUTF8 ( QueryList.FILE_NAME ) , com.google.gerrit.server.git.QueryList.createLoggerSink ( QueryList.FILE_NAME , com.google.gerrit.server.account.VersionedAccountQueries.log ) ) ; }
native void setWindowTitle ( java.lang.String t ) ;
private org.eclipse.jgit.revwalk.RevCommit writeCommit ( java.lang.String body ) throws java.lang.Exception { com.google.gerrit.server.notedb.ChangeNoteUtil noteUtil = injector.getInstance ( com.google.gerrit.server.notedb.ChangeNoteUtil.class ) ; return writeCommit ( body , noteUtil.newIdent ( changeOwner.getAccount ( ) , com.google.gerrit.common.TimeUtil.nowTs ( ) , serverIdent , "Anonymous Coward" ) ) ; }
private void renderLinks ( java.util.List < com.google.gerrit.client.DiffWebLinkInfo > links ) { if ( links != null ) { for ( com.google.gerrit.client.DiffWebLinkInfo webLink : links ) { linkPanel.add ( webLink.toAnchor ( ) ) ; } } }
public com.google.gerrit.extensions.restapi.Response < com.google.gerrit.extensions.common.ChangeInfo > apply ( com.google.gerrit.server.change.ChangeResource rsrc ) throws com.google.gwtorm.server.OrmException { return com.google.gerrit.extensions.restapi.Response.withMustRevalidate ( json.create ( options ) . format ( rsrc ) ) ; }
private org.apache.lucene.search.Query fullTextQuery ( com.google.gerrit.server.index.IndexPredicate < com.google.gerrit.server.query.change.ChangeData > p ) { return queryBuilder.createPhraseQuery ( p.getField ( ) . getName ( ) , p.getValue ( ) ) ; }
public com.google.gwtorm.server.ResultSet < com.google.gerrit.reviewdb.client.Change > iterateAllEntities ( ) { throw new java.lang.UnsupportedOperationException ( com.google.gerrit.reviewdb.server.DisabledChangesReviewDbWrapper.MSG ) ; }
public boolean apply ( com.google.gerrit.reviewdb.client.Account in ) { return in.isActive ( ) ; }
java.util.List < com.google.gerrit.common.data.PermissionRule > getOverridden ( java.lang.String permissionName ) { return com.google.common.base.MoreObjects.firstNonNull ( overridden.get ( permissionName ) , java.util.Collections.< com.google.gerrit.common.data.PermissionRule > emptyList ( ) ) ; }
public static com.google.gerrit.index.query.Predicate < com.google.gerrit.server.account.AccountState > username ( java.lang.String username ) { return new com.google.gerrit.server.query.account.AccountPredicates.AccountPredicate ( com.google.gerrit.server.index.account.AccountField.USERNAME , AccountQueryBuilder.FIELD_USERNAME , username.toLowerCase ( ) ) ; }
private void updateRemoteExternalId ( com.google.gerrit.server.account.AuthResult arsp , java.lang.String remoteAuthToken ) throws com.google.gerrit.server.account.AccountException , com.google.gwtorm.server.OrmException , java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { accountManager.updateLink ( arsp.getAccountId ( ) , new com.google.gerrit.server.account.AuthRequest ( ExternalId.Key.create ( com.google.gerrit.server.account.externalids.ExternalId.SCHEME_EXTERNAL , remoteAuthToken ) ) ) ; }
protected void doGet ( final javax.servlet.http.HttpServletRequest req , final javax.servlet.http.HttpServletResponse rsp ) throws java.io.IOException { final java.lang.String token = req.getPathInfo ( ) . substring ( 1 ) ; com.google.gerrit.httpd.UrlModule.toGerrit ( token , req , rsp ) ; }
public static java.util.Set < java.lang.String > getPersonParts ( org.eclipse.jgit.lib.PersonIdent person ) { if ( person == null ) { return com.google.common.collect.ImmutableSet.of ( ) ; } return com.google.gerrit.server.index.SchemaUtil.getNameParts ( person.getName ( ) , java.util.Collections.singleton ( person.getEmailAddress ( ) ) ) ; }
public void onClick ( com.google.gwt.event.dom.client.ClickEvent event ) { com.google.gerrit.client.admin.CreateChangeAction.call ( createChange , getProjectKey ( ) . get ( ) ) ; }
public static java.lang.String toAccountQuery ( final java.lang.String fullname ) { java.lang.String query = ( com.google.gerrit.common.PageLinks.op ( "owner" , fullname ) ) + " status:open" ; return com.google.gerrit.common.PageLinks.toChangeQuery ( query , com.google.gerrit.common.PageLinks.TOP ) ; }
public java.util.Set < java.lang.String > getMyOrganisationsLogins ( ) throws java.io.IOException { if ( isLoggedIn ( ) ) { return getHub ( ) . getMyOrganizations ( ) . keySet ( ) ; } return java.util.Collections.emptySet ( ) ; }
public < I > com.google.gerrit.index.FieldDef < I , java.lang.Iterable < T > > buildRepeatable ( com.google.gerrit.index.FieldDef.Getter < I , java.lang.Iterable < T > > getter ) { return new com.google.gerrit.index.FieldDef ( name , type , stored , true , getter ) ; }
public com.google.gerrit.extensions.restapi.Response < com.google.gerrit.extensions.common.ChangeInfo > apply ( com.google.gerrit.server.change.ChangeResource rsrc ) throws com.google.gwtorm.server.OrmException { return com.google.gerrit.extensions.restapi.Response.withMustRevalidate ( json.format ( rsrc ) ) ; }
public void onFailure ( java.lang.Throwable caught ) { refreshBranches ( ) ; super . onFailure ( caught ) ; }
public void usernameEmailPatternWithRegex ( ) { com.google.gerrit.server.project.testing.Util.allow ( local , com.google.gerrit.common.data.Permission.READ , com.google.gerrit.server.project.testing.Util.DEVS , "^refs/sb/${username}/heads/.*" ) ; com.google.gerrit.server.project.ProjectControl u = user ( local , "d.v@ger-rit.org" , com.google.gerrit.server.project.testing.Util.DEVS ) ; com.google.gerrit.server.project.ProjectControl d = user ( local , "dev@ger-rit.org" , com.google.gerrit.server.project.testing.Util.DEVS ) ; assertCannotRead ( "refs/sb/dev@ger-rit.org/heads/foobar" , u ) ; assertCanRead ( "refs/sb/dev@ger-rit.org/heads/foobar" , d ) ; }
void restore ( com.googlecode.prolog_cafe.lang.Prolog engine ) { engine.cont = this . cont ; engine.r1 = this . r1 ; }
public void run ( ) { if ( cm.extras ( ) . hasActiveLine ( ) ) { newDraft ( cm ) ; } }
protected void configure ( ) { bind ( java.io.File.class ) . annotatedWith ( com.google.gerrit.server.config.SitePath.class ) . toProvider ( com.google.gerrit.server.config.SitePathFromSystemConfigProvider.class ) . in ( com.google.inject.Scopes.SINGLETON ) ; }
public void commentOnWipChangeByOwnerCcingSelf ( ) throws java.lang.Exception { com.google.gerrit.acceptance.server.mail.StagedChange sc = stageWipChange ( com.google.gerrit.server.account.WatchConfig.NotifyType.ALL_COMMENTS ) ; review ( sc.owner , sc.changeId , com.google.gerrit.extensions.client.GeneralPreferencesInfo.EmailStrategy.CC_ON_OWN_COMMENTS ) ; assertThat ( sender ) . notSent ( ) ; }
protected void configure ( ) { factory ( RenameGroupOp.Factory.class ) ; factory ( MetaDataUpdate.InternalFactory.class ) ; bind ( MetaDataUpdate.Server.class ) ; bind ( com.google.gerrit.server.git.ReceiveConfig.class ) ; }
private static com.google.gerrit.server.git.strategy.CommitMergeStatus getCommitMergeStatus ( org.eclipse.jgit.errors.NoMergeBaseException.MergeBaseFailureReason reason ) { switch ( reason ) { case MULTIPLE_MERGE_BASES_NOT_SUPPORTED : case TOO_MANY_MERGE_BASES : default : return com.google.gerrit.server.git.strategy.CommitMergeStatus.MANUAL_RECURSIVE_MERGE ; case CONFLICTS_DURING_MERGE_BASE_CALCULATION : return com.google.gerrit.server.git.strategy.CommitMergeStatus.PATH_CONFLICT ; } }
public void insertComment ( com.google.gerrit.reviewdb.client.PatchLineComment comment ) throws com.google.gwtorm.server.OrmException { if ( ( comment.getStatus ( ) ) == ( PatchLineComment.Status.DRAFT ) ) { insertDraftComment ( comment ) ; } else { insertPublishedComment ( comment ) ; } }
protected org.eclipse.jgit.lib.PersonIdent newIdent ( com.google.gerrit.reviewdb.client.Account author , java.util.Date when ) { return com.google.gerrit.server.notedb.ChangeNoteUtil.newIdent ( author , when , serverIdent , anonymousCowardName ) ; }
public void onSuccess ( com.google.gerrit.client.info.AccountInfo result ) { onCloseForm ( ) ; setAssignee ( result ) ; com.google.gerrit.client.change.Reviewers reviewers = getReviewers ( ) ; if ( reviewers != null ) { reviewers.updateReviewerList ( ) ; } }
public com.google.gerrit.extensions.common.ChangeInfo format ( com.google.gerrit.server.query.change.ChangeData cd ) throws com.google.gwtorm.server.OrmException { return format ( cd , java.util.Optional.empty ( ) , true ) ; }
public boolean match ( short psValue , short expValue ) { return psValue == expValue ; }
protected void parseCommandLine ( ) throws com.google.gerrit.sshd.BaseCommand.UnloggedFailure { parseCommandLine ( this ) ; }
public void onSuccess ( final com.google.gerrit.reviewdb.AccountGroup.Id result ) { com.google.gwt.user.client.History.newItem ( com.google.gerrit.client.Dispatcher.toGroup ( result ) ) ; }
private void logCanceledWhileRunningException ( org.eclipse.jgit.errors.TransportException e ) { com.googlesource.gerrit.plugins.replication.ReplicationQueue.repLog.info ( "Cannot replicate to {}. It was canceled while running" , uri , e ) ; }
protected void onInitUI ( ) { super . onInitUI ( ) ; setPageTitle ( Util.C.settingsHeading ( ) ) ; }
public static com.google.common.cache.CacheBuilder < java.lang.Object , java.lang.Object > defaultBuilder ( ) { return com.google.common.cache.CacheBuilder.newBuilder ( ) . maximumSize ( ( 1 << 10 ) ) . expireAfterWrite ( 30 , java.util.concurrent.TimeUnit.MINUTES ) ; }
public com.google.gerrit.server.project.RefControl getRefControl ( ) { return refControl ; }
private void abandon ( java.lang.String changeId , com.google.gerrit.acceptance.TestAccount by , com.google.gerrit.extensions.client.GeneralPreferencesInfo.EmailStrategy emailStrategy ) throws java.lang.Exception { abandon ( changeId , by , emailStrategy , null ) ; }
public void testUsernameEmailPatternWithRegex ( ) { com.google.gerrit.server.project.Util.allow ( local , com.google.gerrit.common.data.Permission.READ , com.google.gerrit.server.project.Util.DEVS , "^refs/sb/${username}/heads/.*" ) ; com.google.gerrit.server.project.ProjectControl u = util.user ( local , "d.v@ger-rit.org" , com.google.gerrit.server.project.Util.DEVS ) ; com.google.gerrit.server.project.ProjectControl d = util.user ( local , "dev@ger-rit.org" , com.google.gerrit.server.project.Util.DEVS ) ; org.junit.Assert.assertFalse ( "u can't read" , u.controlForRef ( "refs/sb/dev@ger-rit.org/heads/foobar" ) . isVisible ( ) ) ; org.junit.Assert.assertTrue ( "d can read" , d.controlForRef ( "refs/sb/dev@ger-rit.org/heads/foobar" ) . isVisible ( ) ) ; }
public com.google.gerrit.server.IdentifiedUser create ( java.net.SocketAddress remotePeer , com.google.gerrit.reviewdb.client.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( capabilityControlFactory , authConfig , anonymousCowardName , canonicalUrl , accountCache , groupBackend , disableReverseDnsLookup , com.google.inject.util.Providers.of ( remotePeer ) , null , id , null ) ; }
public com.google.gwtorm.server.ResultSet < com.google.gerrit.reviewdb.client.PatchLineComment > draftByAuthor ( com.google.gerrit.reviewdb.client.Account.Id author ) { throw new java.lang.UnsupportedOperationException ( com.google.gerrit.reviewdb.server.DisabledChangesReviewDbWrapper.MSG ) ; }
public boolean isOk ( ) { return ( status.compareTo ( Status.OK ) ) >= 0 ; }
public void testEvictGroupsMembersOK ( ) throws java.lang.Exception { setupMocks ( Constants.GROUPS_MEMBERS , com.ericsson.gerrit.plugins.evictcache.RestSessionTest.EMPTY_JSON , com.ericsson.gerrit.plugins.evictcache.RestSessionTest.OK_RESPONSE , com.ericsson.gerrit.plugins.evictcache.RestSessionTest.DO_NOT_THROW_EXCEPTION ) ; com.google.common.truth.Truth.assertThat ( restClient.evict ( com.ericsson.gerrit.plugins.evictcache.RestSessionTest.SOURCE_NAME , Constants.GROUPS_MEMBERS , org.mockito.Mockito.mock ( AccountGroup.UUID.class ) ) ) . isTrue ( ) ; }
org.kohsuke.args4j.spi.OptionHandler < T > create ( com.google.gerrit.util.cli.CmdLineParser cmdLineParser , org.kohsuke.args4j.OptionDef optionDef , org.kohsuke.args4j.spi.Setter < T > setter ) ;
public void onReplace ( org.eclipse.jgit.lib.ObjectId oldNotesRev , org.eclipse.jgit.lib.ObjectId newNotesRev , com.google.gerrit.reviewdb.client.Account.Id accountId , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId > toRemove , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId > toAdd ) { }
public com.google.gerrit.server.ssh.AbstractCommand create ( ) { return new com.google.gerrit.server.ssh.AdminFlushCaches ( ) ; }
public boolean supportsRoleChanges ( com.gitblit.models.UserModel user , com.gitblit.Constants.Role role ) { return false ; }
public void testCreateProjectWithNameMismatch_BadRequest ( ) throws java.io.IOException { com.google.gerrit.server.project.CreateProject.Input in = new com.google.gerrit.server.project.CreateProject.Input ( ) ; in.name = "otherName" ; com.google.gerrit.acceptance.RestResponse r = session.put ( "/projects/someName" , in ) ; org.junit.Assert.assertEquals ( HttpStatus.SC_BAD_REQUEST , r.getStatusCode ( ) ) ; }
public void pushForMasterWithApprovals_ValueOutOfRange ( ) throws java.lang.Exception { com.google.gerrit.acceptance.PushOneCommit.Result r = pushTo ( "refs/for/master/%l=Code-Review-3" ) ; r.assertErrorStatus ( "label \"Code-Review\": -3 is not a valid value" ) ; }
private final native void set ( int sl , int sc , int el , int ec ) ;
public void onKeyPress ( final com.google.gwt.event.dom.client.KeyPressEvent event ) { if ( ( event.getNativeEvent ( ) . getKeyCode ( ) ) == ( com.google.gwt.event.dom.client.KeyCodes.KEY_ENTER ) ) { event.preventDefault ( ) ; onLogin ( ) ; } }
private org.eclipse.jgit.transport.PushCertificate newSignedCert ( java.lang.String nonce , com.google.gerrit.gpg.testing.TestKey signingKey ) throws java.lang.Exception { return newSignedCert ( nonce , signingKey , null ) ; }
private static java.lang.String getDefaultTemplateMsgWithBursts ( java.lang.String rateLimitTypeName ) { return ( ( ( ( ( "Exceeded rate limit of " + ( com.googlesource.gerrit.plugins.quota.RateMsgHelper.RATE_LIMIT_TOKEN ) ) + " " ) + rateLimitTypeName ) + " requests/hour (or idle time used up in bursts of max " ) + ( com.googlesource.gerrit.plugins.quota.RateMsgHelper.BURSTS_LIMIT_TOKEN ) ) + " requests)" ; }
protected void configure ( ) { com.google.gerrit.extensions.registration.DynamicSet.bind ( binder ( ) , com.google.gerrit.extensions.webui.WebUiPlugin.class ) . toInstance ( new com.google.gerrit.extensions.webui.JavaScriptPlugin ( "automerger.js" ) ) ; }
protected void configure ( ) { bind ( com.ericsson.gerrit.plugins.multimaster.Configuration.class ) . in ( Scopes.SINGLETON ) ; install ( new com.ericsson.gerrit.plugins.multimaster.forwarder.rest.RestForwarderModule ( ) ) ; install ( new com.ericsson.gerrit.plugins.multimaster.event.EventModule ( ) ) ; install ( new com.ericsson.gerrit.plugins.multimaster.index.IndexModule ( ) ) ; }
protected < T > T buildJson ( java.lang.String path , java.lang.reflect.Type typeOfT , java.lang.String additionalQueryString ) throws java.lang.Exception { return com.google.gitiles.ServletTest.newGson ( ) . fromJson ( buildJsonRaw ( path , additionalQueryString ) , typeOfT ) ; }
private void logCanceledWhileRunningException ( org.eclipse.jgit.errors.TransportException e ) { com.googlesource.gerrit.plugins.replication.ReplicationQueue.repLog.info ( "Cannot replicate to {}. It was canceled while running" , uri , e ) ; }
public void singleHashtagNumeric ( ) throws java.lang.Exception { java.lang.String commitMessage = "Subject\n\n#123\n\nLine 2" ; com.google.common.truth.Truth.assertThat ( ( ( java.lang.Iterable < ? > ) ( com.google.gerrit.server.change.HashtagsUtil.extractTags ( commitMessage ) ) ) ) . containsExactlyElementsIn ( com.google.common.collect.Sets.newHashSet ( "123" ) ) ; }
public java.util.Set < com.google.gerrit.reviewdb.client.AccountGroup.UUID > getAllOwners ( ) { java.util.Set < com.google.gerrit.reviewdb.client.AccountGroup.UUID > result = new java.util.HashSet < > ( ) ; for ( com.google.gerrit.server.project.ProjectState p : tree ( ) ) { result.addAll ( p.localOwners ) ; } return result ; }
public java.lang.Double get ( ) { return ( provider.getProcessCpuTime ( ) ) / 1.0E9 ; }
protected void configure ( ) { bind ( com.google.gerrit.pgm.util.ConsoleUI.class ) . toInstance ( init.ui ) ; bind ( com.google.gerrit.pgm.init.InitFlags.class ) . toInstance ( init.flags ) ; bind ( com.google.gerrit.server.git.GitRepositoryManager.class ) ; bind ( com.google.gerrit.server.git.GitProjectImporter.class ) ; }
com.google.gerrit.server.patch.PatchListKey toPatchListKey ( ) { return new com.google.gerrit.server.patch.PatchListKey ( oldId , parentNum , newId , whitespace , PatchListKey.Algorithm.OPTIMIZED_DIFF ) ; }
public void remove ( ) { if ( ! ( m.remove ( name.value ( ) , commandProvider ) ) ) { throw new java.lang.IllegalStateException ( java.lang.String.format ( "can not unregister command: %s" , name.value ( ) ) ) ; } }
public void update ( java.lang.Iterable < T > instances ) throws com.google.gwtorm.client.OrmException { for ( T obj : instances ) { upsertOne ( obj , true ) ; } maybeFlush ( ) ; }
com.google.gerrit.client.diff.ChunkManager getChunkManager ( ) { return chunkManager ; }
public void display ( java.lang.String commitMessage , com.google.gerrit.client.ui.CommentLinkProcessor commentLinkProcessor ) { display ( null , null , false , commitMessage , commentLinkProcessor ) ; }
public com.googlesource.gerrit.plugins.github.oauth.OAuthProtocol getOAuthProtocol ( ) { return oauth ; }
public void onPluginLoad ( ) { com.google.gerrit.plugin.client.Plugin.get ( ) . screen ( "create" , new com.googlesource.gerrit.plugins.serviceuser.client.CreateServiceUserScreen.Factory ( ) ) ; com.google.gerrit.plugin.client.Plugin.get ( ) . screen ( "admin" , new com.googlesource.gerrit.plugins.serviceuser.client.ServiceUserAdminScreen.Factory ( ) ) ; }
public com.google.gerrit.extensions.common.GroupInfo format ( com.google.gerrit.server.group.GroupResource rsrc ) throws com.google.gwtorm.server.OrmException { return createGroupInfo ( rsrc.getGroup ( ) , rsrc :: getControl ) ; }
public org.eclipse.jgit.lib.Config getProjectPluginConfigWithMergedInheritance ( com.google.gerrit.reviewdb.client.Project.NameKey projectName , java.lang.String pluginName ) throws com.google.gerrit.server.project.NoSuchProjectException { return getPluginConfig ( projectName , pluginName ) . getWithInheritance ( true ) ; }
public void onClick ( final com.google.gwt.user.client.ui.Widget sender ) { identites.deleteChecked ( ) ; }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > evictAsync ( com.google.gerrit.reviewdb.AccountExternalId.Key key ) { return byExt.removeAsync ( key ) ; }
public int nextChangeId ( ) throws com.google.gwtorm.server.OrmException { if ( ! ( migration.readChangeSequence ( ) ) ) { return com.google.gerrit.server.Sequences.nextChangeId ( db.get ( ) ) ; } return changeSeq.next ( ) ; }
public com.google.gerrit.server.notedb.ChangeNotes createFromIndexedChange ( com.google.gerrit.reviewdb.client.Change change ) { return new com.google.gerrit.server.notedb.ChangeNotes ( repoManager , migration , allUsers , changeNoteUtil , commentsUtil , change.getProject ( ) , change ) ; }
void evictSubgroupsOf ( com.google.gerrit.reviewdb.client.AccountGroup.UUID groupId ) ;
public static com.google.gerrit.client.rpc.RestApi change ( int id ) { return new com.google.gerrit.client.rpc.RestApi ( "changes" ) . id ( java.lang.String.valueOf ( id ) ) ; }
private void addReviewerToWipChange ( com.google.gerrit.acceptance.server.mail.AddReviewerSenderIT.Adder adder ) throws java.lang.Exception { com.google.gerrit.acceptance.server.mail.StagedChange sc = stageWipChange ( ) ; com.google.gerrit.acceptance.TestAccount reviewer = accountCreator.create ( "added" , "added@example.com" , "added" ) ; addReviewer ( adder , sc.changeId , sc.owner , reviewer.email ) ; assertThat ( sender ) . notSent ( ) ; }
com.google.gerrit.server.permissions.PermissionBackend.ForChange asForChange ( @ com.google.gerrit.common.Nullable com.google.gerrit.server.query.change.ChangeData cd , @ com.google.gerrit.common.Nullable com.google.inject.Provider < com.google.gerrit.reviewdb.server.ReviewDb > db ) { return new com.google.gerrit.server.project.ChangeControl.ForChangeImpl ( cd , db ) ; }
public com.google.gerrit.server.git.SubmoduleOp create ( java.util.Set < com.google.gerrit.reviewdb.client.Branch.NameKey > updatedBranches , com.google.gerrit.server.git.MergeOpRepoManager orm ) throws com.google.gerrit.server.git.SubmoduleException { return new com.google.gerrit.server.git.SubmoduleOp ( gitmodulesFactory , myIdent , cfg , projectCache , projectStateFactory , batchUpdateFactory , updatedBranches , orm ) ; }
public void deleteBranch ( final com.google.gerrit.reviewdb.client.Project.NameKey projectName , final java.util.Set < com.google.gerrit.reviewdb.client.Branch.NameKey > toRemove , final com.google.gwtjsonrpc.common.AsyncCallback < java.util.Set < com.google.gerrit.reviewdb.client.Branch.NameKey > > callback ) { deleteBranchesFactory.create ( projectName , toRemove ) . to ( callback ) ; }
public java.lang.String getMessage ( ) { return clean ( message ) ; }
private com.google.gerrit.server.project.ChangeControl stubChangeControl ( com.google.gerrit.reviewdb.client.Change c ) throws com.google.gwtorm.server.OrmException { return com.google.gerrit.testutil.TestChanges.stubChangeControl ( repoManager , c , allUsers , changeOwner ) ; }
public void testCreateGroupWithoutCapability_Forbidden ( ) throws com.google.gwtorm.server.OrmException , com.jcraft.jsch.JSchException , java.io.IOException { com.google.gerrit.acceptance.RestResponse r = new com.google.gerrit.acceptance.RestSession ( server , user ) . put ( "/groups/newGroup" ) ; org.junit.Assert.assertEquals ( HttpStatus.SC_FORBIDDEN , r.getStatusCode ( ) ) ; }
private java.lang.String newChange2 ( org.eclipse.jgit.lib.PersonIdent ident ) throws java.lang.Exception { com.google.gerrit.acceptance.PushOneCommit push = pushFactory.create ( db , ident , testRepo , PushOneCommit.SUBJECT , com.google.gerrit.acceptance.edit.ChangeEditIT.FILE_NAME , new java.lang.String ( com.google.gerrit.acceptance.edit.ChangeEditIT.CONTENT_OLD , java.nio.charset.StandardCharsets.UTF_8 ) ) ; return push.rm ( "refs/for/master" ) . getChangeId ( ) ; }
com.google.gerrit.server.IdentifiedUser getUser ( ) { return ( ( com.google.gerrit.server.IdentifiedUser ) ( getControl ( ) . getCurrentUser ( ) ) ) ; }
public java.lang.String toString ( ) { return com.google.common.base.MoreObjects.toStringHelper ( this ) . add ( "unchanged" , unchanged ) . add ( "updated" , updated ) . add ( "deleted" , deleted ) . toString ( ) ; }
public void testCreateProjectWhenProjectAlreadyExists_Conflict ( ) throws java.lang.Exception { com.google.gerrit.acceptance.RestResponse r = adminSession.put ( "/projects/All-Projects" ) ; com.google.common.truth.Truth.assertThat ( r.getStatusCode ( ) ) . isEqualTo ( HttpStatus.SC_CONFLICT ) ; }
public final void side ( com.google.gerrit.common.changes.Side side ) { sideRaw ( side.toString ( ) ) ; }
com.google.gerrit.server.notedb.ChangeDraftUpdate createDraftUpdateIfNull ( ) { if ( ( draftUpdate ) == null ) { draftUpdate = draftUpdateFactory.create ( ctl , when ) ; } return draftUpdate ; }
protected void preDisplay ( com.google.gwt.core.client.JsArray < com.google.gerrit.client.changes.ChangeList > result ) { display ( result ) ; }
public void testLinkify_AngleBrackets1 ( ) { final com.google.gwtexpui.safehtml.client.SafeHtml o = com.google.gwtexpui.safehtml.client.SafeHtml_WikifyTest.html ( "A <http://go.here/> B" ) ; final com.google.gwtexpui.safehtml.client.SafeHtml n = o.wikify ( ) ; com.google.common.truth.Truth.assertThat ( o ) . isNotSameAs ( n ) ; com.google.common.truth.Truth.assertThat ( n.asString ( ) ) . isEqualTo ( ( "<p>A &lt;<a href=\"http://go.here/\" target=\"_blank\" rel=\"nofollow\"" + ">http://go.here/</a>&gt; B</p>" ) ) ; }
public void evictGroupsMembers ( ) throws java.io.IOException , javax.servlet.ServletException { configureMocksFor ( Constants.GROUPS_MEMBERS ) ; servlet.doPost ( request , response ) ; verifyAll ( ) ; }
protected void onInitUI ( ) { super . onInitUI ( ) ; diffTable = new com.google.gerrit.client.patches.UnifiedDiffTable ( ) ; add ( diffTable ) ; }
public void onSuccess ( com.google.gerrit.client.projects.ConfigInfoCache.Entry result ) { commentLinkProcessor = result.getCommentLinkProcessor ( ) ; contentTable.setCommentLinkProcessor ( commentLinkProcessor ) ; setTheme ( result.getTheme ( ) ) ; }
public void caseSensitiveName ( ) throws java.lang.Exception { com.google.gitiles.IdentRevFilter filter = com.google.gitiles.IdentRevFilter.author ( "eSt" ) ; com.google.common.truth.Truth.assertThat ( filter.matchesPerson ( new org.eclipse.jgit.lib.PersonIdent ( "est" , "null@google.com" ) ) ) . isFalse ( ) ; com.google.common.truth.Truth.assertThat ( filter.matchesPerson ( new org.eclipse.jgit.lib.PersonIdent ( "Establish" , "null@google.com" ) ) ) . isFalse ( ) ; com.google.common.truth.Truth.assertThat ( filter.matchesPerson ( new org.eclipse.jgit.lib.PersonIdent ( "tESt" , "null@google.com" ) ) ) . isFalse ( ) ; com.google.common.truth.Truth.assertThat ( filter.matchesPerson ( new org.eclipse.jgit.lib.PersonIdent ( "tesTing" , "null@google.com" ) ) ) . isFalse ( ) ; }
public T get ( java.lang.String pluginName , java.lang.String exportName ) { com.google.inject.Provider < T > p = items.get ( new com.google.gerrit.extensions.registration.DynamicMap.NamePair ( pluginName , exportName ) ) ; return p != null ? p.get ( ) : null ; }
public boolean isNotify ( final com.google.gerrit.reviewdb.AccountProjectWatch.NotifyType type ) { switch ( type ) { case NEW_CHANGES : return notifyNewChanges ; case ALL_COMMENTS : return notifyAllComments ; case SUBMITTED_CHANGES : return notifySubmittedChanges ; } return false ; }
public void testInsertOne ( ) throws com.google.gwtorm.server.OrmException , java.sql.SQLException { java.sql.PreparedStatement insert = stubStatementWithUpdateCounts ( com.google.gwtorm.jdbc.TestJdbcAccess.INSERT , 1 ) ; createClassUnderTest ( ) . insert ( oneRow ) ; com.google.gwtorm.jdbc.TestJdbcAccess.assertUsedBatchingOnly ( insert ) ; }
public java.lang.String getSeparator ( ) { return null ; }
public final com.google.gerrit.client.projects.ConfigInfo.ConfigParameterValue values ( java.lang.String [ ] values ) { init ( ) ; for ( java.lang.String v : values ) { addValue ( v ) ; } return this ; }
protected void onOpenRow ( final int row ) { com.google.gwt.user.client.History.newItem ( com.google.gerrit.client.Dispatcher.toGroup ( getRowItem ( row ) . getId ( ) ) ) ; }
public com.google.gerrit.extensions.restapi.BinaryResult apply ( com.google.gerrit.server.project.FileResource rsrc ) throws com.google.gerrit.extensions.restapi.BadRequestException , com.google.gerrit.extensions.restapi.ResourceNotFoundException , java.io.IOException { return fileContentUtil.getContent ( rsrc.getProject ( ) . getProjectState ( ) , rsrc.getRev ( ) , rsrc.getPath ( ) , null ) ; }
public java.lang.String getChangeAvatarUrl ( com.google.gerrit.server.IdentifiedUser forUser ) { java.lang.String userReplacedAvatarChangeURL = replaceInUrl ( com.googlesource.gerrit.plugins.avatars.external.ExternalUrlAvatarProvider.USER_PLACEHOLDER , avatarChangeUrl , forUser.getUserName ( ) ) ; return replaceInUrl ( com.googlesource.gerrit.plugins.avatars.external.ExternalUrlAvatarProvider.EMAIL_PLACEHOLDER , userReplacedAvatarChangeURL , forUser.getAccount ( ) . getPreferredEmail ( ) ) ; }
private static boolean isModify ( com.google.gerrit.server.patch.PatchListEntry content ) { switch ( content.getChangeType ( ) ) { case MODIFIED : case COPIED : case RENAMED : case REWRITE : return true ; case ADDED : case DELETED : default : return false ; } }
public final boolean isClientSslCertLdap ( ) { return ( authType ( ) ) == ( com.google.gerrit.extensions.client.AuthType.CLIENT_SSL_CERT_LDAP ) ; }
public void indexPredicate ( ) throws java.lang.Exception { com.google.gerrit.index.query.Predicate < com.google.gerrit.server.query.change.ChangeData > in = parse ( "file:a" ) ; com.google.common.truth.Truth.assertThat ( rewrite ( in ) ) . isEqualTo ( query ( in ) ) ; }
public com.google.gerrit.extensions.common.CommentInfo apply ( com.google.gerrit.server.change.DraftResource rsrc ) throws com.google.gwtorm.server.OrmException { return commentJson.format ( rsrc.getComment ( ) ) ; }
public boolean apply ( K in ) { com.google.gerrit.reviewdb.client.PatchSet.Id psId = func.apply ( in ) ; return ( upToCurrent.apply ( psId ) ) && ( patchSets.containsKey ( psId ) ) ; }
protected void configure ( ) { bind ( com.google.gerrit.httpd.GerritUiOptions.class ) . toInstance ( new com.google.gerrit.httpd.GerritUiOptions ( headless ) ) ; if ( test ) { bind ( com.google.gerrit.server.securestore.SecureStore.class ) . toProvider ( com.google.gerrit.pgm.util.SecureStoreProvider.class ) ; } }
public void stop ( ) { java.util.concurrent.ScheduledFuture < ? > f = handle ; if ( f != null ) { handle = null ; f.cancel ( true ) ; } }
public void readCommentLinkRawHtml ( ) throws java.lang.Exception { org.eclipse.jgit.revwalk.RevCommit rev = tr.commit ( ) . add ( "project.config" , ( "[commentlink \"bugzilla\"]\n" + ( "\tmatch = \"(bugs#?)(d+)\"\n" + "\thtml = http://bugs.example.com/show_bug.cgi?id=$2" ) ) ) . create ( ) ; com.google.gerrit.server.git.ProjectConfig cfg = read ( rev ) ; com.google.common.truth.Truth.assertThat ( cfg.getCommentLinkSections ( ) ) . isEmpty ( ) ; com.google.common.truth.Truth.assertThat ( cfg.getValidationErrors ( ) ) . containsExactly ( new com.google.gerrit.server.git.ValidationError ( ( "project.config: Error in pattern \"(bugs#?)(d+)\" in commentlink.bugzilla.match: " + "Raw html replacement not allowed" ) ) ) ; }
private boolean search ( java.util.Set < com.google.gerrit.reviewdb.client.AccountGroup.UUID > ids ) { return user.memberOfAny ( ids ) ; }
public java.util.Optional < java.lang.String > getUserName ( ) { return java.util.Optional.of ( username ) ; }
private static boolean match ( com.google.gerrit.server.account.GroupMembership groups , com.google.gerrit.common.data.PermissionRule rule ) { return groups.contains ( rule.getGroup ( ) . getUUID ( ) ) ; }
private static com.google.gerrit.extensions.client.InheritableBoolean asInheritableBoolean ( java.sql.ResultSet rs , java.lang.String col ) throws java.sql.SQLException { return "Y" . equals ( rs.getString ( col ) ) ? com.google.gerrit.extensions.client.InheritableBoolean.TRUE : com.google.gerrit.extensions.client.InheritableBoolean.INHERIT ; }
public static com.google.gerrit.reviewdb.client.Change readOneReviewDbChange ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.Change.Id id ) throws com.google.gwtorm.server.OrmException { return com.google.gerrit.reviewdb.server.ReviewDbUtil.unwrapDb ( db ) . changes ( ) . get ( id ) ; }
private void addMessage ( java.lang.String message ) { messages.add ( new com.google.gerrit.server.git.validators.CommitValidationMessage ( message , false ) ) ; }
public void revokedByKeyNotPresentInStore ( ) throws java.lang.Exception { com.google.gerrit.gpg.testutil.TestKey k = add ( com.google.gerrit.gpg.testutil.TestKeys.revokedCompromisedKey ( ) ) ; save ( ) ; assertProblems ( k , ( "Key is revoked (key material has been compromised):" + " test6 compromised" ) ) ; }
void onDeleteChange ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { if ( com.google.gwt.user.client.Window.confirm ( Resources.C.deleteChange ( ) ) ) { com.google.gerrit.client.change.DraftActions.delete ( changeId , publish , deleteRevision , deleteChange ) ; } }
public void stop ( ) { com.ericsson.gerrit.plugins.highavailability.peers.jgroups.JGroupsPeerInfoProvider.log.info ( "closing jgroups channel {} (cluster {})" , channel.getName ( ) , jgroupsConfig.clusterName ( ) ) ; channel.close ( ) ; peerInfo = java.util.Optional.empty ( ) ; peerAddress = null ; }
private static final native void init ( java.lang.String r , java.lang.String v ) ;
public void postEvent ( final com.google.gerrit.reviewdb.client.Change change , final com.google.gerrit.server.events.Event event , final com.google.gerrit.reviewdb.server.ReviewDb db ) throws com.google.gwtorm.server.OrmException { fireEvent ( change , event , db ) ; }
abstract java.lang.String getLineNumberClassName ( ) ;
com.google.gerrit.server.permissions.PermissionBackend.ForProject asForProject ( ) { return new com.google.gerrit.server.permissions.ProjectControl.ForProjectImpl ( ) ; }
public void onSuccess ( java.lang.Void result ) { view.setTheme ( newTheme ) ; }
public void execute ( ) { java.lang.String t = com.google.gwt.user.client.History.getToken ( ) ; if ( t == null ) { t = "" ; } com.google.gerrit.client.Gerrit.doSignIn ( ( ( com.google.gerrit.common.PageLinks.REGISTER ) + t ) ) ; }
private static void validateReindexerNotRunning ( com.google.gerrit.server.index.OnlineReindexer < ? , ? , ? > reindexer ) throws com.google.gerrit.server.index.ReindexerAlreadyRunningException { if ( ( reindexer != null ) && ( reindexer.isRunning ( ) ) ) { throw new com.google.gerrit.server.index.ReindexerAlreadyRunningException ( ) ; } }
public final native void showBase ( boolean s ) ;
public void setSubmitRecords ( com.google.gerrit.server.project.SubmitRuleOptions options , java.util.List < com.google.gerrit.common.data.SubmitRecord > records ) { submitRecords.put ( options , records ) ; }
public com.google.gerrit.extensions.common.GroupInfo format ( com.google.gerrit.server.group.GroupResource rsrc ) throws com.google.gwtorm.server.OrmException { com.google.gerrit.extensions.common.GroupInfo info = init ( rsrc.getGroup ( ) ) ; initMembersAndIncludes ( rsrc , info ) ; return info ; }
protected void configure ( ) { com.google.gerrit.extensions.registration.DynamicMap.mapOf ( binder ( ) , com.google.gerrit.metrics.dropwizard.MetricResource.METRIC_KIND ) ; child ( com.google.gerrit.server.config.ConfigResource.CONFIG_KIND , "metrics" ) . to ( com.google.gerrit.metrics.dropwizard.MetricsCollection.class ) ; get ( com.google.gerrit.metrics.dropwizard.MetricResource.METRIC_KIND ) . to ( com.google.gerrit.metrics.dropwizard.GetMetric.class ) ; bind ( com.google.gerrit.server.cache.CacheMetrics.class ) ; }
void setSshd ( final com.google.gerrit.server.ssh.Sshd d ) { sshd = d ; }
protected < K , V > com.google.gerrit.server.cache.UnnamedCacheBinding < K , V > cache ( final com.google.inject.TypeLiteral < com.google.gerrit.server.cache.Cache < K , V > > type ) { return cache ( com.google.inject.Key.get ( type ) , type ) ; }
public < K , V > com.google.common.cache.LoadingCache < K , V > build ( com.google.gerrit.server.cache.CacheBinding < K , V > def , com.google.common.cache.CacheLoader < K , V > loader ) { return com.github.benmanes.caffeine.guava.CaffeinatedGuava.build ( create ( def , false ) , loader ) ; }
public final com.google.gerrit.extensions.client.InheritableBoolean configuredValue ( ) { return com.google.gerrit.extensions.client.InheritableBoolean.valueOf ( configuredValueRaw ( ) ) ; }
private com.google.gerrit.server.notedb.ChangeNotesParser newParser ( org.eclipse.jgit.lib.ObjectId tip ) throws java.lang.Exception { com.google.gerrit.reviewdb.client.Change c = newChange ( ) ; return new com.google.gerrit.server.notedb.ChangeNotesParser ( c.getProject ( ) , c.getId ( ) , tip , walk , repoManager , noteUtil , args.metrics ) ; }
boolean needsCookieRefresh ( ) { return ( refreshCookieAt ) <= ( com.google.gerrit.server.util.TimeUtil.nowMs ( ) ) ; }
private void clearMarkerAndWidget ( ) { marker.clear ( ) ; if ( ( widget ) != null ) { widget.clear ( ) ; } else { cm.removeLineClass ( 0 , LineClassWhere.WRAP , DiffTable.style.hideNumber ( ) ) ; } }
private java.lang.String clean ( java.lang.String str ) { if ( str != null ) { str = str.replace ( "\"" , "\\\"" ) . trim ( ) ; } else { str = "" ; } return str ; }
private synchronized void runHook ( java.nio.file.Path hook , java.util.List < java.lang.String > args ) { if ( java.nio.file.Files.exists ( hook ) ) { hookQueue.execute ( new com.google.gerrit.common.ChangeHookRunner.AsyncHookTask ( null , hook , args ) ) ; } }
boolean canPerform ( java.lang.String permissionName ) { return canPerform ( permissionName , false , false ) ; }
public void onClick ( com.google.gwt.event.dom.client.ClickEvent event ) { setReviewedByCurrentUser ( true ) ; reviewedLink.go ( ) ; }
public com.google.gerrit.reviewdb.client.LabelId getJobId ( ) { return key.jobId ; }
public com.google.gerrit.reviewdb.SystemConfig getSystemConfig ( ) throws com.google.gwtorm.client.OrmException { final com.google.gerrit.reviewdb.ReviewDb c = open ( ) ; try { return c.systemConfig ( ) . get ( new com.google.gerrit.reviewdb.SystemConfig.Key ( ) ) ; } finally { c.close ( ) ; } }
private void configureWebsessiosSection ( ) { ui.header ( "Websession section" ) ; promptAndSetString ( "Cleanup interval" , com.ericsson.gerrit.plugins.highavailability.Configuration.WEBSESSION_SECTION , com.ericsson.gerrit.plugins.highavailability.Configuration.CLEANUP_INTERVAL_KEY , com.ericsson.gerrit.plugins.highavailability.Configuration.DEFAULT_CLEANUP_INTERVAL ) ; }
public com.google.gerrit.extensions.common.WebLinkInfo getProjectWeblink ( java.lang.String projectName ) { return new com.google.gerrit.extensions.common.WebLinkInfo ( name , myImageUrl , java.lang.String.format ( placeHolderUrlProject , projectName ) , Target.BLANK ) ; }
public void testMIXED_NoFullNameUser ( ) { setFrom ( "MIXED" ) ; final java.lang.String email = "a.u.thor@test.example.com" ; final com.google.gerrit.reviewdb.client.Account.Id user = user ( null , email ) ; org.easymock.EasyMock.replay ( accountCache ) ; final com.google.gerrit.server.mail.Address r = create ( ) . from ( user ) ; org.junit.Assert.assertNotNull ( r ) ; org.junit.Assert.assertEquals ( "Anonymous Coward (Code Review)" , r.name ) ; org.junit.Assert.assertEquals ( ident.getEmailAddress ( ) , r.email ) ; org.easymock.EasyMock.verify ( accountCache ) ; }
public com.google.gerrit.extensions.common.WebLinkInfo getProjectWeblink ( java.lang.String projectName ) { java.lang.String url = getBranchUrl ( projectName , Constants.HEAD ) ; return url == null ? null : new com.google.gerrit.extensions.common.WebLinkInfo ( com.googlesource.gerrit.plugins.xdocs.XDocWebLink.README , getImageUrl ( ) , url , Target.SELF ) ; }
com.google.gerrit.server.patch.PublishComments create ( com.google.gerrit.reviewdb.PatchSet.Id patchSetId , java.lang.String messageText , java.util.Set < com.google.gerrit.reviewdb.ApprovalCategoryValue.Id > approvals , boolean forceMessage ) ;
void onDeleteChange ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { if ( com.google.gwt.user.client.Window.confirm ( Resources.C.deleteDraftChange ( ) ) ) { com.google.gerrit.client.change.DraftActions.delete ( changeId , publish , deleteRevision , deleteChange ) ; } }
public static void deleteRevision ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , java.lang.String commit , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwt.core.client.JavaScriptObject > cb ) { com.google.gerrit.client.changes.ChangeApi.revision ( project , id , commit ) . delete ( cb ) ; }
public java.lang.String toString ( ) { return ( ( ( "OAuthSession [token=" + ( tokenCache.get ( accountId ) ) ) + ", user=" ) + ( user ) ) + "]" ; }
public java.lang.String toString ( ) { return com.google.gerrit.gpg.Fingerprint.toString ( fp ) ; }
public com.google.gerrit.server.IdentifiedUser getReviewerUser ( ) { com.google.common.base.Preconditions.checkArgument ( ( ( user ) != null ) , "no user provided" ) ; return user ; }
public com.google.gerrit.server.group.CreateGroup create ( com.google.gerrit.extensions.restapi.TopLevelResource root , java.lang.String name ) { return createGroup.create ( com.google.gerrit.extensions.restapi.Url.decode ( name ) ) ; }
private com.google.gerrit.client.rpc.RestApi reviewed ( ) { return com.google.gerrit.client.changes.ChangeApi.revision ( Project.NameKey.asStringOrNull ( projectKey ) , patchSetId ) . view ( "files" ) . id ( path ) . view ( "reviewed" ) ; }
protected void configure ( ) { com.google.gerrit.extensions.registration.DynamicSet.setOf ( binder ( ) , com.googlesource.gerrit.plugins.events.StreamEventListener.class ) ; bind ( com.googlesource.gerrit.plugins.events.EventStore.class ) . to ( com.googlesource.gerrit.plugins.events.fsstore.FsStore.class ) ; com.google.gerrit.extensions.registration.DynamicSet.bind ( binder ( ) , com.google.gerrit.common.EventListener.class ) . to ( com.googlesource.gerrit.plugins.events.CoreListener.class ) ; }
com.google.common.util.concurrent.ListenableFuture < ? > delete ( org.apache.lucene.index.Term term ) throws java.io.IOException { return new NrtFuture ( writer.deleteDocuments ( term ) ) ; }
private void setupPostMocks ( boolean changeExist , boolean ormException ) throws com.google.gwtorm.server.OrmException , java.io.IOException { setupPostMocks ( changeExist , ormException , com.ericsson.gerrit.plugins.multimaster.SyncIndexRestApiServletTest.DO_NOT_THROW_IO_EXCEPTION ) ; }
private boolean canEditUserName ( ) { return com.google.gerrit.client.Gerrit.getConfig ( ) . canEdit ( Account.FieldName.USER_NAME ) ; }
private boolean isProjectStatePermittingRead ( ) { return ( getProjectControl ( ) . getProject ( ) . getState ( ) . equals ( ProjectState.READ_ONLY ) ) || ( isProjectStatePermittingWrite ( ) ) ; }
public void onSuccess ( final com.google.gerrit.common.data.ChangeDetail result ) { if ( result != null ) { changeScreen.update ( result ) ; } else { com.google.gerrit.client.Gerrit.display ( PageLinks.MINE ) ; } }
protected void preDisplay ( final com.google.gerrit.client.projects.ProjectMap result ) { if ( ( ( subname ) == null ) || ( "" . equals ( subname ) ) ) { display ( result ) ; } }
public void getDiffPreferencesOfNonExistingAccount_NotFound ( ) throws java.lang.Exception { com.google.gerrit.acceptance.RestResponse r = adminSession.get ( "/accounts/non-existing/preferences" ) ; r.assertNotFound ( ) ; }
public static java.lang.String toProjectAdmin ( final com.google.gerrit.client.reviewdb.Project.Id id , final java.lang.String tab ) { return ( ( "admin,project," + ( id.toString ( ) ) ) + "," ) + tab ; }
public com.google.gerrit.server.patch.IntraLineDiff getIntraLineDiff ( com.google.gerrit.server.patch.IntraLineDiffKey key ) ;
private java.time.Instant now ( ) { return java.time.Instant.now ( ) ; }
protected com.google.gerrit.server.query.Predicate < com.google.gerrit.server.account.AccountState > enforceVisibility ( com.google.gerrit.server.query.Predicate < com.google.gerrit.server.account.AccountState > pred ) { return new com.google.gerrit.server.query.AndSource ( pred , new com.google.gerrit.server.query.account.AccountIsVisibleToPredicate ( accountControlFactory.get ( ) ) ) ; }
com.google.gerrit.server.git.receive.AsyncReceiveCommits create ( com.google.gerrit.server.project.ProjectControl projectControl , org.eclipse.jgit.lib.Repository repository , @ com.google.gerrit.common.Nullable com.google.gerrit.server.git.receive.MessageSender messageSender , com.google.common.collect.SetMultimap < com.google.gerrit.server.notedb.ReviewerStateInternal , com.google.gerrit.reviewdb.client.Account.Id > extraReviewers ) ;
private void syncDisabledPlugins ( com.google.common.collect.SetMultimap < java.lang.String , java.nio.file.Path > jars ) { stopRemovedPlugins ( jars ) ; dropRemovedDisabledPlugins ( jars ) ; }
protected boolean isVisibleTo ( final com.google.gerrit.reviewdb.client.Account.Id to ) throws com.google.gwtorm.server.OrmException { return ( ( projectState ) == null ) || ( projectState.controlFor ( args.identifiedUserFactory.create ( to ) ) . controlFor ( change ) . isVisible ( args.db.get ( ) ) ) ; }
public boolean ignored ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return stars.isIgnored ( change ) ; } catch ( com.google.gwtorm.server.OrmException e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot check if ignored" , e ) ; } }
public static com.google.gerrit.server.patch.IntraLineDiffArgs create ( com.google.gerrit.server.patch.Text aText , com.google.gerrit.server.patch.Text bText , java.util.List < org.eclipse.jgit.diff.Edit > edits , com.google.gerrit.reviewdb.client.Project.NameKey project , org.eclipse.jgit.lib.ObjectId commit , java.lang.String path ) { return new com.google.gerrit.server.patch.AutoValue_IntraLineDiffArgs ( aText , bText , com.google.gerrit.server.patch.IntraLineDiffArgs.deepCopyEdits ( edits ) , project , commit , path ) ; }
com.google.gerrit.server.git.MergeOp create ( com.google.gerrit.server.git.ChangeSet changes , com.google.gerrit.server.IdentifiedUser caller ) ;
public void setGroups ( java.util.List < java.lang.String > groups ) { com.google.common.base.Preconditions.checkNotNull ( groups , "groups may not be null" ) ; this . groups = groups ; }
public void testOnlyVisibleGroupsReturned ( ) throws com.google.gwtorm.server.OrmException , com.jcraft.jsch.JSchException , java.io.IOException { java.util.Set < java.lang.String > expectedGroups = com.google.common.collect.Sets.newHashSet ( ) ; expectedGroups.add ( "Anonymous Users" ) ; expectedGroups.add ( "Registered Users" ) ; com.google.gerrit.acceptance.TestAccount user = accounts.create ( "user" , "user@example.com" , "User" ) ; com.google.gerrit.acceptance.RestResponse r = new com.google.gerrit.acceptance.RestSession ( server , user ) . get ( "/groups/" ) ; java.util.Map < java.lang.String , com.google.gerrit.acceptance.rest.group.GroupInfo > result = new com.google.gson.Gson ( ) . fromJson ( r.getReader ( ) , new com.google.gson.reflect.TypeToken < java.util.Map < java.lang.String , com.google.gerrit.acceptance.rest.group.GroupInfo > > ( ) { } . getType ( ) ) ; com.google.gerrit.acceptance.rest.group.GroupAssert.assertGroups ( expectedGroups , result.keySet ( ) ) ; }
public static void fetch ( org.eclipse.jgit.junit.TestRepository < ? > testRepo , java.lang.String spec ) throws org.eclipse.jgit.api.errors.GitAPIException { org.eclipse.jgit.api.FetchCommand fetch = testRepo.git ( ) . fetch ( ) ; fetch.setRefSpecs ( new org.eclipse.jgit.transport.RefSpec ( spec ) ) ; fetch.call ( ) ; }
protected java.lang.String cacheNameOf ( java.lang.String plugin , java.lang.String name ) { if ( "gerrit" . equals ( plugin ) ) { return name ; } else { return ( plugin + "-" ) + name ; } }
public void postEvent ( final com.google.gerrit.reviewdb.client.Change change , final com.google.gerrit.server.events.Event event , final com.google.gerrit.reviewdb.server.ReviewDb db ) throws com.google.gwtorm.server.OrmException { fireEvent ( change , event , db ) ; }
private static void synchronizedIncrement ( com.google.gerrit.server.git.MultiProgressMonitor.Task p ) { synchronized ( p ) { p.update ( 1 ) ; } }
public static void included ( com.google.gerrit.reviewdb.client.AccountGroup.UUID group , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.groups.GroupList > callback ) { new com.google.gerrit.client.rpc.RestApi ( "/groups/" ) . id ( group.get ( ) ) . view ( "groups" ) . get ( callback ) ; }
public void testCreateChildProjectUnderNonExistingParent_UnprocessableEntity ( ) throws java.io.IOException { com.google.gerrit.server.project.CreateProject.Input in = new com.google.gerrit.server.project.CreateProject.Input ( ) ; in.parent = "non-existing-project" ; com.google.gerrit.acceptance.RestResponse r = session.put ( "/projects/child" , in ) ; org.junit.Assert.assertEquals ( HttpStatus.SC_UNPROCESSABLE_ENTITY , r.getStatusCode ( ) ) ; }
public java.lang.String format ( java.lang.String projectName , java.lang.String path , java.lang.String revision , java.lang.String abbrRev , com.googlesource.gerrit.plugins.xdocs.ConfigSection cfg , java.io.InputStream raw ) throws java.io.IOException ;
private static java.util.Set < com.google.gerrit.reviewdb.AccountGroup.Id > copy ( java.util.Set < com.google.gerrit.reviewdb.AccountGroup.Id > groups ) { return java.util.Collections.unmodifiableSet ( new java.util.HashSet < com.google.gerrit.reviewdb.AccountGroup.Id > ( groups ) ) ; }
public void commit ( ) { throw new com.google.gerrit.testutil.DisabledReviewDb.Disabled ( ) ; }
private com.google.gerrit.extensions.client.GitBasicAuthPolicy getBasicAuthPolicy ( org.eclipse.jgit.lib.Config cfg ) { com.google.gerrit.extensions.client.GitBasicAuthPolicy defaultAuthPolicy = ( isLdapAuthType ( ) ) ? com.google.gerrit.extensions.client.GitBasicAuthPolicy.LDAP : isOAuthType ( ) ? com.google.gerrit.extensions.client.GitBasicAuthPolicy.OAUTH : com.google.gerrit.extensions.client.GitBasicAuthPolicy.HTTP ; return cfg.getEnum ( "auth" , null , "gitBasicAuthPolicy" , defaultAuthPolicy ) ; }
private void enableForm ( final boolean on ) { groupNameTxt.setEnabled ( on ) ; descTxt.setEnabled ( on ) ; addMember.setEnabled ( on ) ; nameTxtBox.setEnabled ( on ) ; delMember.setEnabled ( on ) ; }
protected int getEventType ( ) { return com.ruesga.gerrit.plugins.fcm.rest.CloudNotificationEvents.ASSIGNEE_CHANGED_EVENT ; }
public java.lang.String getUrl ( ) { return clean ( url ) ; }
public void onLoad ( com.google.gerrit.plugin.client.screen.Screen screen ) { screen.setPageTitle ( ( ( com.google.gerrit.plugin.client.Plugin.get ( ) . getName ( ) ) + " Preferences" ) ) ; screen.show ( new com.googlesource.gerrit.plugins.imagare.client.ImagarePreferenceScreen ( enableImageServer ) ) ; }
public void setFile ( java.lang.String str ) { file = str ; }
private static java.lang.String nextFunction ( ) { return ( "__gwtjsonrpc_callback" + ( com.google.gwtjsonrpc.client.CallbackHandle.cbgen ) ) + ( ( com.google.gwtjsonrpc.client.CallbackHandle.callbackId ) ++ ) ; }
com.ericsson.gerrit.plugins.highavailability.forwarder.rest.HttpResponseHandler.HttpResult delete ( java.lang.String endpoint ) throws java.io.IOException { return httpClient.execute ( new org.apache.http.client.methods.HttpDelete ( ( ( getPeerInfo ( ) . getDirectUrl ( ) ) + endpoint ) ) , new com.ericsson.gerrit.plugins.highavailability.forwarder.rest.HttpResponseHandler ( ) ) ; }
private void writeObject ( final java.io.ObjectOutputStream out ) throws java.io.IOException { refreshObjectIds ( ) ; org.eclipse.jgit.lib.ObjectIdSerialization.writeCanBeNull ( out , oldId ) ; org.eclipse.jgit.lib.ObjectIdSerialization.writeNotNull ( out , newId ) ; com.google.gerrit.server.ioutil.BasicSerialization.writeEnum ( out , getWhitespace ( ) ) ; }
private void setDefaultFields ( javax.servlet.FilterConfig filterConfig ) throws javax.servlet.ServletException { setDefaultConfig ( filterConfig ) ; setDefaultRenderer ( filterConfig ) ; setDefaultUrls ( ) ; setDefaultAccess ( ) ; setDefaultVisibilityCache ( ) ; setDefaultTimeCache ( ) ; setDefaultBlameCache ( ) ; setDefaultGitwebRedirect ( ) ; }
void addQuery ( java.lang.String name ) { if ( ( query ) == null ) { query = com.google.common.collect.Sets.newHashSet ( ) ; } com.google.common.collect.Iterables.addAll ( query , com.google.gerrit.server.OptionUtil.splitOptionValue ( name ) ) ; }
protected java.nio.file.Path getResourcePath ( java.lang.String pathInfo ) throws java.io.IOException { if ( ( bowerComponents ) == null ) { throw new java.io.IOException ( ( ( "No polymer components found: " + ( zip ) ) + ". Run `buck build //polygerrit-ui:polygerrit_components`?" ) ) ; } return bowerComponents.resolve ( pathInfo ) ; }
public void onSuccess ( com.googlesource.gerrit.plugins.serviceuser.client.AccountCapabilities ac ) { display ( serviceUserInfo , ( ( configInfo.getAllowEmail ( ) ) || ( ac.canPerform ( "administrateServer" ) ) ) ) ; }
private static java.lang.String getDefaultTemplateMsg ( java.lang.String rateLimitTypeName ) { return ( ( ( "Exceeded rate limit of " + ( com.googlesource.gerrit.plugins.quota.RateMsgHelper.RATE_LIMIT_TOKEN ) ) + " " ) + rateLimitTypeName ) + " requests/hour" ; }
public void start ( final org.apache.sshd.server.Environment env ) { startThread ( new com.google.gerrit.sshd.commands.CommandRunnable ( ) { @ java.lang.Override public void run ( ) throws java.lang.Exception { parseCommandLine ( ) ; flush ( ) ; } } ) ; }
protected void doGet ( javax.servlet.http.HttpServletRequest req , javax.servlet.http.HttpServletResponse resp ) throws java.io.IOException , javax.servlet.ServletException { com.googlesource.gerrit.plugins.lfs.locks.LfsLocksContext context = new com.googlesource.gerrit.plugins.lfs.locks.LfsLocksContext ( req , resp ) ; getters.create ( context ) . run ( ) ; }
public com.google.gerrit.server.change.ListRevisionDrafts list ( ) throws com.google.gerrit.extensions.restapi.AuthException { checkIdentifiedUser ( ) ; return list ; }
protected void insertRow ( final int row ) { super . insertRow ( row ) ; final com.google.gwt.user.client.ui.HTMLTable.CellFormatter fmt = table.getCellFormatter ( ) ; defaultStyle ( row , fmt ) ; }
public void onDoubleClick ( com.google.gwt.event.dom.client.DoubleClickEvent event ) { if ( headerSideB.isFileOrCommitMessage ( ) ) { createFileCommentEditorOnSideB ( ) ; } }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > removeAllAsync ( ) { return self.removeAllAsync ( ) ; }
public abstract com.google.common.collect.ImmutableSet < com.google.gerrit.reviewdb.client.AccountGroup.UUID > getSubgroups ( ) ;
public void addReviewerToReviewableChangeByOwnerCcingSelfInNoteDbBatch ( ) throws java.lang.Exception { addReviewerToReviewableChangeByOwnerCcingSelfInNoteDb ( batch ( ) ) ; }
com.google.gerrit.extensions.restapi.Response < com.google.gerrit.extensions.common.ChangeInfo > apply ( com.google.gerrit.server.change.RevisionResource rsrc ) throws com.google.gwtorm.server.OrmException { return com.google.gerrit.extensions.restapi.Response.withMustRevalidate ( json.create ( options ) . format ( rsrc ) ) ; }
protected void configure ( ) { factory ( AgreementInfoFactory.Factory.class ) ; factory ( DeleteExternalIds.Factory.class ) ; factory ( ExternalIdDetailFactory.Factory.class ) ; factory ( GroupDetailFactory.Factory.class ) ; factory ( MyGroupsFactory.Factory.class ) ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { doSave ( null ) ; }
public void testChangeOwner_OwnerACLNotGranted ( ) throws java.lang.Exception { assertApproveFails ( user , createMyChange ( testRepo ) ) ; }
public void testContinueFromAfterNewline ( ) { com.google.gerrit.client.diff.EditIterator iter = new com.google.gerrit.client.diff.EditIterator ( lines , 0 ) ; iter.advance ( 4 ) ; assertLineChsEqual ( net.codemirror.lib.Pos.create ( 2 , 2 ) , iter.advance ( 6 ) ) ; }
public boolean isCancelled ( ) { if ( cancelled ) { status.update ( GitJobStatus.Code.CANCELLED ) ; } return cancelled ; }
protected void preDisplay ( final com.google.gerrit.client.reviewdb.Account result ) { display ( result ) ; }
public void setUp ( ) throws java.lang.Exception { admin = accounts.create ( "admin" , "admin@example.com" , "Administrator" , "Administrators" ) ; sshSession = new com.google.gerrit.acceptance.SshSession ( server , admin ) ; project1 = new com.google.gerrit.reviewdb.client.Project.NameKey ( "p1" ) ; com.google.gerrit.acceptance.git.GitUtil.createProject ( sshSession , project1.get ( ) ) ; project2 = new com.google.gerrit.reviewdb.client.Project.NameKey ( "p2" ) ; com.google.gerrit.acceptance.git.GitUtil.createProject ( sshSession , project2.get ( ) ) ; project3 = new com.google.gerrit.reviewdb.client.Project.NameKey ( "p3" ) ; com.google.gerrit.acceptance.git.GitUtil.createProject ( sshSession , project3.get ( ) ) ; }
public java.lang.Iterable < com.google.gerrit.prettify.common.EditList.Hunk > getHunks ( ) { final int ctx = settings.getContext ( ) ; return new com.google.gerrit.prettify.common.EditList ( edits , ctx , a.size ( ) , b.size ( ) ) . getHunks ( ) ; }
public < T extends com.google.gwt.core.client.JavaScriptObject > void post ( java.lang.String content , com.google.gwt.user.client.rpc.AsyncCallback < T > cb ) { post ( content , com.google.gerrit.client.rpc.RestApi.wrap ( cb ) ) ; }
com.google.gerrit.extensions.api.changes.Changes.QueryRequest query ( java.lang.String query ) ;
public java.lang.String getEmailRegistrationToken ( ) { if ( ( emailToken ) == null ) { emailToken = com.google.common.base.Preconditions.checkNotNull ( tokenVerifier.encode ( user.getAccountId ( ) , addr ) , "token" ) ; } return emailToken ; }
public void onSuccess ( final com.google.gerrit.client.changes.PatchSetPublishDetail result ) { send.setEnabled ( true ) ; display ( result ) ; }
private static boolean isBodyUTF8 ( final com.google.gwtjsonrpc.server.ActiveCall call ) { java.lang.String enc = call.httpRequest.getCharacterEncoding ( ) ; if ( enc == null ) { enc = "" ; } return enc.toLowerCase ( ) . contains ( JsonConstants.JSON_ENC.toLowerCase ( ) ) ; }
public static boolean isSystemGroup ( com.google.gerrit.reviewdb.client.AccountGroup.UUID uuid ) { return uuid.get ( ) . startsWith ( com.google.gerrit.server.group.SystemGroupBackend.SYSTEM_GROUP_SCHEME ) ; }
void evictGroupsWithMember ( com.google.gerrit.reviewdb.client.Account.Id memberId ) ;
public void onSuccess ( ) { com.google.gerrit.client.Gerrit.display ( token , new com.google.gerrit.client.diff.Unified ( baseId , id.getParentKey ( ) , id.get ( ) , side , line ) ) ; }
com.google.gerrit.extensions.restapi.Response < com.google.gerrit.extensions.common.ChangeInfo > apply ( com.google.gerrit.server.change.RevisionResource rsrc ) throws com.google.gwtorm.server.OrmException { return com.google.gerrit.extensions.restapi.Response.withMustRevalidate ( json.format ( rsrc ) ) ; }
public boolean getReady ( java.lang.String indexName , int version ) { return cfg.getBoolean ( com.google.gerrit.index.GerritIndexStatus.SECTION , com.google.gerrit.index.GerritIndexStatus.indexDirName ( indexName , version ) , com.google.gerrit.index.GerritIndexStatus.KEY_READY , false ) ; }
public void parseDynamicBeans ( com.google.gerrit.util.cli.CmdLineParser clp ) { for ( java.util.Map.Entry < java.lang.String , com.google.gerrit.server.DynamicOptions.DynamicBean > e : beansByPlugin.entrySet ( ) ) { clp.parseWithPrefix ( ( "--" + ( e.getKey ( ) ) ) , e.getValue ( ) ) ; } }
protected void beforeTest ( org.junit.runner.Description description ) throws java.lang.Exception { locatePaths ( ) ; retrievePluginName ( ) ; buildPluginJar ( ) ; createTestSiteDirs ( ) ; copyJarToTestSite ( ) ; beforeTestServerStarts ( ) ; super . beforeTest ( description ) ; }
public void warning ( java.lang.String msg ) { java.lang.System.err.println ( msg ) ; java.lang.System.err.flush ( ) ; }
protected void onLoad ( ) { super . onLoad ( ) ; if ( ( header ) == null ) { onInitUI ( ) ; } com.google.gerrit.client.Gerrit.setQueryString ( null ) ; }
public void parse ( ) { projectWatches = com.google.gerrit.server.account.WatchConfig.parse ( accountId , cfg , validationErrorSink ) ; }
public static com.google.gerrit.server.git.QueryList parse ( java.lang.String text , com.google.gerrit.server.git.ValidationError.Sink errors ) throws java.io.IOException { return new com.google.gerrit.server.git.QueryList ( com.google.gerrit.server.git.QueryList.parse ( text , com.google.gerrit.server.git.QueryList.FILE_NAME , com.google.gerrit.server.git.TRIM , com.google.gerrit.server.git.TRIM , errors ) ) ; }
public void postEvent ( com.google.gerrit.reviewdb.client.Change change , com.google.gerrit.server.events.ChangeEvent event , com.google.gerrit.reviewdb.server.ReviewDb db ) { }
public void onSuccess ( com.google.gerrit.client.changes.ReviewInfo result ) { reviewed.setValue ( true , false ) ; }
protected void addToString ( com.google.common.base.MoreObjects.ToStringHelper helper ) { helper.add ( "approval" , psa ) ; }
public synchronized void setStatus ( int sc ) { status = sc ; committed = true ; }
public void onClick ( final com.google.gwt.user.client.ui.Widget sender ) { doAddNew ( ) ; }
public void onValueChange ( com.google.gwt.event.logical.shared.ValueChangeEvent < java.lang.Boolean > event ) { if ( event.getValue ( ) ) { select ( ) ; } }
public java.util.List < com.google.gerrit.extensions.common.AccountInfo > getPastAssignees ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return getPastAssignees.apply ( change ) . value ( ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot get past assignees" , e ) ; } }
public void onNewProjectCreated ( com.google.gerrit.extensions.events.NewProjectCreatedListener.Event event ) { for ( org.eclipse.jgit.transport.URIish uri : getURIs ( new com.google.gerrit.reviewdb.client.Project.NameKey ( event.getProjectName ( ) ) , FilterType.PROJECT_CREATION ) ) { createProject ( uri , event.getHeadName ( ) ) ; } }
protected void configure ( ) { bind ( PrologEnvironment.Args.class ) . toInstance ( new com.google.gerrit.rules.PrologEnvironment.Args ( projects , null , null , null , null , null ) ) ; }
public com.google.gerrit.server.project.FileResource parse ( com.google.gerrit.server.project.BranchResource parent , com.google.gerrit.extensions.restapi.IdString id ) { return new com.google.gerrit.server.project.FileResource ( parent.getNameKey ( ) , parent.getRef ( ) , id.get ( ) ) ; }
private void removeKeyHandlerRegistrations ( ) { for ( com.google.gwt.event.shared.HandlerRegistration h : handlers ) { h.removeHandler ( ) ; } handlers.clear ( ) ; }
void sideBySidePatchDetail ( com.google.gerrit.client.reviewdb.Patch.Key key , java.util.List < com.google.gerrit.client.reviewdb.PatchSet.Id > versions , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.data.SideBySidePatchDetail > callback ) ;
void onReplaceByKeys ( org.eclipse.jgit.lib.ObjectId oldNotesRev , org.eclipse.jgit.lib.ObjectId newNotesRev , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId.Key > toRemove , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId > toAdd ) throws java.io.IOException ;
void format ( java.lang.StringBuilder b , java.util.Map < java.lang.String , java.lang.String > p ) { java.lang.String v = p.get ( name ) ; if ( v == null ) { v = "" ; } b.append ( function.apply ( v ) ) ; }
public void onKeyPress ( final com.google.gwt.event.dom.client.KeyPressEvent event ) { ensurePointerVisible ( ) ; onDown ( ) ; }
public void flushAll_Forbidden ( ) throws java.lang.Exception { userSession.post ( "/config/server/caches/" , new com.google.gerrit.server.config.PostCaches.Input ( com.google.gerrit.server.config.PostCaches.Operation.FLUSH_ALL ) ) . assertForbidden ( ) ; }
protected com.vmware.gerrit.owners.common.PathOwners createValue ( com.googlecode.prolog_cafe.lang.Prolog engine ) { com.google.gerrit.server.patch.PatchList patchList = StoredValues.PATCH_LIST.get ( engine ) ; org.eclipse.jgit.lib.Repository repository = StoredValues.REPOSITORY.get ( engine ) ; return new com.vmware.gerrit.owners.common.PathOwners ( accounts , repository , patchList ) ; }
private void decodeReviewers ( com.google.common.collect.Multimap < java.lang.String , org.apache.lucene.index.IndexableField > doc , com.google.gerrit.server.query.change.ChangeData cd ) { cd.setReviewers ( com.google.gerrit.server.index.change.ChangeField.parseReviewerFieldValues ( com.google.common.collect.FluentIterable.from ( doc.get ( com.google.gerrit.lucene.LuceneChangeIndex.REVIEWER_FIELD ) ) . transform ( IndexableField :: stringValue ) ) ) ; }
com.google.gerrit.server.IdentifiedUser getUser ( ) { return getControl ( ) . getUser ( ) . asIdentifiedUser ( ) ; }
private boolean activeForEmail ( com.google.gerrit.server.config.PluginConfig config , java.lang.String email ) { return matchCriteria ( config , "email" , email , true , false ) ; }
private void incrementCurrentPatchSetFieldOnly ( com.google.gerrit.reviewdb.client.Change c ) { com.google.gerrit.testing.TestChanges.incrementPatchSet ( c ) ; }
public boolean isNotify ( final com.google.gerrit.reviewdb.AccountProjectWatch.NotifyType type ) { switch ( type ) { case NEW_CHANGES : return notifyNewChanges ; case ALL_COMMENTS : return notifyAllComments ; case SUBMITTED_CHANGES : return notifySubmittedChanges ; } return false ; }
private java.lang.Iterable < com.google.gerrit.reviewdb.client.Project.NameKey > scan ( ) { if ( ( matchPrefix ) != null ) { return projectCache.byName ( matchPrefix ) ; } else { return projectCache.all ( ) ; } }
public static void publishEdit ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwt.core.client.JavaScriptObject > cb ) { com.google.gwt.core.client.JavaScriptObject in = com.google.gwt.core.client.JavaScriptObject.createObject ( ) ; com.google.gerrit.client.changes.ChangeApi.change ( project , id ) . view ( "edit:publish" ) . post ( in , cb ) ; }
private boolean isGerritConfig ( javax.servlet.http.HttpServletRequest req ) throws java.io.IOException { java.io.File f = resolveFile ( req ) ; return gerrit_config_path.equals ( f.getCanonicalPath ( ) ) ; }
protected void configure ( ) { bind ( java.io.File.class ) . annotatedWith ( com.google.gerrit.server.config.SitePath.class ) . toInstance ( getSitePath ( ) ) ; bind ( com.google.gerrit.pgm.init.Browser.class ) ; }
void set ( java.sql.PreparedStatement ps , int col , K value ) throws java.sql.SQLException { ps.setObject ( col , value , java.sql.Types.JAVA_OBJECT ) ; }
protected void configureServlets ( ) { filter ( "/*" ) . through ( com.google.gerrit.server.http.RequestCleanupFilter.class ) ; filter ( "/*" ) . through ( com.google.gerrit.server.http.UrlRewriteFilter.class ) ; }
public boolean apply ( com.google.gerrit.reviewdb.client.ChangeMessage in ) { com.google.gerrit.reviewdb.client.PatchSet.Id psId = in.getPatchSetId ( ) ; if ( psId == null ) { return true ; } return validPatchSet.apply ( psId ) ; }
public com.google.common.base.Optional < java.io.InputStream > getResourceInputStream ( java.lang.String resourcePath ) throws java.io.IOException { return com.google.common.base.Optional.absent ( ) ; }
public void onKeyPress ( final com.google.gwt.event.dom.client.KeyPressEvent event ) { com.google.gerrit.reviewdb.PatchSet.Id currentPatchSetId = patchSetsBlock.getCurrentPatchSet ( ) . getId ( ) ; com.google.gerrit.client.Gerrit.display ( com.google.gerrit.client.Dispatcher.toPublish ( currentPatchSetId ) ) ; }
public int getSizeBasedOnAccuracy ( int statisticsAccuracy ) throws java.lang.IllegalArgumentException , java.lang.IllegalStateException , net.sf.ehcache.CacheException { return self.getSizeBasedOnAccuracy ( statisticsAccuracy ) ; }
private void assertProblems ( com.google.gerrit.gpg.testutil.TestKey tk , java.lang.String first , java.lang.String ... rest ) { assertProblems ( tk.getPublicKey ( ) , first , rest ) ; }
public com.google.common.util.concurrent.CheckedFuture < com.google.gerrit.reviewdb.client.Change , com.google.gwtorm.server.OrmException > getAsync ( com.google.gerrit.reviewdb.client.Change.Id key ) { throw new java.lang.UnsupportedOperationException ( com.google.gerrit.reviewdb.server.DisabledChangesReviewDbWrapper.MSG ) ; }
void onReplyDone ( com.google.gwt.event.dom.client.ClickEvent e ) { if ( ( replyBox ) == null ) { com.google.gerrit.client.diff.DraftBox box = getDiffView ( ) . addReply ( getOriginal ( ) , "Done" , true ) ; registerReplyBox ( box ) ; } else { openReplyBox ( ) ; } }
public static void deleteRevision ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , java.lang.String commit , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwt.core.client.JavaScriptObject > cb ) { com.google.gerrit.client.changes.ChangeApi.revision ( project , id , commit ) . delete ( cb ) ; }
public java.lang.String toString ( ) { return taskName ; }
public void onSuccess ( com.google.gerrit.client.changes.ChangeInfo result ) { result.init ( ) ; change = result ; preDisplay ( result ) ; }
public static com.google.gerrit.pgm.init.ConsoleUI getInstance ( ) { return com.google.gerrit.pgm.init.ConsoleUI.getInstance ( false ) ; }
public void testChangeOwner_OwnerACLNotGranted ( ) throws com.google.gwtorm.server.OrmException , java.io.IOException , org.eclipse.jgit.api.errors.GitAPIException , org.eclipse.jgit.errors.ConfigInvalidException { approve ( sessionOwner , createMyChange ( ) , HttpStatus.SC_FORBIDDEN ) ; }
private static final native void nativeInstall ( int funid , com.google.gwtjsonrpc.client.CallbackHandle < ? > imp ) ;
public void nameEscaperEscapesSpacesWithPercentInsteadOfPlus ( ) throws java.lang.Exception { org.junit.Assert.assertEquals ( "foo+bar" , com.google.gitiles.GitilesUrls.NAME_ESCAPER.apply ( "foo+bar" ) ) ; org.junit.Assert.assertEquals ( "foo%20bar" , com.google.gitiles.GitilesUrls.NAME_ESCAPER.apply ( "foo bar" ) ) ; org.junit.Assert.assertEquals ( "foo%2520bar" , com.google.gitiles.GitilesUrls.NAME_ESCAPER.apply ( "foo%20bar" ) ) ; }
java.lang.String findCallerUrl ( ) { return com.google.gerrit.client.api.PluginName.PluginNameMoz.getUrl ( com.google.gerrit.client.api.PluginName.makeException ( ) ) ; }
public void testChangeOwner_NotOwnerACLGranted ( ) throws java.lang.Exception { grantApproveToChangeOwner ( project ) ; assertApproveFails ( user2 , createMyChange ( testRepo ) ) ; }
public < T extends com.google.gwt.core.client.JavaScriptObject > void get ( com.google.gwt.user.client.rpc.AsyncCallback < T > cb ) { send ( com.google.gwt.http.client.RequestBuilder.GET , cb ) ; }
public com.googlesource.gerrit.plugins.github.git.GHRepository forkTo ( com.googlesource.gerrit.plugins.github.git.GHOrganization org ) throws java.io.IOException { return ghRepository.forkTo ( org ) ; }
public final void adjustHeight ( int localHeader ) { int rest = ( ( com.google.gerrit.client.Gerrit.getHeaderFooterHeight ( ) ) + localHeader ) + 5 ; setHeight ( ( ( com.google.gwt.user.client.Window.getClientHeight ( ) ) - rest ) ) ; }
static < T extends com.google.gerrit.server.notedb.RevisionNote < ? extends com.google.gerrit.reviewdb.client.Comment > > com.google.gerrit.server.notedb.RevisionNoteMap < T > emptyMap ( ) { return new com.google.gerrit.server.notedb.RevisionNoteMap ( org.eclipse.jgit.notes.NoteMap.newEmptyMap ( ) , com.google.common.collect.ImmutableMap.< com.google.gerrit.reviewdb.client.RevId , T > of ( ) ) ; }
boolean needsCookieRefresh ( ) { return ( refreshCookieAt ) <= ( com.google.gerrit.server.http.WebSessionManager.now ( ) ) ; }
public com.google.gerrit.extensions.common.CommitInfo apply ( com.google.gerrit.server.project.CommitResource rsrc ) { return com.google.gerrit.server.git.CommitUtil.toCommitInfo ( rsrc.getCommit ( ) ) ; }
public com.google.common.util.concurrent.CheckedFuture < com.google.gerrit.reviewdb.client.PatchSet , com.google.gwtorm.server.OrmException > getAsync ( com.google.gerrit.reviewdb.client.PatchSet.Id key ) { throw new java.lang.UnsupportedOperationException ( com.google.gerrit.reviewdb.server.DisabledChangesReviewDbWrapper.MSG ) ; }
public com.googlesource.gerrit.plugins.github.git.GHHook createWebHook ( java.net.URL url , java.util.Collection < com.googlesource.gerrit.plugins.github.git.GHEvent > events ) throws java.io.IOException { return ghRepository.createWebHook ( url , events ) ; }
private java.lang.String group ( java.lang.String name ) throws java.lang.Exception { name = name ( name ) ; com.google.gerrit.extensions.api.groups.GroupInput in = new com.google.gerrit.extensions.api.groups.GroupInput ( ) ; in.name = name ; gApi.groups ( ) . create ( in ) ; return name ; }
public void visit ( org.commonmark.node.Paragraph node ) { if ( com.google.gitiles.doc.MarkdownToHtml.isInTightList ( node ) ) { visitChildren ( node ) ; } else { wrapChildren ( "p" , node ) ; } }
public com.google.gerrit.extensions.common.GroupInfo format ( com.google.gerrit.server.group.GroupResource rsrc ) throws com.google.gwtorm.server.OrmException { com.google.gerrit.extensions.common.GroupInfo info = init ( rsrc.getGroup ( ) ) ; initMembersAndSubgroups ( rsrc , info ) ; return info ; }
protected void configure ( ) { install ( new com.googlesource.gerrit.plugins.download.command.CloneCommandsModule ( ) ) ; install ( new com.googlesource.gerrit.plugins.download.command.DownloadCommandsModule ( ) ) ; install ( new com.googlesource.gerrit.plugins.download.scheme.SchemeModule ( ) ) ; }
protected void preDisplay ( final com.google.gwtjsonrpc.client.VoidResult result ) { }
public void setNotify ( com.google.gerrit.extensions.api.changes.NotifyHandling notify ) { this . notify = com.google.common.base.Preconditions.checkNotNull ( notify ) ; }
public boolean apply ( com.google.gerrit.extensions.api.projects.CommentLinkInfo input ) { return ( ( input.match ) != null ) && ( ! ( input.match.trim ( ) . isEmpty ( ) ) ) ; }
private com.google.gerrit.sshd.commands.QueryShell.Factory shellFactory ( ) { return dbInjector.createChildInjector ( new com.google.gerrit.extensions.config.FactoryModule ( ) { @ java.lang.Override protected void configure ( ) { factory ( com.google.gerrit.sshd.commands.QueryShell.Factory.class ) ; } } ) . getInstance ( com.google.gerrit.sshd.commands.QueryShell.Factory.class ) ; }
public com.google.gerrit.solr.SolrChangeIndex getChangeIndex ( @ com.google.gerrit.server.config.GerritServerConfig org.eclipse.jgit.lib.Config cfg , com.google.gerrit.server.config.SitePaths sitePaths , com.google.gerrit.server.index.IndexCollection indexes , com.google.gerrit.server.index.FieldDef.FillArgs fillArgs ) throws java.io.IOException { return new com.google.gerrit.solr.SolrChangeIndex ( cfg , fillArgs , sitePaths , indexes , com.google.gerrit.server.index.ChangeSchemas.getLatest ( ) , base ) ; }
public com.googlesource.gerrit.plugins.github.git.GHRef [ ] getRefs ( java.lang.String refType ) throws java.io.IOException { return ghRepository.getRefs ( refType ) ; }
public abstract void unset ( java.lang.String section , java.lang.String subsection , java.lang.String name ) ;
public com.google.gerrit.server.project.TagResource parse ( com.google.gerrit.server.project.ProjectResource resource , com.google.gerrit.extensions.restapi.IdString id ) throws com.google.gerrit.extensions.restapi.ResourceNotFoundException , java.io.IOException { return new com.google.gerrit.server.project.TagResource ( resource.getControl ( ) , list.get ( ) . get ( resource , id ) ) ; }
void onAllRefsReplicatedToAllNodes ( int totalPushTasksCount ) { }
boolean match ( java.lang.String refName ) { return regex ( ) . matcher ( refName ) . find ( ) ; }
public boolean isGitBasicAuth ( ) { return gitBasicAuth ; }
public void commit ( ) throws com.google.gwtorm.server.OrmException { if ( ! ( inTransaction ) ) { delegate.commit ( ) ; } }
private java.util.List < com.googlesource.gerrit.plugins.github.oauth.OAuthProtocol.Scope > scopesForKey ( java.lang.String baseScopeKey ) { return com.google.common.base.MoreObjects.firstNonNull ( config.scopes.get ( baseScopeKey ) , com.googlesource.gerrit.plugins.github.oauth.GitHubLogin.DEFAULT_SCOPES ) ; }
public boolean canSeeMember ( com.google.gerrit.reviewdb.client.Account.Id id ) { if ( ( user.isIdentifiedUser ( ) ) && ( ( ( com.google.gerrit.server.IdentifiedUser ) ( user ) ) . getAccountId ( ) . equals ( id ) ) ) { return true ; } return canSeeMembers ( ) ; }
public void onSuccess ( com.google.gerrit.client.info.GeneralPreferences prefs ) { com.google.gerrit.client.Gerrit.setUserPreferences ( prefs ) ; }
public boolean getNoRepository ( ) { return noRepository ; }
public com.google.gerrit.server.IdentifiedUser runAs ( com.google.gerrit.reviewdb.client.Account.Id id , com.google.gerrit.server.CurrentUser caller ) { return new com.google.gerrit.server.IdentifiedUser ( capabilityControlFactory , authConfig , anonymousCowardName , canonicalUrl , accountCache , groupBackend , disableReverseDnsLookup , remotePeerProvider , dbProvider , id , caller ) ; }
public com.google.gerrit.extensions.common.AccountInfo setAssignee ( com.google.gerrit.extensions.api.changes.AssigneeInput input ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return putAssignee.apply ( change , input ) ; } catch ( com.google.gerrit.server.update.UpdateException | java.io.IOException | com.google.gwtorm.server.OrmException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot set assignee" , e ) ; } }
java.util.Optional < com.google.gerrit.server.account.AccountState > getByUsername ( java.lang.String username ) ;
private com.google.gerrit.common.data.GroupReference getMyGroup ( ) { com.google.gerrit.common.data.GroupDescription.Basic g = groupBackend.get ( AccountGroup.UUID.parse ( ( "user:" + ( username ) ) ) ) ; return projectConfig.resolve ( com.google.gerrit.common.data.GroupReference.forGroup ( g ) ) ; }
public java.lang.String getServletPath ( ) { return getRequestURI ( ) . substring ( contextPath.length ( ) ) ; }
com.google.gerrit.server.git.receive.AsyncReceiveCommits create ( com.google.gerrit.server.project.ProjectState projectState , com.google.gerrit.server.IdentifiedUser user , org.eclipse.jgit.lib.Repository repository , @ com.google.gerrit.common.Nullable com.google.gerrit.server.git.receive.MessageSender messageSender , com.google.common.collect.SetMultimap < com.google.gerrit.server.notedb.ReviewerStateInternal , com.google.gerrit.reviewdb.client.Account.Id > extraReviewers ) ;
com.google.gerrit.acceptance.PushOneCommit create ( com.google.gerrit.reviewdb.server.ReviewDb db , org.eclipse.jgit.lib.PersonIdent i , org.eclipse.jgit.junit.TestRepository < ? > testRepo , @ com.google.inject.assistedinject.Assisted ( value = "subject" ) java.lang.String subject , @ com.google.inject.assistedinject.Assisted ( value = "fileName" ) java.lang.String fileName , @ com.google.inject.assistedinject.Assisted ( value = "content" ) java.lang.String content , @ com.google.inject.assistedinject.Assisted ( value = "changeId" ) java.lang.String changeId ) ;
public void onSuccess ( final com.google.gerrit.client.reviewdb.Account result ) { if ( isAttached ( ) ) { display ( result ) ; } }
public static void grant ( com.google.gerrit.server.project.ProjectConfig config , com.google.gerrit.common.data.AccessSection section , java.lang.String permission , com.google.gerrit.common.data.GroupReference ... groupList ) { com.google.gerrit.server.schema.AclUtil.grant ( config , section , permission , false , groupList ) ; }
public final com.google.common.collect.ImmutableSortedMap < java.lang.Integer , com.google.gerrit.index.Schema < V > > getSchemas ( ) { return schemas ; }
private static void addMenuLink ( com.google.gerrit.client.ui.LinkMenuBar m , com.google.gerrit.client.info.TopMenuItem item ) { if ( item.getUrl ( ) . contains ( com.google.gerrit.client.Gerrit.PROJECT_NAME_MENU_VAR ) ) { com.google.gerrit.client.Gerrit.addProjectLink ( m , item ) ; } else { com.google.gerrit.client.Gerrit.addExtensionLink ( m , item ) ; } }
public com.google.gerrit.server.diff.DiffSummary call ( ) throws java.lang.Exception { com.google.gerrit.server.diff.PatchList patchList = patchListCache.get ( key.toPatchListKey ( ) , project ) ; return com.google.gerrit.server.patch.DiffSummaryLoader.toDiffSummary ( patchList ) ; }
com.google.gerrit.server.notedb.ChangeDraftUpdate createDraftUpdateIfNull ( ) { if ( ( draftUpdate ) == null ) { draftUpdate = draftUpdateFactory.create ( getNotes ( ) , accountId , authorIdent , when ) ; } return draftUpdate ; }
public final com.google.gerrit.extensions.client.SubmitType submit_type ( ) { return com.google.gerrit.extensions.client.SubmitType.valueOf ( submit_typeRaw ( ) ) ; }
public java.util.List < com.google.gerrit.server.query.change.ChangeData > byTopicOpen ( java.lang.String topic ) throws com.google.gwtorm.server.OrmException { return query ( com.google.gerrit.server.query.Predicate.and ( new com.google.gerrit.server.query.change.ExactTopicPredicate ( com.google.gerrit.server.query.change.InternalChangeQuery.schema ( indexes ) , topic ) , com.google.gerrit.server.query.change.ChangeStatusPredicate.open ( ) ) ) ; }
public void addHeader ( java.lang.String name , java.lang.String value ) { headers.put ( name , value ) ; }
java.nio.file.Path itsPath ( com.google.gerrit.server.config.SitePaths sitePaths ) { return sitePaths.etc_dir.normalize ( ) . resolve ( com.googlesource.gerrit.plugins.its.base.ItsHookModule.ITS_FOLDER ) ; }
public void testParse_Email1 ( ) { final com.google.gerrit.server.mail.Address a = com.google.gerrit.server.mail.Address.parse ( "author@example.com" ) ; com.google.common.truth.Truth.assertThat ( a.name ) . isNull ( ) ; com.google.common.truth.Truth.assertThat ( a.email ) . isEqualTo ( "author@example.com" ) ; }
public com.google.gerrit.extensions.restapi.RestView < com.google.gerrit.server.config.ConfigResource > list ( ) { return list.get ( ) ; }
public void setUpMocks ( ) { id = Change.Id.parse ( java.lang.Integer.toString ( com.ericsson.gerrit.plugins.highavailability.IndexEventHandlerTest.CHANGE_ID ) ) ; indexEventHandler = new com.ericsson.gerrit.plugins.highavailability.IndexEventHandler ( com.google.common.util.concurrent.MoreExecutors.directExecutor ( ) , com.ericsson.gerrit.plugins.highavailability.IndexEventHandlerTest.PLUGIN_NAME , restSessionMock ) ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { onOpenRow ( table.getCellForEvent ( event ) . getRowIndex ( ) ) ; }
public static void get ( com.google.gerrit.reviewdb.client.Project.NameKey project , java.lang.String id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.dashboards.DashboardInfo > callback ) { com.google.gerrit.client.dashboards.DashboardList.base ( project ) . idRaw ( com.google.gerrit.client.dashboards.DashboardList.encodeDashboardId ( id ) ) . get ( callback ) ; }
private static com.google.gerrit.server.index.Schema < com.google.gerrit.server.query.change.ChangeData > schema ( com.google.gerrit.server.index.FieldDef < com.google.gerrit.server.query.change.ChangeData , ? > ... fields ) { return com.google.gerrit.server.index.ChangeSchemas.schema ( com.google.common.collect.ImmutableList.copyOf ( fields ) ) ; }
public com.google.gerrit.server.GroupCache getGroupCache ( ) { return groupCache ; }
public void removeCacheUsageListener ( net.sf.ehcache.statistics.CacheUsageListener cacheUsageListener ) throws java.lang.IllegalStateException { self.removeCacheUsageListener ( cacheUsageListener ) ; }
private void postLoad ( ) { if ( ( haveAccount ) && ( haveEmails ) ) { updateEmailList ( ) ; registerNewEmail.setEnabled ( true ) ; save.setEnabled ( false ) ; new com.google.gerrit.client.ui.OnEditEnabler ( save , nameTxt ) ; } display ( ) ; }
public void resetToDefaults ( ) { defaultContext = com.google.gerrit.reviewdb.AccountGeneralPreferences.DEFAULT_CONTEXT ; maximumPageSize = com.google.gerrit.reviewdb.AccountGeneralPreferences.DEFAULT_PAGESIZE ; showSiteHeader = true ; useFlashClipboard = true ; downloadUrl = null ; downloadCommand = null ; }
protected void configure ( ) { bind ( java.io.File.class ) . annotatedWith ( com.google.gerrit.server.config.SitePath.class ) . toInstance ( sitePath ) ; bind ( com.google.gerrit.server.config.SitePaths.class ) ; }
protected void onLoad ( ) { super . onLoad ( ) ; com.google.gerrit.client.changes.ChangeList.next ( query , start , pageSize , ChangeTable.OPTIONS , loadCallback ( ) ) ; }
protected void configure ( ) { bind ( com.google.gerrit.acceptance.AccountCreator.class ) ; factory ( PushOneCommit.Factory.class ) ; }
public com.google.common.collect.ImmutableMap < com.google.gerrit.reviewdb.client.Change.Id , com.google.gerrit.server.query.change.ChangeData > changesById ( ) { return changeData ; }
public void insertComment ( com.google.gerrit.reviewdb.client.PatchLineComment comment ) throws com.google.gwtorm.server.OrmException { if ( ( comment.getStatus ( ) ) == ( PatchLineComment.Status.DRAFT ) ) { insertDraftComment ( comment ) ; } else { insertPublishedComment ( comment ) ; } }
public void configure ( ) { listener ( ) . to ( com.google.gerrit.server.notedb.rebuild.OnlineNoteDbMigrator.class ) ; bindConstant ( ) . annotatedWith ( com.google.inject.name.Names.named ( com.google.gerrit.server.notedb.rebuild.OnlineNoteDbMigrator.TRIAL ) ) . to ( trial ) ; }
private void doAllPushTasksCompleted ( ) { fireRemainingOnRefReplicatedToAllNodes ( ) ; pushResultProcessing.onAllRefsReplicatedToAllNodes ( totalPushTasksCount ) ; allPushTasksFinished.countDown ( ) ; }
public void upsert ( java.lang.Iterable < T > instances ) throws com.google.gwtorm.client.OrmException { for ( T obj : instances ) { upsertOne ( obj , false ) ; } maybeFlush ( ) ; }
public com.google.common.collect.FluentIterable < com.google.gerrit.server.project.ProjectState > parents ( ) { return com.google.common.collect.FluentIterable.from ( tree ( ) ) . skip ( 1 ) ; }
public static com.google.gerrit.client.rpc.RestApi comments ( int id ) { return com.google.gerrit.client.changes.ChangeApi.call ( id , "comments" ) ; }
private static java.lang.String addDeletedKey ( java.util.List < java.util.Optional < com.google.gerrit.reviewdb.client.AccountSshKey > > keys ) { keys.add ( java.util.Optional.empty ( ) ) ; return ( AuthorizedKeys.DELETED_KEY_COMMENT ) + "\n" ; }
private static void setChangeTable ( org.eclipse.jgit.lib.Config cfg , java.util.List < java.lang.String > changeTable ) { if ( changeTable != null ) { com.google.gerrit.server.account.Preferences.unsetSection ( cfg , UserConfigSections.CHANGE_TABLE ) ; cfg.setStringList ( UserConfigSections.CHANGE_TABLE , null , com.google.gerrit.server.git.UserConfigSections.CHANGE_TABLE_COLUMN , changeTable ) ; } }
public void onSuccess ( com.google.gerrit.client.projects.BranchInfo branch ) { addBranch.setEnabled ( true ) ; nameTxtBox.setText ( "" ) ; irevTxtBox.setText ( "" ) ; refreshBranches ( ) ; }
public com.google.gerrit.server.change.SubmittedTogether addSubmittedTogetherOption ( java.util.EnumSet < com.google.gerrit.extensions.api.changes.SubmittedTogetherOption > o ) { options.addAll ( o ) ; return this ; }
private void assertMigratedCleanly ( com.google.gerrit.server.group.db.GroupBundle noteDbBundle , com.google.gerrit.server.group.db.GroupBundle expectedReviewDbBundle ) { com.google.common.truth.Truth.assertThat ( com.google.gerrit.server.group.db.GroupBundle.compareWithAudits ( expectedReviewDbBundle , noteDbBundle ) ) . isEmpty ( ) ; }
public void indexerThrowsIOExceptionTryingToIndexChange ( ) throws java.lang.Exception { setupPostMocks ( com.ericsson.gerrit.plugins.syncindex.SyncIndexRestApiServletTest.CHANGE_EXISTS , com.ericsson.gerrit.plugins.syncindex.SyncIndexRestApiServletTest.DO_NOT_THROW_ORM_EXCEPTION , com.ericsson.gerrit.plugins.syncindex.SyncIndexRestApiServletTest.THROW_IO_EXCEPTION ) ; syncIndexRestApiServlet.doPost ( req , rsp ) ; org.mockito.Mockito.verify ( rsp ) . sendError ( javax.servlet.http.HttpServletResponse.SC_CONFLICT , "io-error" ) ; }
public void removeGroups ( java.lang.String ... groups ) throws com.google.gerrit.extensions.restapi.RestApiException { try { deleteGroups.apply ( rsrc , AddIncludedGroups.Input.fromGroups ( java.util.Arrays.asList ( groups ) ) ) ; } catch ( com.google.gwtorm.server.OrmException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot remove group members" , e ) ; } }
public < T extends com.google.gwt.core.client.JavaScriptObject > void put ( com.google.gwt.user.client.rpc.AsyncCallback < T > cb ) { send ( com.google.gwt.http.client.RequestBuilder.PUT , cb ) ; }
com.google.gerrit.server.git.receive.AsyncReceiveCommits create ( com.google.gerrit.server.project.ProjectControl projectControl , org.eclipse.jgit.lib.Repository repository , com.google.common.collect.SetMultimap < com.google.gerrit.server.notedb.ReviewerStateInternal , com.google.gerrit.reviewdb.client.Account.Id > extraReviewers ) ;
private void createEditCommand ( ) { cmd = new org.eclipse.jgit.transport.ReceiveCommand ( org.eclipse.jgit.lib.ObjectId.zeroId ( ) , newCommit , com.google.gerrit.reviewdb.client.RefNames.refsEdit ( currentUser.getAccountId ( ) , change.getId ( ) , newPatchSet.getId ( ) ) ) ; }
public void configure ( ) { install ( dbInjector.getInstance ( com.google.gerrit.pgm.util.BatchProgramModule.class ) ) ; bind ( com.google.gerrit.server.extensions.events.GitReferenceUpdated.class ) . toInstance ( GitReferenceUpdated.DISABLED ) ; install ( new com.google.gerrit.server.index.DummyIndexModule ( ) ) ; factory ( ChangeResource.Factory.class ) ; }
private static void save ( com.dyuproject.openid.UrlEncodedParameterMap b , javax.servlet.http.HttpServletRequest r , java.lang.String n ) { final java.lang.String v = r.getParameter ( n ) ; if ( v != null ) { b.put ( n , v ) ; } }
long startWith ( ) default 0 ;
public void blockRule_ParentBlocksChild ( ) { com.google.gerrit.server.project.testing.Util.allow ( local , com.google.gerrit.common.data.Permission.PUSH , com.google.gerrit.server.project.testing.Util.DEVS , "refs/tags/*" ) ; com.google.gerrit.server.project.testing.Util.block ( parent , com.google.gerrit.common.data.Permission.PUSH , com.google.gerrit.server.group.SystemGroupBackend.ANONYMOUS_USERS , "refs/tags/*" ) ; com.google.gerrit.server.project.ProjectControl u = user ( local , com.google.gerrit.server.project.testing.Util.DEVS ) ; assertCannotUpdate ( "refs/tags/V10" , u ) ; }
public void setUp ( ) throws java.lang.Exception { com.google.gerrit.acceptance.TestAccount admin = accounts.admin ( ) ; adminSession = new com.google.gerrit.acceptance.RestSession ( server , admin ) ; com.google.gerrit.acceptance.TestAccount user = accounts.create ( "user" , "user@example.com" , "User" ) ; userSession = new com.google.gerrit.acceptance.RestSession ( server , user ) ; com.google.gerrit.acceptance.GitUtil.initSsh ( admin ) ; sshSession = new com.google.gerrit.acceptance.SshSession ( server , admin ) ; project = "p" ; com.google.gerrit.acceptance.GitUtil.createProject ( sshSession , project , null , true ) ; }
public void testRightEventAndNotForwarded ( ) throws java.lang.Exception { setUpMocks ( true ) ; eventHandler.onEvent ( event ) ; org.mockito.Mockito.verify ( eventForwarder ) . send ( event ) ; }
public com.google.gerrit.httpd.raw.BazelBuild.Label polygerritComponents ( ) { return new com.google.gerrit.httpd.raw.BazelBuild.Label ( "polygerrit-ui" , "polygerrit_components.bower_components.zip" ) ; }
T get ( javax.servlet.http.HttpServletRequest request ) ;
public void setAccount ( com.google.gerrit.reviewdb.client.Account account ) { checkLoaded ( ) ; this . loadedAccount = java.util.Optional.of ( account ) ; this . registeredOn = account.getRegisteredOn ( ) ; }
public static void loadJARs ( java.nio.file.Path jar ) { com.google.gerrit.common.IoUtil.loadJARs ( java.util.Collections.singleton ( jar ) ) ; }
public void onClose ( com.google.gwt.event.logical.shared.CloseEvent < com.google.gerrit.client.ui.RemoteSuggestBox > event ) { suggestBox.setText ( "" ) ; com.google.gwt.event.logical.shared.CloseEvent.fire ( this , this ) ; }
public static void add ( com.google.gerrit.client.changes.ChangeInfo info ) { com.google.gerrit.client.projects.ConfigInfoCache.instance.changeToProject.put ( info.legacyId ( ) . get ( ) , info.project ( ) ) ; }
private com.google.gerrit.extensions.registration.ReloadableRegistrationHandle < com.google.gerrit.httpd.AllRequestFilter > addFilter ( final com.google.gerrit.httpd.AllRequestFilter filter ) { com.google.inject.Key < com.google.gerrit.httpd.AllRequestFilter > key = com.google.inject.Key.get ( com.google.gerrit.httpd.AllRequestFilter.class ) ; return filters.add ( key , com.google.inject.util.Providers.of ( filter ) ) ; }
public void onFailure ( java.lang.Throwable caught ) { parents = 0 ; }
public static org.apache.lucene.index.Term idTerm ( com.google.gerrit.reviewdb.client.Change.Id id ) { return com.google.gerrit.lucene.QueryBuilder.intTerm ( com.google.gerrit.server.index.ChangeField.LEGACY_ID.getName ( ) , id.get ( ) ) ; }
public com.google.gerrit.server.IdentifiedUser runAs ( com.google.gerrit.reviewdb.client.Account.Id id , com.google.gerrit.server.CurrentUser caller ) { return new com.google.gerrit.server.IdentifiedUser ( capabilityControlFactory , authConfig , anonymousCowardName , canonicalUrl , accountCache , groupBackend , disableReverseDnsLookup , remotePeerProvider , dbProvider , id , caller ) ; }
private void display ( final java.util.List < com.google.gerrit.reviewdb.Branch > listBranches ) { branches.display ( listBranches ) ; delBranch.setVisible ( branches.hasBranchCanDelete ( ) ) ; }
public com.google.gerrit.server.IdentifiedUser create ( com.google.inject.Provider < com.google.gerrit.reviewdb.server.ReviewDb > db , com.google.gerrit.reviewdb.client.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( capabilityControlFactory , authConfig , realm , anonymousCowardName , canonicalUrl , accountCache , groupBackend , disableReverseDnsLookup , null , db , id , null ) ; }
public void run ( ) { skipManager.removeAll ( ) ; skipManager.render ( context , diff ) ; updateRenderEntireFile ( ) ; }
void onExpandAllComments ( com.google.gwt.event.logical.shared.ValueChangeEvent < java.lang.Boolean > e ) { prefs.expandAllComments ( e.getValue ( ) ) ; view.getCommentManager ( ) . setExpandAllComments ( prefs.expandAllComments ( ) ) ; }
public java.io.InputStream getInputStream ( com.google.gerrit.server.plugins.PluginEntry entry ) throws java.io.IOException { return webScanner.getInputStream ( entry ) ; }
public void onSuccess ( final java.util.List < com.google.gerrit.client.reviewdb.AccountSshKey > result ) { keys.display ( result ) ; keys.finishDisplay ( true ) ; if ( result.isEmpty ( ) ) { showAddKeyBlock ( true ) ; } }
public com.google.gerrit.server.account.GroupMembership membershipsOf ( com.google.gerrit.server.IdentifiedUser user ) { java.lang.String id = com.google.gerrit.server.auth.ldap.LdapGroupBackend.findId ( user.state ( ) . getExternalIds ( ) ) ; if ( id == null ) { return com.google.gerrit.server.account.GroupMembership.EMPTY ; } return new com.google.gerrit.server.auth.ldap.LdapGroupMembership ( membershipCache , projectCache , id ) ; }
public boolean canAddRefs ( ) { return ( canPerformOnAnyRef ( Permission.CREATE ) ) || ( isOwnerAnyRef ( ) ) ; }
com.google.gerrit.server.project.SubmitRuleEvaluator create ( com.google.gerrit.server.CurrentUser user , com.google.gerrit.server.query.change.ChangeData cd ) ;
protected com.google.gerrit.extensions.common.ChangeInfo info ( java.lang.String id ) throws com.google.gerrit.extensions.restapi.RestApiException { return gApi.changes ( ) . id ( id ) . info ( ) ; }
private void setAuthorNameText ( com.google.gerrit.client.account.AccountInfo author ) { avatar = new com.google.gerrit.client.AvatarImage ( author , 26 ) ; name.setInnerText ( com.google.gerrit.client.FormatUtil.name ( author ) ) ; }
public void onSuccess ( com.google.gerrit.client.rpc.NativeMap < com.googlesource.gerrit.plugins.serviceuser.client.ServiceUserInfo > info ) { display ( info ) ; }
java.lang.String expandBefore ( int cnt ) ;
public void onEvent ( final com.google.gerrit.server.events.Event event ) { if ( ( subscribedToEvents.isEmpty ( ) ) || ( subscribedToEvents.contains ( event.getType ( ) ) ) ) { offer ( event ) ; } }
void onAddAccountsToGroup ( com.google.gerrit.reviewdb.client.Account.Id actor , java.util.Collection < com.google.gerrit.reviewdb.client.AccountGroupMember > added , java.sql.Timestamp addedOn ) ;
public void start ( ) throws java.io.IOException { final java.lang.String msg = ( "gerrit: " + cmd ) + ": not found\n" ; err.write ( msg.getBytes ( "UTF-8" ) ) ; err.flush ( ) ; exit.onExit ( 127 ) ; }
public static com.google.gerrit.server.mail.MailUtil.MailRecipients getRecipientsFromReviewers ( com.google.common.collect.Multimap < com.google.gerrit.server.notedb.ReviewerStateInternal , com.google.gerrit.reviewdb.client.Account.Id > reviewers ) { com.google.gerrit.server.mail.MailUtil.MailRecipients recipients = new com.google.gerrit.server.mail.MailUtil.MailRecipients ( ) ; recipients.reviewers.addAll ( reviewers.get ( com.google.gerrit.server.notedb.ReviewerStateInternal.REVIEWER ) ) ; recipients.cc.addAll ( reviewers.get ( com.google.gerrit.server.notedb.ReviewerStateInternal.CC ) ) ; return recipients ; }
public static void display ( final java.lang.String token ) { if ( ( ( com.google.gerrit.client.Gerrit.body.getView ( ) ) == null ) || ( ! ( com.google.gerrit.client.Gerrit.body.getView ( ) . displayToken ( token ) ) ) ) { com.google.gerrit.client.Gerrit.dispatcher.display ( token ) ; } }
private com.google.gerrit.extensions.common.SuggestInfo getSuggestInfo ( org.eclipse.jgit.lib.Config cfg ) { com.google.gerrit.extensions.common.SuggestInfo info = new com.google.gerrit.extensions.common.SuggestInfo ( ) ; info.from = cfg.getInt ( "suggest" , "from" , 0 ) ; return info ; }
public com.google.gerrit.server.account.AccountInfo apply ( com.google.gerrit.server.group.MemberResource resource ) { return com.google.gerrit.server.account.AccountInfo.parse ( resource.getMember ( ) . getAccount ( ) , true ) ; }
protected com.google.gerrit.acceptance.GerritServer startServer ( org.eclipse.jgit.lib.Config cfg , boolean memory , boolean enableHttpd ) throws java.lang.Exception { return com.google.gerrit.acceptance.GerritServer.start ( cfg , memory , enableHttpd ) ; }
void onReplace ( org.eclipse.jgit.lib.ObjectId oldNotesRev , org.eclipse.jgit.lib.ObjectId newNotesRev , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId > toRemove , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId > toAdd ) throws java.io.IOException ;
private com.google.gerrit.server.project.ProjectControl user ( com.google.gerrit.reviewdb.AccountGroup ... memberOf ) { com.google.gwtorm.client.SchemaFactory < com.google.gerrit.reviewdb.ReviewDb > schema = null ; com.google.gerrit.server.account.GroupCache groupCache = null ; java.lang.String canonicalWebUrl = "http://localhost" ; com.google.gerrit.server.project.RefControl.Factory refControlFactory = new com.google.gerrit.server.project.RefControl.Factory ( ) { @ java.lang.Override public com.google.gerrit.server.project.RefControl create ( final com.google.gerrit.server.project.ProjectControl projectControl , final java.lang.String ref ) { return new com.google.gerrit.server.project.RefControl ( projectControl , ref ) ; } } ; return new com.google.gerrit.server.project.ProjectControl ( java.util.Collections.< com.google.gerrit.reviewdb.AccountGroup.UUID > emptySet ( ) , java.util.Collections.< com.google.gerrit.reviewdb.AccountGroup.UUID > emptySet ( ) , schema , groupCache , canonicalWebUrl , refControlFactory , new com.google.gerrit.server.project.RefControlTest.MockUser ( memberOf ) , newProjectState ( ) ) ; }
public com.googlecode.prolog_cafe.lang.NumberTerm xor ( com.googlecode.prolog_cafe.lang.NumberTerm t ) { if ( t instanceof com.googlecode.prolog_cafe.lang.DoubleTerm ) throw new com.googlecode.prolog_cafe.exceptions.IllegalTypeException ( "integer" , t ) ; return new com.googlecode.prolog_cafe.lang.IntegerTerm ( ( ( this . val ) ^ ( t.intValue ( ) ) ) ) ; }
public static void rebaseEdit ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwt.core.client.JavaScriptObject > cb ) { com.google.gwt.core.client.JavaScriptObject in = com.google.gwt.core.client.JavaScriptObject.createObject ( ) ; com.google.gerrit.client.changes.ChangeApi.change ( project , id ) . view ( "edit:rebase" ) . post ( in , cb ) ; }
public void operationComplete ( org.apache.mina.core.future.IoFuture future ) { final com.google.gerrit.sshd.SshScope.Context ctx = new com.google.gerrit.sshd.SshScope.Context ( sd ) ; final com.google.gerrit.sshd.SshScope.Context old = com.google.gerrit.sshd.SshScope.set ( ctx ) ; try { log.onLogout ( ) ; } finally { com.google.gerrit.sshd.SshScope.set ( old ) ; } }
public static com.google.gerrit.reviewdb.server.ReviewDb unwrapDb ( com.google.gerrit.reviewdb.server.ReviewDb db ) { if ( db instanceof com.google.gerrit.reviewdb.server.DisallowReadFromChangesReviewDbWrapper ) { return ( ( com.google.gerrit.reviewdb.server.DisallowReadFromChangesReviewDbWrapper ) ( db ) ) . unsafeGetDelegate ( ) ; } return db ; }
public final native void range ( com.google.gerrit.client.diff.CommentRange r ) ;
public com.google.gerrit.server.git.BatchUpdate addOp ( com.google.gerrit.reviewdb.client.Change.Id id , com.google.gerrit.server.git.BatchUpdate.Op op ) { com.google.common.base.Preconditions.checkArgument ( ( ! ( op instanceof com.google.gerrit.server.git.BatchUpdate.InsertChangeOp ) ) , "use insertChange" ) ; ops.put ( id , op ) ; return this ; }
private static native com.google.gerrit.client.account.AccountApi.GpgKeysInput createWithAdd ( com.google.gwt.core.client.JsArrayString keys ) ;
public void onFailure ( java.lang.Throwable caught ) { send.setEnabled ( true ) ; }
public com.google.gerrit.extensions.api.projects.ProjectApi.ListRefsRequest < T > withRegex ( java.lang.String regex ) { this . regex = regex ; return this ; }
public com.google.gerrit.server.change.ChangeJson setSshInfo ( com.google.gerrit.server.ssh.SshInfo info ) { sshInfo = info ; return this ; }
public com.google.common.util.concurrent.CheckedFuture < ? , java.io.IOException > deleteAsync ( com.google.gerrit.reviewdb.client.Change.Id id ) { return ( executor ) != null ? submit ( new com.google.gerrit.server.index.ChangeIndexer.DeleteTask ( id ) ) : com.google.common.util.concurrent.Futures.< java.lang.Object , java.io.IOException > immediateCheckedFuture ( null ) ; }
public boolean canUpdate ( ) { if ( ( GitRepositoryManager.REF_CONFIG.equals ( refName ) ) && ( ! ( projectControl.isOwner ( ) ) ) ) { return false ; } return canPerform ( Permission.PUSH ) ; }
public void configure ( ) { factory ( ChangeUpdate.Factory.class ) ; factory ( ChangeDraftUpdate.Factory.class ) ; factory ( DraftCommentNotes.Factory.class ) ; factory ( NoteDbUpdateManager.Factory.class ) ; }
public boolean containsHeader ( java.lang.String name ) { return headers.containsKey ( name ) ; }
void onRemoveDraftBox ( com.google.gerrit.client.diff.DraftBox box ) { getPanelFromSide ( box.getCm ( ) . side ( ) ) . onRemoveDraftBox ( box ) ; }
protected void closePopup ( ) { popup.hide ( ) ; if ( ( regWindowResize ) != null ) { regWindowResize.removeHandler ( ) ; regWindowResize = null ; } }
public void testGcNotAllowed_Forbidden ( ) throws java.lang.Exception { userRestSession.post ( ( ( "/projects/" + ( allProjects.get ( ) ) ) + "/gc" ) ) . assertForbidden ( ) ; }
private com.google.gerrit.server.query.change.ChangeData getChange ( java.lang.String changeId ) throws com.google.gwtorm.server.OrmException { return com.google.common.collect.Iterables.getOnlyElement ( queryProvider.get ( ) . byKeyPrefix ( changeId ) ) ; }
public com.google.gwtorm.jdbc.AbstractTestJdbcAccess.Data.DataKey primaryKey ( com.google.gwtorm.jdbc.AbstractTestJdbcAccess.Data entity ) { throw new java.lang.UnsupportedOperationException ( ) ; }
public void onSuccess ( com.google.gerrit.client.rpc.NativeString user ) { com.google.gerrit.client.Gerrit.getUserAccount ( ) . username ( user.asString ( ) ) ; enableUI ( true ) ; display ( ) ; }
public void setSearchIndex ( com.google.gerrit.server.index.ChangeIndex index ) { com.google.gerrit.server.index.ChangeIndex old = searchIndex.getAndSet ( index ) ; if ( ( old != null ) && ( old != index ) ) { old.close ( ) ; } }
public com.google.gerrit.server.CurrentUser get ( ) { final com.google.gerrit.server.CurrentUser user = session.get ( ) . getCurrentUser ( ) ; if ( user instanceof com.google.gerrit.server.IdentifiedUser ) { return identifiedProvider.get ( ) ; } return session.get ( ) . getCurrentUser ( ) ; }
com.google.gerrit.server.IdentifiedUser provideCurrentUser ( com.google.gerrit.server.CurrentUser user ) { if ( user.isIdentifiedUser ( ) ) { return user.asIdentifiedUser ( ) ; } throw new com.google.inject.ProvisionException ( com.google.gerrit.common.errors.NotSignedInException.MESSAGE , new com.google.gerrit.common.errors.NotSignedInException ( ) ) ; }
public void handle ( net.codemirror.lib.CodeMirror instance , int line , java.lang.String gutter , com.google.gwt.event.dom.client.MouseDownEvent clickEvent ) ;
public final native void setScrollSetByOther ( boolean setByOther ) ;
protected void assertBadQuery ( com.google.gerrit.extensions.api.changes.Changes.QueryRequest query ) throws java.lang.Exception { exception.expect ( com.google.gerrit.extensions.restapi.BadRequestException.class ) ; query.get ( ) ; }
void evict ( com.google.gerrit.reviewdb.client.AccountGroup.UUID groupUuid , com.google.gerrit.reviewdb.client.AccountGroup.Id groupId , com.google.gerrit.reviewdb.client.AccountGroup.NameKey groupName ) throws java.io.IOException ;
public long getMinValue ( com.google.gerrit.server.index.Schema < com.google.gerrit.server.query.change.ChangeData > schema ) { return com.google.gerrit.server.query.change.SortKeyPredicate.parseSortKey ( schema , getValue ( ) ) ; }
protected java.util.concurrent.Callable < ? > indexTask ( com.google.gerrit.server.query.change.ChangeData cd ) { return com.google.common.util.concurrent.Callables.returning ( null ) ; }
public void onSuccess ( com.google.gerrit.client.rpc.NativeString result ) { submitTypeRecord = com.google.gerrit.common.data.SubmitTypeRecord.OK ( Project.SubmitType.valueOf ( result.asString ( ) ) ) ; }
java.lang.String keyReloadChange ( ) ;
public void beforeTest ( ) throws java.lang.Exception { notesMigration = new com.google.gerrit.testutil.TestNotesMigration ( ) . setAllEnabled ( com.google.gerrit.testutil.GerritServerTests.isNoteDbTestEnabled ( ) ) ; }
public void addListener ( com.google.gerrit.client.rpc.CallbackGroup group ) { addListener ( group.< java.lang.Void > addEmpty ( ) ) ; }
public static com.google.gerrit.index.query.Predicate < com.google.gerrit.reviewdb.client.AccountGroup > uuid ( com.google.gerrit.reviewdb.client.AccountGroup.UUID uuid ) { return new com.google.gerrit.server.query.group.GroupPredicates.GroupPredicate ( com.google.gerrit.server.index.group.GroupField.UUID , GroupQueryBuilder.FIELD_UUID , uuid.get ( ) ) ; }
public org.eclipse.jgit.lib.Repository openRepository ( com.google.gerrit.reviewdb.client.Project.NameKey name ) throws org.eclipse.jgit.errors.RepositoryNotFoundException { return openRepository ( getBasePath ( name ) , name ) ; }
com.google.gerrit.server.git.EmailMerge create ( com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.reviewdb.client.Change.Id changeId , com.google.gerrit.reviewdb.client.Account.Id submitter , com.google.gerrit.extensions.api.changes.NotifyHandling notifyHandling , com.google.common.collect.Multimap < com.google.gerrit.extensions.api.changes.RecipientType , com.google.gerrit.reviewdb.client.Account.Id > accountsToNotify ) ;
public void addReviewerToReviewableChangeInNoteDbNotifyOwnerReviewers ( ) throws java.lang.Exception { com.google.common.truth.TruthJUnit.assume ( ) . that ( notesMigration.readChanges ( ) ) . isTrue ( ) ; forAll ( ( adder ) -> { com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableChange ( ) ; com.google.gerrit.acceptance.TestAccount reviewer = accountCreator.create ( "added" , "added@example.com" , "added" ) ; addReviewer ( adder , sc.changeId , sc.owner , reviewer.email , com.google.gerrit.extensions.api.changes.NotifyHandling.OWNER_REVIEWERS ) ; assertThat ( sender ) . sent ( "newchange" , sc ) . to ( reviewer ) . cc ( sc.reviewer ) . cc ( sc.reviewerByEmail , sc.ccerByEmail ) . notTo ( sc.owner , sc.starrer ) ; } ) ; }
public void stop ( ) { refreshThread.halt ( ) ; openIndex.close ( ) ; closedIndex.close ( ) ; }
public com.google.gerrit.server.events.TrackingIdAttribute asTrackingIdAttribute ( com.google.gerrit.reviewdb.client.TrackingId id ) { com.google.gerrit.server.events.TrackingIdAttribute a = new com.google.gerrit.server.events.TrackingIdAttribute ( ) ; a.system = id.getSystem ( ) ; a.id = id.getTrackingId ( ) ; return a ; }
void replicate ( java.lang.String ref ) { replication.fire ( projectName , ref ) ; }
public synchronized java.util.Optional < com.google.gerrit.server.account.AccountState > maybeGet ( com.google.gerrit.reviewdb.client.Account.Id accountId ) { return java.util.Optional.ofNullable ( byId.get ( accountId ) ) ; }
java.lang.String getId ( ) { return comment.key.uuid ; }
public boolean isScheme ( final java.lang.String scheme ) { return getExternalId ( ) . startsWith ( scheme ) ; }
public static boolean isCommentUrl ( java.lang.String str , java.lang.String changeUrl , com.google.gerrit.reviewdb.client.Comment comment ) { int lineNbr = ( ( comment.range ) == null ) ? comment.lineNbr : comment.range.startLine ; return ( str.equals ( ( ( ( com.google.gerrit.server.mail.receive.ParserUtil.filePath ( changeUrl , comment ) ) + "@" ) + lineNbr ) ) ) || ( str.equals ( ( ( ( com.google.gerrit.server.mail.receive.ParserUtil.filePath ( changeUrl , comment ) ) + "@a" ) + lineNbr ) ) ) ; }
protected void configure ( ) { install ( new com.google.gerrit.server.index.IndexModule ( 1 ) ) ; bind ( com.google.gerrit.server.index.IndexConfig.class ) . toInstance ( com.google.gerrit.server.index.IndexConfig.createDefault ( ) ) ; bind ( com.google.gerrit.server.index.Index.class ) . toInstance ( new com.google.gerrit.server.index.change.DummyChangeIndex ( ) ) ; }
public boolean enableDefaultUi ( ) { return ( ! ( headless ) ) && ( ! ( polyGerrit ) ) ; }
private java.lang.String getComment ( com.google.gerrit.server.events.ChangeAttribute change , com.google.gerrit.server.events.ChangeEvent hook , com.google.gerrit.server.events.AccountAttribute who , java.lang.String what ) { return ( ( ( ( ( getCommentPrefix ( change ) ) + "change " ) + what ) + " [by " ) + ( formatAccountAttribute ( who ) ) ) + "]" ; }
public java.util.List < com.google.gitiles.BlameCache.Region > load ( com.google.gitiles.BlameCacheImpl.Key key ) throws java.io.IOException { return loadBlame ( key ) ; }
public javax.naming.directory.DirContext run ( ) throws java.io.IOException , javax.naming.NamingException { return createContext ( env ) ; }
public synchronized com.google.gerrit.server.account.AccountState get ( com.google.gerrit.reviewdb.client.Account.Id accountId ) { com.google.gerrit.server.account.AccountState state = getIfPresent ( accountId ) ; if ( state != null ) { return state ; } return com.google.gerrit.testutil.FakeAccountCache.newState ( new com.google.gerrit.reviewdb.client.Account ( accountId , com.google.gerrit.common.TimeUtil.nowTs ( ) ) ) ; }
private static void insertLink ( final com.google.gerrit.client.ui.LinkMenuBar m , final java.lang.String text , final java.lang.String historyToken , final int beforeIndex ) { m.insertItem ( new com.google.gerrit.client.ui.LinkMenuItem ( text , historyToken ) , beforeIndex ) ; }
private static int version ( com.google.gerrit.index.Index < ? , ? > i ) { return i.getSchema ( ) . getVersion ( ) ; }
public static void doSignOut ( ) { com.google.gwt.user.client.Cookies.removeCookie ( com.google.gerrit.client.Gerrit.ACCOUNT_COOKIE ) ; com.google.gwt.user.client.Cookies.removeCookie ( com.google.gerrit.client.Gerrit.OPENIDUSER_COOKIE ) ; com.google.gerrit.client.Gerrit.refreshMenuBar ( ) ; }
public static org.eclipse.jgit.internal.storage.dfs.InMemoryRepository newRepository ( com.google.gerrit.reviewdb.client.Project.NameKey name ) { return new com.google.gerrit.testutil.InMemoryRepositoryManager.Repo ( new com.google.gerrit.testutil.TestNotesMigration ( ) , name ) ; }
protected void configureServlets ( ) { serve ( "/login/*" ) . with ( com.google.gerrit.httpd.auth.ldap.LdapLoginServlet.class ) ; }
com.googlesource.gerrit.plugins.reviewersbyblame.ReviewersByBlame create ( org.eclipse.jgit.revwalk.RevCommit commit , com.google.gerrit.reviewdb.client.Change change , com.google.gerrit.reviewdb.client.PatchSet ps , int maxReviewers , org.eclipse.jgit.lib.Repository repo , java.lang.String ignoreFileRegEx ) ;
public < T extends com.google.gwt.core.client.JavaScriptObject > void get ( com.google.gwt.user.client.rpc.AsyncCallback < T > cb ) { get ( com.google.gerrit.client.rpc.RestApi.wrap ( cb ) ) ; }
public void testQueueShouldNotBeEmptyWhenOneEventSubmitted ( ) { asyncListener.onEvent ( event ) ; org.junit.Assert.assertFalse ( asyncListener.getQueue ( ) . isEmpty ( ) ) ; }
public static < T > com.google.gerrit.index.query.Predicate < T > or ( com.google.gerrit.index.query.Predicate < T > ... that ) { if ( ( that.length ) == 1 ) { return that [ 0 ] ; } return new com.google.gerrit.index.query.OrPredicate ( that ) ; }
public com.google.gerrit.extensions.common.ProjectInfo apply ( com.google.gerrit.server.project.ProjectResource rsrc ) { return json.format ( rsrc.getProjectState ( ) ) ; }
public void all ( ) { com.google.common.truth.Truth.assertThat ( com.google.gerrit.testing.IndexVersionsTest.get ( com.google.gerrit.testing.IndexVersions.ALL ) ) . containsExactlyElementsIn ( com.google.gerrit.testing.IndexVersionsTest.SCHEMA_DEF.getSchemas ( ) . keySet ( ) ) . inOrder ( ) ; }
void setOpen ( boolean open ) { group.resize ( ) ; setRangeHighlight ( open ) ; getCm ( ) . focus ( ) ; }
private void expandAll ( ) { expandSideAll ( ) ; otherBar.expandSideAll ( ) ; manager.remove ( this , otherBar ) ; manager.getOverviewBar ( ) . refresh ( ) ; }
com.google.gerrit.extensions.common.WebLinkInfo getProjectWeblink ( java.lang.String projectName ) ;
public void start ( ) { try { updateConfiguration ( ) ; } catch ( com.google.gerrit.server.project.NoSuchProjectException e ) { warn ( "can't read configuration: %s" , e.getMessage ( ) ) ; } }
public void execute ( ) throws com.google.gerrit.extensions.restapi.RestApiException , com.google.gerrit.server.update.UpdateException { execute ( BatchUpdateListener.NONE ) ; }
public java.lang.String getRefName ( ) { return com.google.gerrit.reviewdb.client.RefNames.fullName ( change.branch ) ; }
private void onDiscoveryFailure ( ) { showError ( ) ; enable ( true ) ; providerId.selectAll ( ) ; providerId.setFocus ( true ) ; }
public com.google.gerrit.extensions.common.CommentInfo apply ( com.google.gerrit.server.change.CommentResource rsrc ) throws com.google.gwtorm.server.OrmException { return commentJson.get ( ) . newCommentFormatter ( ) . format ( rsrc.getComment ( ) ) ; }
void addFileComment ( com.google.gerrit.client.diff.CommentBox box ) { boxes.add ( box ) ; body.add ( box ) ; table.setHeaderVisible ( true ) ; }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > evictAsync ( com.google.gerrit.reviewdb.AccountGroup group ) ;
public static java.lang.String linkify ( final java.lang.String in ) { return in.replaceAll ( "(https?://[^ \n\r\t]*)" , "<a href=\"$1\">$1</a>" ) ; }
public com.google.gerrit.extensions.client.DiffPreferencesInfo apply ( com.google.gerrit.server.config.ConfigResource configResource ) throws com.google.gerrit.extensions.restapi.BadRequestException , com.google.gerrit.extensions.restapi.ResourceConflictException , java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { try ( org.eclipse.jgit.lib.Repository git = gitManager.openRepository ( allUsersName ) ) { return com.google.gerrit.server.account.PreferencesConfig.readDefaultDiffPreferences ( git ) ; } }
public void setTag ( final com.google.gerrit.acceptance.PushOneCommit.Tag tag ) { this . tag = tag ; }
public com.google.gerrit.server.account.AccountSshKey getKey ( com.google.gerrit.reviewdb.client.Account.Id accountId , int seq ) throws java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { return read ( accountId ) . getKey ( seq ) ; }
private int getMyTotalHeight ( ) { int total = 0 ; for ( com.google.gerrit.client.diff.CommentBox box : comments ) { total += box.getSelfWidgetWrapper ( ) . getElement ( ) . getParentElement ( ) . getOffsetHeight ( ) ; } return total ; }
public com.google.gerrit.index.query.QueryResult < T > query ( com.google.gerrit.index.query.Predicate < T > query ) throws com.google.gerrit.index.query.QueryParseException , com.google.gwtorm.server.OrmException { return query ( com.google.common.collect.ImmutableList.of ( query ) ) . get ( 0 ) ; }
public void options ( com.google.gerrit.extensions.common.GroupOptionsInfo options ) throws com.google.gerrit.extensions.restapi.RestApiException { try { putOptions.apply ( rsrc , options ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot put group options" , e ) ; } }
private com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > rewrite ( com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > in ) throws com.google.gerrit.server.query.QueryParseException { return rewrite.rewrite ( in , 0 , com.google.gerrit.common.data.GlobalCapability.DEFAULT_MAX_QUERY_LIMIT ) ; }
public static java.io.File createEmptyFile ( java.lang.String name , org.eclipse.jgit.lib.Repository repo ) { return new java.io.File ( repo.getDirectory ( ) . getParent ( ) , name ) ; }
public java.lang.String apply ( com.google.gerrit.server.group.GroupResource resource ) throws com.google.gerrit.extensions.restapi.MethodNotAllowedException { com.google.gerrit.common.data.GroupDescription.Internal group = resource.asInternalGroup ( ) . orElseThrow ( MethodNotAllowedException :: new ) ; return com.google.common.base.Strings.nullToEmpty ( group.getDescription ( ) ) ; }
private void injectMode ( java.lang.String type , com.google.gwt.user.client.rpc.AsyncCallback < java.lang.Void > cb ) { new net.codemirror.mode.ModeInjector ( ) . add ( type ) . inject ( cb ) ; }
public java.util.List < com.google.gerrit.extensions.common.EmailInfo > getEmails ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return getEmails.apply ( account ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot get emails" , e ) ; } }
public com.google.gerrit.server.CurrentUser runAs ( java.net.SocketAddress remotePeer , com.google.gerrit.reviewdb.client.Account.Id id , @ com.google.gerrit.common.Nullable com.google.gerrit.server.CurrentUser caller ) { return new com.google.gerrit.server.IdentifiedUser ( capabilityControlFactory , authConfig , realm , anonymousCowardName , canonicalUrl , accountCache , groupBackend , disableReverseDnsLookup , com.google.inject.util.Providers.of ( remotePeer ) , null , id , caller ) ; }
public boolean isOwner ( ) { return ( isDeclaredOwner ( ) ) || ( user.getCapabilities ( ) . canAdministrateServer ( ) ) ; }
protected java.lang.Object createServiceHandle ( ) throws java.lang.Exception { return new com.google.gerrit.server.GroupAdminServiceImpl ( com.google.gerrit.server.GerritServer.getInstance ( ) ) ; }
public static com.google.gerrit.index.query.Predicate < com.google.gerrit.server.account.AccountState > isNotActive ( ) { return new com.google.gerrit.server.query.account.AccountPredicates.AccountPredicate ( com.google.gerrit.server.index.account.AccountField.ACTIVE , "0" ) ; }
public void onFailure ( java.lang.Throwable caught ) { error.clear ( ) ; enable ( true ) ; super . onFailure ( caught ) ; }
public boolean isVisible ( com.google.gerrit.reviewdb.client.Account account ) throws com.google.gwtorm.server.OrmException { com.google.gerrit.server.IdentifiedUser who = identifiedUserFactory.create ( reviewDbProvider , account.getId ( ) ) ; return changeControl.forUser ( who ) . isRefVisible ( ) ; }
protected void configureServlets ( ) { com.google.gerrit.extensions.registration.DynamicSet.bind ( binder ( ) , com.google.gerrit.extensions.webui.WebUiPlugin.class ) . toInstance ( new com.google.gerrit.extensions.webui.GwtPlugin ( "imagare" ) ) ; com.google.gerrit.extensions.registration.DynamicSet.bind ( binder ( ) , com.google.gerrit.extensions.webui.WebUiPlugin.class ) . toInstance ( new com.google.gerrit.extensions.webui.JavaScriptPlugin ( "imagare.js" ) ) ; }
public final native void to ( net.codemirror.lib.Pos t ) ;
public static com.google.gerrit.server.group.db.InternalGroupUpdate.Builder builder ( ) { return new com.google.gerrit.server.group.db.AutoValue_InternalGroupUpdate.Builder ( ) . setMemberModification ( java.util.function.Function.identity ( ) ) ; }
public com.google.gerrit.extensions.api.projects.Projects.ListRequest withPrefix ( java.lang.String prefix ) { this . prefix = prefix ; return this ; }
public void onSuccess ( com.google.gerrit.client.account.Preferences prefs ) { com.google.gerrit.client.Gerrit.getUserAccount ( ) . setGeneralPreferences ( p ) ; com.google.gerrit.client.Gerrit.applyUserPreferences ( ) ; com.google.gerrit.client.Dispatcher.changeScreen2 = false ; enable ( true ) ; display ( prefs ) ; }
public com.google.gerrit.common.data.PermissionRange getRange ( final java.lang.String permissionName ) { for ( com.google.gerrit.common.data.PermissionRange s : labels ) { if ( s.getName ( ) . equals ( permissionName ) ) { return s ; } } return null ; }
private static boolean isMaybeHTML ( java.lang.String text ) { return com.google.common.base.CharMatcher.anyOf ( "<&" ) . matchesAnyOf ( text ) ; }
public void onValueChange ( com.google.gwt.event.logical.shared.ValueChangeEvent < com.google.gerrit.reviewdb.AccountDiffPreference > event ) { update ( event.getValue ( ) ) ; }
public com.google.gerrit.common.data.SubmitTypeRecord getSubmitTypeRecord ( ) { return submitTypeRecord ; }
public void onFailure ( java.lang.Throwable caught ) { enableUI ( true ) ; if ( com.google.gerrit.client.rpc.RestApi.isExpected ( 422 ) ) { new com.google.gerrit.client.ErrorDialog ( Util.C.invalidUserName ( ) ) . center ( ) ; } else { super . onFailure ( caught ) ; } }
public java.lang.Boolean call ( ) throws com.google.gerrit.server.project.NoSuchProjectException { return controlFor ( project ) . isVisible ( ) ; }
protected java.lang.Object createServiceHandle ( ) throws java.lang.Exception { final com.google.gerrit.server.GerritServer gs = com.google.gerrit.server.GerritServer.getInstance ( ) ; return new com.google.gerrit.client.changes.ChangeDetailServiceImpl ( gs.getDatabase ( ) , gs.getGroupCache ( ) ) ; }
public void updateRepo ( com.google.gerrit.server.update.RepoContext ctx ) throws java.lang.Exception { ctx.addRefUpdate ( new org.eclipse.jgit.transport.ReceiveCommand ( masterCommit.getId ( ) , branchCommit.getId ( ) , "refs/heads/master" ) ) ; }
private com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > topic ( java.lang.String topic ) { return new com.google.gerrit.server.query.change.TopicPredicate ( com.google.gerrit.server.query.change.InternalChangeQuery.schema ( indexes ) , topic ) ; }
private static com.google.gerrit.extensions.auth.oauth.OAuthUserInfo getAsOAuthUserInfo ( com.googlesource.gerrit.plugins.cfoauth.UserInfo userInfo ) { return new com.google.gerrit.extensions.auth.oauth.OAuthUserInfo ( userInfo.getExternalId ( ) , userInfo.getUserName ( ) , userInfo.getEmailAddress ( ) , userInfo.getDisplayName ( ) , null ) ; }
public void myAccount ( final com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.reviewdb.client.Account > callback ) { callback.onSuccess ( currentUser.get ( ) . getAccount ( ) ) ; }
public void inheritRead_OverrideWithDeny ( ) { com.google.gerrit.server.project.Util.allow ( parent , com.google.gerrit.common.data.Permission.READ , com.google.gerrit.server.group.SystemGroupBackend.REGISTERED_USERS , "refs/*" ) ; com.google.gerrit.server.project.Util.deny ( local , com.google.gerrit.common.data.Permission.READ , com.google.gerrit.server.group.SystemGroupBackend.REGISTERED_USERS , "refs/*" ) ; assertCannotRead ( user ( local ) ) ; }
public com.googlecode.prolog_cafe.lang.Operation jtry9 ( com.googlecode.prolog_cafe.lang.Operation p , com.googlecode.prolog_cafe.lang.Operation next ) { return jtry ( p , next , new com.googlecode.prolog_cafe.lang.ChoicePointFrame.S9 ( this ) ) ; }
java.lang.String removeVote ( java.lang.String label ) ;
public com.googlecode.prolog_cafe.lang.NumberTerm log ( ) { if ( ( this . val ) == 0 ) throw new com.googlecode.prolog_cafe.exceptions.EvaluationException ( "undefined" ) ; return new com.googlecode.prolog_cafe.lang.DoubleTerm ( java.lang.Math.log ( this . doubleValue ( ) ) ) ; }
public void commentOnReview ( java.lang.String project , int number , java.lang.String comment ) throws com.google.gerrit.extensions.restapi.RestApiException , com.google.gerrit.server.update.UpdateException , com.google.gwtorm.server.OrmException , java.io.IOException { com.google.gerrit.extensions.api.changes.ReviewInput reviewInput = createComment ( comment ) ; applyComment ( project , number , reviewInput ) ; }
public static com.google.gerrit.server.query.Predicate < com.google.gerrit.server.account.AccountState > isNotActive ( ) { return new com.google.gerrit.server.query.account.AccountPredicates.AccountPredicate ( com.google.gerrit.server.index.account.AccountField.ACTIVE , "0" ) ; }
protected PushOneCommit.Result pushTo ( java.lang.String ref ) throws java.lang.Exception { com.google.gerrit.acceptance.PushOneCommit push = pushFactory.create ( db , admin.getIdent ( ) , testRepo ) ; return push.to ( ref ) ; }
void onAddMe ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { java.lang.String accountId = java.lang.String.valueOf ( com.google.gerrit.client.Gerrit.getUserAccount ( ) . _accountId ( ) ) ; addReviewer ( accountId , false ) ; }
protected CallType createActiveCall ( final javax.servlet.http.HttpServletRequest req , final javax.servlet.http.HttpServletResponse resp ) { return ( ( CallType ) ( new com.google.gwtjsonrpc.server.ActiveCall ( req , resp ) ) ) ; }
public void setUp ( ) throws java.lang.Exception { lifecycle = new com.google.gerrit.lifecycle.LifecycleManager ( ) ; db = com.google.gerrit.testing.InMemoryDatabase.newDatabase ( lifecycle ) ; lifecycle.start ( ) ; }
public java.util.Map < java.lang.String , java.lang.Object > toSoyData ( javax.servlet.http.HttpServletRequest req , org.eclipse.jgit.revwalk.RevCommit commit , org.eclipse.jgit.util.GitDateFormatter df ) throws java.io.IOException { return toSoyData ( req , commit , com.google.gitiles.CommitSoyData.FieldSet.DEFAULT , df ) ; }
com.google.gerrit.server.change.EmailReviewComments create ( com.google.gerrit.extensions.api.changes.NotifyHandling notify , com.google.common.collect.Multimap < com.google.gerrit.extensions.api.changes.RecipientType , com.google.gerrit.reviewdb.client.Account.Id > accountsToNotify , com.google.gerrit.server.notedb.ChangeNotes notes , com.google.gerrit.reviewdb.client.PatchSet patchSet , com.google.gerrit.server.IdentifiedUser user , com.google.gerrit.reviewdb.client.ChangeMessage message , java.util.List < com.google.gerrit.reviewdb.client.Comment > comments , java.lang.String patchSetComment , java.util.List < com.google.gerrit.server.util.LabelVote > labels ) ;
public java.util.List < com.google.gerrit.extensions.api.projects.BranchInfo > get ( ) throws com.google.gerrit.extensions.restapi.RestApiException { return listBranches ( this ) ; }
private void parse ( java.lang.String markdown ) { extractMetadata ( markdown ) ; node = com.google.gitiles.doc.GitilesMarkdown.parse ( cfg , markdown ) ; extractSiteTitle ( ) ; }
public void onClick ( com.google.gwt.event.dom.client.ClickEvent event ) { if ( ( userPopup.isShowing ( ) ) && ( userPopup.isVisible ( ) ) ) { userPopup.hide ( ) ; } else { userPopup.showRelativeTo ( l ) ; } }
public void setUp ( ) throws java.lang.Exception { local = new com.google.gerrit.server.git.ProjectConfig ( localKey ) ; local.load ( com.google.gerrit.testutil.InMemoryRepositoryManager.newRepository ( localKey ) ) ; util.add ( local ) ; }
public void emptyResultIfInvalid ( ) { java.util.Collection < com.google.gerrit.common.data.SubmitRecord > submitRecords = new java.util.ArrayList < > ( ) ; submitRecords.add ( com.google.gerrit.common.data.SubmitRecordTest.NOT_READY_RECORD ) ; submitRecords.add ( com.google.gerrit.common.data.SubmitRecordTest.OK_RECORD ) ; com.google.common.truth.Truth.assertThat ( com.google.gerrit.common.data.SubmitRecord.allRecordsOK ( submitRecords ) ) . isFalse ( ) ; }
public void onSuccess ( com.google.gwt.core.client.JavaScriptObject result ) { if ( screen.isCurrentView ( ) ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( psId.getParentKey ( ) , java.lang.String.valueOf ( psId.get ( ) ) ) ) ; } }
void patchScript ( com.google.gerrit.client.reviewdb.Patch.Key key , com.google.gerrit.client.reviewdb.PatchSet.Id a , com.google.gerrit.client.reviewdb.PatchSet.Id b , int context , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.data.PatchScript > callback ) ;
public void createNewChange ( ) throws java.lang.Exception { assertCreateSucceeds ( newChangeInfo ( ChangeStatus.NEW ) ) ; }
public void onSuccess ( final com.google.gwtjsonrpc.client.VoidResult result ) { com.google.gerrit.client.Gerrit.display ( nextToken , true ) ; }
public java.util.List < java.lang.String > getUsernamesForRepositoryRole ( java.lang.String role ) { return java.util.Collections.emptyList ( ) ; }
public void addItem ( final java.lang.String text , final com.google.gwt.user.client.Command imp ) { add ( new com.google.gerrit.client.ui.CommandMenuItem ( text , imp ) ) ; }
public boolean isInternalGroup ( ) { com.google.gerrit.common.data.GroupDescription.Basic group = getGroup ( ) ; return group instanceof com.google.gerrit.common.data.GroupDescription.Internal ; }
void set ( com.google.gerrit.client.info.ChangeInfo info ) { this . changeId = info.legacyId ( ) ; display ( info ) ; reviewerSuggestOracle.setChange ( changeId ) ; addReviewerIcon.setVisible ( com.google.gerrit.client.Gerrit.isSignedIn ( ) ) ; }
java.nio.file.Path getSrcJar ( ) { return getSrcFile ( ) ; }
public com.gitblit.models.UserModel authenticate ( char [ ] cookie ) { return null ; }
public static void removeSignOutHandler ( final com.google.gerrit.client.SignOutHandler l ) { com.google.gerrit.client.Gerrit.signOutHandlers.remove ( l ) ; }
public void postUpdate ( com.google.gerrit.server.update.Context ctx ) throws com.google.gwtorm.server.OrmException { if ( ( updated ( ) ) && ( fireEvent ) ) { hashtagsEdited.fire ( change , ctx.getAccount ( ) , updatedHashtags , toAdd , toRemove , ctx.getWhen ( ) ) ; } }
public org.scribe.oauth.OAuthService createService ( org.scribe.model.OAuthConfig config ) { return new com.googlesource.gerrit.plugins.oauth.OAuth20ServiceImpl ( this , config ) ; }
public com.google.gerrit.server.query.change.QueryOptions getOptions ( ) { return opts ; }
public com.google.gitiles.doc.MarkdownToHtml.Builder setReader ( org.eclipse.jgit.lib.ObjectReader reader ) { this . reader = reader ; return this ; }
public java.lang.String commitMessage ( ) throws com.google.gwtorm.server.OrmException , java.io.IOException { if ( ( commitMessage ) == null ) { loadCommitData ( ) ; } return commitMessage ; }
void display ( java.util.Collection < java.lang.String > values ) { int row = 1 ; for ( java.lang.String v : values ) { populate ( row , v ) ; row ++ ; } }
protected void configure ( ) { bind ( com.google.gerrit.pgm.util.ConsoleUI.class ) . toInstance ( init.ui ) ; bind ( com.google.gerrit.pgm.init.InitFlags.class ) . toInstance ( init.flags ) ; bind ( com.google.gerrit.server.git.GitRepositoryManager.class ) . to ( com.google.gerrit.server.git.LocalDiskRepositoryManager.class ) ; bind ( com.google.gerrit.server.git.GitProjectImporter.class ) ; }
public com.googlesource.gerrit.plugins.github.git.PagedIterable < com.googlesource.gerrit.plugins.github.git.GHCommit > listCommits ( ) { return ghRepository.listCommits ( ) ; }
public static void all ( com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.rpc.NativeList < com.google.gerrit.client.dashboards.DashboardList > > callback ) { new com.google.gerrit.client.rpc.RestApi ( com.google.gerrit.client.dashboards.DashboardList.base ( project ) ) . addParameterTrue ( "inherited" ) . get ( callback ) ; }
void patchComments ( com.google.gerrit.client.reviewdb.Patch.Key key , com.google.gerrit.client.reviewdb.PatchSet.Id a , com.google.gerrit.client.reviewdb.PatchSet.Id b , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.patches.CommentDetail > callback ) ;
public java.util.List < com.google.gerrit.reviewdb.client.PatchSetApproval > copyVetosToLatestPatchSet ( com.google.gerrit.reviewdb.client.Change change ) throws com.google.gwtorm.server.OrmException { return copyVetosToLatestPatchSet ( db , change ) ; }
private com.google.gerrit.server.notedb.ChangeUpdate newUpdate ( com.google.gerrit.reviewdb.client.Change c , final com.google.gerrit.server.IdentifiedUser user ) throws java.lang.Exception { return com.google.gerrit.testutil.TestChanges.newUpdate ( injector , repoManager , migration , c , allUsers , user ) ; }
public void onSuccess ( final com.google.gerrit.reviewdb.Account result ) { registerNewEmail.setEnabled ( true ) ; onSaveSuccess ( result ) ; if ( onSave != null ) { onSave.onSuccess ( result ) ; } }
public void reset ( ) { result.clear ( ) ; start = 0 ; more = true ; page = 0 ; currentChange = null ; }
public java.util.List < com.google.gerrit.reviewdb.client.Project.NameKey > getNameKeys ( ) throws com.google.gerrit.server.permissions.PermissionBackendException { return permissionBackend.currentUser ( ) . filter ( ProjectPermission.ACCESS , readableParents ( ) ) . stream ( ) . sorted ( ) . collect ( java.util.stream.Collectors.toList ( ) ) ; }
public static boolean hasRange ( java.lang.String varName ) { return ( com.google.gerrit.common.data.GlobalCapability.QUERY_LIMIT.equalsIgnoreCase ( varName ) ) || ( com.google.gerrit.common.data.GlobalCapability.BATCH_CHANGES_LIMIT.equalsIgnoreCase ( varName ) ) ; }
public org.kohsuke.github.GitHub login ( com.googlesource.gerrit.plugins.github.oauth.OAuthProtocol.AccessToken authToken ) throws java.io.IOException { this . token = authToken ; this . hub = org.kohsuke.github.GitHub.connectUsingOAuth ( authToken.access_token ) ; this . myself = hub.getMyself ( ) ; return this . hub ; }
public static com.google.gerrit.client.changes.ChangeInfo.RevisionInfo fromEdit ( com.google.gerrit.client.changes.ChangeInfo.EditInfo edit ) { com.google.gerrit.client.changes.ChangeInfo.RevisionInfo revisionInfo = createObject ( ) . cast ( ) ; revisionInfo.takeFromEdit ( edit ) ; return revisionInfo ; }
static void deleteSessionCookie ( ) { com.google.gerrit.client.Gerrit.myAccount = null ; com.google.gerrit.client.Gerrit.myAccountDiffPref = null ; com.google.gerrit.client.Gerrit.xsrfToken = null ; com.google.gerrit.client.Gerrit.refreshMenuBar ( ) ; com.google.gwt.user.client.Cookies.removeCookie ( "GerritAccount" ) ; }
public void testKeyIdToString ( ) throws java.lang.Exception { org.bouncycastle.openpgp.PGPPublicKey key = com.google.gerrit.gpg.testutil.TestKey.key1 ( ) . getPublicKey ( ) ; org.junit.Assert.assertEquals ( "46328A8C" , com.google.gerrit.gpg.PublicKeyStore.keyIdToString ( key.getKeyID ( ) ) ) ; }
public abstract void execute ( com.google.gerrit.server.update.BatchUpdateListener listener ) throws com.google.gerrit.extensions.restapi.RestApiException , com.google.gerrit.server.update.UpdateException ;
protected void beforeTest ( org.junit.runner.Description description ) throws java.lang.Exception { locatePaths ( ) ; retrievePluginName ( ) ; buildPluginJar ( ) ; createTestSiteDirs ( ) ; copyJarToTestSite ( ) ; super . beforeTest ( description ) ; }
public void cleanup ( ) { sshSession.close ( ) ; db.close ( ) ; }
public com.google.gwtorm.server.ResultSet < T > read ( ) throws com.google.gwtorm.server.OrmException { try { return readImpl ( ) ; } catch ( com.google.gwtorm.server.OrmRuntimeException err ) { com.google.common.base.Throwables.throwIfInstanceOf ( err.getCause ( ) , com.google.gwtorm.server.OrmException.class ) ; throw new com.google.gwtorm.server.OrmException ( err ) ; } }
public com.google.gwtorm.server.ResultSet < com.google.gerrit.reviewdb.client.Change > all ( ) throws com.google.gwtorm.server.OrmException { throw new java.lang.UnsupportedOperationException ( com.google.gerrit.reviewdb.server.DisabledChangesReviewDbWrapper.MSG ) ; }
public void pushBypassPrivateByDefaultEnabled ( ) throws java.lang.Exception { setPrivateByDefault ( project2 , InheritableBoolean.TRUE ) ; com.google.common.truth.Truth.assertThat ( createChange ( project2 , "refs/for/master%remove-private" ) . getChange ( ) . change ( ) . isPrivate ( ) ) . isEqualTo ( false ) ; }
public com.google.gerrit.server.IdentifiedUser create ( com.google.inject.Provider < com.google.gerrit.reviewdb.ReviewDb > db , com.google.gerrit.reviewdb.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( AccessPath.UNKNOWN , authConfig , canonicalUrl , realm , accountCache , groupIncludeCache , null , db , id ) ; }
private com.google.gerrit.extensions.common.ChangeInfo detailedChange ( java.lang.String changeId ) throws java.lang.Exception { return gApi.changes ( ) . id ( changeId ) . get ( java.util.EnumSet.of ( ListChangesOption.DETAILED_LABELS , ListChangesOption.CURRENT_REVISION , ListChangesOption.CURRENT_COMMIT ) ) ; }
protected void configureCommands ( ) { command ( com.googlesource.gerrit.plugins.cookbook.PrintHelloWorldCommand.class ) ; command ( com.googlesource.gerrit.plugins.cookbook.AdminCookbookCommand.class ) ; alias ( "say-hello" , com.googlesource.gerrit.plugins.cookbook.PrintHelloWorldCommand.class ) ; }
public void setSubmitType ( final com.google.gerrit.extensions.common.SubmitType type ) { submitType = type ; }
public static java.lang.String toChange ( final com.google.gerrit.reviewdb.Change.Id c ) { return ( "/c/" + c ) + "/" ; }
public void configure ( ) { factory ( ReviewDbBatchUpdate.AssistedFactory.class ) ; factory ( NoteDbBatchUpdate.AssistedFactory.class ) ; }
protected void configure ( ) { listener ( ) . toInstance ( com.google.gerrit.extensions.registration.PrivateInternals_DynamicTypes.registerInParentInjectors ( ) ) ; }
public void upsert ( java.lang.Iterable < com.google.gerrit.reviewdb.client.Change > instances ) { throw new java.lang.UnsupportedOperationException ( ( "do not call upsert; existing changes are updated automatically," + " or use InsertChangeOp for insertion" ) ) ; }
com.google.gerrit.server.change.AbandonOp create ( @ com.google.inject.assistedinject.Assisted com.google.gerrit.server.account.AccountState accountState , @ com.google.inject.assistedinject.Assisted java.lang.String msgTxt , @ com.google.inject.assistedinject.Assisted com.google.gerrit.extensions.api.changes.NotifyHandling notifyHandling , @ com.google.inject.assistedinject.Assisted com.google.common.collect.ListMultimap < com.google.gerrit.extensions.api.changes.RecipientType , com.google.gerrit.reviewdb.client.Account.Id > accountsToNotify ) ;
public void onKeyPress ( final com.google.gwt.event.dom.client.KeyPressEvent event ) { ensurePointerVisible ( ) ; moveToNextChunk ( getCurrentRow ( ) ) ; }
private boolean canSeeMembers ( ) { com.google.gerrit.reviewdb.client.AccountGroup accountGroup = com.google.gerrit.common.data.GroupDescriptions.toAccountGroup ( group ) ; return ( ( accountGroup != null ) && ( accountGroup.isVisibleToAll ( ) ) ) || ( isOwner ( ) ) ; }
public com.google.gerrit.extensions.api.changes.AddReviewerResult addReviewer ( java.lang.String reviewer ) throws com.google.gerrit.extensions.restapi.RestApiException { com.google.gerrit.extensions.api.changes.AddReviewerInput in = new com.google.gerrit.extensions.api.changes.AddReviewerInput ( ) ; in.reviewer = reviewer ; return addReviewer ( in ) ; }
public com.google.gerrit.server.change.ChangeJson.ChangeInfo format ( com.google.gerrit.reviewdb.client.Change change ) throws com.google.gwtorm.server.OrmException { return format ( changeDataFactory.create ( db.get ( ) , change ) ) ; }
public int compare ( final com.google.gerrit.client.data.ChangeInfo o1 , final com.google.gerrit.client.data.ChangeInfo o2 ) { return o1.getLastUpdatedOn ( ) . compareTo ( o2.getLastUpdatedOn ( ) ) ; }
public com.google.gerrit.index.query.DataSource < com.google.gerrit.server.query.change.ChangeData > getSource ( com.google.gerrit.index.query.Predicate < com.google.gerrit.server.query.change.ChangeData > p , com.google.gerrit.index.QueryOptions opts ) throws com.google.gerrit.index.query.QueryParseException { return index.getSource ( p , opts ) ; }
private static java.lang.String queryIncoming ( java.lang.String who ) { return ( ( "is:open reviewer:" + who ) + " -owner:" ) + who ; }
public java.sql.Timestamp getMaxTimestamp ( ) { return new java.sql.Timestamp ( cut ) ; }
protected java.lang.Object getRowItemKey ( com.google.gerrit.client.info.FileInfo item ) { return item.path ( ) ; }
abstract void onRefReplicatedToOneNode ( java.lang.String project , java.lang.String ref , org.eclipse.jgit.transport.URIish uri , com.googlesource.gerrit.plugins.replication.ReplicationState.RefPushResult status ) ;
public void getIfPresentInvalidKeyTest ( ) throws java.lang.Exception { loadKeyToCacheDir ( com.ericsson.gerrit.plugins.highavailability.websession.file.FileBasedWebSessionCacheTest.INVALID_KEY ) ; java.nio.file.Path path = websessionDir.resolve ( com.ericsson.gerrit.plugins.highavailability.websession.file.FileBasedWebSessionCacheTest.INVALID_KEY ) ; com.google.common.truth.Truth.assertThat ( cache.getIfPresent ( ( ( java.lang.Object ) ( path ) ) ) ) . isNull ( ) ; }
public void cleanup ( ) { org.joda.time.DateTimeUtils.setCurrentMillisSystem ( ) ; db.close ( ) ; }
void setUpPatchSetNav ( com.google.gwt.core.client.JsArray < com.google.gerrit.client.changes.ChangeInfo.RevisionInfo > list , com.google.gerrit.client.diff.DiffInfo info ) { patchSetSelectBoxA.setUpPatchSetNav ( list , info.meta_a ( ) ) ; patchSetSelectBoxB.setUpPatchSetNav ( list , info.meta_b ( ) ) ; }
public com.google.gerrit.extensions.restapi.Response < java.lang.String > apply ( com.google.gerrit.server.account.AccountResource rsrc ) { if ( rsrc.getUser ( ) . getAccount ( ) . isActive ( ) ) { return com.google.gerrit.extensions.restapi.Response.ok ( "ok" ) ; } return com.google.gerrit.extensions.restapi.Response.none ( ) ; }
private void logWarn ( java.lang.String msg , java.lang.Throwable t ) { if ( com.google.gerrit.server.git.MergeOp.log.isWarnEnabled ( ) ) { com.google.gerrit.server.git.MergeOp.log.warn ( ( ( submissionId ) + msg ) , t ) ; } }
public void setUp ( ) throws java.lang.Exception { admins = groupCache.get ( new com.google.gerrit.reviewdb.client.AccountGroup.NameKey ( "Administrators" ) ) . orElse ( null ) . getGroupUUID ( ) ; setUpPermissions ( ) ; setUpChanges ( ) ; }
public com.google.gerrit.server.plugins.InstallPlugin create ( com.google.gerrit.extensions.restapi.TopLevelResource parent , com.google.gerrit.extensions.restapi.IdString id ) throws com.google.gerrit.extensions.restapi.ResourceNotFoundException { return new com.google.gerrit.server.plugins.InstallPlugin ( loader , id.get ( ) , true ) ; }
private org.apache.lucene.search.Query prefixQuery ( com.google.gerrit.index.query.IndexPredicate < V > p ) { return new org.apache.lucene.search.PrefixQuery ( new org.apache.lucene.index.Term ( p.getField ( ) . getName ( ) , p.getValue ( ) ) ) ; }
public java.util.Collection < com.google.gerrit.reviewdb.AccountProjectWatch > getNotificationFilters ( ) { return java.util.Collections.emptySet ( ) ; }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > evictAsync ( com.google.gerrit.reviewdb.AccountProjectWatch.Key key ) { return com.google.gerrit.server.util.CompoundFuture.wrap ( byAccountId.removeAsync ( key.getParentKey ( ) ) , byProjectName.removeAsync ( key.getProjectName ( ) ) ) ; }
public < T > java.util.concurrent.Callable < T > scope ( java.util.concurrent.Callable < T > callable ) { return propagator.scope ( requestContext , callable ) ; }
protected void doDelete ( javax.servlet.http.HttpServletRequest req , javax.servlet.http.HttpServletResponse rsp ) { if ( ! ( allowDelete ) ) { sendError ( rsp , javax.servlet.http.HttpServletResponse.SC_METHOD_NOT_ALLOWED , java.lang.String.format ( "cannot delete %s from index" , indexName ) ) ; } else { process ( req , rsp , Operation.DELETE ) ; } }
public java.lang.String getName ( ) { return ( NAME_PREFIX ) + ( orgName ) ; }
public int compare ( com.google.gerrit.extensions.common.ChangeInfo c1 , com.google.gerrit.extensions.common.ChangeInfo c2 ) { return c1.branch.compareTo ( c2.branch ) ; }
synchronized void clean ( int expect ) { if ( ( ( self ) == null ) && ( ( pending ) == 0 ) ) { start = com.google.gerrit.server.util.TimeUtil.nowMs ( ) ; } pending = expect ; ensureScheduled ( ) ; }
public final com.google.gerrit.reviewdb.client.AccountGeneralPreferences.ReviewCategoryStrategy reviewCategoryStrategy ( ) { java.lang.String s = reviewCategeoryStrategyRaw ( ) ; return s != null ? com.google.gerrit.reviewdb.client.AccountGeneralPreferences.ReviewCategoryStrategy.valueOf ( s ) : com.google.gerrit.reviewdb.client.AccountGeneralPreferences.ReviewCategoryStrategy.NONE ; }
private void assertProblems ( com.google.gerrit.gpg.testing.TestKey tk , java.lang.String first , java.lang.String ... rest ) { assertProblems ( tk.getPublicKey ( ) , first , rest ) ; }
public void listBranches ( final com.google.gerrit.reviewdb.client.Project.NameKey projectName , final com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.ListBranchesResult > callback ) { listBranchesFactory.create ( projectName ) . to ( callback ) ; }
public static java.lang.String toSideBySide ( com.google.gerrit.reviewdb.client.PatchSet.Id diffBase , com.google.gerrit.reviewdb.client.Patch.Key id ) { return com.google.gerrit.client.Dispatcher.toPatch ( "sidebyside" , diffBase , id ) ; }
byte [ ] toByteArray ( com.google.gerrit.reviewdb.client.Project.NameKey project ) { return ( ( ( project.toString ( ) ) + ':' ) + ( pattern ( ) ) ) . getBytes ( java.nio.charset.StandardCharsets.UTF_8 ) ; }
private void enable ( final boolean on ) { showSiteHeader.setEnabled ( on ) ; useFlashClipboard.setEnabled ( on ) ; defaultContext.setEnabled ( on ) ; }
public com.google.gerrit.server.CurrentUser getCurrentUser ( ) { return user.getRealUser ( ) ; }
com.google.gerrit.extensions.common.WebLinkInfo getPatchSetWebLink ( final java.lang.String projectName , final java.lang.String commit ) ;
public java.lang.String toString ( ) { if ( ( forUser ) == ( com.google.gerrit.server.permissions.LabelPermission.ForUser.ON_BEHALF_OF ) ) { return ( "LabelAs[" + ( name ) ) + ']' ; } return ( "Label[" + ( name ) ) + ']' ; }
public UiAction.Description getDescription ( com.google.gerrit.server.change.ChangeResource resource ) { return new com.google.gerrit.extensions.webui.UiAction.Description ( ) . setLabel ( "Edit Assignee" ) . setVisible ( resource.getControl ( ) . canEditAssignee ( ) ) ; }
protected com.google.inject.Injector createInjector ( com.google.gerrit.lifecycle.LifecycleManager lifecycle ) { org.eclipse.jgit.lib.Config luceneConfig = new org.eclipse.jgit.lib.Config ( config ) ; com.google.gerrit.testutil.InMemoryModule.setDefaults ( luceneConfig ) ; return com.google.gerrit.testutil.InMemoryModule.createInjector ( lifecycle , luceneConfig ) ; }
boolean canPerform ( java.lang.String permissionName , boolean isChangeOwner ) { return doCanPerform ( permissionName , isChangeOwner , false ) ; }
private boolean match ( java.lang.String destBranch , java.lang.String refPattern ) { return com.google.gerrit.server.project.RefPatternMatcher.getMatcher ( refPattern ) . match ( destBranch , getUser ( ) . getUserName ( ) ) ; }
public void onFailure ( final java.lang.Throwable caught ) { super . onFailure ( caught ) ; c.setStarred ( prior ) ; setStar ( row , c ) ; }
public boolean isTokenValid ( final java.lang.String inputToken ) { return ( ( isSignedIn ( ) ) && ( ( val.getXsrfToken ( ) ) != null ) ) && ( val.getXsrfToken ( ) . equals ( inputToken ) ) ; }
private static com.google.gerrit.client.rpc.RestApi detail ( int id ) { return com.google.gerrit.client.changes.ChangeApi.call ( id , "detail" ) ; }
public void confirmInvalidToken_UnprocessableEntity ( ) throws java.lang.Exception { com.google.gerrit.server.config.ConfirmEmail.Input in = new com.google.gerrit.server.config.ConfirmEmail.Input ( ) ; in.token = "invalidToken" ; adminSession.put ( "/config/server/email.confirm" , in ) . assertUnprocessableEntity ( ) ; }
private void initSite ( ) throws java.lang.Exception { com.google.gerrit.acceptance.pgm.RebuildNoteDbIT.runGerrit ( "init" , "-d" , sitePath.getPath ( ) , "--batch" , "--no-auto-start" , "--skip-plugins" , "--show-stack-trace" ) ; }
private com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > rewrite ( com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > in , com.google.gerrit.server.query.change.QueryOptions opts ) throws com.google.gerrit.server.query.QueryParseException { return rewrite.rewrite ( in , opts ) ; }
public void hashtagsWithAccentedCharacters ( ) throws java.lang.Exception { java.lang.String commitMessage = "Jag #mste #va p min #Svenska!\n\nJag behver en #lkare." ; com.google.common.truth.Truth.assertThat ( com.google.gerrit.server.change.HashtagsUtil.extractTags ( commitMessage ) ) . containsExactlyElementsIn ( com.google.common.collect.Sets.newHashSet ( "mste" , "va" , "Svenska" , "lkare" ) ) ; }
public static < T > com.google.inject.binder.LinkedBindingBuilder < T > bind ( com.google.inject.Binder binder , com.google.inject.TypeLiteral < T > type , com.google.inject.name.Named name ) { binder.disableCircularProxies ( ) ; return binder.bind ( type ) . annotatedWith ( name ) ; }
private static com.google.gerrit.extensions.common.ApprovalInfo fromApprovalInfo ( com.google.gerrit.server.change.ChangeJson.ApprovalInfo ai ) { com.google.gerrit.extensions.common.ApprovalInfo ao = new com.google.gerrit.extensions.common.ApprovalInfo ( ) ; ao.value = ai.value ; ao.date = ai.date ; com.google.gerrit.server.api.accounts.AccountInfoMapper.fromAccount ( ai , ao ) ; return ao ; }
public com.google.gerrit.server.account.AccountSshKey create ( com.google.gerrit.reviewdb.client.Account.Id accountId , int seq , java.lang.String encoded ) { return com.google.gerrit.server.account.AccountSshKey.create ( accountId , seq , encoded ) ; }
public void setCurrentFilePaths ( java.util.List < java.lang.String > filePaths ) { currentFiles = com.google.common.collect.ImmutableList.copyOf ( filePaths ) ; }
private void checkPreconditions ( javax.servlet.http.HttpServletRequest req ) throws com.google.gerrit.extensions.restapi.PreconditionFailedException { if ( "*" . equals ( req.getHeader ( com.google.common.net.HttpHeaders.IF_NONE_MATCH ) ) ) { throw new com.google.gerrit.extensions.restapi.PreconditionFailedException ( "Resource already exists" ) ; } }
public org.eclipse.jgit.patch.FileHeader call ( ) throws java.io.IOException { synchronized ( lock ) { return diffFormatter.toFileHeader ( diffEntry ) ; } }
public void testCreateProjectHttpWithUnreasonableName_BadRequest ( ) throws java.lang.Exception { adminSession.put ( ( "/projects/" + ( com.google.gerrit.extensions.restapi.Url.encode ( name ( "invalid/../name" ) ) ) ) ) . assertBadRequest ( ) ; }
public void putComment ( com.google.gerrit.reviewdb.client.Comment c ) { verifyComment ( c ) ; put.add ( c ) ; }
public void testLinkify_Parens1 ( ) { final com.google.gwtexpui.safehtml.client.SafeHtml o = com.google.gwtexpui.safehtml.client.SafeHtml_LinkifyTest.html ( "A (http://go.here/) B" ) ; final com.google.gwtexpui.safehtml.client.SafeHtml n = o.linkify ( ) ; org.junit.Assert.assertNotSame ( o , n ) ; org.junit.Assert.assertEquals ( "A (<a href=\"http://go.here/\" target=\"_blank\">http://go.here/</a>) B" , n.asString ( ) ) ; }
public com.google.gerrit.server.query.QueryProcessor < T > enforceVisibility ( boolean enforce ) { enforceVisibility = enforce ; return this ; }
public org.apache.sshd.server.Command createCommand ( final java.lang.String requestCommand ) { java.lang.String c = requestCommand ; com.google.gerrit.sshd.SshCreateCommandInterceptor interceptor = createCommandInterceptor.get ( ) ; if ( interceptor != null ) { c = interceptor.intercept ( c ) ; } return new com.google.gerrit.sshd.CommandFactoryProvider.Trampoline ( c ) ; }
void apply ( com.google.gerrit.server.notedb.ChangeUpdate update ) throws com.google.gwtorm.server.OrmException { checkUpdate ( update ) ; update.setChangeMessage ( message.getMessage ( ) ) ; setTopic ( update ) ; }
private void uncacheSshKeys ( final java.lang.String userName ) { if ( userName != null ) { sshKeyCache.evict ( userName ) ; } }
private int countMagicFiles ( java.util.List < com.google.gerrit.server.diff.PatchListEntry > entries ) { int count = 0 ; for ( com.google.gerrit.server.diff.PatchListEntry e : entries ) { if ( com.google.gerrit.reviewdb.client.Patch.isMagic ( e.getNewName ( ) ) ) { count ++ ; } } return count ; }
public void assertMessage ( java.lang.String expectedMessage ) { org.eclipse.jgit.transport.RemoteRefUpdate refUpdate = result.getRemoteUpdate ( ref ) ; com.google.common.truth.Truth.assertThat ( message ( refUpdate ) . toLowerCase ( ) ) . named ( message ( refUpdate ) ) . contains ( expectedMessage.toLowerCase ( ) ) ; }
boolean isNew ( ) { return ( comment.getKey ( ) . get ( ) ) == null ; }
java.util.Map < java.lang.String , java.lang.String > map ( ) { return java.util.Collections.unmodifiableMap ( atts ) ; }
public java.lang.Iterable < com.google.gerrit.server.project.ProjectState > tree ( ) { return new java.lang.Iterable < com.google.gerrit.server.project.ProjectState > ( ) { @ java.lang.Override public java.util.Iterator < com.google.gerrit.server.project.ProjectState > iterator ( ) { return new com.google.gerrit.server.project.ProjectHierarchyIterator ( projectCache , allProjectsName , com.google.gerrit.server.project.ProjectState.this ) ; } } ; }
void removeProjectEvents ( java.lang.String project ) { try { execute ( java.lang.String.format ( "DELETE FROM %s WHERE project = '%s'" , com.ericsson.gerrit.plugins.eventslog.sql.SQLTable.TABLE_NAME , project ) ) ; } catch ( java.sql.SQLException e ) { com.ericsson.gerrit.plugins.eventslog.sql.SQLClient.log.warn ( ( ( "Cannot remove project " + project ) + " events from database" ) , e ) ; } }
private com.google.common.collect.ImmutableList < com.google.gerrit.extensions.common.CommitInfo > log ( ) throws java.lang.Exception { return com.google.gerrit.testing.GitTestUtil.log ( repo , com.google.gerrit.reviewdb.client.RefNames.REFS_GROUPNAMES ) ; }
private com.google.gwtexpui.safehtml.client.SafeHtmlBuilder formatHashtags ( com.google.gerrit.client.info.ChangeInfo info ) { if ( ( info.hashtags ( ) ) != null ) { return formatHashtags ( info.hashtags ( ) ) ; } return new com.google.gwtexpui.safehtml.client.SafeHtmlBuilder ( ) ; }
public java.lang.String getRefName ( ) { return refUpdate.get ( ) . refName ; }
public java.util.Map < java.lang.String , java.lang.Short > votes ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return listVotes.apply ( reviewer ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot list votes" , e ) ; } }
public final native com.google.gerrit.client.changes.ChangeInfo.EditInfo edit ( ) ;
protected com.google.gerrit.extensions.common.ChangeInfo get ( java.lang.String id , com.google.gerrit.extensions.client.ListChangesOption ... options ) throws com.google.gerrit.extensions.restapi.RestApiException { return gApi.changes ( ) . id ( id ) . get ( com.google.common.collect.Sets.newEnumSet ( java.util.Arrays.asList ( options ) , com.google.gerrit.extensions.client.ListChangesOption.class ) ) ; }
public void onSuccess ( final com.google.gwtjsonrpc.client.VoidResult result ) { notifyDraftDelta ( ( - 1 ) ) ; removeUI ( ) ; }
void deleteDraftChange ( com.google.gerrit.reviewdb.client.PatchSet.Id patchSetId , com.google.gwtjsonrpc.common.AsyncCallback < com.google.gwtjsonrpc.common.VoidResult > callback ) ;
public void setHeader ( java.lang.String name , java.lang.String value ) { headers.removeAll ( name ) ; addHeader ( name , value ) ; }
void createNewPatchSet ( final com.google.gerrit.reviewdb.client.PatchSet.Id patchSetId , final java.lang.String newCommitMessage , final com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.ChangeDetail > callback ) ;
public com.googlecode.prolog_cafe.lang.NumberTerm shiftRight ( com.googlecode.prolog_cafe.lang.NumberTerm t ) { if ( t instanceof com.googlecode.prolog_cafe.lang.DoubleTerm ) throw new com.googlecode.prolog_cafe.exceptions.IllegalTypeException ( "integer" , t ) ; return new com.googlecode.prolog_cafe.lang.IntegerTerm ( ( ( this . val ) > > ( t.intValue ( ) ) ) ) ; }
private PushOneCommit.Result createChange ( ) throws java.io.IOException , org.eclipse.jgit.api.errors.GitAPIException { com.google.gerrit.acceptance.PushOneCommit push = pushFactory.create ( db , admin.getIdent ( ) , "test commit" , "a.txt" , "some content" ) ; return push.to ( git , "refs/for/master" ) ; }
public static java.lang.String toEditScreen ( com.google.gerrit.reviewdb.client.PatchSet.Id revision , java.lang.String fileName , int line ) { return com.google.gerrit.client.Dispatcher.toPatch ( "edit" , com.google.gerrit.client.DiffObject.base ( ) , revision , fileName , null , line ) ; }
public void setSession ( final org.apache.sshd.server.session.ServerSession session ) { com.google.gerrit.sshd.SshSession s = session.getAttribute ( SshSession.KEY ) ; this . context = sshScope.newContext ( schemaFactory , s , "" ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { toggleReviewed ( ) . run ( ) ; }
public com.google.gerrit.server.project.ChangeControl controlFor ( final com.google.gerrit.reviewdb.Change change ) { return new com.google.gerrit.server.project.ChangeControl ( controlForRef ( change.getDest ( ) ) , change ) ; }
public com.google.gwtexpui.safehtml.client.SafeHtml linkify ( ) { final java.lang.String part = "(?:" + ( ( "[a-zA-Z0-9$_.+!*',%;:@=?#/-]" + "|&(?!lt;|gt;)" ) + ")" ) ; return replaceAll ( ( ( ( ( ( ( ( ( ( "(https?://" + part ) + "{2,}" ) + "(?:[(]" ) + part ) + "*" ) + "[)])*" ) + part ) + "*" ) + ")" ) , "<a href=\"$1\">$1</a>" ) ; }
public java.util.List < com.google.gerrit.server.git.ValidationError > getValidationErrors ( ) { if ( ( validationErrors ) != null ) { return com.google.common.collect.ImmutableList.copyOf ( validationErrors ) ; } return com.google.common.collect.ImmutableList.of ( ) ; }
public com.google.gerrit.client.reviewdb.AccountGroup createEntry ( final com.google.gerrit.client.reviewdb.AccountGroup.Id key ) throws java.lang.Exception { return lookup ( key ) ; }
protected void submit ( java.lang.String changeId ) throws java.lang.Exception { submit ( changeId , new com.google.gerrit.extensions.api.changes.SubmitInput ( ) , null , null , true ) ; }
public static boolean isStreamingResponse ( javax.servlet.http.HttpServletRequest req ) { return com.google.common.base.MoreObjects.firstNonNull ( ( ( java.lang.Boolean ) ( req.getAttribute ( com.google.gitiles.BaseServlet.STREAMING_ATTRIBUTE ) ) ) , false ) ; }
public static boolean isOAuthFinal ( javax.servlet.http.HttpServletRequest request ) { return ( ( com.google.common.base.Strings.emptyToNull ( request.getParameter ( "code" ) ) ) != null ) && ( ( request.getParameter ( com.googlesource.gerrit.plugins.github.oauth.OAuthProtocol.FINAL_URL_PARAM ) ) == null ) ; }
public void addHeader ( java.lang.String name , java.lang.String value ) { headers.put ( name , value ) ; }
private void publishDrafts ( ) throws com.google.gwtorm.server.OrmException { for ( final com.google.gerrit.reviewdb.client.PatchLineComment c : drafts ) { c.setStatus ( PatchLineComment.Status.PUBLISHED ) ; c.updated ( ) ; } db.patchComments ( ) . update ( drafts ) ; }
private void infoRow ( final int row , final java.lang.String name ) { info.setText ( row , labelIdx , name ) ; info.getCellFormatter ( ) . addStyleName ( row , 0 , Gerrit.RESOURCES.css ( ) . header ( ) ) ; }
public com.google.gwtorm.server.ResultSet < com.google.gerrit.reviewdb.client.Change > get ( java.lang.Iterable < com.google.gerrit.reviewdb.client.Change.Id > keys ) { throw new java.lang.UnsupportedOperationException ( com.google.gerrit.reviewdb.server.DisabledChangesReviewDbWrapper.MSG ) ; }
public void setStatisticsEnabled ( boolean enableStatistics ) { self ( ) . setStatisticsEnabled ( enableStatistics ) ; }
private static boolean isGoogleAccount ( final org.openid4java.discovery.Identifier user ) { return user.getIdentifier ( ) . startsWith ( ( ( com.google.gerrit.client.openid.OpenIdUtil.URL_GOOGLE ) + "?" ) ) ; }
private int search ( java.lang.String fileName ) { com.google.gerrit.server.diff.PatchListEntry want = com.google.gerrit.server.diff.PatchListEntry.empty ( fileName ) ; return java.util.Arrays.binarySearch ( patches , 0 , patches.length , want , com.google.gerrit.server.diff.PatchList.PATCH_CMP ) ; }
public boolean canAddPatchSet ( com.google.gerrit.reviewdb.server.ReviewDb db ) throws com.google.gwtorm.server.OrmException { return ( getRefControl ( ) . canUpload ( ) ) && ( ! ( isPatchSetLocked ( db ) ) ) ; }
private static boolean isSafe ( org.spearce.jgit.lib.Config cfg , java.lang.String type , boolean def ) { return cfg.getBoolean ( com.google.gerrit.server.MimeUtilFileTypeRegistry.SECTION_MIMETYPE , type , com.google.gerrit.server.MimeUtilFileTypeRegistry.KEY_SAFE , def ) ; }
private com.google.gerrit.client.change.RelatedChangesTab getTab ( ) { if ( ( relatedChangesTab ) == null ) { relatedChangesTab = createTab ( Resources.C.relatedChanges ( ) , Resources.C.relatedChangesTooltip ( ) ) ; } return relatedChangesTab ; }
, @ com.google.gerrit.acceptance.GerritConfig ( name = "suggest.fullTextSearchMaxMatches" , value = "2" ) } ) public void suggestReviewersFullTextSearchLimitMaxMatches ( ) throws java.lang.Exception { java.lang.String changeId = createChange ( ) . getChangeId ( ) ; java.util.List < com.google.gerrit.extensions.common.SuggestedReviewerInfo > reviewers = suggestReviewers ( changeId , "ser" , 3 ) ; com.google.common.truth.Truth.assertThat ( reviewers ) . hasSize ( 2 ) ; }
public static com.google.gerrit.index.query.Predicate < com.google.gerrit.server.account.AccountState > externalId ( java.lang.String externalId ) { return new com.google.gerrit.server.query.account.AccountPredicates.AccountPredicate ( com.google.gerrit.server.index.account.AccountField.EXTERNAL_ID , externalId ) ; }
public com.google.gerrit.extensions.api.changes.ChangeApi id ( java.lang.String project , int id ) throws com.google.gerrit.extensions.restapi.RestApiException { throw new com.google.gerrit.extensions.restapi.NotImplementedException ( ) ; }
public void testEventSentFailed ( ) throws java.lang.Exception { com.google.gerrit.server.events.Event event = setUpMocksForEvent ( com.ericsson.gerrit.plugins.highavailability.forwarder.rest.RestForwarderTest.FAILED , com.ericsson.gerrit.plugins.highavailability.forwarder.rest.RestForwarderTest.ERROR_MSG , com.ericsson.gerrit.plugins.highavailability.forwarder.rest.RestForwarderTest.DO_NOT_THROW_EXCEPTION ) ; com.google.common.truth.Truth.assertThat ( restForwarder.send ( event ) ) . isFalse ( ) ; }
public com.google.common.util.concurrent.ListenableFuture < java.util.List < com.google.gerrit.reviewdb.AccountProjectWatch > > byProject ( com.google.gerrit.reviewdb.Project.NameKey name ) { return com.google.common.util.concurrent.Futures.compose ( byProjectName.get ( name ) , com.google.gerrit.server.account.AccountProjectWatchCacheImpl.unpack ) ; }
private void initMacs ( final org.spearce.jgit.lib.RepositoryConfig cfg ) { setMacFactories ( com.google.gerrit.server.ssh.GerritSshDaemon.filter ( cfg , "mac" , new org.apache.sshd.common.mac.HMACMD5.Factory ( ) , new org.apache.sshd.common.mac.HMACSHA1.Factory ( ) , new org.apache.sshd.common.mac.HMACMD596.Factory ( ) , new org.apache.sshd.common.mac.HMACSHA196.Factory ( ) ) ) ; }
private java.lang.String reduceWildcard ( java.lang.String input ) { if ( input.endsWith ( "*" ) ) { wildcardBranch = true ; return input.substring ( 0 , input.indexOf ( "*" ) ) ; } else { wildcardBranch = false ; return input ; } }
private boolean canRestore ( com.google.gerrit.reviewdb.server.ReviewDb db ) throws com.google.gwtorm.server.OrmException { return ( canAbandon ( db ) ) && ( refControl.asForRef ( ) . testOrFalse ( RefPermission.CREATE_CHANGE ) ) ; }
public com.googlecode.prolog_cafe.lang.Term getMessageTerm ( ) { com.googlecode.prolog_cafe.lang.Term [ ] args = new com.googlecode.prolog_cafe.lang.Term [ ] { com.googlecode.prolog_cafe.lang.SymbolTerm.create ( message ) } ; return new com.googlecode.prolog_cafe.lang.StructureTerm ( com.googlecode.prolog_cafe.exceptions.InternalException.INTERNAL_ERROR , args ) ; }
public static com.google.gerrit.extensions.client.GeneralPreferencesInfo readDefaultGeneralPreferences ( org.eclipse.jgit.lib.Repository allUsersRepo ) throws java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { return com.google.gerrit.server.account.PreferencesConfig.parseGeneralPreferences ( com.google.gerrit.server.account.PreferencesConfig.readDefaultConfig ( allUsersRepo ) , null , null ) ; }
private java.util.concurrent.ScheduledThreadPoolExecutor getExecutor ( ) { com.google.gerrit.server.git.QueueProvider.QueueType qt = capabilityFactory.create ( user.get ( ) ) . getQueueType ( ) ; return queue.getQueue ( qt ) ; }
final native void setRevisionNumber ( int n ) ;
void operation ( java.lang.Runnable apply ) { cmA.operation ( ( ) -> { cmB.operation ( apply :: run ) ; } ) ; }
public static void getDefault ( com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.client.dashboards.DashboardInfo > callback ) { new com.google.gerrit.client.rpc.RestApi ( ( ( com.google.gerrit.client.dashboards.DashboardList.base ( project ) ) + "default" ) ) . addParameterTrue ( "inherited" ) . get ( callback ) ; }
public int getEffectiveMaxBatchChangesLimit ( com.google.gerrit.server.CurrentUser user ) { com.google.gerrit.server.account.CapabilityControl cap = user.getCapabilities ( ) ; if ( cap.hasExplicitRange ( com.google.gerrit.common.data.GlobalCapability.BATCH_CHANGES_LIMIT ) ) { return cap.getRange ( com.google.gerrit.common.data.GlobalCapability.BATCH_CHANGES_LIMIT ) . getMax ( ) ; } return systemMaxBatchChanges ; }
public void onSuccess ( final com.google.gerrit.client.info.GroupInfo result ) { addIncludeBox.setEnabled ( true ) ; addIncludeBox.setText ( "" ) ; includes.insert ( result ) ; }
public void onSuccess ( com.google.gerrit.client.info.ChangeInfo result ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.client.Dispatcher.toEditScreen ( new com.google.gerrit.reviewdb.client.PatchSet.Id ( result.legacyId ( ) , 1 ) , "project.config" ) ) ; }
public com.google.gerrit.extensions.common.ChangeInfo check ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return check.apply ( change ) . value ( ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot check change" , e ) ; } }
public static com.google.gerrit.reviewdb.client.Change newChange ( com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.reviewdb.client.Account.Id userId ) { return com.google.gerrit.testutil.TestChanges.newChange ( project , userId , com.google.gerrit.testutil.TestChanges.nextChangeId.getAndIncrement ( ) ) ; }
abstract java.lang.String buildCommand ( com.google.gerrit.httpd.raw.BuildSystem.Label l ) ;
javax.servlet.http.HttpServlet getPolyGerritUiIndexServlet ( @ com.google.inject.name.Named ( value = com.google.gerrit.httpd.raw.StaticModule.CACHE ) com.google.common.cache.Cache < java.nio.file.Path , com.google.gerrit.httpd.raw.ResourceServlet.Resource > cache ) { return new com.google.gerrit.httpd.raw.SingleFileServlet ( cache , polyGerritBasePath ( ) . resolve ( "index.html" ) , getPaths ( ) . isDev ( ) ) ; }
private java.lang.String createMyChange ( ) throws java.lang.Exception { com.google.gerrit.acceptance.PushOneCommit push = pushFactory.create ( db , user.getIdent ( ) , testRepo ) ; return push.to ( "refs/for/master" ) . getChangeId ( ) ; }
public void returnDefaultQueryforNullMap ( ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( queryMaker.formQueryFromRequestParameters ( null ) ) . isEqualTo ( defaultQuery ) ; }
protected void onInitUI ( ) { super . onInitUI ( ) ; panel = new com.google.gerrit.client.account.ContactPanelShort ( ) { @ java.lang.Override void display ( ) { com.google.gerrit.client.account.MyContactInformationScreen.this . display ( ) ; } } ; add ( panel ) ; }
private java.lang.String link ( final com.google.gerrit.client.reviewdb.Project item ) { return com.google.gerrit.client.Link.toProjectAdmin ( item.getId ( ) , ProjectAdminScreen.INFO_TAB ) ; }
private com.google.gerrit.client.diff.SideBySide2.DisplaySide getSideFromCm ( net.codemirror.lib.CodeMirror cm ) { return cm == ( cmA ) ? com.google.gerrit.client.diff.SideBySide2.DisplaySide.A : com.google.gerrit.client.diff.SideBySide2.DisplaySide.B ; }
public static java.lang.String toChangeQuery ( java.lang.String query ) { return ( com.google.gerrit.common.PageLinks.QUERY ) + ( com.google.gwtorm.client.KeyUtil.encode ( query ) ) ; }
public void setGroups ( final java.util.Map < com.google.gerrit.client.reviewdb.AccountGroup.Id , com.google.gerrit.client.reviewdb.AccountGroup > g ) { groups = g ; }
public com.google.gerrit.server.query.change.ChangeDataSource getSource ( com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > p , int limit ) throws com.google.gerrit.server.query.QueryParseException ;
public java.lang.String onSubmit ( java.lang.String newCommitMessage , org.eclipse.jgit.revwalk.RevCommit original , org.eclipse.jgit.revwalk.RevCommit mergeTip , com.google.gerrit.reviewdb.client.Branch.NameKey destination ) { return ( newCommitMessage + "Custom: " ) + ( destination.get ( ) ) ; }
public void cancel ( ) { synchronized ( this ) { final com.google.gerrit.sshd.SshScope.Context old = sshScope.set ( context ) ; try { onExit ( com.google.gerrit.sshd.BaseCommand.STATUS_CANCEL ) ; } finally { sshScope.set ( old ) ; } } }
public final native net.codemirror.lib.Vim vim ( ) ;
public void onSuccess ( com.google.gerrit.client.VoidResult result ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChangeInEditMode ( revision.getParentKey ( ) ) ) ; }
public void onFailure ( java.lang.Throwable caught ) { enableButtons ( true ) ; super . onFailure ( caught ) ; }
public java.lang.String getMessage ( ) { org.eclipse.jgit.transport.RemoteRefUpdate refUpdate = result.getRemoteUpdate ( ref ) ; return message ( refUpdate ) ; }
protected boolean hasDifferences ( com.google.gerrit.common.data.PatchScript script ) { return ( hasEdits ( script ) ) || ( hasMeta ( script ) ) ; }
protected void preDisplay ( final com.google.gerrit.common.data.ProjectList result ) { createProjectLinkPanel.setVisible ( result.canCreateProject ( ) ) ; projects.display ( result.getProjects ( ) ) ; projects.finishDisplay ( ) ; }
public void renameGroup ( final com.google.gerrit.reviewdb.client.AccountGroup.Id groupId , final java.lang.String newName , final com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.GroupDetail > callback ) { renameGroupFactory.create ( groupId , newName ) . to ( callback ) ; }
public com.googlecode.prolog_cafe.lang.Term getMessageTerm ( ) { com.googlecode.prolog_cafe.lang.Term [ ] args = new com.googlecode.prolog_cafe.lang.Term [ ] { new com.googlecode.prolog_cafe.lang.JavaObjectTerm ( goal ) , new com.googlecode.prolog_cafe.lang.IntegerTerm ( argNo ) , new com.googlecode.prolog_cafe.lang.JavaObjectTerm ( e ) } ; return new com.googlecode.prolog_cafe.lang.StructureTerm ( com.googlecode.prolog_cafe.exceptions.JavaException.JAVA_ERROR , args ) ; }
public void onSuccess ( final com.google.gerrit.common.data.ProjectDetail result ) { enableForm ( result.canModifyAgreements , result.canModifyDescription , result.canModifyMergeType , result.canModifyState ) ; display ( result ) ; }
public void previous ( ) { com.google.common.truth.TruthJUnit.assume ( ) . that ( com.google.gerrit.testutil.IndexVersionsTest.SCHEMA_DEF.getPrevious ( ) ) . isNotNull ( ) ; com.google.common.truth.Truth.assertThat ( com.google.gerrit.testutil.IndexVersionsTest.get ( com.google.gerrit.testing.IndexVersions.PREVIOUS ) ) . containsExactly ( com.google.gerrit.testutil.IndexVersionsTest.SCHEMA_DEF.getPrevious ( ) . getVersion ( ) ) ; }
public com.google.gerrit.index.query.InternalQuery < T > noFields ( ) { queryProcessor.setRequestedFields ( com.google.common.collect.ImmutableSet.< java.lang.String > of ( ) ) ; return this ; }
public void onSuccess ( com.google.gerrit.client.rpc.NativeString user ) { com.google.gerrit.client.Gerrit.getUserAccount ( ) . username ( user.asString ( ) ) ; refreshHttpPassword ( ) ; }
public void updateRepo ( com.google.gerrit.server.update.RepoContext ctx ) throws java.io.IOException { ctx.addRefUpdate ( new org.eclipse.jgit.transport.ReceiveCommand ( oldId , newId , dest ) ) ; }
public void setHeader ( java.lang.String name , java.lang.String value ) throws javax.mail.MessagingException { if ( com.google.gerrit.server.mail.MimeMessage.MESSAGE_ID.equalsIgnoreCase ( name ) ) { messageID = value ; } else { super . setHeader ( name , value ) ; } }
public void evictProjectList ( ) throws java.lang.Exception { configureMocksFor ( Constants.PROJECT_LIST ) ; verifyResponseIsOK ( ) ; }
public void suggestReviewersMaxNbrSuggestions ( ) throws java.lang.Exception { java.lang.String changeId = createChange ( ) . getChangeId ( ) ; java.util.List < com.google.gerrit.extensions.common.SuggestedReviewerInfo > reviewers = suggestReviewers ( changeId , "user" , 5 ) ; com.google.common.truth.Truth.assertThat ( reviewers ) . hasSize ( 2 ) ; }
private static < T > com.google.common.util.concurrent.CheckedFuture < T , java.io.IOException > submit ( java.util.concurrent.Callable < T > task , com.google.common.util.concurrent.ListeningExecutorService executor ) { return com.google.common.util.concurrent.Futures.makeChecked ( com.google.common.util.concurrent.Futures.nonCancellationPropagating ( executor.submit ( task ) ) , com.google.gerrit.server.index.change.ChangeIndexer.MAPPER ) ; }
public boolean isVisible ( ) { return ( ( user.isInternalUser ( ) ) || ( canPerformOnAnyRef ( Permission.READ ) ) ) && ( ! ( isHidden ( ) ) ) ; }
public final native void setEdit ( com.google.gerrit.client.changes.ChangeInfo.EditInfo edit ) ;
public void addReviewerToWipChangeSingly ( ) throws java.lang.Exception { addReviewerToWipChange ( singly ( ) ) ; }
private static java.util.Properties readAttributes ( ) throws java.io.IOException { java.util.Properties attributes = new java.util.Properties ( ) ; try ( java.io.InputStream in = com.googlesource.gerrit.plugins.xdocs.formatter.AsciidoctorFormatter.class . getResourceAsStream ( "asciidoctor.properties" ) ) { attributes.load ( in ) ; } return attributes ; }
com.google.gerrit.server.CurrentUser getUser ( ) { return getControl ( ) . getUser ( ) ; }
private void review ( com.google.gerrit.acceptance.TestAccount account , java.lang.String changeId , com.google.gerrit.extensions.client.GeneralPreferencesInfo.EmailStrategy strategy ) throws java.lang.Exception { review ( account , changeId , strategy , null ) ; }
public void testLinkify_AngleBrackets1 ( ) { final com.google.gwtexpui.safehtml.client.SafeHtml o = com.google.gwtexpui.safehtml.client.SafeHtml_WikifyTest.html ( "A <http://go.here/> B" ) ; final com.google.gwtexpui.safehtml.client.SafeHtml n = o.wikify ( ) ; com.google.common.truth.Truth.assertThat ( o ) . isNotSameAs ( n ) ; com.google.common.truth.Truth.assertThat ( n.asString ( ) ) . isEqualTo ( "<p>A &lt;<a href=\"http://go.here/\" target=\"_blank\">http://go.here/</a>&gt; B</p>" ) ; }
public static void markPrivate ( int id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwt.core.client.JavaScriptObject > cb ) { com.google.gerrit.client.changes.ChangeApi.change ( id ) . view ( "private" ) . post ( com.google.gerrit.client.changes.ChangeApi.PrivateInput.create ( ) , cb ) ; }
public static com.google.gerrit.client.rpc.RestApi editWithCommands ( int id ) { return com.google.gerrit.client.changes.ChangeApi.edit ( id ) . addParameterTrue ( "download-commands" ) ; }
public static com.google.gerrit.testutil.InMemoryDatabase newDatabase ( com.google.gerrit.lifecycle.LifecycleManager lifecycle ) { com.google.inject.Injector injector = com.google.inject.Guice.createInjector ( new com.google.gerrit.testutil.InMemoryModule ( ) ) ; lifecycle.add ( injector ) ; return injector.getInstance ( com.google.gerrit.testutil.InMemoryDatabase.class ) ; }
private com.cisco.gerrit.plugins.slack.config.ProjectConfig getConfig ( boolean publishOnPatchSetCreated , boolean ignoreUnchangedPatchSet ) throws java.lang.Exception { return getConfig ( "^WIP.*" , publishOnPatchSetCreated , ignoreUnchangedPatchSet , true , true ) ; }
public void onValueChange ( com.google.gwt.event.logical.shared.ValueChangeEvent < java.lang.Boolean > event ) { updateDeleteButton ( ) ; }
public void run ( ) { cmB.operation ( new java.lang.Runnable ( ) { @ java.lang.Override public void run ( ) { for ( java.lang.Runnable thunk : list ) { thunk.run ( ) ; } } } ) ; }
com.google.gerrit.server.change.PatchSetInserter create ( org.eclipse.jgit.lib.Repository git , org.eclipse.jgit.revwalk.RevWalk revWalk , com.google.gerrit.server.project.RefControl refControl , com.google.gerrit.reviewdb.client.Change change , org.eclipse.jgit.revwalk.RevCommit commit ) ;
protected void movePointerTo ( final int row , final boolean scroll ) { super . movePointerTo ( row , scroll ) ; onMovePointerTo ( getRowItem ( row ) . name ( ) ) ; }
public void testDeleteOneExisting ( ) throws com.google.gwtorm.server.OrmException , java.sql.SQLException { java.sql.PreparedStatement delete = stubStatementWithUpdateCounts ( com.google.gwtorm.jdbc.TestJdbcAccess.DELETE , 1 ) ; createClassUnderTest ( ) . delete ( oneRow ) ; com.google.gwtorm.jdbc.TestJdbcAccess.assertUsedBatchingOnly ( delete ) ; }
private PatchSet.Id nextPatchSetId ( com.google.gerrit.server.project.ChangeControl ctl ) throws java.lang.Exception { return com.google.gerrit.server.ChangeUtil.nextPatchSetId ( testRepo.getRepository ( ) , ctl.getChange ( ) . currentPatchSetId ( ) ) ; }
protected < T > T buildJson ( java.lang.String path , com.google.gson.reflect.TypeToken < T > typeOfT , java.lang.String additionalQueryString ) throws java.lang.Exception { return com.google.gitiles.ServletTest.newGson ( ) . fromJson ( buildJsonRaw ( path , additionalQueryString ) , typeOfT.getType ( ) ) ; }
public com.google.common.collect.ImmutableList < com.google.gerrit.common.data.PermissionRule > getPermission ( java.lang.String permissionName ) { com.google.common.collect.ImmutableList < com.google.gerrit.common.data.PermissionRule > r = permissions.get ( permissionName ) ; return r != null ? r : com.google.common.collect.ImmutableList.< com.google.gerrit.common.data.PermissionRule > of ( ) ; }
private int getInt ( final org.spearce.jgit.transport.RemoteConfig rc , final org.spearce.jgit.lib.Config cfg , final java.lang.String name , final int defValue ) { return cfg.getInt ( "remote" , rc.getName ( ) , name , defValue ) ; }
public final int context ( ) { return get ( "context" , 10 ) ; }
com.google.gerrit.server.securestore.SecureStore getSecureStore ( ) { return secureStore ; }
static org.apache.lucene.index.Term intTerm ( java.lang.String name , int value ) { org.apache.lucene.util.BytesRefBuilder builder = new org.apache.lucene.util.BytesRefBuilder ( ) ; org.apache.lucene.util.NumericUtils.intToPrefixCoded ( value , 0 , builder ) ; return new org.apache.lucene.index.Term ( name , builder.get ( ) ) ; }
final void setCreateNewChangeForAllNotInTarget ( com.google.gerrit.extensions.client.InheritableBoolean v ) { setCreateNewChangeForAllNotInTargetRaw ( v.name ( ) ) ; }
public void onSuccess ( com.google.gerrit.client.changes.ChangeInfo result ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( result.legacyId ( ) ) ) ; hide ( ) ; }
public void run ( ) { header.setReviewed ( ( ! ( header.isReviewed ( ) ) ) ) ; }
private boolean failAuthentication ( com.google.gerrit.httpd.ProjectBasicAuthFilter.Response rsp , java.lang.String username , javax.servlet.http.HttpServletRequest req ) throws java.io.IOException { com.google.gerrit.httpd.ProjectBasicAuthFilter.log.warn ( ( ( com.google.gerrit.httpd.ProjectBasicAuthFilter.authenticationFailedMsg ( username , req ) ) + ": password does not match the one stored in Gerrit" ) , username ) ; rsp.sendError ( javax.servlet.http.HttpServletResponse.SC_UNAUTHORIZED ) ; return false ; }
public com.google.gerrit.reviewdb.server.ChangeAccess changes ( ) { throw new com.google.gerrit.testing.DisabledReviewDb.Disabled ( ) ; }
public java.lang.String getCommand ( java.lang.String url , java.lang.String ref ) { return ( ( ( "git fetch " + url ) + " " ) + ref ) + " && git format-patch -1 --stdout FETCH_HEAD" ; }
public static < T > com.google.gerrit.client.rpc.CallbackGroup.Callback < T > emptyCallback ( ) { return new com.google.gerrit.client.rpc.CallbackGroup.Callback < T > ( ) { @ java.lang.Override public void onSuccess ( T result ) { } @ java.lang.Override public void onFailure ( java.lang.Throwable err ) { } } ; }
public void updateRepoImpl ( com.google.gerrit.server.git.BatchUpdate.RepoContext ctx ) throws com.google.gerrit.server.git.IntegrationException { toMerge.setStatusCode ( CommitMergeStatus.CLEAN_MERGE ) ; com.google.gerrit.server.git.CodeReviewCommit newCommit = amendGitlink ( toMerge ) ; args.mergeTip.moveTipTo ( newCommit , toMerge ) ; acceptMergeTip ( args.mergeTip ) ; }
public static org.eclipse.jgit.lib.Config defaultConfig ( ) { org.eclipse.jgit.lib.Config cfg = new org.eclipse.jgit.lib.Config ( ) ; cfg.setInt ( "index" , null , "maxPages" , 10 ) ; return cfg ; }
public void testInsertOne ( ) throws com.google.gwtorm.server.OrmException , java.sql.SQLException { java.sql.PreparedStatement insert = stubStatementWithUpdateCounts ( com.google.gwtorm.jdbc.AbstractTestJdbcAccess.INSERT , 1 ) ; classUnderTest.insert ( oneRow ) ; assertCorrectUpdating ( insert , 1 ) ; }
private static boolean isGerritServer ( com.google.gerrit.client.account.AccountInfo account ) { return ( ( account._accountId ( ) ) == 0 ) && ( Util.C.messageNoAuthor ( ) . equals ( account.name ( ) ) ) ; }
public void add ( com.google.gerrit.reviewdb.client.Project.NameKey project , java.lang.String command ) { commands.put ( project , com.google.common.base.Strings.nullToEmpty ( command ) ) ; }
public void upsert ( java.lang.Iterable < com.google.gerrit.reviewdb.client.Change > instances ) { throw new java.lang.UnsupportedOperationException ( ( "do not call upsert; existing changes are updated automatically," + " or use InsertChangeOp for insertion" ) ) ; }
public void onFailure ( java.lang.Throwable caught ) { cbox.setEnabled ( true ) ; info.notify ( type , oldVal ) ; cbox.setValue ( oldVal ) ; super . onFailure ( caught ) ; }
private boolean canUpload ( ) { return ( projectControl.controlForRef ( ( "refs/for/" + ( refName ) ) ) . canPerform ( Permission.PUSH ) ) && ( getProjectControl ( ) . getProject ( ) . getState ( ) . permitsWrite ( ) ) ; }
void restore ( com.googlecode.prolog_cafe.lang.Prolog engine ) { engine.r1 = this . r1 ; engine.r2 = this . r2 ; }
public void onSuccess ( com.google.gwt.core.client.JavaScriptObject msg ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( changeId ) ) ; hide ( ) ; }
void suggestChangeReviewer ( com.google.gerrit.reviewdb.client.Change.Id changeId , java.lang.String query , int limit , com.google.gwtjsonrpc.common.AsyncCallback < java.util.List < com.google.gerrit.common.data.ReviewerInfo > > callback ) ;
public com.google.common.collect.ImmutableMap < com.google.gerrit.reviewdb.client.PatchSet.Id , com.google.gerrit.reviewdb.client.PatchSet > getPatchSets ( ) { if ( ( patchSets ) == null ) { patchSets = com.google.common.collect.ImmutableMap.copyOf ( com.google.common.collect.Maps.transformValues ( state.patchSets ( ) , PatchSet :: new ) ) ; } return patchSets ; }
static com.google.inject.Module module ( ) { return new com.google.gerrit.server.cache.CacheModule ( ) { protected void configure ( ) { com.google.gerrit.extensions.registration.DynamicSet.bind ( binder ( ) , com.googlesource.gerrit.plugins.quota.UsageDataEventCreator.class ) . to ( com.googlesource.gerrit.plugins.quota.RepoSizeEventCreator.class ) ; } } ; }
public void parseReviewer ( ) throws java.lang.Exception { assertParseSucceeds ( ( "Update change\n" + ( ( ( ( ( ( "\n" + "Branch: refs/heads/master\n" ) + "Change-id: I577fb248e474018276351785930358ec0450e9f7\n" ) + "Patch-set: 1\n" ) + "Reviewer: Change Owner <1@gerrit>\n" ) + "CC: Other Account <2@gerrit>\n" ) + "Subject: This is a test change\n" ) ) ) ; assertParseFails ( "Update change\n\nPatch-set: 1\nReviewer: 1@gerrit\n" ) ; }
private static void checkRequiredMenuItemField ( java.lang.String value , java.lang.String name ) throws com.google.gerrit.extensions.restapi.BadRequestException { if ( ( value == null ) || ( value.trim ( ) . isEmpty ( ) ) ) { throw new com.google.gerrit.extensions.restapi.BadRequestException ( ( name + " for menu item is required" ) ) ; } }
void patchScript ( com.google.gerrit.client.reviewdb.Patch.Key key , com.google.gerrit.client.reviewdb.PatchSet.Id a , com.google.gerrit.client.reviewdb.PatchSet.Id b , int context , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.data.PatchScript > callback ) ;
private void publishEvent ( com.google.gerrit.server.events.Event event ) { session.publish ( gson.toJson ( event ) ) ; }
public void onExit ( int rc , java.lang.String exitMessage ) { exit.onExit ( translateExit ( rc ) , exitMessage ) ; log ( rc ) ; }
public void branchAlreadyExists_Conflict ( ) throws java.lang.Exception { assertCreateSucceeds ( testBranch ) ; assertCreateFails ( testBranch , com.google.gerrit.extensions.restapi.ResourceConflictException.class ) ; }
protected void configure ( ) { bind ( java.nio.file.Path.class ) . annotatedWith ( com.google.gerrit.server.config.SitePath.class ) . toInstance ( sitePath ) ; bind ( com.google.gerrit.server.config.SitePaths.class ) ; }
public void onValueChange ( com.google.gwt.event.logical.shared.ValueChangeEvent < java.lang.String > event ) { com.google.gerrit.client.Gerrit.dispatchHistoryHooks ( event.getValue ( ) ) ; }
public void batchAbandon ( com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.server.CurrentUser user , java.util.Collection < com.google.gerrit.server.project.ChangeControl > controls , java.lang.String msgTxt ) throws com.google.gerrit.extensions.restapi.RestApiException , com.google.gerrit.server.git.UpdateException { batchAbandon ( project , user , controls , msgTxt , NotifyHandling.ALL , com.google.common.collect.ImmutableListMultimap.of ( ) ) ; }
java.util.Collection < com.google.gerrit.common.data.GroupReference > suggest ( java.lang.String name , @ javax.annotation.Nullable com.google.gerrit.server.project.ProjectControl project ) ;
private static org.eclipse.jgit.revwalk.RevCommit lookupCommit ( org.eclipse.jgit.lib.Repository repository , com.google.gerrit.reviewdb.client.PatchSet patchSet ) throws java.io.IOException { org.eclipse.jgit.lib.ObjectId patchSetCommitId = com.google.gerrit.server.edit.ChangeEditModifier.getPatchSetCommitId ( patchSet ) ; try ( org.eclipse.jgit.revwalk.RevWalk revWalk = new org.eclipse.jgit.revwalk.RevWalk ( repository ) ) { return revWalk.parseCommit ( patchSetCommitId ) ; } }
public boolean isValid ( ) { return ( seq ) > 0 ; }
private static java.util.Optional < org.eclipse.jgit.lib.ObjectId > metaId ( org.eclipse.jgit.lib.ObjectId id ) { return java.util.Optional.of ( id ) ; }
public void createNewDraftChangeNotAllowed ( ) throws java.lang.Exception { com.google.common.truth.TruthJUnit.assume ( ) . that ( isAllowDrafts ( ) ) . isFalse ( ) ; com.google.gerrit.extensions.common.ChangeInput ci = newChangeInput ( ChangeStatus.DRAFT ) ; assertCreateFails ( ci , com.google.gerrit.extensions.restapi.MethodNotAllowedException.class , "draft workflow is disabled" ) ; }
public com.google.gerrit.server.change.ChangeJson.ChangeInfo format ( com.google.gerrit.reviewdb.client.Change.Id id ) throws com.google.gwtorm.server.OrmException { return format ( changeDataFactory.create ( db.get ( ) , id ) ) ; }
static com.google.gerrit.client.projects.ProjectApi.ConfigParameterValueMap create ( ) { return createObject ( ) . cast ( ) ; }
public com.google.gerrit.extensions.restapi.Response < ? > apply ( com.google.gerrit.server.change.ChangeEditResource rsrc , com.google.gerrit.server.change.ChangeEdits.Put.Input input ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.extensions.restapi.ResourceConflictException , com.google.gerrit.server.permissions.PermissionBackendException , com.google.gwtorm.server.OrmException , java.io.IOException { return apply ( rsrc.getChangeResource ( ) , rsrc.getPath ( ) , input.content ) ; }
public void validKey ( ) throws java.lang.Exception { assertNoProblems ( com.google.gerrit.gpg.testutil.TestKeys.validKeyWithoutExpiration ( ) ) ; }
private com.google.gerrit.common.data.SubmitTypeRecord typeError ( java.lang.String err ) { return typeError ( err , null ) ; }
public boolean allowsEdit ( final com.google.gerrit.reviewdb.Account.FieldName field ) { switch ( field ) { case FULL_NAME : return ( accountFullName ) == null ; case USER_NAME : return ( accountSshUserName ) == null ; default : return true ; } }
private static java.util.Optional < org.eclipse.jgit.lib.ObjectId > noMetaId ( ) { return java.util.Optional.empty ( ) ; }
private void setDefaultFields ( javax.servlet.FilterConfig filterConfig ) throws javax.servlet.ServletException { setDefaultConfig ( filterConfig ) ; setDefaultRenderer ( filterConfig ) ; setDefaultUrls ( ) ; setDefaultAccess ( ) ; setDefaultVisibilityCache ( ) ; setDefaultTimeCache ( ) ; setDefaultBlameCache ( ) ; setDefaultGitwebRedirect ( ) ; setDefaultDateFormatterBuilder ( ) ; }
public void removeFromNonExistingGroup_NotFound ( ) throws java.lang.Exception { try { gApi.groups ( ) . id ( "non-existing" ) . removeMembers ( "admin" ) ; } catch ( com.google.gerrit.extensions.restapi.ResourceNotFoundException expected ) { } }
com.google.gwtorm.client.ResultSet < com.google.gerrit.reviewdb.PatchLineComment > publishedByPatchSet ( com.google.gerrit.reviewdb.PatchSet.Id patchset ) throws com.google.gwtorm.client.OrmException ;
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { submitOnSelection = false ; if ( ( event.getCharCode ( ) ) == ( com.google.gwt.event.dom.client.KeyCodes.KEY_ENTER ) ) { if ( nameTxt.isSuggestionListShowing ( ) ) { submitOnSelection = true ; } else { doAdd ( ) ; } } }
public java.util.List < com.google.gerrit.extensions.common.GroupInfo > includedGroups ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return listGroups.apply ( rsrc ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot list included groups" , e ) ; } }
public com.google.gerrit.server.project.ChangeControl forUser ( final com.google.gerrit.server.CurrentUser who ) { return new com.google.gerrit.server.project.ChangeControl ( approvalsUtil , getRefControl ( ) . forUser ( who ) , getChange ( ) ) ; }
protected void setDownloadHeaders ( javax.servlet.http.HttpServletRequest req , javax.servlet.http.HttpServletResponse res , java.lang.String filename , java.lang.String contentType ) { res.setContentType ( contentType ) ; res.setHeader ( com.google.common.net.HttpHeaders.CONTENT_DISPOSITION , ( "attachment; filename=" + filename ) ) ; setCacheHeaders ( req , res ) ; }
final native void addMember ( java.lang.String n ) ;
public void evict ( com.google.gerrit.reviewdb.client.AccountGroup.UUID groupUuid , com.google.gerrit.reviewdb.client.AccountGroup.Id groupId , com.google.gerrit.reviewdb.client.AccountGroup.NameKey groupName ) { }
protected void configure ( ) { bind ( com.google.gerrit.httpd.GerritOptions.class ) . toInstance ( new com.google.gerrit.httpd.GerritOptions ( headless ) ) ; if ( test ) { bind ( com.google.gerrit.server.securestore.SecureStore.class ) . toProvider ( com.google.gerrit.server.securestore.SecureStoreProvider.class ) ; } }
public void invalidateAll ( ) { for ( java.nio.file.Path path : listFiles ( ) ) { deleteFile ( path ) ; } }
public boolean handles ( com.google.gerrit.reviewdb.client.AccountGroup.UUID uuid ) { return org.eclipse.jgit.lib.ObjectId.isId ( uuid.get ( ) ) ; }
public com.google.gerrit.server.change.ChangeEdits.Post post ( com.google.gerrit.server.change.ChangeResource parent ) throws com.google.gerrit.extensions.restapi.RestApiException { return post ; }
public com.google.gerrit.extensions.common.AccountInfo apply ( com.google.gerrit.server.account.AccountResource rsrc ) throws com.google.gwtorm.server.OrmException { com.google.gerrit.server.account.AccountLoader loader = infoFactory.create ( true ) ; com.google.gerrit.extensions.common.AccountInfo info = loader.get ( rsrc.getUser ( ) . getAccountId ( ) ) ; loader.fill ( ) ; return info ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { if ( topic.canEdit ( ) ) { topic.onEdit ( ) ; } }
public < I > com.google.gerrit.server.index.FieldDef < I , java.lang.Iterable < T > > buildRepeatable ( com.google.gerrit.server.index.FieldDef.GetterWithArgs < I , java.lang.Iterable < T > > getter ) { return new com.google.gerrit.server.index.FieldDef ( name , type , stored , true , getter ) ; }
private static com.google.gerrit.extensions.auth.oauth.OAuthUserInfo getAsOAuthUserInfo ( java.lang.String username ) { return new com.google.gerrit.extensions.auth.oauth.OAuthUserInfo ( ( ( com.google.gerrit.server.account.externalids.ExternalId.SCHEME_EXTERNAL ) + username ) , username , null , null , null ) ; }
public void noDate ( ) throws java.lang.Exception { queryMaker.formQueryFromRequestParameters ( com.google.common.collect.ImmutableMap.< java.lang.String , java.lang.String > of ( ) ) ; }
boolean visibleForReplication ( ) { return ( ( user ) instanceof com.google.gerrit.server.ReplicationUser ) && ( ( ( com.google.gerrit.server.ReplicationUser ) ( user ) ) . isEverythingVisible ( ) ) ; }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > putAsync ( final K key , final V value ) { return cache.putAsync ( wrapKey ( key ) , wrapValue ( value ) ) ; }
protected java.lang.String getName ( ) { return com.google.common.base.MoreObjects.firstNonNull ( name , com.google.gerrit.testutil.ConfigSuite.DEFAULT ) ; }
public void onFailure ( final java.lang.Throwable caught ) { text.setReadOnly ( false ) ; save.setEnabled ( true ) ; cancel.setEnabled ( true ) ; discard.setEnabled ( true ) ; super . onFailure ( caught ) ; }
private org.eclipse.jgit.revwalk.RevCommit parseBody ( org.eclipse.jgit.revwalk.RevCommit c ) throws java.io.IOException { testRepo.getRevWalk ( ) . parseBody ( c ) ; return c ; }
private static com.google.gerrit.index.QueryOptions options ( int start , int limit ) { return com.google.gerrit.server.index.change.IndexedChangeQuery.createOptions ( com.google.gerrit.server.index.change.ChangeIndexRewriterTest.CONFIG , start , limit , com.google.common.collect.ImmutableSet.< java.lang.String > of ( ) ) ; }
void onDeleteEdit ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { if ( com.google.gwt.user.client.Window.confirm ( Resources.C.deleteChangeEdit ( ) ) ) { com.google.gerrit.client.change.EditActions.deleteEdit ( changeId , publishEdit , rebaseEdit , deleteEdit ) ; } }
public boolean updateChange ( com.google.gerrit.server.git.BatchUpdate.ChangeContext ctx ) { change = ctx.getChange ( ) ; return false ; }
java.lang.Runnable openCloseAll ( net.codemirror.lib.CodeMirror cm ) { return ( ) -> { com.google.gerrit.client.diff.CommentGroup group = getCommentGroupOnActiveLine ( cm ) ; if ( group != null ) { group.openCloseAll ( ) ; } } ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { header.toggleReviewed ( ) . run ( ) ; }
com.googlesource.gerrit.plugins.webhooks.PostTask create ( com.google.gerrit.server.events.ProjectEvent event , com.googlesource.gerrit.plugins.webhooks.RemoteConfig remote ) ;
public void evictByUsername ( java.lang.String username ) { byName.remove ( new com.google.gerrit.reviewdb.Account.Username ( username ) ) ; }
public abstract com.google.common.collect.ImmutableList < com.google.gerrit.server.mail.Address > cc ( ) ;
private static void assertAdded ( java.lang.String expectedNewName , com.google.gerrit.server.patch.PatchListEntry e ) { com.google.gerrit.acceptance.server.change.PatchListCacheIT.assertName ( expectedNewName , e ) ; org.junit.Assert.assertEquals ( ChangeType.ADDED , e.getChangeType ( ) ) ; }
void setOpen ( boolean open ) { resizePaddingWidget ( ) ; setRangeHighlight ( open ) ; }
private java.lang.String readFile ( java.io.File f ) throws java.io.IOException { return f.exists ( ) ? com.google.common.io.Files.toString ( f , java.nio.charset.StandardCharsets.UTF_8 ) : null ; }
public void onSuccess ( com.google.gerrit.client.diff.DiffInfo info ) { new net.codemirror.lib.ModeInjector ( ) . add ( getContentType ( info.meta_a ( ) ) ) . add ( getContentType ( info.meta_b ( ) ) ) . inject ( com.google.gerrit.client.rpc.CallbackGroup.< java.lang.Void > emptyCallback ( ) ) ; }
public java.io.InputStream getInputStream ( com.google.gerrit.server.plugins.PluginEntry entry ) throws java.io.IOException { throw new java.nio.file.NoSuchFileException ( "Empty plugin" ) ; }
private static java.nio.file.Path getSourceRootOrNull ( ) { try { return com.google.gerrit.launcher.GerritLauncher.resolveInSourceRoot ( "." ) ; } catch ( java.io.FileNotFoundException e ) { return null ; } }
protected void preDisplay ( com.google.gerrit.client.projects.ConfigInfoCache.Entry result ) { send.setEnabled ( true ) ; commentLinkProcessor = result.getCommentLinkProcessor ( ) ; setTheme ( result.getTheme ( ) ) ; displayScreen ( ) ; }
public com.google.gerrit.server.diff.PatchListEntry get ( java.lang.String fileName ) { final int index = search ( fileName ) ; return 0 <= index ? patches [ index ] : com.google.gerrit.server.diff.PatchListEntry.empty ( fileName ) ; }
public void defaultDashboardDoesNotExist ( ) throws java.lang.Exception { exception.expect ( com.google.gerrit.extensions.restapi.ResourceNotFoundException.class ) ; gApi.projects ( ) . name ( project.get ( ) ) . defaultDashboard ( ) . get ( ) ; }
public void delete ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { deleteDraft.apply ( revision , null ) ; } catch ( com.google.gerrit.server.update.UpdateException | com.google.gwtorm.server.OrmException | com.google.gerrit.server.permissions.PermissionBackendException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot delete draft ps" , e ) ; } }
public com.google.gerrit.reviewdb.client.Change get ( com.google.gerrit.reviewdb.client.Change.Id id ) throws com.google.gwtorm.server.OrmException { throw new java.lang.UnsupportedOperationException ( com.google.gerrit.reviewdb.server.DisabledChangesReviewDbWrapper.MSG ) ; }
protected java.util.Map < com.google.gerrit.reviewdb.client.Account.Id , com.google.gerrit.server.IdentifiedUser > createValue ( com.googlecode.prolog_cafe.lang.Prolog engine ) { return new java.util.HashMap < > ( ) ; }
public com.google.gerrit.extensions.conditions.BooleanCondition getEnabledCondition ( ) { return com.google.gerrit.extensions.conditions.BooleanCondition.and ( enabled , visible ) ; }
public boolean allRefsAreVisible ( java.util.Set < java.lang.String > ignore ) { return ( ( user ) instanceof com.google.gerrit.server.InternalUser ) || ( canPerformOnAllRefs ( Permission.READ , ignore ) ) ; }
public java.util.Set < com.google.gerrit.reviewdb.client.Account.Id > starredBy ( ) throws com.google.gwtorm.server.OrmException { if ( ( starredByUser ) == null ) { starredByUser = com.google.common.base.Preconditions.checkNotNull ( starredChangesUtil ) . byChange ( legacyId , StarredChangesUtil.DEFAULT_LABEL ) ; } return starredByUser ; }
private boolean failAuthentication ( com.google.gerrit.httpd.ProjectBasicAuthFilter.Response rsp , java.lang.String username ) throws java.io.IOException { com.google.gerrit.httpd.ProjectBasicAuthFilter.log.warn ( "Authentication failed for {}: password does not match the one stored in Gerrit" , username ) ; rsp.sendError ( javax.servlet.http.HttpServletResponse.SC_UNAUTHORIZED ) ; return false ; }
protected void configureServlets ( ) { install ( new com.ericsson.gerrit.plugins.highavailability.forwarder.rest.RestForwarderServletModule ( ) ) ; install ( new com.ericsson.gerrit.plugins.highavailability.health.HealthServletModule ( ) ) ; if ( config.websession ( ) . synchronize ( ) ) { install ( new com.ericsson.gerrit.plugins.highavailability.websession.file.FileBasedWebsessionModule ( ) ) ; } }
private static int toParentNum ( java.lang.String parentToken ) { try { int n = java.lang.Integer.parseInt ( parentToken ) ; if ( n < 0 ) { return - n ; } return 0 ; } catch ( java.lang.NumberFormatException e ) { return 0 ; } }
public com.google.gerrit.reviewdb.client.AccountGeneralPreferences.CommentVisibilityStrategy getCommentVisibilityStrategy ( ) { if ( ( commentVisibilityStrategy ) == null ) { return com.google.gerrit.reviewdb.client.AccountGeneralPreferences.CommentVisibilityStrategy.EXPAND_RECENT ; } return com.google.gerrit.reviewdb.client.AccountGeneralPreferences.CommentVisibilityStrategy.valueOf ( commentVisibilityStrategy ) ; }
void setWidget ( net.codemirror.lib.LineWidget widget ) { this . widget = widget ; addStyleName ( style.isLineWidget ( ) ) ; }
public void setHeader ( java.lang.String name , java.lang.String value ) { headers.removeAll ( name.toLowerCase ( ) ) ; addHeader ( name , value ) ; }
java.lang.String needApproval ( java.lang.String categoryName , java.lang.String value , java.lang.String valueName ) ;
public void setUp ( ) throws java.lang.Exception { java.lang.String name = name ( "user42" ) ; user42 = accountCreator.create ( name , ( name + "@example.com" ) , "User 42" ) ; }
public com.google.gerrit.server.WebLinks get ( ) { com.google.gerrit.server.WebLinks webLinks = new com.google.gerrit.server.WebLinks ( patchSetLinks , projectLinks , branchLinks ) ; return webLinks ; }
public final native com.google.gerrit.client.rpc.NativeMap < com.google.gerrit.client.rpc.NativeMap < com.google.gerrit.client.projects.ConfigInfo.ConfigParameterInfo > > pluginConfig ( ) ;
private static native java.lang.String toString ( double utcMilli ) ;
private com.google.gerrit.httpd.resources.Resource getAsHtmlResource ( java.lang.String html , int lastModified ) { return new com.google.gerrit.httpd.resources.SmallResource ( html.getBytes ( java.nio.charset.StandardCharsets.UTF_8 ) ) . setContentType ( "text/html" ) . setCharacterEncoding ( java.nio.charset.StandardCharsets.UTF_8.name ( ) ) . setLastModified ( lastModified ) ; }
public static < T extends com.google.gwt.core.client.JavaScriptObject , M extends com.google.gerrit.client.rpc.NativeMap < T > > com.google.gwt.user.client.rpc.AsyncCallback < M > copyKeysIntoChildren ( com.google.gwt.user.client.rpc.AsyncCallback < M > callback ) { return com.google.gerrit.client.rpc.NativeMap.copyKeysIntoChildren ( "name" , callback ) ; }
private static void assertName ( java.lang.String expectedNewName , com.google.gerrit.server.patch.PatchListEntry e ) { com.google.common.truth.Truth.assertThat ( e.getNewName ( ) ) . isEqualTo ( expectedNewName ) ; com.google.common.truth.Truth.assertThat ( e.getOldName ( ) ) . isNull ( ) ; }
private java.lang.String getReplyCommentName ( ) { return "savedReplyComment-" + ( com.google.gerrit.common.PageLinks.toChangeId ( project , changeId ) ) ; }
public final void setConfiguredValue ( com.google.gerrit.extensions.common.InheritableBoolean v ) { setConfiguredValueRaw ( v.name ( ) ) ; }
public com.google.gerrit.server.project.ProjectState getAllProjects ( ) { return get ( allProjectsName ) ; }
private void assertCanUpdate ( java.lang.String ref , com.google.gerrit.server.project.ProjectControl u ) { boolean update = u.asForProject ( ) . ref ( ref ) . testOrFalse ( RefPermission.UPDATE ) ; com.google.common.truth.Truth.assertThat ( update ) . named ( ( "can update " + ref ) ) . isTrue ( ) ; }
private static java.lang.String status ( com.google.gerrit.reviewdb.client.Change.Status status ) { switch ( status ) { case ABANDONED : return "status:abandoned" ; case MERGED : return "status:merged" ; case DRAFT : case NEW : default : return "status:open" ; } }
public void addOption ( com.google.gerrit.extensions.client.ListGroupsOption o ) { options.add ( o ) ; }
public com.google.gerrit.server.change.CommentInfo apply ( com.google.gerrit.server.change.CommentResource rsrc ) throws com.google.gwtorm.server.OrmException { com.google.gerrit.server.account.AccountLoader accountLoader = accountLoaderFactory.create ( true ) ; com.google.gerrit.server.change.CommentInfo ci = new com.google.gerrit.server.change.CommentInfo ( rsrc.getComment ( ) , accountLoader ) ; accountLoader.fill ( ) ; return ci ; }
public void createTempDirectory ( ) throws java.lang.Exception { sitePath = com.google.gerrit.testutil.TempFileUtil.createTempDirectory ( ) ; }
protected void configure ( ) { com.google.gerrit.extensions.registration.DynamicSet.bind ( binder ( ) , com.google.gerrit.extensions.events.GitReferenceUpdatedListener.class ) . to ( com.googlesource.gerrit.plugins.refprotection.RefUpdateListener.class ) ; requestStaticInjection ( com.googlesource.gerrit.plugins.refprotection.BackupRef.class ) ; }
public final void dateFormat ( com.google.gerrit.extensions.client.GeneralPreferencesInfo.DateFormat f ) { dateFormatRaw ( ( f != null ? f.toString ( ) : null ) ) ; }
public void setPatchSets ( java.util.Collection < com.google.gerrit.reviewdb.client.PatchSet > patchSets ) { this . currentPatchSet = null ; this . patchSets = patchSets ; }
public void getDiffPreferences ( ) throws java.lang.Exception { com.google.gerrit.extensions.client.DiffPreferencesInfo result = gApi.config ( ) . server ( ) . getDefaultDiffPreferences ( ) ; com.google.gerrit.acceptance.AssertUtil.assertPrefs ( result , com.google.gerrit.extensions.client.DiffPreferencesInfo.defaults ( ) ) ; }
public void index ( com.google.gerrit.server.query.change.ChangeData cd ) throws java.io.IOException { indexAsync ( cd ) . checkedGet ( ) ; }
void initProjectState ( com.google.inject.Provider < com.google.gerrit.reviewdb.ReviewDb > db , com.google.gerrit.server.project.ProjectCache projectCache ) throws com.google.gwtorm.client.OrmException { if ( ( projectState ) == null ) { projectState = projectCache.get ( change ( db ) . getProject ( ) ) ; } }
private void popup ( com.google.gerrit.client.info.AccountInfo account , boolean addPopup ) { if ( addPopup ) { com.google.gerrit.client.AvatarImage.PopupHandler popupHandler = new com.google.gerrit.client.AvatarImage.PopupHandler ( account , this ) ; addMouseOverHandler ( popupHandler ) ; addMouseOutHandler ( popupHandler ) ; } }
public void onEvent ( com.google.gerrit.server.events.Event event ) { for ( com.googlesource.gerrit.plugins.rabbitmq.message.Publisher publisher : publishers ) { publisher.getEventListener ( ) . onEvent ( event ) ; } }
final void downloadScheme ( com.google.gerrit.reviewdb.client.AccountGeneralPreferences.DownloadScheme s ) { downloadScheme0 ( s.name ( ) ) ; }
public com.google.gerrit.server.IdentifiedUser create ( com.google.gerrit.reviewdb.client.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( capabilityControlFactory , starredChangesUtil , authConfig , realm , anonymousCowardName , canonicalUrl , accountCache , groupBackend , disableReverseDnsLookup , remotePeerProvider , dbProvider , id , null ) ; }
private com.google.gerrit.extensions.api.changes.AddReviewerResult addReviewer ( java.lang.String changeId , java.lang.String reviewer , int expectedStatus ) throws java.lang.Exception { com.google.gerrit.extensions.api.changes.AddReviewerInput in = new com.google.gerrit.extensions.api.changes.AddReviewerInput ( ) ; in.reviewer = reviewer ; return addReviewer ( changeId , in , expectedStatus ) ; }
public com.google.gerrit.server.permissions.PermissionBackend.ForRef user ( com.google.gerrit.server.CurrentUser user ) { return forUser ( user ) . asForRef ( ) . database ( db ) ; }
public void removed ( final com.google.gerrit.reviewdb.client.Account.Id deleter ) { removedBy = deleter ; removedOn = com.google.gerrit.reviewdb.client.AccountGroupByIdAud.now ( ) ; }
public static void myOwned ( java.lang.String groupName , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.groups.GroupMap > cb ) { com.google.gerrit.client.groups.GroupMap.myOwnedGroups ( ) . addParameter ( "g" , groupName ) . get ( com.google.gerrit.client.rpc.NativeMap.copyKeysIntoChildren ( cb ) ) ; }
public boolean dryRun ( final com.google.gerrit.server.git.CodeReviewCommit mergeTip , final com.google.gerrit.server.git.CodeReviewCommit toMerge ) throws com.google.gerrit.server.git.MergeException { return args.mergeUtil.canFastForward ( args.mergeSorter , mergeTip , args.rw , toMerge ) ; }
public static com.google.gerrit.common.data.GroupReference groupReference ( java.lang.String orgName ) { return new com.google.gerrit.common.data.GroupReference ( com.googlesource.gerrit.plugins.github.group.GitHubOrganisationGroup.uuid ( orgName ) , ( ( NAME_PREFIX ) + orgName ) ) ; }
public long getTail ( ) throws java.io.IOException { if ( cachedHead.isZero ( com.googlesource.gerrit.plugins.events.fsstore.FsStore.MAX_GET_SPINS ) ) { return 0 ; } long tail = cachedTail.spinGet ( com.googlesource.gerrit.plugins.events.fsstore.FsStore.MAX_GET_SPINS ) ; return tail < 1 ? 1 : tail ; }
public void onKeyPress ( final com.google.gwt.event.dom.client.KeyPressEvent event ) { final boolean isReviewed = ! ( reviewedPanels.getValue ( ) ) ; reviewedPanels.setValue ( isReviewed ) ; reviewedPanels.setReviewedByCurrentUser ( isReviewed ) ; }
com.googlesource.gerrit.plugins.findowners.OwnersDb get ( com.google.gerrit.server.account.AccountCache accountCache , com.google.gerrit.server.account.Accounts accounts , org.eclipse.jgit.lib.Repository repo , com.google.gerrit.server.query.change.ChangeData changeData ) throws com.google.gwtorm.server.OrmException { return get ( accountCache , accounts , repo , changeData , changeData.currentPatchSet ( ) . getId ( ) . get ( ) ) ; }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > evictAllAsync ( ) { return byName.removeAllAsync ( ) ; }
protected static com.google.gerrit.index.query.PredicateTest.TestPredicate f ( java.lang.String name , java.lang.String value ) { return new com.google.gerrit.index.query.PredicateTest.TestPredicate ( name , value ) ; }
public static java.lang.String toGroup ( final com.google.gerrit.reviewdb.client.AccountGroup.Id id ) { return ( com.google.gerrit.common.PageLinks.ADMIN_GROUPS ) + ( id.toString ( ) ) ; }
public < T extends com.google.gwt.core.client.JavaScriptObject > void put ( java.lang.String content , com.google.gerrit.client.rpc.HttpCallback < T > cb ) { sendRaw ( com.google.gwt.http.client.RequestBuilder.PUT , content , cb ) ; }
public java.lang.String getUrl ( ) { java.lang.StringBuilder b = new java.lang.StringBuilder ( ) ; com.google.gerrit.server.config.ConfigSection dbs = new com.google.gerrit.server.config.ConfigSection ( cfg , "database" ) ; b.append ( "jdbc:mariadb://" ) ; b.append ( com.google.gerrit.server.schema.JdbcUtil.hostname ( dbs.optional ( "hostname" ) ) ) ; b.append ( com.google.gerrit.server.schema.JdbcUtil.port ( dbs.optional ( "port" ) ) ) ; b.append ( "/" ) ; b.append ( dbs.required ( "database" ) ) ; b.append ( "?useBulkStmts=false" ) ; return b.toString ( ) ; }
public com.google.gerrit.reviewdb.client.ChangeMessage get ( com.google.gerrit.reviewdb.client.ChangeMessage.Key id ) { throw new java.lang.UnsupportedOperationException ( com.google.gerrit.reviewdb.server.DisabledChangesReviewDbWrapper.MSG ) ; }
public void commentOnReviewableChangeByOwnerCcingSelfNotifyOwner ( ) throws java.lang.Exception { com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableChange ( ) ; setEmailStrategy ( sc.owner , com.google.gerrit.extensions.client.GeneralPreferencesInfo.EmailStrategy.CC_ON_OWN_COMMENTS ) ; review ( sc.owner , sc.changeId , com.google.gerrit.extensions.client.GeneralPreferencesInfo.EmailStrategy.ENABLED , com.google.gerrit.extensions.api.changes.NotifyHandling.OWNER ) ; assertThat ( sender ) . notSent ( ) ; }
public final com.google.gerrit.extensions.common.Side side ( ) { java.lang.String s = sideRaw ( ) ; return s != null ? com.google.gerrit.extensions.common.Side.valueOf ( s ) : com.google.gerrit.extensions.common.Side.REVISION ; }
public void go ( ) { com.google.gerrit.client.Dispatcher.patch ( getTargetHistoryToken ( ) , patchKey , patchIndex , patchSetDetail , parentPatchTable ) ; }
public void testFindInDeleteGap ( ) { com.google.gerrit.client.diff.LineMapper mapper = new com.google.gerrit.client.diff.LineMapper ( ) ; mapper.appendDelete ( 10 ) ; org.junit.Assert.assertEquals ( new com.google.gerrit.client.diff.LineMapper.LineOnOtherInfo ( ( - 1 ) , false ) , mapper.lineOnOther ( Side.PARENT , 9 ) ) ; }
public void deleteWatchedProjects ( java.util.List < com.google.gerrit.extensions.client.ProjectWatchInfo > in ) throws com.google.gerrit.extensions.restapi.RestApiException { try { deleteWatchedProjects.apply ( account , in ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot delete watched projects" , e ) ; } }
public void onSuccess ( java.util.List < com.google.gerrit.reviewdb.client.Change > changes ) { for ( com.google.gerrit.reviewdb.client.Change c : changes ) { @ java.lang.SuppressWarnings ( value = "unused" ) java.util.concurrent.Future < ? > possiblyIgnoredError = executor.submit ( new com.google.gerrit.server.index.change.ReindexAfterUpdate.Index ( event , c.getId ( ) ) ) ; } }
private void addReviewerToReviewableChangeInNoteDb ( com.google.gerrit.acceptance.server.mail.AddReviewerSenderIT.Adder adder ) throws java.lang.Exception { com.google.common.truth.TruthJUnit.assume ( ) . that ( notesMigration.readChanges ( ) ) . isTrue ( ) ; com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableChange ( ) ; com.google.gerrit.acceptance.TestAccount reviewer = accountCreator.create ( "added" , "added@example.com" , "added" ) ; addReviewer ( adder , sc.changeId , sc.owner , reviewer.email ) ; assertThat ( sender ) . sent ( "newchange" , sc ) . to ( reviewer ) . cc ( sc.reviewer ) . cc ( sc.reviewerByEmail , sc.ccerByEmail ) . noOneElse ( ) ; }
void onReply ( com.google.gwt.event.dom.client.ClickEvent e ) { if ( ( replyBox ) == null ) { com.google.gerrit.client.diff.DraftBox box = getDiffView ( ) . addReply ( getOriginal ( ) , "" , false ) ; registerReplyBox ( box ) ; } else { openReplyBox ( ) ; } }
public com.google.gerrit.server.IdentifiedUser create ( com.google.gerrit.server.AccessPath accessPath , com.google.inject.Provider < java.net.SocketAddress > remotePeerProvider , com.google.gerrit.reviewdb.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( accessPath , authConfig , canonicalUrl , realm , accountCache , starredChangesCache , accountProjectWatchCache , accountDiffPreferencesCache , remotePeerProvider , null , id ) ; }
public java.util.Set < com.google.gerrit.client.reviewdb.AccountGroup.Id > getEffectiveGroups ( ) { if ( ( effectiveGroups ) == null ) { effectiveGroups = com.google.gerrit.client.rpc.Common.getGroupCache ( ) . getEffectiveGroups ( getAccountId ( ) ) ; } return effectiveGroups ; }
private static boolean isPluginNameSane ( java.lang.String pluginName ) { return com.google.common.base.CharMatcher.javaLetterOrDigit ( ) . or ( com.google.common.base.CharMatcher.is ( '-' ) ) . matchesAllOf ( pluginName ) ; }
public static com.google.gerrit.index.query.Predicate < com.google.gerrit.server.account.AccountState > andActive ( com.google.gerrit.index.query.Predicate < com.google.gerrit.server.account.AccountState > p ) { return com.google.gerrit.index.query.Predicate.and ( p , com.google.gerrit.server.query.account.AccountPredicates.isActive ( ) ) ; }
private static synchronized com.google.gerrit.git.WorkQueue.Executor getDefaultQueue ( ) { if ( ( com.google.gerrit.git.WorkQueue.defaultQueue ) == null ) { com.google.gerrit.git.WorkQueue.defaultQueue = com.google.gerrit.git.WorkQueue.createQueue ( 1 , "WorkQueue" ) ; } return com.google.gerrit.git.WorkQueue.defaultQueue ; }
void onClose ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { if ( ( cm.isClean ( generation ) ) || ( com.google.gwt.user.client.Window.confirm ( EditConstants.I.cancelUnsavedChanges ( ) ) ) ) { upToChange ( ) ; } }
void expandBefore ( int cnt ) { expandSideBefore ( cnt ) ; otherBar.expandSideBefore ( cnt ) ; manager.getOverviewBar ( ) . refresh ( ) ; }
public void createNewPrivateChange ( ) throws java.lang.Exception { com.google.gerrit.extensions.common.ChangeInput input = newChangeInput ( ChangeStatus.NEW ) ; input.isPrivate = true ; assertCreateSucceeds ( input ) ; }
private void reset ( ) { if ( ( reader ) != null ) { reader.close ( ) ; reader = null ; notes = null ; } }
public void testUpdateOne ( ) throws com.google.gwtorm.server.OrmException , java.sql.SQLException { java.sql.PreparedStatement update = stubStatementWithUpdateCounts ( com.google.gwtorm.jdbc.AbstractTestJdbcAccess.UPDATE , 1 ) ; classUnderTest.update ( oneRow ) ; assertCorrectUpdating ( update , 1 ) ; }
public java.util.Collection < com.google.gerrit.common.data.AccessSection > getAllAccessSections ( ) { java.util.List < com.google.gerrit.common.data.AccessSection > all = new java.util.ArrayList < com.google.gerrit.common.data.AccessSection > ( ) ; all.addAll ( getLocalAccessSections ( ) ) ; all.addAll ( getInheritedAccessSections ( ) ) ; return all ; }
public void beforeTest ( ) throws java.lang.Exception { notesMigration = com.google.gerrit.testutil.NoteDbMode.newNotesMigrationFromEnv ( ) ; }
private java.util.Map < java.lang.Integer , java.util.List < java.lang.String > > initFiles ( ) { if ( ( files ) == null ) { files = new java.util.HashMap < > ( ) ; } return files ; }
public void setSession ( final org.apache.sshd.server.session.ServerSession session ) { this . ctx = new com.google.gerrit.sshd.SshScope.Context ( session.getAttribute ( SshSession.KEY ) ) ; }
public void rebuildAndCheckAllChanges ( ) throws java.lang.Exception { rebuildAndCheckChanges ( getUnwrappedDb ( ) . changes ( ) . all ( ) . toList ( ) . stream ( ) . map ( Change :: getId ) ) ; }
public void onSuccess ( java.lang.String result ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange2 ( psId.getParentKey ( ) , java.lang.String.valueOf ( psId.get ( ) ) ) ) ; }
public void onClick ( com.google.gwt.event.dom.client.ClickEvent event ) { doGeneratePassword ( ) ; }
public static java.lang.String toChange ( @ com.google.gerrit.common.Nullable com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.reviewdb.client.PatchSet.Id ps ) { return ( com.google.gerrit.common.PageLinks.toChange ( project , ps.getParentKey ( ) ) ) + ( ps.getId ( ) ) ; }
void onReply ( com.google.gwt.event.dom.client.ClickEvent e ) { if ( com.google.gerrit.client.Gerrit.isSignedIn ( ) ) { replyAction.onReply ( ) ; } else { com.google.gerrit.client.Gerrit.doSignIn ( getToken ( ) ) ; } }
private void addReviewerToReviewableChangeInReviewDb ( com.google.gerrit.acceptance.server.mail.AddReviewerSenderIT.Adder adder ) throws java.lang.Exception { com.google.common.truth.TruthJUnit.assume ( ) . that ( notesMigration.readChanges ( ) ) . isFalse ( ) ; com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableChange ( ) ; com.google.gerrit.acceptance.TestAccount reviewer = accountCreator.create ( "added" , "added@example.com" , "added" ) ; addReviewer ( adder , sc.changeId , sc.owner , reviewer.email ) ; assertThat ( sender ) . sent ( "newchange" , sc ) . to ( reviewer ) . cc ( sc.reviewer , sc.ccer ) . cc ( sc.reviewerByEmail , sc.ccerByEmail ) . noOneElse ( ) ; }
com.googlesource.gerrit.plugins.replication.PushAll create ( java.lang.String urlMatch , com.googlesource.gerrit.plugins.replication.ReplicationFilter filter , com.googlesource.gerrit.plugins.replication.ReplicationState state ) ;
public java.lang.String describeForException ( ) { if ( ( forUser ) == ( com.google.gerrit.server.permissions.LabelPermission.ForUser.ON_BEHALF_OF ) ) { return "label on behalf of " + ( name ) ; } return "label " + ( name ) ; }
public static void resetCurrentMillisSupplier ( ) { com.google.gerrit.common.TimeUtil.currentMillisSupplier = com.google.gerrit.common.TimeUtil.SYSTEM_CURRENT_MILLIS_SUPPLIER ; org.eclipse.jgit.util.SystemReader.setInstance ( null ) ; }
public void testValidateRefPatternsOK ( ) throws java.lang.Exception { com.google.gerrit.server.project.RefPattern.validate ( "refs/*" ) ; com.google.gerrit.server.project.RefPattern.validate ( "^refs/heads/*" ) ; com.google.gerrit.server.project.RefPattern.validate ( "^refs/tags/[0-9a-zA-Z-_.]+" ) ; com.google.gerrit.server.project.RefPattern.validate ( "refs/heads/review/${username}/*" ) ; }
void onReplaceByKeys ( org.eclipse.jgit.lib.ObjectId oldNotesRev , org.eclipse.jgit.lib.ObjectId newNotesRev , com.google.gerrit.reviewdb.client.Account.Id accountId , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId.Key > toRemove , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId > toAdd ) throws java.io.IOException ;
public com.google.gerrit.server.change.PatchSetInserter setValidate ( boolean validate ) { this . validate = validate ; return this ; }
public void ownerProject ( ) { com.google.gerrit.server.project.testing.Util.allow ( local , com.google.gerrit.common.data.Permission.OWNER , com.google.gerrit.server.project.testing.Util.ADMIN , "refs/*" ) ; assertAdminsAreOwnersAndDevsAreNot ( ) ; }
public void onSuccess ( final com.google.gerrit.client.account.SignInResult result ) { onCallback ( result ) ; }
protected void doGet ( final javax.servlet.http.HttpServletRequest req , final javax.servlet.http.HttpServletResponse rsp ) throws java.io.IOException { java.lang.String path = java.lang.String.format ( "/register%s" , ( slash ? req.getPathInfo ( ) : "" ) ) ; com.google.gerrit.httpd.UrlModule.toGerrit ( path , req , rsp ) ; }
void destroy ( final com.google.gerrit.httpd.WebSessionManager.Key key ) { self.remove ( key ) ; }
void evict ( com.google.gerrit.reviewdb.client.AccountGroup.UUID groupUuid , com.google.gerrit.reviewdb.client.AccountGroup.Id groupId , com.google.gerrit.reviewdb.client.AccountGroup.NameKey groupName ) throws java.io.IOException ;
com.google.gerrit.httpd.raw.BowerComponentsServlet getBowerComponentsServlet ( @ com.google.inject.name.Named ( value = com.google.gerrit.httpd.raw.StaticModule.CACHE ) com.google.common.cache.Cache < java.nio.file.Path , com.google.gerrit.httpd.raw.ResourceServlet.Resource > cache ) throws java.io.IOException { return new com.google.gerrit.httpd.raw.BowerComponentsServlet ( cache , getPaths ( ) . buckOut ) ; }
public void setUp ( ) throws java.lang.Exception { org.mockito.Mockito.when ( cfgFactoryMock.getFromGerritConfig ( pluginName , true ) ) . thenReturn ( configMock ) ; }
public void resetHtml ( final com.google.gerrit.client.ui.FancyFlexTable.MyFlexTable myTable , final com.google.gwtexpui.safehtml.client.SafeHtml body ) { com.google.gwtexpui.safehtml.client.SafeHtml.setInnerHTML ( com.google.gerrit.client.ui.FancyFlexTableImpl.getBodyElement ( myTable ) , body ) ; }
private com.google.gerrit.extensions.api.projects.ProjectApi.ListTagsRequest getTags ( ) throws java.lang.Exception { return gApi.projects ( ) . name ( project.get ( ) ) . tags ( ) ; }
private void assertParseNotifyValueFails ( java.lang.String notifyValue ) { com.google.common.truth.Truth.assertThat ( validationErrors ) . isEmpty ( ) ; parseNotifyValue ( notifyValue ) ; com.google.common.truth.Truth.assertThat ( validationErrors ) . named ( ( "expected validation error for notifyValue: " + notifyValue ) ) . isNotEmpty ( ) ; validationErrors.clear ( ) ; }
private void fireEvent ( final com.google.gerrit.reviewdb.Change change , final com.google.gerrit.server.events.ChangeEvent event ) { for ( com.google.gerrit.common.ChangeHookRunner.ChangeListenerHolder holder : listeners.values ( ) ) { if ( isVisibleTo ( change , holder.user ) ) { holder.listener.onChangeEvent ( event ) ; } } }
public void rebuildAndCheckAllChanges ( ) throws java.lang.Exception { rebuildAndCheckChanges ( getUnwrappedDb ( ) . changes ( ) . all ( ) . toList ( ) . stream ( ) . map ( Change :: getId ) , com.google.common.collect.ImmutableListMultimap.of ( ) ) ; }
public void writeTo ( java.io.OutputStream os ) throws java.io.IOException { obj.copyTo ( os ) ; }
public long getMaxValue ( ) { return java.lang.Long.MAX_VALUE ; }
private static boolean autoReindexIfStale ( org.eclipse.jgit.lib.Config cfg ) { return cfg.getBoolean ( "index" , null , "autoReindexIfStale" , true ) ; }
public boolean enabled ( ) { return ( rawWriteChangesSetting ( ) ) || ( readChanges ( ) ) ; }
public void execute ( ) { if ( fileName.isEmpty ( ) ) { file.setFocus ( true ) ; } else { content.setFocus ( true ) ; } }
protected com.google.inject.binder.LinkedBindingBuilder < com.google.gerrit.extensions.events.LifecycleListener > listener ( ) { final java.lang.annotation.Annotation id = com.google.inject.internal.UniqueAnnotations.create ( ) ; return bind ( com.google.gerrit.extensions.events.LifecycleListener.class ) . annotatedWith ( id ) ; }
public synchronized boolean isCommitted ( ) { return committed ; }
private com.google.gerrit.reviewdb.CurrentSchemaVersion getSchemaVersion ( final com.google.gerrit.reviewdb.ReviewDb db ) { try { return db.schemaVersion ( ) . get ( new com.google.gerrit.reviewdb.CurrentSchemaVersion.Key ( ) ) ; } catch ( com.google.gwtorm.client.OrmException e ) { return null ; } }
public void run ( ) { cm.getInputField ( ) . blur ( ) ; removeActiveLineHighlight ( cm ) ; removeActiveLineHighlight ( otherCm ( cm ) ) ; }
public PatchSet.Id getPatchSetId ( ) throws java.io.IOException { if ( ( psId ) == null ) { psId = com.google.gerrit.server.ChangeUtil.nextPatchSetId ( git , ctl.getChange ( ) . currentPatchSetId ( ) ) ; } return psId ; }
public void setUp ( ) throws java.lang.Exception { new com.google.gerrit.testing.InMemoryModule ( ) . inject ( this ) ; }
public java.sql.Timestamp getCreatedOn ( ) { return ( createdOn ) != null ? createdOn : com.google.gerrit.reviewdb.client.AccountGroup.auditCreationInstantTs ( ) ; }
public static com.google.gerrit.reviewdb.client.ChangeMessage newMessage ( com.google.gerrit.server.update.ChangeContext ctx , java.lang.String body , @ com.google.gerrit.common.Nullable java.lang.String tag ) { return com.google.gerrit.server.ChangeMessagesUtil.newMessage ( ctx.getChange ( ) . currentPatchSetId ( ) , ctx.getUser ( ) , ctx.getWhen ( ) , body , tag ) ; }
public static java.util.Map < java.lang.String , org.eclipse.jgit.lib.Config > againstPreviousIndexVersion ( ) { java.util.List < java.lang.Integer > schemaVersions = com.google.gerrit.testing.IndexVersions.getWithoutLatest ( com.google.gerrit.server.index.project.ProjectSchemaDefinitions.INSTANCE ) ; return com.google.gerrit.testing.IndexVersions.asConfigMap ( ProjectSchemaDefinitions.INSTANCE , schemaVersions , "againstIndexVersion" , defaultConfig ( ) ) ; }
void addLabel ( final java.lang.String token ) { com.google.gerrit.server.util.LabelVote v = com.google.gerrit.server.util.LabelVote.parse ( token ) ; com.google.gerrit.common.data.LabelType.checkName ( v.getLabel ( ) ) ; customLabels.put ( v.getLabel ( ) , v.getValue ( ) ) ; }
public java.lang.String toString ( ) { return ( ( ChangeQueryBuilder.FIELD_LABEL ) + ":" ) + ( value ) ; }
private void assertCannotUpload ( com.google.gerrit.server.project.ProjectControl u ) { com.google.common.truth.Truth.assertThat ( u.canPushToAtLeastOneRef ( ) ) . named ( "cannot upload" ) . isFalse ( ) ; }
protected com.google.gerrit.index.QueryOptions createOptions ( com.google.gerrit.index.IndexConfig indexConfig , int start , int limit , java.util.Set < java.lang.String > requestedFields ) { return com.google.gerrit.index.QueryOptions.create ( indexConfig , start , limit , requestedFields ) ; }
private static java.net.URL toURL ( java.nio.file.Path jarPath ) throws com.googlecode.prolog_cafe.exceptions.CompileException { try { return jarPath.toUri ( ) . toURL ( ) ; } catch ( java.net.MalformedURLException e ) { throw new com.googlecode.prolog_cafe.exceptions.CompileException ( ( "Cannot create URL for " + jarPath ) , e ) ; } }
public com.google.gerrit.extensions.common.ChangeInfo check ( com.google.gerrit.extensions.api.changes.FixInput fix ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return check.apply ( change , fix ) . value ( ) ; } catch ( com.google.gwtorm.server.OrmException | com.google.gerrit.server.permissions.PermissionBackendException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot check change" , e ) ; } }
public void setUp ( ) { com.google.common.truth.TruthJUnit.assume ( ) . that ( com.google.gerrit.testutil.NoteDbMode.readWrite ( ) ) . isFalse ( ) ; com.google.gerrit.testutil.TestTimeUtil.resetWithClockStep ( 1 , java.util.concurrent.TimeUnit.SECONDS ) ; setNotesMigration ( false , false ) ; }
public void extend ( org.commonmark.parser.Parser.Builder builder ) { builder.customBlockParserFactory ( new com.google.gitiles.doc.MultiColumnExtension.MultiColumnParserFactory ( ) ) ; }
private static java.lang.StringBuilder buildRefsPrefix ( java.lang.String prefix , int id ) { java.lang.StringBuilder r = com.google.gerrit.reviewdb.client.RefNames.newStringBuilder ( ) . append ( prefix ) ; return com.google.gerrit.reviewdb.client.RefNames.shard ( id , r ) . append ( '/' ) ; }
public void testGcNotAllowed_Forbidden ( ) throws com.google.gwtorm.server.OrmException , com.jcraft.jsch.JSchException , java.io.IOException { org.junit.Assert.assertEquals ( HttpStatus.SC_FORBIDDEN , userSession.post ( ( ( "/projects/" + ( allProjects.get ( ) ) ) + "/gc" ) ) . getStatusCode ( ) ) ; }
public com.google.gerrit.common.data.GerritConfig get ( ) { try { return create ( ) ; } catch ( java.net.MalformedURLException e ) { throw new com.google.inject.ProvisionException ( "Cannot create GerritConfig instance" , e ) ; } }
public com.google.gerrit.server.notedb.NoteDbChangeState call ( ) throws java.lang.Exception { try ( com.google.gerrit.reviewdb.server.ReviewDb db = schemaFactory.open ( ) ) { return rebuild ( db , id ) ; } }
public void testEvictProjectListOK ( ) throws java.lang.Exception { setupMocks ( Constants.PROJECT_LIST , com.ericsson.gerrit.plugins.evictcache.RestSessionTest.EMPTY_JSON , com.ericsson.gerrit.plugins.evictcache.RestSessionTest.OK_RESPONSE , com.ericsson.gerrit.plugins.evictcache.RestSessionTest.DO_NOT_THROW_EXCEPTION ) ; com.google.common.truth.Truth.assertThat ( restClient.evict ( com.ericsson.gerrit.plugins.evictcache.RestSessionTest.SOURCE_NAME , Constants.PROJECT_LIST , new java.lang.Object ( ) ) ) . isTrue ( ) ; }
private void abandon ( java.lang.String changeId , com.google.gerrit.acceptance.TestAccount by , @ com.google.gerrit.common.Nullable com.google.gerrit.extensions.api.changes.NotifyHandling.NotifyHandling notify ) throws java.lang.Exception { abandon ( changeId , by , EmailStrategy.ENABLED , notify ) ; }
public void onSuccess ( com.google.gerrit.client.changes.CommentInfo result ) { done.setEnabled ( true ) ; setOpen ( false ) ; registerReplyBox ( parent.addDraftBox ( result ) ) ; }
protected Project.NameKey createProject ( java.lang.String nameSuffix , com.google.gerrit.reviewdb.client.Project.NameKey parent ) throws com.google.gerrit.extensions.restapi.RestApiException { return createProject ( nameSuffix , parent , true ) ; }
public static void updateImpl ( final java.lang.String token ) { com.google.gwt.user.client.History.newItem ( token , false ) ; if ( ( com.google.gerrit.client.Gerrit.historyHooks ) != null ) { com.google.gerrit.client.Gerrit.dispatchHistoryHooks ( token ) ; } }
protected com.google.gerrit.server.update.Context newContext ( ) { return new com.google.gerrit.server.update.FusedNoteDbBatchUpdate.ContextImpl ( ) ; }
public void onSuccess ( com.google.gerrit.client.VoidResult result ) { generation = g ; setClean ( cm.isClean ( g ) ) ; }
public static void comments ( com.google.gerrit.reviewdb.client.PatchSet.Id id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.rpc.NativeMap < com.google.gwt.core.client.JsArray < com.google.gerrit.client.changes.CommentInfo > > > cb ) { com.google.gerrit.client.changes.CommentApi.revision ( id , "comments" ) . get ( cb ) ; }
private com.google.gerrit.reviewdb.client.AccountSshKey getKey ( int seq ) { checkLoaded ( ) ; return keys.get ( ( seq - 1 ) ) . orElse ( null ) ; }
void discover ( java.lang.String openidIdentifier , com.google.gerrit.client.SignInDialog.Mode mode , boolean remember , java.lang.String returnToken , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.openid.DiscoveryResult > callback ) ;
public java.lang.Void call ( ) throws java.io.IOException { for ( com.google.gerrit.server.index.ChangeIndex i : getWriteIndexes ( ) ) { i.delete ( id ) ; } return null ; }
public void start ( final org.apache.sshd.server.Environment env ) { startThread ( this :: runImp ) ; }
public final boolean canEdit ( com.google.gerrit.extensions.client.AccountFieldName f ) { return editableAccountFields ( ) . contains ( f ) ; }
public void save ( ) { lastUpdated = new java.util.Date ( ) ; com.googlesource.gerrit.plugins.repositoryuse.Ref.log.debug ( java.lang.String.format ( "Saving Ref: %s, %s, %s" , project , ref , commit ) ) ; com.googlesource.gerrit.plugins.repositoryuse.Ref.table.insertOrUpdate ( this ) ; }
protected com.google.gerrit.reviewdb.client.Change insert ( org.eclipse.jgit.junit.TestRepository < com.google.gerrit.testutil.InMemoryRepositoryManager.Repo > repo , com.google.gerrit.server.change.ChangeInserter ins ) throws java.lang.Exception { return insert ( repo , ins , null ) ; }
com.google.gerrit.reviewdb.StarredChangeAccess starredChanges ( ) ;
public void testParse_NameEmail5 ( ) { final com.google.gerrit.server.mail.Address a = com.google.gerrit.server.mail.Address.parse ( "A U Thor <author@example.com>" ) ; org.junit.Assert.assertEquals ( "A U Thor" , a.name ) ; org.junit.Assert.assertEquals ( "author@example.com" , a.email ) ; }
public static void publishEdit ( int id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwt.core.client.JavaScriptObject > cb ) { com.google.gwt.core.client.JavaScriptObject in = com.google.gwt.core.client.JavaScriptObject.createObject ( ) ; com.google.gerrit.client.changes.ChangeApi.change ( id ) . view ( "publish_edit" ) . post ( in , cb ) ; }
com.google.common.util.concurrent.ListenableFuture < ? > delete ( org.apache.lucene.index.Term term ) throws java.io.IOException { return new NrtFuture ( writer.deleteDocuments ( term ) ) ; }
protected com.google.gwtjsonrpc.server.ActiveCall createActiveCall ( final javax.servlet.http.HttpServletRequest req , final javax.servlet.http.HttpServletResponse resp ) { return new com.google.gwtjsonrpc.server.ActiveCall ( req , resp ) ; }
private com.google.gerrit.client.ui.Screen select ( ) { java.lang.String p = "change,publish," ; if ( token.startsWith ( p ) ) return new com.google.gerrit.client.changes.PublishCommentScreen ( PatchSet.Id.parse ( com.google.gerrit.client.Dispatcher.skip ( p , token ) ) ) ; return new com.google.gerrit.client.NotFoundScreen ( ) ; }
public void increasePushTaskCount ( java.lang.String project , java.lang.String ref ) { countingLock.lock ( ) ; try { ( getRefStatus ( project , ref ) . nodesToReplicateCount ) ++ ; ( totalPushTasksCount ) ++ ; } finally { countingLock.unlock ( ) ; } }
public java.sql.Connection getConnection ( ) throws java.sql.SQLException { if ( ( driver ) != null ) { return driver.connect ( url , connectionInfo ) ; } return java.sql.DriverManager.getConnection ( url , connectionInfo ) ; }
public void shouldDispatchEvent ( ) { broker.fireEventForUnrestrictedListeners ( event ) ; org.mockito.Mockito.verify ( listenerMock ) . onEvent ( event ) ; }
public void removeReviewer ( com.google.gerrit.reviewdb.client.Account.Id reviewer ) { reviewers.put ( reviewer , ReviewerStateInternal.REMOVED ) ; }
public java.lang.String getBaseGerritUrl ( javax.servlet.http.HttpServletRequest req ) { return ( "http://" + ( com.google.gitiles.TestGitilesUrls.HOST_NAME ) ) + "-review/foo/" ; }
public void want ( final java.util.Collection < com.google.gerrit.reviewdb.Account.Id > ids ) { wants.addAll ( ids ) ; }
public static < T > void setOf ( com.google.inject.Binder binder , java.lang.Class < T > member ) { binder.disableCircularProxies ( ) ; com.google.gerrit.extensions.registration.DynamicSet.setOf ( binder , com.google.inject.TypeLiteral.get ( member ) ) ; }
public boolean accept ( java.nio.file.Path entry ) { return entry.getFileName ( ) . toString ( ) . matches ( ( ( "^" + ( remove ) ) + "$" ) ) ; }
void autoReview ( ) { if ( ( ( reviewedState ) == ( com.google.gerrit.client.diff.Header.ReviewedState.LOADED ) ) && ( ! ( reviewed.getValue ( ) ) ) ) { postAutoReviewed ( ) ; } else { reviewedState = com.google.gerrit.client.diff.Header.ReviewedState.AUTO_REVIEW ; } }
public void onOk ( ) { deleteTags ( refs ) ; }
public void setUp ( ) throws java.lang.Exception { admins = groupCache.get ( new com.google.gerrit.reviewdb.client.AccountGroup.NameKey ( "Administrators" ) ) . getGroupUUID ( ) ; setUpPermissions ( ) ; setUpChanges ( ) ; atrScope.disableDb ( ) ; }
public final native void showLineEndings ( java.lang.Boolean s ) ;
void reload ( ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( changeId ) ) ; }
public void delete ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { deleteChange.apply ( change , null ) ; } catch ( com.google.gerrit.server.update.UpdateException | com.google.gerrit.server.permissions.PermissionBackendException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot delete change" , e ) ; } }
public java.util.Collection < com.google.gerrit.client.reviewdb.ProjectRight > getWildcardRights ( ) { return get ( wildProject ) . getRights ( ) ; }
public void assertNoChangeRef ( com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.reviewdb.client.Change.Id changeId ) throws java.lang.Exception { try ( org.eclipse.jgit.lib.Repository repo = repoManager.openRepository ( project ) ) { com.google.common.truth.Truth.assertThat ( repo.exactRef ( com.google.gerrit.reviewdb.client.RefNames.changeMetaRef ( changeId ) ) ) . isNull ( ) ; } }
private java.lang.String getRevision ( ) { return ( ( ( getRevisionA ( ) ) != null ? getRevisionA ( ) : "" ) + "<->" ) + ( getRevisionB ( ) ) ; }
private static boolean isVisible ( com.google.gerrit.server.change.RelatedChangesSorter.PatchSetData psd , com.google.gerrit.server.permissions.PermissionBackend.WithUser perm ) throws com.google.gerrit.server.permissions.PermissionBackendException { try { perm.change ( psd.data ( ) ) . check ( ChangePermission.READ ) ; return true ; } catch ( com.google.gerrit.extensions.restapi.AuthException e ) { return false ; } }
public com.google.gerrit.server.change.ChangeJson addOption ( com.google.gerrit.extensions.common.ListChangesOption o ) { options.add ( o ) ; return this ; }
public synchronized com.google.gerrit.server.account.AccountState getEvenIfMissing ( com.google.gerrit.reviewdb.client.Account.Id accountId ) { com.google.gerrit.server.account.AccountState state = byId.get ( accountId ) ; if ( state != null ) { return state ; } return com.google.gerrit.testing.FakeAccountCache.newState ( new com.google.gerrit.reviewdb.client.Account ( accountId , com.google.gerrit.common.TimeUtil.nowTs ( ) ) ) ; }
void addApproval ( com.google.gerrit.extensions.common.ApprovalInfo ai ) { if ( ( all ) == null ) { all = com.google.common.collect.Lists.newArrayList ( ) ; } all.add ( ai ) ; }
public void ownedProjects ( final com.google.gwt.user.client.rpc.AsyncCallback < java.util.List < com.google.gerrit.client.reviewdb.Project > > callback ) { ownedProjectsFactory.create ( ) . to ( callback ) ; }
public void testFindInInsertGap ( ) { com.google.gerrit.client.diff.LineMapper mapper = new com.google.gerrit.client.diff.LineMapper ( ) ; mapper.appendInsert ( 10 ) ; org.junit.Assert.assertEquals ( new com.google.gerrit.client.diff.LineMapper.LineOnOtherInfo ( ( - 1 ) , false ) , mapper.lineOnOther ( Side.REVISION , 9 ) ) ; }
public com.googlecode.prolog_cafe.lang.NumberTerm sqrt ( ) { if ( ( this . val ) < 0 ) throw new com.googlecode.prolog_cafe.exceptions.EvaluationException ( "undefined" ) ; return new com.googlecode.prolog_cafe.lang.DoubleTerm ( java.lang.Math.sqrt ( this . doubleValue ( ) ) ) ; }
private static java.lang.String name ( java.nio.file.Path dir ) { return dir.getFileName ( ) . toString ( ) ; }
private void openRepository ( ) throws com.google.gwtjsonrpc.server.XsrfException , com.google.gwtorm.client.OrmException , org.spearce.jgit.errors.RepositoryNotFoundException { db = com.google.gerrit.server.GerritServer.getInstance ( ) . openRepository ( projectName ) ; }
public java.lang.String toString ( ) { return ( ( ( ( ( "GitHubLogin [token=" + ( token ) ) + ", myself=" ) + ( myself ) ) + ", scopes=" ) + ( loginScopes ) ) + "]" ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { new com.google.gerrit.client.auth.openid.OpenIdSignInDialog ( SignInDialog.Mode.LINK_IDENTIY , null ) . center ( ) ; }
private com.google.gerrit.extensions.common.ChangeInfo getChangeAll ( java.lang.String triplet ) throws com.google.gerrit.extensions.restapi.RestApiException { return gApi.changes ( ) . id ( triplet ) . get ( ) ; }
protected void configure ( ) { bind ( com.google.gerrit.pgm.http.jetty.JettyEnv.class ) . toInstance ( env ) ; bind ( com.google.gerrit.pgm.http.jetty.JettyServer.class ) ; listener ( ) . to ( JettyServer.Lifecycle.class ) ; }
private void edit ( ) { text.setText ( comment.getMessage ( ) ) ; expandText ( ) ; stateEdit ( true ) ; text.setFocus ( true ) ; }
protected java.nio.file.attribute.FileTime getLastModifiedTime ( java.nio.file.Path p ) { return com.google.gerrit.httpd.raw.DeveloperGwtUiServlet.NOW ; }
com.google.gerrit.server.notedb.DraftCommentNotes getDraftCommentNotes ( ) { return draftCommentNotes ; }
public java.lang.String toString ( ) { java.lang.String s = "Replicate All Projects" ; if ( ( urlMatch ) != null ) { s = ( s + " to " ) + ( urlMatch ) ; } return s ; }
public static com.google.inject.Module module ( ) { return new com.google.gerrit.extensions.config.FactoryModule ( ) { @ java.lang.Override public void configure ( ) { factory ( ReviewDbBatchUpdate.AssistedFactory.class ) ; } } ; }
private com.google.gerrit.server.git.strategy.SubmitStrategy createStrategy ( com.google.gerrit.extensions.common.SubmitType submitType ) throws com.google.gerrit.server.git.MergeException , com.google.gerrit.server.project.NoSuchProjectException { return submitStrategyFactory.create ( submitType , db , repo , rw , inserter , canMergeFlag , getAlreadyAccepted ( branchTip ) , destBranch ) ; }
com.google.gerrit.server.change.EmailReviewComments create ( com.google.gerrit.extensions.api.changes.ReviewInput.NotifyHandling notify , com.google.gerrit.server.notedb.ChangeNotes notes , com.google.gerrit.reviewdb.client.PatchSet patchSet , com.google.gerrit.reviewdb.client.Account.Id authorId , com.google.gerrit.reviewdb.client.ChangeMessage message , java.util.List < com.google.gerrit.reviewdb.client.PatchLineComment > comments ) ;
protected org.eclipse.jgit.api.Git git ( ) { return testRepo.git ( ) ; }
public com.google.gerrit.server.project.ConfigInfo apply ( com.google.gerrit.server.project.ProjectResource resource ) { return new com.google.gerrit.server.project.ConfigInfo ( resource.getControl ( ) , config , pluginConfigEntries , cfgFactory , allProjects , views ) ; }
public void pushWithPrivateByDefaultDisabled ( ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( createChange ( project2 ) . getChange ( ) . change ( ) . isPrivate ( ) ) . isFalse ( ) ; }
public void index ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.Change change ) throws java.io.IOException { index ( changeDataFactory.create ( db , change ) ) ; }
public final native void on ( java.lang.String event , net.codemirror.lib.CodeMirror.RenderLineHandler handler ) ;
public void addNonExistingMember_NotFound ( ) throws java.lang.Exception { adminSession.put ( "/groups/Administrators/members/non-existing" ) . assertNotFound ( ) ; }
public final native java.lang.String downloadScheme ( ) ;
private void init ( net.codemirror.lib.Pos anchor ) { bubble = new com.google.gerrit.client.diff.InsertCommentBubble ( getCommentManager ( ) , cm ) ; add ( bubble ) ; cm.addWidget ( anchor , bubble.getElement ( ) ) ; }
public long getLongParameter ( java.lang.String name , long defaultValue ) { return config.getLong ( pluginName , null , getParamName ( name ) , defaultValue ) ; }
public void message ( java.lang.String msg ) { java.lang.System.err.println ( msg ) ; java.lang.System.err.flush ( ) ; }
protected java.lang.Object getRowItemKey ( final com.google.gerrit.client.projects.ProjectInfo item ) { return item.name ( ) ; }
boolean hasTrailingEdit ( int idx ) ;
void onPublish ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { com.google.gerrit.client.change.DraftActions.publish ( changeId , revision , publish , deleteRevision , deleteChange ) ; }
public void setCharacterEncoding ( java.lang.String name ) { com.google.common.base.Preconditions.checkArgument ( com.google.common.base.Charsets.UTF_8.equals ( java.nio.charset.Charset.forName ( name ) ) , "unsupported charset: %s" , name ) ; }
public com.google.gerrit.extensions.common.DiffInfo diff ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return getDiff.apply ( file ) . value ( ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot retrieve diff" , e ) ; } }
public com.google.gerrit.server.change.ListRevisionComments list ( ) { return list ; }
public com.google.gerrit.server.project.ChangeControl forUser ( final com.google.gerrit.server.CurrentUser who ) { if ( getUser ( ) . equals ( who ) ) { return this ; } return new com.google.gerrit.server.project.ChangeControl ( changeDataFactory , approvalsUtil , getRefControl ( ) . forUser ( who ) , notes ) ; }
public void restoreFile ( org.eclipse.jgit.lib.Repository repository , com.google.gerrit.server.project.ChangeControl changeControl , java.lang.String file ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.server.project.InvalidChangeOperationException , com.google.gwtorm.server.OrmException , java.io.IOException { modifyTree ( repository , changeControl , new com.google.gerrit.server.edit.tree.RestoreFileModification ( file ) ) ; }
void setFocus ( final boolean take ) { if ( text.isVisible ( ) ) { text.setFocus ( take ) ; } else if ( take ) { edit ( ) ; } }
protected void configureCommands ( ) { command ( com.googlesource.gerrit.plugins.adminconsole.ShowAccountCommand.class ) ; command ( com.googlesource.gerrit.plugins.adminconsole.ListUsersCommand.class ) ; alias ( "show-account" , com.googlesource.gerrit.plugins.adminconsole.ShowAccountCommand.class ) ; alias ( "show-repo-account-access" , com.googlesource.gerrit.plugins.adminconsole.ShowRepoAccountAccessCommand.class ) ; alias ( "show-repo-access" , com.googlesource.gerrit.plugins.adminconsole.ShowRepoAccessCommand.class ) ; }
public java.util.Map < java.lang.String , java.lang.String [ ] > getParameterMap ( ) { return java.util.Collections.unmodifiableMap ( com.google.common.collect.Maps.transformValues ( parameters.asMap ( ) , ( vs ) -> vs.toArray ( new java.lang.String [ 0 ] ) ) ) ; }
public void addTreeModifications ( java.util.List < com.google.gerrit.server.edit.tree.TreeModification > treeModifications ) { com.google.common.base.Preconditions.checkNotNull ( treeModifications , "treeModifications must not be null" ) ; this . treeModifications.addAll ( treeModifications ) ; }
public static void includedIn ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.info.ChangeInfo.IncludedInInfo > cb ) { com.google.gerrit.client.changes.ChangeApi.call ( project , id , "in" ) . get ( cb ) ; }
private com.google.gerrit.extensions.client.ChangeKind getChangeKind ( java.lang.String changeId ) throws java.lang.Exception { com.google.gerrit.extensions.common.ChangeInfo c = gApi.changes ( ) . id ( changeId ) . get ( com.google.gerrit.extensions.client.ListChangesOption.CURRENT_REVISION ) ; return c.revisions.get ( c.currentRevision ) . kind ; }
private void assertCannotUpdate ( java.lang.String ref , com.google.gerrit.server.permissions.ProjectControl u ) { boolean update = u.asForProject ( ) . ref ( ref ) . testOrFalse ( RefPermission.UPDATE ) ; com.google.common.truth.Truth.assertThat ( update ) . named ( ( "cannot update " + ref ) ) . isFalse ( ) ; }
public ServiceUserResource.SshKey parse ( com.googlesource.gerrit.plugins.serviceuser.ServiceUserResource parent , com.google.gerrit.extensions.restapi.IdString id ) throws com.google.gerrit.extensions.restapi.ResourceNotFoundException , com.google.gwtorm.server.OrmException { return new com.googlesource.gerrit.plugins.serviceuser.ServiceUserResource.SshKey ( sshKeys.get ( ) . parse ( parent.getUser ( ) , id ) ) ; }
public com.google.gerrit.server.change.ChangeInserter setDraft ( boolean draft ) { change.setStatus ( ( draft ? Change.Status.DRAFT : Change.Status.NEW ) ) ; patchSet.setDraft ( draft ) ; return this ; }
private boolean can ( com.google.gerrit.server.permissions.LabelPermission perm ) { return ! ( label ( com.google.gerrit.server.permissions.DefaultPermissionMappings.labelPermissionName ( perm ) ) . isEmpty ( ) ) ; }
public com.google.gerrit.extensions.api.changes.ReviewResult review ( com.google.gerrit.extensions.api.changes.ReviewInput in ) throws com.google.gerrit.extensions.restapi.RestApiException { throw new com.google.gerrit.extensions.restapi.NotImplementedException ( ) ; }
public void defaultGpgCertificationMatchesEmail ( ) throws java.lang.Exception { com.google.gerrit.gpg.testutil.TestKey key = com.google.gerrit.gpg.testutil.TestKey.key5 ( ) ; assertProblems ( com.google.gerrit.gpg.testutil.TestKey.key5 ( ) , ( "Key must contain a valid certification for one of the following " + ( ( "identities:\n" + " gerrit:user\n" ) + " username:user" ) ) ) ; addExternalId ( "test" , "test" , "test5@example.com" ) ; assertNoProblems ( key ) ; }
public static com.google.gerrit.client.rpc.RestApi editWithCommands ( @ com.google.gerrit.common.Nullable java.lang.String project , int id ) { return com.google.gerrit.client.changes.ChangeApi.edit ( project , id ) . addParameterTrue ( "download-commands" ) ; }
public void advertiseRefs ( org.eclipse.jgit.transport.BaseReceivePack rp ) throws org.eclipse.jgit.transport.ServiceMayNotContinueException { com.google.gerrit.server.git.receive.ReceiveCommitsAdvertiseRefsHook.Result r = advertiseRefs ( com.google.gerrit.server.git.HookUtil.ensureAllRefsAdvertised ( rp ) ) ; rp.setAdvertisedRefs ( r.allRefs ( ) , r.additionalHaves ( ) ) ; }
private boolean refUpdated ( org.eclipse.jgit.lib.RefUpdate.Result result ) { return ( result == ( org.eclipse.jgit.lib.RefUpdate.Result.NEW ) ) || ( result == ( org.eclipse.jgit.lib.RefUpdate.Result.FORCED ) ) ; }
public void testAcrossMultipleLines ( ) { com.google.gerrit.client.diff.EditIterator iter = new com.google.gerrit.client.diff.EditIterator ( lines , 0 ) ; assertLineChsEqual ( net.codemirror.lib.LineCharacter.create ( 2 , 2 ) , iter.advance ( 10 ) ) ; }
public void includeNonExistingGroup ( ) throws java.lang.Exception { java.lang.String gx = createGroup ( "gx" ) ; try { gApi.groups ( ) . id ( gx ) . addGroups ( "non-existing" ) ; } catch ( com.google.gerrit.extensions.restapi.UnprocessableEntityException expecetd ) { } }
protected void onResize ( final int width , final int height ) { if ( isAttached ( ) ) { center ( ) ; } }
public java.util.List < com.google.gerrit.extensions.common.SshKeyInfo > apply ( com.google.gerrit.server.IdentifiedUser user ) throws java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException , org.eclipse.jgit.errors.RepositoryNotFoundException { return com.google.common.collect.Lists.transform ( authorizedKeys.getKeys ( user.getAccountId ( ) ) , com.google.gerrit.server.account.GetSshKeys :: newSshKeyInfo ) ; }
abstract void createFileCommentEditorOnSideB ( ) ;
public void refsDraftCommentsPrefix ( ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( com.google.gerrit.reviewdb.client.RefNames.refsDraftCommentsPrefix ( changeId ) ) . isEqualTo ( "refs/draft-comments/73/67473/" ) ; }
public com.google.gerrit.reviewdb.Project getProject ( ) { return state.getProject ( ) ; }
private java.lang.String urlEdit ( ) { return ( "/changes/" + ( change.getChangeId ( ) ) ) + "/edit" ; }
public void matchingNames ( ) { matches ( "a.1234567890123.deleted" ) ; matches ( "aa.1234567890123.deleted" ) ; matches ( "a.b.c.1234567890123.deleted" ) ; matches ( "a.1234567890123.%deleted%.git" ) ; matches ( "aa.1234567890123.%deleted%.git" ) ; matches ( "a.b.c.1234567890123.%deleted%.git" ) ; }
protected void preDisplay ( final com.google.gerrit.client.projects.ProjectMap result ) { if ( ( ( subname ) == null ) || ( "" . equals ( subname ) ) ) { display ( result ) ; } }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { showAddKeyBlock ( false ) ; }
public com.googlesource.gerrit.plugins.its.base.validation.ItsAssociationPolicy getItsAssociationPolicy ( ) { com.googlesource.gerrit.plugins.its.base.validation.ItsAssociationPolicy legacyItsAssociationPolicy = gerritConfig.getEnum ( "commentLink" , getCommentLinkName ( ) , "association" , ItsAssociationPolicy.OPTIONAL ) ; return getPluginConfigEnum ( "association" , legacyItsAssociationPolicy ) ; }
private static void doCreateTable ( java.sql.Statement stmt ) throws java.sql.SQLException { stmt.executeUpdate ( ( "CREATE TABLE IF NOT EXISTS account_patch_reviews (" + ( ( ( ( ( ( "account_id INTEGER DEFAULT 0 NOT NULL, " + "change_id INTEGER DEFAULT 0 NOT NULL, " ) + "patch_set_id INTEGER DEFAULT 0 NOT NULL, " ) + "file_name VARCHAR(255) DEFAULT '' NOT NULL, " ) + "CONSTRAINT primary_key_account_patch_reviews " ) + "PRIMARY KEY (account_id, change_id, patch_set_id, file_name)" ) + ")" ) ) ) ; }
public void onSuccess ( com.google.gerrit.client.changes.ChangeInfo result ) { sent = true ; hide ( ) ; com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( id ) ) ; }
public static void updated ( final com.google.gerrit.reviewdb.client.Change c ) { c.setLastUpdatedOn ( com.google.gerrit.server.util.TimeUtil.nowTs ( ) ) ; com.google.gerrit.server.ChangeUtil.computeSortKey ( c ) ; }
public static com.google.gerrit.client.change.Hashtags.PostInput create ( java.lang.String add , java.lang.String remove ) { com.google.gerrit.client.change.Hashtags.PostInput input = createObject ( ) . cast ( ) ; input.init ( com.google.gerrit.client.change.Hashtags.PostInput.toJsArrayString ( add ) , com.google.gerrit.client.change.Hashtags.PostInput.toJsArrayString ( remove ) ) ; return input ; }
private void logCanceledWhileRunningException ( org.eclipse.jgit.errors.TransportException e ) { com.googlesource.gerrit.plugins.replication.ReplicationQueue.repLog.info ( ( ( "Cannot replicate to " + ( uri ) ) + ". It was canceled while running" ) , e ) ; }
public void doChangeAbandonedHook ( com.google.gerrit.reviewdb.client.Change change , com.google.gerrit.reviewdb.client.Account account , java.lang.String reason , com.google.gerrit.reviewdb.server.ReviewDb db ) throws com.google.gwtorm.server.OrmException ;
public void setFieldReference ( final com.google.gwtorm.schema.ColumnModel cm ) { col = cm ; dupOnSet = - 1 ; ( columnIdx ) ++ ; }
private com.google.gerrit.acceptance.RestResponse publishChange ( java.lang.String changeId ) throws java.lang.Exception { return adminRestSession.post ( ( ( "/changes/" + changeId ) + "/publish" ) ) ; }
public void testCreateProjectHttpWhenProjectAlreadyExists_Conflict ( ) throws java.lang.Exception { adminRestSession.put ( ( "/projects/" + ( allProjects.get ( ) ) ) ) . assertConflict ( ) ; }
public com.google.gerrit.server.CurrentUser getUser ( ) { return ctl.getUser ( ) ; }
public static com.google.gerrit.client.info.AccountPreferencesInfo getUserPreferences ( ) { return com.google.gerrit.client.Gerrit.myPrefs ; }
void setName ( java.lang.String n ) { name = n ; id = com.google.gerrit.server.util.Url.encode ( n ) ; }
public com.google.gerrit.extensions.webui.UiAction.Description setVisible ( boolean visible ) { return setVisible ( com.google.gerrit.extensions.conditions.BooleanCondition.valueOf ( visible ) ) ; }
public void close ( ) throws java.io.IOException { out.write ( html.substring ( ( gt + 1 ) ) . getBytes ( java.nio.charset.StandardCharsets.UTF_8 ) ) ; out.close ( ) ; }
public void onSuccess ( com.google.gwt.core.client.JsArray < com.google.gerrit.client.account.ProjectWatchInfo > watchedProjects ) { display ( ) ; watchesTab.display ( watchedProjects ) ; }
void onExpandAfter ( com.google.gwt.event.dom.client.ClickEvent e ) { expandAfter ( ) ; otherBar.expandAfter ( ) ; manager.getOverviewBar ( ) . refresh ( ) ; cm.focus ( ) ; }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > evictAsync ( com.google.gerrit.reviewdb.AccountProjectWatch.Key key ) ;
public int hashCode ( ) { return java.util.Objects.hash ( status , labels , errorMessage , requirements ) ; }
public static synchronized void useSystemTime ( ) { org.joda.time.DateTimeUtils.setCurrentMillisSystem ( ) ; org.eclipse.jgit.util.SystemReader.setInstance ( null ) ; }
protected abstract void onLoad ( com.google.gerrit.server.notedb.AbstractChangeNotes.LoadHandle handle ) throws java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException ;
public final native java.lang.String indexUrl ( ) ;
public static com.google.gerrit.index.FieldDef.Builder < java.lang.Integer > intRange ( java.lang.String name ) { return new com.google.gerrit.index.FieldDef.Builder ( FieldType.INTEGER_RANGE , name ) . stored ( ) ; }
protected void onInitUI ( ) { super . onInitUI ( ) ; setWindowTitle ( Gerrit.C.menuAllOpen ( ) ) ; setPageTitle ( Util.C.allOpenChanges ( ) ) ; }
public void execute ( ) { Window.Location.assign ( ( ( com.google.gwt.core.client.GWT.getHostPageBaseURL ( ) ) + "become" ) ) ; }
public void clear ( ) { waitForEmails ( ) ; synchronized ( messages ) { messages.clear ( ) ; messagesRead = 0 ; } }
private void display ( final com.google.gerrit.client.reviewdb.AccountGeneralPreferences p ) { showSiteHeader.setValue ( p.isShowSiteHeader ( ) ) ; useFlashClipboard.setValue ( p.isUseFlashClipboard ( ) ) ; displayDefaultContext ( p.getDefaultContext ( ) ) ; }
private void addComment ( com.google.gerrit.server.data.ChangeAttribute change , java.lang.String comment ) throws java.io.IOException { java.lang.String gitComment = change.subject ; java.lang.String [ ] issues = issueExtractor.getIssueIds ( gitComment ) ; for ( java.lang.String issue : issues ) { its.addComment ( issue , comment ) ; } }
private static int nullToZero ( java.lang.Integer i ) { return i != null ? i : 0 ; }
public void noRevisionOptions ( ) throws java.lang.Exception { com.google.gerrit.server.change.ChangeJson.ChangeInfo c = getChange ( changeId ) ; org.junit.Assert.assertNull ( c.currentRevision ) ; org.junit.Assert.assertNull ( c.revisions ) ; }
public void linkifyMessageUrlAndChangeId ( ) throws java.lang.Exception { com.google.gitiles.Linkifier l = new com.google.gitiles.Linkifier ( TestGitilesUrls.URLS ) ; org.junit.Assert.assertEquals ( com.google.common.collect.ImmutableList.of ( com.google.common.collect.ImmutableMap.of ( "text" , "http://my/url/I0123456789" , "url" , "http://my/url/I0123456789" ) , com.google.common.collect.ImmutableMap.of ( "text" , " is not change " ) , com.google.common.collect.ImmutableMap.of ( "text" , "I0123456789" , "url" , "http://test-host-review/foo/#/q/I0123456789,n,z" ) ) , l.linkify ( com.google.gitiles.LinkifierTest.REQ , "http://my/url/I0123456789 is not change I0123456789" ) ) ; }
public static void markPrivate ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwt.core.client.JavaScriptObject > cb ) { com.google.gerrit.client.changes.ChangeApi.change ( project , id ) . view ( "private" ) . post ( com.google.gerrit.client.changes.ChangeApi.PrivateInput.create ( ) , cb ) ; }
public java.util.List < com.google.gerrit.extensions.common.ChangeInfo > queryChanges ( java.lang.String projectName , int start , int limit ) throws com.google.gerrit.extensions.restapi.BadRequestException , java.io.IOException ;
public void evictAfterRename ( final com.google.gerrit.reviewdb.AccountGroup.NameKey oldName ) { byName.remove ( oldName ) ; }
protected void configure ( ) { bind ( com.google.inject.Key.get ( javax.sql.DataSource.class , com.google.inject.name.Names.named ( "ReviewDb" ) ) ) . toProvider ( com.google.gerrit.httpd.ReviewDbDataSourceProvider.class ) . in ( com.google.inject.Scopes.SINGLETON ) ; listener ( ) . to ( com.google.gerrit.httpd.ReviewDbDataSourceProvider.class ) ; }
public com.google.gerrit.common.data.GroupReference getValue ( ) { return toValue ( suggestBox.getText ( ) ) ; }
public final void delete ( final java.lang.Iterable < E > instances ) throws com.google.gwtorm.client.OrmException { doDelete ( instances ) ; }
public void onSuccess ( com.google.gerrit.client.info.GeneralPreferences prefs ) { com.google.gerrit.client.Gerrit.setUserPreferences ( prefs ) ; enable ( true ) ; display ( prefs ) ; }
private java.lang.String urlEditFile ( ) { return ( ( urlEdit ( ) ) + "/" ) + ( com.google.gerrit.acceptance.edit.ChangeEditIT.FILE_NAME ) ; }
private static void initLogSystem ( java.nio.file.Path logdir ) { final org.apache.log4j.Logger root = org.apache.log4j.LogManager.getRootLogger ( ) ; root.removeAllAppenders ( ) ; root.addAppender ( com.google.gerrit.server.util.SystemLog.createAppender ( logdir , com.google.gerrit.pgm.util.ErrorLogFile.LOG_NAME , new org.apache.log4j.PatternLayout ( "[%d] %-5p %c %x: %m%n" ) ) ) ; }
public boolean updateChange ( com.google.gerrit.server.git.BatchUpdate.ChangeContext ctx ) throws com.google.gerrit.server.project.InvalidChangeOperationException , com.google.gwtorm.server.OrmException , java.io.IOException { boolean ret = patchSetInserter.updateChange ( ctx ) ; rebasedPatchSet = patchSetInserter.getPatchSet ( ) ; return ret ; }
public java.lang.String toString ( ) { return ( "AccessSection[" + ( getName ( ) ) ) + "]" ; }
public void onSuccess ( java.lang.Void result ) { loadConfigInfo ( info , base ) ; }
public void run ( ) { renderSkips ( context ) ; }
public java.lang.String getString ( java.lang.String fieldName ) { return getOptionalString ( fieldName ) . or ( "" ) ; }
public void testValidateBadRefPatternDanglingCharacter ( ) throws java.lang.Exception { com.google.gerrit.server.project.RefPattern.validate ( "^refs/heads/tmp/sdk/[0-9]{3,3}_R[1-9][A-Z][0-9]{3,3}*" ) ; }
void onExpandBefore ( com.google.gwt.event.dom.client.ClickEvent e ) { expandBefore ( com.google.gerrit.client.diff.SkipBar.NUM_ROWS_TO_EXPAND ) ; cm.focus ( ) ; }
public void onSuccess ( final com.google.gwtjsonrpc.common.com.google.gerrit.client.VoidResult result ) { saveName.setEnabled ( false ) ; setPageTitle ( Util.M.group ( newName ) ) ; groupNameTxt.setText ( newName ) ; }
public void validatorInactiveWhenConfigEmpty ( ) { com.google.common.truth.Truth.assertThat ( com.googlesource.gerrit.plugins.uploadvalidator.BlockedKeywordValidator.isActive ( com.googlesource.gerrit.plugins.uploadvalidator.TestUtils.EMPTY_PLUGIN_CONFIG ) ) . isFalse ( ) ; }
public void run ( ) { cm.getInputField ( ) . blur ( ) ; clearActiveLine ( cm ) ; clearActiveLine ( otherCm ( cm ) ) ; }
void onAddGroupByClick ( com.google.gwt.event.dom.client.ClickEvent event ) { com.google.gerrit.common.data.GroupReference ref = groupToAdd.getValue ( ) ; if ( ref != null ) { addGroup ( ref ) ; } else { groupToAdd.setFocus ( true ) ; } }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { onCollapseAll ( null ) ; }
public static com.google.inject.Key < org.apache.sshd.server.Command > key ( final com.google.gerrit.sshd.CommandName name ) { return com.google.inject.Key.get ( org.apache.sshd.server.Command.class , name ) ; }
private void setNew ( com.google.gerrit.reviewdb.client.Change c , com.google.gerrit.reviewdb.client.ChangeMessage msg ) { sendMergeFail ( c , msg , true ) ; }
public void setUp ( ) throws java.lang.Exception { lifecycle = new com.google.gerrit.lifecycle.LifecycleManager ( ) ; com.google.gerrit.testutil.InMemoryModule.createInjector ( lifecycle ) . injectMembers ( this ) ; lifecycle.start ( ) ; }
public void index ( com.google.gerrit.reviewdb.client.Account.Id id ) throws java.io.IOException { for ( com.google.gerrit.server.index.Index < ? , com.google.gerrit.server.account.AccountState > i : getWriteIndexes ( ) ) { i.replace ( byIdCache.get ( id ) ) ; } fireAccountIndexedEvent ( id.get ( ) ) ; }
public void onSuccess ( final com.google.gerrit.reviewdb.client.PatchLineComment result ) { enableButtons ( true ) ; notifyDraftDelta ( 1 ) ; findOrCreateEditor ( result , true ) . setOpen ( false ) ; }
public com.google.gerrit.client.account.AgreementInfo run ( final com.google.gerrit.client.reviewdb.ReviewDb db ) throws com.google.gwtorm.client.OrmException { final com.google.gerrit.client.account.AgreementInfo i = new com.google.gerrit.client.account.AgreementInfo ( ) ; i.load ( com.google.gerrit.client.rpc.Common.getAccountId ( ) , db ) ; return i ; }
public void onSuccess ( com.google.gerrit.client.info.ChangeInfo info ) { info.init ( ) ; addExtensionPoints ( info ) ; initCurrentRevision ( info ) ; loadConfigInfo ( info , base ) ; }
public com.google.gerrit.server.CurrentUser getUser ( ) { return identifiedUserFactory.create ( change.getOwner ( ) ) ; }
private com.google.common.util.concurrent.CheckedFuture < java.lang.Boolean , java.io.IOException > reindexIfStaleAsync ( com.google.gerrit.reviewdb.client.AccountGroup.UUID uuid ) { return com.google.common.util.concurrent.Futures.makeChecked ( com.google.common.util.concurrent.Futures.nonCancellationPropagating ( batchExecutor.submit ( ( ) -> reindexIfStale ( uuid ) ) ) , IndexUtils.MAPPER ) ; }
void setResult ( com.google.gerrit.reviewdb.client.Change.Id id , com.google.gerrit.server.update.FusedNoteDbBatchUpdate.ChangeResult result ) { com.google.gerrit.server.update.FusedNoteDbBatchUpdate.ChangeResult old = results.putIfAbsent ( id , result ) ; com.google.common.base.Preconditions.checkArgument ( ( old == null ) , "result for change %s already set: %s" , id , old ) ; }
public com.google.gitiles.GitilesView.Builder setRepositoryName ( java.lang.String repositoryName ) { switch ( type ) { case HOST_INDEX : throw new java.lang.IllegalStateException ( java.lang.String.format ( "cannot set repository name on %s view" , type ) ) ; default : this . repositoryName = com.google.common.base.Preconditions.checkNotNull ( repositoryName ) ; return this ; } }
public com.google.gerrit.server.change.Description getDescription ( com.google.gerrit.server.change.ChangeResource rsrc ) { return new com.google.gerrit.extensions.webui.UiAction.Description ( ) . setLabel ( "Unmark private" ) . setTitle ( "Unmark change as private" ) . setVisible ( ( ( rsrc.getChange ( ) . isPrivate ( ) ) && ( rsrc.isUserOwner ( ) ) ) ) ; }
public java.lang.String describeForException ( ) { if ( ( forUser ) == ( com.google.gerrit.server.permissions.LabelPermission.ForUser.ON_BEHALF_OF ) ) { return "labelAs " + ( name ) ; } return "label " + ( name ) ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { b.setEnabled ( false ) ; Util.MANAGE_SVC.publish ( patchSet.getId ( ) , new com.google.gerrit.client.changes.ChangeDetailCache.GerritWidgetCallback ( b ) ) ; }
private java.lang.String count ( long cnt ) { if ( cnt == 0 ) { return "" ; } return java.lang.String.format ( "%6d" , cnt ) ; }
public boolean canEdit ( final com.google.gerrit.client.reviewdb.Account.FieldName f ) { return editableAccountFields.contains ( f ) ; }
public void suggestReviewersMaxNbrSuggestions ( ) throws java.lang.Exception { java.lang.String changeId = createChange ( ) . getChangeId ( ) ; java.util.List < com.google.gerrit.server.change.SuggestReviewers.SuggestedReviewerInfo > reviewers = suggestReviewers ( changeId , "user" , 5 ) ; com.google.common.truth.Truth.assertThat ( reviewers ) . hasSize ( 2 ) ; }
public void createChangeWithPrivateByDefaultDisabled ( ) throws java.lang.Exception { com.google.gerrit.extensions.common.ChangeInfo info = gApi.changes ( ) . create ( new com.google.gerrit.extensions.common.ChangeInput ( project2.get ( ) , "master" , "empty change" ) ) . get ( ) ; com.google.common.truth.Truth.assertThat ( info.isPrivate ) . isNull ( ) ; }
protected void configure ( ) { factory ( AbandonChange.Factory.class ) ; factory ( ChangeDetailFactory.Factory.class ) ; factory ( PatchSetDetailFactory.Factory.class ) ; factory ( PatchSetPublishDetailFactory.Factory.class ) ; factory ( SubmitAction.Factory.class ) ; }
public void postRun ( ) throws java.lang.Exception { for ( com.google.gerrit.pgm.init.api.InitStep step : steps ) { if ( ( step instanceof com.google.gerrit.pgm.init.InitPlugins ) && ( flags.skipPlugins ) ) { continue ; } step.postRun ( ) ; } }
public boolean isSubmit ( ) { return com.google.gerrit.reviewdb.client.PatchSetApproval.LabelId.SUBMIT.get ( ) . equals ( getLabel ( ) ) ; }
com.google.gerrit.reviewdb.TrackingIdAccess trackingIds ( ) ;
public java.util.List < com.googlesource.gerrit.plugins.gitblit.MenuEntry > getEntries ( ) { return java.util.Arrays.asList ( ( userProvider.get ( ) . isIdentifiedUser ( ) ? fullMenuEntries : restrictedMenuEntries ) , extraProjectEntries ) ; }
public com.google.gerrit.server.plugins.ExtensionMetaData apply ( com.google.gerrit.server.plugins.JarScanner.ClassData classData ) { return new com.google.gerrit.server.plugins.ExtensionMetaData ( classData.className , classData.annotationValue ) ; }
public < T extends com.google.gwt.core.client.JavaScriptObject > void post ( com.google.gwt.user.client.rpc.AsyncCallback < T > cb ) { send ( com.google.gwt.http.client.RequestBuilder.POST , cb ) ; }
public static void all ( com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.account.AccountCapabilities > cb , java.lang.String ... filter ) { new com.google.gerrit.client.rpc.RestApi ( "/accounts/self/capabilities" ) . addParameter ( "q" , filter ) . get ( cb ) ; }
public void run ( ) { if ( cm.extras ( ) . hasActiveLine ( ) ) { newDraft ( cm , ( ( cm.getLineNumber ( cm.extras ( ) . activeLine ( ) ) ) + 1 ) ) ; } }
static java.lang.String describeEnumValue ( java.lang.Enum < ? > value ) { return value.name ( ) . toLowerCase ( java.util.Locale.US ) . replace ( '_' , ' ' ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { header.toggleReviewed ( ) . run ( ) ; }
private void initUserAuth ( final org.apache.sshd.server.PublickeyAuthenticator pubkey ) { setUserAuthFactories ( java.util.Arrays.< org.apache.sshd.common.NamedFactory < org.apache.sshd.server.UserAuth > > asList ( new org.apache.sshd.server.auth.UserAuthPublicKey.Factory ( ) ) ) ; setPublickeyAuthenticator ( pubkey ) ; }
public void afterTest ( ) { notesMigration.resetFromEnv ( ) ; }
public com.google.gerrit.client.rpc.RestApi data ( com.google.gwt.json.client.JSONObject obj ) { contentType = ( com.google.gerrit.client.rpc.RestApi.JSON_TYPE ) + "; charset=utf-8" ; contentData = obj.toString ( ) ; return this ; }
private void publishMessageOnly ( ) throws com.google.gwtorm.client.OrmException { java.lang.StringBuilder msgbuf = new java.lang.StringBuilder ( ) ; summarizeInlineComments ( msgbuf ) ; message ( msgbuf.toString ( ) ) ; }
public final java.lang.String id_abbreviated ( ) { return new com.google.gerrit.reviewdb.client.Change.Key ( change_id ( ) ) . abbreviate ( ) ; }
com.google.gerrit.server.CurrentUser getUser ( ) ;
public boolean hasTeamAccess ( java.lang.String repositoryName ) { for ( com.gitblit.models.TeamModel team : teams ) { if ( team.hasRepositoryPermission ( repositoryName ) ) { return true ; } } return false ; }
void onRevert ( com.google.gwt.event.dom.client.ClickEvent e ) { com.google.gerrit.client.change.RevertAction.call ( revert , changeId , revision , project , subject ) ; }
public void init ( javax.servlet.FilterConfig cfg ) throws javax.servlet.ServletException { contextInitialized ( new javax.servlet.ServletContextEvent ( cfg.getServletContext ( ) ) ) ; init ( ) ; manager.start ( ) ; }
void onLogout ( ) { org.apache.log4j.spi.LoggingEvent entry = log ( "LOGOUT" ) ; if ( ( async ) != null ) { async.append ( entry ) ; } audit ( context.get ( ) , "0" , "LOGOUT" ) ; }
private PatchSet.Id getPatchSetId ( com.google.gerrit.acceptance.GitUtil.Commit c ) throws com.google.gwtorm.server.OrmException { return com.google.common.collect.Iterables.getOnlyElement ( db.changes ( ) . byKey ( new com.google.gerrit.reviewdb.client.Change.Key ( c.getChangeId ( ) ) ) ) . currentPatchSetId ( ) ; }
public void negativeStartLineResultsInInvalidRange ( ) { com.google.gerrit.extensions.client.Comment.Range range = createRange ( ( - 1 ) , 2 , 19 , 10 ) ; com.google.gerrit.extensions.common.testing.RangeSubject.assertThat ( range ) . isInvalid ( ) ; }
protected java.util.Set < com.google.gerrit.client.reviewdb.Account.Id > createEntry ( final java.lang.String key ) throws java.lang.Exception { return lookup ( key ) ; }
public void setAuthorNameText ( final java.lang.String authorEmail , final java.lang.String nameText ) { header.setWidget ( 0 , 0 , new com.google.gerrit.client.AvatarImage ( authorEmail , 26 ) ) ; header.setText ( 0 , 1 , nameText ) ; }
com.googlesource.gerrit.plugins.hooks.HookResult execute ( com.googlesource.gerrit.plugins.hooks.HookArgs args ) { queue.submit ( path , args ) ; return null ; }
public void onFailure ( java.lang.Throwable caught ) { enableButtons ( true ) ; super . onFailure ( caught ) ; }
protected void configure ( ) { listener ( ) . toInstance ( com.google.gerrit.extensions.registration.PrivateInternals_DynamicTypes.registerInParentInjectors ( ) ) ; }
public void validCert ( ) throws java.lang.Exception { org.eclipse.jgit.transport.PushCertificate cert = newSignedCert ( validNonce ( ) , com.google.gerrit.gpg.testutil.TestKeys.validKeyWithoutExpiration ( ) ) ; assertProblems ( cert ) ; }
public java.lang.String toString ( ) { try { return toHeaderString ( ) ; } catch ( java.io.UnsupportedEncodingException e ) { throw new java.lang.RuntimeException ( "Cannot encode address" , e ) ; } }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { if ( com.google.gerrit.client.Gerrit.isSignedIn ( ) ) { star.setValue ( ( ! ( star.getValue ( ) ) ) , true ) ; } else { com.google.gerrit.client.Gerrit.doSignIn ( getToken ( ) ) ; } }
public boolean supportsCookies ( ) { return false ; }
public void doClaSignupHook ( com.google.gerrit.reviewdb.client.Account account , com.google.gerrit.common.data.ContributorAgreement cla ) ;
public com.googlesource.gerrit.plugins.github.git.GHContent getFileContent ( java.lang.String path , java.lang.String ref ) throws java.io.IOException { return ghRepository.getFileContent ( path , ref ) ; }
public final native void skipUnchanged ( java.lang.Boolean s ) ;
protected void bindOneInsert ( java.sql.PreparedStatement ps , com.google.gwtorm.jdbc.AbstractTestJdbcAccess.Data entity ) throws java.sql.SQLException { ps.setInt ( 1 , entity.id ) ; }
protected void openRow ( java.lang.String projectName ) { nameBox.setText ( projectName ) ; doAddNew ( ) ; }
public void addCollaborators ( com.googlesource.gerrit.plugins.github.git.GHUser ... users ) throws java.io.IOException { ghRepository.addCollaborators ( users ) ; }
public org.eclipse.jgit.lib.RefUpdate.Result deleteFile ( com.google.gerrit.server.edit.ChangeEdit edit , java.lang.String file ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.server.project.InvalidChangeOperationException , java.io.IOException { return modify ( edit , new com.google.gerrit.server.edit.tree.DeleteFileModification ( file ) ) ; }
public java.lang.String getAvatarUrl ( int size ) throws com.google.gerrit.extensions.restapi.RestApiException { com.google.gerrit.server.account.GetAvatar myGetAvatar = getAvatar.get ( ) ; myGetAvatar.setSize ( size ) ; return myGetAvatar.apply ( account ) . location ( ) ; }
public boolean enabled ( ) { return ( ( ( writeChanges ( ) ) || ( readChanges ( ) ) ) || ( writeAccounts ( ) ) ) || ( readAccounts ( ) ) ; }
public void onFailure ( java.lang.Throwable caught ) { prefs.syntaxHighlighting ( false ) ; }
public void delete ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.Change change ) throws java.io.IOException { delete ( changeDataFactory.create ( db , change ) ) ; }
java.lang.String idFromHeader ( org.commonmark.node.Heading header ) { return ids.get ( header ) ; }
public void addIntHeader ( java.lang.String name , int value ) { headers.put ( name , java.lang.Integer.toString ( value ) ) ; }
public void onSuccess ( com.google.gerrit.client.changes.CommentInfo result ) { done.setEnabled ( true ) ; setOpen ( false ) ; getCommentManager ( ) . addDraftBox ( displaySide , result ) ; }
public static void add ( com.google.gerrit.reviewdb.client.Change.Id change , com.google.gerrit.client.info.ChangeInfo.RevisionInfo info ) { com.google.gerrit.client.changes.RevisionInfoCache.IMPL.psToCommit.put ( new com.google.gerrit.reviewdb.client.PatchSet.Id ( change , info._number ( ) ) , info.name ( ) ) ; }
protected void onInitUI ( ) { super . onInitUI ( ) ; initUUID ( ) ; initName ( ) ; initOwner ( ) ; initDescription ( ) ; initGroupOptions ( ) ; initGroupType ( ) ; initExternal ( ) ; }
boolean setToRetry ( ) { retrying = true ; ( retryCount ) ++ ; return ( ( maxRetries ) == 0 ) || ( ( retryCount ) <= ( maxRetries ) ) ; }
public void start ( com.google.gerrit.server.git.WorkQueue workQueue ) { java.lang.String poolName = "ReplicateTo-" + ( config.getRemoteConfig ( ) . getName ( ) ) ; pool = workQueue.createQueue ( config.getPoolThreads ( ) , poolName ) ; }
public void setCookie ( javax.servlet.http.HttpServletRequest request , javax.servlet.http.HttpServletResponse response , com.gitblit.models.UserModel user ) { }
public static boolean isDisabled ( org.eclipse.jgit.lib.Config cfg ) { return ( com.google.gerrit.server.config.GitWebConfig.isEmptyString ( cfg , "gitweb" , null , "url" ) ) || ( com.google.gerrit.server.config.GitWebConfig.isEmptyString ( cfg , "gitweb" , null , "cgi" ) ) ; }
public com.google.gerrit.server.change.ChangeJson lazyLoad ( boolean load ) { lazyLoad = load ; return this ; }
public void onKeyPress ( final com.google.gwt.event.dom.client.KeyPressEvent event ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChangeQuery ( "is:starred" ) ) ; }
public void onClose ( com.google.gwt.event.logical.shared.CloseEvent < com.google.gwt.user.client.ui.PopupPanel > event ) { view.getCmFromSide ( DisplaySide.B ) . focus ( ) ; popup = null ; current = null ; }
public void postUpdate ( com.google.gerrit.server.update.BatchUpdate.Context ctx ) throws com.google.gwtorm.server.OrmException { patchSetInserter.postUpdate ( ctx ) ; }
private void superWindowResolution ( ) { com.google.gerrit.testutil.TestTimeUtil.setClockStep ( ( ( ChangeRebuilder.MAX_WINDOW_MS ) * 2 ) , java.util.concurrent.TimeUnit.MILLISECONDS ) ; com.google.gerrit.common.TimeUtil.nowTs ( ) ; }
private com.google.gerrit.server.patch.PatchListKey keyFor ( final com.google.gerrit.extensions.client.DiffPreferencesInfo.Whitespace whitespace ) { if ( ( parentNum ) < 0 ) { return new com.google.gerrit.server.patch.PatchListKey ( aId , bId , whitespace ) ; } return com.google.gerrit.server.patch.PatchListKey.againstParentNum ( ( ( parentNum ) + 1 ) , bId , whitespace ) ; }
protected Account.Id getAccountId ( ) { return currentUser.getAccountId ( ) ; }
java.util.Collection < com.google.gerrit.reviewdb.client.AccountGroup.UUID > getGroupsWithMember ( com.google.gerrit.reviewdb.client.Account.Id memberId ) ;
public void cleanupIndex ( ) { com.google.gerrit.elasticsearch.ElasticQueryChangesTest.node.client ( ) . admin ( ) . indices ( ) . prepareDelete ( com.google.gerrit.elasticsearch.ElasticQueryChangesTest.INDEX_NAME ) . execute ( ) ; com.google.gerrit.elasticsearch.ElasticQueryChangesTest.createIndexes ( ) ; }
public com.google.gerrit.server.query.Predicate < T > parse ( java.lang.String query ) throws com.google.gerrit.index.query.QueryParseException { if ( com.google.common.base.Strings.isNullOrEmpty ( query ) ) { throw new com.google.gerrit.index.query.QueryParseException ( "query is empty" ) ; } return toPredicate ( com.google.gerrit.index.query.QueryParser.parse ( query ) ) ; }
private void allowForcePushOnRefsTags ( ) throws java.lang.Exception { removePushFromRefsTags ( ) ; grant ( Permission.PUSH , project , "refs/tags/*" , true , com.google.gerrit.server.group.SystemGroupBackend.REGISTERED_USERS ) ; }
public void testKeyToString ( ) throws java.lang.Exception { org.bouncycastle.openpgp.PGPPublicKey key = com.google.gerrit.gpg.testing.TestKeys.validKeyWithoutExpiration ( ) . getPublicKey ( ) ; org.junit.Assert.assertEquals ( ( "46328A8C Testuser One <test1@example.com>" + " (04AE A7ED 2F82 1133 E5B1 28D1 ED06 25DC 4632 8A8C)" ) , com.google.gerrit.gpg.PublicKeyStore.keyToString ( key ) ) ; }
public void destroy ( ) { com.googlesource.gerrit.plugins.github.oauth.OAuthFilter.log.info ( "Destroy" ) ; gitFilter.destroy ( ) ; webFilter.destroy ( ) ; }
public java.lang.String getAccessToken ( ) ;
public void index ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.Change change ) throws com.google.gwtorm.server.OrmException , java.io.IOException { index ( newChangeData ( db , change ) ) ; reindexAfterIndexUpdate ( change.getProject ( ) , change.getId ( ) ) ; }
private static boolean isNotSignedIn ( java.lang.Throwable caught ) { return ( com.google.gerrit.client.rpc.RestApi.isNotSignedIn ( caught ) ) || ( ( caught instanceof com.google.gwtjsonrpc.client.RemoteJsonException ) && ( caught.getMessage ( ) . equals ( NotSignedInException.MESSAGE ) ) ) ; }
private com.google.gerrit.extensions.common.ApprovalInfo approvalInfo ( com.google.gerrit.reviewdb.client.Account.Id id , java.lang.Integer value , java.sql.Timestamp date ) { com.google.gerrit.extensions.common.ApprovalInfo ai = new com.google.gerrit.extensions.common.ApprovalInfo ( id.get ( ) ) ; ai.value = value ; ai.date = date ; accountLoader.put ( ai ) ; return ai ; }
private void openLine ( final com.google.gwtexpui.safehtml.client.SafeHtmlBuilder m ) { m.openTr ( ) ; m.setAttribute ( "valign" , "top" ) ; m.openTd ( ) ; m.setStyleName ( com.google.gerrit.client.patches.S_ICON_CELL ) ; m.nbsp ( ) ; m.closeTd ( ) ; }
public boolean updateTeamModels ( java.util.Collection < com.gitblit.models.TeamModel > models ) { return false ; }
private static boolean isConfig ( final org.eclipse.jgit.transport.ReceiveCommand cmd ) { return cmd.getRefName ( ) . equals ( GitRepositoryManager.REF_CONFIG ) ; }
public java.util.List < java.lang.String > getTeamNamesForRepositoryRole ( java.lang.String role ) { return null ; }
public com.google.gerrit.server.CurrentUser getCurrentUser ( ) { return projectControl.getCurrentUser ( ) ; }
public final AccountGroup.UUID getOwnerUUID ( ) { java.lang.String owner = owner_id ( ) ; if ( owner != null ) { return new com.google.gerrit.reviewdb.client.AccountGroup.UUID ( com.google.gwt.http.client.URL.decodePathSegment ( owner ) ) ; } return null ; }
public void postEvent ( com.google.gerrit.reviewdb.client.Project.NameKey projectName , com.google.gerrit.server.events.ProjectEvent event ) { }
void createOrEditFileComment ( com.google.gerrit.client.diff.DisplaySide side ) { getPanelFromSide ( side ) . createOrEditFileComment ( ) ; setHeaderVisible ( true ) ; }
public com.google.common.collect.ImmutableList < org.eclipse.jgit.diff.Edit > getEdits ( ) { return com.google.gerrit.server.patch.IntraLineDiff.deepCopyEdits ( edits ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { if ( com.google.gerrit.client.Gerrit.isSignedIn ( ) ) { onReply ( null ) ; } else { com.google.gerrit.client.Gerrit.doSignIn ( getToken ( ) ) ; } }
public void onBlur ( com.google.gwt.event.dom.client.BlurEvent event ) { if ( "" . equals ( box.getText ( ) ) ) { box.setText ( Util.C.defaultProjectName ( ) ) ; box.addStyleName ( Gerrit.RESOURCES.css ( ) . inputFieldTypeHint ( ) ) ; } }
private java.util.List < com.google.gerrit.reviewdb.client.SubmitRecord > ruleError ( java.lang.String err ) { com.google.gerrit.reviewdb.client.SubmitRecord rec = new com.google.gerrit.reviewdb.client.SubmitRecord ( ) ; rec.status = SubmitRecord.Status.RULE_ERROR ; rec.errorMessage = err ; return java.util.Collections.singletonList ( rec ) ; }
public java.util.Enumeration < java.lang.String > getInitParameterNames ( ) { return java.util.Collections.emptyEnumeration ( ) ; }
public void onCellClicked ( com.google.gwt.user.client.ui.SourcesTableEvents sender , int row , int cell ) { if ( ( cell != 1 ) && ( ( getRowItem ( row ) ) != null ) ) { movePointerTo ( row ) ; } }
private static boolean preferUnified ( ) { return DiffView.UNIFIED_DIFF.equals ( com.google.gerrit.client.Gerrit.getUserPreferences ( ) . diffView ( ) ) ; }
com.google.gerrit.server.project.ChangeControl create ( com.google.gerrit.server.project.RefControl refControl , com.google.gerrit.reviewdb.client.Change change ) { return create ( refControl , notesFactory.create ( db , change ) ) ; }
public com.google.gerrit.index.Schema.Builder < T > add ( com.google.gerrit.index.Schema < T > schema ) { this . fields.addAll ( schema.getFields ( ) . values ( ) ) ; return this ; }
public static java.lang.String mediumFormat ( java.util.Date dt ) { com.google.gerrit.client.FormatUtil.ensureInited ( ) ; return com.google.gerrit.client.FormatUtil.dateFormatter.mediumFormat ( dt ) ; }
private void redisplay ( ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( changeInfo.projectNameKey ( ) , changeId ) ) ; }
private java.lang.String indent ( int spaces ) { if ( spaces == 0 ) { return "" ; } else { return java.lang.String.format ( ( ( "%" + spaces ) + "s" ) , " " ) ; } }
static com.google.gerrit.common.Die die ( java.lang.String why ) { return new com.google.gerrit.common.Die ( why ) ; }
public void commentOnWipChangeByOwner ( ) throws java.lang.Exception { com.google.gerrit.acceptance.server.mail.StagedChange sc = stageWipChange ( ) ; review ( sc.owner , sc.changeId , com.google.gerrit.extensions.client.GeneralPreferencesInfo.EmailStrategy.ENABLED ) ; assertThat ( sender ) . notSent ( ) ; }
void addGroup ( final com.google.gerrit.reviewdb.client.AccountGroup.UUID id ) { initialGroups.add ( id ) ; }
public void preDisplay ( final java.util.List < com.google.gerrit.common.data.AccountProjectWatchInfo > result ) { watches.display ( result ) ; }
private void clearForm ( ) { usernameTxt.setValue ( "" ) ; if ( ( emailTxt ) != null ) { emailTxt.setValue ( "" ) ; } sshKeyTxt.setValue ( "" ) ; }
public com.google.gerrit.server.query.change.ChangeDataSource getSource ( com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > p , com.google.gerrit.server.query.change.QueryOptions opts ) throws com.google.gerrit.server.query.QueryParseException ;
public boolean isOwnerAnyRef ( ) { return ( canPerformOnAnyRef ( Permission.OWNER ) ) || ( user.getCapabilities ( ) . isAdmin_DoNotUse ( ) ) ; }
public java.util.Map < java.lang.String , java.lang.String [ ] > getParameterMap ( ) { return java.util.Collections.unmodifiableMap ( com.google.common.collect.Maps.transformValues ( parameters.asMap ( ) , ( c ) -> com.google.gitiles.FakeHttpServletRequest.stringCollectionToArray ( c ) ) ) ; }
public void run ( ) { com.google.gerrit.client.diff.CommentGroup group = getCommentGroupOnActiveLine ( cm ) ; if ( group != null ) { group.openCloseLast ( ) ; } }
public boolean isRejectImplicitMerges ( ) { return getInheritableBoolean ( Project :: getRejectImplicitMerges ) ; }
public final native net.codemirror.lib.KeyMap propagate ( java.lang.String key ) ;
public void onFailure ( final java.lang.Throwable caught ) { addNew.setEnabled ( true ) ; nameBox.setEnabled ( true ) ; filterTxt.setEnabled ( true ) ; super . onFailure ( caught ) ; }
private final native void reviewCategoryStrategyRaw ( java.lang.String s ) ;
public com.google.gerrit.sshd.SshSession get ( ) { return com.google.gerrit.sshd.SshScope.getContext ( ) . getSession ( ) ; }
private static boolean isControlBlockStart ( com.google.gerrit.server.patch.Text a , int idx ) { return com.google.gerrit.server.patch.IntraLineLoader.CONTROL_BLOCK_START_RE.matcher ( a.getString ( idx ) ) . find ( ) ; }
void restore ( com.googlecode.prolog_cafe.lang.Prolog engine ) { engine.cont = this . cont ; engine.r1 = this . r1 ; engine.r2 = this . r2 ; engine.r3 = this . r3 ; }
public boolean isVisible ( ) { return ( visibleForReplication ( ) ) || ( canPerformOnAnyRef ( Permission.READ ) ) ; }
protected java.lang.ProcessBuilder newBuildProcess ( com.google.gerrit.httpd.raw.Label label ) throws java.io.IOException { java.lang.ProcessBuilder proc = new java.lang.ProcessBuilder ( "bazel" , "build" , label.fullName ( ) ) ; return proc ; }
protected < T > T buildJson ( java.lang.Class < T > classOfT , java.lang.String path , java.lang.String queryString ) throws java.lang.Exception { return com.google.gitiles.ServletTest.newGson ( ) . fromJson ( buildJsonRaw ( path , queryString ) , classOfT ) ; }
public static synchronized void cleanup ( ) throws java.io.IOException { for ( java.io.File dir : com.google.gerrit.testing.TempFileUtil.allDirsCreated ) { com.google.gerrit.testing.TempFileUtil.recursivelyDelete ( dir ) ; } com.google.gerrit.testing.TempFileUtil.allDirsCreated.clear ( ) ; }
protected com.google.gerrit.client.api.ExtensionPanel createExtensionPoint ( com.google.gerrit.client.GerritUiExtensionPoint extensionPoint ) { com.google.gerrit.client.api.ExtensionPanel extensionPanel = new com.google.gerrit.client.api.ExtensionPanel ( extensionPoint ) ; extensionPanel.putObject ( GerritUiExtensionPoint.Key.ACCOUNT_INFO , com.google.gerrit.client.Gerrit.getUserAccount ( ) ) ; return extensionPanel ; }
protected void onOpenRow ( final int row ) { final com.google.gerrit.client.data.ChangeInfo c = getRowItem ( row ) ; com.google.gerrit.client.Gerrit.display ( com.google.gerrit.client.Link.toChange ( c ) , new com.google.gerrit.client.changes.ChangeScreen ( c ) ) ; }
private void parseComments ( ) throws java.io.IOException , java.text.ParseException , org.eclipse.jgit.errors.ConfigInvalidException { commentNoteMap = com.google.gerrit.server.notedb.CommentsInNotesUtil.parseCommentsFromNotes ( repo , com.google.gerrit.server.notedb.ChangeNoteUtil.changeRefName ( changeId ) , walk , changeId , commentsForBase , commentsForPs , Status.PUBLISHED ) ; }
static long now ( ) { return java.lang.System.currentTimeMillis ( ) ; }
public static void ensureConsistentWithGroupNameNotes ( org.eclipse.jgit.lib.Repository allUsersRepo , com.google.gerrit.server.group.InternalGroup group ) throws java.io.IOException { java.util.List < com.google.gerrit.extensions.api.config.ConsistencyCheckInfo.ConsistencyProblemInfo > problems = com.google.gerrit.server.group.db.GroupsNoteDbConsistencyChecker.checkWithGroupNameNotes ( allUsersRepo , group.getNameKey ( ) , group.getGroupUUID ( ) ) ; problems.forEach ( com.google.gerrit.server.group.db.GroupsNoteDbConsistencyChecker :: logConsistencyProblem ) ; }
public java.util.List < com.google.gerrit.extensions.common.AccountInfo > getPastAssignees ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return getPastAssignees.apply ( change ) . value ( ) ; } catch ( com.google.gwtorm.server.OrmException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot get past assignees" , e ) ; } }
public void store ( com.google.gerrit.client.reviewdb.Account account , com.google.gerrit.client.reviewdb.ContactInformation info ) throws com.google.gerrit.client.rpc.ContactInformationStoreException { throw initError ; }
public static void editWithFiles ( int id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.info.ChangeInfo.EditInfo > cb ) { com.google.gerrit.client.changes.ChangeApi.edit ( id ) . addParameterTrue ( "list" ) . get ( cb ) ; }
public void current ( ) { com.google.common.truth.Truth.assertThat ( com.google.gerrit.testutil.IndexVersionsTest.get ( com.google.gerrit.testing.IndexVersions.CURRENT ) ) . containsExactly ( com.google.gerrit.testutil.IndexVersionsTest.SCHEMA_DEF.getLatest ( ) . getVersion ( ) ) ; }
public final boolean fuseUpdates ( ) { return snapshot.get ( ) . fuseUpdates ( ) ; }
public void start ( ) { if ( enabled ) { consoleReporter.start ( 1 , java.util.concurrent.TimeUnit.MINUTES ) ; } }
public com.google.gerrit.server.notedb.NoteDbUpdateManager setCodeRepo ( org.eclipse.jgit.lib.Repository repo , org.eclipse.jgit.revwalk.RevWalk rw ) { com.google.common.base.Preconditions.checkState ( ( ( codeRepo ) == null ) , "code repo already initialized" ) ; codeRepo = new com.google.gerrit.server.notedb.NoteDbUpdateManager.OpenRepo ( repo , rw , null , null , false ) ; return this ; }
com.google.gerrit.server.project.ProjectState checkedGet ( com.google.gerrit.reviewdb.client.Project.NameKey projectName ) throws java.io.IOException ;
public void visit ( org.commonmark.node.ThematicBreak thematicBreak ) { html.open ( "hr" ) ; }
public void close ( ) { for ( com.google.gerrit.server.git.MergeOpRepoManager.OpenRepo repo : openRepos.values ( ) ) { repo.close ( ) ; } openRepos.clear ( ) ; }
private com.google.gerrit.extensions.api.changes.ReviewInput createComment ( java.lang.String comment ) { return new com.google.gerrit.extensions.api.changes.ReviewInput ( ) . message ( ( ( com.criteo.gerrit.plugins.automerge.ReviewUpdater.commentsPrefix ) + comment ) ) ; }
public void testUpdateOne ( ) throws com.google.gwtorm.server.OrmException , java.sql.SQLException { java.sql.PreparedStatement update = stubStatementWithUpdateCounts ( com.google.gwtorm.jdbc.TestJdbcAccess.UPDATE , 1 ) ; createClassUnderTest ( ) . update ( oneRow ) ; com.google.gwtorm.jdbc.TestJdbcAccess.assertUsedBatchingOnly ( update ) ; }
static java.nio.file.Path getDir ( com.google.gerrit.server.config.SitePaths sitePaths , com.google.gerrit.server.index.Schema < com.google.gerrit.server.query.change.ChangeData > schema ) { return sitePaths.index_dir.resolve ( java.lang.String.format ( "%s%04d" , com.google.gerrit.lucene.LuceneVersionManager.CHANGES_PREFIX , schema.getVersion ( ) ) ) ; }
public void onSuccess ( final com.google.gwtjsonrpc.common.VoidResult result ) { if ( ( ++ ( done ) ) == ( commentEditors.size ( ) ) ) { onSend2 ( submit ) ; } }
public boolean canUpdate ( ) { if ( ( GitRepositoryManager.REF_CONFIG.equals ( refName ) ) && ( ! ( projectControl.isOwner ( ) ) ) ) { return false ; } return ( canPerform ( Permission.PUSH ) ) && ( canWrite ( ) ) ; }
com.google.gerrit.server.CurrentUser getUser ( ) { return getChangeResource ( ) . getUser ( ) ; }
public void onChange ( com.google.gwt.event.dom.client.ChangeEvent e ) { on ( e ) ; }
org.pegdown.ast.ReferenceNode get ( org.pegdown.ast.SuperNode keyNode , java.lang.String text ) { java.lang.String id = ( keyNode != null ) ? com.google.gitiles.doc.MarkdownUtil.getInnerText ( keyNode ) : text ; return references.get ( com.google.gitiles.doc.ReferenceMap.key ( id ) ) ; }
public void addReviewers ( final com.google.gerrit.client.reviewdb.Change.Id id , final java.util.List < java.lang.String > reviewers , final com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.patches.AddReviewerResult > callback ) { addReviewerFactory.create ( id , reviewers ) . to ( callback ) ; }
DiffInfo.IntraLineStatus getIntraLineStatus ( ) { return diff.intralineStatus ( ) ; }
private static com.google.gwtexpui.safehtml.client.SafeHtml showTrailingWhitespace ( com.google.gwtexpui.safehtml.client.SafeHtml src ) { return src.replaceFirst ( "([ \t][ \t]*)(\r?\n?)$" , "<span class=\"gerrit-whitespaceerror\">$1</span>$2" ) ; }
protected void configure ( ) { factory ( ChangeResource.Factory.class ) ; bind ( com.google.gerrit.server.extensions.events.GitReferenceUpdated.class ) . toInstance ( GitReferenceUpdated.DISABLED ) ; }
public com.google.common.util.concurrent.CheckedFuture < ? , java.io.IOException > deleteAsync ( com.google.gerrit.reviewdb.client.Change change ) { return ( executor ) != null ? submit ( new com.google.gerrit.server.index.ChangeIndexer.Task ( change , true ) ) : com.google.common.util.concurrent.Futures.< java.lang.Object , java.io.IOException > immediateCheckedFuture ( null ) ; }
public void run ( ) { if ( cm.hasSearchHighlight ( ) ) { cm.execCommand ( "findNext" ) ; } else { cm.execCommand ( "clearSearch" ) ; getCommentManager ( ) . toggleOpenBox ( cm ) . run ( ) ; } }
public void onResize ( com.google.gwt.event.logical.shared.ResizeEvent event ) { resizeCodeMirror ( ) ; }
public boolean yesno ( boolean defaultValue , java.lang.String message ) { return ui.yesno ( defaultValue , message ) ; }
public static java.lang.String refsUsers ( com.google.gerrit.reviewdb.client.Account.Id accountId ) { java.lang.StringBuilder r = com.google.gerrit.reviewdb.client.RefNames.newStringBuilder ( ) . append ( com.google.gerrit.reviewdb.client.RefNames.REFS_USERS ) ; return com.google.gerrit.reviewdb.client.RefNames.shard ( accountId.get ( ) , r ) . toString ( ) ; }
public com.google.common.base.Optional < com.googlesource.gerrit.plugins.webhooks.EventProcessor.Request > doProcess ( com.google.gerrit.server.events.ProjectEvent event , com.googlesource.gerrit.plugins.webhooks.RemoteConfig remote ) { return com.google.common.base.Optional.of ( new com.googlesource.gerrit.plugins.webhooks.EventProcessor.Request ( com.googlesource.gerrit.plugins.webhooks.processors.GerritEventProcessor.GSON.toJson ( event ) ) ) ; }
public void modifyFile ( java.lang.String filePath , com.google.gerrit.extensions.restapi.RawInput newContent ) throws com.google.gerrit.extensions.restapi.RestApiException { try { changeEditsPut.apply ( changeResource.getControl ( ) , filePath , newContent ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot modify file of change edit" , e ) ; } }
public void stop ( ) { running = false ; int discarded = config.shutdown ( ) ; if ( discarded > 0 ) { com.googlesource.gerrit.plugins.replication.ReplicationQueue.repLog.warn ( java.lang.String.format ( "Canceled %d replication events during shutdown" , discarded ) ) ; } }
private java.lang.String canCreateCommit ( org.eclipse.jgit.lib.Repository repo , org.eclipse.jgit.revwalk.RevCommit commit ) { if ( canUpdate ( ) ) { return null ; } else if ( isMergedIntoBranchOrTag ( repo , commit ) ) { return null ; } return ( "lacks permission " + ( com.google.gerrit.common.data.Permission.PUSH ) ) + " for creating new commit object" ; }
public com.google.gerrit.reviewdb.client.Change update ( com.google.gerrit.reviewdb.client.Change change ) { if ( change.getStatus ( ) . isClosed ( ) ) { return null ; } change.updateNumberOfPatchSets ( newPatchSet.getPatchSetId ( ) ) ; return change ; }
public static com.google.gerrit.server.account.WatchConfig.NotifyValue create ( @ com.google.gerrit.common.Nullable java.lang.String filter , java.util.Set < com.google.gerrit.server.account.WatchConfig.NotifyType > notifyTypes ) { return new com.google.gerrit.server.account.AutoValue_WatchConfig_NotifyValue ( com.google.common.base.Strings.emptyToNull ( filter ) , com.google.common.collect.Sets.immutableEnumSet ( notifyTypes ) ) ; }
public void fire ( com.google.gerrit.reviewdb.client.Project.NameKey project , java.lang.String ref , org.eclipse.jgit.lib.ObjectId oldObjectId , org.eclipse.jgit.lib.ObjectId newObjectId , com.google.gerrit.server.account.AccountState updater ) { fire ( project , ref , oldObjectId , newObjectId , ReceiveCommand.Type.UPDATE , util.accountInfo ( updater ) ) ; }
com.google.gerrit.server.index.ChangeIndexer create ( com.google.common.util.concurrent.ListeningExecutorService executor , com.google.gerrit.server.index.IndexCollection indexes ) ;
public void destroy ( ) { org.apache.sshd.server.Command cmd = atomicCmd.getAndSet ( null ) ; if ( cmd != null ) { try { cmd.destroy ( ) ; } catch ( java.lang.Exception e ) { com.google.common.base.Throwables.propagate ( e ) ; } } }
public void onSignOut ( ) { if ( ( starChange ) != null ) { starChange.setVisible ( false ) ; } }
public boolean isInGroup ( final com.google.gerrit.client.reviewdb.Account.Id accountId , final com.google.gerrit.client.reviewdb.AccountGroup.Id groupId ) { if ( ( isAnonymousUsers ( groupId ) ) || ( isRegisteredUsers ( groupId ) ) ) { return true ; } return getEffectiveGroups ( accountId ) . contains ( groupId ) ; }
public com.google.common.collect.ImmutableListMultimap < com.google.gerrit.reviewdb.client.Change.Id , java.lang.String > getProblems ( ) { return com.google.common.collect.ImmutableListMultimap.copyOf ( problems ) ; }
public void changeAssigneeOnReviewableChange ( ) throws java.lang.Exception { com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableChange ( ) ; com.google.gerrit.acceptance.TestAccount other = accountCreator.create ( "other" , "other@example.com" , "other" ) ; assign ( sc , sc.owner , other ) ; sender.clear ( ) ; assign ( sc , sc.owner , sc.assignee ) ; assertThat ( sender ) . sent ( "setassignee" , sc ) . cc ( sc.reviewerByEmail , sc.ccerByEmail ) . to ( sc.assignee ) . noOneElse ( ) ; }
public void onKeyUp ( com.google.gwt.event.dom.client.KeyUpEvent event ) { subname = filterTxt.getValue ( ) ; refresh ( ) ; }
java.util.Set < org.eclipse.jgit.lib.ObjectId > getAlreadyAccepted ( org.eclipse.jgit.lib.Repository repo ) throws java.io.IOException { if ( ( alreadyAccepted ) == null ) { alreadyAccepted = com.google.gerrit.server.submit.SubmitDryRun.getAlreadyAccepted ( repo ) ; } return alreadyAccepted ; }
private void writeObject ( final java.io.ObjectOutputStream out ) throws java.io.IOException { com.google.gerrit.server.ioutil.BasicSerialization.writeString ( out , token ) ; }
public void execute ( ) { commentManager.newDraft ( cm , ( line + 1 ) ) ; }
protected void configure ( ) { bind ( java.nio.file.Path.class ) . annotatedWith ( com.google.gerrit.server.config.SitePath.class ) . toInstance ( sitePath ) ; bind ( java.lang.String.class ) . annotatedWith ( com.google.gerrit.server.securestore.SecureStoreClassName.class ) . toProvider ( com.google.inject.util.Providers.of ( getConfiguredSecureStoreClass ( ) ) ) ; }
public final boolean readChanges ( ) { return snapshot.get ( ) . readChanges ( ) ; }
public boolean shouldPublish ( ) { return ( config.isEnabled ( ) ) && ( config.shouldPublishOnCommentAdded ( ) ) ; }
public com.google.gerrit.server.notedb.ChangeNotes createForNew ( com.google.gerrit.reviewdb.client.Change change ) throws com.google.gwtorm.server.OrmException { return new com.google.gerrit.server.notedb.ChangeNotes ( repoManager , migration , allUsers , changeNoteUtil , commentsUtil , change.getProject ( ) , change ) . load ( ) ; }
public final short changesPerPage ( ) { short changesPerPage = get ( "changes_per_page" , AccountGeneralPreferences.DEFAULT_PAGESIZE ) ; return 0 < changesPerPage ? changesPerPage : com.google.gerrit.reviewdb.client.AccountGeneralPreferences.DEFAULT_PAGESIZE ; }
public void onSuccess ( final com.google.gerrit.client.account.ExternalIdDetail result ) { identites.display ( result ) ; identites.finishDisplay ( true ) ; }
public void stop ( ) { com.google.common.util.concurrent.MoreExecutors.shutdownAndAwaitTermination ( executor , java.lang.Long.MAX_VALUE , java.util.concurrent.TimeUnit.SECONDS ) ; }
public java.lang.Long call ( ) throws java.io.IOException , java.lang.InterruptedException { return writer.deleteDocuments ( term ) ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { showAddKeyBlock ( true ) ; }
public boolean match ( com.google.gerrit.server.group.InternalGroup group ) throws com.google.gwtorm.server.OrmException { try { return groupControlFactory.controlFor ( user , group.getGroupUUID ( ) ) . isVisible ( ) ; } catch ( com.google.gerrit.common.errors.NoSuchGroupException e ) { return false ; } }
void onEditMode ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { fileTableMode = FileTable.Mode.EDIT ; refreshFileTable ( ) ; editMode.setVisible ( false ) ; addFile.setVisible ( true ) ; deleteFile.setVisible ( true ) ; reviewMode.setVisible ( true ) ; }
public void testUsernameEmailPatternWithRegex ( ) { com.google.gerrit.server.project.Util.allow ( local , com.google.gerrit.common.data.Permission.READ , com.google.gerrit.server.project.Util.DEVS , "^refs/sb/${username}/heads/.*" ) ; com.google.gerrit.server.project.ProjectControl u = util.user ( local , "d.v@ger-rit.org" , com.google.gerrit.server.project.Util.DEVS ) ; com.google.gerrit.server.project.ProjectControl d = util.user ( local , "dev@ger-rit.org" , com.google.gerrit.server.project.Util.DEVS ) ; assertCannotRead ( "refs/sb/dev@ger-rit.org/heads/foobar" , u ) ; assertCanRead ( "refs/sb/dev@ger-rit.org/heads/foobar" , d ) ; }
public java.util.List < com.google.gerrit.extensions.common.AccountExternalIdInfo > getExternalIds ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return getExternalIds.apply ( account ) ; } catch ( com.google.gwtorm.server.OrmException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot get external IDs" , e ) ; } }
public java.lang.String apply ( com.google.gerrit.server.query.change.ChangeData cd ) { return java.lang.String.valueOf ( cd.getId ( ) . get ( ) ) ; }
public void testVerifyAgainstDifferentOperation ( ) throws java.lang.Exception { com.googlesource.gerrit.plugins.lfs.fs.LfsFsRequestAuthorizer.AuthInfo info = auth.generateAuthInfo ( "o" , org.eclipse.jgit.lfs.lib.LongObjectId.zeroId ( ) , 1 ) ; com.google.common.truth.Truth.assertThat ( auth.verifyAuthInfo ( info.authToken , "p" , org.eclipse.jgit.lfs.lib.LongObjectId.zeroId ( ) ) ) . isFalse ( ) ; }
public void run ( ) { lastFocused = cm ; updateActiveLine ( cm ) . run ( ) ; }
public void run ( ) throws com.google.gerrit.plugins.Failure , com.google.gerrit.plugins.UnloggedFailure , java.lang.Exception { final java.lang.String greeting = ( french ) ? "Bonjour " : "Hello " ; stdout.print ( ( ( greeting + ( name ) ) + "!\n" ) ) ; }
protected void rcptToAuthors ( final com.google.gerrit.extensions.api.changes.RecipientType rt ) { for ( final com.google.gerrit.reviewdb.client.Account.Id id : authors ) { add ( rt , id ) ; } }
public com.google.gerrit.server.change.PatchSetInserter setSshInfo ( com.google.gerrit.server.ssh.SshInfo sshInfo ) { this . sshInfo = sshInfo ; return this ; }
public static void updateDraft ( @ com.google.gerrit.common.Nullable java.lang.String project , com.google.gerrit.reviewdb.client.PatchSet.Id id , java.lang.String draftId , com.google.gerrit.client.changes.CommentInfo content , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.changes.CommentInfo > cb ) { com.google.gerrit.client.changes.CommentApi.revision ( project , id , "drafts" ) . id ( draftId ) . put ( content , cb ) ; }
public java.util.List < com.google.gerrit.server.query.change.ChangeData > toList ( ) { java.util.List < com.google.gerrit.server.query.change.ChangeData > r = rs.toList ( ) ; for ( com.google.gerrit.server.query.change.ChangeData cd : r ) { cd.cacheFromSource ( currSource ) ; } return r ; }
private com.google.gerrit.server.change.ChangeJson.ApprovalInfo approvalInfo ( com.google.gerrit.reviewdb.client.Account.Id id , java.lang.Integer value , java.sql.Timestamp date ) { com.google.gerrit.server.change.ChangeJson.ApprovalInfo ai = new com.google.gerrit.server.change.ChangeJson.ApprovalInfo ( id ) ; ai.value = value ; ai.date = date ; accountLoader.put ( ai ) ; return ai ; }
public java.util.Map < java.lang.String , com.google.gitiles.RepositoryDescription > listRepositories ( java.lang.String prefix , java.util.Set < java.lang.String > branches ) { return java.util.Collections.emptyMap ( ) ; }
public com.google.gerrit.server.notedb.NoteDbChangeState rebuild ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.Change.Id changeId ) throws com.google.gwtorm.server.OrmException { return null ; }
public java.lang.String getOrganisation ( ) { return gitHubRepository.getOrganisation ( ) ; }
public void onSuccess ( com.google.gerrit.client.info.ChangeInfo result ) { sent = true ; hide ( ) ; com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( result.legacyId ( ) ) ) ; }
protected void init ( ) throws com.google.gerrit.server.mail.EmailException { super . init ( ) ; ccAllApprovals ( ) ; bccStarredBy ( ) ; includeWatchers ( NotifyType.ALL_COMMENTS ) ; includeWatchers ( NotifyType.SUBMITTED_CHANGES ) ; }
private int getRandomExecutionDelay ( com.googlesrouce.gerrit.plugins.github.git.GitJob job ) { java.util.Random rnd = new java.util.Random ( ( ( java.lang.System.currentTimeMillis ( ) ) + ( job.hashCode ( ) ) ) ) ; return rnd.nextInt ( config.getJobExecTimeout ( ) ) ; }
void apply ( com.google.gerrit.server.notedb.ChangeUpdate update ) throws com.google.gwtorm.server.OrmException { checkUpdate ( update ) ; if ( ( c.revId ) == null ) { com.google.gerrit.server.CommentsUtil.setCommentRevId ( c , cache , change , ps ) ; } update.putComment ( PatchLineComment.Status.PUBLISHED , c ) ; }
public void printJson ( final java.lang.StringBuilder sb , final java.sql.Timestamp o ) { sb.append ( '"' ) ; sb.append ( com.google.gwtjsonrpc.client.JavaSqlTimestamp_JsonSerializer.toString ( o.getTime ( ) ) ) ; sb.append ( '"' ) ; }
java.util.Optional < com.google.gerrit.server.account.AccountState > maybeGet ( com.google.gerrit.reviewdb.client.Account.Id accountId ) ;
public void setUpMocks ( ) { servlet = new com.ericsson.gerrit.plugins.highavailability.forwarder.rest.IndexGroupRestApiServlet ( indexerMock ) ; uuid = new com.google.gerrit.reviewdb.client.AccountGroup.UUID ( com.ericsson.gerrit.plugins.highavailability.forwarder.rest.IndexGroupRestApiServletTest.UUID ) ; org.mockito.Mockito.when ( requestMock.getPathInfo ( ) ) . thenReturn ( ( "/index/group/" + ( com.ericsson.gerrit.plugins.highavailability.forwarder.rest.IndexGroupRestApiServletTest.UUID ) ) ) ; }
public < T > T execute ( com.google.gerrit.server.update.RetryHelper.Action < T > action ) throws com.google.gerrit.extensions.restapi.RestApiException , com.google.gerrit.server.update.UpdateException { return execute ( action , com.google.gerrit.server.update.RetryHelper.defaults ( ) ) ; }
public boolean canAbandon ( ) { return ( ( ( isOwner ( ) ) || ( getRefControl ( ) . isOwner ( ) ) ) || ( getProjectControl ( ) . isOwner ( ) ) ) || ( getCurrentUser ( ) . isAdministrator ( ) ) ; }
public void emptyExceptSubject ( ) throws java.lang.Exception { com.google.gerrit.server.notedb.ChangeUpdate update = newUpdate ( newChange ( ) , changeOwner ) ; update.setSubjectForCommit ( "Create change" ) ; update.commit ( ) ; com.google.common.truth.Truth.assertThat ( update.getRevision ( ) ) . isNotNull ( ) ; }
public void onSuccess ( final com.google.gerrit.client.HostPageData result ) { com.google.gerrit.client.rpc.Common.setGerritConfig ( result.config ) ; if ( ( result.userAccount ) != null ) { com.google.gerrit.client.Gerrit.myAccount = result.userAccount ; com.google.gerrit.client.Gerrit.applyUserPreferences ( ) ; } onModuleLoad2 ( ) ; }
protected void destroyCommentRow ( final int row ) { super . destroyCommentRow ( row ) ; if ( row == ( ( R_HEAD ) + 1 ) ) { table.removeRow ( row ) ; isFileCommentBorderRowExist = false ; } }
public static com.google.gerrit.acceptance.git.GitUtil.Commit createCommit ( org.eclipse.jgit.api.Git git , org.eclipse.jgit.lib.PersonIdent i , java.lang.String msg ) throws java.io.IOException , org.eclipse.jgit.api.errors.GitAPIException { return com.google.gerrit.acceptance.git.GitUtil.createCommit ( git , i , msg , null ) ; }
public void onSuccess ( com.google.gerrit.client.changes.CommentInfo result ) { enableEdit ( true ) ; set ( result ) ; setEdit ( false ) ; if ( autoClosed ) { setOpen ( false ) ; } getCommentManager ( ) . setUnsaved ( this , false ) ; }
public void want ( final java.util.Collection < com.google.gerrit.reviewdb.Account.Id > ids ) { wants.addAll ( ids ) ; }
public com.google.gerrit.extensions.common.AccountInfo setAssignee ( com.google.gerrit.extensions.api.changes.AssigneeInput input ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return putAssignee.apply ( change , input ) ; } catch ( com.google.gerrit.server.update.UpdateException | java.io.IOException | com.google.gwtorm.server.OrmException | com.google.gerrit.server.permissions.PermissionBackendException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot set assignee" , e ) ; } }
com.google.gerrit.httpd.rpc.project.ReviewProjectAccess create ( @ com.google.inject.assistedinject.Assisted ( value = "projectName" ) com.google.gerrit.reviewdb.client.Project.NameKey projectName , @ com.google.gerrit.common.Nullable org.eclipse.jgit.lib.ObjectId base , @ com.google.inject.assistedinject.Assisted java.util.List < com.google.gerrit.common.data.AccessSection > sectionList , @ com.google.gerrit.common.Nullable com.google.gerrit.reviewdb.client.Project.NameKey parentProjectName , @ com.google.gerrit.common.Nullable java.lang.String message ) ;
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { final java.lang.String to = com.google.gwt.user.client.History.getToken ( ) ; new com.google.gerrit.client.auth.openid.OpenIdSignInDialog ( com.google.gerrit.common.auth.SignInMode.LINK_IDENTIY , to , null ) . center ( ) ; }
public com.google.gerrit.reviewdb.client.AccountGroup toAccountGroup ( ) { return com.google.gerrit.common.data.GroupDescriptions.toAccountGroup ( getGroup ( ) ) ; }
public java.lang.Boolean call ( ) throws com.google.gerrit.server.project.NoSuchProjectException { return shouldReplicate ( controlFor ( project ) ) ; }
public void updateSchema ( com.google.gwtorm.server.StatementExecutor e ) { throw new com.google.gerrit.testing.DisabledReviewDb.Disabled ( ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { gotoSibling ( ( - 1 ) ) ; }
public void removeHandler ( ) { state.remove ( cmdSet ) ; }
protected void configure ( ) { listener ( ) . to ( com.google.gerrit.sshd.SshLog.class ) ; listener ( ) . to ( com.google.gerrit.sshd.SshDaemon.class ) ; }
public void visibleProjectDetails ( final com.google.gwtjsonrpc.common.AsyncCallback < java.util.List < com.google.gerrit.common.data.ProjectDetail > > callback ) { visibleProjectDetailsFactory.create ( ) . to ( callback ) ; }
void at ( int line ) { at ( net.codemirror.lib.Pos.create ( line ) , net.codemirror.lib.Pos.create ( ( line + 1 ) ) ) ; }
protected void updateCursor ( final com.google.gerrit.reviewdb.client.PatchLineComment newComment ) { }
private void assertCreateChange ( java.lang.String ref , com.google.gerrit.server.project.ProjectControl u ) { boolean create = u.asForProject ( ) . ref ( ref ) . testOrFalse ( RefPermission.CREATE_CHANGE ) ; com.google.common.truth.Truth.assertThat ( create ) . named ( ( "can create change " + ref ) ) . isTrue ( ) ; }
public void onClick ( final com.google.gwt.user.client.ui.Widget sender ) { addTxt.setText ( "" ) ; addTxt.setFocus ( true ) ; }
protected void onOpenRow ( final int row ) { if ( row > 0 ) { com.google.gerrit.reviewdb.RefRight right = getRowItem ( row ) . getRight ( ) ; rightEditor.load ( right , groups.get ( right.getAccountGroupId ( ) ) ) ; } }
private static com.google.gwt.user.client.ui.ListBox newInheritedBooleanBox ( ) { com.google.gwt.user.client.ui.ListBox box = new com.google.gwt.user.client.ui.ListBox ( ) ; for ( com.google.gerrit.extensions.client.InheritableBoolean b : com.google.gerrit.extensions.client.InheritableBoolean.values ( ) ) { box.addItem ( b.name ( ) , b.name ( ) ) ; } return box ; }
public static com.google.inject.Key < org.apache.sshd.server.Command > key ( final com.google.gerrit.sshd.CommandName parent , final java.lang.String name ) { return com.google.inject.Key.get ( org.apache.sshd.server.Command.class , com.google.gerrit.sshd.Commands.named ( parent , name ) ) ; }
public java.lang.String getSshKey ( ) { return ( sshKey ) != null ? ( sshKey.sshPublicKey ( ) ) + "\n" : null ; }
private void banner ( ) { java.lang.System.err.format ( "Gerrit Code Review %s - Interactive Prolog Shell" , com.google.gerrit.common.Version.getVersion ( ) ) ; java.lang.System.err.println ( ) ; java.lang.System.err.println ( "(type Ctrl-D or \"halt.\" to exit, \"[\'path/to/file.pl\'].\" to load a file)" ) ; java.lang.System.err.println ( ) ; java.lang.System.err.flush ( ) ; }
public boolean execute ( ) { java.lang.String t = message.getText ( ) ; if ( t != null ) { message.setCursorPos ( t.length ( ) ) ; } return false ; }
protected void configureServlets ( ) { bind ( com.googlesource.gerrit.plugins.manager.AvailablePluginsCollection.class ) ; bind ( com.googlesource.gerrit.plugins.manager.repository.PluginsRepository.class ) . to ( com.googlesource.gerrit.plugins.manager.repository.JenkinsCiPluginsRepository.class ) ; serve ( "/available*" ) . with ( com.googlesource.gerrit.plugins.manager.PluginManagerRestApiServlet.class ) ; filterRegex ( ".*\\.js" ) . through ( com.googlesource.gerrit.plugins.manager.XAuthFilter.class ) ; }
public void loadGerritConfig ( final com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.data.GerritConfig > callback ) { callback.onSuccess ( com.google.gerrit.client.rpc.Common.getGerritConfig ( ) ) ; }
public int getCardinality ( ) { return ( source ) != null ? source.getCardinality ( ) : limit ( ) ; }
void addRight ( com.google.gerrit.reviewdb.Project.NameKey projectName , com.google.gerrit.reviewdb.ApprovalCategory.Id categoryId , java.lang.String groupName , java.lang.String refName , short min , short max , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.common.data.ProjectDetail > callback ) ;
default com.google.gerrit.index.query.Predicate < com.google.gerrit.index.project.ProjectData > keyPredicate ( com.google.gerrit.reviewdb.client.Project.NameKey nameKey ) { return new com.google.gerrit.index.project.ProjectPredicate ( ProjectField.NAME , nameKey.get ( ) ) ; }
private static void checkCounterDescription ( com.google.gerrit.metrics.Description desc ) { com.google.common.base.Preconditions.checkArgument ( ( ! ( desc.isConstant ( ) ) ) , "counters must not be constant" ) ; com.google.common.base.Preconditions.checkArgument ( ( ! ( desc.isGauge ( ) ) ) , "counters must not be gauge" ) ; }
public void createMergeChange_Conflicts_Ours ( ) throws java.lang.Exception { changeInTwoBranches ( "branchA" , "shared.txt" , "branchB" , "shared.txt" ) ; com.google.gerrit.extensions.common.ChangeInput in = newMergeChangeInput ( "branchA" , "branchB" , "ours" ) ; assertCreateSucceeds ( in ) ; }
public void onSignIn ( ) { }
public net.sf.ehcache.statistics.LiveCacheStatistics getLiveCacheStatistics ( ) throws java.lang.IllegalStateException { return self ( ) . getLiveCacheStatistics ( ) ; }
com.google.gerrit.server.query.change.ChangeData createOnlyWhenNoteDbDisabled ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.Change.Id id ) ;
boolean isOwner ( ) { return ( ( isDeclaredOwner ( ) ) && ( controlForRef ( "refs/*" ) . canPerform ( Permission.OWNER ) ) ) || ( isAdmin ( ) ) ; }
public com.googlesource.gerrit.plugins.its.base.validation.ItsAssociationPolicy getItsAssociationPolicy ( ) { com.googlesource.gerrit.plugins.its.base.validation.ItsAssociationPolicy legacyItsAssociationPolicy = gerritConfig.getEnum ( "commentlink" , getCommentLinkName ( ) , "association" , ItsAssociationPolicy.OPTIONAL ) ; return getPluginConfigEnum ( "association" , legacyItsAssociationPolicy ) ; }
public java.util.stream.Stream < com.google.gerrit.reviewdb.client.AccountGroup > getAll ( com.google.gerrit.reviewdb.server.ReviewDb db ) throws com.google.gwtorm.server.OrmException { return com.google.common.collect.Streams.stream ( db.accountGroups ( ) . all ( ) ) ; }
private void setPaddingHeight ( int height ) { wrapper.element.getStyle ( ) . setHeight ( ( ( double ) ( height ) ) , Unit.PX ) ; wrapper.widget.changed ( ) ; }
public void onRpcStart ( com.google.gwtjsonrpc.client.RpcStartEvent event ) ;
void replicate ( org.eclipse.jgit.lib.RefUpdate ru ) { replication.fire ( projectName , ru ) ; }
private java.lang.String getPassword ( ) { final java.lang.String pass = gerritConfig.getString ( pluginName , null , com.googlesource.gerrit.plugins.hooks.bz.BugzillaItsFacade.GERRIT_CONFIG_PASSWORD ) ; return pass ; }
public int getTabIndex ( ) { return suggestBox.getTabIndex ( ) ; }
private com.google.gerrit.server.project.ProjectState getProjectState ( ) { return projectControl.getProjectState ( ) ; }
public void listTagsWithStartOption ( ) throws java.lang.Exception { createTags ( ) ; java.util.List < com.google.gerrit.extensions.api.projects.TagInfo > result = getTags ( ) . withStart ( 1 ) . get ( ) ; assertTagList ( com.google.common.collect.FluentIterable.from ( com.google.gerrit.acceptance.rest.project.TagsIT.testTags ) . skip ( 1 ) , result ) ; }
public void onSend ( ) { Util.MANAGE_SVC.abandonChange ( getPatchSetId ( ) , getMessageText ( ) , createCallback ( ) ) ; }
public java.io.PrintWriter getWriter ( ) throws java.io.IOException { return new java.io.PrintWriter ( new java.io.OutputStreamWriter ( outputStream , characterEncoding ) ) ; }
public com.google.common.util.concurrent.CheckedFuture < ? , java.io.IOException > indexAsync ( com.google.gerrit.server.query.change.ChangeData cd ) { return ( executor ) != null ? submit ( new com.google.gerrit.server.index.ChangeIndexer.Task ( cd , false ) ) : com.google.common.util.concurrent.Futures.< java.lang.Object , java.io.IOException > immediateCheckedFuture ( null ) ; }
protected com.google.gerrit.pgm.CmdLineParser newCmdLineParser ( ) { return new com.google.gerrit.pgm.CmdLineParser ( this ) ; }
com.google.gerrit.server.project.ChangeControl create ( com.google.gerrit.server.project.RefControl refControl , com.google.gerrit.server.notedb.ChangeNotes notes ) { return new com.google.gerrit.server.project.ChangeControl ( changeDataFactory , approvalsUtil , refControl , notes ) ; }
public void addReviewerToReviewableChangeInNoteDbByOwnerCcingSelfNotifyNone ( ) throws java.lang.Exception { com.google.common.truth.TruthJUnit.assume ( ) . that ( notesMigration.readChanges ( ) ) . isTrue ( ) ; forAll ( ( adder ) -> { com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableChange ( ) ; com.google.gerrit.acceptance.TestAccount reviewer = accountCreator.create ( "added" , "added@example.com" , "added" ) ; addReviewer ( adder , sc.changeId , sc.owner , reviewer.email , com.google.gerrit.extensions.client.GeneralPreferencesInfo.EmailStrategy.CC_ON_OWN_COMMENTS , com.google.gerrit.extensions.api.changes.NotifyHandling.NONE ) ; assertThat ( sender ) . notSent ( ) ; } ) ; }
public int estimateCost ( ) { if ( ! ( isMatchable ( ) ) ) { return 1 ; } return asMatchable ( ) . getCost ( ) ; }
public com.google.gerrit.server.query.change.QueryOptions withStart ( int newStart ) { return com.google.gerrit.server.query.change.QueryOptions.create ( config ( ) , newStart , limit ( ) , fields ( ) ) ; }
public com.google.gerrit.extensions.auth.oauth.OAuthUserInfo getUserInfo ( com.google.gerrit.extensions.auth.oauth.OAuthToken token ) throws java.io.IOException { com.googlesource.gerrit.plugins.cfoauth.AccessToken accessToken = uaaClient.toAccessToken ( token.getToken ( ) ) ; java.lang.String displayName = uaaClient.getDisplayName ( token.getToken ( ) ) ; return getAsOAuthUserInfo ( accessToken , displayName ) ; }
java.lang.Iterable < com.google.gwtorm.jdbc.TestJdbcAccess.Data > createIterable ( com.google.gwtorm.jdbc.TestJdbcAccess.Data ... data ) { java.util.List < com.google.gwtorm.jdbc.TestJdbcAccess.Data > list = java.util.Arrays.asList ( data ) ; return java.util.Collections.unmodifiableList ( list ) ; }
public final com.google.common.collect.ImmutableMap < java.lang.String , com.google.gerrit.index.FieldDef < T , ? > > getFields ( ) { return fields ; }
public boolean supportsTeamMembershipChanges ( com.gitblit.models.TeamModel team ) { return false ; }
public void log ( final org.eclipse.jetty.server.Request req , final org.eclipse.jetty.server.Response rsp ) { com.google.gerrit.server.CurrentUser user = ( ( com.google.gerrit.server.CurrentUser ) ( req.getAttribute ( GetUserFilter.REQ_ATTR_KEY ) ) ) ; doLog ( req , rsp , user ) ; }
public void okWhenEmpty ( ) { java.util.Collection < com.google.gerrit.common.data.SubmitRecord > submitRecords = new java.util.ArrayList < > ( ) ; com.google.common.truth.Truth.assertThat ( com.google.gerrit.common.data.SubmitRecord.allRecordsOK ( submitRecords ) ) . isTrue ( ) ; }
public com.google.gerrit.server.change.ChangeJson addOptions ( java.util.Collection < com.google.gerrit.common.changes.ListChangesOption > o ) { options.addAll ( o ) ; return this ; }
protected void configureServlets ( ) { serveRegex ( "/index/\\d+$" ) . with ( com.ericsson.gerrit.plugins.highavailability.forwarder.rest.IndexRestApiServlet.class ) ; serve ( "/event" ) . with ( com.ericsson.gerrit.plugins.highavailability.forwarder.rest.EventRestApiServlet.class ) ; }
public void deleteComment ( com.google.gerrit.reviewdb.client.Comment c ) { verifyComment ( c ) ; createDraftUpdateIfNull ( ) . deleteComment ( c ) ; }
public void finishDisplay ( ) { super . finishDisplay ( ) ; display ( ) ; }
private org.eclipse.jgit.lib.ObjectInserter getInserter ( ) { if ( ( inserter ) == null ) { inserter = git.newObjectInserter ( ) ; } return inserter ; }
private java.util.List < com.google.gerrit.server.query.change.ChangeData > getChangesByTopic ( java.lang.String topic ) { try { return queryProvider.get ( ) . byExactTopicOpen ( topic ) ; } catch ( com.google.gwtorm.server.OrmException e ) { throw new com.google.gwtorm.server.OrmRuntimeException ( e ) ; } }
public final native void setSelection ( net.codemirror.lib.Pos p ) ;
private void downloadOptionalLibraries ( ) { libraries.bouncyCastle.downloadOptional ( ) ; loadSiteLib ( ) ; }
private static java.lang.String changePermissionName ( com.google.gerrit.server.permissions.ChangePermission changePermission ) { return com.google.gerrit.server.permissions.DefaultPermissionMappings.changePermissionName ( changePermission ) . orElseThrow ( ( ) -> new java.lang.IllegalStateException ( ( "no name for " + changePermission ) ) ) ; }
public void onFailure ( final java.lang.Throwable caught ) { if ( com.google.gerrit.client.rpc.RestApi.isNotFound ( caught ) ) { com.google.gerrit.client.Gerrit.getUserAccount ( ) . setUserName ( null ) ; display ( ) ; } else { super . onFailure ( caught ) ; } }
public com.google.gerrit.server.query.change.InternalChangeQuery enforceVisibility ( boolean enforce ) { qp.enforceVisibility ( enforce ) ; return this ; }
public static java.lang.String getJarPluginName ( java.nio.file.Path srcPath ) throws java.io.IOException { try ( java.util.jar.JarFile jarFile = new java.util.jar.JarFile ( srcPath.toFile ( ) ) ) { return jarFile.getManifest ( ) . getMainAttributes ( ) . getValue ( "Gerrit-PluginName" ) ; } }
public static java.lang.String generateRandomKey ( ) { final byte [ ] r = new byte [ 26 ] ; new java.security.SecureRandom ( ) . nextBytes ( r ) ; return com.google.gwtjsonrpc.server.SignedToken.encodeBase64 ( r ) ; }
public void multipleHashtags ( ) throws java.lang.Exception { java.lang.String commitMessage = "#Subject\n\n#Hashtag\n\nLine 2" ; com.google.common.truth.Truth.assertThat ( ( ( java.lang.Iterable < ? > ) ( com.google.gerrit.server.change.HashtagsUtil.extractTags ( commitMessage ) ) ) ) . containsExactlyElementsIn ( com.google.common.collect.Sets.newHashSet ( "Subject" , "Hashtag" ) ) ; }
protected java.lang.Iterable < com.google.gerrit.reviewdb.client.PatchLineComment > listComments ( com.google.gerrit.server.change.RevisionResource rsrc ) throws com.google.gwtorm.server.OrmException { return plcUtil.draftByPatchSetAuthor ( db.get ( ) , rsrc.getPatchSet ( ) . getId ( ) , rsrc.getAccountId ( ) , rsrc.getNotes ( ) ) ; }
private void openFooter ( ) { if ( ! ( inFooter ) ) { inFooter = true ; body.append ( "-- \n" ) ; } }
public com.google.gerrit.reviewdb.AccountGroup get ( final com.google.gerrit.reviewdb.AccountGroup.NameKey name ) { return byName.get ( name ) ; }
public void asyncStarredChanges ( ) { if ( ( ( starredChanges ) == null ) && ( ( starredChangesUtil ) != null ) ) { starredQuery = starredChangesUtil.query ( accountId ) ; } }
public void changeProjectSettings ( final com.google.gerrit.reviewdb.client.Project update , final com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.ProjectDetail > callback ) { changeProjectSettingsFactory.create ( update ) . to ( callback ) ; }
public static java.lang.String toChangeInEditMode ( @ com.google.gerrit.common.Nullable com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.reviewdb.client.Change.Id c ) { return ( com.google.gerrit.common.PageLinks.toChangeNoSlash ( project , c ) ) + ",edit/" ; }
public static com.google.gerrit.client.rpc.RestApi edit ( @ com.google.gerrit.common.Nullable java.lang.String project , int id ) { return com.google.gerrit.client.changes.ChangeApi.change ( project , id ) . view ( "edit" ) ; }
public java.sql.Timestamp fromJson ( final java.lang.Object o ) { if ( o != null ) { return com.google.gwtjsonrpc.client.JavaSqlTimestamp_JsonSerializer.parseTimestamp ( ( ( java.lang.String ) ( o ) ) ) ; } return null ; }
public com.google.gerrit.server.change.Description getDescription ( com.google.gerrit.server.change.ChangeResource rsrc ) { return new com.google.gerrit.extensions.webui.UiAction.Description ( ) . setLabel ( "Unignore" ) . setTitle ( "Unignore the change" ) . setVisible ( isIgnored ( rsrc ) ) ; }
public void schemaThrowsExceptionWhenLookingUpForChange ( ) throws java.lang.Exception { setupPostMocks ( com.ericsson.gerrit.plugins.syncindex.SyncIndexRestApiServletTest.CHANGE_EXISTS , com.ericsson.gerrit.plugins.syncindex.SyncIndexRestApiServletTest.THROW_ORM_EXCEPTION ) ; syncIndexRestApiServlet.doPost ( req , rsp ) ; org.mockito.Mockito.verify ( rsp ) . sendError ( javax.servlet.http.HttpServletResponse.SC_NOT_FOUND , "Error trying to find a change \n" ) ; }
private com.google.common.util.concurrent.CheckedFuture < java.lang.Boolean , java.io.IOException > reindexIfStaleAsync ( com.google.gerrit.reviewdb.client.Account.Id id ) { return com.google.common.util.concurrent.Futures.makeChecked ( com.google.common.util.concurrent.Futures.nonCancellationPropagating ( batchExecutor.submit ( ( ) -> reindexIfStale ( id ) ) ) , IndexUtils.MAPPER ) ; }
public void evict ( java.lang.String username ) { cache.remove ( new com.google.gerrit.reviewdb.Account.Username ( username ) ) ; }
java.util.Map < java.lang.String , com.google.gerrit.extensions.common.GpgKeyInfo > putGpgKeys ( java.util.List < java.lang.String > add , java.util.List < java.lang.String > remove ) throws com.google.gerrit.extensions.restapi.RestApiException ;
com.google.gerrit.server.change.RebaseChangeOp create ( com.google.gerrit.server.project.ChangeControl ctl , com.google.gerrit.reviewdb.client.PatchSet originalPatchSet , org.eclipse.jgit.lib.ObjectId baseCommitId ) ;
public void onSuccess ( final com.google.gwtjsonrpc.common.VoidResult result ) { if ( ( ++ ( done ) ) == ( commentEditors.size ( ) ) ) { onSend2 ( submit ) ; } }
public static void fireShowChange ( com.google.gerrit.client.info.ChangeInfo change , com.google.gerrit.client.info.ChangeInfo.RevisionInfo rev ) { com.google.gerrit.client.api.ApiGlue.fireEvent ( "showchange" , change , rev ) ; }
private void commit ( com.google.gerrit.server.account.VersionedAuthorizedKeys authorizedKeys ) throws java.io.IOException { try ( com.google.gerrit.server.git.meta.MetaDataUpdate md = metaDataUpdateFactory.get ( ) . create ( allUsersName , userFactory.create ( authorizedKeys.accountId ) ) ) { authorizedKeys.commit ( md ) ; } }
public com.google.gerrit.server.IdentifiedUser runAs ( com.google.gerrit.reviewdb.client.Account.Id id , com.google.gerrit.server.CurrentUser caller ) { return new com.google.gerrit.server.IdentifiedUser ( capabilityControlFactory , starredChangesUtil , authConfig , realm , anonymousCowardName , canonicalUrl , accountCache , groupBackend , disableReverseDnsLookup , remotePeerProvider , dbProvider , id , caller ) ; }
int getEnd ( com.google.gerrit.prettify.common.BaseEdit edit ) { return edit.getEndA ( ) ; }
public static < T > com.google.inject.binder.LinkedBindingBuilder < T > bind ( com.google.inject.Binder binder , java.lang.Class < T > type , com.google.inject.name.Named name ) { binder.disableCircularProxies ( ) ; return com.google.gerrit.extensions.registration.DynamicSet.bind ( binder , com.google.inject.TypeLiteral.get ( type ) ) ; }
com.google.gerrit.client.diff.SkipManager getSkipManager ( ) { return skipManager ; }
public java.util.List < com.google.gerrit.client.reviewdb.AccountSshKey > run ( com.google.gerrit.client.reviewdb.ReviewDb db ) throws com.google.gwtorm.client.OrmException { return db.accountSshKeys ( ) . byAccount ( com.google.gerrit.client.rpc.RpcUtil.getAccountId ( ) ) . toList ( ) ; }
protected java.lang.Object createServiceHandle ( ) throws java.lang.Exception { return new com.google.gerrit.server.patch.PatchDetailServiceImpl ( server , registry ) ; }
public void fooSubdirText ( ) throws java.lang.Exception { com.google.gitiles.FakeHttpServletResponse res = buildText ( "/foo/" ) ; com.google.common.truth.Truth.assertThat ( new java.lang.String ( res.getActualBody ( ) , java.nio.charset.StandardCharsets.UTF_8 ) ) . isEqualTo ( "bar/repo\n" ) ; }
public void parse ( ) { generalPreferences = parseGeneralPreferences ( null ) ; diffPreferences = parseDiffPreferences ( null ) ; editPreferences = parseEditPreferences ( null ) ; }
public void setStatus ( com.google.gerrit.reviewdb.client.Change.Status status ) { com.google.common.base.Preconditions.checkArgument ( ( status != ( com.google.gerrit.reviewdb.client.PatchLineComment.Status.MERGED ) ) , "use merge(Iterable<SubmitRecord>)" ) ; this . status = status ; }
public void addChange ( java.lang.String id , java.util.Map < com.google.gerrit.reviewdb.client.Change.Id , com.google.gerrit.server.change.ChangeResource > changes , com.google.gerrit.server.project.ProjectState projectState ) throws com.google.gerrit.server.permissions.PermissionBackendException , com.google.gerrit.sshd.BaseCommand.UnloggedFailure , com.google.gwtorm.server.OrmException { addChange ( id , changes , projectState , true ) ; }
public static void replyError ( javax.servlet.http.HttpServletRequest req , javax.servlet.http.HttpServletResponse res , int statusCode , java.lang.String msg , @ com.google.gerrit.common.Nullable java.lang.Throwable err ) throws java.io.IOException { com.google.gerrit.httpd.restapi.RestApiServlet.replyError ( req , res , statusCode , msg , CacheControl.NONE , err ) ; }
public com.google.gerrit.common.data.ReviewResult call ( ) throws com.google.gerrit.server.mail.EmailException , com.google.gerrit.server.project.InvalidChangeOperationException , com.google.gerrit.server.project.NoSuchChangeException , com.google.gwtorm.server.OrmException { throw new java.lang.UnsupportedOperationException ( ) ; }
public com.google.gerrit.server.plugins.ServerPlugin get ( java.nio.file.Path srcPath , org.eclipse.jgit.internal.storage.file.FileSnapshot snapshot , com.google.gerrit.server.plugins.PluginDescription pluginDescription ) throws com.google.gerrit.server.plugins.InvalidPluginException { return providerOf ( srcPath ) . get ( srcPath , snapshot , pluginDescription ) ; }
public void deleteExternalIds ( final java.util.Set < com.google.gerrit.reviewdb.client.AccountExternalId.Key > keys , final com.google.gwtjsonrpc.common.AsyncCallback < java.util.Set < com.google.gerrit.reviewdb.client.AccountExternalId.Key > > callback ) { deleteExternalIdsFactory.create ( keys ) . to ( callback ) ; }
private void redisplay ( ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( patchSet.getId ( ) . getParentKey ( ) ) , new com.google.gerrit.client.changes.ChangeScreen ( patchSet.getId ( ) . getParentKey ( ) ) ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { toggleReviewed ( ) . run ( ) ; }
public void deleteFile ( org.eclipse.jgit.lib.Repository repository , com.google.gerrit.server.project.ChangeControl changeControl , java.lang.String file ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.server.project.InvalidChangeOperationException , com.google.gwtorm.server.OrmException , java.io.IOException { modifyTree ( repository , changeControl , new com.google.gerrit.server.edit.tree.DeleteFileModification ( file ) ) ; }
public com.googlecode.prolog_cafe.lang.NumberTerm and ( com.googlecode.prolog_cafe.lang.NumberTerm t ) { if ( t instanceof com.googlecode.prolog_cafe.lang.DoubleTerm ) throw new com.googlecode.prolog_cafe.exceptions.IllegalTypeException ( "integer" , t ) ; return new com.googlecode.prolog_cafe.lang.IntegerTerm ( ( ( this . val ) & ( t.intValue ( ) ) ) ) ; }
public void evictGroupsMembers ( ) throws java.lang.Exception { configureMocksFor ( Constants.GROUPS_MEMBERS ) ; verifyResponseIsOK ( ) ; }
private com.google.gerrit.server.account.WatchConfig.NotifyValue parseNotifyValue ( java.lang.String notifyValue ) { return com.google.gerrit.server.account.WatchConfig.NotifyValue.parse ( new com.google.gerrit.reviewdb.client.Account.Id ( 1000000 ) , "project" , notifyValue , this ) ; }
public void testTagBr ( ) { final com.google.gwtexpui.safehtml.client.SafeHtmlBuilder b = new com.google.gwtexpui.safehtml.client.SafeHtmlBuilder ( ) ; com.google.common.truth.Truth.assertThat ( b ) . isSameAs ( b.br ( ) ) ; com.google.common.truth.Truth.assertThat ( b.asString ( ) ) . isEqualTo ( "<br />" ) ; }
public void onSuccess ( com.google.gerrit.client.changes.ReviewInfo result ) { reviewed.setValue ( true , false ) ; }
public void suggestReviewersNoResult1 ( ) throws java.lang.Exception { java.lang.String changeId = createChange ( ) . getChangeId ( ) ; java.util.List < com.google.gerrit.extensions.common.SuggestedReviewerInfo > reviewers = suggestReviewers ( changeId , name ( "u" ) , 6 ) ; com.google.common.truth.Truth.assertThat ( reviewers ) . isEmpty ( ) ; }
public com.google.gerrit.reviewdb.client.Change update ( com.google.gerrit.reviewdb.client.Change change ) { change.setTopic ( com.google.common.base.Strings.emptyToNull ( newTopicName ) ) ; com.google.gerrit.server.ChangeUtil.updated ( change ) ; return change ; }
public int nextChangeId ( ) throws com.google.gwtorm.server.OrmException { if ( ! ( migration.readChangeSequence ( ) ) ) { return db.get ( ) . nextChangeId ( ) ; } return changeSeq.next ( ) ; }
protected PatchScreen.Type getPatchScreenType ( ) { return PatchScreen.Type.SIDE_BY_SIDE ; }
void audit ( com.google.gerrit.sshd.SshScope.Context ctx , java.lang.Object result , com.google.gerrit.sshd.DispatchCommand cmd ) { audit ( ctx , result , extractWhat ( cmd ) , extractParameters ( cmd ) ) ; }
int getCookieAge ( final com.google.gerrit.server.http.WebSessionManager.Val val ) { if ( val.isPersistentCookie ( ) ) { return ( ( int ) ( self.getTimeToLive ( java.util.concurrent.TimeUnit.SECONDS ) ) ) ; } else { return - 1 ; } }
void addGroupInclude ( com.google.gerrit.reviewdb.client.AccountGroup.Id groupId , com.google.gerrit.reviewdb.client.AccountGroup.UUID incGroupUUID , java.lang.String incGroupName , com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.GroupDetail > callback ) ;
public static com.google.gerrit.sshd.CommandName named ( final java.lang.String value ) { return new com.google.gerrit.sshd.AutoAnnotation_Commands_named ( value ) ; }
public void putApproval ( java.lang.String label , short value ) { approvals.put ( label , com.google.common.base.Optional.of ( value ) ) ; }
public void changeAssigneeOnReviewableChange ( ) throws java.lang.Exception { com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableChange ( ) ; com.google.gerrit.acceptance.TestAccount other = accountCreator.create ( "other" , "other@example.com" , "other" ) ; assign ( sc , sc.owner , other ) ; sender.clear ( ) ; assign ( sc , sc.owner , sc.assignee ) ; assertThat ( sender ) . sent ( "setassignee" , sc ) . notTo ( sc.owner , sc.reviewer , sc.ccer , sc.starrer , other ) . to ( sc.reviewerByEmail ) . cc ( sc.ccerByEmail ) . to ( sc.assignee ) ; }
private void enableForm ( final boolean on ) { submitType.setEnabled ( on ) ; ownerTxtBox.setEnabled ( on ) ; descTxt.setEnabled ( on ) ; useContributorAgreements.setEnabled ( on ) ; useSignedOffBy.setEnabled ( on ) ; }
public java.util.concurrent.ScheduledFuture < ? > start ( long delay , java.util.concurrent.TimeUnit unit ) { return workQueue.getDefaultQueue ( ) . schedule ( this , delay , unit ) ; }
private java.lang.String prefixRef ( java.lang.String ref ) { return ref.startsWith ( org.eclipse.jgit.lib.Constants.R_REFS ) ? ref : ( org.eclipse.jgit.lib.Constants.R_HEADS ) + ref ; }
private com.google.gerrit.server.git.strategy.SubmitStrategy createStrategy ( final com.google.gerrit.extensions.common.SubmitType submitType ) throws com.google.gerrit.server.git.MergeException , com.google.gerrit.server.project.NoSuchProjectException { return submitStrategyFactory.create ( submitType , db , repo , rw , inserter , canMergeFlag , getAlreadyAccepted ( branchTip ) , destBranch ) ; }
private java.lang.String urlRebase ( ) { return ( "/changes/" + ( change.getChangeId ( ) ) ) + "/rebase_edit" ; }
protected com.google.gerrit.server.CurrentUser getUser ( ) { return currentUser.get ( ) ; }
private static final native com.google.gwtjsonrpc.client.JsonCall.RpcResult parse ( com.google.gwt.core.client.JavaScriptObject parserFunction , java.lang.String json ) ;
private static void assertOkStatus ( org.eclipse.jgit.transport.PushResult result , java.lang.String ref ) { com.google.gerrit.acceptance.git.PushForReviewIT.assertStatus ( Status.OK , null , result , ref ) ; }
public com.google.gerrit.server.patch.PatchList call ( ) throws com.google.gerrit.server.patch.PatchListNotAvailableException , java.io.IOException { try ( org.eclipse.jgit.lib.Repository repo = repoManager.openRepository ( project ) ) { return readPatchList ( key , repo ) ; } }
protected java.lang.String name ( java.lang.String name ) { return ( resourcePrefix ) + name ; }
com.google.gerrit.sshd.DispatchCommand create ( java.lang.String prefix , java.util.Map < java.lang.String , com.google.inject.Provider < org.apache.sshd.server.Command > > map ) ;
public int hashCode ( ) { return java.util.Objects.hash ( value , expiresAt , userInfo ) ; }
public org.kohsuke.github.GitHub login ( com.googlesource.gerrit.plugins.github.oauth.OAuthProtocol.AccessToken authToken ) throws java.io.IOException { this . token = authToken ; this . hub = org.kohsuke.github.GitHub.connectUsingOAuth ( authToken.access_token ) ; return this . hub ; }
com.google.gerrit.acceptance.PushOneCommit create ( com.google.gerrit.reviewdb.server.ReviewDb db , org.eclipse.jgit.lib.PersonIdent i , org.eclipse.jgit.junit.TestRepository < ? > testRepo , @ com.google.inject.assistedinject.Assisted ( value = "subject" ) java.lang.String subject , @ com.google.inject.assistedinject.Assisted ( value = "fileName" ) java.lang.String fileName , @ com.google.inject.assistedinject.Assisted ( value = "content" ) java.lang.String content ) ;
public void onSuccess ( ) { com.google.gerrit.client.Gerrit.display ( token , new com.google.gerrit.client.editor.EditScreen ( id , line ) ) ; }
boolean isStale ( ) throws java.io.IOException { return ! ( time.equals ( java.nio.file.Files.getLastModifiedTime ( path ) ) ) ; }
public void advertiseRefs ( org.eclipse.jgit.transport.BaseReceivePack rp ) throws org.eclipse.jgit.transport.ServiceMayNotContinueException { allRefs = com.google.gerrit.server.git.HookUtil.ensureAllRefsAdvertised ( rp ) ; }
private com.google.gerrit.reviewdb.server.ReviewDb openUnderlyingReviewDb ( com.google.gerrit.acceptance.GerritServer server ) throws java.lang.Exception { return server.getTestInjector ( ) . getInstance ( com.google.inject.Key.get ( new com.google.inject.TypeLiteral < com.google.gwtorm.server.SchemaFactory < com.google.gerrit.reviewdb.server.ReviewDb > > ( ) { } , com.google.gerrit.server.schema.ReviewDbFactory.class ) ) . open ( ) ; }
private com.google.gerrit.server.project.ProjectResource checkExists ( ) throws com.google.gerrit.extensions.restapi.ResourceNotFoundException { if ( ( project ) == null ) { throw new com.google.gerrit.extensions.restapi.ResourceNotFoundException ( name ) ; } return project ; }
public void onSuccess ( final com.google.gerrit.reviewdb.PatchLineComment result ) { enableButtons ( true ) ; notifyDraftDelta ( 1 ) ; createEditor ( result ) . setOpen ( false ) ; }
public void setFileHistory ( java.lang.String str ) { fileHistory = str ; }
public static org.eclipse.jgit.lib.Config defaultConfig ( ) { org.eclipse.jgit.lib.Config cfg = new org.eclipse.jgit.lib.Config ( ) ; cfg.setInt ( "index" , null , "maxPages" , 10 ) ; return cfg ; }
public boolean isMaxPositive ( final com.google.gerrit.client.reviewdb.PatchSetApproval ca ) { return ( maxPositive ) == ( ca.getValue ( ) ) ; }
public boolean onTime ( java.time.Instant when ) { return when.isBefore ( token.issued.plusSeconds ( token.expiresIn ) ) ; }
public synchronized void setStatus ( int sc ) { status = sc ; committed = true ; }
public void zeroEndLineResultsInInvalidRange ( ) { com.google.gerrit.extensions.client.Comment.Range range = createRange ( 13 , 2 , 0 , 10 ) ; com.google.gerrit.extensions.client.testing.RangeSubject.assertThat ( range ) . isInvalid ( ) ; }
protected void setCurrentUrl ( com.google.gerrit.client.download.DownloadUrlLink link ) { urls.setVisible ( true ) ; copyLabel.setText ( ( ( "git fetch " + ( link.getUrlData ( ) ) ) + " && git format-patch -1 --stdout FETCH_HEAD" ) ) ; }
public void setPatchSet ( final com.google.gerrit.reviewdb.client.PatchSet ps , final com.google.gerrit.reviewdb.client.PatchSetInfo psi ) { patchSet = ps ; patchSetInfo = psi ; }
public void pruneSchema ( com.google.gwtorm.server.StatementExecutor e , java.util.List < java.lang.String > pruneList ) throws com.google.gwtorm.server.OrmException { for ( java.lang.String sql : pruneList ) { e.execute ( sql ) ; } }
private static com.google.gerrit.server.index.QueryOptions options ( int start , int limit ) { return com.google.gerrit.server.index.change.IndexedChangeQuery.createOptions ( com.google.gerrit.server.index.change.IndexRewriterTest.CONFIG , start , limit , com.google.common.collect.ImmutableSet.< java.lang.String > of ( ) ) ; }
public java.lang.String getToken ( com.google.gwtjsonrpc.client.JsonDefTarget proxy ) { return com.google.gwt.user.client.Cookies.getCookie ( com.google.gerrit.client.Gerrit.SESSION_COOKIE ) ; }
public static java.util.Set < java.lang.String > getNameParts ( java.lang.String name , java.lang.Iterable < java.lang.String > emails ) { com.google.common.base.Splitter at = com.google.common.base.Splitter.on ( '@' ) ; com.google.common.base.Splitter s = com.google.common.base.Splitter.on ( com.google.common.base.CharMatcher.anyOf ( "@.- " ) ) . omitEmptyStrings ( ) ; java.util.HashSet < java.lang.String > parts = new java.util.HashSet < > ( ) ; for ( java.lang.String email : emails ) { if ( email == null ) { continue ; } java.lang.String lowerEmail = email.toLowerCase ( ) ; parts.add ( lowerEmail ) ; com.google.common.collect.Iterables.addAll ( parts , at.split ( lowerEmail ) ) ; com.google.common.collect.Iterables.addAll ( parts , s.split ( lowerEmail ) ) ; } if ( name != null ) { com.google.common.collect.Iterables.addAll ( parts , s.split ( name.toLowerCase ( ) ) ) ; } return parts ; }
public int run ( ) throws java.lang.Exception { final com.google.gerrit.server.GerritServer gs = com.google.gerrit.server.GerritServer.getInstance ( false ) ; gs.getSchemaFactory ( ) . open ( ) . close ( ) ; java.lang.System.out.println ( "Gerrit2 schema initialized" ) ; return 0 ; }
public static void edit ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.info.ChangeInfo.EditInfo > cb ) { com.google.gerrit.client.changes.ChangeApi.edit ( project , id ) . get ( cb ) ; }
com.google.gwtorm.client.ResultSet < com.google.gerrit.reviewdb.PatchLineComment > draftByPatchSetAuthor ( com.google.gerrit.reviewdb.PatchSet.Id patchset , com.google.gerrit.reviewdb.Account.Id author ) throws com.google.gwtorm.client.OrmException ;
public void listNonExistingGroupMembers_NotFound ( ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( adminSession.get ( ( ( "/groups/" + ( name ( "non-existing" ) ) ) + "/members/" ) ) . getStatusCode ( ) ) . isEqualTo ( HttpStatus.SC_NOT_FOUND ) ; }
public static com.google.common.util.concurrent.CheckedFuture < ? , java.io.IOException > allAsList ( java.util.List < ? extends com.google.common.util.concurrent.ListenableFuture < ? > > futures ) { return com.google.common.util.concurrent.Futures.makeChecked ( com.google.common.util.concurrent.Futures.allAsList ( futures ) , IndexUtils.MAPPER ) ; }
protected void onLoad ( ) throws java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { queryList = com.google.gerrit.server.account.QueryList.parse ( readUTF8 ( QueryList.FILE_NAME ) , com.google.gerrit.server.account.QueryList.createLoggerSink ( QueryList.FILE_NAME , com.google.gerrit.server.account.VersionedAccountQueries.log ) ) ; }
public void removeEventListener ( com.google.gerrit.common.EventListener listener ) { listeners.remove ( listener ) ; }
public void advertiseRefs ( org.eclipse.jgit.transport.UploadPack us ) { throw new java.lang.UnsupportedOperationException ( "ReceiveCommitsAdvertiseRefsHook cannot be used for UploadPack" ) ; }
public static java.util.Map < java.lang.String , org.eclipse.jgit.lib.Config > againstPreviousIndexVersion ( ) { java.util.List < java.lang.Integer > schemaVersions = com.google.gerrit.testing.IndexVersions.getWithoutLatest ( AccountSchemaDefinitions.INSTANCE ) ; return com.google.gerrit.testing.IndexVersions.asConfigMap ( AccountSchemaDefinitions.INSTANCE , schemaVersions , "againstIndexVersion" , defaultConfig ( ) ) ; }
public void onFailure ( final java.lang.Throwable caught ) { enableUI ( true ) ; if ( caught instanceof com.google.gerrit.common.errors.InvalidUserNameException ) { new com.google.gerrit.client.ErrorDialog ( Util.C.invalidUserName ( ) ) . center ( ) ; } else { super . onFailure ( caught ) ; } }
public void onChange ( com.google.gwt.event.dom.client.ChangeEvent event ) { renderCommands ( ) ; if ( com.google.gerrit.client.Gerrit.isSignedIn ( ) ) { saveScheme ( ) ; } }
public com.google.gerrit.server.change.Description getDescription ( com.google.gerrit.server.change.ChangeResource rsrc ) { return new com.google.gerrit.extensions.webui.UiAction.Description ( ) . setLabel ( "Unmark private" ) . setTitle ( "Unmark change as private" ) . setVisible ( com.google.gerrit.extensions.conditions.BooleanCondition.and ( rsrc.getChange ( ) . isPrivate ( ) , canDeletePrivate ( rsrc ) ) ) ; }
public void onClick ( com.google.gwt.event.dom.client.ClickEvent event ) { cm.setCursor ( net.codemirror.lib.LineCharacter.create ( line ) ) ; cm.scrollToY ( java.lang.Math.max ( 0 , ( height - ( 0.5 * scrollbarHeight ) ) ) ) ; cm.focus ( ) ; }
public final native void in_reply_to ( java.lang.String i ) ;
public void onSuccess ( com.google.gwt.core.client.JavaScriptObject none ) { if ( com.google.gerrit.client.changes.StarredChanges.pending.isEmpty ( ) ) { com.google.gerrit.client.changes.StarredChanges.busy = false ; } else { com.google.gerrit.client.changes.StarredChanges.startRequest ( ) ; } }
public void setId ( java.lang.String id ) { this . id = com.google.gerrit.common.data.LabelType.checkId ( id ) ; }
public static com.google.common.collect.ImmutableList < com.google.gerrit.gpg.testing.TestKey > allValidKeys ( ) { return com.google.common.collect.ImmutableList.of ( com.google.gerrit.gpg.testing.TestKeys.validKeyWithoutExpiration ( ) , com.google.gerrit.gpg.testing.TestKeys.validKeyWithExpiration ( ) , com.google.gerrit.gpg.testing.TestKeys.validKeyWithSecondUserId ( ) ) ; }
public static java.lang.String toSideBySide ( com.google.gerrit.reviewdb.client.PatchSet.Id diffBase , com.google.gerrit.reviewdb.client.Patch.Key id ) { return com.google.gerrit.client.Dispatcher.toPatch ( "sidebyside" , diffBase , id ) ; }
public static void restoreTime ( ) { com.google.gerrit.testutil.TestTimeUtil.useSystemTime ( ) ; }
void addReviewers ( com.google.gerrit.reviewdb.Change.Id id , java.util.List < java.lang.String > reviewers , boolean confirmed , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.common.data.ReviewerResult > callback ) ;
public com.google.gerrit.extensions.api.changes.Changes.QueryRequest withOptions ( com.google.gerrit.extensions.common.ListChangesOption ... options ) { this . options.addAll ( java.util.Arrays.asList ( options ) ) ; return this ; }
public void onSuccess ( java.lang.Void result ) { loadConfigInfo ( info , rev ) ; }
public com.google.gerrit.server.IdentifiedUser create ( com.google.gerrit.server.AccessPath accessPath , com.google.inject.Provider < java.net.SocketAddress > remotePeerProvider , com.google.gerrit.reviewdb.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( accessPath , authConfig , canonicalUrl , realm , accountCache , starredChangesCache , accountProjectWatchCache , remotePeerProvider , null , id ) ; }
private com.google.common.util.concurrent.CheckedFuture < ? , java.io.IOException > submit ( java.util.concurrent.Callable < ? > task ) { return com.google.common.util.concurrent.Futures.makeChecked ( executor.submit ( task ) , com.google.gerrit.server.index.ChangeIndexer.MAPPER ) ; }
protected void preDisplay ( final com.google.gerrit.client.groups.GroupMap result ) { groups.display ( result , subname ) ; groups.finishDisplay ( ) ; }
public void pushWithPrivateByDefaultEnabled ( ) throws java.lang.Exception { setPrivateByDefault ( project2 , InheritableBoolean.TRUE ) ; com.google.common.truth.Truth.assertThat ( createChange ( project2 ) . getChange ( ) . change ( ) . isPrivate ( ) ) . isTrue ( ) ; }
void maybeRefresh ( ) { try { searcherManager.maybeRefresh ( ) ; } catch ( java.io.IOException e ) { com.google.gerrit.lucene.SubIndex.log.warn ( "error refreshing indexer" , e ) ; } }
protected java.util.List < java.lang.String > getInstallPlugins ( ) { try { return pluginsDistribution.listPluginNames ( ) ; } catch ( java.io.FileNotFoundException e ) { com.google.gerrit.pgm.BaseInit.log.warn ( ( "Couldn't find distribution archive location." + " No plugin will be installed" ) ) ; return null ; } }
public static org.eclipse.jgit.transport.PushResult pushHead ( org.eclipse.jgit.junit.TestRepository < ? > testRepo , java.lang.String ref , boolean pushTags ) throws org.eclipse.jgit.api.errors.GitAPIException { return com.google.gerrit.acceptance.GitUtil.pushHead ( testRepo , ref , pushTags , false ) ; }
private static java.lang.String notTrusted ( com.google.gerrit.gpg.testing.TestKey k ) { return ( "Certification by " + ( com.google.gerrit.gpg.PublicKeyStore.keyToString ( k.getPublicKey ( ) ) ) ) + " is valid, but key is not trusted" ; }
public void testInsertNothing ( ) throws com.google.gwtorm.server.OrmException { classUnderTest.insert ( noData ) ; }
void onCancel ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { openForm.setVisible ( true ) ; com.google.gwt.user.client.ui.UIObject.setVisible ( form , false ) ; suggestBox.setFocus ( false ) ; }
public boolean handles ( java.nio.file.Path srcFile ) { return srcFile.toString ( ) . toLowerCase ( ) . endsWith ( com.googlesource.gerrit.plugins.scripting.scala.ScalaPluginProvider.SCALA_EXTENSION ) ; }
void restore ( com.googlecode.prolog_cafe.lang.Prolog engine ) { engine.cont = this . cont ; engine.r1 = this . r1 ; engine.r2 = this . r2 ; engine.r3 = this . r3 ; engine.r4 = this . r4 ; engine.r5 = this . r5 ; engine.r6 = this . r6 ; }
public void setSampledStatisticsEnabled ( boolean enableStatistics ) { self.setSampledStatisticsEnabled ( enableStatistics ) ; }
protected static org.eclipse.jgit.lib.Config submitWholeTopicEnabledConfig ( ) { org.eclipse.jgit.lib.Config cfg = new org.eclipse.jgit.lib.Config ( ) ; cfg.setBoolean ( "change" , null , "submitWholeTopic" , true ) ; return cfg ; }
com.googlesource.gerrit.plugins.hooks.HookResult execute ( com.googlesource.gerrit.plugins.hooks.HookArgs args ) { return executor.submit ( path , args ) ; }
public void onShowView ( ) { if ( ( windowTitle ) != null ) { com.google.gerrit.client.Gerrit.setWindowTitle ( this , windowTitle ) ; } registerKeys ( ) ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { b.setEnabled ( false ) ; Util.MANAGE_SVC.submit ( patchSet.getId ( ) , new com.google.gerrit.client.changes.ChangeDetailCache.GerritWidgetCallback ( b ) { public void onSuccess ( com.google.gerrit.common.data.ChangeDetail result ) { onSubmitResult ( result ) ; } } ) ; }
private void uncacheSshKeys ( ) { sshKeyCache.evict ( user.get ( ) . getUserName ( ) ) ; }
public void addClickHandler ( final com.google.gwt.event.dom.client.ClickHandler handler ) { addMember.addClickHandler ( handler ) ; }
private com.google.gerrit.server.permissions.ChangeControl forUser ( com.google.gerrit.server.CurrentUser who ) { if ( getUser ( ) . equals ( who ) ) { return this ; } return new com.google.gerrit.server.permissions.ChangeControl ( changeDataFactory , approvalsUtil , refControl.forUser ( who ) , notes , patchSetUtil ) ; }
static com.google.gerrit.acceptance.GerritServer.Description forTestClass ( com.google.gerrit.acceptance.Description testDesc , java.lang.String configName ) { return new com.google.gerrit.acceptance.AutoValue_GerritServer_Description ( configName , true , ( ! ( com.google.gerrit.acceptance.GerritServer.Description.hasNoHttpd ( testDesc.getTestClass ( ) ) ) ) , null , null ) ; }
public boolean canDeleteDraft ( final com.google.gerrit.reviewdb.server.ReviewDb db ) throws com.google.gwtorm.server.OrmException { return ( ( isOwner ( ) ) || ( getRefControl ( ) . canDeleteDrafts ( ) ) ) && ( isVisible ( db ) ) ; }
java.lang.String inline ( @ javax.annotation.Nullable java.lang.String markdownPath , java.lang.String imagePath ) { java.lang.String data = inlineMaybe ( markdownPath , imagePath ) ; if ( data != null ) { return data ; } return SoyConstants.IMAGE_URI_INNOCUOUS_OUTPUT ; }
private static org.eclipse.jgit.revwalk.RevCommit lookupCommit ( org.eclipse.jgit.lib.Repository repository , com.google.gerrit.reviewdb.client.PatchSet patchSet ) throws java.io.IOException { org.eclipse.jgit.lib.ObjectId patchSetCommitId = com.google.gerrit.server.edit.ChangeEditModifier.getPatchSetCommitId ( patchSet ) ; try ( org.eclipse.jgit.revwalk.RevWalk revWalk = new org.eclipse.jgit.revwalk.RevWalk ( repository ) ) { return revWalk.parseCommit ( patchSetCommitId ) ; } }
public boolean isVisible ( ) { return ( ( projectControl.visibleForReplication ( ) ) || ( canPerform ( Permission.READ ) ) ) && ( canRead ( ) ) ; }
public void execute ( ) { com.google.gerrit.client.Gerrit.doSignIn ( com.google.gwt.user.client.History.getToken ( ) ) ; }
private com.google.gerrit.server.plugins.PluginEntry resourceOf ( java.util.jar.JarEntry jarEntry ) throws java.io.IOException { return new com.google.gerrit.server.plugins.PluginEntry ( jarEntry.getName ( ) , jarEntry.getTime ( ) , com.google.common.base.Optional.of ( jarEntry.getSize ( ) ) , attributesOf ( jarEntry ) ) ; }
public com.google.gerrit.sshd.SshSession get ( ) { return com.google.gerrit.sshd.SshScope.requireContext ( ) . getSession ( ) ; }
private void initSite ( ) throws java.lang.Exception { com.google.gerrit.acceptance.pgm.ReindexIT.runGerrit ( "init" , "-d" , sitePath.getPath ( ) , "--batch" , "--no-auto-start" , "--skip-plugins" , "--show-stack-trace" ) ; }
private void configureDefaultSubmitType ( java.lang.String projectFilter , com.google.gerrit.extensions.client.SubmitType submitType ) { cfg.setString ( RepositoryConfig.SECTION_NAME , projectFilter , RepositoryConfig.DEFAULT_SUBMIT_TYPE_NAME , submitType.toString ( ) ) ; }
com.google.gwt.resources.client.TextResource version ( ) ;
public void delete ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { deleteTag.apply ( resource ( ) , new com.google.gerrit.server.project.DeleteTag.Input ( ) ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot delete tag" , e ) ; } }
public void setTopic ( java.lang.String topic ) { this . topic = com.google.common.base.Strings.nullToEmpty ( topic ) ; }
protected void configure ( ) { com.google.gerrit.extensions.registration.DynamicSet.bind ( binder ( ) , com.google.gerrit.common.EventListener.class ) . to ( com.googlesource.gerrit.plugins.refprotection.RefUpdateListener.class ) ; requestStaticInjection ( com.googlesource.gerrit.plugins.refprotection.BackupRef.class ) ; }
public com.google.gerrit.reviewdb.AccountGroup get ( final com.google.gerrit.reviewdb.AccountGroup.Id groupId ) { return byId.get ( groupId ) ; }
void preinc ( ) { mv.visitVarInsn ( com.google.gwtorm.protobuf.ILOAD , sizeVar ) ; }
private java.lang.String urlRebase ( ) { return ( "/changes/" + ( change.getChangeId ( ) ) ) + "/rebase_edit" ; }
public static boolean readWrite ( ) { com.google.gerrit.server.notedb.NotesMigration migration = com.google.gerrit.testutil.NoteDbMode.get ( ) . migration ; return ( migration.rawWriteChangesSetting ( ) ) && ( migration.readChanges ( ) ) ; }
protected com.google.gerrit.server.account.AccountState missing ( final com.google.gerrit.client.reviewdb.Account.Id key ) { return missingAccount ( key ) ; }
private static boolean isRejected ( com.google.gerrit.client.info.ChangeInfo.LabelInfo label , com.google.gerrit.client.info.ChangeInfo.ApprovalInfo ai ) { return ( ( label.rejected ( ) ) != null ) && ( ( label.rejected ( ) . _accountId ( ) ) == ( ai._accountId ( ) ) ) ; }
public void setHeader ( java.lang.String name , java.lang.String value ) { headers.removeAll ( name ) ; addHeader ( name , value ) ; }
protected void configureServlets ( ) { serveRegex ( ( ( "^" + ( XDocServlet.PATH_PREFIX ) ) + "(.+)?$" ) ) . with ( com.googlesource.gerrit.plugins.xdocs.XDocServlet.class ) ; com.google.gerrit.extensions.registration.DynamicSet.bind ( binder ( ) , com.google.gerrit.extensions.webui.WebUiPlugin.class ) . toInstance ( new com.google.gerrit.extensions.webui.GwtPlugin ( "xdocs" ) ) ; }
void set ( com.google.gerrit.client.info.ChangeInfo info ) { this . changeId = info.legacyId ( ) ; display ( info ) ; reviewerSuggestOracle.setChange ( changeId ) ; openForm.setVisible ( com.google.gerrit.client.Gerrit.isSignedIn ( ) ) ; }
public boolean allRefsAreVisible ( ) { return allRefsAreVisibleExcept ( java.util.Collections.< java.lang.String > emptySet ( ) ) ; }
public void onSuccess ( com.google.gerrit.client.info.GeneralPreferences prefs ) { com.google.gerrit.client.Gerrit.myPrefs = prefs ; onModuleLoad2 ( result ) ; }
public void assertMessage ( java.lang.String expectedMessage ) { org.eclipse.jgit.transport.RemoteRefUpdate refUpdate = result.getRemoteUpdate ( ref ) ; com.google.common.truth.Truth.assertThat ( refUpdate ) . isNotNull ( ) ; com.google.common.truth.Truth.assertThat ( message ( refUpdate ) . toLowerCase ( ) ) . contains ( expectedMessage.toLowerCase ( ) ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { upToChange ( true ) . run ( ) ; }
public void testContainsWithEmpty ( ) throws java.lang.Exception { com.google.gerrit.extensions.registration.DynamicSet < java.lang.Integer > ds = new com.google.gerrit.extensions.registration.DynamicSet ( ) ; com.google.common.truth.Truth.assertThat ( ds.contains ( 2 ) ) . isFalse ( ) ; }
public java.util.Optional < com.google.gerrit.reviewdb.client.AccountGroup > load ( com.google.gerrit.reviewdb.client.AccountGroup.Id key ) throws java.lang.Exception { try ( com.google.gerrit.reviewdb.server.ReviewDb db = schema.open ( ) ) { return groups.getGroup ( db , key ) ; } }
public void testParse_Email2 ( ) { final com.google.gerrit.server.mail.Address a = com.google.gerrit.server.mail.Address.parse ( "a@b" ) ; com.google.common.truth.Truth.assertThat ( a.name ) . isNull ( ) ; com.google.common.truth.Truth.assertThat ( a.email ) . isEqualTo ( "a@b" ) ; }
protected java.lang.String getName ( ) { return hook.getFileName ( ) . toString ( ) ; }
private static java.lang.String getURLEncoded ( java.lang.String url ) { try { return java.net.URLEncoder.encode ( url , "UTF-8" ) ; } catch ( java.io.UnsupportedEncodingException e ) { throw new java.lang.IllegalStateException ( "Cannot find UTF-8 encoding" , e ) ; } }
public void sendBytes ( byte [ ] what , int off , int len ) { try { rp.getMessageOutputStream ( ) . write ( what , off , len ) ; } catch ( java.io.IOException e ) { } }
public com.google.gerrit.reviewdb.client.Change apply ( com.google.gerrit.server.git.SearchingChangeCacheImpl.CachedChange in ) { return in.change ( ) ; }
public com.google.gerrit.server.IdentifiedUser create ( com.google.inject.Provider < com.google.gerrit.reviewdb.ReviewDb > db , com.google.gerrit.reviewdb.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( capabilityControlFactory , AccessPath.UNKNOWN , authConfig , anonymousCowardName , canonicalUrl , realm , accountCache , groupIncludeCache , null , db , id ) ; }
public abstract com.google.gerrit.server.update.RetryHelper.Options.Builder timeout ( java.time.Duration timeout ) ;
public void display ( final com.google.gerrit.client.reviewdb.Patch.Key k , final com.google.gerrit.client.reviewdb.PatchSet.Id a , final com.google.gerrit.client.reviewdb.PatchSet.Id b , final com.google.gerrit.client.data.PatchScript s ) { patchKey = k ; idSideA = a ; idSideB = b ; render ( s ) ; }
public com.google.common.util.concurrent.CheckedFuture < ? , java.io.IOException > indexAsync ( com.google.gerrit.server.query.change.ChangeData cd ) { return ( executor ) != null ? submit ( indexTask ( cd ) ) : com.google.common.util.concurrent.Futures.< java.lang.Object , java.io.IOException > immediateCheckedFuture ( null ) ; }
void setPluginName ( @ com.google.gerrit.server.plugins.PluginName java.lang.String name ) { this . command = com.google.gerrit.sshd.Commands.named ( name ) ; }
protected void configure ( ) { install ( new com.google.gerrit.server.index.IndexModule ( 1 ) ) ; bind ( com.google.gerrit.server.index.IndexConfig.class ) . toInstance ( com.google.gerrit.server.index.IndexConfig.createDefault ( ) ) ; bind ( com.google.gerrit.server.index.ChangeIndex.class ) . toInstance ( new com.google.gerrit.server.index.DummyIndex ( ) ) ; }
com.google.gerrit.server.notedb.DraftCommentNotes createWithAutoRebuildingDisabled ( com.google.gerrit.reviewdb.client.Change.Id changeId , com.google.gerrit.reviewdb.client.Account.Id accountId ) ;
public void postEvent ( com.google.gerrit.reviewdb.client.Project.NameKey projectName , com.google.gerrit.server.events.ProjectEvent event ) { }
public void remove ( ) { metrics.remove ( name ) ; registry.remove ( name ) ; }
void createOrEditFileComment ( com.google.gerrit.client.diff.DisplaySide side ) { getPanelFromSide ( side ) . createOrEditFileComment ( ) ; updateFileCommentVisibility ( false ) ; }
public synchronized com.google.gerrit.metrics.Timer0 newTimer ( java.lang.String name , com.google.gerrit.metrics.Description desc ) { com.google.gerrit.metrics.dropwizard.DropWizardMetricMaker.checkTimerDescription ( desc ) ; define ( name , desc ) ; return newTimerImpl ( name ) ; }
public com.google.gerrit.extensions.common.MergeableInfo mergeable ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return mergeable.apply ( revision ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot check mergeability" , e ) ; } }
public static void fireChangeStarEvent ( com.google.gerrit.reviewdb.client.Change.Id id , boolean starred ) { Gerrit.EVENT_BUS.fireEventFromSource ( new com.google.gerrit.client.changes.StarredChanges.ChangeStarEvent ( id , starred ) , id ) ; }
public void invalidNonceNotChecked ( ) throws java.lang.Exception { checker = newChecker ( false ) ; org.eclipse.jgit.transport.PushCertificate cert = newSignedCert ( "invalid-nonce" , com.google.gerrit.gpg.testutil.TestKeys.validKeyWithoutExpiration ( ) ) ; assertNoProblems ( cert ) ; }
private void parseDelete ( final org.eclipse.jgit.transport.ReceiveCommand cmd ) { com.google.gerrit.server.project.RefControl ctl = projectControl.controlForRef ( cmd.getRefName ( ) ) ; if ( ctl.canDelete ( ) ) { } else { com.google.gerrit.server.git.ReceiveCommits.reject ( cmd ) ; } }
private void index ( com.google.gerrit.server.group.InternalGroup group ) throws java.io.IOException { for ( com.google.gerrit.server.index.group.GroupIndex groupIndex : indexCollection.getWriteIndexes ( ) ) { groupIndex.replace ( group ) ; } }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.client.Dispatcher.toPublish ( patchSet.getId ( ) ) ) ; }
public static void getContent ( com.google.gerrit.reviewdb.client.PatchSet.Id id , java.lang.String filename , com.google.gerrit.client.rpc.HttpCallback < com.google.gerrit.client.rpc.NativeString > cb ) { com.google.gerrit.client.changes.ChangeFileApi.contentEditOrPs ( id , filename ) . get ( cb ) ; }
public com.google.gerrit.server.change.MergeabilityChecker.Check addChange ( com.google.gerrit.reviewdb.client.Change change ) { changes.add ( change ) ; return this ; }
private static java.lang.String queryIncoming ( java.lang.String who ) { return ( ( ( ( ( "is:open ((reviewer:" + who ) + " -owner:" ) + who ) + " -is:ignored) OR assignee:" ) + who ) + ")" ; }
private E getLast ( ) { return list.get ( ( ( list.size ( ) ) - 1 ) ) ; }
public static void invalidate ( final com.google.gerrit.client.reviewdb.Account acct ) { if ( acct != null ) { com.google.gerrit.server.ssh.SshUtil.invalidate ( acct.getPreferredEmail ( ) ) ; } }
protected void configure ( ) { bind ( com.google.gerrit.server.index.ChangeIndex.class ) . toInstance ( ChangeIndex.DISABLED ) ; bind ( com.google.gerrit.server.index.ChangeIndexer.class ) . toInstance ( ChangeIndexer.DISABLED ) ; bind ( com.google.gerrit.server.query.change.ChangeQueryRewriter.class ) . to ( com.google.gerrit.server.query.change.SqlRewriterImpl.class ) ; }
public void onSuccess ( final com.google.gwtjsonrpc.client.VoidResult result ) { createCommentEditor ( suggestRow , column , line , side ) ; }
public java.lang.Object apply ( com.google.gerrit.server.change.ChangeResource rsrc ) throws com.google.gwtorm.server.OrmException { return cache ( json.format ( rsrc ) ) ; }
public void onHistoryChanged ( final java.lang.String token ) { final com.google.gerrit.client.ui.Screen s = select ( token ) ; if ( s != null ) { com.google.gerrit.client.Gerrit.display ( s ) ; } else { com.google.gerrit.client.Gerrit.display ( new com.google.gerrit.client.NotFoundScreen ( ) ) ; } }
public void execute ( ) { com.google.gwt.user.client.Window.scrollTo ( 0 , 0 ) ; message.setFocus ( true ) ; }
void index ( com.google.gerrit.reviewdb.client.AccountGroup.UUID uuid , com.ericsson.gerrit.plugins.highavailability.forwarder.rest.Operation operation ) throws java.io.IOException { indexer.index ( uuid ) ; com.ericsson.gerrit.plugins.highavailability.forwarder.rest.IndexGroupRestApiServlet.logger.debug ( "Group {} successfully indexed" , uuid ) ; updateIndexTs ( java.time.LocalDateTime.now ( ) ) ; }
public static com.google.gerrit.elasticsearch.ElasticIndexModule latestVersionWithoutOnlineUpgrade ( boolean slave ) { return new com.google.gerrit.elasticsearch.ElasticIndexModule ( null , 0 , false , slave ) ; }
public java.lang.String getSchemeName ( ) { return schemeName ; }
public void doAction ( com.google.gerrit.server.IdentifiedUser user , com.googlesource.gerrit.plugins.github.oauth.GitHubLogin hubLogin , javax.servlet.http.HttpServletRequest req , javax.servlet.http.HttpServletResponse resp , com.googlesource.gerrit.plugins.github.wizard.ControllerErrors errors ) throws java.io.IOException , javax.servlet.ServletException { respondWithJobStatusJson ( resp , pullRequestsImporter.get ( ) ) ; }
public static com.google.gerrit.server.account.AuthRequest forUser ( final java.lang.String username ) { final com.google.gerrit.server.account.AuthRequest r ; r = new com.google.gerrit.server.account.AuthRequest ( ( ( com.google.gerrit.client.reviewdb.AccountExternalId.SCHEME_GERRIT ) + username ) ) ; r.setSshUserName ( username ) ; return r ; }
public void testMIXED_FullyConfiguredUser ( ) { setFrom ( "MIXED" ) ; final java.lang.String name = "A U. Thor" ; final java.lang.String email = "a.u.thor@test.example.com" ; final com.google.gerrit.reviewdb.client.Account.Id user = user ( name , email ) ; org.easymock.EasyMock.replay ( accountCache ) ; final com.google.gerrit.server.mail.Address r = create ( ) . from ( user ) ; org.junit.Assert.assertNotNull ( r ) ; org.junit.Assert.assertEquals ( ( name + " (Code Review)" ) , r.name ) ; org.junit.Assert.assertEquals ( ident.getEmailAddress ( ) , r.email ) ; org.easymock.EasyMock.verify ( accountCache ) ; }
public void addRemoveMember ( ) throws java.lang.Exception { com.google.gerrit.acceptance.TestAccount u = accounts.create ( "user" , "user@example.com" , "Full Name" ) ; com.google.gerrit.acceptance.RestResponse r = PUT ( "/groups/Administrators/members/user" ) ; org.junit.Assert.assertEquals ( HttpStatus.SC_CREATED , r.getStatusCode ( ) ) ; com.google.gerrit.server.account.AccountInfo ai = newGson ( ) . fromJson ( r.getReader ( ) , com.google.gerrit.server.account.AccountInfo.class ) ; com.google.gerrit.acceptance.rest.account.AccountAssert.assertAccountInfo ( u , ai ) ; assertMembers ( "Administrators" , admin , u ) ; r.consume ( ) ; org.junit.Assert.assertEquals ( HttpStatus.SC_NO_CONTENT , DELETE ( "/groups/Administrators/members/user" ) ) ; assertMembers ( "Administrators" , admin ) ; }
public void setShowUsernameInReviewCategory ( final boolean showUsernameInReviewCategory ) { this . showUsernameInReviewCategory = showUsernameInReviewCategory ; }
public void onSuccess ( com.google.gerrit.client.groups.GroupList result ) { includes.display ( com.google.gerrit.client.rpc.Natives.asList ( result ) ) ; }
public java.util.Map < java.lang.String , java.util.List < com.google.gerrit.extensions.common.RobotCommentInfo > > robotComments ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return listRobotComments.apply ( revision ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot retrieve robot comments" , e ) ; } }
public final native com.google.gerrit.client.config.ServerInfo.SshdInfo sshd ( ) ;
public java.lang.String getUrl ( ) { final java.lang.StringBuilder b = new java.lang.StringBuilder ( ) ; final com.google.gerrit.server.config.ConfigSection dbs = new com.google.gerrit.server.config.ConfigSection ( cfg , "database" ) ; b.append ( "jdbc:mysql://" ) ; b.append ( com.google.gerrit.server.schema.JdbcUtil.hostname ( dbs.optional ( "hostname" ) ) ) ; b.append ( com.google.gerrit.server.schema.JdbcUtil.port ( dbs.optional ( "port" ) ) ) ; b.append ( "/" ) ; b.append ( dbs.required ( "database" ) ) ; b.append ( "?nullNamePatternMatchesAll=true" ) ; return b.toString ( ) ; }
static boolean dryRun ( com.google.gerrit.server.git.strategy.SubmitDryRun.Arguments args , com.google.gerrit.server.git.CodeReviewCommit mergeTip , com.google.gerrit.server.git.CodeReviewCommit toMerge ) throws com.google.gerrit.server.git.IntegrationException { return args.mergeUtil.canMerge ( args.mergeSorter , args.repo , mergeTip , toMerge ) ; }
protected boolean canPerform ( final com.google.gerrit.client.data.ProjectCache.Entry project , final com.google.gerrit.client.reviewdb.ApprovalCategory.Id actionId , final short val ) { return com.google.gerrit.server.BaseServiceImplementation.canPerform ( getGroups ( ) , project , actionId , val ) ; }
private com.google.gwtorm.jdbc.JdbcAccess < com.google.gwtorm.jdbc.TestJdbcAccess.Data , com.google.gwtorm.jdbc.TestJdbcAccess.Data.DataKey > createClassUnderTest ( ) { return createJdbcAccess ( com.google.gwtorm.jdbc.TestJdbcAccess.DIALECT ) ; }
public < T extends com.google.gwt.core.client.JavaScriptObject > void delete ( com.google.gwt.user.client.rpc.AsyncCallback < T > cb ) { delete ( com.google.gerrit.client.rpc.RestApi.wrap ( cb ) ) ; }
public long getTimeToLive ( final java.util.concurrent.TimeUnit unit ) { final long maxAge = self.getCacheConfiguration ( ) . getTimeToLiveSeconds ( ) ; return unit.convert ( maxAge , java.util.concurrent.TimeUnit.SECONDS ) ; }
private com.google.gerrit.server.change.ChangeJson.ChangeInfo getChange ( com.google.gerrit.acceptance.PushOneCommit.Result pr ) throws java.io.IOException { return getChange ( pr.getChangeId ( ) , com.google.gerrit.extensions.common.ListChangesOption.DETAILED_LABELS ) ; }
protected com.google.gerrit.client.account.SshPanel createWidget ( ) { return new com.google.gerrit.client.account.SshPanel ( ) ; }
public com.google.gerrit.server.project.ChangeControl validateFor ( final com.google.gerrit.reviewdb.Change change ) throws com.google.gerrit.server.project.NoSuchChangeException , com.google.gwtorm.client.OrmException { return com.google.gerrit.server.project.ChangeControl.Factory.validate ( controlFor ( change ) , db.get ( ) ) ; }
public static com.google.gerrit.server.query.change.QueryOptions oneResult ( ) { return com.google.gerrit.server.query.change.QueryOptions.create ( com.google.gerrit.server.index.IndexConfig.createDefault ( ) , 0 , 1 , com.google.common.collect.ImmutableSet.< java.lang.String > of ( ) ) ; }
public void rebase ( com.google.gerrit.extensions.api.changes.RebaseInput in ) throws com.google.gerrit.extensions.restapi.RestApiException { try { rebase.apply ( change , in ) ; } catch ( com.google.gerrit.common.errors.EmailException | com.google.gwtorm.server.OrmException | com.google.gerrit.server.update.UpdateException | java.io.IOException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot rebase change" , e ) ; } }
public void configure ( ) { factory ( OnlineReindexer.Factory.class ) ; listener ( ) . to ( com.google.gerrit.lucene.LuceneVersionManager.class ) ; }
public com.google.gerrit.server.change.Description getDescription ( com.google.gerrit.server.change.ChangeResource rsrc ) { return new com.google.gerrit.extensions.webui.UiAction.Description ( ) . setLabel ( "Unmute" ) . setTitle ( "Unmute the change" ) . setVisible ( isMuted ( rsrc ) ) ; }
public void finish ( ) { finishActiveTag ( ) ; }
public java.lang.Object apply ( com.google.gerrit.extensions.restapi.TopLevelResource resource ) { format = com.google.gerrit.server.OutputFormat.JSON ; return display ( null ) ; }
protected void factory ( final java.lang.Class < ? > factory ) { install ( new com.google.inject.assistedinject.FactoryModuleBuilder ( ) . build ( factory ) ) ; }
public < T > T get ( com.googlesource.gerrit.plugins.github.oauth.SectionParser < T > parser ) { return secureConfig.get ( parser ) ; }
public static java.lang.String toUnified ( com.google.gerrit.reviewdb.client.PatchSet.Id diffBase , com.google.gerrit.reviewdb.client.Patch.Key id ) { return com.google.gerrit.client.Dispatcher.toPatch ( "unified" , diffBase , id ) ; }
public void onSuccess ( com.google.gerrit.client.account.EditPreferences r ) { prefs = r ; com.google.gerrit.extensions.client.EditPreferencesInfo global = new com.google.gerrit.extensions.client.EditPreferencesInfo ( ) ; r.copyTo ( global ) ; com.google.gerrit.client.Gerrit.setEditPreferences ( global ) ; onLoad2 ( ) ; }
public void onSuccess ( com.google.gerrit.client.changes.ChangeInfo result ) { fetch = result.revision ( revision ) . fetch ( ) ; renderScheme ( ) ; }
public com.google.gson.Gson get ( ) { return new com.google.gson.GsonBuilder ( ) . registerTypeAdapter ( com.google.common.base.Supplier.class , new com.google.gerrit.server.events.SupplierSerializer ( ) ) . registerTypeAdapter ( Project.NameKey.class , new com.google.gerrit.server.events.ProjectNameKeySerializer ( ) ) . create ( ) ; }
public void tearDown ( ) { com.google.gerrit.testing.TestTimeUtil.useSystemTime ( ) ; java.lang.System.setProperty ( "user.timezone" , systemTimeZoneProperty ) ; java.util.TimeZone.setDefault ( systemTimeZone ) ; }
void display ( final com.google.gerrit.client.reviewdb.Account account ) { showSiteHeader.setValue ( account.isShowSiteHeader ( ) ) ; setDefaultContext ( account.getDefaultContext ( ) ) ; }
private java.util.List < com.google.gerrit.server.edit.tree.TreeModification > toTreeModifications ( com.google.gerrit.reviewdb.client.FixReplacement ... fixReplacements ) throws java.lang.Exception { return fixReplacementInterpreter.toTreeModifications ( repository , projectState , patchSetCommitId , com.google.common.collect.ImmutableList.copyOf ( fixReplacements ) ) ; }
public void index ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.reviewdb.client.Change.Id changeId ) throws com.google.gwtorm.server.OrmException , java.io.IOException { com.google.gerrit.server.query.change.ChangeData cd = newChangeData ( db , project , changeId ) ; index ( cd ) ; com.google.gerrit.server.index.change.ChangeIndexer.reindexAfterIndexUpdate ( cd ) ; }
public static void deleteExternalIds ( java.util.Set < java.lang.String > ids , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.VoidResult > cb ) { com.google.gerrit.client.account.AccountApi.self ( ) . view ( "external.ids:delete" ) . post ( com.google.gerrit.client.rpc.Natives.arrayOf ( ids ) , cb ) ; }
public com.google.gerrit.acceptance.RestResponse get ( java.lang.String endPoint ) throws java.io.IOException { org.apache.http.client.methods.HttpGet get = new org.apache.http.client.methods.HttpGet ( ( ( ( url ) + "/a" ) + endPoint ) ) ; return new com.google.gerrit.acceptance.RestResponse ( getClient ( ) . execute ( get ) ) ; }
public final boolean isLdap ( ) { return ( ( authType ( ) ) == ( com.google.gerrit.extensions.client.AuthType.LDAP ) ) || ( ( authType ( ) ) == ( com.google.gerrit.extensions.client.AuthType.LDAP_BIND ) ) ; }
public void display ( final com.google.gerrit.client.reviewdb.Patch.Key k , final com.google.gerrit.client.reviewdb.PatchSet.Id a , final com.google.gerrit.client.reviewdb.PatchSet.Id b , final com.google.gerrit.client.data.PatchScript s ) { patchKey = k ; idSideA = a ; idSideB = b ; render ( s ) ; }
public void configure ( ) { factory ( ChangeUpdate.Factory.class ) ; factory ( ChangeDraftUpdate.Factory.class ) ; bind ( com.google.gerrit.server.IdentifiedUser.class ) . toInstance ( user ) ; bind ( com.google.gerrit.server.config.AllUsersName.class ) . toProvider ( allUsers ) ; }
public com.google.gerrit.server.project.ProjectControl controlFor ( com.google.gerrit.reviewdb.client.Project.NameKey nameKey , com.google.gerrit.server.CurrentUser user ) throws com.google.gerrit.server.project.NoSuchProjectException , java.io.IOException { final com.google.gerrit.server.project.ProjectState p = projectCache.checkedGet ( nameKey ) ; if ( p == null ) { throw new com.google.gerrit.server.project.NoSuchProjectException ( nameKey ) ; } return p.controlFor ( user ) ; }
public void init ( javax.servlet.FilterConfig filterConfig ) throws javax.servlet.ServletException { this . ghLoginProvider = new com.googlesource.gerrit.plugins.github.oauth.GitHubLogin.Provider ( ) ; }
public java.lang.Object getInternalContext ( ) { return self.getInternalContext ( ) ; }
public static void updated ( com.google.gerrit.reviewdb.client.Change c ) { c.setLastUpdatedOn ( com.google.gerrit.common.TimeUtil.nowTs ( ) ) ; com.google.gerrit.server.ChangeUtil.computeSortKey ( c ) ; }
public com.google.gerrit.extensions.api.changes.Changes.QueryRequest withQuery ( java.lang.String query ) { this . query = query ; return this ; }
public com.google.gerrit.httpd.WebSessionManager.Val getIfPresent ( java.lang.Object key ) { if ( key instanceof java.lang.String ) { java.nio.file.Path path = dir.resolve ( ( ( java.lang.String ) ( key ) ) ) ; return readFile ( path ) ; } return null ; }
public com.google.gerrit.server.CurrentUser getUser ( ) { if ( ( submitter ) != null ) { return identifiedUserFactory.create ( getReviewDbProvider ( ) , submitter ) . getRealUser ( ) ; } throw new com.google.inject.OutOfScopeException ( "No user on email thread" ) ; }
private boolean has ( com.google.gerrit.extensions.client.ListChangesOption option ) { return options.contains ( option ) ; }
public static java.lang.String toAccountQuery ( java.lang.String fullname , com.google.gerrit.reviewdb.client.Change.Status status ) { return com.google.gerrit.common.PageLinks.toChangeQuery ( ( ( ( com.google.gerrit.common.PageLinks.op ( "owner" , fullname ) ) + " " ) + ( com.google.gerrit.common.PageLinks.status ( status ) ) ) , com.google.gerrit.common.PageLinks.TOP ) ; }
public static java.lang.String toUnified ( com.google.gerrit.reviewdb.client.PatchSet.Id diffBase , com.google.gerrit.reviewdb.client.PatchSet.Id revision , java.lang.String fileName ) { return com.google.gerrit.client.Dispatcher.toPatch ( "unified" , diffBase , revision , fileName , null , 0 ) ; }
public void listBranchesOfEmptyProject ( ) throws java.lang.Exception { com.google.gerrit.acceptance.rest.project.BranchAssert.assertBranches ( com.google.common.collect.ImmutableList.of ( com.google.gerrit.acceptance.rest.project.ListBranchesIT.branch ( "HEAD" , null , false ) , com.google.gerrit.acceptance.rest.project.ListBranchesIT.branch ( "refs/meta/config" , null , false ) ) , list ( ) . get ( ) ) ; }
public void saveDraft ( final com.google.gerrit.reviewdb.client.PatchLineComment comment , final com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.reviewdb.client.PatchLineComment > callback ) { saveDraftFactory.create ( comment ) . to ( callback ) ; }
public com.google.gerrit.client.reviewdb.Account.Id getId ( ) { return oldAccountId ; }
public void setStatisticsEnabled ( boolean enableStatistics ) { self.setStatisticsEnabled ( enableStatistics ) ; }
protected void onExit ( final int rc ) { removeEventListenerRegistration ( ) ; synchronized ( taskLock ) { done = true ; } super . onExit ( rc ) ; }
public void deleteComment ( com.google.gerrit.reviewdb.client.Comment c ) { verifyComment ( c ) ; delete.add ( com.google.gerrit.server.notedb.ChangeDraftUpdate.key ( c ) ) ; }
void onSave ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { save ( ) . run ( ) ; }
void index ( com.google.gerrit.reviewdb.client.AccountGroup.UUID uuid , com.ericsson.gerrit.plugins.highavailability.forwarder.rest.Operation operation ) throws java.io.IOException { indexer.index ( uuid ) ; logger.debug ( "Group {} successfully indexed" , uuid ) ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { event.preventDefault ( ) ; if ( ! ( discovering ) ) { providerId.setText ( identUrl ) ; form.submit ( ) ; } }
void resizeCodeMirror ( ) { int height = ( header.getOffsetHeight ( ) ) + ( getDiffTable ( ) . getHeaderHeight ( ) ) ; for ( net.codemirror.lib.CodeMirror cm : getCms ( ) ) { cm.adjustHeight ( height ) ; } }
void setEnabled ( boolean on ) { list.getElement ( ) . setPropertyBoolean ( "disabled" , ( ! on ) ) ; }
protected void configure ( ) { factory ( AgreementInfoFactory.Factory.class ) ; }
public void delete ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { deleteChange.apply ( change , null ) ; } catch ( com.google.gerrit.server.update.UpdateException | com.google.gerrit.server.permissions.PermissionBackendException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot delete change" , e ) ; } }
protected com.google.gwtjsonrpc.server.SignedToken xsrfInit ( ) throws com.google.gwtjsonrpc.server.XsrfException { return new com.google.gwtjsonrpc.server.SignedToken ( ( ( 4 * 60 ) * 60 ) ) ; }
public void setSampledStatisticsEnabled ( boolean enableStatistics ) { self ( ) . setSampledStatisticsEnabled ( enableStatistics ) ; }
private synchronized void define ( java.lang.String name , com.google.gerrit.metrics.Description desc ) { if ( descriptions.containsKey ( name ) ) { throw new java.lang.IllegalStateException ( java.lang.String.format ( "metric %s already defined" , name ) ) ; } descriptions.put ( name , desc.getAnnotations ( ) ) ; }
protected abstract T updateProjectConfig ( com.google.gerrit.server.project.ProjectControl projectControl , com.google.gerrit.server.git.ProjectConfig config , com.google.gerrit.server.git.MetaDataUpdate md , boolean parentProjectUpdate ) throws com.google.gerrit.common.errors.PermissionDeniedException , com.google.gerrit.server.project.NoSuchProjectException , com.google.gwtorm.server.OrmException , java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException ;
public synchronized void evictAllNoReindex ( ) { byId.clear ( ) ; byUsername.clear ( ) ; }
private static java.lang.String path ( java.nio.file.Path path ) { try { return path.toRealPath ( ) . normalize ( ) . toString ( ) ; } catch ( java.io.IOException err ) { return path.toAbsolutePath ( ) . normalize ( ) . toString ( ) ; } }
protected void tearDown ( ) throws java.lang.Exception { com.google.gerrit.testutil.InMemoryDatabase.drop ( db ) ; super . tearDown ( ) ; }
public java.util.Set < com.google.gerrit.client.reviewdb.Account.FieldName > getEditableAccountFields ( ) { return editableAccountFields ; }
public static void comments ( @ com.google.gerrit.common.Nullable java.lang.String project , com.google.gerrit.reviewdb.client.PatchSet.Id id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.rpc.NativeMap < com.google.gwt.core.client.JsArray < com.google.gerrit.client.changes.CommentInfo > > > cb ) { com.google.gerrit.client.changes.CommentApi.revision ( project , id , "comments" ) . get ( cb ) ; }
public final void side ( com.google.gerrit.extensions.client.Side side ) { sideRaw ( side.toString ( ) ) ; }
private static int posInt ( final org.spearce.jgit.transport.RemoteConfig rc , final org.spearce.jgit.lib.RepositoryConfig cfg , final java.lang.String name , final int defValue ) { return java.lang.Math.max ( 0 , cfg.getInt ( "remote" , rc.getName ( ) , name , defValue ) ) ; }
protected < T > T buildJson ( java.lang.String path , java.lang.Class < T > classOfT ) throws java.lang.Exception { return new com.google.gson.Gson ( ) . fromJson ( buildJsonRaw ( path , "" ) , classOfT ) ; }
java.lang.String apply ( java.lang.String a ) { return a.toUpperCase ( ) ; }
void onRemoveByKeys ( org.eclipse.jgit.lib.ObjectId newNotesRev , com.google.gerrit.reviewdb.client.Account.Id accountId , java.lang.Iterable < com.google.gerrit.server.account.externalids.ExternalId.Key > extIdKeys ) throws java.io.IOException ;
com.googlesource.gerrit.plugins.findowners.OwnersDb get ( com.google.gerrit.server.account.AccountCache accountCache , com.google.gerrit.server.account.Emails emails , org.eclipse.jgit.lib.Repository repo , com.google.gerrit.server.query.change.ChangeData changeData ) throws com.google.gwtorm.server.OrmException { return get ( accountCache , emails , repo , changeData , changeData.currentPatchSet ( ) . getId ( ) . get ( ) ) ; }
public void execute ( com.google.gerrit.server.git.BatchUpdate.Listener listener ) throws com.google.gerrit.extensions.restapi.RestApiException , com.google.gerrit.server.git.UpdateException { com.google.gerrit.server.git.BatchUpdate.execute ( com.google.common.collect.ImmutableList.of ( this ) , listener , requestId , false ) ; }
protected void configure ( ) { bind ( com.google.gerrit.httpd.GerritUiOptions.class ) . toInstance ( new com.google.gerrit.httpd.GerritUiOptions ( headless ) ) ; }
public com.google.gerrit.server.group.GroupJson.GroupInfo apply ( com.google.gerrit.server.group.IncludedGroupResource rsrc ) { return json.format ( rsrc.getMemberDescription ( ) ) ; }
public static com.google.gerrit.reviewdb.client.Change.Status changeStatus2Status ( com.google.gerrit.extensions.common.ChangeStatus status ) { if ( status != null ) { return com.google.gerrit.server.api.changes.ChangeInfoMapper.STATUS_MAP.inverse ( ) . get ( status ) ; } return com.google.gerrit.reviewdb.client.Change.Status.NEW ; }
public com.googlesource.gerrit.plugins.github.git.PagedIterable < com.googlesource.gerrit.plugins.github.git.GHCommitStatus > listCommitStatuses ( java.lang.String sha1 ) throws java.io.IOException { return ghRepository.listCommitStatuses ( sha1 ) ; }
public void onSuccess ( com.google.gerrit.client.change.RelatedChanges.RelatedInfo result ) { tabPanel.getTabBar ( ) . setTabText ( 0 , Resources.M.relatedChanges ( result.changes ( ) . length ( ) ) ) ; render ( revision , result.changes ( ) ) ; }
public void onSuccess ( java.lang.Void result ) { net.codemirror.lib.Loader.initVimKeys ( ) ; cb.onSuccess ( null ) ; }
public void evict ( final java.lang.String email ) { cache.remove ( email ) ; }
public void rollback ( ) throws com.google.gwtorm.client.OrmException ;
public void onClick ( final com.google.gwt.user.client.ui.Widget sender ) { doCreateGroup ( ) ; }
public com.google.gerrit.server.IdentifiedUser create ( com.google.inject.Provider < com.google.gerrit.reviewdb.server.ReviewDb > db , com.google.gerrit.reviewdb.client.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( capabilityControlFactory , starredChangesUtil , authConfig , realm , anonymousCowardName , canonicalUrl , accountCache , groupBackend , disableReverseDnsLookup , null , db , id , null ) ; }
public void getTask_NotFound ( ) throws java.lang.Exception { userSession.get ( ( "/config/server/tasks/" + ( getLogFileCompressorTaskId ( ) ) ) ) . assertNotFound ( ) ; }
public java.util.List < com.google.gerrit.extensions.client.ProjectWatchInfo > setWatchedProjects ( java.util.List < com.google.gerrit.extensions.client.ProjectWatchInfo > in ) throws com.google.gerrit.extensions.restapi.RestApiException { throw new com.google.gerrit.extensions.restapi.NotImplementedException ( ) ; }
protected com.google.gerrit.reviewdb.client.Change newChange ( ) throws com.google.gwtorm.server.OrmException , java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { com.google.gerrit.reviewdb.client.Change c = com.google.gerrit.testutil.TestChanges.newChange ( project , changeOwner.getAccountId ( ) ) ; newUpdate ( c , changeOwner ) . commit ( ) ; return c ; }
public void onFailure ( java.lang.Throwable caught ) { enableButtons ( true ) ; }
public void pushWithPrivateByDefaultEnabled ( ) throws java.lang.Exception { setPrivateByDefault ( project2 , InheritableBoolean.TRUE ) ; com.google.common.truth.Truth.assertThat ( createChange ( project2 ) . getChange ( ) . change ( ) . isPrivate ( ) ) . isEqualTo ( true ) ; }
public java.lang.String getSchemeRest ( ) { java.lang.String scheme = key.getScheme ( ) ; return null != scheme ? getExternalId ( ) . substring ( ( ( scheme.length ( ) ) + 1 ) ) : null ; }
private static final java.lang.String getPluginName ( ) { if ( ( com.google.gerrit.client.api.ApiGlue.pluginName ) != null ) { return com.google.gerrit.client.api.ApiGlue.pluginName ; } return com.google.gerrit.client.api.PluginName.fromUrl ( com.google.gerrit.client.api.PluginName.getCallerUrl ( ) ) ; }
public void check ( com.google.gerrit.extensions.api.access.GlobalOrPluginPermission perm ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.server.permissions.PermissionBackendException { if ( ! ( can ( perm ) ) ) { throw new com.google.gerrit.extensions.restapi.AuthException ( ( ( perm.describeForException ( ) ) + " not permitted" ) ) ; } }
public com.googlesource.gerrit.plugins.its.base.validation.ItsAssociationPolicy getItsAssociationPolicy ( ) { com.googlesource.gerrit.plugins.its.base.validation.ItsAssociationPolicy legacyAssociatonPolicy = gerritConfig.getEnum ( "commentlink" , getCommentLinkName ( ) , "association" , ItsAssociationPolicy.OPTIONAL ) ; return gerritConfig.getEnum ( "plugin" , pluginName , "association" , legacyAssociatonPolicy ) ; }
public void onClick ( com.google.gwt.event.dom.client.ClickEvent event ) { setReviewedByCurrentUser ( true ) ; }
public void onClick ( com.google.gwt.event.dom.client.ClickEvent event ) { com.google.gerrit.client.Gerrit.deleteSessionCookie ( ) ; hide ( ) ; }
com.google.gwtorm.server.ResultSet < com.google.gwtorm.data.Person > olderThanDescByName ( int age ) throws com.google.gwtorm.server.OrmException ;
protected boolean supportsHtml ( ) { return false ; }
public static com.google.gerrit.index.query.Predicate < com.google.gerrit.index.project.ProjectData > description ( java.lang.String description ) { return new com.google.gerrit.index.project.ProjectPredicate ( com.google.gerrit.index.project.ProjectField.DESCRIPTION , description ) ; }
public static java.lang.String toPatch ( com.google.gerrit.reviewdb.client.PatchSet.Id diffBase , com.google.gerrit.reviewdb.client.PatchSet.Id revision , java.lang.String fileName ) { return com.google.gerrit.client.Dispatcher.toPatch ( "" , diffBase , revision , fileName , null , 0 ) ; }
private static void assertErrorStatus ( org.eclipse.jgit.transport.PushResult result , java.lang.String expectedMessage , java.lang.String ref ) { com.google.gerrit.acceptance.git.PushForReviewIT.assertStatus ( Status.REJECTED_OTHER_REASON , expectedMessage , result , ref ) ; }
public com.google.gerrit.extensions.api.changes.Changes.QueryRequest withOption ( com.google.gerrit.extensions.client.ListChangesOption options ) { this . options.add ( options ) ; return this ; }
public com.google.gerrit.reviewdb.client.PatchSet getCurrentPatchSet ( ) { com.google.gerrit.reviewdb.client.PatchSet.Id psId = change.currentPatchSetId ( ) ; return com.google.common.base.Preconditions.checkNotNull ( getPatchSets ( ) . get ( psId ) , "missing current patch set %s" , psId.get ( ) ) ; }
public java.lang.String call ( ) throws java.lang.Exception { log.debug ( "Performing action {} on issue {}" , actionName , issueKey ) ; doPerformAction ( issueKey , actionName ) ; return issueKey ; }
public boolean execute ( ) { if ( ( prefs.syntaxHighlighting ( ) ) && ( isAttached ( ) ) ) { setSyntaxHighlighting ( prefs.syntaxHighlighting ( ) ) ; } return false ; }
public void doGet ( javax.servlet.http.HttpServletRequest req , javax.servlet.http.HttpServletResponse res ) throws java.io.IOException { if ( ! ( isValidFile ( req ) ) ) { res.setStatus ( HttpServletResponse.SC_FORBIDDEN ) ; return ; } streamFile ( req , res ) ; }
public < I > com.google.gerrit.index.FieldDef < I , T > build ( com.google.gerrit.index.FieldDef.Getter < I , T > getter ) { return new com.google.gerrit.index.FieldDef ( name , type , stored , false , getter ) ; }
private static java.lang.String getContentPath ( com.googlesource.gerrit.plugins.lfs.LfsBackend backend ) { return ( ( ( com.googlesource.gerrit.plugins.lfs.fs.LocalLargeFileRepository.CONTENT_PATH ) + "/" ) + ( com.google.common.base.Strings.isNullOrEmpty ( backend.name ) ? com.googlesource.gerrit.plugins.lfs.LfsBackend.DEFAULT : backend.name ) ) + "/" ; }
protected com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.data.SingleListChangeInfo > loadCallback ( ) { return new com.google.gerrit.client.rpc.ScreenLoadCallback < com.google.gerrit.client.data.SingleListChangeInfo > ( this ) { @ java.lang.Override protected void preDisplay ( final com.google.gerrit.client.data.SingleListChangeInfo result ) { display ( result ) ; } } ; }
public void pushColumnIndex ( ) { mv.visitVarInsn ( com.google.gwtorm.jdbc.ILOAD , colvar ) ; }
public void dashboardDoesNotExist ( ) throws java.lang.Exception { exception.expect ( com.google.gerrit.extensions.restapi.ResourceNotFoundException.class ) ; gApi.projects ( ) . name ( project.get ( ) ) . dashboard ( "my:dashboard" ) . get ( ) ; }
public void register ( final java.lang.Runnable trigger ) { registry.register ( name , new com.codahale.metrics.Gauge < V > ( ) { @ java.lang.Override public com.google.gerrit.metrics.dropwizard.V getValue ( ) { trigger.run ( ) ; return value ; } } ) ; }
private com.google.gerrit.server.index.change.IndexedChangeQuery query ( com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > p , int limit ) throws com.google.gerrit.server.query.QueryParseException { return new com.google.gerrit.server.index.change.IndexedChangeQuery ( index , p , com.google.gerrit.server.index.change.ChangeIndexRewriterTest.options ( 0 , limit ) ) ; }
public com.google.gerrit.extensions.api.changes.Changes.QueryRequest withOptions ( java.util.EnumSet < com.google.gerrit.extensions.common.ListChangesOption > options ) { this . options = options ; return this ; }
public static void createProject ( com.google.gerrit.acceptance.SshSession s , java.lang.String name ) throws com.jcraft.jsch.JSchException , java.io.IOException { com.google.gerrit.acceptance.git.GitUtil.createProject ( s , name , null ) ; }
public void onClick ( com.google.gwt.event.dom.client.ClickEvent event ) { dialogBox.center ( ) ; dialogBox.show ( ) ; usernameTxt.setFocus ( true ) ; createButton.setEnabled ( false ) ; }
public com.google.gerrit.common.data.PermissionRange getRange ( java.lang.String permission ) { if ( com.google.gerrit.common.data.Permission.hasRange ( permission ) ) { return toRange ( permission , access ( permission ) ) ; } return null ; }
com.googlesource.gerrit.plugins.replication.PushAll create ( java.lang.String urlMatch , com.googlesource.gerrit.plugins.replication.ReplicationState state ) ;
public static void all ( com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.groups.GroupMap > callback ) { com.google.gerrit.client.groups.GroupMap.groups ( ) . get ( com.google.gerrit.client.rpc.NativeMap.copyKeysIntoChildren ( callback ) ) ; }
private static IdentifiedUser.GenericFactory userFactory ( com.googlecode.prolog_cafe.lang.Prolog engine ) { return ( ( com.google.gerrit.rules.PrologEnvironment ) ( engine.control ) ) . getArgs ( ) . getUserFactory ( ) ; }
public static void editWithFiles ( int id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.info.ChangeInfo.EditInfo > cb ) { com.google.gerrit.client.changes.ChangeApi.edit ( id ) . addParameterTrue ( "list" ) . get ( cb ) ; }
public static com.google.gerrit.index.query.Predicate < com.google.gerrit.server.account.AccountState > equalsName ( java.lang.String name ) { return new com.google.gerrit.server.query.account.AccountPredicates.AccountPredicate ( com.google.gerrit.server.index.account.AccountField.NAME_PART , AccountQueryBuilder.FIELD_NAME , name.toLowerCase ( ) ) ; }
com.google.gerrit.httpd.raw.FontsDevServlet getFontsServlet ( @ com.google.inject.name.Named ( value = com.google.gerrit.httpd.raw.StaticModule.CACHE ) com.google.common.cache.Cache < java.nio.file.Path , com.google.gerrit.httpd.raw.ResourceServlet.Resource > cache ) throws java.io.IOException { return getPaths ( ) . isDev ( ) ? new com.google.gerrit.httpd.raw.FontsDevServlet ( cache , getPaths ( ) . buckOut ) : null ; }
public Account.Id lookup ( final java.lang.String accountName ) { return com.google.gerrit.server.util.FutureUtil.get ( usernameCache.get ( accountName ) ) ; }
public java.lang.String getTrackingId ( ) { return key.trackingKey.get ( ) ; }
public long getTimeToLive ( java.util.concurrent.TimeUnit unit ) ;
com.google.common.base.Optional < org.eclipse.jgit.lib.ObjectId > getObjectId ( java.lang.String refName ) throws java.io.IOException { return cmds.get ( refName ) ; }
void addQuery ( java.lang.String name ) { if ( ( query ) == null ) { query = new java.util.HashSet < > ( ) ; } com.google.common.collect.Iterables.addAll ( query , com.google.gerrit.server.OptionUtil.splitOptionValue ( name ) ) ; }
public com.google.common.collect.ImmutableSet < java.lang.String > getEmailAddresses ( ) { if ( ! ( loadedAllEmails ) ) { validEmails.addAll ( realm.getEmailAddresses ( this ) ) ; loadedAllEmails = true ; } return com.google.common.collect.ImmutableSet.copyOf ( validEmails ) ; }
protected com.google.gerrit.server.query.Predicate < com.google.gerrit.server.account.AccountState > enforceVisibility ( com.google.gerrit.server.query.Predicate < com.google.gerrit.server.account.AccountState > pred ) { return new com.google.gerrit.server.query.AndSource ( pred , new com.google.gerrit.server.query.account.AccountIsVisibleToPredicate ( accountControlFactory.get ( ) ) , start ) ; }
public java.util.List < com.google.gerrit.server.git.validators.CommitValidationMessage > onCommitReceived ( com.google.gerrit.server.events.CommitReceivedEvent receiveEvent ) throws com.google.gerrit.server.git.validators.CommitValidationException { if ( itsConfig.isEnabled ( receiveEvent.project.getName ( ) ) ) { return validCommit ( receiveEvent.command , receiveEvent.commit ) ; } else { return java.util.Collections.emptyList ( ) ; } }
void quickApprove ( com.google.gerrit.client.changes.ReviewInput input ) { replyBox.quickApprove ( input ) ; }
public com.google.gerrit.extensions.api.changes.AddReviewerResult addReviewer ( java.lang.String in ) throws com.google.gerrit.extensions.restapi.RestApiException { throw new com.google.gerrit.extensions.restapi.NotImplementedException ( ) ; }
public void onOk ( ) { }
public void deleteOneExisting ( ) throws com.google.gwtorm.server.OrmException , java.sql.SQLException { java.sql.PreparedStatement delete = stubStatementWithUpdateCounts ( com.google.gwtorm.jdbc.AbstractTestJdbcAccess.DELETE , 1 ) ; classUnderTest.delete ( oneRow ) ; assertCorrectUpdating ( delete , 1 ) ; }
public void center ( ) { show ( ) ; com.google.gwtexpui.globalkey.client.GlobalKey.dialog ( this ) ; signin.setFocus ( true ) ; }
boolean isStale ( ) { return ( lastModified ) != ( com.google.gerrit.common.FileUtil.lastModified ( src ) ) ; }
protected final java.lang.String getConfiguredSecureStoreClass ( ) { return com.google.gerrit.server.config.GerritServerConfigModule.getSecureStoreClassName ( sitePath ) ; }
public void onSuccess ( com.google.gerrit.client.info.GeneralPreferences p ) { this . display ( p.my ( ) ) ; widget.setEnabled ( true ) ; }
, @ com.google.gerrit.acceptance.GerritConfig ( name = "suggest.from" , value = "1" ) , @ com.google.gerrit.acceptance.GerritConfig ( name = "accounts.visibility" , value = "NONE" ) } ) public void suggestReviewersNoResult2 ( ) throws java.lang.Exception { java.lang.String changeId = createChange ( ) . getChangeId ( ) ; java.util.List < com.google.gerrit.extensions.common.SuggestedReviewerInfo > reviewers = suggestReviewers ( changeId , name ( "u" ) , 6 ) ; com.google.common.truth.Truth.assertThat ( reviewers ) . isEmpty ( ) ; }
public org.apache.sshd.server.SshFile getFile ( org.apache.sshd.server.SshFile baseDir , java.lang.String file ) { return null ; }
void setPluginName ( @ com.google.gerrit.extensions.annotations.PluginName java.lang.String name , final java.lang.String descr ) { this . command = com.google.gerrit.sshd.Commands.named ( name ) ; }
private void reject ( final org.eclipse.jgit.transport.ReceiveCommand cmd , final java.lang.String why ) { cmd.setResult ( ReceiveCommand.Result.REJECTED_OTHER_REASON , why ) ; commandProgress.update ( 1 ) ; }
public com.googlecode.prolog_cafe.lang.NumberTerm log ( ) { if ( ( this . val ) == 0 ) throw new com.googlecode.prolog_cafe.exceptions.EvaluationException ( "undefined" ) ; return new com.googlecode.prolog_cafe.lang.DoubleTerm ( java.lang.Math.log ( this . val ) ) ; }
public void testCreatePermissionOnlyProject ( ) throws java.io.IOException { final java.lang.String newProjectName = "newProject" ; com.google.gerrit.extensions.api.projects.ProjectInput in = new com.google.gerrit.extensions.api.projects.ProjectInput ( ) ; in.permissionsOnly = true ; adminSession.put ( ( "/projects/" + newProjectName ) , in ) ; assertHead ( newProjectName , RefNames.REFS_CONFIG ) ; }
void expandAll ( ) { expandSideAll ( ) ; otherBar.expandSideAll ( ) ; }
private static boolean isRead ( javax.servlet.http.HttpServletRequest req ) { return ( "GET" . equals ( req.getMethod ( ) ) ) || ( "HEAD" . equals ( req.getMethod ( ) ) ) ; }
com.google.gerrit.client.reviewdb.Account byOpenId ( com.google.gerrit.client.reviewdb.Account.OpenId key ) throws com.google.gwtorm.client.OrmException ;
java.lang.String getTokenSuffixForActiveLine ( net.codemirror.lib.CodeMirror cm ) { return ( ( cm.side ( ) ) == ( DisplaySide.A ) ? "a" : "" ) + ( ( cm.getLineNumber ( cm.extras ( ) . activeLine ( ) ) ) + 1 ) ; }
default void onCreate ( org.eclipse.jgit.lib.ObjectId oldNotesRev , org.eclipse.jgit.lib.ObjectId newNotesRev , com.google.gerrit.server.account.externalids.ExternalId extId ) throws java.io.IOException { onCreate ( oldNotesRev , newNotesRev , java.util.Collections.singleton ( extId ) ) ; }
private java.util.List < com.google.gerrit.reviewdb.RefRight > getInheritedRights ( com.google.gerrit.reviewdb.ApprovalCategory.Id actionId ) { if ( actionId.canInheritFromWildProject ( ) ) { return filter ( projectControl.getProjectState ( ) . getInheritedRights ( ) , actionId ) ; } else { return java.util.Collections.emptyList ( ) ; } }
public void display ( com.google.gerrit.client.groups.GroupList groups ) { display ( com.google.gerrit.client.rpc.Natives.asList ( groups ) , null ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { if ( com.google.gerrit.client.Gerrit.isSignedIn ( ) ) { star.setValue ( ( ! ( star.getValue ( ) ) ) , true ) ; } else { com.google.gerrit.client.Gerrit.doSignIn ( getToken ( ) ) ; } }
com.google.gwtorm.client.ResultSet < com.google.gerrit.client.reviewdb.Change > byOwnerClosed ( com.google.gerrit.client.reviewdb.Account.Id id ) throws com.google.gwtorm.client.OrmException ;
public void testInsertOne ( ) throws com.google.gwtorm.server.OrmException , java.sql.SQLException { java.sql.PreparedStatement insert = stubStatementWithUpdateCounts ( com.google.gwtorm.jdbc.TestJdbcAccess.INSERT , 1 ) ; createClassUnderTest ( ) . insert ( oneRow ) ; com.google.gwtorm.jdbc.TestJdbcAccess.assertUsedBatchingOnly ( insert ) ; }
public java.lang.String getETag ( ) { com.google.common.hash.Hasher h = com.google.common.hash.Hashing.murmur3_128 ( ) . newHasher ( ) ; prepareETag ( h , getUser ( ) ) ; return h.hash ( ) . toString ( ) ; }
public com.google.gerrit.server.plugins.Plugin.CacheKey getCacheKey ( ) { return cacheKey ; }
public static com.google.gerrit.extensions.api.projects.BanCommitInput fromCommits ( java.lang.String firstCommit , java.lang.String ... moreCommits ) { return com.google.gerrit.extensions.api.projects.BanCommitInput.fromCommits ( com.google.common.collect.Lists.asList ( firstCommit , moreCommits ) ) ; }
public void onSuccess ( com.google.gwt.core.client.JavaScriptObject msg ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( changeId ) ) ; hide ( ) ; }
private void addMessage ( java.lang.String message ) { messages.add ( new com.google.gerrit.server.git.validators.CommitValidationMessage ( message , false ) ) ; }
public void execute ( ) { for ( final com.google.gwt.user.client.ui.Widget w : panel ) { if ( w instanceof com.google.gerrit.client.ui.CommentPanel ) { expand ( ( ( com.google.gerrit.client.ui.CommentPanel ) ( w ) ) ) ; } } }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { save.setEnabled ( true ) ; }
private java.util.Set < java.security.PublicKey > getPeerKeys ( ) { com.google.gerrit.sshd.DatabasePubKeyAuth.PeerKeyCache p = peerKeyCache ; if ( ! ( p.isCurrent ( ) ) ) { p = p.reload ( ) ; peerKeyCache = p ; } return p.keys ; }
public void set ( com.googlecode.prolog_cafe.lang.Prolog engine , T obj ) { set ( ( ( com.google.gerrit.rules.PrologEnvironment ) ( engine.control ) ) , obj ) ; }
public java.util.Optional < com.googlesource.gerrit.plugins.webhooks.EventProcessor.Request > doProcess ( com.google.gerrit.server.events.ProjectEvent event , com.googlesource.gerrit.plugins.webhooks.RemoteConfig remote ) { return java.util.Optional.empty ( ) ; }
private void initSignatures ( ) { setSignatureFactories ( org.apache.sshd.common.BaseBuilder.setUpDefaultSignatures ( true ) ) ; }
protected void beforeTest ( org.junit.runner.Description description ) throws java.lang.Exception { locatePaths ( ) ; retrievePluginName ( ) ; buildPluginJar ( ) ; createTestSiteDirs ( ) ; copyJarToTestSite ( ) ; super . beforeTest ( description ) ; }
public com.google.gerrit.client.rpc.RestApi data ( java.lang.String data ) { contentType = ( com.google.gerrit.client.rpc.RestApi.TEXT_TYPE ) + "; charset=utf-8" ; contentData = data ; return this ; }
public boolean apply ( com.google.gerrit.reviewdb.client.PatchSetApproval input ) { return accountId.equals ( input.getAccountId ( ) ) ; }
void onRemoveByKeys ( org.eclipse.jgit.lib.ObjectId oldNotesRev , org.eclipse.jgit.lib.ObjectId newNotesRev , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId.Key > extIdKeys ) throws java.io.IOException ;
private static java.lang.String quoteForPerl ( java.nio.file.Path value ) { return com.google.gerrit.httpd.gitweb.GitWebServlet.quoteForPerl ( value.toAbsolutePath ( ) . toString ( ) ) ; }
public java.util.List < com.google.gerrit.server.account.AccountState > byExternalId ( com.google.gerrit.server.account.ExternalId.Key externalId ) throws com.google.gwtorm.server.OrmException { return query ( com.google.gerrit.server.query.account.AccountPredicates.externalId ( externalId.toString ( ) ) ) ; }
public com.googlesource.gerrit.plugins.github.git.GHPersonSet < com.googlesource.gerrit.plugins.github.git.GHUser > getCollaborators ( ) throws java.io.IOException { return ghRepository.getCollaborators ( ) ; }
private static boolean isTextBody ( com.google.gwt.http.client.Response res ) { return com.google.gerrit.client.rpc.RestApi.isContentType ( res , com.google.gerrit.client.rpc.RestApi.TEXT_TYPE ) ; }
public java.lang.String getToken ( com.google.gwtjsonrpc.client.JsonDefTarget proxy ) { return com.google.gerrit.client.Gerrit.xsrfToken ; }
public com.google.gerrit.extensions.api.changes.AddReviewerResult addReviewer ( java.lang.String in ) throws com.google.gerrit.extensions.restapi.RestApiException { throw new com.google.gerrit.extensions.restapi.NotImplementedException ( ) ; }
public void setValue ( final com.google.gerrit.extensions.client.DiffPreferencesInfo dp ) { listenablePrefs.set ( dp ) ; display ( ) ; }
public abstract boolean match ( java.lang.String ref , com.google.gerrit.server.CurrentUser user ) ;
private com.google.gerrit.ehcache.SerializableProtobuf < K > wrapKey ( K key ) { return new com.google.gerrit.ehcache.SerializableProtobuf < K > ( key , keyCodec ) ; }
public static com.google.gitiles.BaseServlet notFoundServlet ( ) { return new com.google.gitiles.BaseServlet ( null ) { private static final long serialVersionUID = 1L ; @ java.lang.Override public void service ( javax.servlet.http.HttpServletRequest req , javax.servlet.http.HttpServletResponse res ) { res.setStatus ( javax.servlet.http.HttpServletResponse.SC_NOT_FOUND ) ; } } ; }
private final native void set ( int sl , int sc , int el , int ec ) ;
public boolean createProject ( com.google.gerrit.reviewdb.client.Project.NameKey project , java.lang.String head ) { boolean success = true ; for ( org.eclipse.jgit.transport.URIish uri : getURIs ( project , FilterType.PROJECT_CREATION ) ) { success &= createProject ( uri , head ) ; } return success ; }
private com.google.gerrit.extensions.client.Theme getSelectedTheme ( ) { return com.google.gerrit.extensions.client.Theme.valueOf ( theme.getValue ( theme.getSelectedIndex ( ) ) ) ; }
private static java.lang.String now ( ) { return new java.text.SimpleDateFormat ( "yyyyMMdd:HHmm" ) . format ( new java.util.Date ( ) ) ; }
private com.google.gerrit.extensions.api.projects.TagApi tag ( java.lang.String tagname ) throws java.lang.Exception { return gApi.projects ( ) . name ( project.get ( ) ) . tag ( tagname ) ; }
private final native void setSubmittable ( boolean x ) ;
public void onSuccess ( com.google.gerrit.client.info.ChangeInfo.EditInfo result ) { fetch = result.fetch ( ) ; renderScheme ( ) ; }
public synchronized void setStatus ( int sc , java.lang.String msg ) { status = sc ; committed = true ; }
private com.google.gerrit.acceptance.GerritServer startImpl ( @ com.google.gerrit.common.Nullable com.google.inject.Module testSysModule , java.lang.String ... additionalArgs ) throws java.lang.Exception { return com.google.gerrit.acceptance.GerritServer.start ( serverDesc , baseConfig , sitePaths.site_path , testSysModule , additionalArgs ) ; }
private void post ( final java.lang.String url , final com.google.gerrit.server.events.ProjectEvent projectEvent ) { taskFactory.create ( url , projectEvent ) . schedule ( ) ; }
private boolean isAllProjects ( com.google.gerrit.server.project.ProjectResource rsrc ) { return rsrc.getProjectState ( ) . getProject ( ) . getNameKey ( ) . equals ( allProjectsName ) ; }
public void onSuccess ( final com.google.gwtjsonrpc.client.VoidResult result ) { com.google.gerrit.client.Gerrit.getUserAccount ( ) . setUserName ( newUserName ) ; userNameTxt.setEnabled ( true ) ; changeUserName.setEnabled ( false ) ; }
protected void format ( ) throws com.google.gerrit.common.errors.EmailException { appendText ( textTemplate ( "AddKey" ) ) ; }
public void parseMissingSha ( ) throws java.lang.Exception { org.junit.Assert.assertNull ( parser.parse ( "deadbeef" ) ) ; org.junit.Assert.assertNull ( parser.parse ( "deadbeefdeadbeefdeadbeefdeadbeefdeadbeef" ) ) ; }
private java.lang.String newChange2 ( org.eclipse.jgit.api.Git git , org.eclipse.jgit.lib.PersonIdent ident ) throws java.lang.Exception { com.google.gerrit.acceptance.PushOneCommit push = pushFactory.create ( db , ident , PushOneCommit.SUBJECT , com.google.gerrit.acceptance.edit.ChangeEditIT.FILE_NAME , new java.lang.String ( com.google.gerrit.acceptance.edit.ChangeEditIT.CONTENT_OLD ) ) ; return push.rm ( git , "refs/for/master" ) . getChangeId ( ) ; }
public void resetHtml ( final com.google.gerrit.client.ui.FancyFlexTable.MyFlexTable myTable , final com.google.gwtexpui.safehtml.client.SafeHtml body ) { com.google.gwtexpui.safehtml.client.SafeHtml.set ( com.google.gerrit.client.ui.FancyFlexTableImpl.getBodyElement ( myTable ) , body ) ; }
protected void configure ( ) { bind ( com.google.gerrit.httpd.GerritUiOptions.class ) . toInstance ( new com.google.gerrit.httpd.GerritUiOptions ( headless ) ) ; if ( test ) { bind ( com.google.gerrit.server.securestore.SecureStore.class ) . toProvider ( com.google.gerrit.server.securestore.SecureStoreProvider.class ) ; } }
private int getPermittedLimit ( ) { if ( enforceVisibility ) { return userProvider.get ( ) . getCapabilities ( ) . getRange ( GlobalCapability.QUERY_LIMIT ) . getMax ( ) ; } return java.lang.Integer.MAX_VALUE ; }
public final com.google.gerrit.index.Schema.Builder < T > remove ( com.google.gerrit.index.FieldDef < T , ? > ... fields ) { this . fields.removeAll ( java.util.Arrays.asList ( fields ) ) ; return this ; }
private ProjectResetter.Builder builder ( @ com.google.gerrit.common.Nullable com.google.gerrit.acceptance.AccountCreator accountCreator , @ com.google.gerrit.common.Nullable com.google.gerrit.server.account.AccountCache accountCache , @ com.google.gerrit.common.Nullable com.google.gerrit.server.index.account.AccountIndexer accountIndexer , @ com.google.gerrit.common.Nullable com.google.gerrit.server.project.ProjectCache projectCache ) { return new com.google.gerrit.acceptance.ProjectResetter.Builder ( repoManager , new com.google.gerrit.server.config.AllUsersName ( com.google.gerrit.server.config.AllUsersNameProvider.DEFAULT ) , accountCreator , accountCache , accountIndexer , projectCache ) ; }
public AccountGroup.UUID getOwnerGroupUUID ( ) { return group.getOwnerGroupUUID ( ) ; }
private static boolean skip ( java.lang.String name ) { return ( ( name.startsWith ( RefNames.REFS_CHANGES ) ) || ( name.startsWith ( RefNames.REFS_CACHE_AUTOMERGE ) ) ) || ( com.google.gerrit.server.util.MagicBranch.isMagicBranch ( name ) ) ; }
public static void getExternalIds ( com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwt.core.client.JsArray < com.google.gerrit.client.account.ExternalIdInfo > > cb ) { com.google.gerrit.client.account.AccountApi.self ( ) . view ( "external.ids" ) . get ( cb ) ; }
public void shouldNotDispatchForwardedEvents ( ) { com.ericsson.gerrit.plugins.highavailability.forwarder.Context.setForwardedEvent ( true ) ; try { broker.fireEventForUnrestrictedListeners ( event ) ; } finally { com.ericsson.gerrit.plugins.highavailability.forwarder.Context.unsetForwardedEvent ( ) ; } org.mockito.Mockito.verifyZeroInteractions ( listenerMock ) ; }
public boolean allowsEdit ( com.google.gerrit.reviewdb.client.Account.FieldName field ) { return editableAccountFields.contains ( field ) ; }
public com.google.gerrit.pgm.init.LibraryDownloader get ( ) { return new com.google.gerrit.pgm.init.LibraryDownloader ( ui , site , remover ) ; }
public java.lang.Object apply ( com.google.gerrit.server.change.DraftResource rsrc , com.google.gerrit.server.change.DeleteDraft.Input input ) throws com.google.gwtorm.server.OrmException { db.get ( ) . patchComments ( ) . delete ( java.util.Collections.singleton ( rsrc.getComment ( ) ) ) ; return com.google.gerrit.extensions.restapi.Response.none ( ) ; }
public void testBackreference ( ) { com.google.gwtexpui.safehtml.client.LinkFindReplace l = new com.google.gwtexpui.safehtml.client.LinkFindReplace ( "(bug|issue)\\s*([0-9]+)" , "/bug?id=$2" ) ; com.google.common.truth.Truth.assertThat ( l.replace ( "issue 123" ) ) . isEqualTo ( "<a href=\"/bug?id=123\">issue 123</a>" ) ; }
protected com.google.gerrit.server.group.InternalGroup fromDocument ( org.apache.lucene.document.Document doc ) { com.google.gerrit.reviewdb.client.AccountGroup.UUID uuid = new com.google.gerrit.reviewdb.client.AccountGroup.UUID ( doc.getField ( com.google.gerrit.server.index.group.GroupField.UUID.getName ( ) ) . stringValue ( ) ) ; return groupCache.get ( ) . get ( uuid ) . orElse ( null ) ; }
protected void configure ( ) { bind ( new com.google.inject.TypeLiteral < com.google.gwtorm.client.SchemaFactory < com.google.gerrit.reviewdb.ReviewDb > > ( ) { } ) . toProvider ( com.google.gerrit.httpd.ReviewDbDataSourceProvider.class ) . in ( com.google.inject.Scopes.SINGLETON ) ; listener ( ) . to ( com.google.gerrit.httpd.ReviewDbDataSourceProvider.class ) ; }
public java.lang.String toString ( ) { return ( ( com.google.gerrit.index.query.IntPredicate.getOperator ( ) ) + ":" ) + ( com.google.gerrit.index.query.IntPredicate.getValue ( ) ) ; }
public void suggestReviewer ( com.google.gerrit.reviewdb.client.Project.NameKey project , java.lang.String query , int limit , com.google.gwtjsonrpc.common.AsyncCallback < java.util.List < com.google.gerrit.common.data.ReviewerInfo > > callback ) { callback.onSuccess ( java.util.Collections.< com.google.gerrit.common.data.ReviewerInfo > emptyList ( ) ) ; }
private com.google.gerrit.server.group.InternalGroup toInternalGroup ( org.apache.lucene.document.Document doc ) { com.google.gerrit.reviewdb.client.AccountGroup.UUID uuid = new com.google.gerrit.reviewdb.client.AccountGroup.UUID ( doc.getField ( com.google.gerrit.server.index.group.GroupField.UUID.getName ( ) ) . stringValue ( ) ) ; return groupCache.get ( ) . get ( uuid ) . orElse ( null ) ; }
private boolean canSeeMembers ( ) { if ( ( group ) instanceof com.google.gerrit.common.data.GroupDescription.Internal ) { return ( ( ( com.google.gerrit.common.data.GroupDescription.Internal ) ( group ) ) . isVisibleToAll ( ) ) || ( isOwner ( ) ) ; } return false ; }
public long getMaxValue ( ) { return com.google.gerrit.server.ChangeUtil.parseSortKey ( getValue ( ) ) ; }
private void superWindowResolution ( ) { com.google.gerrit.testing.TestTimeUtil.setClockStep ( ( ( com.google.gerrit.server.notedb.rebuild.ChangeRebuilderImpl.MAX_WINDOW_MS ) * 2 ) , java.util.concurrent.TimeUnit.MILLISECONDS ) ; com.google.gerrit.common.TimeUtil.nowTs ( ) ; }
public void createProjectHttpWithUnreasonableName_BadRequest ( ) throws java.lang.Exception { com.google.common.collect.ImmutableList < java.lang.String > forbiddenStrings = com.google.common.collect.ImmutableList.of ( "/../" , "/./" , "//" , ".git/" , "?" , "%" , "*" , ":" , "<" , ">" , "|" , "$" , "/+" , "~" ) ; for ( java.lang.String s : forbiddenStrings ) { java.lang.String projectName = name ( ( ( "invalid" + s ) + "name" ) ) ; com.google.common.truth.Truth.assertWithMessage ( ( ( "Expected status code for " + projectName ) + " to be 400." ) ) . that ( adminRestSession.put ( ( "/projects/" + ( com.google.gerrit.extensions.restapi.Url.encode ( projectName ) ) ) ) . getStatusCode ( ) ) . isEqualTo ( HttpStatus.SC_BAD_REQUEST ) ; } }
public void createExtraAccount ( ) throws java.lang.Exception { extraReviewer = accountCreator.create ( "extraReviewer" , "extraReviewer@example.com" , "extraReviewer" ) ; extraCcer = accountCreator.create ( "extraCcer" , "extraCcer@example.com" , "extraCcer" ) ; }
void createNewProject ( java.lang.String projectName , java.lang.String parentName , boolean emptyCommit , boolean permissionsOnly , com.google.gwtjsonrpc.common.AsyncCallback < com.google.gwtjsonrpc.common.VoidResult > callback ) ;
public void postUpdateImpl ( com.google.gerrit.server.update.Context ctx ) throws com.google.gwtorm.server.OrmException { if ( ( rebaseOp ) != null ) { rebaseOp.postUpdate ( ctx ) ; } }
public static void putMessage ( com.google.gerrit.reviewdb.client.Change.Id id , java.lang.String m , com.google.gerrit.client.rpc.GerritCallback < com.google.gerrit.client.VoidResult > r ) { com.google.gerrit.client.changes.ChangeApi.change ( id.get ( ) ) . view ( "edit:message" ) . put ( m , r ) ; }
void onDeleteEdit ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { if ( com.google.gwt.user.client.Window.confirm ( Resources.C.deleteChangeEdit ( ) ) ) { com.google.gerrit.client.change.EditActions.deleteEdit ( changeId , publishEdit , rebaseEdit , deleteEdit ) ; } }
public java.lang.String [ ] getParameterValues ( java.lang.String name ) { return parameters.get ( name ) . toArray ( new java.lang.String [ 0 ] ) ; }
com.google.gwt.resources.client.CssResource prettify_css ( ) ;
public void run ( ) { com.google.gerrit.client.diff.CommentGroup group = getCommentGroupOnActiveLine ( cm ) ; if ( group != null ) { group.openCloseAll ( ) ; } }
private static java.lang.String swfUrl ( ) { return ClippyResources.I.swf ( ) . getSafeUri ( ) . asString ( ) ; }
public void addRefUpdate ( org.eclipse.jgit.transport.ReceiveCommand cmd ) throws java.io.IOException { initRepository ( ) ; commands.add ( cmd ) ; }
public void onDoubleClick ( com.google.gwt.event.dom.client.DoubleClickEvent event ) { if ( headerSideA.isFile ( ) ) { createFileCommentEditorOnSideA ( ) ; } }
private com.google.gerrit.extensions.common.EditInfo toEditInfo ( boolean files ) throws java.lang.Exception { com.google.gerrit.acceptance.RestResponse r = adminRestSession.get ( ( files ? urlGetFiles ( ) : urlEdit ( ) ) ) ; return readContentFromJson ( r , com.google.gerrit.extensions.common.EditInfo.class ) ; }
public void put ( com.google.gerrit.server.account.AccountInfo info ) { provided.add ( info ) ; }
private static com.google.gerrit.client.rpc.RestApi call ( int id , java.lang.String commit , java.lang.String action ) { return com.google.gerrit.client.changes.ChangeApi.change ( id ) . view ( "revisions" ) . id ( commit ) . view ( action ) ; }
void apply ( com.google.gerrit.server.notedb.ChangeUpdate update ) throws com.google.gwtorm.server.OrmException { checkUpdate ( update ) ; if ( ( c.getRevId ( ) ) == null ) { com.google.gerrit.server.PatchLineCommentsUtil.setCommentRevId ( c , cache , change , ps ) ; } update.putComment ( c ) ; }
private void cherryPickUnbornRoot ( com.google.gerrit.server.git.CodeReviewCommit n , com.google.gerrit.server.git.MergeTip mergeTip ) { mergeTip.moveTipTo ( n , n ) ; n.setStatusCode ( CommitMergeStatus.CLEAN_MERGE ) ; }
public void listBranchesOfNonExistingProject_NotFound ( ) throws java.lang.Exception { try { gApi.projects ( ) . name ( "non-existing" ) . branches ( ) . get ( ) ; org.junit.Assert.fail ( "Expected ResourceNotFoundException" ) ; } catch ( com.google.gerrit.extensions.restapi.ResourceNotFoundException expected ) { } }
private java.util.List < com.google.gerrit.reviewdb.RefRight > getAllRights ( com.google.gerrit.reviewdb.ApprovalCategory.Id actionId ) { final java.util.List < com.google.gerrit.reviewdb.RefRight > allRefRights = filter ( getProjectState ( ) . getAllRights ( actionId , true ) ) ; return resolveOwnerGroups ( allRefRights ) ; }
void onReplaceByKeys ( org.eclipse.jgit.lib.ObjectId oldNotesRev , org.eclipse.jgit.lib.ObjectId newNotesRev , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId.Key > toRemove , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId > toAdd ) throws java.io.IOException ;
public void onSuccess ( final com.google.gerrit.client.reviewdb.Account result ) { com.google.gwt.user.client.DeferredCommand.addCommand ( new com.google.gwt.user.client.Command ( ) { public void execute ( ) { hide ( ) ; com.google.gerrit.client.Gerrit.postSignIn ( result , ac ) ; } } ) ; }
public static com.google.gerrit.index.query.Predicate < com.google.gerrit.server.group.InternalGroup > subgroup ( com.google.gerrit.reviewdb.client.AccountGroup.UUID subgroupUuid ) { return new com.google.gerrit.server.query.group.GroupPredicates.GroupPredicate ( com.google.gerrit.server.index.group.GroupField.SUBGROUP , subgroupUuid.get ( ) ) ; }
private java.lang.String urlEditMessage ( boolean base ) { return ( ( "/changes/" + ( change.getChangeId ( ) ) ) + "/edit:message" ) + ( base ? "?base" : "" ) ; }
public static com.google.common.collect.ImmutableList < com.google.gerrit.gpg.testutil.TestKey > allValidKeys ( ) { return com.google.common.collect.ImmutableList.of ( com.google.gerrit.gpg.testutil.TestKeys.validKeyWithoutExpiration ( ) , com.google.gerrit.gpg.testutil.TestKeys.validKeyWithExpiration ( ) , com.google.gerrit.gpg.testutil.TestKeys.validKeyWithSecondUserId ( ) ) ; }
public void testChangeEventShouldBeQueuedWhenSubmitted ( ) { asyncListener.onEvent ( event ) ; org.junit.Assert.assertEquals ( event , asyncListener.getQueue ( ) . peek ( ) ) ; }
public java.lang.Integer get ( ) { return org.eclipse.jgit.storage.file.WindowCacheStats.getOpenFiles ( ) ; }
public void createEmptyChange_MissingBranch ( ) throws java.lang.Exception { com.google.gerrit.extensions.common.ChangeInput ci = new com.google.gerrit.extensions.common.ChangeInput ( ) ; ci.project = project.get ( ) ; assertCreateFails ( ci , com.google.gerrit.extensions.restapi.BadRequestException.class , "branch must be non-empty" ) ; }
private final native void screen ( java.lang.String t , com.google.gwt.core.client.JavaScriptObject e ) ;
public void startLineGreaterThanEndLineResultsInInvalidRange ( ) { com.google.gerrit.extensions.client.Comment.Range range = createRange ( 20 , 2 , 19 , 10 ) ; com.google.gerrit.extensions.client.testing.RangeSubject.assertThat ( range ) . isInvalid ( ) ; }
public void setNotes ( com.google.gerrit.server.notedb.ChangeNotes notes ) { this . notes = notes ; }
public void exec ( com.googlesrouce.gerrit.plugins.github.git.GitImportJob job ) { executor.execute ( requestScopePropagator.wrap ( job ) ) ; }
protected void configure ( ) { if ( pluginProvided ) { command ( "git-lfs-authenticate" ) . to ( com.google.gerrit.sshd.plugin.LfsPluginAuthCommand.class ) ; com.google.gerrit.extensions.registration.DynamicItem.itemOf ( binder ( ) , com.google.gerrit.sshd.plugin.LfsPluginAuthCommand.LfsSshPluginAuth.class ) ; } }
protected com.google.gerrit.server.notedb.ChangeNotes newNotes ( com.google.gerrit.reviewdb.client.Change c ) throws com.google.gwtorm.server.OrmException { return new com.google.gerrit.server.notedb.ChangeNotes ( repoManager , com.google.gerrit.server.notedb.AbstractChangeNotesTest.MIGRATION , allUsers , changeNoteUtil , commentsUtil , c.getProject ( ) , c ) . load ( ) ; }
public void testGcWithoutCapability_Error ( ) throws java.lang.Exception { com.google.gerrit.acceptance.SshSession s = new com.google.gerrit.acceptance.SshSession ( server , user ) ; s.exec ( "gerrit gc --all" ) ; assertError ( ( "One of the following capabilities is required to access this" + " resource: [runGC, maintainServer]" ) , s.getError ( ) ) ; s.close ( ) ; }
public com.google.gerrit.server.account.AccountIdSet missing ( final java.lang.String key ) { return AccountIdSet.EMPTY_SET ; }
private void ensurePermitted ( com.google.gerrit.server.project.ChangeControl changeControl ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gwtorm.server.OrmException { if ( ! ( changeControl.canAddPatchSet ( reviewDb.get ( ) ) ) ) { throw new com.google.gerrit.extensions.restapi.AuthException ( "Not allowed to edit a change." ) ; } }
private com.google.gerrit.acceptance.RestResponse POST ( java.lang.String endPoint , com.google.gerrit.server.group.AddMembers.Input mi ) throws java.io.IOException { return session.post ( endPoint , mi ) ; }
public java.lang.Object apply ( com.google.gerrit.server.change.ChangeResource rsrc ) throws com.google.gwtorm.server.OrmException { return com.google.gerrit.extensions.restapi.Response.ok ( json.format ( rsrc ) ) . caching ( com.google.gerrit.extensions.restapi.CacheControl.PRIVATE ( 0 , java.util.concurrent.TimeUnit.SECONDS ) . setMustRevalidate ( ) ) ; }
private boolean isGenAvailableNowForCurrentSearcher ( ) { try { return reopenThread.waitForGeneration ( gen , 0 ) ; } catch ( java.lang.InterruptedException e ) { com.google.gerrit.lucene.SubIndex.log.warn ( "Interrupted waiting for searcher generation" , e ) ; return false ; } }
void doCommentAddedHook ( com.google.gerrit.reviewdb.client.Change change , com.google.gerrit.reviewdb.client.Account account , com.google.gerrit.reviewdb.client.PatchSet patchSet , java.lang.String comment , java.util.Map < java.lang.String , java.lang.Short > approvals , java.util.Map < java.lang.String , java.lang.Short > oldApprovals , com.google.gerrit.reviewdb.server.ReviewDb db ) throws com.google.gwtorm.server.OrmException ;
public void addPatchSets ( com.google.gerrit.server.events.ChangeAttribute ca , java.util.Collection < com.google.gerrit.reviewdb.client.PatchSet > ps , java.util.Map < com.google.gerrit.reviewdb.client.PatchSet.Id , java.util.Collection < com.google.gerrit.reviewdb.client.PatchSetApproval > > approvals ) { addPatchSets ( ca , ps , approvals , false , null ) ; }
public com.google.gerrit.server.IdentifiedUser create ( final com.google.gerrit.client.reviewdb.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( systemConfig , remotePeerProvider , dbProvider , id ) ; }
public abstract com.google.gerrit.server.mail.receive.MailMessage.Builder subject ( java.lang.String val ) ;
protected void configure ( ) { bind ( com.google.gerrit.server.index.IndexRewriter.class ) ; bind ( com.google.gerrit.server.index.IndexCollection.class ) ; listener ( ) . to ( com.google.gerrit.server.index.IndexCollection.class ) ; factory ( ChangeIndexer.Factory.class ) ; }
void onClose ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { if ( ( cm.isClean ( generation ) ) || ( com.google.gwt.user.client.Window.confirm ( EditConstants.I.cancelUnsavedChanges ( ) ) ) ) { upToChange ( ) ; } }
public boolean canWrite ( ) { return getProjectControl ( ) . getProject ( ) . getState ( ) . equals ( ProjectState.ACTIVE ) ; }
public com.google.gerrit.server.account.AuthRequest unlink ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.Account.Id to , com.google.gerrit.server.account.AuthRequest who ) throws com.google.gerrit.server.account.AccountException ;
public void currentPatchSetMissing ( ) throws java.lang.Exception { com.google.gerrit.reviewdb.client.Change c = insertChange ( ) ; assertProblems ( c , "Current patch set 1 not found" ) ; }
void removeFileCommentBox ( com.google.gerrit.client.diff.DraftBox box ) { diffTable.onRemoveDraftBox ( box ) ; }
private void postMessage ( java.lang.String changeId , java.lang.String msg ) throws java.lang.Exception { com.google.gerrit.extensions.api.changes.ReviewInput in = new com.google.gerrit.extensions.api.changes.ReviewInput ( ) ; in.message = msg ; gApi.changes ( ) . id ( changeId ) . current ( ) . review ( in ) ; }
com.googlesource.gerrit.plugins.replication.PushAll create ( java.lang.String urlMatch , com.googlesource.gerrit.plugins.replication.ReplicationFilter filter , com.googlesource.gerrit.plugins.replication.ReplicationState state , boolean now ) ;
private void removeChangeIdLock ( com.google.gerrit.reviewdb.client.Change.Id id ) { synchronized ( com.ericsson.gerrit.plugins.highavailability.SyncIndexRestApiServlet.changeIdLocks ) { com.ericsson.gerrit.plugins.highavailability.SyncIndexRestApiServlet.changeIdLocks.remove ( id ) ; } }
public Change.Key getChangeKey ( ) { return null ; }
private void insertEmptyLines ( net.codemirror.lib.CodeMirror cm , int nextLine , int cnt ) { addPaddingWidget ( cm , DiffTable.style.padding ( ) , ( nextLine - 1 ) , ( 1.1 * cnt ) , Unit.EM , null ) ; }
public java.nio.file.PathMatcher getPathMatcher ( java.lang.String arg0 ) { return null ; }
public void addReviewerToReviewableWipChange ( ) throws java.lang.Exception { forAll ( ( adder ) -> { com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableWipChange ( ) ; com.google.gerrit.acceptance.TestAccount reviewer = accountCreator.create ( "added" , "added@example.com" , "added" ) ; addReviewer ( adder , sc.changeId , sc.owner , reviewer.email ) ; assertThat ( sender ) . notSent ( ) ; } ) ; }
private void createTestSiteDirs ( ) throws java.io.IOException { com.google.gerrit.server.config.SitePaths sitePath = new com.google.gerrit.server.config.SitePaths ( testSite ) ; pluginsSitePath = java.nio.file.Files.createDirectories ( sitePath.plugins_dir ) ; java.nio.file.Files.createDirectories ( sitePath.tmp_dir ) ; java.nio.file.Files.createDirectories ( sitePath.etc_dir ) ; }
public java.lang.String getPluginName ( java.nio.file.Path srcPath ) { return com.google.common.base.MoreObjects.firstNonNull ( getGerritPluginName ( srcPath ) , com.google.gerrit.server.plugins.PluginUtil.nameOf ( srcPath ) ) ; }
public com.google.gerrit.server.account.AccountState getByUsername ( java.lang.String username ) { com.google.gerrit.reviewdb.Account.Id id = byName.get ( username ) ; return id != null ? byId.get ( id ) : null ; }
protected void configure ( ) { bind ( com.google.gerrit.extensions.api.accounts.Accounts.class ) . to ( com.google.gerrit.server.api.accounts.AccountsImpl.class ) ; factory ( AccountApiImpl.Factory.class ) ; factory ( GpgKeyApiImpl.Factory.class ) ; }
private void fastForwardTagToNewCommit ( com.google.gerrit.acceptance.rest.project.PushTagIT.TagType tagType , java.lang.String tagName , org.eclipse.jgit.transport.RemoteRefUpdate.Status expectedStatus ) throws java.lang.Exception { pushTag ( tagType , tagName , true , false , expectedStatus ) ; }
protected com.google.gerrit.server.change.ChangeInserter newChangeWithStatus ( org.eclipse.jgit.junit.TestRepository < com.google.gerrit.testutil.InMemoryRepositoryManager.Repo > repo , com.google.gerrit.reviewdb.client.Change.Status status ) throws java.lang.Exception { return newChange ( repo , null , null , status , null ) ; }
private com.google.gerrit.reviewdb.client.Change getChange ( java.lang.String changeId ) throws java.lang.Exception { return com.google.common.collect.Iterables.getOnlyElement ( queryProvider.get ( ) . byKeyPrefix ( changeId ) ) . change ( ) ; }
private int getMyTotalHeight ( ) { int total = 0 ; for ( com.google.gerrit.client.diff.CommentBox box : comments ) { total += ( box.getOffsetHeight ( ) ) + 5 ; } return total ; }
private int getRandomExecutionDelay ( com.googlesrouce.gerrit.plugins.github.git.GitJob job ) { java.util.Random rnd = new java.util.Random ( ( ( java.lang.System.currentTimeMillis ( ) ) + ( job.hashCode ( ) ) ) ) ; return rnd.nextInt ( config.jobExecTimeout ) ; }
public com.google.gerrit.extensions.restapi.Response < com.google.gerrit.server.change.ChangeJson.ChangeInfo > apply ( com.google.gerrit.server.change.ChangeResource rsrc ) throws com.google.gwtorm.server.OrmException { return cache ( json.format ( rsrc ) ) ; }
public boolean allRefsAreVisible ( ) { return canPerformOnAllRefs ( ApprovalCategory.READ , ( ( short ) ( 1 ) ) ) ; }
private boolean canAddRefs ( ) { return ( canPerformOnAnyRef ( Permission.CREATE ) ) || ( isAdmin ( ) ) ; }
public org.eclipse.jgit.revwalk.RevCommit createRef ( java.lang.String refName ) throws java.io.IOException { if ( java.util.Objects.equals ( src , revision ) ) { return revision ; } return updateRef ( org.eclipse.jgit.lib.ObjectId.zeroId ( ) , src , refName ) ; }
private static void assertByteArray ( com.google.gerrit.extensions.restapi.BinaryResult result , byte [ ] expected ) throws java.lang.Exception { java.io.ByteArrayOutputStream os = new java.io.ByteArrayOutputStream ( ) ; result.writeTo ( os ) ; com.google.common.truth.Truth.assertThat ( os.toByteArray ( ) ) . isEqualTo ( expected ) ; }
public static com.google.gerrit.testing.InMemoryDatabase newDatabase ( com.google.gerrit.lifecycle.LifecycleManager lifecycle ) { com.google.inject.Injector injector = com.google.inject.Guice.createInjector ( new com.google.gerrit.testing.InMemoryModule ( ) ) ; lifecycle.add ( injector ) ; return injector.getInstance ( com.google.gerrit.testing.InMemoryDatabase.class ) ; }
private void visit ( com.google.gitiles.doc.NamedAnchor node ) { if ( outputNamedAnchor ) { html.open ( "a" ) . attribute ( "name" , node.getName ( ) ) . close ( "a" ) ; } }
public Response.Action getUploadAction ( org.eclipse.jgit.lfs.lib.AnyLongObjectId id , long size ) { org.eclipse.jgit.lfs.server.Response.Action action = super . getUploadAction ( id , size ) ; com.googlesource.gerrit.plugins.lfs.AuthInfo authInfo = authorizer.generateAuthInfo ( org.eclipse.jgit.lfs.lib.Constants.UPLOAD , id , expirationSeconds ) ; return new com.googlesource.gerrit.plugins.lfs.ExpiringAction ( action.href , authInfo ) ; }
public static org.commonmark.node.Node parse ( com.google.gitiles.doc.MarkdownConfig cfg , byte [ ] md ) { return com.google.gitiles.doc.GitilesMarkdown.parse ( cfg , org.eclipse.jgit.util.RawParseUtils.decode ( md ) ) ; }
private void extractMailExample ( java.lang.String orig ) throws java.lang.Exception { java.io.File ex = new java.io.File ( site.mail_dir , ( orig + ".example" ) ) ; com.google.gerrit.pgm.init.InitUtil.extract ( ex , com.google.gerrit.server.mail.OutgoingEmail.class , orig ) ; com.google.gerrit.common.FileUtil.chmod ( 292 , ex ) ; }
public final native com.google.gwt.core.client.JsArrayString diffHeader ( ) ;
public void onFailure ( java.lang.Throwable caught ) { updateDeleteButton ( ) ; super . onFailure ( caught ) ; }
public com.google.common.util.concurrent.CheckedFuture < ? , java.io.IOException > indexAsync ( com.google.gerrit.reviewdb.client.Change change ) { return indexAsync ( new com.google.gerrit.server.query.change.ChangeData ( change ) ) ; }
public com.google.gerrit.server.project.ProjectState get ( final com.google.gerrit.client.reviewdb.Project.NameKey projectName ) { return byName.get ( projectName ) ; }
public void onFailure ( final java.lang.Throwable caught ) { addNew.setEnabled ( true ) ; nameBox.setEnabled ( true ) ; filterTxt.setEnabled ( true ) ; super . onFailure ( caught ) ; }
public com.google.gerrit.server.IdentifiedUser create ( com.google.inject.Provider < com.google.gerrit.reviewdb.server.ReviewDb > db , com.google.gerrit.reviewdb.client.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( capabilityControlFactory , authConfig , anonymousCowardName , canonicalUrl , accountCache , groupBackend , disableReverseDnsLookup , null , db , id , null ) ; }
public com.google.gerrit.index.query.Predicate < T > copy ( java.util.Collection < ? extends com.google.gerrit.index.query.Predicate < T > > children ) { return this ; }
public static com.google.gerrit.common.data.PermissionRule allow ( com.google.gerrit.server.project.ProjectConfig project , java.lang.String permissionName , com.google.gerrit.reviewdb.client.AccountGroup.UUID group , java.lang.String ref , boolean exclusive ) { return com.google.gerrit.server.project.testing.Util.grant ( project , permissionName , com.google.gerrit.server.project.testing.Util.newRule ( project , group ) , ref , exclusive ) ; }
public void setUpTestRepo ( ) throws java.lang.Exception { testRepo = new org.eclipse.jgit.junit.TestRepository ( repo ) ; walk = com.google.gerrit.server.notedb.ChangeNotesCommit.newRevWalk ( repo ) ; }
protected void configureCommands ( ) { command ( com.amd.gerrit.plugins.manifestsubscription.ShowSubscription.class ) ; command ( com.amd.gerrit.plugins.manifestsubscription.BranchManifest.class ) ; command ( com.amd.gerrit.plugins.manifestsubscription.TagManifest.class ) ; }
public void setup ( ) throws java.lang.Exception { testAccount = accountCreator.create ( "someUser" ) ; }
protected abstract T updateProjectConfig ( com.google.gerrit.server.project.ProjectControl ctl , com.google.gerrit.server.git.ProjectConfig config , com.google.gerrit.server.git.MetaDataUpdate md , boolean parentProjectUpdate ) throws com.google.gerrit.server.project.NoSuchProjectException , com.google.gwtorm.server.OrmException , java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException ;
public static void createDraft ( @ com.google.gerrit.common.Nullable java.lang.String project , com.google.gerrit.reviewdb.client.PatchSet.Id id , com.google.gerrit.client.changes.CommentInfo content , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.changes.CommentInfo > cb ) { com.google.gerrit.client.changes.CommentApi.revision ( project , id , "drafts" ) . put ( content , cb ) ; }
com.google.gerrit.server.workflow.FunctionState create ( com.google.gerrit.client.reviewdb.Change c , com.google.gerrit.client.reviewdb.PatchSet.Id psId , java.util.Collection < com.google.gerrit.client.reviewdb.PatchSetApproval > all ) ;
public void onSuccess ( com.google.gerrit.client.documentation.DocInfo indexInfo ) { com.google.gerrit.client.Gerrit.hasDocumentation = indexInfo != null ; com.google.gerrit.client.Gerrit.docUrl = com.google.gerrit.client.Gerrit.selfRedirect ( "/Documentation/" ) ; }
public void onClick ( com.google.gwt.event.dom.client.ClickEvent event ) { hide ( ) ; callback.onCancel ( ) ; }
private void display ( final com.google.gerrit.client.data.SideBySidePatchDetail detail ) { sbsTable.setAccountInfoCache ( detail.getAccounts ( ) ) ; sbsTable.display ( detail ) ; sbsTable.finishDisplay ( true ) ; }
public void groupCannotBeRenamedToNull ( ) throws java.lang.Exception { createGroup ( groupUuid , groupName ) ; expectedException.expect ( java.lang.NullPointerException.class ) ; com.google.gerrit.server.group.db.GroupNameNotes.forRename ( repo , groupUuid , groupName , null ) ; }
public void fire ( com.google.gerrit.reviewdb.client.Project.NameKey project , org.eclipse.jgit.lib.RefUpdate refUpdate , com.google.gerrit.server.account.AccountState updater ) { fire ( project , refUpdate.getName ( ) , refUpdate.getOldObjectId ( ) , refUpdate.getNewObjectId ( ) , ReceiveCommand.Type.UPDATE , util.accountInfo ( updater ) ) ; }
private void setupCommonMocks ( ) { org.easymock.EasyMock.expect ( itsConfig.isEnabled ( org.easymock.EasyMock.anyObject ( com.google.gerrit.server.events.RefEvent.class ) ) ) . andReturn ( true ) . anyTimes ( ) ; }
public void setStatisticsEnabled ( boolean enableStatistics ) { self.setStatisticsEnabled ( enableStatistics ) ; }
public com.googlecode.prolog_cafe.lang.Operation exec ( com.googlecode.prolog_cafe.lang.Prolog engine ) { engine.neckCut ( ) ; return cont ; }
public void onResize ( com.google.gwt.event.logical.shared.ResizeEvent event ) { resizeCodeMirror ( ) ; }
public static com.google.gwt.dom.client.Element setInnerHTML ( com.google.gwt.dom.client.Element e , com.google.gwtexpui.safehtml.client.SafeHtml str ) { e.setInnerHTML ( str.asString ( ) ) ; return e ; }
public com.google.gwtorm.server.ResultSet < com.google.gerrit.reviewdb.client.PatchLineComment > draftByPatchSetAuthor ( com.google.gerrit.reviewdb.client.PatchSet.Id patchset , com.google.gerrit.reviewdb.client.Account.Id author ) { throw new java.lang.UnsupportedOperationException ( com.google.gerrit.reviewdb.server.DisabledChangesReviewDbWrapper.MSG ) ; }
public static com.google.gerrit.server.index.IndexConfig create ( int maxLimit , int maxPages ) { return new com.google.gerrit.server.index.AutoValue_IndexConfig ( com.google.gerrit.server.index.IndexConfig.checkLimit ( maxLimit , "maxLimit" ) , com.google.gerrit.server.index.IndexConfig.checkLimit ( maxPages , "maxPages" ) ) ; }
public final AccountGroup.UUID getOwnerUUID ( ) { java.lang.String owner = owner_id ( ) ; if ( owner != null ) { return new com.google.gerrit.reviewdb.client.AccountGroup.UUID ( com.google.gwt.http.client.URL.decodeQueryString ( owner ) ) ; } return null ; }
public static com.google.gerrit.client.rpc.RestApi editWithCommands ( int id ) { return com.google.gerrit.client.changes.ChangeApi.edit ( id ) . addParameterTrue ( "download-commands" ) ; }
public java.util.List < com.google.gerrit.server.query.change.ChangeData > byExactTopicOpen ( java.lang.String topic ) throws com.google.gwtorm.server.OrmException { return query ( com.google.gerrit.server.query.Predicate.and ( new com.google.gerrit.server.query.change.ExactTopicPredicate ( com.google.gerrit.server.query.change.InternalChangeQuery.schema ( indexes ) , topic ) , com.google.gerrit.server.query.change.ChangeStatusPredicate.open ( ) ) ) ; }
public com.googlesource.gerrit.plugins.hooks.validation.ItsAssociationPolicy getItsAssociationPolicy ( ) { return gerritConfig.getEnum ( "commentlink" , pluginName , "association" , ItsAssociationPolicy.OPTIONAL ) ; }
public void bind ( com.google.gerrit.server.cache.Cache < K , V > impl ) { if ( ( cache ) == null ) { throw new com.google.inject.ProvisionException ( "Cache was never registered" ) ; } cache.bind ( impl ) ; }
void finish ( ) { id = com.google.gerrit.extensions.restapi.Url.encode ( name ) ; }
public void updateRepo ( com.google.gerrit.server.git.BatchUpdate.RepoContext ctx ) { mergeTip.moveTipTo ( toMerge , toMerge ) ; toMerge.setStatusCode ( CommitMergeStatus.CLEAN_MERGE ) ; }
public static void main ( final java.lang.String [ ] argv ) throws java.lang.Exception { java.lang.System.exit ( com.google.gerrit.launcher.GerritLauncher.mainImpl ( argv ) ) ; }
public static org.eclipse.jgit.lib.Config defaultConfig ( ) { org.eclipse.jgit.lib.Config cfg = new org.eclipse.jgit.lib.Config ( ) ; cfg.setInt ( "index" , null , "maxPages" , 10 ) ; return cfg ; }
public void testWithSectionToOtherServer ( ) throws java.lang.Exception { com.google.gerrit.reviewdb.client.Project.NameKey p1 = createProject ( "a" ) ; org.eclipse.jgit.lib.Config cfg = new org.eclipse.jgit.lib.Config ( ) ; cfg.fromText ( ( ( ( ( "" + ( ( "[submodule \"a\"]" + "path = a" ) + "url = ssh://non-localhost/" ) ) + ( p1.get ( ) ) ) + "\n" ) + "branch = ." ) ) ; com.google.gerrit.reviewdb.client.Branch.NameKey targetBranch = new com.google.gerrit.reviewdb.client.Branch.NameKey ( new com.google.gerrit.reviewdb.client.Project.NameKey ( "project" ) , "master" ) ; java.util.Set < com.google.gerrit.reviewdb.client.SubmoduleSubscription > res = new com.google.gerrit.server.util.SubmoduleSectionParser ( cfg , com.google.gerrit.acceptance.git.SubmoduleSectionParserIT.THIS_SERVER , targetBranch ) . parseAllSections ( ) ; com.google.common.truth.Truth.assertThat ( res ) . isEmpty ( ) ; }
public void setMessage ( java.lang.String message ) throws com.google.gerrit.extensions.restapi.RestApiException { throw new com.google.gerrit.extensions.restapi.NotImplementedException ( ) ; }
public com.googlesource.gerrit.plugins.github.oauth.OAuthCookie getFromUser ( java.lang.String username , java.lang.String email , java.lang.String fullName ) { try { return new com.googlesource.gerrit.plugins.github.oauth.OAuthCookie ( cipher , username , email , fullName ) ; } catch ( com.googlesource.gerrit.plugins.github.oauth.OAuthTokenException e ) { return null ; } }
public static void all ( com.google.gerrit.reviewdb.client.AccountGroup.UUID group , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.groups.MemberList > callback ) { new com.google.gerrit.client.rpc.RestApi ( "groups" ) . id ( group.get ( ) ) . view ( "members" ) . get ( callback ) ; }
public void execute ( ) { if ( box.getValue ( ) . trim ( ) . equals ( originalValue ) ) { widget.setEnabled ( false ) ; } }
public final native double getScrollSetAt ( ) ;
static void invoke ( com.google.gerrit.client.info.ChangeInfo change , com.google.gerrit.client.info.ActionInfo action , com.google.gerrit.client.rpc.RestApi api ) { com.google.gerrit.client.api.DefaultActions.invoke ( action , api , com.google.gerrit.client.api.DefaultActions.callback ( com.google.gerrit.common.PageLinks.toChange ( change.legacyId ( ) ) ) ) ; }
public final java.sql.Timestamp date ( ) { return com.google.gwtjsonrpc.client.impl.ser.JavaSqlTimestamp_JsonSerializer.parseTimestamp ( dateRaw ( ) ) ; }
public final native net.codemirror.lib.KeyMap fallthrough ( net.codemirror.lib.KeyMap m ) ;
public boolean isCreateNewChangeForAllNotInTarget ( ) { return getInheritableBoolean ( Project :: getCreateNewChangeForAllNotInTarget ) ; }
private java.lang.String healthCheckAccess ( ) throws java.io.IOException { client ( ) . sysInfo ( ) ; final java.lang.String result = ( "{\"status\"=\"ok\",\"username\"=\"" + ( getUsername ( ) ) ) + "\"}" ; log.debug ( "Healtheck on access result: {}" , result ) ; return result ; }
private void initNoteDb ( ) { ui.message ( ( "Use NoteDb for change metadata?\n" + ( " See documentation:\n" + " https://gerrit-review.googlesource.com/Documentation/dev-note-db.html\n" ) ) ) ; if ( ! ( ui.yesno ( false , "Enable" ) ) ) { return ; } org.eclipse.jgit.lib.Config defaultConfig = new org.eclipse.jgit.lib.Config ( ) ; NotesMigrationState.FINAL.setConfigValues ( defaultConfig ) ; for ( java.lang.String name : defaultConfig.getNames ( com.google.gerrit.server.notedb.NotesMigration.SECTION_NOTE_DB , com.google.gerrit.server.notedb.NoteDbTable.CHANGES.key ( ) ) ) { noteDbChanges.set ( name , defaultConfig.getString ( com.google.gerrit.server.notedb.NotesMigration.SECTION_NOTE_DB , com.google.gerrit.server.notedb.NoteDbTable.CHANGES.key ( ) , name ) ) ; } }
public static java.lang.String toAccountQuery ( final java.lang.String fullname ) { java.lang.String query = ( com.google.gerrit.common.PageLinks.op ( "owner" , fullname ) ) + " status:open" ; return com.google.gerrit.common.PageLinks.toChangeQuery ( query , com.google.gerrit.common.PageLinks.TOP ) ; }
public java.lang.String getSecure ( java.lang.String name ) { return flags.sec.getString ( section , subsection , name ) ; }
private void assertDeleteForbidden ( ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( tag ( ) . get ( ) . canDelete ) . isNull ( ) ; exception.expect ( com.google.gerrit.extensions.restapi.AuthException.class ) ; exception.expectMessage ( "delete not permitted" ) ; tag ( ) . delete ( ) ; }
public void testCreateProjectHttpWhenProjectAlreadyExists_PreconditionFailed ( ) throws java.lang.Exception { adminRestSession.putWithHeader ( ( "/projects/" + ( allProjects.get ( ) ) ) , new org.apache.http.message.BasicHeader ( com.google.common.net.HttpHeaders.IF_NONE_MATCH , "*" ) ) . assertPreconditionFailed ( ) ; }
public boolean nameIsId ( ) { return nameEqualsAbbreviated ( id ) ; }
public boolean isValid ( final com.google.gerrit.server.CurrentUser user , final com.google.gerrit.client.data.ApprovalType at , final com.google.gerrit.server.workflow.FunctionState state ) { return false ; }
protected com.google.gerrit.server.http.GerritCall createActiveCall ( final javax.servlet.http.HttpServletRequest req , final javax.servlet.http.HttpServletResponse resp ) { return callFactory.get ( ) ; }
public com.google.gerrit.server.change.ChangeInserter setValidatePolicy ( com.google.gerrit.server.git.validators.CommitValidators.Policy validate ) { this . validatePolicy = com.google.common.base.Preconditions.checkNotNull ( validate ) ; return this ; }
public java.util.List < com.google.gitiles.blame.Region > call ( ) throws java.io.IOException { return com.google.gitiles.blame.BlameCacheImpl.loadBlame ( key , repo ) ; }
public java.lang.String getMessage ( ) { org.eclipse.jgit.transport.RemoteRefUpdate refUpdate = result.getRemoteUpdate ( ref ) ; com.google.common.truth.Truth.assertThat ( refUpdate ) . isNotNull ( ) ; return message ( refUpdate ) ; }
public java.lang.String getName ( ) { if ( ( fullName ) != null ) { return fullName ; } if ( ( preferredEmail ) != null ) { return preferredEmail ; } return "GerritAccount #" + ( accountId.get ( ) ) ; }
public java.lang.String getPluginName ( java.nio.file.Path srcPath ) { return providerOf ( srcPath ) . getPluginName ( srcPath ) ; }
void setContext ( com.google.gerrit.reviewdb.server.ReviewDb db , java.sql.Timestamp ts , com.google.gerrit.server.IdentifiedUser caller , java.lang.String submissionId ) { this . db = db ; this . ts = ts ; this . caller = caller ; this . submissionId = submissionId ; }
protected com.google.inject.Injector createInjector ( ) { org.eclipse.jgit.lib.Config luceneConfig = new org.eclipse.jgit.lib.Config ( config ) ; com.google.gerrit.testing.InMemoryModule.setDefaults ( luceneConfig ) ; return com.google.inject.Guice.createInjector ( new com.google.gerrit.testing.InMemoryModule ( luceneConfig , notesMigration ) ) ; }
com.google.gerrit.server.project.ChangeControl create ( com.google.gerrit.server.project.RefControl refControl , com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.reviewdb.client.Change.Id changeId ) throws com.google.gwtorm.server.OrmException { return create ( refControl , notesFactory.create ( db , project , changeId ) ) ; }
private void doReplay ( ) { org.easymock.EasyMock.replay ( schemaFactory , schema , subscriptions , urlProvider , sshProvider , repoManager , replication ) ; }
com.google.gerrit.server.change.SetAssigneeOp create ( java.lang.String assignee ) ;
public boolean match ( com.google.gerrit.server.query.change.ChangeData object ) throws com.google.gwtorm.server.OrmException { com.google.gerrit.reviewdb.client.Change change = object.change ( ) ; return ( change != null ) && ( java.util.Objects.equals ( status , change.getStatus ( ) ) ) ; }
protected void assertBadQuery ( java.lang.Object query ) throws java.lang.Exception { try { newQuery ( query ) . get ( ) ; org.junit.Assert.fail ( ( "expected BadRequestException for query: " + query ) ) ; } catch ( com.google.gerrit.extensions.restapi.BadRequestException e ) { } }
public void requestDeletion ( java.lang.String messageId ) { pendingDeletion.add ( messageId ) ; }
public boolean isVisible ( ) { return ( ( ( user ) instanceof com.google.gerrit.server.InternalUser ) || ( canPerformOnAnyRef ( Permission.READ ) ) ) && ( ! ( isHidden ( ) ) ) ; }
public void onPluginLoad ( ) { com.google.gerrit.plugin.client.Plugin.get ( ) . panel ( GerritUiExtensionPoint.CHANGE_SCREEN_BELOW_CHANGE_INFO_BLOCK , new com.googlesource.gerrit.plugins.examples.wuichangescreenbelowchangeinfoblock.client.ExampleChangeScreenExtension.Factory ( ) , "first" ) ; com.google.gerrit.plugin.client.Plugin.get ( ) . panel ( GerritUiExtensionPoint.CHANGE_SCREEN_BELOW_CHANGE_INFO_BLOCK , new com.googlesource.gerrit.plugins.examples.wuichangescreenbelowchangeinfoblock.client.ExampleChangeScreenExtensionTwo.Factory ( ) , "second" ) ; }
private com.google.inject.Injector createWebInjector ( ) { final java.util.List < com.google.inject.Module > modules = new java.util.ArrayList < com.google.inject.Module > ( ) ; modules.add ( sshInjector.getInstance ( com.google.gerrit.httpd.WebModule.class ) ) ; return sysInjector.createChildInjector ( modules ) ; }
protected abstract java.util.List < T > parse ( byte [ ] raw , int offset ) throws java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException ;
public final native com.google.gwt.dom.client.Element getMeasureElement ( ) ;
public com.google.gwtorm.server.ResultSet < com.google.gerrit.reviewdb.client.PatchLineComment > byChange ( com.google.gerrit.reviewdb.client.Change.Id id ) { throw new java.lang.UnsupportedOperationException ( com.google.gerrit.reviewdb.server.DisabledChangesReviewDbWrapper.MSG ) ; }
public java.util.List < com.google.gerrit.client.reviewdb.AccountSshKey > run ( com.google.gerrit.client.reviewdb.ReviewDb db ) throws com.google.gwtorm.client.OrmException { return db.accountSshKeys ( ) . byAccount ( com.google.gerrit.client.rpc.Common.getAccountId ( ) ) . toList ( ) ; }
public com.google.gerrit.sshd.SshScope.Context get ( ) { return com.google.gerrit.sshd.SshScope.requireContext ( ) ; }
private static com.google.gerrit.server.account.AccountState newState ( com.google.gerrit.reviewdb.client.Account account ) { return new com.google.gerrit.server.account.AccountState ( new com.google.gerrit.server.config.AllUsersName ( com.google.gerrit.server.config.AllUsersNameProvider.DEFAULT ) , account , com.google.common.collect.ImmutableSet.of ( ) , com.google.common.collect.ImmutableSet.of ( ) , new java.util.HashMap < > ( ) ) ; }
void addLine ( int line ) { dst.addLine ( line , src.getString ( line ) ) ; }
public int hashCode ( ) { return java.util.Objects.hash ( accountId , seq ) ; }
public void setMinusOne ( java.lang.String project , int number , java.lang.String comment ) throws com.google.gerrit.extensions.restapi.RestApiException , com.google.gerrit.server.update.UpdateException , com.google.gwtorm.server.OrmException , java.io.IOException { com.google.gerrit.extensions.api.changes.ReviewInput message = createComment ( comment ) . label ( "Code-Review" , ( - 1 ) ) ; applyComment ( project , number , message ) ; }
public void testOne ( ) { com.google.common.truth.Truth.assertThat ( cfg.getString ( "section" , null , "name" ) ) . isEqualTo ( "value" ) ; }
public org.kohsuke.github.GitHub login ( com.googlesource.gerrit.plugins.github.oauth.OAuthProtocol.AccessToken authToken ) throws java.io.IOException { com.googlesource.gerrit.plugins.github.oauth.GitHubLogin.log.debug ( "Logging in using access token {}" , authToken.accessToken ) ; this . token = authToken ; return getHub ( ) ; }
public void flushCache_Forbidden ( ) throws java.lang.Exception { userSession.post ( "/config/server/caches/accounts/flush" ) . assertForbidden ( ) ; }
public void exec ( com.googlesource.gerrit.plugins.github.git.GitJob job ) { executor.schedule ( requestScopePropagator.wrap ( job ) , getRandomExecutionDelay ( job ) , java.util.concurrent.TimeUnit.SECONDS ) ; }
public void onClick ( com.google.gwt.event.dom.client.ClickEvent event ) { showHidePopup ( ) ; }
public org.eclipse.jgit.lib.ObjectId getOldId ( ) { if ( ( ( oldId ) == null ) && ( ( oldIdName ) != null ) ) { oldId = org.eclipse.jgit.lib.ObjectId.fromString ( oldIdName ) ; } return oldId ; }
public void setUp ( ) { com.google.common.truth.TruthJUnit.assume ( ) . that ( com.google.gerrit.testing.NoteDbMode.get ( ) ) . isNotEqualTo ( NoteDbMode.CHECK ) ; }
public void onMouseOut ( com.google.gwt.event.dom.client.MouseOutEvent event ) { popup.setVisible ( false ) ; popup.clear ( ) ; hideFullScreenIcon ( ) ; }
public java.lang.String apply ( com.google.gerrit.server.account.WatchConfig.ProjectWatchKey in ) { return in.project ( ) . get ( ) ; }
protected void setupSoyContext ( ) { super . setupSoyContext ( ) ; soyContext.put ( "commentFiles" , getCommentGroupsTemplateData ( ) ) ; }
public void deleteAll ( ) throws java.io.IOException { openIndex.deleteAll ( ) ; closedIndex.deleteAll ( ) ; }
private boolean isDeclaredOwner ( ) { if ( ( declaredOwner ) == null ) { com.google.gerrit.server.account.GroupMembership effectiveGroups = user.getEffectiveGroups ( ) ; declaredOwner = effectiveGroups.containsAnyOf ( state.getAllOwners ( ) ) ; } return declaredOwner ; }
public void maybeFossilCollectIndexRow ( long now , byte [ ] key , com.google.gwtorm.nosql.IndexRow row ) { if ( ( ( row.getTimestamp ( ) ) + ( db.getMaxFossilAge ( ) ) ) <= now ) { fossilCollectIndexRow ( key , row ) ; } }
public void addRefUpdate ( org.eclipse.jgit.transport.ReceiveCommand cmd ) throws java.io.IOException { initRepository ( ) ; commands.add ( cmd ) ; }
com.google.gwtorm.client.ResultSet < com.google.gerrit.reviewdb.PatchLineComment > publishedByPatch ( com.google.gerrit.reviewdb.Patch.Key patch ) throws com.google.gwtorm.client.OrmException ;
public void onKeyPress ( final com.google.gwt.event.dom.client.KeyPressEvent event ) { com.google.gerrit.client.Gerrit.displayLastChangeList ( ) ; }
com.google.gerrit.server.schema.Schema_77.LegacyLabelType byId ( com.google.gerrit.reviewdb.client.LabelId id ) { return byId.get ( id.get ( ) ) ; }
abstract com.google.gerrit.client.diff.DiffScreen getDiffScreen ( ) ;
public final java.lang.String cloneCommand ( java.lang.String commandName , java.lang.String project ) { return cloneCommand ( commandName ) . replaceAll ( "\\$\\{project\\}" , project ) . replaceAll ( "\\$\\{project-base-name\\}" , projectBaseName ( project ) ) ; }
private void assertDeleteForbidden ( ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( branch ( ) . get ( ) . canDelete ) . isNull ( ) ; exception.expect ( com.google.gerrit.extensions.restapi.AuthException.class ) ; exception.expectMessage ( "delete not permitted" ) ; branch ( ) . delete ( ) ; }
void setDisableSshd ( final boolean arg ) { sshd = false ; }
public java.util.Collection < com.google.gerrit.reviewdb.client.AccountGroup.UUID > allExternalMembers ( ) { try { return external.get ( com.google.gerrit.server.account.GroupIncludeCacheImpl.EXTERNAL_NAME ) ; } catch ( java.util.concurrent.ExecutionException e ) { com.google.gerrit.server.account.GroupIncludeCacheImpl.log.warn ( "Cannot load set of non-internal groups" , e ) ; return com.google.common.collect.ImmutableList.of ( ) ; } }
public boolean isInternalAccount ( java.lang.String username ) { return false ; }
public void setFunction ( @ com.google.gerrit.common.Nullable com.google.gerrit.common.data.LabelFunction function ) { this . functionName = ( function != null ) ? function.getFunctionName ( ) : null ; }
public void removeApproval ( java.lang.String label ) { removeApprovalFor ( getAccountId ( ) , label ) ; }
public org.eclipse.jgit.transport.ReceivePack getReceivePack ( ) { return rp ; }
private com.google.gerrit.server.notedb.ChangeUpdate newUpdate ( com.google.gerrit.reviewdb.client.Change c , com.google.gerrit.server.IdentifiedUser user ) throws java.lang.Exception { return new com.google.gerrit.server.notedb.ChangeUpdate ( com.google.gerrit.server.notedb.ChangeNotesTest.SERVER_IDENT , repoManager , com.google.gerrit.server.notedb.NotesMigration.allEnabled ( ) , accountCache , null , com.google.gerrit.server.notedb.ChangeNotesTest.LABEL_TYPES , stubChangeControl ( c , user ) , com.google.gerrit.server.util.TimeUtil.nowTs ( ) ) ; }
private void initDisplayControls ( ) { final com.google.gwt.user.client.ui.Grid displayControls = new com.google.gwt.user.client.ui.Grid ( 0 , 4 ) ; displayControls.setStyleName ( "gerrit-PatchScreen-DisplayControls" ) ; add ( displayControls ) ; createIgnoreWhitespace ( displayControls , 0 , 0 ) ; createContext ( displayControls , 0 , 2 ) ; }
void onPublishEdit ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { com.google.gerrit.client.change.EditActions.publishEdit ( getProject ( ) , changeId , publishEdit , rebaseEdit , deleteEdit ) ; }
public static com.google.gerrit.index.FieldDef.Builder < byte [ ] > storedOnly ( java.lang.String name ) { return new com.google.gerrit.index.FieldDef.Builder ( FieldType.STORED_ONLY , name ) . stored ( ) ; }
private com.google.gerrit.server.account.ProjectWatches.NotifyValue parseNotifyValue ( java.lang.String notifyValue ) { return com.google.gerrit.server.account.ProjectWatches.NotifyValue.parse ( new com.google.gerrit.reviewdb.client.Account.Id ( 1000000 ) , "project" , notifyValue , this ) ; }
private com.google.gerrit.extensions.api.changes.RevisionApi current ( com.google.gerrit.acceptance.PushOneCommit.Result r ) throws java.lang.Exception { return gApi.changes ( ) . id ( r.getChangeId ( ) ) . current ( ) ; }
public void onFailure ( java.lang.Throwable err ) { relatedChangesTab.setTitle ( Resources.M.relatedChanges ( Resources.C.notAvailable ( ) ) ) ; relatedChangesTab.setError ( err.getMessage ( ) ) ; }
public void addRefUpdate ( org.eclipse.jgit.transport.ReceiveCommand cmd ) throws java.io.IOException { initRepository ( ) ; commands.add ( cmd ) ; }
protected void assertBadQuery ( com.google.gerrit.extensions.api.changes.Changes.QueryRequest query ) throws java.lang.Exception { try { query.get ( ) ; org.junit.Assert.fail ( ( "expected BadRequestException for query: " + query ) ) ; } catch ( com.google.gerrit.extensions.restapi.BadRequestException e ) { } }
public com.google.common.truth.ComparableSubject < ? , java.sql.Timestamp > date ( ) { isNotNull ( ) ; com.google.gerrit.extensions.common.GitPerson gitPerson = actual ( ) ; return com.google.common.truth.Truth.assertThat ( gitPerson.date ) . named ( "creationDate" ) ; }
protected com.google.gerrit.server.change.ChangeInserter newChangeWithTopic ( org.eclipse.jgit.junit.TestRepository < com.google.gerrit.testutil.InMemoryRepositoryManager.Repo > repo , java.lang.String topic ) throws java.lang.Exception { return newChange ( repo , null , null , null , topic ) ; }
public final int changesPerPage ( ) { int changesPerPage = get ( "changes_per_page" , GeneralPreferencesInfo.DEFAULT_PAGESIZE ) ; return 0 < changesPerPage ? changesPerPage : com.google.gerrit.extensions.client.GeneralPreferencesInfo.DEFAULT_PAGESIZE ; }
public void insertItem ( final com.google.gerrit.client.ui.LinkMenuItem i , int beforeIndex ) { i.setMenuBar ( this ) ; insert ( i , beforeIndex ) ; }
public java.lang.Boolean call ( ) throws com.google.gerrit.server.project.NoSuchProjectException { return controlFor ( project ) . isVisible ( ) ; }
public boolean canSubmit ( boolean isChangeOwner ) { if ( RefNames.REFS_CONFIG.equals ( refName ) ) { return projectControl.isOwner ( ) ; } return ( canPerform ( Permission.SUBMIT , isChangeOwner ) ) && ( isProjectStatePermittingWrite ( ) ) ; }
void setMaxHeight ( int height ) { maxHeight = height ; if ( ( view ) != null ) { view.setHeight ( ( height + "px" ) ) ; view.ensureRowMeasurements ( ) ; view.movePointerTo ( view.selectedRow , true ) ; } }
public void setStatus ( com.google.gerrit.reviewdb.client.Change.Status status ) { com.google.common.base.Preconditions.checkArgument ( ( status != ( com.google.gerrit.reviewdb.client.PatchLineComment.Status.MERGED ) ) , "use submit(Iterable<PatchSetApproval>)" ) ; this . status = status ; }
public int hashCode ( ) { return java.util.Objects.hash ( name , id , type , peeledId , peeledType ) ; }
public synchronized void setStatus ( int sc ) { status = sc ; committed = true ; }
public long getElapsed ( ) { return ( com.google.gerrit.server.util.TimeUtil.nowMs ( ) ) - ( when ) ; }
public Project.NameKey getProjectNameKey ( ) { return projectNameKey ; }
public void removeApprovalFor ( com.google.gerrit.reviewdb.client.Account.Id reviewer , java.lang.String label ) { approvals.put ( label , reviewer , java.util.Optional.empty ( ) ) ; }
public com.google.common.base.Optional < com.google.gerrit.server.query.change.ChangeData.ChangedLines > changedLines ( ) throws com.google.gwtorm.server.OrmException { if ( ( changedLines ) == null ) { if ( ! ( lazyLoad ) ) { return com.google.common.base.Optional.absent ( ) ; } changedLines = computeChangedLines ( ) ; } return changedLines ; }
private com.google.gerrit.server.project.ProjectState newProjectState ( com.google.gerrit.server.project.ProjectConfig local ) { add ( local ) ; return all.get ( local.getProject ( ) . getNameKey ( ) ) ; }
private static long initialDelay ( java.lang.String startTime , java.lang.String interval ) throws org.eclipse.jgit.errors.ConfigInvalidException { return new com.google.gerrit.server.config.ScheduleConfig ( com.google.gerrit.server.config.ScheduleConfigTest.config ( startTime , interval ) , "section" , "subsection" , com.google.gerrit.server.config.ScheduleConfigTest.NOW ) . getInitialDelay ( ) ; }
private static boolean isTextBody ( com.google.gwt.http.client.Response res ) { return com.google.gerrit.client.rpc.RestApi.isContentType ( res , com.google.gerrit.client.rpc.RestApi.TEXT_TYPE ) ; }
private void fireEvent ( com.google.gerrit.reviewdb.Branch.NameKey branchName , final com.google.gerrit.server.events.ChangeEvent event ) { for ( com.google.gerrit.common.ChangeHookRunner.ChangeListenerHolder holder : listeners.values ( ) ) { if ( isVisibleTo ( branchName , holder.user ) ) { holder.listener.onChangeEvent ( event ) ; } } }
public com.google.gerrit.server.query.change.ChangeDataSource getSource ( com.google.gerrit.index.query.Predicate < com.google.gerrit.server.query.change.ChangeData > p , com.google.gerrit.index.QueryOptions opts ) throws com.google.gerrit.index.query.QueryParseException { return new com.google.gerrit.server.index.change.FakeChangeIndex.Source ( p ) ; }
protected void preDisplay ( final java.util.List < com.google.gerrit.client.reviewdb.AccountGroup > result ) { groups.display ( result ) ; groups.finishDisplay ( true ) ; }
protected void onInitUI ( ) { super . onInitUI ( ) ; setPageTitle ( Gerrit.C.notFoundTitle ( ) ) ; add ( new com.google.gwt.user.client.ui.Label ( Gerrit.C.notFoundBody ( ) ) ) ; }
private boolean isPatchSet ( ) { return ( this ) instanceof com.google.gerrit.server.notedb.rebuild.PatchSetEvent ; }
java.lang.Runnable toggleOpenBox ( net.codemirror.lib.CodeMirror cm ) { return ( ) -> { com.google.gerrit.client.diff.CommentGroup group = getCommentGroupOnActiveLine ( cm ) ; if ( group != null ) { group.openCloseLast ( ) ; } } ; }
public static java.nio.file.Path getDeveloperBuckOut ( ) throws java.io.FileNotFoundException { return com.google.gerrit.launcher.GerritLauncher.resolveInSourceRoot ( "buck-out" ) ; }
public com.googlecode.prolog_cafe.lang.Term getMessageTerm ( ) { com.googlecode.prolog_cafe.lang.Term [ ] args = new com.googlecode.prolog_cafe.lang.Term [ ] { new com.googlecode.prolog_cafe.lang.JavaObjectTerm ( goal ) , new com.googlecode.prolog_cafe.lang.IntegerTerm ( argNo ) , com.googlecode.prolog_cafe.lang.SymbolTerm.create ( domain ) , culprit } ; return new com.googlecode.prolog_cafe.lang.StructureTerm ( com.googlecode.prolog_cafe.exceptions.IllegalDomainException.DOMAIN_ERROR , args ) ; }
public void onSuccess ( com.google.gerrit.client.access.ProjectAccessInfo result ) { isOwner = result.isOwner ( ) ; configVisible = result.configVisible ( ) ; enableForm ( ) ; saveProject.setVisible ( isOwner ) ; }
public void index ( com.google.gerrit.server.query.change.ChangeData cd ) throws java.io.IOException { for ( com.google.gerrit.server.index.Index < ? , com.google.gerrit.server.query.change.ChangeData > i : getWriteIndexes ( ) ) { i.replace ( cd ) ; } fireChangeIndexedEvent ( cd ) ; }
static void initialize ( org.eclipse.jgit.lib.Config cfg ) { cfg.setString ( com.googlesource.gerrit.plugins.xdocs.XDocGlobalConfig.SECTION_FORMATTER , MarkdownFormatter.NAME , com.googlesource.gerrit.plugins.xdocs.XDocGlobalConfig.KEY_MIME_TYPE , "text/x-markdown" ) ; cfg.setString ( com.googlesource.gerrit.plugins.xdocs.XDocGlobalConfig.SECTION_FORMATTER , PlainTextFormatter.NAME , com.googlesource.gerrit.plugins.xdocs.XDocGlobalConfig.KEY_MIME_TYPE , "text/plain" ) ; }
public void modifyFile ( org.eclipse.jgit.lib.Repository repository , com.google.gerrit.server.project.ChangeControl changeControl , java.lang.String filePath , com.google.gerrit.extensions.restapi.RawInput newContent ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.server.project.InvalidChangeOperationException , com.google.gwtorm.server.OrmException , java.io.IOException { modifyTree ( repository , changeControl , new com.google.gerrit.server.edit.tree.ChangeFileContentModification ( filePath , newContent ) ) ; }
public abstract com.google.gerrit.server.git.ChangeReportFormatter.Input.Builder setIsPrivate ( java.lang.Boolean val ) ;
java.lang.String getTitle ( int count ) { return Resources.M.sameTopic ( count ) ; }
public com.googlecode.prolog_cafe.lang.NumberTerm multiply ( com.googlecode.prolog_cafe.lang.NumberTerm t ) { if ( t instanceof com.googlecode.prolog_cafe.lang.DoubleTerm ) return t.multiply ( this ) ; return new com.googlecode.prolog_cafe.lang.IntegerTerm ( ( ( this . val ) * ( t.intValue ( ) ) ) ) ; }
public void registerCacheUsageListener ( net.sf.ehcache.statistics.CacheUsageListener cacheUsageListener ) throws java.lang.IllegalStateException { self ( ) . registerCacheUsageListener ( cacheUsageListener ) ; }
public void onSuccess ( com.google.gerrit.common.data.ChangeDetail result ) { changeScreen.display ( result ) ; }
public void testEndsBeforeNewline ( ) { com.google.gerrit.client.diff.SideBySide2.EditIterator iter = new com.google.gerrit.client.diff.SideBySide2.EditIterator ( lines , 0 ) ; assertLineChsEqual ( net.codemirror.lib.LineCharacter.create ( 0 , 3 ) , iter.advance ( 3 ) ) ; }
public void onChange ( com.google.gwt.event.dom.client.ChangeEvent event ) { final int sel = ws.getSelectedIndex ( ) ; if ( 0 <= sel ) { scriptSettings.setWhitespace ( com.google.gerrit.client.data.PatchScriptSettings.Whitespace.valueOf ( ws.getValue ( sel ) ) ) ; refresh ( false ) ; } }
public void testThreeLevelTreeWithAllIndexPredicates ( ) throws java.lang.Exception { com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > in = parse ( "-status:abandoned (file:a OR file:b)" ) ; com.google.common.truth.Truth.assertThat ( rewrite.rewrite ( in , com.google.gerrit.server.index.change.ChangeIndexRewriterTest.options ( 0 , com.google.gerrit.common.data.GlobalCapability.DEFAULT_MAX_QUERY_LIMIT ) ) ) . isEqualTo ( query ( in ) ) ; }
com.googlesource.gerrit.plugins.hooks.HookResult execute ( java.lang.String projectName , com.googlesource.gerrit.plugins.hooks.HookArgs args ) { return executor.submit ( projectName , path , args ) ; }
protected void configure ( ) { bind ( java.nio.file.Path.class ) . annotatedWith ( com.google.gerrit.server.config.SitePath.class ) . toInstance ( sitePath ) ; }
protected void configure ( ) { factory ( ProjectControl.Factory.class ) ; bind ( ChangeControl.Factory.class ) ; }
public static com.google.gerrit.sshd.CommandName named ( final java.lang.String value ) { return new com.google.gerrit.sshd.AutoAnnotation_Commands_named ( value ) ; }
static com.google.gerrit.server.account.externalids.ExternalId create ( com.google.gerrit.server.account.externalids.ExternalId.Key key , com.google.gerrit.reviewdb.client.Account.Id accountId , @ com.google.gerrit.common.Nullable java.lang.String email , @ com.google.gerrit.common.Nullable java.lang.String hashedPassword , @ com.google.gerrit.common.Nullable org.eclipse.jgit.lib.ObjectId blobId ) { return new com.google.gerrit.server.account.externalids.AutoValue_ExternalId ( key , accountId , com.google.common.base.Strings.emptyToNull ( email ) , com.google.common.base.Strings.emptyToNull ( hashedPassword ) , blobId ) ; }
public void setUp ( ) throws java.lang.Exception { admin = accounts.create ( "admin" , "admin@example.com" , "Administrator" , "Administrators" ) ; sshSession = new com.google.gerrit.acceptance.SshSession ( server , admin ) ; project1 = new com.google.gerrit.reviewdb.client.Project.NameKey ( "p1" ) ; com.google.gerrit.acceptance.GitUtil.createProject ( sshSession , project1.get ( ) ) ; project2 = new com.google.gerrit.reviewdb.client.Project.NameKey ( "p2" ) ; com.google.gerrit.acceptance.GitUtil.createProject ( sshSession , project2.get ( ) ) ; project3 = new com.google.gerrit.reviewdb.client.Project.NameKey ( "p3" ) ; com.google.gerrit.acceptance.GitUtil.createProject ( sshSession , project3.get ( ) ) ; }
protected com.google.gwt.user.client.ui.Panel getButtonPanel ( ) { if ( ( buttons ) == null ) { buttons = new com.google.gwt.user.client.ui.FlowPanel ( ) ; buttons.setStyleName ( Gerrit.RESOURCES.css ( ) . commentPanelButtons ( ) ) ; content.add ( buttons ) ; } return buttons ; }
public void onFailure ( java.lang.Throwable err ) { relatedChangesTab.setTitle ( Resources.M.relatedChanges ( Resources.C.notAvailable ( ) ) ) ; relatedChangesTab.setError ( err.getMessage ( ) ) ; }
private java.util.Map < java.lang.String , com.google.gerrit.extensions.common.GpgKeyInfo > addGpgKey ( java.lang.String armored ) throws java.lang.Exception { return gApi.accounts ( ) . self ( ) . putGpgKeys ( com.google.common.collect.ImmutableList.of ( armored ) , com.google.common.collect.ImmutableList.< java.lang.String > of ( ) ) ; }
public void setUp ( ) throws java.lang.Exception { com.google.gerrit.extensions.api.projects.ConfigInput conf = new com.google.gerrit.extensions.api.projects.ConfigInput ( ) ; conf.enableReviewerByEmail = com.google.gerrit.extensions.client.InheritableBoolean.TRUE ; gApi.projects ( ) . name ( project.get ( ) ) . config ( conf ) ; }
private static long initialDelay ( java.lang.String startTime , java.lang.String interval ) { return com.google.gerrit.server.config.ScheduleConfig.builder ( com.google.gerrit.server.config.ScheduleConfigTest.config ( startTime , interval ) , "section" ) . setSubsection ( "subsection" ) . setNow ( com.google.gerrit.server.config.ScheduleConfigTest.NOW ) . build ( ) . initialDelay ( ) ; }
public boolean isConnectivityRequested ( com.google.gerrit.pgm.util.ConsoleUI ui , java.lang.String url ) { return ui.yesno ( false , "Test connectivity to %s" , url ) ; }
public void index ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { index.apply ( rsrc , new com.google.gerrit.extensions.common.Input ( ) ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot index group" , e ) ; } }
public final native double height ( ) ;
private com.google.gerrit.extensions.common.AccountInfo GET_ONE ( java.lang.String endpoint ) throws java.io.IOException { com.google.gerrit.acceptance.RestResponse r = adminSession.get ( endpoint ) ; org.junit.Assert.assertEquals ( HttpStatus.SC_OK , r.getStatusCode ( ) ) ; return newGson ( ) . fromJson ( r.getReader ( ) , com.google.gerrit.extensions.common.AccountInfo.class ) ; }
public void onGitReferenceUpdated ( com.google.gerrit.extensions.events.GitReferenceUpdatedListener.Event event ) { if ( event.getRefName ( ) . startsWith ( RefNames.REFS_CHANGES ) ) { cache.invalidate ( new com.google.gerrit.reviewdb.client.Project.NameKey ( event.getProjectName ( ) ) ) ; } }
protected void configure ( ) { bind ( com.google.gerrit.httpd.GerritOptions.class ) . toInstance ( new com.google.gerrit.httpd.GerritOptions ( false ) ) ; }
public void commentOnReviewableChangeByOwnerNotifyOwner ( ) throws java.lang.Exception { com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableChange ( com.google.gerrit.server.account.WatchConfig.NotifyType.ALL_COMMENTS ) ; review ( sc.owner , sc.changeId , com.google.gerrit.extensions.client.GeneralPreferencesInfo.EmailStrategy.ENABLED , com.google.gerrit.extensions.api.changes.NotifyHandling.OWNER ) ; assertThat ( sender ) . notSent ( ) ; }
protected void configure ( ) { bind ( com.google.gerrit.server.config.GerritOptions.class ) . toInstance ( new com.google.gerrit.server.config.GerritOptions ( config , false , false , false ) ) ; }
public void printJson ( final java.lang.StringBuilder sb , final java.lang.Object o ) { sb.append ( "{" ) ; printJsonImpl ( 0 , sb , o ) ; sb.append ( "}" ) ; }
public java.lang.String toString ( ) { return java.lang.String.format ( "%s (%s) => %s" , src ( ) , toolType , dest ( ) ) ; }
public org.eclipse.jgit.lib.ObjectId insert ( int objectType , long length , java.io.InputStream in ) throws java.io.IOException { buf.setByte ( LAST_BYTE , ( ( buf.getByte ( LAST_BYTE ) ) + 1 ) ) ; return buf.copy ( ) ; }
public com.googlesource.gerrit.plugins.findowners.OwnersDb call ( ) { com.googlesource.gerrit.plugins.findowners.Cache.log.trace ( ( "Create new OwnersDb, key=" + key ) ) ; return new com.googlesource.gerrit.plugins.findowners.OwnersDb ( accountCache , emails , key , repository , project , branch , files ) ; }
protected void onLoad ( ) throws java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { cfg = readConfig ( com.google.gerrit.server.account.Preferences.PREFERENCES_CONFIG ) ; }
static java.lang.String timeout ( int expirationSeconds ) { return com.googlesource.gerrit.plugins.lfs.LfsDateTime.now ( expirationSeconds ) ; }
public void pushWithInvalidChangeId ( ) throws java.lang.Exception { testpushWithInvalidChangeId ( ) ; }
protected abstract void render ( com.google.gerrit.common.data.PatchScript script , final com.google.gerrit.common.data.PatchSetDetail detail ) ;
public void onSuccess ( java.lang.Void result ) { currentEmail = newEmail ; com.google.gerrit.client.info.AccountInfo me = com.google.gerrit.client.Gerrit.getUserAccount ( ) ; me.email ( currentEmail ) ; me.name ( newName ) ; onSaveSuccess ( me ) ; registerNewEmail.setEnabled ( true ) ; }
public static void editWithFiles ( int id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.changes.ChangeInfo.EditInfo > cb ) { com.google.gerrit.client.changes.ChangeApi.edit ( id ) . addParameterTrue ( "list" ) . get ( cb ) ; }
public void setPrivate ( boolean value , @ com.google.gerrit.common.Nullable java.lang.String message ) throws com.google.gerrit.extensions.restapi.RestApiException { throw new com.google.gerrit.extensions.restapi.NotImplementedException ( ) ; }
public void indexerThrowsIOExceptionTryingToIndexChange ( ) throws java.lang.Exception { setupPostMocks ( com.ericsson.gerrit.plugins.multimaster.SyncIndexRestApiServletTest.CHANGE_EXISTS , com.ericsson.gerrit.plugins.multimaster.SyncIndexRestApiServletTest.DO_NOT_THROW_ORM_EXCEPTION , com.ericsson.gerrit.plugins.multimaster.SyncIndexRestApiServletTest.THROW_IO_EXCEPTION ) ; syncIndexRestApiServlet.doPost ( req , rsp ) ; org.mockito.Mockito.verify ( rsp ) . sendError ( javax.servlet.http.HttpServletResponse.SC_CONFLICT , "io-error" ) ; }
com.googlesource.gerrit.plugins.hooks.HookResult execute ( java.lang.String projectName , com.googlesource.gerrit.plugins.hooks.HookArgs args ) { queue.submit ( projectName , path , args ) ; return null ; }
public final java.util.Set < java.lang.String > labels ( ) { return labels0 ( ) . keySet ( ) ; }
public java.util.Set < java.lang.String > getEmailAddresses ( ) { if ( ( emailAddresses ) == null ) { emailAddresses = state ( ) . getEmailAddresses ( ) ; } return emailAddresses ; }
public com.google.gerrit.extensions.restapi.RestModifyView < com.google.gerrit.server.project.ProjectResource , ? > create ( com.google.gerrit.server.project.ProjectResource parent , com.google.gerrit.extensions.restapi.IdString id ) throws com.google.gerrit.extensions.restapi.RestApiException { if ( com.google.gerrit.server.project.DashboardsCollection.isDefaultDashboard ( id ) ) { return createDefault.get ( ) ; } throw new com.google.gerrit.extensions.restapi.ResourceNotFoundException ( id ) ; }
public void execute ( ) { if ( fileName.isEmpty ( ) ) { file.setFocus ( true ) ; } else { content.setFocus ( true ) ; } }
void downloadRequired ( ) { setRequired ( true ) ; download ( ) ; }
public java.util.Optional < com.googlesource.gerrit.plugins.webhooks.EventProcessor.Request > doProcess ( com.google.gerrit.server.events.ProjectEvent event , com.googlesource.gerrit.plugins.webhooks.RemoteConfig remote ) { return java.util.Optional.of ( new com.googlesource.gerrit.plugins.webhooks.EventProcessor.Request ( com.googlesource.gerrit.plugins.webhooks.processors.GerritEventProcessor.GSON.toJson ( event ) , com.google.common.collect.ImmutableMap.of ( "X-Origin-Url" , canonicalWebUrl ) ) ) ; }
public void abandonChange ( final com.google.gerrit.client.reviewdb.PatchSet.Id patchSetId , final java.lang.String message , final com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwtjsonrpc.client.VoidResult > callback ) { abandonChangeFactory.create ( patchSetId , message ) . to ( callback ) ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { showAddKeyBlock ( false ) ; }
private static com.google.gerrit.client.rpc.RestApi call ( int id , java.lang.String action ) { return com.google.gerrit.client.changes.ChangeApi.change ( id ) . view ( action ) ; }
protected void configure ( ) { post ( com.google.gerrit.server.change.RevisionResource.REVISION_KIND , "hello-revision" ) . to ( com.googlesource.gerrit.plugins.cookbook.HelloRevisionAction.class ) ; post ( com.google.gerrit.server.project.ProjectResource.PROJECT_KIND , "hello-project" ) . to ( com.googlesource.gerrit.plugins.cookbook.HelloProjectAction.class ) ; }
public com.googlecode.prolog_cafe.lang.PrologMachineCopy loadMachine ( java.lang.String name , java.io.Reader in ) throws com.googlecode.prolog_cafe.exceptions.CompileException { com.googlecode.prolog_cafe.lang.PrologMachineCopy pmc = consultRules ( name , in ) ; if ( pmc == null ) { throw new com.googlecode.prolog_cafe.exceptions.CompileException ( ( "Cannot consult rules from the stream " + name ) ) ; } return pmc ; }
public abstract java.util.Collection < com.google.gerrit.reviewdb.AccountProjectWatch > getNotificationFilters ( ) ;
private com.google.gerrit.server.mail.Address computeFrom ( ) { if ( ( fromId ) != null ) { return toAddress ( fromId ) ; } return new com.google.gerrit.server.mail.Address ( gerritIdent.getName ( ) , gerritIdent.getEmailAddress ( ) ) ; }
public final void reviewCategoryStrategy ( com.google.gerrit.reviewdb.client.AccountGeneralPreferences.ReviewCategoryStrategy s ) { reviewCategoryStrategyRaw ( ( s != null ? s.toString ( ) : null ) ) ; }
public static java.io.File getDistributionArchive ( ) throws java.io.FileNotFoundException { if ( ( com.google.gerrit.launcher.GerritLauncher.myArchive ) == null ) { com.google.gerrit.launcher.GerritLauncher.myArchive = com.google.gerrit.launcher.GerritLauncher.locateMyArchive ( ) ; } return com.google.gerrit.launcher.GerritLauncher.myArchive ; }
java.io.File getSrcJar ( ) { return getSrcFile ( ) . toFile ( ) ; }
private void setStarred ( final boolean s ) { if ( s ) { starChange.setResource ( Gerrit.RESOURCES.starFilled ( ) ) ; } else { starChange.setResource ( Gerrit.RESOURCES.starOpen ( ) ) ; } starred = s ; }
public boolean canConnect ( com.google.gerrit.sshd.Type type , org.apache.sshd.common.util.net.SshdSocketAddress address , org.apache.sshd.common.session.Session session ) { return false ; }
public java.lang.String getDisplayName ( ) { return project.getName ( ) ; }
private static void ensureInited ( ) { if ( ( com.google.gerrit.client.FormatUtil.dateFormatter ) == null ) { com.google.gerrit.client.FormatUtil.setPreferences ( com.google.gerrit.client.Gerrit.getUserPreferences ( ) ) ; } }
private com.google.gerrit.reviewdb.client.PatchSet getPatchSet ( com.google.gerrit.server.notedb.ChangeNotes notes , com.google.gerrit.extensions.common.RevisionInfo info ) throws com.google.gwtorm.server.OrmException { return psUtil.get ( db.get ( ) , notes , PatchSet.Id.fromRef ( info.ref ) ) ; }
public void delete ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { deleteChange.apply ( change , null ) ; } catch ( com.google.gerrit.server.update.UpdateException | com.google.gerrit.server.permissions.PermissionBackendException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot delete change" , e ) ; } }
public void mergeReview ( java.lang.String project , int number ) throws java.lang.Exception { submitter.apply ( getRevisionResource ( project , number ) , new com.google.gerrit.extensions.api.changes.SubmitInput ( ) ) ; }
private java.lang.String getRtcPassword ( ) { return gerritConfig.getString ( pluginName , null , com.googlesource.gerrit.plugins.hooks.rtc.RTCItsFacade.GERRIT_CONFIG_RTC_PASSWORD ) ; }
public com.google.gerrit.server.project.ConfigInfo apply ( com.google.gerrit.server.project.ProjectResource resource ) { return new com.google.gerrit.server.project.ConfigInfo ( resource.getControl ( ) , config , pluginConfigEntries , cfgFactory , views ) ; }
static void pair ( com.google.gerrit.client.diff.SideBySideCommentGroup a , com.google.gerrit.client.diff.SideBySideCommentGroup b ) { a.peers.add ( b ) ; b.peers.add ( a ) ; }
public static org.eclipse.jgit.internal.storage.dfs.InMemoryRepository newRepository ( com.google.gerrit.reviewdb.client.Project.NameKey name ) { return new com.google.gerrit.testing.InMemoryRepositoryManager.Repo ( name ) ; }
public void deleteReviewerFromReviewableChangeNotifyNone ( ) throws java.lang.Exception { com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableChangeWithExtraReviewer ( ) ; removeReviewer ( sc , extraReviewer , NotifyHandling.NONE ) ; assertThat ( sender ) . notSent ( ) ; }
com.google.gerrit.server.index.change.ChangeIndexer getChangeIndexer ( @ com.google.gerrit.server.index.IndexExecutor ( value = com.google.gerrit.server.git.QueueProvider.QueueType.INTERACTIVE ) com.google.common.util.concurrent.ListeningExecutorService executor , com.google.gerrit.server.index.change.ChangeIndexer.Factory factory , com.google.gerrit.server.index.change.ChangeIndexCollection indexes ) { return factory.create ( executor , indexes ) ; }
public void assertCanDelete ( com.google.gerrit.reviewdb.client.Project project ) throws com.google.gwtorm.server.OrmException , com.googlesource.gerrit.plugins.deleteproject.CannotDeleteProjectException { if ( db.submoduleSubscriptions ( ) . bySubmoduleProject ( project.getNameKey ( ) ) . iterator ( ) . hasNext ( ) ) { throw new com.googlesource.gerrit.plugins.deleteproject.CannotDeleteProjectException ( "Project is subscribed by other projects." ) ; } }
protected void configure ( ) { bind ( com.google.gerrit.server.schema.DataSourceType.class ) . toInstance ( dst ) ; }
public boolean match ( com.google.gerrit.server.query.change.ChangeData cd ) throws com.google.gwtorm.server.OrmException { java.util.Set < com.google.gerrit.reviewdb.client.Account.Id > reviewedBy = cd.reviewedBy ( ) ; return ! ( reviewedBy.isEmpty ( ) ) ? reviewedBy.contains ( id ) : ( id ) == ( com.google.gerrit.server.query.change.IsReviewedPredicate.NOT_REVIEWED ) ; }
public void setSecure ( java.lang.String name , java.lang.String value ) { if ( value != null ) { flags.sec.setString ( section , subsection , name , value ) ; } else { flags.sec.unset ( section , subsection , name ) ; } }
public com.google.gerrit.extensions.common.GpgKeyInfo apply ( com.google.gerrit.gpg.server.GpgKey rsrc ) throws java.io.IOException { return com.google.gerrit.gpg.server.GpgKeys.toJson ( rsrc.getKeyRing ( ) ) ; }
public void onKeyPress ( final com.google.gwt.event.dom.client.KeyPressEvent event ) { int index = ( indexOf ( activePatchSetId ) ) + 1 ; if ( index < ( patchSets.size ( ) ) ) { activate ( patchSets.get ( index ) . getId ( ) ) ; } }
public WorkQueue.Executor get ( ) { return queues.getQueue ( user.getCapabilities ( ) . getQueueType ( ) ) ; }
protected void doLogout ( javax.servlet.http.HttpServletRequest req , javax.servlet.http.HttpServletResponse rsp ) throws java.io.IOException { super . doLogout ( req , rsp ) ; if ( ( req.getSession ( false ) ) != null ) { oauthSession.get ( ) . logout ( ) ; } }
public com.google.gerrit.server.config.PluginConfig getFromGerritConfig ( java.lang.String pluginName ) { return new com.google.gerrit.server.config.PluginConfig ( pluginName , cfg ) ; }
public com.google.common.collect.ImmutableListMultimap < com.google.gerrit.reviewdb.client.PatchSet.Id , com.google.gerrit.reviewdb.client.PatchSetApproval > getApprovals ( ) { if ( ( approvals ) == null ) { approvals = com.google.common.collect.ImmutableListMultimap.copyOf ( com.google.common.collect.Multimaps.transformValues ( state.approvals ( ) , PatchSetApproval :: new ) ) ; } return approvals ; }
public java.util.concurrent.Callable < java.util.List < com.google.gitiles.blame.Region > > newLoader ( com.google.gitiles.blame.BlameCacheImpl.Key key , org.eclipse.jgit.lib.Repository repo ) { return ( ) -> com.google.gitiles.blame.BlameCacheImpl.loadBlame ( key , repo ) ; }
protected void applyDataRowStyle ( final int newRow ) { table.getCellFormatter ( ) . addStyleName ( newRow , com.google.gerrit.client.ui.FancyFlexTable.C_ARROW , com.google.gerrit.client.ui.FancyFlexTable.S_ICON_CELL ) ; table.getCellFormatter ( ) . addStyleName ( newRow , com.google.gerrit.client.ui.FancyFlexTable.C_ARROW , com.google.gerrit.client.ui.FancyFlexTable.S_LEFT_MOST_CELL ) ; }
private static int value ( java.lang.String value ) { if ( value.startsWith ( "+" ) ) { value = value.substring ( 1 ) ; } return java.lang.Integer.parseInt ( value ) ; }
com.google.common.util.concurrent.ListenableFuture < java.lang.Void > insert ( org.apache.lucene.document.Document doc ) throws java.io.IOException { return new com.google.gerrit.lucene.SubIndex.NrtFuture ( writer.addDocument ( doc ) ) ; }
public java.util.List < java.lang.String > getGroups ( ) { if ( ( groups ) == null ) { return java.util.Collections.emptyList ( ) ; } return com.google.gerrit.reviewdb.client.PatchSet.splitGroups ( groups ) ; }
public void onFailure ( final java.lang.Throwable caught ) { text.setReadOnly ( false ) ; save.setEnabled ( saveOn ) ; cancel.setEnabled ( true ) ; discard.setEnabled ( true ) ; super . onFailure ( caught ) ; }
public com.google.gerrit.server.IdentifiedUser runAs ( java.net.SocketAddress remotePeer , com.google.gerrit.reviewdb.client.Account.Id id , @ com.google.gerrit.common.Nullable com.google.gerrit.server.CurrentUser caller ) { return new com.google.gerrit.server.IdentifiedUser ( capabilityControlFactory , starredChangesUtil , authConfig , realm , anonymousCowardName , canonicalUrl , accountCache , groupBackend , disableReverseDnsLookup , com.google.inject.util.Providers.of ( remotePeer ) , id , caller ) ; }
static void delete ( com.google.gerrit.reviewdb.client.Change.Id id , java.lang.String revision , com.google.gwt.user.client.ui.Button ... draftButtons ) { com.google.gerrit.client.changes.ChangeApi.deleteRevision ( id.get ( ) , revision , com.google.gerrit.client.change.DraftActions.cs ( id , draftButtons ) ) ; }
private boolean canRead ( com.google.gerrit.server.notedb.ChangeNotes notes ) throws com.google.gerrit.server.permissions.PermissionBackendException { try { permissionBackend.user ( user ) . change ( notes ) . database ( db ) . check ( ChangePermission.READ ) ; return true ; } catch ( com.google.gerrit.extensions.restapi.AuthException e ) { return false ; } }
private void fail ( java.lang.Throwable t ) { com.google.gerrit.pgm.RebuildNoteDb.log.error ( ( "Failed to rebuild change " + ( changeId ) ) , t ) ; ok.set ( false ) ; failedTask.update ( 1 ) ; }
protected void allowGlobalCapabilities ( com.google.gerrit.reviewdb.client.AccountGroup.UUID id , java.lang.String ... capabilityNames ) throws java.lang.Exception { allowGlobalCapabilities ( id , java.util.Arrays.asList ( capabilityNames ) ) ; }
public RefUpdate.Result modifyFile ( com.google.gerrit.server.edit.ChangeEdit edit , java.lang.String file , com.google.gerrit.extensions.restapi.RawInput content ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.server.project.InvalidChangeOperationException , java.io.IOException { return modify ( com.google.gerrit.server.edit.ChangeEditModifier.TreeOperation.CHANGE_ENTRY , edit , file , content ) ; }
public void onSuccess ( java.lang.Void result ) { loadConfigInfo ( info , rev ) ; }
com.google.common.util.concurrent.ListenableFuture < java.lang.Void > replace ( org.apache.lucene.index.Term term , org.apache.lucene.document.Document doc ) throws java.io.IOException { return new com.google.gerrit.lucene.SubIndex.NrtFuture ( writer.updateDocument ( term , doc ) ) ; }
protected java.lang.String getRefName ( ) { return com.google.gerrit.reviewdb.client.RefNames.changeMetaRef ( getChangeId ( ) ) ; }
public void onMouseOut ( com.google.gwt.event.dom.client.MouseOutEvent event ) { hideFullScreenIcon ( ) ; hideDeleteIcon ( ) ; }
public java.lang.Iterable < com.google.gerrit.server.ssh.SshKeyCacheEntry > get ( java.lang.String username ) { return self.get ( username ) ; }
public com.google.gerrit.server.project.ChangeControl controlFor ( final com.google.gerrit.reviewdb.Change change ) { return new com.google.gerrit.server.project.ChangeControl ( controlForRef ( change.getDest ( ) ) , change ) ; }
public static java.lang.String format ( java.lang.String name , short value ) { return new java.lang.StringBuilder ( ) . append ( com.google.gerrit.reviewdb.client.ApprovalCategoryValue.formatValue ( value ) ) . append ( ' ' ) . append ( name ) . toString ( ) ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { setFocus ( false ) ; command.execute ( ) ; }
private java.util.List < com.google.gerrit.reviewdb.RefRight > getAllRights ( com.google.gerrit.reviewdb.ApprovalCategory.Id actionId ) { return filter ( getProjectState ( ) . getAllRights ( actionId , true ) ) ; }
private final native void sideRaw ( java.lang.String s ) ;
public java.lang.String toString ( ) { return ( "Stream Events (" + ( currentUser.getAccount ( ) . getUserName ( ) ) ) + ")" ; }
public com.google.gwtorm.data.Address.Key key ( ) { return city ; }
public void onValueChange ( com.google.gwt.event.logical.shared.ValueChangeEvent < com.google.gerrit.common.data.PatchScriptSettings > event ) { update ( event.getValue ( ) ) ; }
void setUpBlameIconA ( net.codemirror.lib.CodeMirror cm , boolean isBase , com.google.gerrit.reviewdb.client.PatchSet.Id rev , java.lang.String path ) { patchSetSelectBoxA.setUpBlame ( cm , isBase , rev , path ) ; }
public java.util.Set < java.lang.String > getEmailAddresses ( ) { if ( ( emailAddresses ) == null ) { emailAddresses = getAccountState ( ) . getEmailAddresses ( ) ; } return emailAddresses ; }
protected void bindOneUpdate ( java.sql.PreparedStatement ps , com.google.gwtorm.jdbc.AbstractTestJdbcAccess.Data entity ) throws java.sql.SQLException { ps.setInt ( 1 , entity.id ) ; }
public java.util.concurrent.ScheduledThreadPoolExecutor get ( ) { return queues.createQueue ( poolSize , "SSH-Stream-Worker" , java.lang.Thread.MIN_PRIORITY ) ; }
public static com.google.gerrit.server.project.SubmitRuleOptions.Builder builder ( ) { return new com.google.gerrit.server.project.AutoValue_SubmitRuleOptions.Builder ( ) . allowClosed ( false ) . skipFilters ( false ) . rule ( null ) ; }
private static long initialDelay ( java.lang.String startTime , java.lang.String interval ) throws org.eclipse.jgit.errors.ConfigInvalidException { return new com.google.gerrit.server.config.ScheduleConfig ( com.google.gerrit.server.config.ScheduleConfigTest.config ( startTime , interval ) , "section" , "subsection" , com.google.gerrit.server.config.ScheduleConfigTest.NOW ) . getInitialDelay ( ) ; }
private com.google.gerrit.reviewdb.client.Account getAccount ( com.google.gerrit.extensions.common.AccountInfo info ) { if ( info != null ) { com.google.gerrit.server.account.AccountState account = accounts.get ( new com.google.gerrit.reviewdb.client.Account.Id ( info._accountId ) ) ; if ( account != null ) { return account.getAccount ( ) ; } } return null ; }
private static com.google.gerrit.extensions.restapi.IdString toIdString ( com.google.gerrit.reviewdb.client.Change.Id id ) { return com.google.gerrit.extensions.restapi.IdString.fromDecoded ( id.toString ( ) ) ; }
protected void onCellDoubleClick ( int row , int column ) { onOpenRow ( row ) ; }
public static com.google.gerrit.extensions.client.EditPreferencesInfo readDefaultEditPreferences ( org.eclipse.jgit.lib.Repository allUsersRepo ) throws java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { return com.google.gerrit.server.account.Preferences.parseEditPreferences ( com.google.gerrit.server.account.Preferences.readDefaultConfig ( allUsersRepo ) , null , null ) ; }
public void deleteComment ( com.google.gerrit.reviewdb.client.Comment c ) { verifyComment ( c ) ; delete.add ( com.google.gerrit.server.notedb.ChangeDraftUpdate.key ( c ) ) ; }
public boolean apply ( com.googlesource.gerrit.plugins.replication.Destination dest ) { if ( ( dest == null ) || ( ! ( dest.isCreateMissingRepos ( ) ) ) ) { return false ; } return true ; }
private boolean canRead ( final com.google.gerrit.reviewdb.Change c , final com.google.gerrit.reviewdb.ReviewDb db ) throws com.google.gwtorm.client.OrmException { try { return changeControlFactory.controlFor ( c ) . isVisible ( db ) ; } catch ( com.google.gerrit.server.project.NoSuchChangeException e ) { return false ; } }
public com.google.gerrit.extensions.restapi.BinaryResult content ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return getContent.apply ( file ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot retrieve file content" , e ) ; } }
public void onSuccess ( final com.google.gerrit.client.data.PatchSetDetail result ) { ensureLoaded ( result ) ; }
private void assertOwner ( java.lang.String ref , com.google.gerrit.server.project.ProjectControl u ) { com.google.common.truth.Truth.assertThat ( u.controlForRef ( ref ) . isOwner ( ) ) . named ( ( "OWN " + ref ) ) . isTrue ( ) ; }
public com.googlesource.gerrit.plugins.github.git.GHHook getHook ( int id ) throws java.io.IOException { return ghRepository.getHook ( id ) ; }
public static org.eclipse.jgit.lib.ObjectId readNotNull ( final java.io.InputStream in ) throws java.io.IOException { final byte [ ] b = new byte [ 20 ] ; org.eclipse.jgit.util.IO.readFully ( in , b , 0 , 20 ) ; return org.eclipse.jgit.lib.ObjectId.fromRaw ( b ) ; }
public T decodeWithSize ( java.io.InputStream in ) throws java.io.IOException { T obj = newInstance ( ) ; mergeFromWithSize ( in , obj ) ; return obj ; }
public int compare ( com.google.gerrit.client.changes.ChangeInfo.RevisionInfo a , com.google.gerrit.client.changes.ChangeInfo.RevisionInfo b ) { return ( num ( a ) ) - ( num ( b ) ) ; }
public com.google.gerrit.common.data.ParamertizedString.Builder replace ( final java.lang.String name , final java.lang.String value ) { return new com.google.gerrit.common.data.ParamertizedString.Builder ( ) . replace ( name , value ) ; }
public static com.google.gerrit.server.git.ValidationError.Sink createLoggerSink ( java.lang.String message , org.slf4j.Logger log ) { return ( error ) -> log.error ( ( message + ( error.getMessage ( ) ) ) ) ; }
public void onSelection ( com.google.gwt.event.logical.shared.SelectionEvent < com.google.gwt.user.client.ui.SuggestOracle.Suggestion > event ) { if ( submitOnSelection ) { submitOnSelection = false ; doAddNew ( ) ; } }
public int getEffectiveMaxBatchChangesLimit ( com.google.gerrit.server.CurrentUser user ) { com.google.gerrit.server.account.CapabilityControl cap = capabilityFactory.create ( user ) ; if ( cap.hasExplicitRange ( com.google.gerrit.common.data.GlobalCapability.BATCH_CHANGES_LIMIT ) ) { return cap.getRange ( com.google.gerrit.common.data.GlobalCapability.BATCH_CHANGES_LIMIT ) . getMax ( ) ; } return systemMaxBatchChanges ; }
java.lang.String needApproval ( java.lang.String labelName ) ;
private org.eclipse.jgit.lib.ObjectId getCurrentRevisionId ( java.lang.String changeId ) throws com.google.gerrit.extensions.restapi.RestApiException { return org.eclipse.jgit.lib.ObjectId.fromString ( gApi.changes ( ) . id ( changeId ) . get ( ) . currentRevision ) ; }
void setReplyBox ( com.google.gerrit.client.diff.DraftBox box ) { replyBox = box ; com.google.gwt.user.client.ui.UIObject.setVisible ( buttons , false ) ; box.setReplyToBox ( this ) ; }
public void onSuccess ( java.lang.Void result ) { if ( ( ! ( prefs.showBase ( ) ) ) || ( ( revision.get ( ) ) > 0 ) ) { group3.done ( ) ; } }
private void addExtensionPoints ( ) { addExtensionPoint ( GerritUiExtensionPoint.CHANGE_SCREEN_HEADER , headerExtension ) ; addExtensionPoint ( GerritUiExtensionPoint.CHANGE_SCREEN_HEADER_RIGHT_OF_BUTTONS , headerExtensionMiddle ) ; addExtensionPoint ( GerritUiExtensionPoint.CHANGE_SCREEN_HEADER_RIGHT_OF_POP_DOWNS , headerExtensionRight ) ; addExtensionPoint ( GerritUiExtensionPoint.CHANGE_SCREEN_BELOW_CHANGE_INFO_BLOCK , changeExtension ) ; }
private com.google.gerrit.client.diff.DraftBox addNewDraft ( net.codemirror.lib.CodeMirror cm , int line ) { return addDraftBox ( com.google.gerrit.client.changes.CommentInfo.createRange ( path , getSideFromCm ( cm ) , ( line + 1 ) , null , null , null ) ) ; }
public boolean match ( com.google.gerrit.server.query.change.ChangeData cd ) throws com.google.gwtorm.server.OrmException { return ( ( ( source ) != null ) && ( cd.isFromSource ( source ) ) ) || ( pred.match ( cd ) ) ; }
public void evictPluginCache ( ) throws java.lang.Exception { configureMocksFor ( "my-plugin" , "my-cache" ) ; verifyResponseIsOK ( ) ; }
private void connect ( ) { if ( ( ! ( isConnected ( ) ) ) && ( session.connect ( ) ) ) { synchronized ( sessionMon ) { sessionMon.notifyAll ( ) ; } } }
public void onSuccess ( final com.google.gerrit.common.data.CommentDetail result ) { if ( ( rpcSequence ) == rpcseq ) { comments = result ; onResult ( isFirst ) ; } }
private void fastForwardTagToExistingCommit ( com.google.gerrit.acceptance.rest.project.PushTagIT.TagType tagType , java.lang.String tagName , org.eclipse.jgit.transport.RemoteRefUpdate.Status expectedStatus ) throws java.lang.Exception { pushTag ( tagType , tagName , false , false , expectedStatus ) ; }
public boolean canRemoveGroup ( final com.google.gerrit.reviewdb.AccountGroup.Id id ) { return isOwner ( ) ; }
protected void configure ( ) { factory ( RegisterNewEmailSender.Factory.class ) ; }
void onCancel ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChangeInEditMode ( revision.getParentKey ( ) ) ) ; }
private com.google.gerrit.extensions.common.ReceiveInfo getReceiveInfo ( ) { com.google.gerrit.extensions.common.ReceiveInfo info = new com.google.gerrit.extensions.common.ReceiveInfo ( ) ; info.enableSignedPush = enableSignedPush ; return info ; }
public void setUp ( ) throws java.lang.Exception { com.google.gerrit.acceptance.PushOneCommit.Result changeResult = createChange ( ) ; changeId = changeResult.getChangeId ( ) ; fixReplacementInfo = createFixReplacementInfo ( ) ; fixSuggestionInfo = createFixSuggestionInfo ( fixReplacementInfo ) ; withFixRobotCommentInput = createRobotCommentInput ( fixSuggestionInfo ) ; }
public static void schedule ( final java.lang.Runnable task , final long delay , final java.util.concurrent.TimeUnit unit ) { com.google.gerrit.git.WorkQueue.getDefaultQueue ( ) . schedule ( task , delay , unit ) ; }
public void createBranchByAdminCreateReferenceBlocked_Forbidden ( ) throws java.lang.Exception { blockCreateReference ( ) ; assertCreateFails ( com.google.gerrit.extensions.restapi.AuthException.class ) ; }
private com.google.gerrit.client.rpc.RestApi reviewed ( ) { return com.google.gerrit.client.changes.ChangeApi.revision ( Project.NameKey.asStringOrNull ( projectKey ) , patchSetId ) . view ( "files" ) . id ( path ) . view ( "reviewed" ) ; }
public < T extends java.lang.Enum < ? > , E extends java.util.EnumSet < ? extends T > > T select ( java.lang.String title , java.lang.String name , T defValue ) { return select ( title , name , defValue , false ) ; }
com.google.gerrit.common.changes.Side getStoredSideFromDisplaySide ( com.google.gerrit.client.diff.SideBySide2.DisplaySide side ) { return ( side == ( com.google.gerrit.client.diff.SideBySide2.DisplaySide.A ) ) && ( ( base ) == null ) ? com.google.gerrit.common.changes.Side.PARENT : com.google.gerrit.common.changes.Side.REVISION ; }
public java.lang.String apply ( com.google.gerrit.server.change.ChangeResource rsrc ) { com.google.gerrit.server.config.PluginConfig cfg = cfgFactory.getFromProjectConfigWithInheritance ( rsrc.getControl ( ) . getProjectControl ( ) . getProjectState ( ) , pluginName ) ; return cfg.getString ( "changeInfo" ) ; }
public static < T > com.google.gerrit.index.query.Predicate < T > any ( ) { return ( ( com.google.gerrit.index.query.Predicate < T > ) ( com.google.gerrit.index.query.Predicate.Any.INSTANCE ) ) ; }
public void setUseContentMerge ( final com.google.gerrit.extensions.common.InheritableBoolean cm ) { useContentMerge = cm ; }
default void onRemoveByKey ( org.eclipse.jgit.lib.ObjectId newNotesRev , com.google.gerrit.reviewdb.client.Account.Id accountId , com.google.gerrit.server.account.externalids.ExternalId.Key extIdKey ) throws java.io.IOException { onRemoveByKeys ( newNotesRev , accountId , java.util.Collections.singleton ( extIdKey ) ) ; }
public void createBranchByProjectOwner ( ) throws java.lang.Exception { grantOwner ( ) ; setApiUser ( user ) ; assertCreateSucceeds ( testBranch ) ; }
public com.google.gerrit.server.notedb.ChangeNotes notes ( ) throws com.google.gwtorm.server.OrmException { if ( ( notes ) == null ) { notes = notesFactory.create ( db , project , legacyId ) ; } return notes ; }
public void testAppend_float ( ) { final com.google.gwtexpui.safehtml.client.SafeHtmlBuilder b = new com.google.gwtexpui.safehtml.client.SafeHtmlBuilder ( ) ; com.google.common.truth.Truth.assertThat ( b ) . isSameAs ( b.append ( 0.0F ) ) ; com.google.common.truth.Truth.assertThat ( b.asString ( ) ) . isEqualTo ( "0.0" ) ; }
private void fireChangeIndexedEvent ( int id ) { for ( com.google.gerrit.extensions.events.ChangeIndexedListener listener : indexedListener ) { listener.onChangeIndexed ( id ) ; } }
public com.google.gerrit.server.plugins.InstallPlugin create ( com.google.gerrit.extensions.restapi.TopLevelResource parent , java.lang.String id ) throws com.google.gerrit.extensions.restapi.ResourceNotFoundException { return new com.google.gerrit.server.plugins.InstallPlugin ( loader , com.google.gerrit.server.util.Url.decode ( id ) ) ; }
public final boolean contains ( int line ) { return ( ( from ( ) ) <= line ) && ( line < ( to ( ) ) ) ; }
public java.lang.Iterable < com.google.gerrit.server.plugins.Plugin > getPlugins ( ) { return running.values ( ) ; }
public final java.util.Optional < java.lang.String > getPassword ( ) { return password ; }
private boolean isProjectStatePermittingWrite ( ) { return getProjectControl ( ) . getProject ( ) . getState ( ) . equals ( ProjectState.ACTIVE ) ; }
private static org.antlr.runtime.tree.Tree parse ( java.lang.String str ) throws com.google.gerrit.index.query.QueryParseException { return com.google.gerrit.index.query.QueryParser.parse ( str ) ; }
public void noNotificationForWipChangesForWatchersInNotifyConfig ( ) throws java.lang.Exception { com.google.gerrit.server.mail.Address addr = new com.google.gerrit.server.mail.Address ( "Watcher" , "watcher@example.com" ) ; com.google.gerrit.server.git.NotifyConfig nc = new com.google.gerrit.server.git.NotifyConfig ( ) ; nc.addEmail ( addr ) ; nc.setName ( "team" ) ; nc.setHeader ( NotifyConfig.Header.TO ) ; nc.setTypes ( java.util.EnumSet.of ( NotifyType.NEW_CHANGES , NotifyType.ALL_COMMENTS ) ) ; com.google.gerrit.server.git.ProjectConfig cfg = projectCache.checkedGet ( project ) . getConfig ( ) ; cfg.putNotifyConfig ( "team" , nc ) ; saveProjectConfig ( project , cfg ) ; sender.clear ( ) ; com.google.gerrit.acceptance.PushOneCommit.Result r = pushFactory.create ( db , admin.getIdent ( ) , testRepo , "wip change" , "a" , "a1" ) . to ( "refs/for/master%wip" ) ; r.assertOkStatus ( ) ; com.google.common.truth.Truth.assertThat ( sender.getMessages ( ) ) . isEmpty ( ) ; setApiUser ( admin ) ; com.google.gerrit.extensions.api.changes.ReviewInput in = new com.google.gerrit.extensions.api.changes.ReviewInput ( ) ; in.message = "comment" ; gApi.changes ( ) . id ( r.getChangeId ( ) ) . current ( ) . review ( in ) ; com.google.common.truth.Truth.assertThat ( sender.getMessages ( ) ) . isEmpty ( ) ; }
private java.util.jar.Manifest getPluginManifest ( com.google.gerrit.server.plugins.PluginContentScanner scanner ) throws com.google.gerrit.server.plugins.InvalidPluginException { try { return scanner.getManifest ( ) ; } catch ( java.io.IOException e ) { throw new com.google.gerrit.server.plugins.InvalidPluginException ( "Cannot get plugin manifest" , e ) ; } }
abstract com.google.gerrit.server.notedb.ChangeNotes notes ( ) ;
public void run ( ) throws java.lang.Exception { stdout = toPrintWriter ( out ) ; try { parseCommandLine ( ) ; updateParents ( ) ; } finally { stdout.flush ( ) ; } }
public java.lang.String toString ( ) { return ( "AccessSection[" + ( getName ( ) ) ) + "]" ; }
protected void configureServlets ( ) { bind ( com.google.gerrit.server.git.QueueProvider.class ) . to ( com.google.gerrit.sshd.CommandExecutorQueueProvider.class ) . in ( com.google.inject.Scopes.SINGLETON ) ; filterRegex ( com.google.gerrit.pgm.http.jetty.ProjectQoSFilter.FILTER_RE ) . through ( com.google.gerrit.pgm.http.jetty.ProjectQoSFilter.class ) ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { doAddNewBranch ( ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { if ( ( event.getNativeEvent ( ) . getKeyCode ( ) ) == ( com.google.gwt.event.dom.client.KeyCodes.KEY_ENTER ) ) { doCreateGroup ( ) ; } }
void notifyStarting ( final com.google.gerrit.git.PushOp op ) { synchronized ( pending ) { pending.remove ( op.getURI ( ) ) ; } }
public final com.google.gerrit.index.query.Predicate < T > getChild ( int i ) { return children.get ( i ) ; }
public void onSuccess ( com.google.gerrit.client.rpc.NativeMap < com.google.gwt.core.client.JsArray < com.google.gerrit.client.changes.CommentInfo > > result ) { com.google.gwt.core.client.JsArray < com.google.gerrit.client.changes.CommentInfo > in = result.get ( path ) ; if ( in != null ) { addAllToCommentList ( in , toDrafts ) ; } }
private static int now ( ) { return ( ( int ) ( ( java.lang.System.currentTimeMillis ( ) ) / 5000L ) ) ; }
protected void configure ( ) { get ( com.google.gerrit.server.project.ProjectResource.PROJECT_KIND , "reviewers" ) . to ( com.googlesource.gerrit.plugins.reviewers.GetReviewers.class ) ; put ( com.google.gerrit.server.project.ProjectResource.PROJECT_KIND , "reviewers" ) . to ( com.googlesource.gerrit.plugins.reviewers.PutReviewers.class ) ; }
public synchronized void stop ( ) { if ( ( dataSource ) != null ) { closeDataSource ( dataSource ) ; } }
private org.pegdown.ast.RootNode parseMarkdown ( java.lang.String md ) { int options = ( org.pegdown.Extensions.ALL ) & ( ~ ( org.pegdown.Extensions.HARDWRAPS ) ) ; if ( suppressHtml ) { options |= org.pegdown.Extensions.SUPPRESS_ALL_HTML ; } return new org.pegdown.PegDownProcessor ( options ) . parseMarkdown ( md.toCharArray ( ) ) ; }
public void testGcWithoutCapability_Error ( ) throws com.google.gwtorm.server.OrmException , com.jcraft.jsch.JSchException , java.io.IOException { com.google.gerrit.acceptance.SshSession s = new com.google.gerrit.acceptance.SshSession ( server , user ) ; s.exec ( "gerrit gc --all" ) ; assertError ( "Capability runGC is required to access this resource" , s.getError ( ) ) ; s.close ( ) ; }
public void getDiffPreferences ( ) throws java.lang.Exception { com.google.gerrit.extensions.client.DiffPreferencesInfo result = gApi.config ( ) . server ( ) . getDefaultDiffPreferences ( ) ; assertPrefsEqual ( result , com.google.gerrit.extensions.client.DiffPreferencesInfo.defaults ( ) ) ; }
private boolean activeForProject ( com.google.gerrit.server.config.PluginConfig config , java.lang.String project ) { return matchCriteria ( config , "project" , project , true , false ) ; }
public com.google.gerrit.server.plugins.PluginEntry apply ( java.util.jar.JarEntry jarEntry ) { try { return resourceOf ( jarEntry ) ; } catch ( java.io.IOException e ) { throw new java.lang.IllegalArgumentException ( ( ( "Cannot convert jar entry " + jarEntry ) + " to a resource" ) , e ) ; } }
public void createProject ( ) throws java.lang.Exception { java.lang.String name = name ( "foo" ) ; com.google.common.truth.Truth.assertThat ( name ) . isEqualTo ( gApi.projects ( ) . create ( name ) . get ( ) . name ) ; }
private boolean isEmpty ( ) { if ( ! ( migration.commitChangeWrites ( ) ) ) { return true ; } return ( ( changeUpdates.isEmpty ( ) ) && ( draftUpdates.isEmpty ( ) ) ) && ( toDelete.isEmpty ( ) ) ; }
public static com.google.gwt.event.shared.HandlerRegistration addRpcCompleteHandler ( com.google.gwtjsonrpc.client.RpcCompleteHandler h ) { return com.google.gwtjsonrpc.client.JsonUtil.globalHandlers.addHandler ( com.google.gwtjsonrpc.client.RpcCompleteEvent.getType ( ) , h ) ; }
public void asyncStarredChanges ( ) { if ( ( ( starredChanges ) == null ) && ( ( starredChangesUtil ) != null ) ) { starredQuery = starredChangesUtil.queryFromIndex ( accountId ) ; } }
java.lang.String linkAt ( java.lang.String hostname ) ;
public org.eclipse.jgit.lib.Config getProjectPluginConfigWithInheritance ( com.google.gerrit.server.project.ProjectState projectState , java.lang.String pluginName ) { return projectState.getConfig ( ( pluginName + ( com.google.gerrit.server.config.PluginConfigFactory.EXTENSION ) ) ) . getWithInheritance ( ) ; }
static org.eclipse.jgit.storage.file.FileBasedConfig loadGerritIndexConfig ( com.google.gerrit.server.config.SitePaths sitePaths ) throws java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { org.eclipse.jgit.storage.file.FileBasedConfig cfg = new org.eclipse.jgit.storage.file.FileBasedConfig ( sitePaths.index_dir.resolve ( "gerrit_index.config" ) . toFile ( ) , org.eclipse.jgit.util.FS.detect ( ) ) ; cfg.load ( ) ; return cfg ; }
public void setTitleText ( final java.lang.String text ) { headerText.setText ( text ) ; }
private static com.google.gerrit.extensions.restapi.BinaryResult asBinaryResult ( final org.eclipse.jgit.util.TemporaryBuffer.Heap buf ) { return new com.google.gerrit.extensions.restapi.BinaryResult ( ) { @ java.lang.Override public void writeTo ( java.io.OutputStream os ) throws java.io.IOException { buf.writeTo ( os , null ) ; } } . setContentLength ( buf.length ( ) ) ; }
public java.lang.String getBaseGitUrl ( javax.servlet.http.HttpServletRequest req ) { return ( "git://" + ( com.google.gitiles.TestGitilesUrls.HOST_NAME ) ) + "/foo" ; }
public void shouldIndexInRemoteOnChangeIndexedEvent ( ) throws java.lang.Exception { indexEventHandler.onChangeIndexed ( id.get ( ) ) ; org.mockito.Mockito.verify ( restSessionMock ) . index ( com.ericsson.gerrit.plugins.highavailability.IndexEventHandlerTest.CHANGE_ID ) ; }
public static com.google.gerrit.reviewdb.client.PatchSet newPatchSet ( com.google.gerrit.reviewdb.client.PatchSet.Id id , org.eclipse.jgit.lib.ObjectId revision , com.google.gerrit.reviewdb.client.Account.Id userId ) { return com.google.gerrit.testing.TestChanges.newPatchSet ( id , revision.name ( ) , userId ) ; }
private com.google.inject.Injector createSshInjector ( ) { return sysInjector.createChildInjector ( new com.google.gerrit.server.ssh.SshModule ( ) ) ; }
private static java.lang.String toChangeNoSlash ( @ com.google.gerrit.common.Nullable com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.reviewdb.client.Change.Id c ) { if ( project != null ) { return ( ( "/c/" + ( project.get ( ) ) ) + ( com.google.gerrit.common.PageLinks.PROJECT_CHANGE_DELIMITER ) ) + c ; } return "/c/" + c ; }
protected void formatChange ( ) throws com.google.gerrit.common.errors.EmailException { appendText ( textTemplate ( "ReplacePatchSet" ) ) ; }
public boolean isVisible ( ) { return ( ( ( user ) instanceof com.google.gerrit.server.InternalUser ) || ( canPerformOnAnyRef ( Permission.READ ) ) ) && ( ! ( isHidden ( ) ) ) ; }
public com.google.gwtorm.server.ResultSet < com.google.gerrit.reviewdb.client.PatchSet > iterateAllEntities ( ) { throw new java.lang.UnsupportedOperationException ( com.google.gerrit.reviewdb.server.DisabledChangesReviewDbWrapper.MSG ) ; }
public boolean canSubmit ( ) { if ( RefNames.REFS_CONFIG.equals ( refName ) ) { return projectControl.isOwner ( ) ; } return ( canPerform ( Permission.SUBMIT ) ) && ( canWrite ( ) ) ; }
protected void preDisplay ( com.google.gerrit.client.projects.ConfigInfoCache.Entry result ) { send.setEnabled ( true ) ; commentLinkProcessor = result.getCommentLinkProcessor ( ) ; setTheme ( result.getTheme ( ) ) ; displayScreen ( ) ; }
java.lang.Runnable toggleOpenBox ( final net.codemirror.lib.CodeMirror cm ) { return new java.lang.Runnable ( ) { @ java.lang.Override public void run ( ) { com.google.gerrit.client.diff.CommentGroup group = getCommentGroupOnActiveLine ( cm ) ; if ( group != null ) { group.openCloseLast ( ) ; } } } ; }
public java.io.InputStream openStream ( ) throws java.io.IOException { return rawKey.getInputStream ( ) ; }
public void onFocus ( com.google.gwt.event.dom.client.FocusEvent event ) { strings.put ( tb , tb.getText ( ) . trim ( ) ) ; }
public void testCreateProjectHttpWithNameMismatch_BadRequest ( ) throws java.lang.Exception { com.google.gerrit.extensions.api.projects.ProjectInput in = new com.google.gerrit.extensions.api.projects.ProjectInput ( ) ; in.name = name ( "otherName" ) ; adminRestSession.put ( ( "/projects/" + ( name ( "someName" ) ) ) , in ) . assertBadRequest ( ) ; }
protected PushOneCommit.Result createChange ( ) throws java.lang.Exception { com.google.gerrit.acceptance.PushOneCommit push = pushFactory.create ( db , admin.getIdent ( ) , testRepo ) ; com.google.gerrit.acceptance.PushOneCommit.Result result = push.to ( "refs/for/master" ) ; result.assertOkStatus ( ) ; return result ; }
public com.google.gerrit.server.group.AddMembers.PutMember create ( com.google.gerrit.server.group.GroupResource group , com.google.gerrit.extensions.restapi.IdString id ) { return new com.google.gerrit.server.group.AddMembers.PutMember ( put , id.get ( ) ) ; }
protected void configure ( ) { bind ( com.google.gerrit.pgm.init.api.ConsoleUI.class ) . toInstance ( init.ui ) ; bind ( com.google.gerrit.pgm.init.api.InitFlags.class ) . toInstance ( init.flags ) ; }
private void assertNotMergeable ( com.google.gerrit.server.query.change.ChangeData change ) throws java.lang.Exception { change.setMergeable ( null ) ; com.google.common.truth.Truth.assertThat ( change.isMergeable ( ) ) . isFalse ( ) ; }
public org.eclipse.jgit.lib.ObjectId getOldId ( ) { if ( ( ( oldId ) == null ) && ( ( oldIdName ) != null ) ) { oldId = org.eclipse.jgit.lib.ObjectId.fromString ( oldIdName ) ; } return oldId ; }
public void onFailure ( java.lang.Throwable caught ) { enableButtons ( true ) ; new com.google.gerrit.client.ErrorDialog ( caught.getMessage ( ) ) . center ( ) ; }
private void configureRequestScope ( ) { install ( new com.google.gerrit.server.config.GerritRequestModule ( ) ) ; bind ( com.google.gerrit.server.IdentifiedUser.class ) . toProvider ( com.google.gerrit.server.ssh.SshCurrentUserProvider.class ) . in ( SshScopes.REQUEST ) ; bind ( com.google.gerrit.server.CurrentUser.class ) . to ( com.google.gerrit.server.IdentifiedUser.class ) ; }
protected final void setRefLogIdent ( ) { if ( ( refLogIdent ) == null ) { refLogIdent = args.identifiedUserFactory.create ( args.caller.getAccountId ( ) ) . newRefLogIdent ( ) ; } }
java.lang.String displayPatchSetsInReverseOrder ( ) ;
public void testSimpleAdvance ( ) { com.google.gerrit.client.diff.SideBySide2.EditIterator iter = new com.google.gerrit.client.diff.SideBySide2.EditIterator ( lines , 0 ) ; assertLineChsEqual ( net.codemirror.lib.LineCharacter.create ( 0 , 1 ) , iter.advance ( 1 ) ) ; }
public java.util.Set < com.google.gerrit.reviewdb.client.AccountGroup.UUID > getKnownGroups ( ) { java.util.Set < com.google.gerrit.reviewdb.client.AccountGroup.UUID > groups = new java.util.HashSet < > ( ) ; for ( com.google.gerrit.server.account.GroupMembership m : memberships.values ( ) ) { groups.addAll ( m.getKnownGroups ( ) ) ; } return groups ; }
public void setRegisterKeys ( final boolean on ) { myTable.setRegisterKeys ( on ) ; }
public void testWarnNonExistingRuleBase ( ) { replayMocks ( ) ; createRuleBase ( ) ; assertLogMessageContains ( "Neither global" ) ; }
com.google.gerrit.client.diff.LineMapper.LineOnOtherInfo lineOnOther ( com.google.gerrit.client.diff.DisplaySide side , int line ) { return getChunkManager ( ) . lineMapper.lineOnOther ( side , line ) ; }
com.google.common.collect.ImmutableList < com.google.gerrit.reviewdb.client.PatchLineComment > exportComments ( com.google.gerrit.reviewdb.client.PatchLineComment.Status status ) { return com.google.common.collect.ImmutableList.copyOf ( comments.stream ( ) . map ( ( c ) -> c.export ( status ) ) . collect ( java.util.stream.Collectors.toList ( ) ) ) ; }
public org.eclipse.jgit.transport.UploadPack create ( javax.servlet.http.HttpServletRequest req , org.eclipse.jgit.lib.Repository repo ) { org.eclipse.jgit.transport.UploadPack up = new org.eclipse.jgit.transport.UploadPack ( repo ) ; up.setPackConfig ( packConfig ) ; session.get ( ) . setAccessPath ( AccessPath.GIT ) ; return up ; }
public void denyOwnerProject ( ) { com.google.gerrit.server.project.testing.Util.allow ( local , com.google.gerrit.common.data.Permission.OWNER , com.google.gerrit.server.project.testing.Util.ADMIN , "refs/*" ) ; com.google.gerrit.server.project.testing.Util.deny ( local , com.google.gerrit.common.data.Permission.OWNER , com.google.gerrit.server.project.testing.Util.DEVS , "refs/*" ) ; assertAdminsAreOwnersAndDevsAreNot ( ) ; }
public void startCharGreaterThanEndCharForSameLineResultsInInvalidRange ( ) { com.google.gerrit.extensions.client.Comment.Range range = createRange ( 13 , 11 , 13 , 10 ) ; com.google.gerrit.extensions.common.testing.RangeSubject.assertThat ( range ) . isInvalid ( ) ; }
final native void setCommit ( com.google.gerrit.client.changes.ChangeInfo.CommitInfo c ) ;
public com.google.gerrit.server.IdentifiedUser create ( com.google.inject.Provider < com.google.gerrit.reviewdb.ReviewDb > db , com.google.gerrit.reviewdb.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( AccessPath.UNKNOWN , authConfig , canonicalUrl , realm , accountCache , starredChangesCache , accountProjectWatchCache , accountDiffPreferencesCache , null , db , id ) ; }
public void testGcNotAllowed_Forbidden ( ) throws java.lang.Exception { userSession.post ( ( ( "/projects/" + ( allProjects.get ( ) ) ) + "/gc" ) ) . assertForbidden ( ) ; }
public org.eclipse.jgit.revwalk.RevCommit commit ( ) throws java.io.IOException { com.google.gerrit.server.notedb.BatchMetaDataUpdate batch = openUpdate ( ) ; try { batch.write ( new org.eclipse.jgit.lib.CommitBuilder ( ) ) ; return batch.commit ( ) ; } finally { batch.close ( ) ; } }
public void onSignOut ( ) { if ( isRequiresSignIn ( ) ) { com.google.gwt.user.client.History.newItem ( com.google.gerrit.common.PageLinks.toChangeQuery ( "status:open" ) ) ; } }
public void commentOnReviewableChangeByOther ( ) throws java.lang.Exception { com.google.gerrit.acceptance.TestAccount other = accountCreator.create ( "other" , "other@example.com" , "other" ) ; com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableChange ( com.google.gerrit.server.account.WatchConfig.NotifyType.ALL_COMMENTS ) ; review ( other , sc.changeId , com.google.gerrit.extensions.client.GeneralPreferencesInfo.EmailStrategy.ENABLED ) ; assertThat ( sender ) . sent ( "comment" , sc ) . notTo ( other ) . to ( sc.owner ) . to ( sc.reviewerByEmail ) . cc ( sc.reviewer , sc.ccer ) . cc ( sc.ccerByEmail ) . bcc ( sc.starrer ) . bcc ( com.google.gerrit.server.account.WatchConfig.NotifyType.ALL_COMMENTS ) ; }
public void addCommitMessage ( com.google.gerrit.server.events.ChangeAttribute a , java.lang.String commitMessage ) { a.commitMessage = commitMessage ; }
private void rollback ( ) { for ( com.googlesource.gerrit.plugins.github.git.ImportStep importStep : importSteps ) { importStep.rollback ( ) ; } }
void onDeleteEdit ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { if ( com.google.gwt.user.client.Window.confirm ( Resources.C.deleteChangeEdit ( ) ) ) { com.google.gerrit.client.change.EditActions.deleteEdit ( getProject ( ) , changeId , publishEdit , rebaseEdit , deleteEdit ) ; } }
protected com.google.gerrit.acceptance.StandaloneSiteTest.ServerContext startServer ( @ com.google.gerrit.common.Nullable com.google.inject.Module testSysModule , java.lang.String ... additionalArgs ) throws java.lang.Exception { return new com.google.gerrit.acceptance.StandaloneSiteTest.ServerContext ( startImpl ( testSysModule , additionalArgs ) ) ; }
public void onCallStart ( ) { if ( ( ++ ( activeCalls ) ) == 1 ) { if ( ( com.google.gerrit.client.RpcStatus.hideDepth ) == 0 ) { loading.setVisible ( true ) ; } } }
public final void addLineClass ( net.codemirror.lib.CodeMirror.LineHandle line , net.codemirror.lib.CodeMirror.LineClassWhere where , java.lang.String className ) { addLineClassNative ( line , where.value ( ) , className ) ; }
public boolean canAddGroup ( com.google.gerrit.reviewdb.AccountGroup.Id id ) { return isOwner ( ) ; }
public void onSuccess ( com.google.gerrit.client.info.AccountPreferencesInfo prefs ) { com.google.gerrit.client.Gerrit.setUserPreferences ( prefs ) ; enable ( true ) ; display ( prefs ) ; }
public static void deleteRevision ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , java.lang.String commit , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwt.core.client.JavaScriptObject > cb ) { com.google.gerrit.client.changes.ChangeApi.revision ( project , id , commit ) . delete ( cb ) ; }
private static native net.codemirror.lib.CodeMirror newCM ( com.google.gwt.dom.client.Element p , net.codemirror.lib.Configuration cfg ) ;
public com.google.common.collect.ImmutableSetMultimap < java.lang.String , com.google.gerrit.server.account.externalids.ExternalId > byEmails ( java.lang.String ... emails ) throws java.io.IOException { throw new java.lang.UnsupportedOperationException ( ) ; }
public final java.util.Set < java.lang.String > labels ( ) { return allLabels ( ) . keySet ( ) ; }
private static void install ( com.google.gwt.core.client.JavaScriptObject cb , com.google.gerrit.client.api.JsUiPlugin p ) { try { com.google.gerrit.client.api.ApiGlue.pluginName = p.name ( ) ; com.google.gerrit.client.api.ApiGlue.invoke ( cb , p ) ; } finally { com.google.gerrit.client.api.ApiGlue.pluginName = null ; } }
public void onSuccess ( java.lang.String result ) { net.codemirror.mode.ModeInfo mode = net.codemirror.mode.ModeInfo.findMode ( result , path ) ; type = ( mode != null ) ? mode.mime ( ) : null ; injectMode ( result , modeInjectorCb ) ; }
public void onSuccess ( com.google.gerrit.client.changes.PublishCommentScreen.ReviewInput result ) { if ( submit ) { submit ( ) ; } else { saveStateOnUnload = false ; goChange ( ) ; } }
public void handle ( net.codemirror.lib.CodeMirror cm , net.codemirror.lib.CodeMirror.LineHandle lh , com.google.gwt.dom.client.Element e ) { commentManager.resizePadding ( lh ) ; chunkManager.resizePadding ( cm , lh , side ) ; }
private void detach ( ) { if ( ( lineWidget ) != null ) { lineWidget.clear ( ) ; lineWidget = null ; updateSelection ( ) ; } manager.clearLine ( cm.side ( ) , line ) ; removeFromParent ( ) ; }
com.google.gerrit.client.reviewdb.Account byId ( com.google.gerrit.client.reviewdb.Account.Id key ) throws com.google.gwtorm.client.OrmException ;
public static com.google.gerrit.client.ui.AccountLink link ( com.google.gerrit.common.data.AccountInfoCache cache , com.google.gerrit.reviewdb.client.Account.Id id ) { com.google.gerrit.client.changes.AccountInfo ai = cache.get ( id ) ; return ai != null ? new com.google.gerrit.client.ui.AccountLink ( ai ) : null ; }
public static com.google.gerrit.server.account.ExternalId createWithEmail ( com.google.gerrit.server.account.ExternalId.Key key , com.google.gerrit.reviewdb.client.Account.Id accountId , @ com.google.gerrit.common.Nullable java.lang.String email ) { return new com.google.gerrit.server.account.AutoValue_ExternalId ( key , accountId , com.google.common.base.Strings.emptyToNull ( email ) , null ) ; }
protected void assertQuery ( java.lang.Object query , com.google.gerrit.reviewdb.client.Change ... changes ) throws java.lang.Exception { assertQuery ( newQuery ( query ) , changes ) ; }
protected void ccAllApprovals ( ) { try { for ( com.google.gerrit.reviewdb.client.Account.Id id : changeData.reviewers ( ) . values ( ) ) { add ( RecipientType.CC , id ) ; } } catch ( com.google.gwtorm.server.OrmException err ) { com.google.gerrit.server.mail.ChangeEmail.log.warn ( "Cannot CC users that reviewed updated change" , err ) ; } }
public com.google.gerrit.server.change.ChangeJson setChangeControlFactory ( com.google.gerrit.server.project.ChangeControl.Factory cf ) { changeControlUserFactory = cf ; return this ; }
public static java.lang.String createCommit ( org.eclipse.jgit.api.Git git , org.eclipse.jgit.lib.PersonIdent i , java.lang.String msg ) throws java.io.IOException , org.eclipse.jgit.api.errors.GitAPIException { return com.google.gerrit.acceptance.git.GitUtil.createCommit ( git , i , msg , true ) ; }
private java.util.List < com.google.gerrit.reviewdb.client.AccountSshKey > getKeys ( ) { checkLoaded ( ) ; return keys.stream ( ) . filter ( java.util.Optional :: isPresent ) . map ( java.util.Optional :: get ) . collect ( java.util.stream.Collectors.toList ( ) ) ; }
public java.lang.String toString ( ) { return ( ( getClass ( ) . getSimpleName ( ) ) + ( ids ( ) ) ) + ( furtherHiddenChanges ? " and further hidden changes" : "" ) ; }
abstract java.nio.file.Path targetPath ( com.google.gerrit.httpd.raw.BuildSystem.Label l ) ;
public java.util.SortedSet < ? extends com.google.gerrit.server.util.TreeFormatter.TreeNode > getChildren ( ) { return children ; }
public void shouldNotDispatchForwardedEvents ( ) { com.ericsson.gerrit.plugins.syncevents.Context.setForwardedEvent ( ) ; try { broker.fireEventForUnrestrictedListeners ( event ) ; } finally { com.ericsson.gerrit.plugins.syncevents.Context.unsetForwardedEvent ( ) ; } org.mockito.Mockito.verifyZeroInteractions ( listenerMock ) ; }
private static boolean isRE ( java.lang.String refPattern ) { return refPattern.startsWith ( RefRight.REGEX_PREFIX ) ; }
public static com.google.common.collect.ImmutableList < com.google.gerrit.gpg.testutil.TestKey > allValidKeys ( ) { return com.google.common.collect.ImmutableList.of ( com.google.gerrit.gpg.testutil.TestKey.key1 ( ) , com.google.gerrit.gpg.testutil.TestKey.key2 ( ) , com.google.gerrit.gpg.testutil.TestKey.key5 ( ) ) ; }
public void asAnonymous ( ) throws java.lang.Exception { com.google.gerrit.extensions.common.AccountInfo user1 = newAccount ( "user1" ) ; setAnonymous ( ) ; assertQuery ( "9999999" ) ; assertQuery ( "self" ) ; assertQuery ( ( "username:" + ( user1.username ) ) , user1 ) ; }
public void onKeyUp ( com.google.gwt.event.dom.client.KeyUpEvent event ) { subname = filterTxt.getValue ( ) ; populateProjects ( ) ; }
public void resetTime ( ) { com.google.gerrit.testutil.TestTimeUtil.useSystemTime ( ) ; java.lang.System.setProperty ( "user.timezone" , systemTimeZone ) ; }
java.util.Optional < com.googlesource.gerrit.plugins.webhooks.EventProcessor.Request > process ( com.google.gerrit.server.events.ProjectEvent event , com.googlesource.gerrit.plugins.webhooks.RemoteConfig remote ) ;
public void testExpiredTime ( ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( Verifier.onTime ( com.googlesource.gerrit.plugins.lfs.LfsDateTime.format ( now ( ) . minusMillis ( 1 ) ) ) ) . isFalse ( ) ; }
public boolean canViewPrivateChanges ( ) { return canPerform ( Permission.VIEW_PRIVATE_CHANGES ) ; }
final void setState ( com.google.gerrit.extensions.client.ProjectState s ) { setStateRaw ( s.name ( ) ) ; }
public void setGroupUuid ( com.google.gerrit.reviewdb.client.AccountGroup.UUID groupUuid ) { this . groupUuid = groupUuid ; }
public static void deleteChange ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwt.core.client.JavaScriptObject > cb ) { com.google.gerrit.client.changes.ChangeApi.change ( project , id ) . delete ( cb ) ; }
private boolean isGerritConfig ( javax.servlet.http.HttpServletRequest req ) throws java.io.IOException { return java.nio.file.Files.isSameFile ( sitePaths.gerrit_config , resolvePath ( req ) ) ; }
public java.lang.String getAutomergeLabel ( ) throws org.eclipse.jgit.errors.ConfigInvalidException { java.lang.String automergeLabel = getConfig ( ) . getString ( "global" , null , "automergeLabel" ) ; return automergeLabel != null ? automergeLabel : "Code-Review" ; }
private java.lang.String peeled ( java.lang.String refName ) throws java.io.IOException { return org.eclipse.jgit.lib.ObjectId.toString ( repo.getRepository ( ) . peel ( repo.getRepository ( ) . exactRef ( refName ) ) . getPeeledObjectId ( ) ) ; }
public void onSuccess ( com.google.gerrit.client.info.ChangeInfo info ) { info.init ( ) ; addExtensionPoints ( info ) ; loadConfigInfo ( info , base ) ; }
public java.lang.String getString ( java.lang.String name ) { return cfg.getString ( com.google.gerrit.server.config.PluginConfig.PLUGIN , pluginName , name ) ; }
public void onSuccess ( final java.util.List < com.google.gerrit.reviewdb.Project > result ) { projectsTab.display ( result ) ; if ( firstPopupLoad ) { firstPopupLoad = false ; displayPopup ( ) ; } }
protected void set ( java.lang.String newValue ) { branchName = com.google.gerrit.reviewdb.client.RefNames.fullName ( newValue ) ; }
public com.google.gerrit.client.ui.Screen recycleThis ( final com.google.gerrit.client.ui.Screen newScreen ) { ownerId = ( ( com.google.gerrit.client.changes.AccountDashboardScreen ) ( newScreen ) ) . ownerId ; setRequiresSignIn ( ( ( ownerId ) == null ) ) ; return this ; }
protected void onLoad ( ) { super . onLoad ( ) ; add ( createExtensionPoint ( GerritUiExtensionPoint.PROFILE_SCREEN_BOTTOM ) ) ; display ( com.google.gerrit.client.Gerrit.getUserAccount ( ) ) ; display ( ) ; }
public com.google.gerrit.index.FieldType < ? > getType ( ) { return def.getType ( ) ; }
private static java.lang.ClassLoader threadCL ( ) { try { return java.lang.Thread.currentThread ( ) . getContextClassLoader ( ) ; } catch ( java.lang.SecurityException e ) { return com.google.gwtorm.jdbc.SimpleDataSource.class . getClassLoader ( ) ; } }
public java.util.List < com.google.gerrit.common.data.GerritConfig.CommentLink > getSerializableCommentLinks ( ) { return commentLinks ; }
public void resetDomainValidator ( ) throws java.lang.Exception { java.lang.Class < ? > c = java.lang.Class.forName ( "org.apache.commons.validator.routines.DomainValidator" ) ; java.lang.reflect.Field f = c.getDeclaredField ( "inUse" ) ; f.setAccessible ( true ) ; f.setBoolean ( c , false ) ; }
Change.Id parse ( java.lang.String id ) { return new com.google.gerrit.reviewdb.client.Change.Id ( java.lang.Integer.parseInt ( id ) ) ; }
public void onLoad ( com.google.gerrit.plugin.client.screen.Screen screen ) { screen.setPageTitle ( "Imagare Preferences" ) ; screen.show ( new com.googlesource.gerrit.plugins.imagare.client.ImagarePreferenceScreen ( enableImageServer ) ) ; }
private static < K , V > com.google.inject.Key < com.google.gerrit.server.cache.EntryCreator < K , V > > newKey ( ) { return ( ( com.google.inject.Key < com.google.gerrit.server.cache.EntryCreator < K , V > > ) ( com.google.gerrit.server.cache.CacheModule.newKeyImpl ( ) ) ) ; }
public void onSuccess ( final com.google.gerrit.common.data.GroupDetail groupDetail ) { saveName.setEnabled ( false ) ; display ( groupDetail ) ; }
public void onKeyPress ( final com.google.gwt.event.dom.client.KeyPressEvent event ) { com.google.gerrit.client.Gerrit.displayLastChangeList ( ) ; }
static void setView ( javax.servlet.http.HttpServletRequest req , com.google.gitiles.GitilesView view ) { req.setAttribute ( com.google.gitiles.ViewFilter.VIEW_ATTRIBUTE , view ) ; }
private java.lang.String getValue ( final org.eclipse.jgit.lib.Config config , final java.lang.String section , final java.lang.String setting , final java.lang.String fallback ) { final java.lang.String result = config.getString ( section , null , setting ) ; return com.google.common.base.Strings.isNullOrEmpty ( result ) ? fallback : result ; }
public static void deleteEdit ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwt.core.client.JavaScriptObject > cb ) { com.google.gerrit.client.changes.ChangeApi.edit ( project , id ) . delete ( cb ) ; }
public void onSuccess ( com.google.gwtjsonrpc.common.VoidResult result ) { com.google.gerrit.client.Gerrit.getUserAccount ( ) . username ( newUserName ) ; userNameLbl.setText ( newUserName ) ; userNameLbl.setVisible ( true ) ; userNameTxt.setVisible ( false ) ; setUserName.setVisible ( false ) ; }
public com.google.gerrit.reviewdb.com.google.gwtorm [ ] members ( ) { return new com.google.gwtorm.client.Key < ? > [ ] { projectName , filter } ; }
public void refsDraftCommentsPrefix ( ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( com.google.gerrit.reviewdb.client.RefNames.refsDraftCommentsPrefix ( accountId ) ) . isEqualTo ( "refs/draft-comments/23/1011123/" ) ; }
public final boolean isOAuth ( ) { return ( authType ( ) ) == ( com.google.gerrit.reviewdb.client.AuthType.OAUTH ) ; }
public void run ( ) { try { executePredicate ( ) ; } catch ( com.googlecode.prolog_cafe.exceptions.PrologException e ) { java.lang.System.out.println ( e.toString ( ) ) ; } catch ( java.lang.Exception e ) { printStackTrace ( e ) ; } stop ( ) ; }
public boolean exists ( final java.lang.String issueKey ) throws java.io.IOException { return execute ( ( ) -> client ( ) . issueExists ( issueKey ) ) ; }
public void onSuccess ( final java.util.List < com.google.gerrit.client.reviewdb.AccountSshKey > result ) { keys.display ( result ) ; if ( ( result.isEmpty ( ) ) && ( keys.isVisible ( ) ) ) { showAddKeyBlock ( true ) ; } }
public void onSuccess ( final com.google.gerrit.common.data.ProjectDetail result ) { enableForm ( result.canModifyAgreements , result.canModifyDescription , result.canModifyMergeType ) ; display ( result ) ; }
public < A extends com.google.gwtorm.client.Access < ? , ? > > java.lang.Class < A > create ( com.google.gwtorm.server.GeneratedClassLoader loader , com.google.gwtorm.schema.RelationModel rm ) throws com.google.gwtorm.client.OrmException { return new com.google.gwtorm.jdbc.gen.AccessGen ( loader , rm , dialect ) . create ( ) ; }
public int compare ( eu.medsea.mimeutil.MimeType a , eu.medsea.mimeutil.MimeType b ) { return ( getCorrectedMimeSpecificity ( b ) ) - ( getCorrectedMimeSpecificity ( a ) ) ; }
static void initialize ( org.eclipse.jgit.lib.Config cfg ) { cfg.setString ( com.googlesource.gerrit.plugins.xdocs.XDocGlobalConfig.SECTION_FORMATTER , MarkdownFormatter.NAME , com.googlesource.gerrit.plugins.xdocs.XDocGlobalConfig.KEY_MIME_TYPE , "text/x-markdown" ) ; cfg.setString ( com.googlesource.gerrit.plugins.xdocs.XDocGlobalConfig.SECTION_FORMATTER , PlainTextFormatter.NAME , com.googlesource.gerrit.plugins.xdocs.XDocGlobalConfig.KEY_MIME_TYPE , "text/plain" ) ; }
private void checkNotSlaveMode ( ) throws com.google.gerrit.common.Die { if ( globalConfig.getBoolean ( "container" , "slave" , false ) ) { throw die ( "Cannot run reindex in slave mode" ) ; } }
public static void topMenus ( com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.info.TopMenuList > cb ) { new com.google.gerrit.client.rpc.RestApi ( "config/server/top-menus" ) . get ( cb ) ; }
protected abstract java.lang.String getProjectName ( ) throws org.eclipse.jgit.lfs.errors.LfsException ;
private boolean isLdapUUID ( com.google.gerrit.reviewdb.client.AccountGroup.UUID uuid ) { return ( helper.hasLdapConfiguration ( ) ) && ( uuid.get ( ) . startsWith ( com.google.gerrit.server.auth.ldap.Helper.LDAP_UUID ) ) ; }
public void onSizeChanged ( ) { diffView.relayout ( ) ; }
PatchSet.Id getPatchSetId ( ) { return new com.google.gerrit.reviewdb.client.PatchSet.Id ( changeInfo.legacyId ( ) , changeInfo.revisions ( ) . get ( revision ) . _number ( ) ) ; }
public void onSuccess ( java.lang.Void result ) { net.codemirror.theme.ThemeLoader.loadTheme ( prefs.theme ( ) , themeCallback ) ; }
public void init ( javax.servlet.FilterConfig config ) throws javax.servlet.ServletException { if ( com.google.common.base.Strings.isNullOrEmpty ( gitOAuthProvider ) ) { pickOnlyProvider ( ) ; } else { pickConfiguredProvider ( ) ; } }
public void destroySite ( ) throws java.lang.Exception { if ( ( sitePath ) != null ) { com.google.gerrit.testutil.TempFileUtil.cleanup ( ) ; } }
public void commit ( ) { throw new com.google.gerrit.testing.DisabledReviewDb.Disabled ( ) ; }
public void testWithSectionToOtherServer ( ) throws java.lang.Exception { com.google.gerrit.reviewdb.client.Project.NameKey p1 = createProject ( "a" ) ; org.eclipse.jgit.lib.Config cfg = new org.eclipse.jgit.lib.Config ( ) ; cfg.fromText ( ( ( ( ( "" + ( ( "[submodule \"a\"]" + "path = a" ) + "url = ssh://non-localhost/" ) ) + ( p1.get ( ) ) ) + "\n" ) + "branch = ." ) ) ; com.google.gerrit.reviewdb.client.Branch.NameKey targetBranch = new com.google.gerrit.reviewdb.client.Branch.NameKey ( new com.google.gerrit.reviewdb.client.Project.NameKey ( "project" ) , "master" ) ; java.util.Set < com.google.gerrit.reviewdb.client.SubmoduleSubscription > res = new com.google.gerrit.server.util.SubmoduleSectionParser ( cfg , com.google.gerrit.acceptance.git.SubmoduleSectionParserIT.THIS_SERVER , targetBranch ) . parseAllSections ( ) ; com.google.common.truth.Truth.assertThat ( res ) . isEmpty ( ) ; }
private boolean isRelevantRef ( com.google.gerrit.server.events.RefUpdatedEvent event ) { return ( ! ( isNewRef ( event ) ) ) && ( ( event.getRefName ( ) . startsWith ( org.eclipse.jgit.lib.Constants.R_HEADS ) ) || ( event.getRefName ( ) . startsWith ( org.eclipse.jgit.lib.Constants.R_TAGS ) ) ) ; }
public java.lang.Void call ( ) throws java.io.IOException { index.replace ( new com.google.gerrit.server.query.change.ChangeData ( change ) ) ; return null ; }
public void operationComplete ( org.apache.sshd.common.future.CloseFuture future ) { connected.decrementAndGet ( ) ; if ( sd.isAuthenticationError ( ) ) { authFailures.increment ( ) ; sshLog.onAuthFail ( sd ) ; } }
public void onCreateGroup ( com.google.gerrit.reviewdb.client.AccountGroup.NameKey newGroupName ) throws java.io.IOException { byName.invalidate ( newGroupName.get ( ) ) ; indexer.get ( ) . index ( get ( newGroupName ) . getGroupUUID ( ) ) ; }
protected boolean verifyTokenValues ( ) { return ( operation.equals ( token.operation ) ) && ( id.getName ( ) . equals ( token.id.getName ( ) ) ) ; }
protected void init ( java.lang.String name , com.google.gerrit.server.query.Predicate < T > ... args ) { this . init = true ; this . name = name ; this . children = java.util.Arrays.asList ( args ) ; }
private void doVerify ( ) { mockMaker.verify ( ) ; }
private void initDownloadAction ( com.google.gerrit.client.changes.ChangeInfo info , java.lang.String revision ) { downloadAction = new com.google.gerrit.client.change.DownloadAction ( info.legacy_id ( ) , info.project ( ) , info.revision ( revision ) , style , headerLine , download ) ; }
public scala.reflect.internal.util.SourceFile apply ( java.nio.file.Path scalaFile ) { try { return new scala.reflect.internal.util.BatchSourceFile ( scalaFile.toString ( ) , readScalaFile ( scalaFile ) ) ; } catch ( java.io.IOException e ) { throw new java.lang.IllegalArgumentException ( ( "Cannot load scala file " + scalaFile ) , e ) ; } }
private com.google.gerrit.server.project.ChangeControl forUser ( com.google.gerrit.server.CurrentUser who ) { if ( getUser ( ) . equals ( who ) ) { return this ; } return new com.google.gerrit.server.project.ChangeControl ( changeDataFactory , approvalsUtil , refControl.forUser ( who ) , notes , patchSetUtil ) ; }
protected void onOpenRow ( final int row ) { com.google.gwt.user.client.History.newItem ( link ( getRowItem ( row ) ) ) ; }
public com.google.gerrit.reviewdb.client.Change abandon ( com.google.gerrit.server.project.ChangeControl control , java.lang.String msgTxt ) throws com.google.gerrit.extensions.restapi.RestApiException , com.google.gerrit.server.git.UpdateException { return abandon ( control , msgTxt , NotifyHandling.ALL , com.google.common.collect.ImmutableListMultimap.of ( ) ) ; }
private void extractMailExample ( java.lang.String orig ) throws java.lang.Exception { java.nio.file.Path ex = site.mail_dir.resolve ( ( orig + ".example" ) ) ; com.google.gerrit.pgm.init.api.InitUtil.extract ( ex , com.google.gerrit.server.mail.send.OutgoingEmail.class , orig ) ; com.google.gerrit.common.FileUtil.chmod ( 292 , ex ) ; }
private java.sql.Timestamp getSubmittedOn ( com.google.gerrit.server.query.change.ChangeData cd ) throws com.google.gwtorm.server.OrmException { java.util.Optional < com.google.gerrit.reviewdb.client.PatchSetApproval > s = cd.getSubmitApproval ( ) ; return s.isPresent ( ) ? s.get ( ) . getGranted ( ) : null ; }
private void beforeTest ( org.eclipse.jgit.lib.Config cfg , boolean memory ) throws java.lang.Exception { server = startServer ( cfg , memory ) ; server.getTestInjector ( ) . injectMembers ( this ) ; }
public java.lang.String get ( ) { return submodulePath ; }
public com.google.gerrit.reviewdb.client.Change reloadChange ( ) throws com.google.gwtorm.server.OrmException { change = db.changes ( ) . get ( legacyId ) ; return change ; }
public void testVerifyAuthInfo ( ) throws java.lang.Exception { com.googlesource.gerrit.plugins.lfs.fs.LfsFsRequestAuthorizer.AuthInfo info = auth.generateAuthInfo ( "o" , org.eclipse.jgit.lfs.lib.LongObjectId.zeroId ( ) , 1 ) ; com.google.common.truth.Truth.assertThat ( auth.verifyAuthInfo ( info.authToken , "o" , org.eclipse.jgit.lfs.lib.LongObjectId.zeroId ( ) ) ) . isTrue ( ) ; }
public void addReviewerToReviewableChangeInReviewDb ( ) throws java.lang.Exception { forAll ( ( adder ) -> { com.google.common.truth.TruthJUnit.assume ( ) . that ( notesMigration.readChanges ( ) ) . isFalse ( ) ; com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableChange ( ) ; com.google.gerrit.acceptance.TestAccount reviewer = accountCreator.create ( "added" , "added@example.com" , "added" ) ; addReviewer ( adder , sc.changeId , sc.owner , reviewer.email ) ; assertThat ( sender ) . sent ( "newchange" , sc ) . to ( reviewer ) . cc ( sc.reviewer , sc.ccer ) . cc ( sc.reviewerByEmail , sc.ccerByEmail ) . noOneElse ( ) ; } ) ; }
public void onSuccess ( com.google.gerrit.common.data.PatchSetDetail result ) { commitMessageBlock.setVisible ( true ) ; commitMessageBlock.display ( result.getInfo ( ) . getMessage ( ) , commentLinkProcessor ) ; }
protected final void configure ( ) { com.google.common.base.Preconditions.checkState ( ( ( command ) != null ) , "@PluginName must be provided" ) ; bind ( com.google.gerrit.sshd.Commands.key ( command ) ) . toProvider ( new com.google.gerrit.sshd.DispatchCommandProvider ( command ) ) ; configureCommands ( ) ; }
public com.google.gwtjsonrpc.client.VoidResult run ( com.google.gerrit.client.reviewdb.ReviewDb db , com.google.gwtorm.client.Transaction txn , boolean retry ) throws com.google.gwtorm.client.OrmException { return doAddReviewers ( reviewerIds , id , db , txn ) ; }
public static com.google.gerrit.server.account.ExternalId createEmail ( com.google.gerrit.reviewdb.client.Account.Id accountId , java.lang.String email ) { return com.google.gerrit.server.account.ExternalId.createWithEmail ( com.google.gerrit.server.account.ExternalId.SCHEME_MAILTO , email , accountId , com.google.common.base.Preconditions.checkNotNull ( email ) ) ; }
public void onSuccess ( com.google.gerrit.client.changes.ReviewInfo result ) { header.reviewed.setValue ( true , false ) ; }
void fireGitRefUpdatedEvent ( org.eclipse.jgit.lib.RefUpdate ru ) { gitRefUpdated.fire ( projectName , ru , ( ( author ) == null ? null : author.getAccount ( ) ) ) ; }
public void configure ( ) { java.net.InetSocketAddress addr = new java.net.InetSocketAddress ( com.google.common.net.InetAddresses.forString ( "127.0.0.1" ) , 1234 ) ; bind ( java.net.SocketAddress.class ) . annotatedWith ( com.google.gerrit.server.RemotePeer.class ) . toInstance ( addr ) ; }
void write ( java.io.Writer w ) throws java.io.IOException { if ( com.google.gerrit.server.mail.EmailHeader.needsQuotedPrintable ( value ) ) { w.write ( com.google.gerrit.server.mail.EmailHeader.quotedPrintable ( value ) ) ; } else { w.write ( value ) ; } }
public void onReplace ( org.eclipse.jgit.lib.ObjectId oldNotesRev , org.eclipse.jgit.lib.ObjectId newNotesRev , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId > toRemove , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId > toAdd ) { }
public static com.google.gerrit.server.account.ExternalId create ( com.google.gerrit.server.account.ExternalId.Key key , com.google.gerrit.reviewdb.client.Account.Id accountId , @ com.google.gerrit.common.Nullable java.lang.String email , @ com.google.gerrit.common.Nullable java.lang.String hashedPassword ) { return new com.google.gerrit.server.account.AutoValue_ExternalId ( key , accountId , com.google.common.base.Strings.emptyToNull ( email ) , com.google.common.base.Strings.emptyToNull ( hashedPassword ) ) ; }
public static java.lang.String escape ( final java.lang.String in ) { return new com.google.gwtexpui.safehtml.client.SafeHtmlBuilder ( ) . append ( in ) . asString ( ) ; }
private static boolean isDateField ( java.lang.String name ) { return ( ( "lastUpdated" . equals ( name ) ) || ( "grantedOn" . equals ( name ) ) ) || ( "timestamp" . equals ( name ) ) ; }
public com.google.gerrit.server.IdentifiedUser create ( final com.google.gerrit.server.AccessPath accessPath , final com.google.gerrit.reviewdb.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( capabilityControlFactory , accessPath , authConfig , canonicalUrl , realm , accountCache , groupIncludeCache , remotePeerProvider , dbProvider , id ) ; }
public com.google.gerrit.extensions.api.changes.ChangeApi rebase ( com.google.gerrit.extensions.api.changes.RebaseInput in ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return changes.id ( rebase.apply ( revision , in ) . _number ) ; } catch ( com.google.gwtorm.server.OrmException | com.google.gerrit.common.errors.EmailException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot rebase ps" , e ) ; } }
static long now ( ) { return java.lang.System.currentTimeMillis ( ) ; }
com.google.gerrit.server.git.strategy.SubmitStrategy.Arguments create ( com.google.gerrit.reviewdb.client.Branch.NameKey destBranch , com.google.gerrit.server.git.MergeOp.CommitStatus commits , com.google.gerrit.server.git.CodeReviewCommit.CodeReviewRevWalk rw , com.google.gerrit.server.IdentifiedUser caller , org.eclipse.jgit.lib.ObjectInserter inserter , org.eclipse.jgit.lib.Repository repo , org.eclipse.jgit.revwalk.RevFlag canMergeFlag , com.google.gerrit.reviewdb.server.ReviewDb db , java.util.Set < org.eclipse.jgit.revwalk.RevCommit > alreadyAccepted ) ;
private com.google.gerrit.reviewdb.client.Change.Id getOrRegisterAccount ( com.google.gerrit.reviewdb.server.ReviewDb db , org.kohsuke.github.GitUser author ) throws com.google.gerrit.extensions.restapi.BadRequestException , com.google.gerrit.extensions.restapi.ResourceConflictException , com.google.gerrit.extensions.restapi.UnprocessableEntityException , com.google.gwtorm.server.OrmException , java.io.IOException { return getOrRegisterAccount ( db , author.getName ( ) , author.getName ( ) , author.getEmail ( ) ) ; }
public void onError ( final com.google.gwt.http.client.Request request , final java.lang.Throwable exception ) { com.google.gwtjsonrpc.client.JsonUtil.fireOnCallEnd ( ) ; callback.onFailure ( exception ) ; }
public com.google.gerrit.extensions.common.WebLinkInfo getProjectWeblink ( java.lang.String projectName ) { return new com.google.gerrit.extensions.common.WebLinkInfo ( name , myImageUrl , java.lang.String.format ( placeHolderUrlProject , projectName ) , com.google.gerrit.extensions.webui.WebLinkTarget.BLANK ) ; }
org.eclipse.jgit.lib.Repository openMetadataRepository ( com.google.gerrit.reviewdb.client.Project.NameKey name ) throws java.io.IOException , org.eclipse.jgit.errors.RepositoryNotFoundException ;
public com.google.gerrit.reviewdb.client.AccountGroupByIdAud.Key getKey ( ) { return key ; }
public final AccountGroup.UUID getGroupUUID ( ) { return new com.google.gerrit.reviewdb.client.AccountGroup.UUID ( com.google.gwt.http.client.URL.decodeQueryString ( id ( ) ) ) ; }
static boolean onTime ( java.lang.String dateTime ) { return ( com.googlesource.gerrit.plugins.lfs.LfsDateTime.now ( ) . compareTo ( dateTime ) ) <= 0 ; }
public com.google.gerrit.index.query.DataSource < com.google.gerrit.server.account.AccountState > getSource ( com.google.gerrit.index.query.Predicate < com.google.gerrit.server.account.AccountState > p , com.google.gerrit.index.QueryOptions opts ) throws com.google.gerrit.index.query.QueryParseException { return new com.google.gerrit.lucene.LuceneAccountIndex.QuerySource ( opts , queryBuilder.toQuery ( p ) , new org.apache.lucene.search.Sort ( new org.apache.lucene.search.SortField ( com.google.gerrit.lucene.LuceneAccountIndex.ID_SORT_FIELD , SortField.Type.LONG , true ) ) ) ; }
public void listNonExistingGroupMembers_NotFound ( ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( adminSession.get ( ( ( "/groups/" + ( name ( "non-existing" ) ) ) + "/members/" ) ) . getStatusCode ( ) ) . isEqualTo ( HttpStatus.SC_NOT_FOUND ) ; }
void onRebaseEdit ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { com.google.gerrit.client.change.EditActions.rebaseEdit ( getProject ( ) , changeId , publishEdit , rebaseEdit , deleteEdit ) ; }
public void matchesName ( ) throws java.lang.Exception { com.google.gitiles.IdentRevFilter filter = com.google.gitiles.IdentRevFilter.author ( "eSt" ) ; com.google.common.truth.Truth.assertThat ( filter.matchesPerson ( new org.eclipse.jgit.lib.PersonIdent ( "eSt" , "null@google.com" ) ) ) . isTrue ( ) ; com.google.common.truth.Truth.assertThat ( filter.matchesPerson ( new org.eclipse.jgit.lib.PersonIdent ( "eStablish" , "null@google.com" ) ) ) . isTrue ( ) ; com.google.common.truth.Truth.assertThat ( filter.matchesPerson ( new org.eclipse.jgit.lib.PersonIdent ( "teSt" , "null@google.com" ) ) ) . isTrue ( ) ; com.google.common.truth.Truth.assertThat ( filter.matchesPerson ( new org.eclipse.jgit.lib.PersonIdent ( "teSting" , "null@google.com" ) ) ) . isTrue ( ) ; }
public void onClose ( com.google.gwt.event.logical.shared.CloseEvent < com.google.gwt.user.client.ui.PopupPanel > event ) { if ( ( popup ) == p ) { button.removeStyleName ( style.selected ( ) ) ; popup = null ; } }
public static java.util.Set < java.lang.String > getChangedPaths ( org.eclipse.jgit.lib.Repository repo , org.eclipse.jgit.revwalk.RevCommit c , org.eclipse.jgit.revwalk.RevWalk revWalk ) throws java.io.IOException { java.util.Map < java.lang.String , org.eclipse.jgit.lib.ObjectId > content = com.googlesource.gerrit.plugins.uploadvalidator.CommitUtils.getChangedContent ( repo , c , revWalk ) ; return content.keySet ( ) ; }
void onAllRefsReplicatedToAllNodes ( int totalPushTasksCount ) { if ( totalPushTasksCount == 0 ) { return ; } writeStdOut ( "----------------------------------------------" ) ; if ( hasError.get ( ) ) { writeStdOut ( "Replication completed with some errors!" ) ; } else { writeStdOut ( "Replication completed successfully!" ) ; } }
public void onReplaceByKeys ( org.eclipse.jgit.lib.ObjectId oldNotesRev , org.eclipse.jgit.lib.ObjectId newNotesRev , com.google.gerrit.reviewdb.client.Account.Id accountId , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId.Key > toRemove , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId > toAdd ) { }
public com.google.gwtorm.server.Access < ? , ? > [ ] allRelations ( ) { throw new com.google.gerrit.testing.DisabledReviewDb.Disabled ( ) ; }
private static long initialDelay ( java.lang.String startTime , java.lang.String interval ) { return com.google.gerrit.server.config.ScheduleConfig.builder ( com.google.gerrit.server.config.ScheduleConfigTest.config ( startTime , interval ) , "section" ) . setSubsection ( "subsection" ) . setNow ( com.google.gerrit.server.config.ScheduleConfigTest.NOW ) . build ( ) . initialDelay ( ) ; }
private void setNew ( com.google.gerrit.server.git.CodeReviewCommit c , com.google.gerrit.reviewdb.client.ChangeMessage msg ) throws com.google.gerrit.server.project.NoSuchChangeException , java.io.IOException { sendMergeFail ( c.notes ( ) , msg , true ) ; }
public java.lang.String getDisplayString ( ) { return ( ( java.lang.String.valueOf ( change.legacyId ( ) . get ( ) ) ) + ": " ) + ( change.subject ( ) ) ; }
protected void add ( final com.google.gerrit.server.mail.RecipientType rt , final com.google.gerrit.client.reviewdb.Account.Id to ) { if ( rcptTo.add ( to ) ) { add ( rt , toAddress ( to ) ) ; } }
void deleteAll ( ) throws java.io.IOException { writer.deleteAll ( ) ; }
protected void onInitUI ( ) { super . onInitUI ( ) ; initName ( ) ; initOwner ( ) ; initDescription ( ) ; initGroupOptions ( ) ; initGroupType ( ) ; initMemberList ( ) ; initExternal ( ) ; }
public void evaluate ( ) throws java.lang.Throwable { boolean mem = ( description.getAnnotation ( com.google.gerrit.acceptance.UseLocalDisk.class ) ) == null ; beforeTest ( com.google.gerrit.acceptance.AbstractDaemonTest.config ( description ) , mem ) ; base.evaluate ( ) ; afterTest ( ) ; }
public < T extends com.google.gwt.core.client.JavaScriptObject > void put ( com.google.gwt.user.client.rpc.AsyncCallback < T > cb ) { send ( com.google.gwt.http.client.RequestBuilder.PUT , cb ) ; }
public void setRefStatePatterns ( java.lang.Iterable < byte [ ] > refStatePatterns ) { this . refStatePatterns = com.google.common.collect.ImmutableList.copyOf ( refStatePatterns ) ; }
private static boolean isValidParameterName ( java.lang.String name ) { return ( com.google.common.base.CharMatcher.javaLetterOrDigit ( ) . or ( com.google.common.base.CharMatcher.is ( '-' ) ) . matchesAllOf ( name ) ) && ( ! ( name.startsWith ( "-" ) ) ) ; }
private static boolean isModify ( com.google.gerrit.server.patch.PatchListEntry content ) { switch ( content.getChangeType ( ) ) { case MODIFIED : case COPIED : case RENAMED : case REWRITE : return true ; case ADDED : case DELETED : default : return false ; } }
public void testCreateChildProjectUnderNonExistingParent_UnprocessableEntity ( ) throws java.lang.Exception { com.google.gerrit.extensions.api.projects.ProjectInput in = new com.google.gerrit.extensions.api.projects.ProjectInput ( ) ; in.name = "newProjectName" ; in.parent = "non-existing-project" ; assertCreateFails ( in , com.google.gerrit.extensions.restapi.UnprocessableEntityException.class ) ; }
public boolean match ( java.lang.String ref , com.google.gerrit.server.CurrentUser user ) { return this . matcher.match ( ref , user ) ; }
public boolean isAllowGoogleAccountUpgrade ( ) { return getGerritConfig ( ) . getBoolean ( "auth" , "allowgoogleaccountupgrade" , false ) ; }
public com.google.gerrit.extensions.api.config.ConsistencyCheckInfo checkConsistency ( com.google.gerrit.extensions.api.config.ConsistencyCheckInput in ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return checkConsistency.get ( ) . apply ( new com.google.gerrit.server.config.ConfigResource ( ) , in ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot check consistency" , e ) ; } }
private void initProviderJce ( ) { setRandomFactory ( new org.apache.sshd.common.random.SingletonRandomFactory ( org.apache.sshd.common.random.JceRandomFactory.INSTANCE ) ) ; }
java.lang.Runnable toggleReviewed ( ) { return ( ) -> { reviewed.setValue ( ( ! ( reviewed.getValue ( ) ) ) , true ) ; } ; }
public void onOpen ( com.google.gwt.event.logical.shared.OpenEvent < com.google.gwt.user.client.ui.DisclosurePanel > event ) { activate ( patchSetId ) ; }
protected void init ( ) throws com.google.gerrit.server.mail.EmailException { super . init ( ) ; ccAllApprovals ( ) ; bccStarredBy ( ) ; includeWatchers ( NotifyType.ALL_COMMENTS ) ; }
boolean isStale ( ) { return ( time ) != ( com.google.gerrit.common.FileUtil.lastModified ( path ) ) ; }
public abstract com.google.gerrit.reviewdb.client.Change createChange ( com.google.gerrit.server.git.BatchUpdate.Context ctx ) throws java.io.IOException ;
private void put ( final com.google.gerrit.reviewdb.ActiveSession as ) throws com.google.gwtorm.client.OrmException { schema.activeSessions ( ) . upsert ( java.util.Arrays.asList ( as ) ) ; com.google.gerrit.server.util.FutureUtil.waitFor ( cache.putAsync ( as.getKey ( ) , as ) ) ; }
public java.util.List < com.google.gerrit.extensions.common.GroupInfo > apply ( com.google.gerrit.server.group.GroupResource rsrc ) throws com.google.gerrit.server.restapi.group.NotInternalGroupException , com.google.gwtorm.server.OrmException { com.google.gerrit.common.data.GroupDescription.Internal group = rsrc.asInternalGroup ( ) . orElseThrow ( NotInternalGroupException :: new ) ; return getDirectSubgroups ( group , rsrc.getControl ( ) ) ; }
public java.lang.String metaVar ( ) { return "N" ; }
boolean isDraft ( ) { return draft ; }
private void fetchRefsMetaConfig ( ) throws java.lang.Exception { git ( ) . fetch ( ) . setRefSpecs ( new org.eclipse.jgit.transport.RefSpec ( "refs/meta/config:refs/meta/config" ) ) . call ( ) ; testRepo.reset ( RefNames.REFS_CONFIG ) ; }
public java.util.List < com.google.gerrit.extensions.common.SuggestedReviewerInfo > apply ( com.google.gerrit.server.project.ProjectResource rsrc ) throws com.google.gerrit.extensions.restapi.BadRequestException , com.google.gwtorm.server.OrmException , java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { return reviewersUtil.suggestReviewers ( null , this , rsrc.getProjectState ( ) , getVisibility ( rsrc ) , true ) ; }
private static java.lang.String queryIncoming ( java.lang.String who ) { return ( ( ( ( ( "is:open ((reviewer:" + who ) + " -owner:" ) + who ) + " -star:ignore) OR assignee:" ) + who ) + ")" ; }
private void removeAllChildren ( com.google.gwt.dom.client.Element el ) { for ( int i = ( com.google.gwt.user.client.DOM.getChildCount ( el ) ) - 1 ; i >= 0 ; i -- ) { el.removeChild ( com.google.gwt.user.client.DOM.getChild ( el , i ) ) ; } }
private java.lang.String pushTagForExistingCommit ( com.google.gerrit.acceptance.rest.project.PushTagIT.TagType tagType , org.eclipse.jgit.transport.RemoteRefUpdate.Status expectedStatus ) throws java.lang.Exception { return pushTag ( tagType , null , false , false , expectedStatus ) ; }
private java.util.Collection < com.google.gerrit.reviewdb.client.AccountExternalId > getExternalIds ( com.google.gerrit.acceptance.TestAccount account ) throws java.lang.Exception { return accountCache.get ( account.getId ( ) ) . getExternalIds ( ) ; }
private com.cisco.gerrit.plugins.slack.config.ProjectConfig getConfig ( boolean publishOnPatchSetCreated , boolean ignoreUnchangedPatchSet , boolean ignoreWorkInProgressPatchSet , boolean ignorePrivatePatchSet ) throws java.lang.Exception { return getConfig ( "^WIP.*" , publishOnPatchSetCreated , ignoreUnchangedPatchSet , ignoreWorkInProgressPatchSet , ignorePrivatePatchSet ) ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { new com.google.gerrit.client.auth.openid.OpenIdSignInDialog ( SignInDialog.Mode.LINK_IDENTIY , null ) . center ( ) ; }
protected void expand ( final com.google.gerrit.client.ui.CommentPanel w ) { w.setOpen ( w.isRecent ( ) ) ; }
protected void configureServlets ( ) { rpc ( com.google.gerrit.httpd.rpc.patch.PatchDetailServiceImpl.class ) ; }
default java.lang.String closestMatch ( @ javax.annotation.Nonnull final java.lang.String baseBranch , @ javax.annotation.Nonnull final java.lang.String branchOptionOne , @ javax.annotation.Nonnull final java.lang.String branchOptionTwo ) { return ( org.apache.commons.lang.StringUtils.getLevenshteinDistance ( branchOptionOne , baseBranch ) ) > ( org.apache.commons.lang.StringUtils.getLevenshteinDistance ( branchOptionTwo , baseBranch ) ) ? branchOptionTwo : branchOptionOne ; }
public void onClick ( final com.google.gwt.user.client.ui.Widget sender ) { showAddKeyBlock ( false ) ; }
public void afterTest ( ) { com.google.gerrit.testing.NoteDbMode.resetFromEnv ( notesMigration ) ; }
protected void configure ( ) { bind ( com.google.gerrit.server.ssh.SshKeyCache.class ) . to ( com.google.gerrit.server.ssh.NoSshKeyCache.class ) ; bind ( com.google.gerrit.server.ssh.SshKeyCreator.class ) . to ( com.google.gerrit.server.ssh.NoSshKeyCache.class ) ; }
protected abstract org.eclipse.jgit.lib.CommitBuilder applyImpl ( org.eclipse.jgit.lib.ObjectInserter ins ) throws com.google.gwtorm.server.OrmException , java.io.IOException ;
private com.google.gerrit.reviewdb.server.ReviewDb openUnderlyingReviewDb ( com.google.gerrit.acceptance.pgm.ServerContext ctx ) throws java.lang.Exception { return ctx.getInjector ( ) . getInstance ( com.google.inject.Key.get ( new com.google.inject.TypeLiteral < com.google.gwtorm.server.SchemaFactory < com.google.gerrit.reviewdb.server.ReviewDb > > ( ) { } , com.google.gerrit.server.schema.ReviewDbFactory.class ) ) . open ( ) ; }
protected void preDisplay ( final com.google.gerrit.client.admin.GroupDetail result ) { display ( result ) ; }
public com.google.gerrit.extensions.common.EmailInfo apply ( com.google.gerrit.server.account.AccountResource.Email rsrc ) { com.google.gerrit.extensions.common.EmailInfo e = new com.google.gerrit.extensions.common.EmailInfo ( ) ; e.email = rsrc.getEmail ( ) ; e.preferred ( rsrc.getUser ( ) . getAccount ( ) . getPreferredEmail ( ) ) ; return e ; }
private static com.google.gerrit.reviewdb.client.Project.InheritableBoolean asInheritableBoolean ( java.sql.ResultSet rs , java.lang.String col ) throws java.sql.SQLException { return "Y" . equals ( rs.getString ( col ) ) ? com.google.gerrit.reviewdb.client.Project.InheritableBoolean.TRUE : com.google.gerrit.reviewdb.client.Project.InheritableBoolean.INHERIT ; }
public void stop ( ) { indexManager.stop ( ) ; for ( com.google.gerrit.index.IndexDefinition < ? , ? , ? > def : defs ) { def.getIndexCollection ( ) . stop ( ) ; } }
public void onRefresh ( ) { getApp ( ) . getQueryHandler ( ) . reset ( ) ; loadAndDisplay ( true ) ; }
protected void doGet ( javax.servlet.http.HttpServletRequest req , javax.servlet.http.HttpServletResponse res ) throws java.io.IOException { renderHtml ( req , res , "gitiles.repositoryIndex" , buildData ( req ) ) ; }
public void testChangeEventShouldBeSentToExecutor ( ) { asyncListener.onEvent ( event ) ; org.mockito.Mockito.verify ( executor ) . submit ( org.mockito.Matchers.any ( ChangeListenerAsyncDecorator.ChangeRunner.class ) ) ; }
public com.googlesource.gerrit.plugins.xdocs.ConfigSection getFormatterConfig ( java.lang.String formatterName ) { return new com.googlesource.gerrit.plugins.xdocs.ConfigSection ( cfg , com.googlesource.gerrit.plugins.xdocs.XDocGlobalConfig.SECTION_FORMATTER , formatterName ) ; }
private java.lang.String getFullCommandLine ( ) { if ( commandPrefix.isEmpty ( ) ) return commandLine ; else if ( commandLine.isEmpty ( ) ) return commandPrefix ; else return ( ( commandPrefix ) + " " ) + ( commandLine ) ; }
com.google.gerrit.client.diff.LineMapper.LineOnOtherInfo lineOnOther ( com.google.gerrit.client.diff.DisplaySide side , int line ) { return chunkManager.getLineMapper ( ) . lineOnOther ( side , line ) ; }
public < T extends com.google.gwt.core.client.JavaScriptObject > void put ( com.google.gwt.user.client.rpc.AsyncCallback < T > cb ) { put ( com.google.gerrit.client.rpc.RestApi.wrap ( cb ) ) ; }
private void createReplyEditor ( ) { final com.google.gerrit.reviewdb.client.PatchLineComment newComment = newComment ( ) ; newComment.setMessage ( "" ) ; findOrCreateEditor ( newComment , true ) . setFocus ( true ) ; }
void changeProjectAccess ( com.google.gerrit.reviewdb.client.Project.NameKey projectName , java.lang.String baseRevision , java.lang.String message , java.util.List < com.google.gerrit.common.data.AccessSection > sections , com.google.gerrit.reviewdb.client.Project.NameKey parentProjectName , com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.ProjectAccess > callback ) ;
void resizeCodeMirror ( ) { if ( ! ( prefs.renderEntireFile ( ) ) ) { int height = getCodeMirrorHeight ( ) ; cmA.setHeight ( height ) ; cmB.setHeight ( height ) ; diffTable.sidePanel.adjustGutters ( cmB ) ; } }
public void onFailure ( java.lang.Throwable caught ) { enableButtons ( true ) ; super . onFailure ( caught ) ; }
public void schemaThrowsExceptionWhenLookingUpForChange ( ) throws java.lang.Exception { setupPostMocks ( com.ericsson.gerrit.plugins.syncindex.SyncIndexRestApiServletTest.CHANGE_EXISTS , com.ericsson.gerrit.plugins.syncindex.SyncIndexRestApiServletTest.THROW_ORM_EXCEPTION ) ; syncIndexRestApiServlet.doPost ( req , rsp ) ; org.mockito.Mockito.verify ( rsp ) . sendError ( javax.servlet.http.HttpServletResponse.SC_NOT_FOUND , "Error trying to find a change \n" ) ; }
public com.google.gerrit.extensions.common.WebLinkInfo getBranchWebLink ( java.lang.String projectName , java.lang.String branchName ) { return new com.google.gerrit.extensions.common.WebLinkInfo ( name , myImageUrl , java.lang.String.format ( placeHolderUrlProjectBranch , projectName , branchName ) , Target.BLANK ) ; }
static java.nio.file.Path getDir ( com.google.gerrit.server.config.SitePaths sitePaths , java.lang.String prefix , com.google.gerrit.server.index.Schema < ? > schema ) { return sitePaths.index_dir.resolve ( java.lang.String.format ( "%s%04d" , prefix , schema.getVersion ( ) ) ) ; }
private java.lang.String newChange2 ( org.eclipse.jgit.api.Git git , org.eclipse.jgit.lib.PersonIdent ident ) throws java.lang.Exception { com.google.gerrit.acceptance.PushOneCommit push = pushFactory.create ( db , ident , PushOneCommit.SUBJECT , com.google.gerrit.acceptance.edit.ChangeEditIT.FILE_NAME , new java.lang.String ( com.google.gerrit.acceptance.edit.ChangeEditIT.CONTENT_OLD ) ) ; return push.rm ( git , "refs/for/master" ) . getChangeId ( ) ; }
private int reductionLimit ( com.googlecode.prolog_cafe.lang.Predicate goal ) { if ( ( goal.getClass ( ) ) == ( com.google.gerrit.rules.PrologEnvironment.Args.CONSULT_STREAM_2 ) ) { return compileLimit ; } return reductionLimit ; }
private org.eclipse.jgit.lib.CommitBuilder newCommitBuilder ( ) { org.eclipse.jgit.lib.CommitBuilder cb = new org.eclipse.jgit.lib.CommitBuilder ( ) ; org.eclipse.jgit.lib.PersonIdent author = new org.eclipse.jgit.lib.PersonIdent ( "J. Author" , "author@example.com" , com.google.gerrit.common.TimeUtil.nowTs ( ) , com.google.gerrit.server.git.VersionedMetaDataTest.TZ ) ; cb.setAuthor ( author ) ; cb.setCommitter ( new org.eclipse.jgit.lib.PersonIdent ( "M. Committer" , "committer@example.com" , author.getWhen ( ) , author.getTimeZone ( ) ) ) ; return cb ; }
protected static boolean isNoSuchEntity ( java.lang.Throwable caught ) { return ( com.google.gerrit.client.rpc.RestApi.isNotFound ( caught ) ) || ( ( caught instanceof com.google.gwtjsonrpc.client.RemoteJsonException ) && ( caught.getMessage ( ) . equals ( NoSuchEntityException.MESSAGE ) ) ) ; }
public java.util.List < com.google.gerrit.server.query.change.ChangeData > apply ( com.google.gerrit.server.query.QueryResult < com.google.gerrit.server.query.change.ChangeData > in ) { return in.entities ( ) ; }
public static java.lang.String toAccountDashboard ( final com.google.gerrit.client.data.AccountInfo acct ) { return com.google.gerrit.client.Link.toAccountDashboard ( acct.getId ( ) ) ; }
public com.google.gerrit.lucene.ChangeSubIndex getClosedChangesIndex ( ) { return closedIndex ; }
public void configure ( ) { listener ( ) . to ( com.google.gerrit.server.config.MasterNodeStartup.Lifecycle.class ) ; }
public com.google.gerrit.sshd.SshKeyCacheImpl.EntryList missing ( com.google.gerrit.sshd.SshKeyCacheImpl.Username username ) { java.util.Collection < com.google.gerrit.sshd.SshKeyCacheEntry > none = java.util.Collections.emptyList ( ) ; return new com.google.gerrit.sshd.SshKeyCacheImpl.EntryList ( com.google.gerrit.sshd.SshKeyCacheImpl.EntryList.Type.INVALID_USER , none ) ; }
protected void configure ( ) { bind ( java.nio.file.Path.class ) . annotatedWith ( com.google.gerrit.server.config.SitePath.class ) . toInstance ( getSitePath ( ) ) ; bind ( com.google.gerrit.server.config.SitePaths.class ) ; }
protected void preDisplay ( com.google.gerrit.client.projects.ConfigInfoCache.Entry result ) { commentLinkProcessor = result.getCommentLinkProcessor ( ) ; setTheme ( result.getTheme ( ) ) ; com.google.gerrit.client.diff.DiffInfo diffInfo = diff ; diff = null ; display ( diffInfo ) ; }
public java.lang.String toString ( ) { java.lang.String ret = ( type ) + "" ; if ( ( message ) != null ) { ret += " " + ( message ) ; } return ret ; }
public java.util.Set < java.lang.String > getHashtags ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return getHashtags.apply ( change ) . value ( ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot get hashtags" , e ) ; } }
public static void invalidate ( final java.lang.String username ) { synchronized ( com.google.gerrit.server.ssh.SshUtil.keys ) { com.google.gerrit.server.ssh.SshUtil.keys.remove ( username ) ; } }
public static void deleteDraft ( @ com.google.gerrit.common.Nullable java.lang.String project , com.google.gerrit.reviewdb.client.PatchSet.Id id , java.lang.String draftId , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwt.core.client.JavaScriptObject > cb ) { com.google.gerrit.client.changes.CommentApi.revision ( project , id , "drafts" ) . id ( draftId ) . delete ( cb ) ; }
public void setFullName ( final java.lang.String name ) { fullName = ( name != null ) ? name.trim ( ) : null ; }
public com.googlecode.prolog_cafe.lang.NumberTerm add ( com.googlecode.prolog_cafe.lang.NumberTerm t ) { if ( t instanceof com.googlecode.prolog_cafe.lang.DoubleTerm ) return t.add ( this ) ; return new com.googlecode.prolog_cafe.lang.IntegerTerm ( ( ( this . val ) + ( t.intValue ( ) ) ) ) ; }
void setReplyToBox ( com.google.gerrit.client.diff.PublishedBox box ) { replyToBox = box ; }
public java.lang.Object apply ( com.google.gerrit.server.change.ReviewerResource reviewerResource ) throws com.google.gwtorm.server.OrmException { return json.format ( reviewerResource ) ; }
public static < T > com.google.inject.binder.LinkedBindingBuilder < T > bind ( com.google.inject.Binder binder , java.lang.Class < T > type ) { binder.disableCircularProxies ( ) ; return com.google.gerrit.extensions.registration.DynamicSet.bind ( binder , com.google.inject.TypeLiteral.get ( type ) ) ; }
public void parseMissingSha ( ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( parser.parse ( "deadbeef" ) ) . isNull ( ) ; com.google.common.truth.Truth.assertThat ( parser.parse ( "deadbeefdeadbeefdeadbeefdeadbeefdeadbeef" ) ) . isNull ( ) ; }
void visibleProjectDetails ( com.google.gwtjsonrpc.common.AsyncCallback < java.util.List < com.google.gerrit.common.data.ProjectDetail > > callback ) ;
private java.lang.String getComment ( com.google.gerrit.server.data.ChangeAttribute change , com.google.gerrit.server.events.ChangeEvent hook , com.google.gerrit.server.data.AccountAttribute who , java.lang.String what ) { return ( ( ( ( ( getCommentPrefix ( change ) ) + "change " ) + what ) + " [by " ) + ( formatAccountAttribute ( who ) ) ) + "]" ; }
private static int checkLimit ( int limit , java.lang.String name , int defaultValue ) { if ( limit == 0 ) { return defaultValue ; } com.google.common.base.Preconditions.checkArgument ( ( limit > 0 ) , "%s must be positive: %s" , name , limit ) ; return limit ; }
public java.util.Set < com.google.gerrit.reviewdb.AccountGroup.UUID > getEffectiveGroups ( ) { return java.util.Collections.singleton ( AccountGroup.ANONYMOUS_USERS ) ; }
private void configureRequestScope ( ) { }
protected void configureServlets ( ) { serve ( "/login" , "/login/*" ) . with ( com.google.gerrit.httpd.auth.ldap.LdapLoginServlet.class ) ; }
protected java.lang.String getName ( ) { return hook.getFileName ( ) . toString ( ) ; }
public static com.google.gerrit.client.rpc.RestApi drafts ( @ com.google.gerrit.common.Nullable java.lang.String project , int id ) { return com.google.gerrit.client.changes.ChangeApi.call ( project , id , "drafts" ) ; }
public int weigh ( com.google.gerrit.server.change.MergeabilityCache.EntryKey k , java.lang.Boolean v ) { return ( ( 16 + ( 2 * ( 16 + 20 ) ) ) + ( 3 * 8 ) ) + 8 ; }
public java.nio.file.Path targetPath ( com.google.gerrit.httpd.raw.BazelBuild.Label l ) { return sourceRoot.resolve ( "bazel-bin" ) . resolve ( l.pkg ) . resolve ( l.name ) ; }
public void assertCanDelete ( com.google.gerrit.server.project.ProjectResource rsrc ) throws com.googlesource.gerrit.plugins.deleteproject.CannotDeleteProjectException { assertIsNotAllProjects ( rsrc ) ; assertHasNoChildProjects ( rsrc ) ; }
protected void configureServlets ( ) { install ( new com.ericsson.gerrit.plugins.multimaster.forwarder.rest.EventForwarderServletModule ( ) ) ; }
private boolean canPushWithForce ( ) { if ( ( RefNames.REFS_CONFIG.equals ( refName ) ) && ( ! ( projectControl.isOwner ( ) ) ) ) { return false ; } return canPerform ( Permission.PUSH , false , true ) ; }
public static java.util.List < com.google.gerrit.pgm.init.InitPlugins.PluginData > listPlugins ( com.google.gerrit.server.config.SitePaths site , com.google.gerrit.pgm.init.PluginsDistribution pluginsDistribution ) throws java.io.IOException { return com.google.gerrit.pgm.init.InitPlugins.listPlugins ( site , false , pluginsDistribution ) ; }
protected void formatChange ( ) { appendText ( getNameFor ( fromId ) ) ; appendText ( ( ( " has abandoned change " + ( change.getKey ( ) . abbreviate ( ) ) ) + ":\n" ) ) ; appendText ( "\n" ) ; formatCoverLetter ( ) ; }
private com.googlesource.gerrit.plugins.replication.ReplicationFileBasedConfig loadConfig ( ) throws java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { return new com.googlesource.gerrit.plugins.replication.ReplicationFileBasedConfig ( injector , site , remoteSiteUserFactory , pluginUser , gitRepositoryManager , groupBackend , stateLog , groupIncludeCache ) ; }
public boolean isOwner ( ) { return ( ( isDeclaredOwner ( ) ) && ( ! ( controlForRef ( "refs/*" ) . isBlocked ( Permission.OWNER ) ) ) ) || ( user.getCapabilities ( ) . canAdministrateServer ( ) ) ; }
public Response.Action getDownloadAction ( org.eclipse.jgit.lfs.lib.AnyLongObjectId id ) { org.eclipse.jgit.lfs.server.Response.Action action = super . getDownloadAction ( id ) ; com.googlesource.gerrit.plugins.lfs.fs.LfsFsRequestAuthorizer.AuthInfo authInfo = authorizer.generateAuthInfo ( com.googlesource.gerrit.plugins.lfs.fs.LocalLargeFileRepository.DOWNLOAD , id , expirationSeconds ) ; return new com.googlesource.gerrit.plugins.lfs.fs.LocalLargeFileRepository.ExpiringAction ( action.href , authInfo ) ; }
private < T > void failure ( com.google.gerrit.client.rpc.CallbackGroup.CallbackGlue w , java.lang.Throwable caught ) { if ( ! ( failed ) ) { failed = true ; failedThrowable = caught ; } remaining.remove ( w ) ; apply ( ) ; }
public static org.apache.lucene.index.Term idTerm ( com.google.gerrit.server.query.change.ChangeData cd ) { return com.google.gerrit.lucene.QueryBuilder.intTerm ( com.google.gerrit.server.index.ChangeField.LEGACY_ID2.getName ( ) , cd.getId ( ) . get ( ) ) ; }
public void onSignOut ( com.google.gerrit.client.SignOutEvent event ) ;
public void listenTo ( final com.google.gwt.user.client.ui.CheckBox cb ) { cb.addValueChangeHandler ( ( ( com.google.gwt.event.logical.shared.ValueChangeHandler ) ( this ) ) ) ; }
public com.google.gerrit.server.config.AllProjectsName get ( ) { return name ; }
void visibleProjectDetails ( com.google.gwtjsonrpc.common.AsyncCallback < java.util.List < com.google.gerrit.common.data.ProjectDetail > > callback ) ;
public boolean isLegacySubmit ( ) { return LabelId.LEGACY_SUBMIT_NAME.equals ( getLabel ( ) ) ; }
public < T extends com.google.gwt.core.client.JavaScriptObject > void delete ( com.google.gwt.user.client.rpc.AsyncCallback < T > cb ) { send ( com.google.gwt.http.client.RequestBuilder.DELETE , cb ) ; }
private static org.apache.lucene.index.Term intTerm ( java.lang.String name , int value ) { org.apache.lucene.util.BytesRefBuilder builder = new org.apache.lucene.util.BytesRefBuilder ( ) ; org.apache.lucene.util.NumericUtils.intToPrefixCodedBytes ( value , 0 , builder ) ; return new org.apache.lucene.index.Term ( name , builder.get ( ) ) ; }
private void expandSideAll ( ) { clearMarkerAndWidget ( ) ; removeFromParent ( ) ; updateSelection ( ) ; }
public void testAcrossNewline ( ) { com.google.gerrit.client.diff.EditIterator iter = new com.google.gerrit.client.diff.EditIterator ( lines , 0 ) ; assertLineChsEqual ( net.codemirror.lib.Pos.create ( 1 , 1 ) , iter.advance ( 5 ) ) ; }
private void addExtensionPoint ( com.google.gerrit.client.GerritUiExtensionPoint extensionPoint , com.google.gwt.user.client.ui.Panel p , com.google.gerrit.client.info.ChangeInfo change ) { com.google.gerrit.client.api.ExtensionPanel extensionPanel = new com.google.gerrit.client.api.ExtensionPanel ( extensionPoint ) ; extensionPanel.putObject ( GerritUiExtensionPoint.Key.CHANGE_INFO , change ) ; p.add ( extensionPanel ) ; }
void resizeCodeMirror ( ) { int height = ( header.getOffsetHeight ( ) ) + ( getDiffTable ( ) . getHeaderHeight ( ) ) ; for ( net.codemirror.lib.CodeMirror cm : getCms ( ) ) { cm.adjustHeight ( height ) ; } }
public void onSuccess ( com.google.gerrit.client.rpc.NativeString newPassword ) { display ( newPassword.asString ( ) ) ; }
public static org.eclipse.jgit.lib.Config defaultConfig ( ) { org.eclipse.jgit.lib.Config config = new org.eclipse.jgit.lib.Config ( ) ; config.setBoolean ( com.google.gerrit.server.notedb.NotesMigration.SECTION_NOTE_DB , com.google.gerrit.server.notedb.NoteDbTable.GROUPS.key ( ) , com.google.gerrit.server.notedb.NotesMigration.READ , false ) ; return config ; }
protected void init ( ) throws com.google.gerrit.server.mail.EmailException { super . init ( ) ; ccAllApprovals ( ) ; bccStarredBy ( ) ; bccWatches ( NotifyType.ALL_COMMENTS ) ; bccWatches ( NotifyType.SUBMITTED_CHANGES ) ; }
private void copyNewLib ( com.google.gerrit.server.config.SitePaths sitePaths , java.nio.file.Path newSecureStorePath ) throws java.io.IOException { com.google.gerrit.pgm.SwitchSecureStore.log.info ( "Copy new SecureStore ({}) into lib/ directory" , newSecureStorePath.getFileName ( ) ) ; java.nio.file.Files.copy ( newSecureStorePath , sitePaths.lib_dir.resolve ( newSecureStorePath.getFileName ( ) ) ) ; }
public java.lang.Integer apply ( com.google.gerrit.server.git.ReceiveCommits.ReplaceRequest in ) { return in.notes.getChangeId ( ) . get ( ) ; }
private static java.lang.String now ( ) { return new java.text.SimpleDateFormat ( "YYYYMMdd:HHmm" ) . format ( new java.util.Date ( ) ) ; }
public void visit ( org.pegdown.ast.AutoLinkNode node ) { java.lang.String url = node.getText ( ) ; html.open ( "a" ) . attribute ( "href" , href ( url ) ) . appendAndEscape ( url ) . close ( "a" ) ; }
public void onOpen ( com.google.gwt.event.logical.shared.OpenEvent < com.google.gwt.user.client.ui.DisclosurePanel > event ) { com.google.gerrit.client.changes.PatchSetComplexDisclosurePanel patchSetPanel = patchSetPanels.get ( patchSetId ) ; patchSetPanel.refresh ( ) ; activate ( patchSetId ) ; }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > putAsync ( K key , V value ) { return self.putAsync ( key , value ) ; }
public java.lang.Void call ( ) throws java.lang.Exception { rebuild ( change , bru , bruForDrafts , changeRepo , allUsersRepo ) ; return null ; }
public void onFailure ( final java.lang.Throwable caught ) { info.getWatch ( ) . setNotify ( type , oldVal ) ; cbox.setValue ( oldVal ) ; super . onFailure ( caught ) ; }
public com.google.gerrit.reviewdb.Change update ( com.google.gerrit.reviewdb.Change change ) { if ( change.getStatus ( ) . isOpen ( ) ) { change.nextPatchSetId ( ) ; change.setLastSha1MergeTested ( null ) ; return change ; } else { return null ; } }
public void handle ( net.codemirror.lib.CodeMirror cm ) { setClean ( cm.isClean ( generation ) ) ; }
public void cache ( final com.google.gerrit.reviewdb.Change c ) { changeOpen = c.open ; changeSortKey = c.sortKey ; changeSortKeyDesc = c.sortKeyDesc ; }
public com.google.gerrit.index.FieldDef < T , ? > getField ( ) { return field ; }
void doinc ( ) { mv.visitInsn ( com.google.gwtorm.protobuf.IADD ) ; mv.visitVarInsn ( com.google.gwtorm.protobuf.ISTORE , sizeVar ) ; }
public byte [ ] update ( byte [ ] oldData ) { if ( oldData != null ) { throw new com.google.gwtorm.nosql.generic.GenericSchema.KeyExists ( ) ; } return newData ; }
public void preDisplay ( com.google.gerrit.client.info.GeneralPreferences prefs ) { display ( prefs ) ; }
protected void onMovePointerTo ( java.lang.String projectName ) { if ( ( ! ( projectsPopup.isPoppingUp ( ) ) ) || ( "" . equals ( nameBox.getText ( ) ) ) ) { nameBox.setText ( projectName ) ; } }
public void remove ( ) { m.remove ( name.value ( ) , commandProvider ) ; }
public void writeTo ( java.io.OutputStream out ) throws java.io.IOException { java.util.zip.GZIPOutputStream gz = new java.util.zip.GZIPOutputStream ( out ) ; src.writeTo ( gz ) ; gz.finish ( ) ; gz.flush ( ) ; }
public boolean matches ( com.google.gerrit.server.account.externalids.ExternalId extId ) { return matches ( extId.key ( ) . get ( ) ) ; }
static java.nio.file.Path getDir ( com.google.gerrit.server.config.SitePaths sitePaths , java.lang.String name , com.google.gerrit.server.index.Schema < ? > schema ) { return sitePaths.index_dir.resolve ( java.lang.String.format ( "%s_%04d" , name , schema.getVersion ( ) ) ) ; }
public boolean apply ( com.google.gerrit.extensions.api.projects.CommentLinkInfo input ) { return input.name.equals ( commentlinkName ) ; }
public void onSuccess ( final com.google.gerrit.common.data.AccountProjectWatchInfo result ) { addNew.setEnabled ( true ) ; nameBox.setEnabled ( true ) ; filterTxt.setEnabled ( true ) ; nameTxt.setText ( "" ) ; watchesTab.insertWatch ( result ) ; }
static com.google.gerrit.server.config.ScheduleConfig.Schedule create ( long interval , long initialDelay ) { return new com.google.gerrit.server.config.AutoValue_ScheduleConfig_Schedule ( interval , initialDelay ) ; }
public void start ( ) { if ( replicateOnStartup ) { pushAll.create ( null ) . start ( 30 , java.util.concurrent.TimeUnit.SECONDS ) ; } submit.create ( ) . start ( 15 , java.util.concurrent.TimeUnit.SECONDS ) ; }
void close ( ) { try { ds.close ( ) ; } catch ( java.sql.SQLException e ) { com.ericsson.gerrit.plugins.eventslog.sql.SQLClient.log.warn ( "Cannot close datasource" , e ) ; } }
private void assertNotFound ( org.eclipse.jgit.lib.ObjectId id ) throws java.lang.Exception { userRestSession.get ( ( ( ( "/projects/" + ( project.get ( ) ) ) + "/commits/" ) + ( id.name ( ) ) ) ) . assertNotFound ( ) ; }
public org.parboiled.Rule [ ] blockPluginRules ( ) { return new org.parboiled.Rule [ ] { cols ( ) , hr ( ) , iframe ( ) , note ( ) , toc ( ) } ; }
public < T extends com.google.gwt.core.client.JavaScriptObject > void post ( com.google.gwt.core.client.JavaScriptObject content , com.google.gwt.user.client.rpc.AsyncCallback < T > cb ) { post ( content , com.google.gerrit.client.rpc.RestApi.wrap ( cb ) ) ; }
public void validKey ( ) throws java.lang.Exception { assertNoProblems ( com.google.gerrit.gpg.testing.TestKeys.validKeyWithoutExpiration ( ) ) ; }
java.lang.String getProjectDescription ( com.google.gerrit.reviewdb.client.Project.NameKey name ) throws java.io.IOException , org.eclipse.jgit.errors.RepositoryNotFoundException ;
public void extend ( org.commonmark.parser.Parser.Builder builder ) { builder.customDelimiterProcessor ( new com.google.gitiles.doc.SmartQuotedExtension.QuotedProcessor ( Type.SINGLE , '\'' ) ) ; builder.customDelimiterProcessor ( new com.google.gitiles.doc.SmartQuotedExtension.QuotedProcessor ( Type.DOUBLE , '"' ) ) ; }
public void testBadEventAndNotForwarded ( ) throws java.lang.Exception { setUpMocks ( false ) ; eventHandler.onEvent ( event ) ; org.mockito.Mockito.verifyZeroInteractions ( eventForwarder ) ; }
boolean isModified ( java.nio.file.Path jar ) { return ( snapshot.lastModified ( ) ) != ( com.google.gerrit.common.FileUtil.lastModified ( jar ) ) ; }
public void setAssignee ( com.google.gerrit.reviewdb.client.Account.Id assignee ) { com.google.common.base.Preconditions.checkArgument ( ( assignee != null ) , "use removeAssignee" ) ; this . assignee = com.google.common.base.Optional.of ( assignee ) ; }
public void onShowView ( ) { super . onShowView ( ) ; if ( ( subname ) != null ) { filterTxt.setCursorPos ( subname.length ( ) ) ; } filterTxt.setFocus ( true ) ; }
public void invalidNonceNotChecked ( ) throws java.lang.Exception { checker = newChecker ( false ) ; org.eclipse.jgit.transport.PushCertificate cert = newSignedCert ( "invalid-nonce" , com.google.gerrit.gpg.testing.TestKeys.validKeyWithoutExpiration ( ) ) ; assertNoProblems ( cert ) ; }
public void setDateHeader ( java.lang.String name , long value ) { setHeader ( name , java.lang.Long.toString ( value ) ) ; }
public void basicTextFormattingWorks ( ) throws java.io.IOException { java.lang.String raw = "_italic_ *bold* `monospace`" ; java.lang.String formatted = "<div class=\"paragraph\">\n<p><em>italic</em> <strong>bold</strong> <code>monospace</code></p>\n</div>" ; org.junit.Assert.assertEquals ( formatted , formatter.format ( null , null , null , null , cfg , raw ) ) ; }
public void subsetOfBranchesVisibleIncludingHead ( ) throws java.lang.Exception { allow ( Permission.READ , com.google.gerrit.server.group.SystemGroupBackend.REGISTERED_USERS , "refs/heads/master" ) ; deny ( Permission.READ , com.google.gerrit.server.group.SystemGroupBackend.REGISTERED_USERS , "refs/heads/branch" ) ; assertRefs ( "HEAD" , "refs/changes/01/1/1" , "refs/changes/01/1/meta" , "refs/heads/master" , "refs/tags/master-tag" ) ; }
public final void downloadCommand ( com.google.gerrit.extensions.client.GeneralPreferencesInfo.DownloadCommand d ) { downloadCommandRaw ( ( d != null ? d.toString ( ) : null ) ) ; }
public boolean dryRun ( final com.google.gerrit.server.git.CodeReviewCommit mergeTip , final com.google.gerrit.server.git.CodeReviewCommit toMerge ) throws com.google.gerrit.server.git.MergeException { return com.google.gerrit.server.git.MergeUtil.canCherryPick ( args.mergeSorter , args.repo , args.useContentMerge , mergeTip , args.rw , toMerge ) ; }
public static int getOpenFiles ( ) { return org.eclipse.jgit.internal.storage.file.WindowCache.getInstance ( ) . getOpenFiles ( ) ; }
public void onSuccess ( final com.google.gwtjsonrpc.common.VoidResult result ) { if ( ( ++ ( done ) ) == ( commentEditors.size ( ) ) ) { onSend2 ( submit ) ; } }
public com.google.gerrit.server.project.ProjectState getProjectState ( ) { return control.getProjectState ( ) ; }
protected abstract void configureCommands ( ) ;
public void setSecure ( java.lang.String name , java.lang.String value ) { if ( value != null ) { secureStore.set ( section , subsection , name , value ) ; } else { secureStore.unset ( section , subsection , name ) ; } }
private static com.google.gerrit.server.git.PerThreadRequestScope.Context requireContext ( ) { final com.google.gerrit.server.git.PerThreadRequestScope.Context ctx = com.google.gerrit.server.git.PerThreadRequestScope.current.get ( ) ; if ( ctx == null ) { throw new com.google.inject.OutOfScopeException ( "Not in command/request" ) ; } return ctx ; }
public void linkifyMessageNoMatch ( ) throws java.lang.Exception { com.google.gitiles.Linkifier l = new com.google.gitiles.Linkifier ( TestGitilesUrls.URLS ) ; org.junit.Assert.assertEquals ( com.google.common.collect.ImmutableList.of ( com.google.common.collect.ImmutableMap.of ( "text" , "some message text" ) ) , l.linkify ( com.google.gitiles.FakeHttpServletRequest.newRequest ( ) , "some message text" ) ) ; }
public void deactivateSelf ( ) throws java.lang.Exception { exception.expect ( com.google.gerrit.extensions.restapi.ResourceConflictException.class ) ; exception.expectMessage ( "cannot deactivate own account" ) ; gApi.accounts ( ) . self ( ) . setActive ( false ) ; }
public void mergeFrom ( com.google.protobuf.ByteString buf , T obj ) { try { mergeFrom ( buf.newCodedInput ( ) , obj ) ; } catch ( java.io.IOException err ) { throw new java.lang.RuntimeException ( "Cannot decode message" , err ) ; } }
private static void dispatchHistoryHooks ( final java.lang.String historyToken ) { final java.lang.String url = ( ( com.google.gwt.user.client.Window.Location.getPath ( ) ) + "#" ) + historyToken ; for ( final com.google.gwt.core.client.JavaScriptObject hook : com.google.gerrit.client.Gerrit.historyHooks ) { com.google.gerrit.client.Gerrit.callHistoryHook ( hook , url ) ; } }
public void setNonExistingParent_UnprocessibleEntity ( ) throws java.lang.Exception { com.google.gerrit.acceptance.RestResponse r = adminRestSession.put ( ( ( "/projects/" + ( project.get ( ) ) ) + "/parent" ) , newParentInput ( "non-existing" ) ) ; r.assertUnprocessableEntity ( ) ; r.consume ( ) ; }
public java.util.Collection < com.google.gerrit.client.reviewdb.ProjectRight > getLocalRights ( ) { return rights ; }
java.lang.String groupMemberPattern ( ) { return "(|(memberUid=${username})(gidNumber=${gidNumber}))" ; }
private org.eclipse.jgit.revwalk.RevCommit getRemoteHead ( ) throws java.io.IOException { try ( org.eclipse.jgit.lib.Repository repo = repoManager.openRepository ( project ) ; org.eclipse.jgit.revwalk.RevWalk rw = new org.eclipse.jgit.revwalk.RevWalk ( repo ) ) { return rw.parseCommit ( repo.exactRef ( "refs/heads/master" ) . getObjectId ( ) ) ; } }
public void unblockMoreSpecificRefInLocal_Fails ( ) { com.google.gerrit.server.project.testing.Util.block ( parent , com.google.gerrit.common.data.Permission.PUSH , com.google.gerrit.server.group.SystemGroupBackend.ANONYMOUS_USERS , "refs/heads/*" ) ; com.google.gerrit.server.project.testing.Util.allow ( local , com.google.gerrit.common.data.Permission.PUSH , com.google.gerrit.server.project.testing.Util.DEVS , "refs/heads/master" ) ; com.google.gerrit.server.project.ProjectControl u = user ( local , com.google.gerrit.server.project.testing.Util.DEVS ) ; assertCannotUpdate ( "refs/heads/master" , u ) ; }
public void onSuccess ( com.google.gerrit.client.VoidResult result ) { query = new com.google.gerrit.client.admin.ProjectBranchesScreen.Query ( match ) . start ( start ) . run ( ) ; }
public com.google.gerrit.server.project.ChangeControl getControl ( ) { return ctl ; }
public void setCurrentFilePaths ( java.util.List < java.lang.String > filePaths ) { currentFiles = com.google.common.collect.ImmutableList.copyOf ( filePaths ) ; }
public com.google.gerrit.server.change.SubmittedTogether addListChangesOption ( java.util.EnumSet < com.google.gerrit.extensions.client.ListChangesOption > o ) { jsonOpt.addAll ( o ) ; return this ; }
void onPublish ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { com.google.gerrit.client.change.DraftActions.publish ( changeId , revision , publish , deleteRevision , deleteChange ) ; }
protected void init ( ) throws com.google.gerrit.common.errors.EmailException { super . init ( ) ; ccAllApprovals ( ) ; bccStarredBy ( ) ; ccExistingReviewers ( ) ; includeWatchers ( NotifyType.ALL_COMMENTS ) ; add ( RecipientType.TO , reviewers ) ; addByEmail ( RecipientType.TO , reviewersByEmail ) ; removeUsersThatIgnoredTheChange ( ) ; }
protected void configure ( ) { post ( com.google.gerrit.server.change.RevisionResource.REVISION_KIND , "automerge-change" ) . to ( com.googlesource.gerrit.plugins.automerger.AutomergeChangeAction.class ) ; post ( com.google.gerrit.server.change.RevisionResource.REVISION_KIND , "config-downstream" ) . to ( com.googlesource.gerrit.plugins.automerger.ConfigDownstreamAction.class ) ; get ( com.google.gerrit.server.project.BranchResource.BRANCH_KIND , "all-config-downstream" ) . to ( com.googlesource.gerrit.plugins.automerger.AllConfigDownstreamAction.class ) ; }
public void evict ( final com.google.gerrit.client.reviewdb.AccountGroup group ) { byId.remove ( group.getId ( ) ) ; byName.remove ( group.getNameKey ( ) ) ; }
com.google.gerrit.client.diff.LineMapper.LineOnOtherInfo lineOnOther ( com.google.gerrit.client.diff.DisplaySide side , int line ) { return chunkManager.getLineMapper ( ) . lineOnOther ( side , line ) ; }
public void setChangeMessage ( java.lang.String cm , java.sql.Timestamp t ) { changeMessage = cm ; timestamp = t ; }
void init ( com.google.gerrit.client.change.ChangeScreen2.Style style , com.google.gwt.dom.client.Element reviewersText ) { this . style = style ; this . reviewersText = reviewersText ; }
public com.google.gerrit.extensions.common.MergeableInfo mergeableOtherBranches ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { mergeable.setOtherBranches ( true ) ; return mergeable.apply ( revision ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot check mergeability" , e ) ; } }
public static void getSshKeys ( java.lang.String account , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwt.core.client.JsArray < com.google.gerrit.client.account.SshKeyInfo > > cb ) { com.google.gerrit.client.account.AccountApi.accounts ( ) . id ( account ) . view ( "sshkeys" ) . get ( cb ) ; }
protected void configure ( ) { delete ( com.google.gerrit.server.project.ProjectResource.PROJECT_KIND ) . to ( com.googlesource.gerrit.plugins.deleteproject.DeleteProject.class ) ; post ( com.google.gerrit.server.project.ProjectResource.PROJECT_KIND , "delete" ) . to ( com.googlesource.gerrit.plugins.deleteproject.DeleteAction.class ) ; }
protected void doDelete ( javax.servlet.http.HttpServletRequest req , javax.servlet.http.HttpServletResponse rsp ) { if ( ! ( allowDelete ) ) { sendError ( rsp , javax.servlet.http.HttpServletResponse.SC_METHOD_NOT_ALLOWED , java.lang.String.format ( "cannot delete %s from index" , indexName ) ) ; } else { process ( req , rsp , Operation.DELETE ) ; } }
public int getMinLength ( ) { return 1 ; }
public void execute ( ) { for ( com.google.gerrit.client.diff.OverviewBar.GutterWrapper info : gutters ) { adjustGutter ( info ) ; } }
public void testLinkify_AngleBrackets1 ( ) { final com.google.gwtexpui.safehtml.client.SafeHtml o = com.google.gwtexpui.safehtml.client.SafeHtml_LinkifyTest.html ( "A <http://go.here/> B" ) ; final com.google.gwtexpui.safehtml.client.SafeHtml n = o.linkify ( ) ; org.junit.Assert.assertNotSame ( o , n ) ; org.junit.Assert.assertEquals ( "A &lt;<a href=\"http://go.here/\" target=\"_blank\">http://go.here/</a>&gt; B" , n.asString ( ) ) ; }
public boolean isValidXGerritAuth ( java.lang.String keyIn ) ;
private void initCodeRepo ( ) throws java.io.IOException { if ( ( codeRepo ) == null ) { codeRepo = openRepo ( projectName , false ) ; } }
public void add ( final java.lang.Runnable task ) { synchronized ( cleanup ) { if ( ran ) { throw new java.lang.IllegalStateException ( "Request has already been cleaned up" ) ; } cleanup.add ( task ) ; } }
public java.lang.String toString ( ) { return ( "index(" + ( source ) ) + ")" ; }
private Account.Id userNoLookup ( final java.lang.String name , final java.lang.String email ) { final com.google.gerrit.reviewdb.Account s = makeUser ( name , email ) ; return s.getId ( ) ; }
com.google.gerrit.server.change.ChangeKind getChangeKind ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.server.notedb.ChangeNotes notes , com.google.gerrit.reviewdb.client.PatchSet patch ) ;
private java.util.List < com.google.gerrit.reviewdb.client.PatchLineComment > drafts ( ) throws com.google.gwtorm.server.OrmException { return db.patchComments ( ) . draftByPatchSetAuthor ( patchSetId , user.getAccountId ( ) ) . toList ( ) ; }
private static com.google.gerrit.server.account.AccountState newState ( com.google.gerrit.reviewdb.client.Account account ) { return new com.google.gerrit.server.account.AccountState ( account , com.google.common.collect.ImmutableSet.< com.google.gerrit.reviewdb.client.AccountGroup.UUID > of ( ) , com.google.common.collect.ImmutableSet.< com.google.gerrit.reviewdb.client.AccountExternalId > of ( ) , new java.util.HashMap < com.google.gerrit.server.account.WatchConfig.ProjectWatchKey , java.util.Set < com.google.gerrit.reviewdb.client.AccountProjectWatch.NotifyType > > ( ) ) ; }
public void visit ( org.commonmark.node.Code node ) { html.open ( "code" ) . appendAndEscape ( node.getLiteral ( ) ) . close ( "code" ) ; }
public void moveTipTo ( com.google.gerrit.server.git.CodeReviewCommit newTip , java.lang.String mergedFrom ) { com.google.common.base.Preconditions.checkArgument ( ( newTip != null ) ) ; branchTip = newTip ; mergeResults.put ( mergedFrom , newTip.getName ( ) ) ; }
public void deleteAllowedWithDeletePermission ( ) throws java.lang.Exception { grant ( project , "refs/*" , Permission.PUSH , true ) ; assertDeleteRef ( org.eclipse.jgit.transport.RemoteRefUpdate.Status.OK ) ; }
public void onSuccess ( com.google.gerrit.client.projects.ConfigInfo result ) { enableForm ( ) ; display ( result ) ; }
abstract java.lang.String getTokenSuffixForActiveLine ( net.codemirror.lib.CodeMirror cm ) ;
public static void setTimeForTesting ( ) { com.google.gerrit.testing.TestTimeUtil.resetWithClockStep ( 1 , java.util.concurrent.TimeUnit.SECONDS ) ; }
public java.lang.String apply ( java.lang.Enum < ? > e ) { return e.name ( ) ; }
public void preDisplay ( com.google.gerrit.client.account.Preferences prefs ) { display ( prefs ) ; }
private void group ( java.lang.String name ) throws java.io.IOException { com.google.gerrit.server.group.CreateGroup.Input in = new com.google.gerrit.server.group.CreateGroup.Input ( ) ; session.put ( ( "/groups/" + name ) , in ) . consume ( ) ; }
protected com.google.gerrit.index.project.ProjectData fromDocument ( org.apache.lucene.document.Document doc ) { com.google.gerrit.reviewdb.client.Project.NameKey nameKey = new com.google.gerrit.reviewdb.client.Project.NameKey ( doc.getField ( com.google.gerrit.index.project.ProjectField.NAME.getName ( ) ) . stringValue ( ) ) ; return projectCache.get ( ) . get ( nameKey ) . toProjectData ( ) ; }
com.google.common.util.concurrent.ListenableFuture < ? > insert ( org.apache.lucene.document.Document doc ) throws java.io.IOException { return new NrtFuture ( writer.addDocument ( doc ) ) ; }
public void onSuccess ( final com.google.gwtjsonrpc.client.VoidResult result ) { com.google.gerrit.client.Gerrit.getUserAccount ( ) . setGeneralPreferences ( p ) ; com.google.gerrit.client.Gerrit.applyUserPreferences ( ) ; enable ( true ) ; }
public com.googlecode.prolog_cafe.lang.NumberTerm floatIntPart ( ) { throw new com.googlecode.prolog_cafe.exceptions.IllegalTypeException ( "float" , this ) ; }
public java.lang.String toString ( ) { return "hook " + ( hook.getFileName ( ) ) ; }
private static com.google.gerrit.server.IdentifiedUser checkUser ( com.google.gerrit.server.project.RefControl ctl ) { com.google.common.base.Preconditions.checkArgument ( ctl.getCurrentUser ( ) . isIdentifiedUser ( ) , "only IdentifiedUser may create change" ) ; return ( ( com.google.gerrit.server.IdentifiedUser ) ( ctl.getCurrentUser ( ) ) ) ; }
public void cancel ( ) { onExit ( 0 ) ; }
boolean canRenderEntireFile ( com.google.gerrit.client.account.DiffPreferences prefs ) { return ( ( fileSize.compareTo ( com.google.gerrit.client.diff.SideBySide.FileSize.HUGE ) ) < 0 ) || ( ( ( prefs.context ( ) ) != ( com.google.gerrit.extensions.client.DiffPreferencesInfo.WHOLE_FILE_CONTEXT ) ) && ( ( prefs.context ( ) ) < 100 ) ) ; }
protected void configure ( ) { com.google.gerrit.extensions.registration.DynamicSet.bind ( binder ( ) , com.google.gerrit.server.validators.ProjectCreationValidationListener.class ) . to ( com.googlesource.gerrit.plugins.quota.MaxRepositoriesQuotaValidator.class ) ; com.google.gerrit.extensions.registration.DynamicSet.bind ( binder ( ) , com.google.gerrit.server.git.ReceivePackInitializer.class ) . to ( com.googlesource.gerrit.plugins.quota.MaxRepositorySizeQuota.class ) ; }
void onRemoveByKeys ( org.eclipse.jgit.lib.ObjectId oldNotesRev , org.eclipse.jgit.lib.ObjectId newNotesRev , com.google.gerrit.reviewdb.client.Account.Id accountId , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId.Key > extIdKeys ) throws java.io.IOException ;
public void copySettingsFrom ( final com.google.gerrit.reviewdb.client.Project update ) { description = update.description ; useContributorAgreements = update.useContributorAgreements ; useSignedOffBy = update.useSignedOffBy ; useContentMerge = update.useContentMerge ; requireChangeID = update.requireChangeID ; submitType = update.submitType ; state = update.state ; maxObjectSizeLimit = update.maxObjectSizeLimit ; }
public void onKeyUp ( com.google.gwt.event.dom.client.KeyUpEvent event ) { subname = filterTxt.getValue ( ) ; refresh ( ( ( event.getNativeEvent ( ) . getKeyCode ( ) ) == ( com.google.gwt.event.dom.client.KeyCodes.KEY_ENTER ) ) ) ; }
public java.lang.String apply ( com.google.gerrit.extensions.api.projects.BranchInfo in ) { return in.ref ; }
public void destroy ( ) { java.util.concurrent.Future < ? > future = task.getAndSet ( null ) ; if ( future != null ) { future.cancel ( true ) ; destroyExecutor.execute ( this :: onDestroy ) ; } }
public java.lang.String toString ( ) { return getDN ( ) ; }
public static < CallType extends com.google.gwtjsonrpc.server.ActiveCall > CallType getCurrentCall ( ) { return ( ( CallType ) ( com.google.gwtjsonrpc.server.JsonServlet.perThreadCall.get ( ) ) ) ; }
public com.google.common.util.concurrent.ListenableFuture < com.google.gerrit.reviewdb.Account > getAccount ( com.google.gerrit.reviewdb.Account.Id accountId ) ;
private static java.lang.String startTime ( final java.util.Date when ) { return com.google.gerrit.sshd.commands.ShowQueue.format ( when , ( ( com.google.gerrit.common.TimeUtil.nowMs ( ) ) - ( when.getTime ( ) ) ) ) ; }
public void stop ( ) { if ( ( serverInfo.getState ( ) ) == ( ServerInformation.State.SHUTDOWN ) ) { org.apache.log4j.LogManager.getLogger ( ReplicationQueue.repLog.getName ( ) ) . removeAllAppenders ( ) ; } }
public void patchSetDetail2 ( com.google.gerrit.reviewdb.client.PatchSet.Id baseId , com.google.gerrit.reviewdb.client.PatchSet.Id id , com.google.gerrit.extensions.client.DiffPreferencesInfo diffPrefs , com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.PatchSetDetail > callback ) { patchSetDetail.create ( baseId , id , diffPrefs ) . to ( callback ) ; }
public void tearDown ( ) throws java.io.IOException { com.google.gerrit.testing.TempFileUtil.cleanup ( ) ; }
public void onKeyPress ( final com.google.gwt.event.dom.client.KeyPressEvent event ) { event.preventDefault ( ) ; searchBox.setFocus ( true ) ; searchBox.selectAll ( ) ; }
public void update ( com.googlesource.gerrit.plugins.github.git.GitJobStatus.Code status ) { this . status = status ; this . shortDescription = status.name ( ) ; this . value = status.name ( ) ; }
public static com.google.gerrit.client.info.ServerInfo info ( ) { return com.google.gerrit.client.Gerrit.myServerInfo ; }
public com.googlesource.gerrit.plugins.verifystatus.server.com.google.gwtorm [ ] members ( ) { return new com.google.gwtorm.client.Key < ? > [ ] { jobId } ; }
static boolean isActive ( com.google.gerrit.server.config.PluginConfig cfg ) { return ( cfg.getStringList ( com.googlesource.gerrit.plugins.uploadvalidator.BlockedKeywordValidator.KEY_CHECK_BLOCKED_KEYWORD_PATTERN ) . length ) > 0 ; }
com.google.gerrit.server.project.ProjectControl forUser ( com.google.gerrit.server.CurrentUser who ) { com.google.gerrit.server.project.ProjectControl r = new com.google.gerrit.server.project.ProjectControl ( uploadGroups , receiveGroups , permissionFilter , changeControlFactory , permissionBackend , who , state ) ; r.allSections = allSections ; return r ; }
public static com.google.gerrit.index.query.Predicate < com.google.gerrit.reviewdb.client.AccountGroup > inname ( java.lang.String name ) { return new com.google.gerrit.server.query.group.GroupPredicates.GroupPredicate ( com.google.gerrit.server.index.group.GroupField.NAME_PART , GroupQueryBuilder.FIELD_INNAME , name.toLowerCase ( java.util.Locale.US ) ) ; }
private boolean canSkipValidation ( com.google.gerrit.server.config.PluginConfig config , java.lang.String validatorOp ) { return matchCriteria ( config , "skipValidation" , validatorOp , false , false ) ; }
public void run ( ) { switch ( getIntraLineStatus ( ) ) { case OFF : case OK : toggleShowIntraline ( ) ; break ; case FAILURE : case TIMEOUT : default : break ; } }
public abstract void handleEmails ( boolean async ) ;
public java.lang.String getNewObjectId ( ) { return newObjectId ; }
public java.lang.String getListId ( ) throws com.google.gerrit.common.errors.EmailException { return velocify ( "gerrit-$projectName.replace('/', '-')@$email.gerritHost" ) ; }
public com.google.gerrit.extensions.client.DiffPreferencesInfo setDefaultDiffPreferences ( com.google.gerrit.extensions.client.DiffPreferencesInfo in ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return setDiffPreferences.apply ( new com.google.gerrit.server.config.ConfigResource ( ) , in ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot set default diff preferences" , e ) ; } }
public com.google.gerrit.server.project.ConfigInfo apply ( com.google.gerrit.server.project.ProjectResource resource ) { return new com.google.gerrit.server.project.ConfigInfo ( gerritConfig , resource.getControl ( ) , config , pluginConfigEntries , cfgFactory , allProjects , views ) ; }
public boolean isOwner ( ) { return ( canPerformOnAllRefs ( ApprovalCategory.OWN , ( ( short ) ( 1 ) ) ) ) || ( getCurrentUser ( ) . isAdministrator ( ) ) ; }
protected java.text.DateFormat initialValue ( ) { return new java.text.SimpleDateFormat ( "yyyy-MM-dd" ) ; }
public static java.lang.String refsDraftCommentsPrefix ( com.google.gerrit.reviewdb.client.Account.Id accountId ) { return com.google.gerrit.reviewdb.client.RefNames.buildRefsPrefix ( com.google.gerrit.reviewdb.client.RefNames.REFS_DRAFT_COMMENTS , accountId ) . toString ( ) ; }
public void removeAssignee ( ) { this . assignee = java.util.Optional.empty ( ) ; }
public static java.lang.String getUserName ( java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId > ids ) { for ( com.google.gerrit.server.account.externalids.ExternalId extId : ids ) { if ( extId.isScheme ( com.google.gerrit.server.account.externalids.ExternalId.SCHEME_USERNAME ) ) { return extId.key ( ) . id ( ) ; } } return null ; }
public java.lang.String getContentType ( ) { return getHeader ( "X-FYI-Content-Type" ) ; }
public void onUnload ( ) { com.google.gerrit.client.Gerrit.removeSignOutHandler ( signedInListener ) ; super . onUnload ( ) ; }
public void run ( ) { java.lang.String rev = java.lang.String.valueOf ( revision.get ( ) ) ; com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( changeId , rev ) , new com.google.gerrit.client.change.ChangeScreen2 ( changeId , rev , openReplyBox ) ) ; }
public void onSuccess ( com.google.gerrit.client.change.RelatedChanges.RelatedInfo result ) { relatedChangesTab.setTitle ( Resources.M.relatedChanges ( result.changes ( ) . length ( ) ) ) ; relatedChangesTab.setChanges ( info.project ( ) , revision , result.changes ( ) ) ; }
public com.google.gerrit.server.IdentifiedUser create ( final com.google.gerrit.reviewdb.client.Account.Id id ) { return create ( ( ( java.net.SocketAddress ) ( null ) ) , id ) ; }
public com.google.gerrit.server.CurrentUser getUser ( ) { return rev.getUser ( ) ; }
public com.google.gerrit.reviewdb.client.Change update ( com.google.gerrit.reviewdb.client.Change c ) { if ( c.getStatus ( ) . isOpen ( ) ) { if ( setStatusNew ) { c.setStatus ( Change.Status.NEW ) ; } com.google.gerrit.server.ChangeUtil.updated ( c ) ; } return c ; }
static void fireDialogVisible ( com.google.gwt.user.client.ui.Widget w , boolean visible ) { com.google.gwtexpui.user.client.UserAgent.bus.fireEvent ( new com.google.gwtexpui.user.client.DialogVisibleEvent ( w , visible ) ) ; }
private java.lang.String link ( final com.google.gerrit.client.projects.ProjectInfo item ) { return com.google.gerrit.client.Dispatcher.toProjectAdmin ( item.name_key ( ) , ProjectScreen.INFO ) ; }
public void doClaSignupHook ( com.google.gerrit.reviewdb.client.Account account , java.lang.String claName ) { }
private java.util.List < com.google.gerrit.reviewdb.RefRight > getInheritedRights ( com.google.gerrit.reviewdb.ApprovalCategory.Id actionId ) { return filter ( projectControl.getProjectState ( ) . getInheritedRights ( ) , actionId ) ; }
public void onSuccess ( final com.google.gerrit.client.groups.MemberInfo memberInfo ) { addMemberBox.setEnabled ( true ) ; addMemberBox.setText ( "" ) ; members.insert ( memberInfo ) ; }
protected void configure ( ) { install ( new com.google.gerrit.server.schema.SchemaVersion.Module ( ) ) ; bind ( org.eclipse.jgit.lib.PersonIdent.class ) . annotatedWith ( com.google.gerrit.server.GerritPersonIdent.class ) . toProvider ( com.google.gerrit.server.GerritPersonIdentProvider.class ) ; bind ( com.google.gerrit.server.config.AllProjectsName.class ) . toProvider ( com.google.gerrit.server.config.AllProjectsNameProvider.class ) . in ( com.google.inject.Scopes.SINGLETON ) ; }
public java.lang.String getUrl ( com.google.gerrit.server.IdentifiedUser forUser , int imageSize ) ;
private void setNew ( com.google.gerrit.server.git.CodeReviewCommit c , com.google.gerrit.reviewdb.client.ChangeMessage msg ) { sendMergeFail ( c.notes , msg , true ) ; }
public < T extends com.google.gwt.core.client.JavaScriptObject > void put ( java.lang.String content , com.google.gerrit.client.rpc.HttpCallback < T > cb ) { sendText ( com.google.gwt.http.client.RequestBuilder.PUT , content , cb ) ; }
public boolean onBeforeTabSelected ( com.google.gwt.user.client.ui.SourcesTabEvents sender , int tabIndex ) { return true ; }
public void add ( com.google.gerrit.lifecycle.LifecycleListener listener ) { listeners.add ( com.google.inject.util.Providers.of ( listener ) ) ; }
com.google.gerrit.server.util.RequestContext provideRequestContext ( @ com.google.inject.name.Named ( value = com.google.gerrit.server.util.ThreadLocalRequestContext.FALLBACK ) com.google.gerrit.server.util.RequestContext fallback ) { return com.google.common.base.MoreObjects.firstNonNull ( com.google.gerrit.server.util.ThreadLocalRequestContext.local.get ( ) , fallback ) ; }
public synchronized < T > T get ( com.google.gerrit.server.PropertyKey < T > key ) { if ( ( properties ) != null ) { @ java.lang.SuppressWarnings ( value = "unchecked" ) T value = ( ( T ) ( properties.get ( key ) ) ) ; return value ; } return null ; }
public com.google.gerrit.server.index.ChangeIndex getWriteIndex ( int version ) { return writeIndexes.get ( version ) ; }
static com.google.gerrit.common.Die die ( java.lang.String why , java.lang.Throwable cause ) { return new com.google.gerrit.common.Die ( why , cause ) ; }
public void testUpsertNothing ( ) throws com.google.gwtorm.server.OrmException , java.sql.SQLException { createClassUnderTest ( ) . upsert ( noData ) ; }
public void evict ( final java.lang.String email ) { cache.remove ( new com.google.gerrit.reviewdb.Account.Email ( email ) ) ; }
private static boolean isGerritServer ( com.google.gerrit.client.info.AccountInfo account ) { return ( ( account._accountId ( ) ) == 0 ) && ( Util.C.messageNoAuthor ( ) . equals ( account.name ( ) ) ) ; }
private com.google.gerrit.server.project.ChangeControl controlForNotes ( com.google.gerrit.server.notedb.ChangeNotes notes ) throws java.lang.Exception { return changeControlFactory.controlFor ( notes , userFactory.create ( admin.id ) ) ; }
public static org.eclipse.jgit.lib.Config defaultConfig ( ) { return com.google.gerrit.testing.IndexConfig.createForLucene ( ) ; }
public java.lang.String getAuthorizationUrl ( org.scribe.model.OAuthConfig config ) { return java.lang.String.format ( com.googlesource.gerrit.plugins.oauth.GitLabApi.AUTHORIZE_URL , rootUrl , config.getApiKey ( ) , config.getCallback ( ) ) ; }
private static org.eclipse.jgit.diff.RawTextComparator comparatorFor ( com.google.gerrit.extensions.client.DiffPreferencesInfo.Whitespace ws ) { switch ( ws ) { case IGNORE_ALL : return org.eclipse.jgit.diff.RawTextComparator.WS_IGNORE_ALL ; case IGNORE_TRAILING : return org.eclipse.jgit.diff.RawTextComparator.WS_IGNORE_TRAILING ; case IGNORE_LEADING_AND_TRAILING : return org.eclipse.jgit.diff.RawTextComparator.WS_IGNORE_CHANGE ; case IGNORE_NONE : default : return org.eclipse.jgit.diff.RawTextComparator.DEFAULT ; } }
public void setChangedLines ( int insertions , int deletions ) { changedLines = java.util.Optional.of ( new com.google.gerrit.server.query.change.ChangeData.ChangedLines ( insertions , deletions ) ) ; }
public com.google.gerrit.reviewdb.Account get ( final com.google.gerrit.reviewdb.Account.Id id ) { if ( ! ( out.containsKey ( id ) ) ) { wants.add ( id ) ; fetchWants ( ) ; } return out.get ( id ) ; }
public java.util.List < org.apache.lucene.document.Document > call ( ) throws java.io.IOException { return doRead ( fields ) ; }
public void onFailure ( java.lang.Throwable e ) { if ( com.google.gerrit.client.rpc.RestApi.isNotFound ( e ) ) { content = null ; modeCallback.onSuccess ( null ) ; } else { com.google.gerrit.client.rpc.GerritCallback.showFailure ( e ) ; } }
public void index ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { index.apply ( rsrc , new com.google.gerrit.server.group.Index.Input ( ) ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot index group" , e ) ; } }
public java.util.Map < java.lang.String , com.google.gerrit.extensions.common.GpgKeyInfo > putGpgKeys ( java.util.List < java.lang.String > add , java.util.List < java.lang.String > remove ) throws com.google.gerrit.extensions.restapi.RestApiException { throw new com.google.gerrit.extensions.restapi.NotImplementedException ( ) ; }
public void addReviewerToReviewableChangeInNoteDbSingly ( ) throws java.lang.Exception { addReviewerToReviewableChangeInNoteDb ( singly ( ) ) ; }
private static java.lang.String getDefaultTemplateMsg ( java.lang.String rateLimitTypeName ) { return ( ( ( "Exceeded rate limit of " + ( com.googlesource.gerrit.plugins.quota.RateMsgHelper.RATE_LIMIT_TOKEN ) ) + " " ) + rateLimitTypeName ) + " requests/hour" ; }
void onOpenForm ( ) { com.google.gwt.user.client.ui.UIObject.setVisible ( form , true ) ; com.google.gwt.user.client.ui.UIObject.setVisible ( error , false ) ; addReviewerIcon.setVisible ( false ) ; suggestBox.setServeSuggestionsOnOracle ( true ) ; suggestBox.setFocus ( true ) ; }
protected void configureServlets ( ) { com.google.gerrit.extensions.registration.DynamicSet.setOf ( binder ( ) , com.google.gerrit.httpd.AllRequestFilter.class ) ; filter ( "/*" ) . through ( com.google.gerrit.httpd.AllRequestFilter.FilterProxy.class ) ; bind ( com.google.gerrit.server.plugins.StopPluginListener.class ) . annotatedWith ( com.google.inject.internal.UniqueAnnotations.create ( ) ) . to ( com.google.gerrit.httpd.AllRequestFilter.FilterProxy.class ) ; }
private com.google.gerrit.extensions.api.changes.ReviewInput.RobotCommentInput createRobotCommentInput ( com.google.gerrit.extensions.common.FixSuggestionInfo ... fixSuggestionInfos ) { com.google.gerrit.extensions.api.changes.ReviewInput.RobotCommentInput in = createRobotCommentInputWithMandatoryFields ( ) ; in.url = "http://www.happy-robot.com" ; in.properties = new java.util.HashMap < > ( ) ; in.properties.put ( "key1" , "value1" ) ; in.properties.put ( "key2" , "value2" ) ; in.fixSuggestions = java.util.Arrays.asList ( fixSuggestionInfos ) ; return in ; }
boolean canSubmit ( boolean isChangeOwner ) { if ( RefNames.REFS_CONFIG.equals ( refName ) ) { return projectControl.isOwner ( ) ; } return ( canPerform ( Permission.SUBMIT , isChangeOwner ) ) && ( isProjectStatePermittingWrite ( ) ) ; }
public static org.eclipse.jgit.lib.Config mergeIfNecessary ( ) { return submitByMergeIfNecessary ( ) ; }
public com.google.gerrit.client.ErrorDialog setText ( final java.lang.String t ) { text.setText ( t ) ; return this ; }
void onReviewMode ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { fileTableMode = FileTable.Mode.REVIEW ; refreshFileTable ( ) ; editMode.setVisible ( true ) ; addFile.setVisible ( false ) ; deleteFile.setVisible ( false ) ; reviewMode.setVisible ( false ) ; }
void reset ( ) { lineMapper.reset ( ) ; for ( net.codemirror.lib.TextMarker m : markers ) { m.clear ( ) ; } for ( java.lang.Runnable r : undo ) { r.run ( ) ; } }
private java.lang.String getGerritUrl ( ) { if ( ( canonicalWebUrl ) != null ) { return canonicalWebUrl ; } return myUrl ; }
public void createBranchByProjectOwnerCreateReferenceBlocked_Forbidden ( ) throws java.lang.Exception { grantOwner ( ) ; blockCreateReference ( ) ; setApiUser ( user ) ; assertCreateFails ( com.google.gerrit.extensions.restapi.AuthException.class , "create not permitted for refs/heads/test" ) ; }
public void setUp ( ) throws java.lang.Exception { com.google.common.truth.TruthJUnit.assume ( ) . that ( com.google.gerrit.testutil.NoteDbMode.get ( ) ) . isEqualTo ( NoteDbMode.OFF ) ; gerritConfig = new org.eclipse.jgit.storage.file.FileBasedConfig ( sitePaths.gerrit_config.toFile ( ) , org.eclipse.jgit.util.FS.detect ( ) ) ; }
public void run ( ) { if ( ! ( isConnected ( ) ) ) { com.googlesource.gerrit.plugins.rabbitmq.message.MessagePublisher.LOGGER.info ( "#start: try to reconnect" ) ; session.connect ( ) ; } }
public final void setOwnerUUID ( com.google.gerrit.reviewdb.client.AccountGroup.UUID uuid ) { owner_id ( com.google.gwt.http.client.URL.encodeQueryString ( uuid.get ( ) ) ) ; }
public void onSuccess ( java.lang.Void result ) { cm.setOption ( "mode" , mode ) ; }
protected static org.eclipse.jgit.lib.Config submitByRebaseIfNecessaryConfig ( ) { org.eclipse.jgit.lib.Config cfg = new org.eclipse.jgit.lib.Config ( ) ; cfg.setBoolean ( "change" , null , "submitWholeTopic" , true ) ; cfg.setEnum ( "project" , null , "submitType" , SubmitType.REBASE_IF_NECESSARY ) ; return cfg ; }
public void markReady ( boolean ready ) throws java.io.IOException { com.google.gerrit.index.IndexUtils.setReady ( sitePaths , name , schema.getVersion ( ) , ready ) ; }
void changePreferences ( com.google.gerrit.client.reviewdb.AccountGeneralPreferences pref , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwtjsonrpc.client.VoidResult > gerritCallback ) ;
void resizeCodeMirror ( ) { int height = getCodeMirrorHeight ( ) ; cmA.setHeight ( height ) ; cmB.setHeight ( height ) ; diffTable.overview.adjustGutters ( cmB ) ; }
protected void add ( com.google.gerrit.extensions.api.changes.RecipientType type , com.google.gerrit.server.mail.send.ProjectWatch.Watchers.List list ) { for ( com.google.gerrit.reviewdb.client.Account.Id user : list.accounts ) { add ( type , user ) ; } for ( com.google.gerrit.server.mail.Address addr : list.emails ) { add ( type , addr ) ; } }
public com.google.gerrit.extensions.client.GeneralPreferencesInfo apply ( com.google.gerrit.server.config.ConfigResource rsrc ) throws java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { try ( org.eclipse.jgit.lib.Repository git = gitMgr.openRepository ( allUsersName ) ) { return com.google.gerrit.server.account.Preferences.readDefaultGeneralPreferences ( git ) ; } }
public com.google.gerrit.extensions.common.ProjectInfo get ( ) throws com.google.gerrit.extensions.restapi.RestApiException { if ( ( project ) == null ) { throw new com.google.gerrit.extensions.restapi.ResourceNotFoundException ( name ) ; } return projectJson.format ( project ) ; }
private com.google.gerrit.reviewdb.client.Project.SubmitType getSubmitType ( final com.google.gerrit.reviewdb.client.Change change , final com.google.gerrit.reviewdb.client.PatchSet ps ) { return destProject.getSubmitType ( ) ; }
public void run ( ) { cm.execCommand ( "findNext" ) ; }
public void testParseBad ( ) throws java.io.IOException { com.google.gerrit.server.git.ValidationError.Sink sink = org.easymock.EasyMock.createNiceMock ( ValidationError.Sink.class ) ; org.easymock.EasyMock.replay ( sink ) ; new com.google.gerrit.server.account.DestinationList ( ) . parseLabel ( com.google.gerrit.server.account.DestinationListTest.LABEL , com.google.gerrit.server.account.DestinationListTest.L_BAD , sink ) ; }
public com.google.gerrit.server.query.change.ChangeDataSource getSource ( com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > p , int start , int limit ) throws com.google.gerrit.server.query.QueryParseException ;
public static com.google.gerrit.server.util.RegexListSearcher < java.lang.String > ofStrings ( java.lang.String re ) { return new com.google.gerrit.server.util.RegexListSearcher < > ( re , ( in ) -> in ) ; }
public void beforeTest ( ) throws java.lang.Exception { notesMigration = new com.google.gerrit.testutil.TestNotesMigration ( ) . setFromEnv ( ) ; }
protected void configure ( ) { if ( ! ( groupsMigration.disableGroupReviewDb ( ) ) ) { com.google.gerrit.extensions.registration.DynamicSet.bind ( binder ( ) , com.google.gerrit.server.audit.group.GroupAuditListener.class ) . to ( com.google.gerrit.server.group.DbGroupAuditListener.class ) ; } }
public void onSuccess ( com.google.gerrit.client.changes.ReviewInput result ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( psId.getParentKey ( ) , java.lang.String.valueOf ( psId.get ( ) ) ) ) ; }
protected void configureServlets ( ) { filter ( "/*" ) . through ( createPathFilter ( ) ) ; filter ( "/*" ) . through ( new com.googlesource.gerrit.plugins.gitiles.LoginFilter ( userProvider , urls ) ) ; serveRegex ( "^(/)$" , "^(/[^+].*)" ) . with ( com.google.gitiles.GitilesServlet.class ) ; }
public Change.Id apply ( java.lang.String refPart ) { return Change.Id.fromRefPart ( refPart ) ; }
public void onFailure ( java.lang.Throwable caught ) { loadSubmitType ( status , canSubmit ) ; }
private com.google.gerrit.reviewdb.client.PatchSetApproval getSubmitter ( com.google.gerrit.reviewdb.client.PatchSet.Id patchSetId ) throws com.google.gerrit.server.project.NoSuchChangeException , com.google.gwtorm.server.OrmException { com.google.gerrit.server.notedb.ChangeNotes notes = notesFactory.createChecked ( db , project , patchSetId.getParentKey ( ) ) . load ( ) ; return approvalsUtil.getSubmitter ( db , notes , patchSetId ) ; }
private void verifyComment ( com.google.gerrit.reviewdb.client.Comment comment ) { com.google.common.base.Preconditions.checkArgument ( comment.author.getId ( ) . equals ( accountId ) , ( "The author for the following comment does not match the author of" + " this ChangeDraftUpdate (%s): %s" ) , accountId , comment ) ; }
protected void loadNext ( ) { Util.LIST_SVC.allOpenNext ( pos , pageSize , loadCallback ( ) ) ; }
void addOption ( com.google.gerrit.extensions.common.ListChangesOption o ) { json.addOption ( o ) ; }
void onPublish ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { com.google.gerrit.client.change.DraftActions.publish ( changeId , revision , publish , deleteRevision , deleteChange ) ; }
public void onSuccess ( com.google.gerrit.client.rpc.NativeString result ) { event.getValue ( ) . setSubmitTypeRecord ( com.google.gerrit.common.data.SubmitTypeRecord.OK ( com.google.gerrit.extensions.common.SubmitType.valueOf ( result.asString ( ) ) ) ) ; }
public void setErrorStream ( final java.io.OutputStream err ) { this . err = err ; }
public com.google.gerrit.server.account.GroupControl controlFor ( com.google.gerrit.common.data.GroupDescription.Basic group ) { return new com.google.gerrit.server.account.GroupControl ( user.get ( ) , group , groupBackend ) ; }
static com.google.gerrit.server.git.InsertedObject create ( int type , java.io.InputStream in ) throws java.io.IOException { return com.google.gerrit.server.git.InsertedObject.create ( type , com.google.protobuf.ByteString.readFrom ( in ) ) ; }
public org.apache.sshd.common.file.FileSystemView createFileSystemView ( org.apache.sshd.common.Session session ) throws java.io.IOException { return new org.apache.sshd.common.file.FileSystemView ( ) { @ java.lang.Override public org.apache.sshd.common.file.SshFile getFile ( org.apache.sshd.common.file.SshFile baseDir , java.lang.String file ) { return null ; } @ java.lang.Override public org.apache.sshd.common.file.SshFile getFile ( java.lang.String file ) { return null ; } } ; }
public void signRequest ( org.scribe.model.Token accessToken , org.scribe.model.OAuthRequest request ) { request.addQuerystringParameter ( OAuthConstants.ACCESS_TOKEN , accessToken.getToken ( ) ) ; }
public com.google.gerrit.extensions.restapi.RestView < com.google.gerrit.extensions.restapi.TopLevelResource > list ( ) throws com.google.gerrit.extensions.restapi.ResourceNotFoundException { return list.get ( ) ; }
public void merge ( java.lang.Iterable < com.google.gerrit.common.data.SubmitRecord > submitRecords ) { this . status = com.google.gerrit.reviewdb.client.PatchLineComment.Status.MERGED ; this . submitRecords = com.google.common.collect.ImmutableList.copyOf ( submitRecords ) ; com.google.common.base.Preconditions.checkArgument ( ( ! ( this . submitRecords.isEmpty ( ) ) ) , "no submit records specified at submit time" ) ; }
protected void configureCommands ( ) { command ( com.google.gerrit.plugins.PrintHelloWorldCommand.class ) ; alias ( "say-hello" , com.google.gerrit.plugins.PrintHelloWorldCommand.class ) ; }
public static com.google.gerrit.server.account.AccountInfo parse ( com.google.gerrit.reviewdb.client.Account a , boolean detailed ) { com.google.gerrit.server.account.AccountInfo ai = new com.google.gerrit.server.account.AccountInfo ( a.getId ( ) ) ; ai.fill ( a , detailed ) ; return ai ; }
protected void onInitUI ( ) { super . onInitUI ( ) ; add ( com.google.gerrit.client.admin.ProjectAccessScreen.uiBinder.createAndBindUi ( this ) ) ; driver = com.google.gwt.core.client.GWT.create ( com.google.gerrit.client.admin.ProjectAccessScreen.Driver.class ) ; accessEditor.setEditing ( false ) ; driver.initialize ( accessEditor ) ; }
protected void ccAllApprovals ( ) { try { for ( com.google.gerrit.reviewdb.client.Account.Id id : changeData.reviewers ( ) . values ( ) ) { add ( RecipientType.CC , id ) ; } } catch ( com.google.gwtorm.server.OrmException err ) { com.google.gerrit.server.mail.ChangeEmail.log.warn ( "Cannot CC users that reviewed updated change" , err ) ; } }
public void configure ( ) { listener ( ) . to ( com.google.gerrit.lucene.LuceneIndexModule.SingleVersionListener.class ) ; bind ( new com.google.inject.TypeLiteral < java.util.Map < java.lang.String , java.lang.Integer > > ( ) { } ) . annotatedWith ( com.google.inject.name.Names.named ( com.google.gerrit.lucene.LuceneIndexModule.SINGLE_VERSIONS ) ) . toInstance ( singleVersions ) ; }
private com.google.gerrit.reviewdb.client.PatchSet lookupCurrentPatchSet ( com.google.gerrit.server.project.ChangeControl changeControl ) throws com.google.gwtorm.server.OrmException { return patchSetUtil.current ( reviewDb.get ( ) , changeControl.getNotes ( ) ) ; }
private void toggleShowIntraline ( ) { prefs.intralineDifference ( ( ! ( java.lang.Boolean.valueOf ( prefs.intralineDifference ( ) ) ) ) ) ; setShowIntraline ( prefs.intralineDifference ( ) ) ; prefsAction.update ( ) ; }
Account.Id parse ( java.lang.String id ) { return new com.google.gerrit.reviewdb.client.Account.Id ( java.lang.Integer.parseInt ( id ) ) ; }
public static java.sql.Timestamp truncateToSecond ( java.sql.Timestamp t ) { return new java.sql.Timestamp ( ( ( ( t.getTime ( ) ) / 1000 ) * 1000 ) ) ; }
com.google.gerrit.server.permissions.ProjectControl forUser ( com.google.gerrit.server.CurrentUser who ) { com.google.gerrit.server.permissions.ProjectControl r = new com.google.gerrit.server.permissions.ProjectControl ( uploadGroups , receiveGroups , permissionFilter , changeControlFactory , permissionBackend , who , state ) ; r.allSections = allSections ; return r ; }
public synchronized javax.sql.DataSource get ( ) { if ( ( ds ) == null ) { ds = open ( site , cfg , ctx , dst ) ; } return ds ; }
public com.google.gerrit.server.IdentifiedUser create ( final com.google.gerrit.client.reviewdb.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( systemConfig , accountCache , remotePeerProvider , dbProvider , id ) ; }
protected void configure ( ) { persist ( com.googlesource.gerrit.plugins.quota.MaxRepositorySizeQuota.REPO_SIZE_CACHE , Project.NameKey.class , java.util.concurrent.atomic.AtomicLong.class ) . loader ( com.googlesource.gerrit.plugins.quota.MaxRepositorySizeQuota.Loader.class ) . expireAfterWrite ( 1 , java.util.concurrent.TimeUnit.DAYS ) ; bind ( com.googlesource.gerrit.plugins.quota.RepoSizeCache.class ) . to ( com.googlesource.gerrit.plugins.quota.MaxRepositorySizeQuota.class ) ; }
public void delete ( com.google.gerrit.reviewdb.client.Change.Id id ) throws java.io.IOException { new com.google.gerrit.server.index.ChangeIndexer.DeleteTask ( id ) . call ( ) ; }
void visibleGroups ( com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.GroupList > callback ) ;
private static int action ( com.google.gerrit.common.data.PermissionRule a ) { switch ( a.getAction ( ) ) { case DENY : return 0 ; default : return 1 + ( a.getAction ( ) . ordinal ( ) ) ; } }
public static com.google.gerrit.client.rpc.RestApi self ( ) { return com.google.gerrit.client.account.AccountApi.accounts ( ) . view ( "self" ) ; }
void onDeleteEdit ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { if ( com.google.gwt.user.client.Window.confirm ( Resources.C.deleteChangeEdit ( ) ) ) { com.google.gerrit.client.change.EditActions.deleteEdit ( getProject ( ) , changeId , publishEdit , rebaseEdit , deleteEdit ) ; } }
org.parboiled.Rule Term ( ) { return sequence ( Factor ( ) , zeroOrMore ( anyOf ( "*/" ) , Factor ( ) ) ) ; }
public void display ( com.google.gerrit.reviewdb.client.Change chg , java.lang.Boolean starred , com.google.gerrit.reviewdb.client.PatchSetInfo info , final com.google.gerrit.common.data.AccountInfoCache acc ) { infoBlock.display ( chg , acc ) ; messageBlock.display ( chg.getId ( ) , starred , info.getMessage ( ) ) ; }
private java.io.File configFile ( javax.servlet.http.HttpServletRequest req ) { return new java.io.File ( site_path , ( ( req.getServletPath ( ) ) + ( req.getPathInfo ( ) ) ) ) ; }
public com.google.gerrit.extensions.common.GpgKeyInfo apply ( com.google.gerrit.gpg.server.GpgKey rsrc ) throws java.io.IOException { try ( com.google.gerrit.gpg.PublicKeyStore store = storeProvider.get ( ) ) { return com.google.gerrit.gpg.server.GpgKeys.toJson ( rsrc.getKeyRing ( ) , checker , store ) ; } }
public void onSuccess ( com.google.gerrit.client.changes.ChangeInfo result ) { sent = true ; com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( new com.google.gerrit.reviewdb.client.Change.Id ( result._number ( ) ) ) ) ; hide ( ) ; }
public static com.google.gerrit.server.index.IndexConfig.Builder builder ( ) { return new com.google.gerrit.server.index.AutoValue_IndexConfig.Builder ( ) . maxLimit ( java.lang.Integer.MAX_VALUE ) . maxPages ( java.lang.Integer.MAX_VALUE ) . maxTerms ( com.google.gerrit.server.index.IndexConfig.DEFAULT_MAX_TERMS ) . separateChangeSubIndexes ( false ) ; }
private java.util.List < com.google.gerrit.server.project.SectionMatcher > access ( ) { if ( ( allSections ) == null ) { allSections = state.getAllSections ( ) ; } return allSections ; }
protected void display ( com.google.gerrit.client.info.AccountInfo account ) { currentEmail = account.email ( ) ; nameTxt.setText ( account.name ( ) ) ; save.setEnabled ( false ) ; onEditEnabler.updateOriginalValue ( nameTxt ) ; }
public com.google.gerrit.extensions.api.changes.Changes.QueryRequest query ( java.lang.String query ) { throw new com.google.gerrit.extensions.restapi.NotImplementedException ( ) ; }
public static com.google.gerrit.common.data.PermissionRule blockLabel ( com.google.gerrit.server.project.ProjectConfig project , java.lang.String labelName , com.google.gerrit.reviewdb.client.AccountGroup.UUID group , java.lang.String ref ) { return com.google.gerrit.server.project.testing.Util.blockLabel ( project , labelName , ( - 1 ) , 1 , group , ref ) ; }
public void preDisplay ( final com.google.gerrit.common.data.ProjectDetail result ) { enableForm ( true ) ; display ( result ) ; }
public void copySettingsFrom ( final com.google.gerrit.reviewdb.Project update ) { description = update.description ; useContributorAgreements = update.useContributorAgreements ; useSignedOffBy = update.useSignedOffBy ; requireChangeID = update.requireChangeID ; submitType = update.submitType ; }
private com.cisco.gerrit.plugins.slack.config.ProjectConfig getConfig ( java.lang.String ignore ) throws java.lang.Exception { return getConfig ( ignore , true , true , true , true ) ; }
public void onClick ( com.google.gwt.event.dom.client.ClickEvent event ) { tagTable.deleteChecked ( ) ; }
protected org.eclipse.jgit.junit.TestRepository < ? > createProjectWithPush ( java.lang.String name , @ com.google.gerrit.common.Nullable com.google.gerrit.reviewdb.client.Project.NameKey parent ) throws java.lang.Exception { return createProjectWithPush ( name , parent , true , getSubmitType ( ) ) ; }
public void addGpgKey ( ) throws java.lang.Exception { com.google.gerrit.server.git.gpg.TestKey key = com.google.gerrit.server.git.gpg.TestKey.key1 ( ) ; java.lang.String id = key.getKeyIdString ( ) ; addExternalIdEmail ( admin , "test1@example.com" ) ; com.google.gerrit.acceptance.api.accounts.AccountIT.assertKeyMapContains ( key , addGpgKey ( key.getPublicKeyArmored ( ) ) ) ; assertKeys ( key ) ; setApiUser ( user ) ; exception.expect ( com.google.gerrit.extensions.restapi.ResourceNotFoundException.class ) ; exception.expectMessage ( id ) ; gApi.accounts ( ) . self ( ) . gpgKey ( id ) . get ( ) ; }
void setContext ( final int context ) { operation ( new java.lang.Runnable ( ) { @ java.lang.Override public void run ( ) { skipManager.removeAll ( ) ; skipManager.render ( context , diff ) ; diffTable.overview.refresh ( ) ; } } ) ; }
void downloadOptional ( ) { required = false ; download ( ) ; }
protected void onExit ( int rc ) { removeEventListenerRegistration ( ) ; synchronized ( taskLock ) { done = true ; } super . onExit ( rc ) ; }
protected abstract T updateProjectConfig ( com.google.gerrit.server.git.ProjectConfig config , com.google.gerrit.server.git.MetaDataUpdate md , boolean parentProjectUpdate ) throws com.google.gerrit.server.project.NoSuchProjectException , com.google.gwtorm.server.OrmException , java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException ;
public void remove ( byte [ ] fingerprint ) { com.google.gerrit.gpg.Fingerprint fp = new com.google.gerrit.gpg.Fingerprint ( fingerprint ) ; toAdd.remove ( fp ) ; toRemove.add ( fp ) ; }
private void insertEmptyLines ( net.codemirror.lib.CodeMirror cm , int nextLine , int cnt ) { addPaddingWidget ( cm , DiffTable.style.padding ( ) , ( nextLine - 1 ) , cnt , Unit.EM , null ) ; }
public com.google.gerrit.reviewdb.client.LabelId getLabelId ( ) { return new com.google.gerrit.reviewdb.client.LabelId ( name ) ; }
public void noCache ( ) { httpResponse.setHeader ( "Expires" , "Fri, 01 Jan 1980 00:00:00 GMT" ) ; httpResponse.setHeader ( "Pragma" , "no-cache" ) ; httpResponse.setHeader ( "Cache-Control" , "no-cache, must-revalidate" ) ; }
public com.googlecode.prolog_cafe.lang.NumberTerm max ( com.googlecode.prolog_cafe.lang.NumberTerm t ) { if ( t instanceof com.googlecode.prolog_cafe.lang.DoubleTerm ) return t.max ( this ) ; return new com.googlecode.prolog_cafe.lang.IntegerTerm ( java.lang.Math.max ( this . val , t.intValue ( ) ) ) ; }
protected com.google.gerrit.index.QueryOptions createOptions ( com.google.gerrit.index.IndexConfig indexConfig , int start , int limit , java.util.Set < java.lang.String > requestedFields ) { return com.google.gerrit.server.index.change.IndexedChangeQuery.createOptions ( indexConfig , start , limit , requestedFields ) ; }
public boolean isVisible ( ) { if ( ( isVisible ) == null ) { isVisible = ( ( getUser ( ) . isInternalUser ( ) ) || ( canPerform ( Permission.READ ) ) ) && ( isProjectStatePermittingRead ( ) ) ; } return isVisible ; }
protected void configure ( ) { bind ( new com.google.inject.TypeLiteral < com.google.gerrit.extensions.registration.DynamicSet < com.google.gerrit.server.cache.CacheRemovalListener > > ( ) { } ) . toInstance ( com.google.gerrit.extensions.registration.DynamicSet.< com.google.gerrit.server.cache.CacheRemovalListener > emptySet ( ) ) ; install ( new com.google.gerrit.server.cache.h2.DefaultCacheFactory.Module ( ) ) ; }
void onRemoveDraftBox ( com.google.gerrit.client.diff.DraftBox box ) { getPanelFromSide ( box.getSide ( ) ) . onRemoveDraftBox ( box ) ; }
private java.lang.String urlEdit ( ) { return ( "/changes/" + ( change.getChangeId ( ) ) ) + "/edit" ; }
public com.google.gerrit.server.change.ChangeJson.ChangeInfo format ( com.google.gerrit.server.query.change.ChangeData cd ) throws com.google.gwtorm.server.OrmException { return format ( cd , com.google.common.base.Optional.< com.google.gerrit.reviewdb.client.PatchSet.Id > absent ( ) ) ; }
public java.lang.Object apply ( com.google.gerrit.server.group.GroupResource resource ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.extensions.restapi.BadRequestException , com.google.gerrit.extensions.restapi.ResourceConflictException , java.lang.Exception { return new com.google.gerrit.server.group.GetGroup.GroupInfo ( resource.getControl ( ) . getGroup ( ) ) ; }
public void setPreferredEmail ( final java.lang.String addr ) { preferredEmail = addr ; }
protected void configure ( ) { factory ( AddReviewerHandler.Factory.class ) ; factory ( RemoveReviewerHandler.Factory.class ) ; factory ( PatchScriptFactory.Factory.class ) ; factory ( SaveDraft.Factory.class ) ; }
public io.fd.maintainer.plugin.service.dto.PluginBranchSpecificSettings createPluginSettings ( ) { return new io.fd.maintainer.plugin.service.dto.PluginBranchSpecificSettings ( pluginUserName , branch , wildcardBranch , fileRef , localFilePath , allowMaintainersSubmit , autoAddReviewers , autoSubmit , dislikeWarnings ) ; }
public java.util.Optional < com.google.gerrit.common.data.GroupDescription.Internal > asInternalGroup ( ) { com.google.gerrit.common.data.GroupDescription.Basic group = getGroup ( ) ; if ( group instanceof com.google.gerrit.common.data.GroupDescription.Internal ) { return java.util.Optional.of ( ( ( com.google.gerrit.common.data.GroupDescription.Internal ) ( group ) ) ) ; } return java.util.Optional.empty ( ) ; }
protected final void add ( final com.google.gwt.user.client.ui.Widget w ) { body.add ( w ) ; }
void setExpandAllComments ( boolean b ) { for ( com.google.gerrit.client.diff.CommentGroup g : sideA.values ( ) ) { g.setOpenAll ( b ) ; } for ( com.google.gerrit.client.diff.CommentGroup g : sideB.values ( ) ) { g.setOpenAll ( b ) ; } }
public boolean canRunUploadPack ( ) { return isAnyIncludedIn ( uploadGroups , getEffectiveUserGroups ( ) ) ; }
public static com.google.gerrit.index.query.Predicate < com.google.gerrit.index.project.ProjectData > inname ( java.lang.String name ) { return new com.google.gerrit.index.project.ProjectPredicate ( com.google.gerrit.index.project.ProjectField.NAME_PART , name.toLowerCase ( java.util.Locale.US ) ) ; }
private com.google.gwtorm.schema.java.JavaColumnModel collectionColumn ( final com.google.gwtorm.schema.java.JavaColumnModel f , final java.lang.Class < ? > valClazz ) throws com.google.gwtorm.client.OrmException { return new com.google.gwtorm.schema.java.JavaColumnModel ( f.getField ( ) , f.getPathToFieldName ( ) , f.getColumnID ( ) , valClazz ) ; }
protected void format ( ) { appendText ( getNameFor ( fromId ) ) ; appendText ( ( ( " has abandoned change " + ( change.getKey ( ) . abbreviate ( ) ) ) + ":\n" ) ) ; appendText ( "\n" ) ; formatCoverLetter ( ) ; }
public static com.google.gerrit.index.query.Predicate < com.google.gerrit.server.group.InternalGroup > name ( java.lang.String name ) { return new com.google.gerrit.server.query.group.GroupPredicates.GroupPredicate ( com.google.gerrit.server.index.group.GroupField.NAME , GroupQueryBuilder.FIELD_NAME , name ) ; }
public void onSuccess ( final java.util.List < com.google.gerrit.client.reviewdb.AccountExternalId > result ) { identites.display ( result ) ; }
public final native int largeChange ( ) ;
public java.lang.String apply ( com.google.gerrit.server.project.ProjectResource rsrc ) { return com.google.common.base.Strings.nullToEmpty ( rsrc.getProjectState ( ) . getProject ( ) . getDescription ( ) ) ; }
javax.servlet.http.HttpServlet getGwtUiServlet ( @ com.google.inject.name.Named ( value = com.google.gerrit.httpd.raw.StaticModule.CACHE ) com.google.common.cache.Cache < java.nio.file.Path , com.google.gerrit.httpd.raw.ResourceServlet.Resource > cache ) throws java.io.IOException { if ( ( warFs ) != null ) { return new com.google.gerrit.httpd.raw.WarGwtUiServlet ( cache , warFs ) ; } else { return new com.google.gerrit.httpd.raw.DirectoryGwtUiServlet ( cache , unpackedWar , development ) ; } }
org.parboiled.Rule Number ( ) { return oneOrMore ( charRange ( '0' , '9' ) ) ; }
boolean canAddPatchSet ( ) { return ( projectControl.controlForRef ( ( "refs/for/" + ( refName ) ) ) . canPerform ( Permission.ADD_PATCH_SET ) ) && ( isProjectStatePermittingWrite ( ) ) ; }
com.google.gerrit.acceptance.PushOneCommit create ( com.google.gerrit.reviewdb.server.ReviewDb db , org.eclipse.jgit.lib.PersonIdent i , org.eclipse.jgit.junit.TestRepository < ? > testRepo ) ;
public void testCreateGroupWhenGroupAlreadyExists_Conflict ( ) throws java.lang.Exception { try { gApi.groups ( ) . create ( "Administrators" ) ; } catch ( com.google.gerrit.extensions.restapi.ResourceConflictException expected ) { } }
public void doClaSignupHook ( com.google.gerrit.reviewdb.client.Account account , java.lang.String claName ) ;
public com.google.template.soy.data.SanitizedContent toSoyHtml ( org.commonmark.node.Node node ) { if ( node != null ) { com.google.gitiles.doc.html.SoyHtmlBuilder out = new com.google.gitiles.doc.html.SoyHtmlBuilder ( ) ; renderToHtml ( out , node ) ; return out.toSoy ( ) ; } return null ; }
public boolean updateChange ( com.google.gerrit.server.update.BatchUpdate.ChangeContext ctx ) throws com.google.gwtorm.server.OrmException { ctx.getChange ( ) . setStatus ( Change.Status.MERGED ) ; ctx.getUpdate ( ctx.getChange ( ) . currentPatchSetId ( ) ) . fixStatus ( Change.Status.MERGED ) ; return true ; }
private com.google.gerrit.acceptance.TestAccount createTestAccount ( java.lang.String name , java.lang.String group ) throws java.lang.Exception { name = name ( name ) ; return accountCreator.create ( name , ( name + "@example.com" ) , ( name + " full name" ) , group ) ; }
private com.google.gerrit.server.project.ProjectState readProjectState ( ) throws java.lang.Exception { return projectCache.get ( project.getName ( ) ) ; }
public com.googlecode.prolog_cafe.lang.Term getMessageTerm ( ) { com.googlecode.prolog_cafe.lang.Term [ ] args = new com.googlecode.prolog_cafe.lang.Term [ ] { new com.googlecode.prolog_cafe.lang.JavaObjectTerm ( goal ) , new com.googlecode.prolog_cafe.lang.IntegerTerm ( argNo ) , com.googlecode.prolog_cafe.lang.SymbolTerm.create ( type ) , culprit } ; return new com.googlecode.prolog_cafe.lang.StructureTerm ( com.googlecode.prolog_cafe.exceptions.IllegalTypeException.TYPE_ERROR , args ) ; }
private void configureRequestScope ( ) { bind ( com.google.gerrit.server.IdentifiedUser.class ) . toProvider ( com.google.gerrit.server.ssh.SshCurrentUserProvider.class ) . in ( SshScopes.REQUEST ) ; bind ( com.google.gerrit.server.CurrentUser.class ) . to ( com.google.gerrit.server.IdentifiedUser.class ) ; }
public com.google.gerrit.server.CurrentUser getUser ( ) { return user ; }
private void enable ( boolean enabled ) { commitMessage.setEnabled ( enabled ) ; commit.setEnabled ( enabled ) ; cancel1.setEnabled ( enabled ) ; cancel2.setEnabled ( enabled ) ; }
public java.util.Optional < java.lang.String > getUserName ( ) { return java.util.Optional.empty ( ) ; }
boolean canForceEditTopicName ( ) { return canForcePerform ( Permission.EDIT_TOPIC_NAME ) ; }
public void listBranches ( final com.google.gerrit.reviewdb.client.Project.NameKey projectName , final com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.ListBranchesResult > callback ) { listBranchesFactory.create ( projectName ) . to ( callback ) ; }
public void logout ( com.gitblit.models.UserModel user ) { }
public final short changesPerPage ( ) { short changesPerPage = get ( "changes_per_page" , AccountGeneralPreferences.DEFAULT_PAGESIZE ) ; return 0 < changesPerPage ? changesPerPage : com.google.gerrit.reviewdb.client.AccountGeneralPreferences.DEFAULT_PAGESIZE ; }
public static void main ( java.lang.String [ ] args ) throws java.lang.Exception { new com.google.gitiles.dev.DevServer ( com.google.gitiles.GitilesConfig.defaultFile ( ) ) . start ( ) ; }
public void testCreatePermissionOnlyProject ( ) throws java.io.IOException { final java.lang.String newProjectName = "newProject" ; com.google.gerrit.acceptance.rest.project.CreateProjectIT.ProjectInput in = new com.google.gerrit.acceptance.rest.project.CreateProjectIT.ProjectInput ( ) ; in.permissions_only = true ; session.put ( ( "/projects/" + newProjectName ) , in ) ; assertHead ( newProjectName , RefNames.REFS_CONFIG ) ; }
protected void setUp ( ) throws java.lang.Exception { super . setUp ( ) ; db = com.google.gerrit.testutil.InMemoryDatabase.newDatabase ( ) ; }
protected void setUp ( ) throws java.lang.Exception { repo = new org.eclipse.jgit.junit.TestRepository < org.eclipse.jgit.internal.storage.dfs.DfsRepository > ( new org.eclipse.jgit.internal.storage.dfs.InMemoryRepository ( new org.eclipse.jgit.internal.storage.dfs.DfsRepositoryDescription ( "test" ) ) ) ; walk = new org.eclipse.jgit.revwalk.RevWalk ( repo.getRepository ( ) ) ; }
public void setRegisterKeys ( final boolean on ) { registerKeys = on ; if ( ( myTable ) != null ) { myTable.setRegisterKeys ( on ) ; } }
public com.google.gerrit.server.change.ChangeInserter setNotify ( com.google.gerrit.extensions.api.changes.ReviewInput.NotifyHandling notify ) { this . notify = notify ; return this ; }
public com.google.gerrit.server.change.ChangeResource parse ( com.google.gerrit.server.notedb.ChangeNotes notes , com.google.gerrit.server.CurrentUser user ) { return changeResourceFactory.create ( notes , user ) ; }
public com.google.gwtorm.server.ResultSet < com.google.gerrit.reviewdb.client.PatchSetApproval > get ( java.lang.Iterable < com.google.gerrit.reviewdb.client.PatchSetApproval.Key > keys ) { throw new java.lang.UnsupportedOperationException ( com.google.gerrit.reviewdb.server.DisabledChangesReviewDbWrapper.MSG ) ; }
public com.google.gerrit.server.account.GroupMembership membershipsOf ( com.google.gerrit.server.IdentifiedUser user ) { java.lang.String username = user.getUserName ( ) ; if ( com.google.common.base.Strings.isNullOrEmpty ( username ) ) { return com.google.gerrit.server.account.GroupMembership.EMPTY ; } else { return ghMembershipProvider.get ( username ) ; } }
protected void configure ( ) { bind ( com.google.gerrit.extensions.systemstatus.ServerInformation.class ) . toInstance ( env.getServerInformation ( ) ) ; }
private void afterTest ( ) throws java.lang.Exception { db.close ( ) ; sshSession.close ( ) ; server.stop ( ) ; com.google.gerrit.testutil.TempFileUtil.cleanup ( ) ; }
public void setSshUserName ( final java.lang.String name ) { sshUserName = name ; }
private void checkLog ( ) { checkRepositoryIndex ( ) ; }
public boolean supportsRoleChanges ( com.gitblit.models.TeamModel team , com.gitblit.Constants.Role role ) { return false ; }
public void setLabels ( java.util.List < com.google.gerrit.common.data.PermissionRange > labels ) { this . labels = labels ; }
public com.google.gerrit.server.query.change.ChangeData getChange ( ) throws com.google.gwtorm.server.OrmException { return com.google.common.collect.Iterables.getOnlyElement ( queryProvider.get ( ) . byKeyPrefix ( commit.getChangeId ( ) ) ) ; }
public void onSuccess ( com.google.gerrit.client.access.ProjectAccessInfo result ) { addPanel.setVisible ( result.canAddRefs ( ) ) ; }
private static void save ( com.google.gerrit.server.UrlEncoded b , javax.servlet.http.HttpServletRequest r , java.lang.String n ) { final java.lang.String v = r.getParameter ( n ) ; if ( v != null ) { b.put ( n , v ) ; } }
void setToRetry ( ) { retrying = true ; ( retryCount ) ++ ; }
public void shouldNotHavePushTask ( ) { com.google.common.truth.Truth.assertThat ( replicationState.hasPushTask ( ) ) . isFalse ( ) ; }
public final com.google.gerrit.client.diff.DiffInfo.IntraLineStatus intralineStatus ( ) { java.lang.String s = intralineStatusRaw ( ) ; return s != null ? com.google.gerrit.client.diff.DiffInfo.IntraLineStatus.valueOf ( s ) : com.google.gerrit.client.diff.DiffInfo.IntraLineStatus.OFF ; }
protected void configure ( ) { factory ( ChangeResource.Factory.class ) ; }
public void execute ( ) { deferred = null ; operation ( new java.lang.Runnable ( ) { public void run ( ) { for ( java.lang.Runnable thunk : list ) { thunk.run ( ) ; } } } ) ; }
public static com.google.gerrit.index.query.Predicate < com.google.gerrit.reviewdb.client.AccountGroup > description ( java.lang.String description ) { return new com.google.gerrit.server.query.group.GroupPredicates.GroupPredicate ( com.google.gerrit.server.index.group.GroupField.DESCRIPTION , GroupQueryBuilder.FIELD_DESCRIPTION , description ) ; }
public boolean getBoolean ( java.lang.String name , boolean defaultValue ) { return cfg.getBoolean ( com.google.gerrit.server.config.PluginConfig.PLUGIN , pluginName , name , defaultValue ) ; }
public void fire ( com.google.gerrit.reviewdb.client.Project.NameKey project , java.lang.String ref , org.eclipse.jgit.lib.ObjectId oldObjectId , org.eclipse.jgit.lib.ObjectId newObjectId , com.google.gerrit.reviewdb.client.Account updater ) { fire ( project , ref , oldObjectId , newObjectId , ReceiveCommand.Type.UPDATE , util.accountInfo ( updater ) ) ; }
private com.google.gerrit.common.changes.Side getSideFromCm ( net.codemirror.lib.CodeMirror cm ) { return cm == ( cmA ) ? com.google.gerrit.common.changes.Side.PARENT : com.google.gerrit.common.changes.Side.REVISION ; }
abstract java.lang.String filename ( ) ;
private boolean canSeeMembers ( ) { if ( ( group ) instanceof com.google.gerrit.common.data.GroupDescription.Internal ) { return ( ( ( com.google.gerrit.common.data.GroupDescription.Internal ) ( group ) ) . isVisibleToAll ( ) ) || ( isOwner ( ) ) ; } return canAdministrateServer ( ) ; }
public boolean exists ( java.lang.String issueKey ) throws java.io.IOException { return execute ( ( ) -> jiraClient.issueExists ( issueKey ) ) ; }
static void initialize ( org.eclipse.jgit.lib.Config cfg ) { cfg.setString ( com.googlesource.gerrit.plugins.xdocs.XDocGlobalConfig.SECTION_FORMATTER , AsciidoctorFormatter.NAME , com.googlesource.gerrit.plugins.xdocs.XDocGlobalConfig.KEY_EXT , "adoc" ) ; cfg.setString ( com.googlesource.gerrit.plugins.xdocs.XDocGlobalConfig.SECTION_FORMATTER , MarkdownFormatter.NAME , com.googlesource.gerrit.plugins.xdocs.XDocGlobalConfig.KEY_MIME_TYPE , "text/x-markdown" ) ; cfg.setString ( com.googlesource.gerrit.plugins.xdocs.XDocGlobalConfig.SECTION_FORMATTER , PlainTextFormatter.NAME , com.googlesource.gerrit.plugins.xdocs.XDocGlobalConfig.KEY_MIME_TYPE , "text/plain" ) ; }
public < I > com.google.gerrit.server.index.FieldDef < I , java.lang.Iterable < T > > buildRepeatable ( com.google.gerrit.server.index.FieldDef.Getter < I , java.lang.Iterable < T > > getter ) { return new com.google.gerrit.server.index.FieldDef ( name , type , stored , true , getter ) ; }
public com.google.gerrit.server.change.ChangeInserter setDraft ( ) { change.setStatus ( Change.Status.DRAFT ) ; patchSet.setDraft ( true ) ; return this ; }
public boolean apply ( com.google.gerrit.reviewdb.client.PatchSetApproval input ) { return input.isSubmit ( ) ; }
void reviewProjectAccess ( com.google.gerrit.reviewdb.client.Project.NameKey projectName , java.lang.String baseRevision , java.lang.String message , java.util.List < com.google.gerrit.common.data.AccessSection > sections , com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.reviewdb.client.Change.Id > callback ) ;
void init ( com.google.gerrit.client.change.ChangeScreen2.Style style , com.google.gwt.dom.client.Element ccText ) { this . style = style ; this . ccText = ccText ; }
private com.google.gerrit.acceptance.server.mail.StagedChange stageReviewableWipChangeWithExtraReviewer ( ) throws java.lang.Exception { return stageChangeWithExtraReviewer ( this :: stageReviewableWipChange ) ; }
private boolean isEditable ( com.google.gerrit.client.info.FileInfo info ) { java.lang.String status = info.status ( ) ; return ( status == null ) || ( ! ( ChangeType.DELETED.matches ( status ) ) ) ; }
public boolean allRefsAreVisible ( ) { return ( ( user ) instanceof com.google.gerrit.server.InternalUser ) || ( canPerformOnAllRefs ( Permission.READ ) ) ; }
private com.google.gerrit.server.notedb.ChangeNotes reload ( com.google.gerrit.server.notedb.ChangeNotes notes ) throws java.lang.Exception { return changeNotesFactory.create ( db , notes.getChange ( ) . getProject ( ) , notes.getChangeId ( ) ) ; }
public void postUpdate ( com.google.gerrit.server.update.BatchUpdate.Context ctx ) { if ( ( change ) != null ) { topicEdited.fire ( change , ctx.getAccount ( ) , oldTopicName , ctx.getWhen ( ) ) ; } }
public void get ( ) throws java.lang.Exception { com.google.gerrit.extensions.common.AccountInfo info = gApi.accounts ( ) . id ( "admin" ) . get ( ) ; com.google.common.truth.Truth.assertThat ( info.name ) . isEqualTo ( "Administrator" ) ; com.google.common.truth.Truth.assertThat ( info.email ) . isEqualTo ( "admin@example.com" ) ; com.google.common.truth.Truth.assertThat ( info.username ) . isEqualTo ( "admin" ) ; }
public void remove ( ) { if ( ref.compareAndSet ( item , null ) ) { items.remove ( ref ) ; } }
public com.google.gwtorm.server.ResultSet < com.google.gerrit.server.query.change.ChangeData > read ( ) throws com.google.gwtorm.server.OrmException { return source.read ( ) ; }
public void onFailure ( java.lang.Throwable caught ) { enableButtons ( true ) ; new com.google.gerrit.client.ErrorDialog ( caught.getMessage ( ) ) . center ( ) ; }
private static com.google.gerrit.client.rpc.RestApi messageEdit ( com.google.gerrit.reviewdb.client.PatchSet.Id id ) { return com.google.gerrit.client.changes.ChangeApi.change ( id.getParentKey ( ) . get ( ) ) . view ( "edit:message" ) ; }
public int hashCode ( ) { return java.util.Objects.hashCode ( status ) ; }
void onDeleteRevision ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { if ( com.google.gwt.user.client.Window.confirm ( Resources.C.deleteDraftRevision ( ) ) ) { com.google.gerrit.client.change.ChangeActions.delete ( getProject ( ) , changeId , revision , publish , deleteRevision ) ; } }
protected < T > T buildJson ( java.lang.String path , java.lang.Class < T > classOfT , java.lang.String additionalQueryString ) throws java.lang.Exception { return com.google.gitiles.ServletTest.newGson ( ) . fromJson ( buildJsonRaw ( path , additionalQueryString ) , classOfT ) ; }
public com.google.gerrit.extensions.common.ChangeInfo addChangeActions ( com.google.gerrit.extensions.common.ChangeInfo to , com.google.gerrit.server.notedb.ChangeNotes notes ) { java.util.List < com.google.gerrit.extensions.api.changes.ActionVisitor > visitors = visitors ( ) ; to.actions = toActionMap ( notes , visitors , copy ( visitors , to ) ) ; return to ; }
com.google.gerrit.server.permissions.PermissionBackend.ForChange asForChange ( @ com.google.gerrit.common.Nullable com.google.gerrit.server.query.change.ChangeData cd , @ com.google.gerrit.common.Nullable com.google.inject.Provider < com.google.gerrit.reviewdb.server.ReviewDb > db ) { return new com.google.gerrit.server.permissions.ChangeControl.ForChangeImpl ( cd , db ) ; }
public void parse ( ) { projectWatches = com.google.gerrit.server.account.ProjectWatches.parse ( accountId , cfg , validationErrorSink ) ; }
private net.codemirror.lib.CodeMirror otherCm ( net.codemirror.lib.CodeMirror me ) { return me == ( cmA ) ? cmB : cmA ; }
protected void populateWatches ( ) { Util.ACCOUNT_SVC.myProjectWatch ( new com.google.gerrit.client.rpc.ScreenLoadCallback < java.util.List < com.google.gerrit.common.data.AccountProjectWatchInfo > > ( this ) { @ java.lang.Override public void preDisplay ( final java.util.List < com.google.gerrit.common.data.AccountProjectWatchInfo > result ) { watchesTab.display ( result ) ; } } ) ; }
public void onSuccess ( com.google.gerrit.client.rpc.NativeMap < com.google.gwt.core.client.JsArray < com.google.gerrit.client.changes.CommentInfo > > result ) { r.add ( com.google.gerrit.client.change.ChangeScreen.filterForRevision ( result , rev._number ( ) ) ) ; history.addComments ( result ) ; }
public void onSuccess ( com.google.gerrit.client.account.AccountCapabilities result ) { if ( result.canPerform ( com.google.gerrit.common.data.GlobalCapability.CREATE_GROUP ) ) { com.google.gerrit.client.Gerrit.addLink ( groupsBar , com.google.gerrit.client.Gerrit.C.menuGroupsCreate ( ) , PageLinks.ADMIN_CREATE_GROUP ) ; } }
public void onSuccess ( java.lang.String result ) { com.google.gerrit.client.change.EditFileAction edit = new com.google.gerrit.client.change.EditFileAction ( id , result , path , style.replyBox ( ) , editButton , replyButton ) ; edit.onEdit ( ) ; }
public void run ( ) throws java.lang.Exception { ui.message ( "\n" ) ; ui.header ( "GitBlit Integration" ) ; if ( ui.yesno ( true , "Do you want to use GitBlit as your GitWeb viewer?" ) ) { configureGitBlit ( ) ; } }
public void onMouseOut ( com.google.gwt.event.dom.client.MouseOutEvent event ) { popup.setVisible ( false ) ; popup.clear ( ) ; hideFullScreenIcon ( ) ; hideDeleteIcon ( ) ; }
private boolean activeForRef ( com.google.gerrit.server.config.PluginConfig config , java.lang.String ref ) { return matchCriteria ( config , "ref" , ref , true , true ) ; }
boolean isExpired ( ) { return ( ( java.lang.System.currentTimeMillis ( ) ) / 1000L ) > ( expiresAt ) ; }
public com.google.gerrit.reviewdb.server.AccountDiffPreferenceAccess accountDiffPreferences ( ) { throw new com.google.gerrit.testutil.DisabledReviewDb.Disabled ( ) ; }
public void onSuccess ( final com.google.gerrit.common.data.PatchSetDetail result ) { ensureLoaded ( result ) ; patchTable.setRegisterKeys ( true ) ; }
void finish ( ) { id = com.google.common.base.Joiner.on ( '~' ) . join ( com.google.gerrit.extensions.restapi.Url.encode ( project ) , com.google.gerrit.extensions.restapi.Url.encode ( branch ) , com.google.gerrit.extensions.restapi.Url.encode ( changeId ) ) ; }
void onRefReplicatedToOneNode ( java.lang.String project , java.lang.String ref , org.eclipse.jgit.transport.URIish uri , com.googlesource.gerrit.plugins.replication.ReplicationState.RefPushResult status ) { com.googlesource.gerrit.plugins.replication.RefReplicatedEvent event = new com.googlesource.gerrit.plugins.replication.RefReplicatedEvent ( project , ref , com.googlesource.gerrit.plugins.replication.PushResultProcessing.resolveNodeName ( uri ) , status ) ; postEvent ( project , ref , event ) ; }
void restore ( com.googlecode.prolog_cafe.lang.Prolog engine ) { engine.cont = this . cont ; engine.r1 = this . r1 ; engine.r2 = this . r2 ; engine.r3 = this . r3 ; engine.r4 = this . r4 ; engine.r5 = this . r5 ; }
public void run ( ) { switch ( getIntraLineStatus ( ) ) { case OFF : case OK : toggleShowIntraline ( ) ; break ; default : break ; } }
public void noHashtags ( ) throws java.lang.Exception { java.lang.String commitMessage = "Subject\n\nLine 1\n\nLine 2" ; com.google.common.truth.Truth.assertThat ( ( ( java.lang.Iterable < ? > ) ( com.google.gerrit.server.change.HashtagsUtil.extractTags ( commitMessage ) ) ) ) . isEmpty ( ) ; }
public boolean execute ( ) { if ( ( prefs.syntaxHighlighting ( ) ) && ( isAttached ( ) ) ) { setSyntaxHighlighting ( prefs.syntaxHighlighting ( ) ) ; } return false ; }
public void apply ( org.eclipse.jgit.dircache.DirCacheEntry ent ) { ent.setFileMode ( mode ) ; ent.setObjectId ( oid ) ; }
public void refsDraftComments ( ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( com.google.gerrit.reviewdb.client.RefNames.refsDraftComments ( changeId , accountId ) ) . isEqualTo ( "refs/draft-comments/73/67473/1011123" ) ; }
public com.google.gerrit.server.notedb.ChangeNotes notes ( ) throws com.google.gwtorm.server.OrmException { if ( ( notes ) == null ) { notes = notesFactory.create ( change ( ) ) ; } return notes ; }
public void shouldThrowAnExceptionIfAnErrorOccurCreatingSharedDirectory ( ) throws java.lang.Exception { java.io.File configuredDirectory = tempFolder.newFile ( ) ; org.mockito.Mockito.when ( configMock.main ( ) . sharedDirectory ( ) ) . thenReturn ( configuredDirectory.toPath ( ) ) ; module.getSharedDirectory ( ) ; }
protected java.io.File path ( java.io.File etc , com.google.gerrit.httpd.GitWebConfig gitWebConfig ) { return new java.io.File ( etc , "GerritSite.css" ) ; }
public java.util.Map < java.lang.String , java.util.List < com.google.gerrit.extensions.common.CommentInfo > > comments ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return listComments.apply ( change ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot get comments" , e ) ; } }
public void revokedByKeyNotPresentInStore ( ) throws java.lang.Exception { com.google.gerrit.gpg.testing.TestKey k = add ( com.google.gerrit.gpg.testing.TestKeys.revokedCompromisedKey ( ) ) ; save ( ) ; assertProblems ( k , "Key is revoked (key material has been compromised): test6 compromised" ) ; }
private com.google.gerrit.server.git.SubmitStrategy createStrategy ( final com.google.gerrit.reviewdb.client.Project.SubmitType submitType ) throws com.google.gerrit.server.git.MergeException { return submitStrategyFactory.create ( submitType , db , repo , rw , inserter , canMergeFlag , getAlreadyAccepted ( branchTip ) , destBranch , destProject.isUseContentMerge ( ) ) ; }
public void assertErrorStatus ( ) { org.eclipse.jgit.transport.RemoteRefUpdate refUpdate = result.getRemoteUpdate ( ref ) ; com.google.common.truth.Truth.assertThat ( refUpdate ) . isNotNull ( ) ; com.google.common.truth.Truth.assertThat ( refUpdate.getStatus ( ) ) . named ( message ( refUpdate ) ) . isEqualTo ( Status.REJECTED_OTHER_REASON ) ; }
public final native boolean canDelete ( ) ;
public com.google.gerrit.server.project.RefControl controlForRef ( java.lang.String refName ) { return refControlFactory.create ( this , refName ) ; }
public void copySettingsFrom ( final com.google.gerrit.reviewdb.client.Project update ) { description = update.description ; useContributorAgreements = update.useContributorAgreements ; useSignedOffBy = update.useSignedOffBy ; useContentMerge = update.useContentMerge ; requireChangeID = update.requireChangeID ; submitType = update.submitType ; state = update.state ; maxObjectSizeLimit = update.maxObjectSizeLimit ; createNewChangeForAllNotInTarget = update.createNewChangeForAllNotInTarget ; }
public void configure ( ) { factory ( ReviewDbBatchUpdate.AssistedFactory.class ) ; factory ( FusedNoteDbBatchUpdate.AssistedFactory.class ) ; factory ( UnfusedNoteDbBatchUpdate.AssistedFactory.class ) ; }
public void testVerifyAuthInfo ( ) throws java.lang.Exception { com.googlesource.gerrit.plugins.lfs.fs.LfsFsRequestAuthorizer.AuthInfo info = auth.generateAuthInfo ( "o" , org.eclipse.jgit.lfs.lib.LongObjectId.zeroId ( ) , 1 ) ; com.google.common.truth.Truth.assertThat ( auth.verifyAuthInfo ( info.authToken , "o" , org.eclipse.jgit.lfs.lib.LongObjectId.zeroId ( ) ) ) . isTrue ( ) ; }
public java.lang.String getUrl ( ) { return null ; }
public org.apache.sshd.server.CommandFactory.Command createCommand ( final java.lang.String requestCommand ) { return new com.google.gerrit.server.ssh.CommandFactoryProvider.Trampoline ( requestCommand ) ; }
public int getTaskId ( ) { return taskId ; }
public final void ignoreWhitespace ( com.google.gerrit.extensions.client.DiffPreferencesInfo.Whitespace i ) { setIgnoreWhitespaceRaw ( i.toString ( ) ) ; }
public final Project.NameKey name_key ( ) { return new com.google.gerrit.reviewdb.client.Project.NameKey ( name ( ) ) ; }
public void onClick ( com.google.gwt.event.dom.client.ClickEvent event ) { setOpen ( ( ! ( isOpen ( ) ) ) ) ; if ( ( clickCallback ) != null ) { clickCallback.run ( ) ; } }
public void execute ( ) { for ( final com.google.gerrit.client.SignedInListener l : com.google.gerrit.client.Gerrit.signedInListeners ) { l.onSignIn ( ) ; } if ( ( com.google.gerrit.client.Gerrit.currentScreen ) != null ) { com.google.gerrit.client.Gerrit.currentScreen.onSignIn ( ) ; } }
public boolean canPerform ( java.lang.String permissionName ) { if ( GlobalCapability.ADMINISTRATE_SERVER.equals ( permissionName ) ) { return canAdministrateServer ( ) ; } else { return ! ( access ( permissionName ) . isEmpty ( ) ) ; } }
public com.google.gerrit.extensions.api.changes.Changes.QueryRequest withLimit ( int limit ) { this . limit = limit ; return this ; }
public final com.google.gerrit.client.projects.ConfigInfo.ConfigParameterValue value ( java.lang.String v ) { setValue ( v ) ; return this ; }
protected void onCellSingleClick ( int row , int column ) { if ( ( column == 1 ) || ( column == 4 ) ) { onCellDoubleClick ( row , column ) ; } }
boolean canForceEditTopicName ( ) { return canPerform ( Permission.EDIT_TOPIC_NAME , false , true ) ; }
public void visit ( org.commonmark.node.HtmlBlock node ) { html.append ( htmlSanitizer.sanitize ( node.getLiteral ( ) ) ) ; }
public void setRequireChangeID ( final com.google.gerrit.extensions.common.InheritableBoolean cid ) { requireChangeID = cid ; }
private void logWarn ( java.lang.String msg ) { if ( com.google.gerrit.server.git.MergeOp.log.isWarnEnabled ( ) ) { com.google.gerrit.server.git.MergeOp.log.warn ( ( ( logPrefix ) + msg ) ) ; } }
private java.lang.String createChange ( ) throws java.io.IOException , org.eclipse.jgit.api.errors.GitAPIException { com.google.gerrit.acceptance.PushOneCommit push = pushFactory.create ( db , admin.getIdent ( ) ) ; return push.to ( git , "refs/for/master" ) . getChangeId ( ) ; }
public com.google.gerrit.extensions.api.changes.ReviewResult review ( com.google.gerrit.extensions.api.changes.ReviewInput in ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return review.apply ( revision , in ) . value ( ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot post review" , e ) ; } }
private static java.lang.String decode ( java.lang.String str ) { try { return java.net.URLDecoder.decode ( str , java.nio.charset.StandardCharsets.UTF_8.name ( ) ) ; } catch ( java.io.UnsupportedEncodingException e ) { return str ; } }
public static void createGroup ( java.lang.String groupName , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.groups.GroupInfo > cb ) { com.google.gwt.core.client.JavaScriptObject in = com.google.gwt.core.client.JavaScriptObject.createObject ( ) ; new com.google.gerrit.client.rpc.RestApi ( "groups" ) . id ( groupName ) . ifNoneMatch ( ) . put ( in , cb ) ; }
public static com.google.gerrit.server.account.AuthRequest forEmail ( java.lang.String email ) { com.google.gerrit.server.account.AuthRequest r = new com.google.gerrit.server.account.AuthRequest ( ExternalId.Key.create ( com.google.gerrit.server.account.externalids.ExternalId.SCHEME_MAILTO , email ) ) ; r.setEmailAddress ( email ) ; return r ; }
public static boolean isLegalReviewerGroup ( com.google.gerrit.reviewdb.client.AccountGroup.UUID groupUUID ) { return ! ( com.google.gerrit.server.group.SystemGroupBackend.isSystemGroup ( groupUUID ) ) ; }
public final com.google.gerrit.extensions.client.GeneralPreferencesInfo.TimeFormat timeFormat ( ) { java.lang.String s = timeFormatRaw ( ) ; return s != null ? com.google.gerrit.extensions.client.GeneralPreferencesInfo.TimeFormat.valueOf ( s ) : null ; }
public void backupTimestampRefNameForUnsupportedNamespace ( ) throws java.lang.Exception { java.lang.String ref = "refs/changes/45/12345/1" ; com.google.common.truth.Truth.assertThat ( com.googlesource.gerrit.plugins.refprotection.BackupRef.get ( null , ref ) ) . isEqualTo ( ref ) ; }
public com.google.gerrit.server.patch.IntraLineDiff getIntraLineDiff ( com.google.gerrit.server.patch.IntraLineDiffKey key , com.google.gerrit.server.patch.IntraLineDiffArgs args ) ;
public com.google.gerrit.extensions.common.AccountInfo setAssignee ( com.google.gerrit.extensions.api.changes.AssigneeInput input ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return putAssignee.apply ( change , input ) ; } catch ( com.google.gerrit.server.update.UpdateException | java.io.IOException | com.google.gwtorm.server.OrmException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot set assignee" , e ) ; } }
private com.google.gerrit.server.project.ChangeControl changeControl ( com.google.gerrit.reviewdb.client.Change c ) throws com.google.gerrit.server.project.NoSuchChangeException { return changeControlFactory.controlFor ( c , identifiedUserFactory.create ( c.getOwner ( ) ) ) ; }
public abstract boolean yesno ( java.lang.Boolean def , java.lang.String fmt , java.lang.Object ... args ) ;
public java.util.Set < com.google.gerrit.reviewdb.client.AccountGroup.UUID > memberIn ( com.google.gerrit.reviewdb.client.AccountGroup.UUID groupId ) ;
public void addIntHeader ( java.lang.String name , int value ) { addHeader ( name , java.lang.Integer.toString ( value ) ) ; }
protected void deny ( com.google.gerrit.server.git.ProjectConfig project , java.lang.String permission , com.google.gerrit.reviewdb.client.AccountGroup.UUID id , java.lang.String ref ) throws java.lang.Exception { com.google.gerrit.server.project.testing.Util.deny ( project , permission , id , ref ) ; saveProjectConfig ( project ) ; }
private void preMerge ( final com.google.gerrit.server.git.SubmitStrategy strategy ) throws com.google.gerrit.server.git.MergeException { openBranch ( ) ; validateChangeList ( ) ; mergeTip = strategy.run ( branchTip , toMerge ) ; refLogIdent = strategy.getRefLogIdent ( ) ; commits.putAll ( strategy.getNewCommits ( ) ) ; }
public boolean enterSSLVerify ( com.google.gerrit.pgm.init.Section section ) { return ( com.googlesource.gerrit.plugins.hooks.its.InitIts.TrueFalseEnum.TRUE ) == ( section.select ( "Verify SSL Certificates" , "sslVerify" , com.googlesource.gerrit.plugins.hooks.its.InitIts.TrueFalseEnum.TRUE ) ) ; }
void onQuote ( com.google.gwt.event.dom.client.ClickEvent e ) { e.stopPropagation ( ) ; if ( ! ( com.google.gerrit.client.Gerrit.isSignedIn ( ) ) ) { com.google.gerrit.client.Gerrit.doSignIn ( getCommentManager ( ) . host.getToken ( ) ) ; } addReplyBox ( true ) ; }
public com.google.gerrit.server.project.SubmitRuleEvaluator setOptions ( com.google.gerrit.server.project.SubmitRuleOptions opts ) { checkNotStarted ( ) ; if ( opts != null ) { optsBuilder = opts.toBuilder ( ) ; } else { optsBuilder = com.google.gerrit.server.project.SubmitRuleOptions.builder ( ) ; } return this ; }
public void abandonReviewableChangeNotifyOwner ( ) throws java.lang.Exception { com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableChange ( com.google.gerrit.server.account.WatchConfig.NotifyType.ABANDONED_CHANGES ) ; abandon ( sc.changeId , sc.owner , com.google.gerrit.acceptance.server.mail.OWNER ) ; assertThat ( sender ) . notSent ( ) ; }
com.google.gerrit.sshd.SshScope.Context newContext ( com.google.gwtorm.server.SchemaFactory < com.google.gerrit.reviewdb.server.ReviewDb > sf , com.google.gerrit.sshd.SshSession s , java.lang.String cmd ) { return new com.google.gerrit.sshd.SshScope.Context ( sf , s , cmd , com.google.gerrit.server.util.TimeUtil.nowMs ( ) ) ; }
public com.google.gerrit.server.permissions.LabelPermission.ForUser forUser ( ) { return forUser ; }
public void delete ( com.google.gerrit.server.query.change.ChangeData cd ) throws java.io.IOException { try { deleteTask ( cd ) . call ( ) ; } catch ( java.lang.RuntimeException e ) { throw e ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.index.ChangeIndexer.MAPPER.apply ( e ) ; } }
protected void configure ( ) { com.google.gerrit.extensions.registration.DynamicMap.mapOf ( binder ( ) , com.googlesource.gerrit.plugins.quota.QuotaResource.QUOTA_KIND ) ; get ( com.google.gerrit.server.project.ProjectResource.PROJECT_KIND , "quota" ) . to ( com.googlesource.gerrit.plugins.quota.GetQuota.class ) ; child ( com.google.gerrit.server.config.ConfigResource.CONFIG_KIND , "quota" ) . to ( com.googlesource.gerrit.plugins.quota.GetQuotas.class ) ; }
public long getDateHeader ( java.lang.String name ) { java.lang.String v = getHeader ( name ) ; return v != null ? org.apache.http.client.utils.DateUtils.parseDate ( v ) . getTime ( ) : 0 ; }
protected java.lang.String getTaskDescription ( ) { java.lang.StringBuilder m = new java.lang.StringBuilder ( ) ; m.append ( context.getCommandLine ( ) ) ; return m.toString ( ) ; }
public void onSuccess ( com.google.gerrit.client.changes.ChangeInfo c ) { project.setInnerText ( c.project ( ) ) ; com.google.gwtexpui.safehtml.client.SafeHtml.setInnerHTML ( filePath , com.google.gerrit.client.diff.Header.formatPath ( path , null , null ) ) ; }
com.google.gerrit.httpd.raw.BowerComponentsServlet getBowerComponentsServlet ( @ com.google.inject.name.Named ( value = com.google.gerrit.httpd.raw.StaticModule.CACHE ) com.google.common.cache.Cache < java.nio.file.Path , com.google.gerrit.httpd.raw.ResourceServlet.Resource > cache ) { return new com.google.gerrit.httpd.raw.BowerComponentsServlet ( cache , getPaths ( ) . buckOut ) ; }
private void configureCacheSection ( ) { ui.header ( "Cache section" ) ; promptAndSetString ( "Cache thread pool size" , com.ericsson.gerrit.plugins.highavailability.Configuration.CACHE_SECTION , com.ericsson.gerrit.plugins.highavailability.Configuration.THREAD_POOL_SIZE_KEY , com.ericsson.gerrit.plugins.highavailability.Setup.str ( com.ericsson.gerrit.plugins.highavailability.Configuration.DEFAULT_THREAD_POOL_SIZE ) ) ; }
public void manualCertificationDoesNotExternalId ( ) throws java.lang.Exception { addExternalId ( "foo" , "otherId" , null ) ; assertProblems ( com.google.gerrit.gpg.testutil.TestKey.key5 ( ) , ( "Key must contain a valid certification for one of the following " + ( ( ( "identities:\n" + " foo:otherId\n" ) + " gerrit:user\n" ) + " username:user" ) ) ) ; }
public < T extends com.google.gwt.core.client.JavaScriptObject > void delete ( com.google.gwt.user.client.rpc.AsyncCallback < T > cb ) { send ( com.google.gwt.http.client.RequestBuilder.DELETE , cb ) ; }
public static synchronized void useSystemTime ( ) { com.google.gerrit.testutil.TestTimeUtil.clockMs = null ; org.joda.time.DateTimeUtils.setCurrentMillisSystem ( ) ; }
public com.google.gwtorm.server.ResultSet < T > read ( ) throws com.google.gwtorm.server.OrmException { return source.read ( ) ; }
com.google.gwtorm.client.ResultSet < com.google.gerrit.reviewdb.Change > query ( com.google.gerrit.reviewdb.ReviewDb db , int lim , java.lang.String key ) throws com.google.gerrit.common.errors.InvalidQueryException , com.google.gwtorm.client.OrmException { return searchQuery ( db , query , lim , key , com.google.gerrit.httpd.rpc.ChangeListServiceImpl.QUERY_PREV ) ; }
public void testInvalidSchemeWithBackreference ( ) { exception.expect ( java.lang.IllegalArgumentException.class ) ; new com.google.gwtexpui.safehtml.client.LinkFindReplace ( ".*(script:[^;]*)" , "java$1" ) . replace ( "Look at this script: alert(1);" ) ; }
public void setRequireChangeID ( final com.google.gerrit.reviewdb.client.Project.InheritedBoolean cid ) { requireChangeID = cid ; }
public static void setDiffPreferences ( com.google.gerrit.extensions.client.DiffPreferencesInfo accountDiffPref ) { com.google.gerrit.client.Gerrit.myAccountDiffPref = accountDiffPref ; }
public com.google.gerrit.server.IdentifiedUser runAs ( com.google.gerrit.reviewdb.client.Account.Id id , com.google.gerrit.server.CurrentUser caller ) { return new com.google.gerrit.server.IdentifiedUser ( capabilityControlFactory , authConfig , realm , anonymousCowardName , canonicalUrl , accountCache , groupBackend , disableReverseDnsLookup , remotePeerProvider , dbProvider , id , caller ) ; }
com.google.gerrit.server.git.AbandonOp create ( @ com.google.inject.assistedinject.Assisted com.google.gerrit.reviewdb.client.Account account , @ com.google.inject.assistedinject.Assisted java.lang.String msgTxt , @ com.google.inject.assistedinject.Assisted com.google.gerrit.extensions.api.changes.NotifyHandling notifyHandling , @ com.google.inject.assistedinject.Assisted com.google.common.collect.Multimap < com.google.gerrit.extensions.api.changes.RecipientType , com.google.gerrit.reviewdb.client.Account.Id > accountsToNotify ) ;
public int hashCode ( ) { return java.util.Objects.hash ( storeName ) ; }
java.nio.file.Path itsPath ( com.google.gerrit.server.config.SitePaths sitePaths ) { return sitePaths.etc_dir.normalize ( ) . resolve ( com.googlesource.gerrit.plugins.its.base.ItsHookModule.ITS_FOLDER ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { toggleReviewed ( ) . run ( ) ; }
private com.google.gerrit.server.plugins.JarScanner createJarScanner ( java.nio.file.Path srcJar ) throws com.google.gerrit.server.plugins.InvalidPluginException { try { return new com.google.gerrit.server.plugins.JarScanner ( srcJar ) ; } catch ( java.io.IOException e ) { throw new com.google.gerrit.server.plugins.InvalidPluginException ( ( "Cannot scan plugin file " + srcJar ) , e ) ; } }
public java.lang.String getDisplayString ( ) { return ( ( java.lang.String.valueOf ( change.legacyId ( ) . get ( ) ) ) + ": " ) + ( change.subject ( ) ) ; }
private static com.google.gerrit.reviewdb.client.Change newChange ( ) { return com.google.gerrit.testing.TestChanges.newChange ( new com.google.gerrit.reviewdb.client.Project.NameKey ( "project" ) , new com.google.gerrit.reviewdb.client.Account.Id ( 12345 ) ) ; }
public void checkChanges ( com.google.gerrit.reviewdb.client.Change ... changeIds ) throws java.lang.Exception { checkActual ( readExpected ( java.util.Arrays.stream ( changeIds ) ) , new java.util.ArrayList < > ( ) ) ; }
public com.google.gerrit.client.diff.DiffApi ignoreWhitespace ( com.google.gerrit.extensions.client.DiffPreferencesInfo.Whitespace w ) { if ( ( w != null ) && ( w != ( com.google.gerrit.extensions.client.DiffPreferencesInfo.Whitespace.IGNORE_ALL ) ) ) { call.addParameter ( "whitespace" , w ) ; } return this ; }
public void execute ( ) { for ( java.lang.Runnable r : resizeCallbacks ) { r.run ( ) ; } resizeCallbacks = null ; }
public void onClick ( com.google.gwt.event.dom.client.ClickEvent event ) { com.google.gwt.user.client.Window.open ( com.google.gerrit.client.Gerrit.getConfig ( ) . getEditFullNameUrl ( ) , "_blank" , null ) ; }
void apply ( com.google.gerrit.server.notedb.ChangeUpdate update ) throws com.google.gwtorm.server.OrmException { checkUpdate ( update ) ; update.setChangeMessage ( message.getMessage ( ) ) ; setTopic ( update ) ; setStatus ( update ) ; }
void evictAll ( ) ;
public void testEvictCacheFailed ( ) throws java.lang.Exception { setupMocks ( Constants.DEFAULT , com.ericsson.gerrit.plugins.evictcache.RestSessionTest.EMPTY_JSON2 , com.ericsson.gerrit.plugins.evictcache.RestSessionTest.FAIL_RESPONSE , com.ericsson.gerrit.plugins.evictcache.RestSessionTest.DO_NOT_THROW_EXCEPTION ) ; com.google.common.truth.Truth.assertThat ( restClient.evict ( com.ericsson.gerrit.plugins.evictcache.RestSessionTest.SOURCE_NAME , Constants.DEFAULT , com.ericsson.gerrit.plugins.evictcache.RestSessionTest.EMPTY_JSON ) ) . isFalse ( ) ; }
private java.util.List < com.google.gerrit.server.patch.PatchListEntry > getPatches ( org.eclipse.jgit.lib.ObjectId revisionIdA , org.eclipse.jgit.lib.ObjectId revisionIdB ) throws java.lang.Exception { return patchListCache.get ( getKey ( revisionIdA , revisionIdB ) , project ) . getPatches ( ) ; }
private static boolean isGetOrHead ( javax.servlet.http.HttpServletRequest req ) { return ( "GET" . equals ( req.getMethod ( ) ) ) || ( "HEAD" . equals ( req.getMethod ( ) ) ) ; }
private void checkAndAddSkip ( java.util.List < com.google.gerrit.client.patches.SkippedLine > list , com.google.gerrit.client.patches.SkippedLine toAdd ) { if ( ( toAdd.getSize ( ) ) > 1 ) { list.add ( toAdd ) ; } }
public com.googlesource.gerrit.plugins.lfs.AuthInfo generateAuthInfo ( java.lang.String operation , org.eclipse.jgit.lfs.lib.AnyLongObjectId id , java.time.Instant now , java.lang.Long expiresIn ) { com.googlesource.gerrit.plugins.lfs.fs.LfsFsRequestAuthorizer.LfsFsAuthToken token = new com.googlesource.gerrit.plugins.lfs.fs.LfsFsRequestAuthorizer.LfsFsAuthToken ( operation , id , now , expiresIn ) ; return new com.googlesource.gerrit.plugins.lfs.AuthInfo ( processor.serialize ( token ) , token.issued , token.expiresIn ) ; }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > putAsync ( K key , V value ) ;
public com.google.common.util.concurrent.ListenableFuture < com.google.gerrit.server.account.AccountGroupCollection > get ( com.google.gerrit.reviewdb.AccountGroup.ExternalNameKey externalName ) { return byExternalName.get ( externalName ) ; }
public void testCreateProjectWithNonExistingOwner_UnprocessableEntity ( ) throws java.io.IOException { com.google.gerrit.server.project.CreateProject.Input in = new com.google.gerrit.server.project.CreateProject.Input ( ) ; in.owners = java.util.Collections.singletonList ( "non-existing-group" ) ; com.google.gerrit.acceptance.RestResponse r = session.put ( "/projects/newProject" , in ) ; org.junit.Assert.assertEquals ( HttpStatus.SC_UNPROCESSABLE_ENTITY , r.getStatusCode ( ) ) ; }
public boolean canRunReceivePack ( ) { for ( com.google.gerrit.reviewdb.AccountGroup.UUID group : receiveGroups ) { if ( match ( group ) ) { return true ; } } return false ; }
private com.google.gerrit.prettify.common.EditList getEditList ( ) { return new com.google.gerrit.prettify.common.EditList ( edits , getContext ( ) , a.size ( ) , b.size ( ) ) ; }
public void start ( ) { graphiteReporter.start ( rate , com.googlesource.gerrit.plugins.metricsreporters.GerritGraphiteReporter.DEFAULT_RATE_UNIT ) ; }
private void initSignatures ( ) { setSignatureFactories ( org.apache.sshd.common.BaseBuilder.setUpDefaultSignatures ( true ) ) ; }
private static org.eclipse.jgit.revwalk.RevCommit lookupCommit ( org.eclipse.jgit.lib.Repository repository , org.eclipse.jgit.lib.ObjectId commitId ) throws java.io.IOException { try ( org.eclipse.jgit.revwalk.RevWalk revWalk = new org.eclipse.jgit.revwalk.RevWalk ( repository ) ) { return revWalk.parseCommit ( commitId ) ; } }
public void assertNoChangeRef ( com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.reviewdb.client.Change.Id changeId ) throws java.lang.Exception { try ( org.eclipse.jgit.lib.Repository repo = repoManager.openRepository ( project ) ) { com.google.common.truth.Truth.assertThat ( repo.exactRef ( com.google.gerrit.server.notedb.ChangeNoteUtil.changeRefName ( changeId ) ) ) . isNull ( ) ; } }
public void putApprovalFor ( com.google.gerrit.reviewdb.client.Account.Id reviewer , java.lang.String label , short value ) { approvals.put ( label , reviewer , com.google.common.base.Optional.of ( value ) ) ; }
public com.google.gerrit.common.data.ApprovalType byLabel ( java.lang.String labelName ) { return byLabel ( ) . get ( labelName.toLowerCase ( ) ) ; }
public boolean canAddGroup ( ) { return isOwner ( ) ; }
private void postRPC ( ) { if ( ( ( mySigned ) != null ) && ( ( available ) != null ) ) { renderSelf ( ) ; display ( ) ; } }
void authenticationSuccess ( java.lang.String user , com.google.gerrit.server.CurrentUser id ) { username = user ; identity = id ; identity.setAccessPath ( AccessPath.SSH_COMMAND ) ; authError = null ; }
com.google.common.base.Optional < java.util.Map < java.lang.String , com.googlesource.gerrit.plugins.quota.AccountLimitsConfig.RateLimit > > getRatelimits ( com.googlesource.gerrit.plugins.quota.AccountLimitsConfig.Type type ) { if ( ( rateLimits ) != null ) { return com.google.common.base.Optional.fromNullable ( rateLimits.row ( type ) ) ; } return com.google.common.base.Optional.absent ( ) ; }
public void negativeEndCharacterResultsInInvalidRange ( ) { com.google.gerrit.extensions.client.Comment.Range range = createRange ( 13 , 2 , 19 , ( - 1 ) ) ; com.google.gerrit.extensions.client.testing.RangeSubject.assertThat ( range ) . isInvalid ( ) ; }
public void printJson ( final java.lang.StringBuilder sb , final java.lang.String o ) { sb.append ( com.google.gwt.core.client.JsonUtils.escapeValue ( o ) ) ; }
public void setUp ( ) throws java.lang.Exception { project = new com.google.gerrit.reviewdb.client.Project.NameKey ( "test" ) ; org.eclipse.jgit.lib.Repository inMemoryRepo = repoManager.createRepository ( project ) ; repo = new org.eclipse.jgit.junit.TestRepository ( inMemoryRepo ) ; }
abstract void stop ( com.google.gerrit.server.plugins.PluginGuiceEnvironment env ) ;
public static com.google.gerrit.server.account.ExternalId.Key create ( @ com.google.gerrit.common.Nullable java.lang.String scheme , java.lang.String id ) { return new com.google.gerrit.server.account.AutoValue_ExternalId_Key ( com.google.common.base.Strings.emptyToNull ( scheme ) , id ) ; }
public boolean canUpdate ( ) { if ( ( GitRepositoryManager.REF_CONFIG.equals ( refName ) ) && ( ! ( projectControl.isOwner ( ) ) ) ) { return false ; } return canPerform ( Permission.PUSH ) ; }
private void injectMode ( com.google.gerrit.client.diff.DiffInfo diffInfo , com.google.gwt.user.client.rpc.AsyncCallback < java.lang.Void > cb ) { new net.codemirror.mode.ModeInjector ( ) . add ( getContentType ( diffInfo.meta_a ( ) ) ) . add ( getContentType ( diffInfo.meta_b ( ) ) ) . inject ( cb ) ; }
private java.util.Collection < com.google.gerrit.extensions.common.AccountInfo > toAccountInfo ( java.util.Collection < com.google.gerrit.reviewdb.client.Account.Id > accounts ) { return accounts.stream ( ) . map ( accountLoader :: get ) . sorted ( AccountInfoComparator.ORDER_NULLS_FIRST ) . collect ( java.util.stream.Collectors.toList ( ) ) ; }
public void resetToDefaults ( ) { maximumPageSize = com.google.gerrit.reviewdb.AccountGeneralPreferences.DEFAULT_PAGESIZE ; showSiteHeader = true ; useFlashClipboard = true ; copySelfOnEmail = false ; displayPatchSetsInReverseOrder = false ; displayPersonNameInReviewCategory = false ; downloadUrl = null ; downloadCommand = null ; dateFormat = null ; timeFormat = null ; }
public void testEntityNbsp ( ) { final com.google.gwtexpui.safehtml.client.SafeHtmlBuilder b = new com.google.gwtexpui.safehtml.client.SafeHtmlBuilder ( ) ; com.google.common.truth.Truth.assertThat ( b ) . isSameAs ( b.nbsp ( ) ) ; com.google.common.truth.Truth.assertThat ( b.asString ( ) ) . isEqualTo ( "&nbsp;" ) ; }
public void onSuccess ( com.google.gerrit.client.rpc.NativeString result ) { com.google.gerrit.client.Gerrit.getUserAccount ( ) . username ( newUserName ) ; userNameLbl.setText ( newUserName ) ; userNameLbl.setVisible ( true ) ; userNameTxt.setVisible ( false ) ; setUserName.setVisible ( false ) ; }
public static com.google.gerrit.common.data.PermissionRule newRule ( com.google.gerrit.server.project.ProjectConfig project , com.google.gerrit.reviewdb.client.AccountGroup.UUID groupUUID ) { com.google.gerrit.common.data.GroupReference group = new com.google.gerrit.common.data.GroupReference ( groupUUID , groupUUID.get ( ) ) ; group = project.resolve ( group ) ; return new com.google.gerrit.common.data.PermissionRule ( group ) ; }
public void onFailure ( java.lang.Throwable caught ) { enableButtons ( true ) ; }
private java.lang.String extractWhat ( com.google.gerrit.sshd.DispatchCommand dcmd , boolean hideSensitive ) { if ( dcmd == null ) { return "Command was already destroyed" ; } return hideSensitive ? dcmd.getFormattedMaskedArguments ( "." ) : extractWhat ( dcmd ) ; }
protected void configure ( ) { factory ( AbandonedSender.Factory.class ) ; factory ( CommentSender.Factory.class ) ; factory ( RevertedSender.Factory.class ) ; }
com.google.gerrit.server.change.PatchSetInserter create ( com.google.gerrit.server.notedb.ChangeNotes notes , com.google.gerrit.reviewdb.client.PatchSet.Id psId , org.eclipse.jgit.lib.ObjectId commitId ) ;
final native void addValue ( java.lang.String v ) ;
public void onSuccess ( com.google.gerrit.client.changes.ChangeInfo result ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( id ) ) ; hide ( ) ; }
public void insert ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.Account account ) throws com.google.gwtorm.server.OrmException , java.io.IOException { db.accounts ( ) . insert ( com.google.common.collect.ImmutableSet.of ( account ) ) ; createUserBranch ( account ) ; }
synchronized void clean ( int expect ) { if ( ( ( self ) == null ) && ( ( pending ) == 0 ) ) { start = com.google.gerrit.common.TimeUtil.nowMs ( ) ; } pending = expect ; ensureScheduled ( ) ; }
public java.util.Set < com.google.gerrit.reviewdb.Account > listAccounts ( final com.google.gerrit.reviewdb.AccountGroup.UUID groupUUID , final com.google.gerrit.reviewdb.Project.NameKey project ) throws com.google.gerrit.common.errors.NoSuchGroupException , com.google.gerrit.server.project.NoSuchProjectException , com.google.gwtorm.client.OrmException { return listAccounts ( groupUUID , project , new java.util.HashSet < com.google.gerrit.reviewdb.AccountGroup.UUID > ( ) ) ; }
public synchronized com.google.gerrit.server.account.AccountState get ( com.google.gerrit.reviewdb.client.Account.Id accountId ) { com.google.gerrit.server.account.AccountState state = byId.get ( accountId ) ; if ( state != null ) { return state ; } return com.google.gerrit.testutil.FakeAccountCache.newState ( new com.google.gerrit.reviewdb.client.Account ( accountId , com.google.gerrit.common.TimeUtil.nowTs ( ) ) ) ; }
protected void configure ( ) { factory ( ForwardingRemovalListener.Factory.class ) ; }
public void execute ( ) { try { onResult ( lastScript , false ) ; } finally { RpcStatus.INSTANCE.onRpcComplete ( null ) ; } }
private static void assertToNotifyValue ( java.lang.String filter , java.util.Set < com.google.gerrit.server.account.ProjectWatches.NotifyType > notifyTypes , java.lang.String expectedNotifyValue ) { com.google.gerrit.server.account.ProjectWatches.NotifyValue nv = com.google.gerrit.server.account.ProjectWatches.NotifyValue.create ( filter , notifyTypes ) ; com.google.common.truth.Truth.assertThat ( nv.toString ( ) ) . isEqualTo ( expectedNotifyValue ) ; }
public com.google.gerrit.extensions.restapi.RestView < com.google.gerrit.server.change.RevisionResource > list ( ) throws com.google.gerrit.extensions.restapi.AuthException { return list.get ( ) ; }
private int getBackendSupportedLimit ( ) { return indexConfig.maxLimit ( ) ; }
public com.google.gerrit.server.WebLinks get ( ) { com.google.gerrit.server.WebLinks webLinks = new com.google.gerrit.server.WebLinks ( patchSetLinks , projectLinks ) ; return webLinks ; }
private void parse ( com.google.gitiles.doc.MarkdownConfig cfg , java.lang.String markdown ) { node = com.google.gitiles.doc.GitilesMarkdown.parse ( cfg , markdown ) ; extractSiteTitle ( ) ; extractRefLinks ( markdown ) ; }
public org.eclipse.jgit.lib.PersonIdent newRefLogIdent ( ) { return newRefLogIdent ( new java.util.Date ( ) , java.util.TimeZone.getDefault ( ) ) ; }
protected void preDisplay ( com.google.gerrit.client.projects.ConfigInfoCache.Entry result ) { commentLinkProcessor = result.getCommentLinkProcessor ( ) ; setTheme ( result.getTheme ( ) ) ; com.google.gerrit.client.diff.DiffInfo diffInfo = diff ; diff = null ; display ( diffInfo ) ; }
com.google.gerrit.server.account.externalids.ExternalId get ( com.google.gerrit.server.account.externalids.ExternalId.Key key ) throws java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { checkReadEnabled ( ) ; try ( org.eclipse.jgit.lib.Repository repo = repoManager.openRepository ( allUsersName ) ) { return com.google.gerrit.server.account.externalids.ExternalIdNotes.loadReadOnly ( repo ) . get ( key ) . orElse ( null ) ; } }
public org.eclipse.jgit.lib.ObjectReader newReader ( ) { return new com.google.gerrit.server.git.InMemoryInserter.Reader ( ) ; }
public void onSuccess ( com.google.gerrit.client.changes.CommentInfo result ) { enableEdit ( true ) ; set ( result ) ; setEdit ( false ) ; if ( autoClosed ) { setOpen ( false ) ; } }
public void evict ( final com.google.gerrit.client.reviewdb.AccountGroup group ) { byId.remove ( group.getId ( ) ) ; byName.remove ( group.getNameKey ( ) ) ; byExternalName.remove ( group.getExternalNameKey ( ) ) ; }
public void index ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.Change change ) throws com.google.gwtorm.server.OrmException , java.io.IOException { index ( newChangeData ( db , change ) ) ; }
protected void formatChange ( ) throws com.google.gerrit.server.mail.EmailException { appendText ( velocifyFile ( "Abandoned.vm" ) ) ; }
public void onSuccess ( final com.google.gerrit.client.reviewdb.Account result ) { if ( result != null ) { com.google.gerrit.client.Gerrit.postSignIn ( result ) ; } else { com.google.gwt.user.client.Cookies.removeCookie ( com.google.gerrit.client.Gerrit.ACCOUNT_COOKIE ) ; com.google.gerrit.client.Gerrit.refreshMenuBar ( ) ; } showInitialScreen ( ) ; }
public com.google.gerrit.server.git.MergeSuperSet setMergeOpRepoManager ( com.google.gerrit.server.git.MergeOpRepoManager orm ) { com.google.common.base.Preconditions.checkState ( ( ( this . orm ) == null ) ) ; this . orm = com.google.common.base.Preconditions.checkNotNull ( orm ) ; closeOrm = false ; return this ; }
public void visit ( org.commonmark.node.IndentedCodeBlock node ) { codeInPre ( null , node.getLiteral ( ) ) ; }
public void onSuccess ( java.lang.Void result ) { net.codemirror.theme.ThemeLoader.loadTheme ( prefs.theme ( ) , themeCallback ) ; group2.done ( ) ; group3.done ( ) ; }
static void setForwardedEvent ( java.lang.Boolean b ) { com.ericsson.gerrit.plugins.highavailability.Context.FORWARDED_EVENT.set ( b ) ; }
public void listNonExistingGroupMembers_NotFound ( ) throws java.lang.Exception { try { gApi.groups ( ) . id ( "non-existing" ) . members ( ) ; } catch ( com.google.gerrit.extensions.restapi.ResourceNotFoundException expected ) { } }
java.lang.Runnable openCloseAll ( final net.codemirror.lib.CodeMirror cm ) { return new java.lang.Runnable ( ) { @ java.lang.Override public void run ( ) { com.google.gerrit.client.diff.CommentGroup group = getCommentGroupOnActiveLine ( cm ) ; if ( group != null ) { group.openCloseAll ( ) ; } } } ; }
public com.googlecode.prolog_cafe.lang.Operation exec ( com.googlecode.prolog_cafe.lang.Prolog engine ) { engine.setB0 ( ) ; com.googlecode.prolog_cafe.lang.Term a1 ; a1 = arg1 ; a1 = a1.dereference ( ) ; engine.setException ( a1 ) ; return cont ; }
public static com.google.gerrit.client.rpc.RestApi revision ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , java.lang.String revision ) { return com.google.gerrit.client.changes.ChangeApi.change ( project , id ) . view ( "revisions" ) . id ( revision ) ; }
boolean needsCookieRefresh ( ) { return ( refreshCookieAt ) <= ( com.google.gerrit.common.TimeUtil.nowMs ( ) ) ; }
public void deleteBranch_Forbidden ( ) throws java.lang.Exception { setApiUser ( user ) ; assertDeleteForbidden ( testBranch ) ; }
private void appendLineText ( final com.google.gwtexpui.safehtml.client.SafeHtmlBuilder m , final int lineNumberMinusOne , final com.google.gerrit.client.patches.PatchLine.Type type , final com.google.gerrit.prettify.common.SparseHtmlFile src , final int i ) { appendLineText ( m , lineNumberMinusOne , type , src.getSafeHtmlLine ( i ) ) ; }
public void setGroupReference ( java.lang.String name , com.google.gerrit.common.data.GroupReference value ) { com.google.gerrit.common.data.GroupReference groupRef = projectConfig.resolve ( value ) ; setString ( name , groupRef.toConfigValue ( ) ) ; }
void onDeleteRevision ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { if ( com.google.gwt.user.client.Window.confirm ( Resources.C.deleteDraftRevision ( ) ) ) { com.google.gerrit.client.change.DraftActions.delete ( changeId , revision , publish , deleteRevision , deleteChange ) ; } }
public void setSpellCheck ( boolean spell ) { getElement ( ) . setPropertyBoolean ( "spellcheck" , spell ) ; }
protected void configure ( ) { factory ( AddReviewer.Factory.class ) ; factory ( RemoveReviewer.Factory.class ) ; factory ( PatchScriptFactory.Factory.class ) ; factory ( SaveDraft.Factory.class ) ; }
private static java.lang.String getJsPluginPath ( com.google.gerrit.server.plugins.Plugin plugin ) { return java.lang.String.format ( "/plugins/%s/static/%s" , plugin.getName ( ) , plugin.getSrcFile ( ) . getName ( ) ) ; }
public void setUp ( ) throws java.lang.Exception { admins = groupCache.get ( new com.google.gerrit.reviewdb.client.AccountGroup.NameKey ( "Administrators" ) ) . getGroupUUID ( ) ; setUpChanges ( ) ; setUpPermissions ( ) ; }
public void index ( com.google.gerrit.server.query.change.ChangeData cd ) throws java.io.IOException { try { indexTask ( cd ) . call ( ) ; } catch ( java.lang.RuntimeException e ) { throw e ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.index.ChangeIndexer.MAPPER.apply ( e ) ; } }
public void execute ( java.lang.Runnable command ) { com.google.common.truth.Truth.assertThat ( command.toString ( ) ) . isEqualTo ( "(Events-log) Insert Event" ) ; command.run ( ) ; }
public java.util.List < com.google.gerrit.reviewdb.client.PatchSetApproval > approvals ( com.google.inject.Provider < com.google.gerrit.reviewdb.server.ReviewDb > db ) throws com.google.gwtorm.server.OrmException { return com.google.common.collect.ImmutableList.copyOf ( approvalsMap ( db ) . values ( ) ) ; }
public com.google.gerrit.index.query.Predicate < T > copy ( java.util.Collection < ? extends com.google.gerrit.index.query.Predicate < T > > children ) { return new com.google.gerrit.index.query.OrPredicate ( children ) ; }
void onRebaseEdit ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { com.google.gerrit.client.change.EditActions.rebaseEdit ( changeId , publishEdit , rebaseEdit , deleteEdit ) ; }
protected void preDisplay ( final com.google.gerrit.client.data.ChangeDetail r ) { if ( ( starChange ) != null ) { setStarred ( r.isStarred ( ) ) ; } display ( r ) ; }
public void newPatchSetByOwnerOnReviewableChangeToWip ( ) throws java.lang.Exception { com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableChange ( ) ; pushTo ( sc , "refs/for/master%wip" , sc.owner ) ; assertThat ( sender ) . notSent ( ) ; }
public void onLoad ( ) { super . onLoad ( ) ; com.google.gerrit.client.Gerrit.addSignOutHandler ( signedInListener ) ; }
public void onSignOut ( final com.google.gerrit.client.SignOutEvent event ) { actionsPanel.clear ( ) ; actionsPanel.setVisible ( false ) ; regSignOut.removeHandler ( ) ; regSignOut = null ; }
public void onSend ( ) { Util.MANAGE_SVC.revertChange ( getPatchSetId ( ) , getMessageText ( ) , createCallback ( ) ) ; }
public java.util.Collection < com.google.gerrit.common.data.AccessSection > getAccessSections ( ) { return com.google.gerrit.server.git.ProjectConfig.sort ( accessSections.values ( ) ) ; }
public org.eclipse.jgit.lib.Config getEffective ( ) { return config ; }
public static void restoreTime ( ) { org.joda.time.DateTimeUtils.setCurrentMillisSystem ( ) ; }
public int next ( ) throws com.google.gwtorm.server.OrmException { counterLock.lock ( ) ; try { if ( ( counter ) >= ( limit ) ) { acquire ( batchSize ) ; } return ( counter ) ++ ; } finally { counterLock.unlock ( ) ; } }
public boolean canForwardAgent ( org.apache.sshd.common.Session session ) { return false ; }
public void registerKeys ( ) { }
void changeProjectAccess ( com.google.gerrit.reviewdb.client.Project.NameKey projectName , java.lang.String baseRevision , java.lang.String message , java.util.List < com.google.gerrit.common.data.AccessSection > sections , com.google.gerrit.reviewdb.client.Project.NameKey parentProjectName , com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.ProjectAccess > callback ) ;
public long getId ( ) { return com.google.gerrit.gpg.Fingerprint.getId ( fp ) ; }
private void setSitePath ( java.lang.String path ) { sitePath = java.nio.file.Paths.get ( path ) ; }
public com.google.gerrit.server.CurrentUser getCurrentUser ( ) { return user ; }
private boolean list ( ) { for ( com.google.gerrit.index.IndexDefinition < ? , ? , ? > def : indexDefs ) { java.lang.System.out.format ( "%s\n" , def.getName ( ) ) ; } return true ; }
public boolean canSubmit ( ) { return canPerform ( Permission.SUBMIT ) ; }
public void incrementBy ( long delta ) { com.google.common.base.Preconditions.checkArgument ( ( delta >= 0 ) , "counter delta must be >= 0" ) ; m.inc ( delta ) ; }
public static void all ( com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.account.AccountCapabilities > cb , java.lang.String ... filter ) { new com.google.gerrit.client.rpc.RestApi ( "accounts/self/capabilities" ) . addParameter ( "q" , filter ) . get ( cb ) ; }
public java.lang.String commitMessage ( ) throws com.google.gwtorm.server.OrmException , java.io.IOException { if ( ( commitMessage ) == null ) { if ( ! ( loadCommitData ( ) ) ) { return null ; } } return commitMessage ; }
private void add ( com.google.gerrit.client.actions.ActionButton b ) { ( ( com.google.gwt.user.client.ui.FlowPanel ) ( getWidget ( ) ) ) . add ( b ) ; }
public void batchAbandon ( com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.server.CurrentUser user , java.util.Collection < com.google.gerrit.server.project.ChangeControl > controls , java.lang.String msgTxt ) throws com.google.gerrit.extensions.restapi.RestApiException , com.google.gerrit.server.git.UpdateException { batchAbandon ( project , user , controls , msgTxt , NotifyHandling.ALL , com.google.common.collect.ImmutableListMultimap.of ( ) ) ; }
public void onClick ( final com.google.gwt.user.client.ui.Widget sender ) { doLinkIdentity ( ) ; }
protected void onExit ( final int rc ) { hooks.removeEventListener ( listener ) ; synchronized ( taskLock ) { done = true ; } super . onExit ( rc ) ; }
private static java.util.List < com.google.gerrit.server.auth.openid.OpenIdProviderPattern > toPatterns ( org.eclipse.jgit.lib.Config cfg , java.lang.String name ) { java.lang.String [ ] s = cfg.getStringList ( "auth" , null , name ) ; if ( ( s.length ) == 0 ) { s = new java.lang.String [ ] { "http://" , "https://" } ; } java.util.List < com.google.gerrit.server.auth.openid.OpenIdProviderPattern > r = new java.util.ArrayList < com.google.gerrit.server.auth.openid.OpenIdProviderPattern > ( ) ; for ( java.lang.String pattern : s ) { r.add ( com.google.gerrit.server.auth.openid.OpenIdProviderPattern.create ( pattern ) ) ; } return java.util.Collections.unmodifiableList ( r ) ; }
protected void onMovePointerTo ( java.lang.String projectName ) { if ( ( ! ( projectsPopup.isPoppingUp ( ) ) ) || ( "" . equals ( sugestParent.getText ( ) ) ) ) { sugestParent.setText ( projectName ) ; } }
public void onSuccess ( com.google.gerrit.client.groups.GroupMap result ) { cb.onSuccess ( ( ! ( result.isEmpty ( ) ) ) ) ; }
void populateDownloadCommandLinks ( com.google.gerrit.client.info.DownloadInfo.DownloadSchemeInfo schemeInfo ) { commands.clear ( ) ; for ( com.google.gerrit.client.info.DownloadInfo.DownloadCommandInfo cmd : getCommands ( schemeInfo ) ) { commands.add ( new com.google.gerrit.client.download.DownloadCommandLink ( copyLabel , cmd ) ) ; } commands.select ( ) ; }
public void run ( ) { int v = prefs.tabSize ( ) ; for ( net.codemirror.lib.CodeMirror cm : view.getCms ( ) ) { cm.setOption ( "tabSize" , v ) ; } }
private void createHeaderLogo ( ) { final com.google.gwt.user.client.ui.FlowPanel headerLogo = new com.google.gwt.user.client.ui.FlowPanel ( ) ; headerLogo.setStyleName ( "gerrit-OpenID-logobox" ) ; headerLogo.add ( new com.google.gwt.user.client.ui.Image ( icons.openidLogo ( ) ) ) ; formBody.add ( headerLogo ) ; }
public void onFailure ( final java.lang.Throwable caught ) { enableUI ( true ) ; if ( caught instanceof com.google.gerrit.common.errors.InvalidUserNameException ) { new com.google.gerrit.client.ErrorDialog ( Util.C.invalidUserName ( ) ) . center ( ) ; } else { super . onFailure ( caught ) ; } }
public void completeRewriteIncludesNewline ( ) throws java.lang.Exception { java.lang.String a = "abc1\n" ; java.lang.String b = "def2\n" ; com.google.common.truth.Truth.assertThat ( com.google.gerrit.server.patch.IntraLineLoaderTest.intraline ( a , b ) ) . isEqualTo ( com.google.gerrit.server.patch.IntraLineLoaderTest.ref ( ) . replace ( "abc1\n" , "def2\n" ) . edits ) ; }
private static void diffReviewers ( java.util.List < java.lang.String > diffs , com.google.gerrit.server.notedb.ChangeBundle bundleA , com.google.gerrit.server.notedb.ChangeBundle bundleB ) { com.google.gerrit.server.notedb.ChangeBundle.diffSets ( diffs , bundleA.reviewers.all ( ) , bundleB.reviewers.all ( ) , "reviewer" ) ; }
public boolean setUsernamesForRepositoryRole ( java.lang.String role , java.util.List < java.lang.String > usernames ) { return false ; }
public void listNonExistingGroupIncludes_NotFound ( ) throws java.lang.Exception { java.lang.String name = name ( "non-existing" ) ; com.google.common.truth.Truth.assertThat ( adminSession.get ( ( ( "/groups/" + name ) + "/groups/" ) ) . getStatusCode ( ) ) . isEqualTo ( HttpStatus.SC_NOT_FOUND ) ; }
public static java.lang.String toEditScreen ( com.google.gerrit.reviewdb.client.PatchSet.Id revision , java.lang.String fileName ) { return com.google.gerrit.client.Dispatcher.toPatch ( "edit" , null , revision , fileName , null , 0 ) ; }
public static net.codemirror.lib.CodeMirror create ( com.google.gwt.dom.client.Element p , net.codemirror.lib.Configuration cfg ) { net.codemirror.lib.CodeMirror cm = net.codemirror.lib.CodeMirror.newCM ( p , cfg ) ; net.codemirror.lib.Extras.attach ( cm ) ; return cm ; }
public void setVisibleLength ( int len ) { suggestBox.setVisibleLength ( len ) ; }
private static com.google.gerrit.server.account.AccountState newState ( com.google.gerrit.reviewdb.client.Account account ) { return new com.google.gerrit.server.account.AccountState ( new com.google.gerrit.server.config.AllUsersName ( com.google.gerrit.server.config.AllUsersNameProvider.DEFAULT ) , account , com.google.common.collect.ImmutableSet.of ( ) , com.google.common.collect.ImmutableMap.of ( ) , com.google.gerrit.extensions.client.GeneralPreferencesInfo.defaults ( ) ) ; }
com.google.gerrit.server.permissions.ChangeControl controlFor ( com.google.gerrit.server.notedb.ChangeNotes notes ) { return changeControlFactory.create ( controlForRef ( notes.getChange ( ) . getDest ( ) ) , notes ) ; }
public com.google.gerrit.server.api.changes.SuggestedReviewersRequest suggestReviewers ( java.lang.String query ) throws com.google.gerrit.extensions.restapi.RestApiException { return suggestReviewers ( ) . withQuery ( query ) ; }
public com.vmware.gerrit.owners.common.Gerrit214ManualRequestContext openAs ( com.google.gerrit.reviewdb.client.Account.Id userId ) throws com.google.gwtorm.server.OrmException { return new com.vmware.gerrit.owners.common.Gerrit214ManualRequestContext ( identifiedUserFactory.create ( userId ) , schemaFactory , requestContext ) ; }
com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > rewrite ( com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > in , int start ) throws com.google.gerrit.server.query.QueryParseException ;
public com.google.gerrit.server.notedb.ChangeNotes createForNew ( com.google.gerrit.reviewdb.client.Change change ) throws com.google.gwtorm.server.OrmException { return new com.google.gerrit.server.notedb.ChangeNotes ( repoManager , migration , allUsersProvider , change.getProject ( ) , change ) . load ( ) ; }
private final native com.google.gerrit.client.rpc.NativeMap < com.google.gwt.core.client.JavaScriptObject > _permitted_labels ( ) ;
private static java.lang.String findId ( java.util.Collection < com.google.gerrit.server.account.ExternalId > extIds ) { for ( com.google.gerrit.server.account.ExternalId extId : extIds ) { if ( extId.isScheme ( com.google.gerrit.server.account.ExternalId.SCHEME_GERRIT ) ) { return extId.key ( ) . id ( ) ; } } return null ; }
public static void clearHttpPassword ( java.lang.String account , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.VoidResult > cb ) { com.google.gerrit.client.account.AccountApi.accounts ( ) . id ( account ) . view ( "password.http" ) . delete ( cb ) ; }
private void writeFile ( javax.servlet.http.HttpServletRequest req , javax.servlet.http.HttpServletResponse res ) throws java.io.IOException { res.setStatus ( HttpServletResponse.SC_NO_CONTENT ) ; streamRequestToFile ( req , resolveFile ( req ) ) ; }
public void onFailure ( final java.lang.Throwable caught ) { addNew.setEnabled ( true ) ; nameBox.setEnabled ( true ) ; filterTxt.setEnabled ( true ) ; super . onFailure ( caught ) ; }
private int getPluginConfigInt ( java.lang.String key , int defaultValue ) { return getCurrentPluginConfig ( ) . getInt ( key , gerritConfig.getInt ( com.googlesource.gerrit.plugins.its.base.its.ItsConfig.PLUGIN , pluginName , key , defaultValue ) ) ; }
public static com.google.gerrit.pgm.init.ConsoleUI getInstance ( final boolean batchMode ) { java.io.Console console = ( batchMode ) ? null : java.lang.System.console ( ) ; return console != null ? new com.google.gerrit.pgm.init.ConsoleUI.Interactive ( console ) : new com.google.gerrit.pgm.init.ConsoleUI.Batch ( ) ; }
public void index ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { index.apply ( account , new com.google.gerrit.server.account.Index.Input ( ) ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot index account" , e ) ; } }
public static com.google.gerrit.lucene.LuceneIndexModule latestVersionWithOnlineUpgrade ( boolean slave ) { return new com.google.gerrit.lucene.LuceneIndexModule ( null , 0 , true , slave ) ; }
public int hashCode ( ) { return java.util.Objects.hash ( revision , oldRevision , path ) ; }
protected java.nio.file.Path getResourcePath ( java.lang.String pathInfo ) throws java.io.IOException { return fonts.resolve ( pathInfo ) ; }
public void noRevisionOptions ( ) throws java.lang.Exception { com.google.gerrit.extensions.common.ChangeInfo c = info ( changeId ) ; com.google.common.truth.Truth.assertThat ( c.currentRevision ) . isNull ( ) ; com.google.common.truth.Truth.assertThat ( c.revisions ) . isNull ( ) ; }
public void run ( ) { try { wrapped.call ( ) ; } catch ( java.lang.Exception e ) { com.google.common.base.Throwables.propagateIfPossible ( e ) ; throw new java.lang.RuntimeException ( e ) ; } }
public void myExternalIds ( com.google.gwtjsonrpc.common.AsyncCallback < java.util.List < com.google.gerrit.reviewdb.client.AccountExternalId > > callback ) { externalIdDetailFactory.create ( ) . to ( callback ) ; }
private void checkHostIndex ( ) { checkView ( ( ( hostName ) != null ) , "missing hostName on %s view" , type ) ; checkView ( ( ( servletPath ) != null ) , "missing servletPath on %s view" , type ) ; }
private java.lang.Iterable < com.google.gerrit.reviewdb.client.Project.NameKey > scan ( ) { if ( ( matchPrefix ) != null ) { return projectCache.byName ( matchPrefix ) ; } else { return projectCache.all ( ) ; } }
public com.google.gerrit.server.schema.Schema_77.LegacyLabelType byLabel ( com.google.gerrit.reviewdb.client.LabelId labelId ) { com.google.gerrit.server.schema.Schema_77.LegacyLabelType t = byId.get ( labelId.get ( ) ) ; return t != null ? t : ( ( com.google.gerrit.server.schema.Schema_77.LegacyLabelType ) ( super . byLabel ( labelId ) ) ) ; }
static com.google.gerrit.reviewdb.server.ReviewDb unwrap ( com.google.gerrit.reviewdb.server.ReviewDb db ) { if ( db instanceof com.google.gerrit.server.update.BatchUpdateReviewDb ) { db = ( ( com.google.gerrit.server.update.BatchUpdateReviewDb ) ( db ) ) . unsafeGetDelegate ( ) ; } return com.google.gerrit.reviewdb.server.ReviewDbUtil.unwrapDb ( db ) ; }
com.google.gerrit.extensions.restapi.Response < com.google.gerrit.extensions.common.ChangeInfo > apply ( com.google.gerrit.server.change.RevisionResource rsrc ) throws com.google.gwtorm.server.OrmException { return com.google.gerrit.server.change.GetChange.cache ( json.format ( rsrc ) ) ; }
public void testGcAll ( ) throws com.jcraft.jsch.JSchException , java.io.IOException { java.lang.String response = sshSession.exec ( "gerrit gc --all" ) ; org.junit.Assert.assertFalse ( sshSession.hasError ( ) ) ; assertNoError ( response ) ; gcAssert.assertHasPackFile ( allProjects , project1 , project2 , project3 ) ; }
protected void preDisplay ( final com.google.gerrit.client.data.AccountDashboardInfo r ) { display ( r ) ; }
public com.google.gerrit.server.IdentifiedUser create ( java.net.SocketAddress remotePeer , com.google.gerrit.reviewdb.client.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( capabilityControlFactory , starredChangesUtil , authConfig , realm , anonymousCowardName , canonicalUrl , accountCache , groupBackend , disableReverseDnsLookup , com.google.inject.util.Providers.of ( remotePeer ) , null , id , null ) ; }
org.eclipse.jgit.lib.ObjectId getResult ( ) { return result ; }
public void run ( ) { cm.setOption ( "showTrailingSpace" , show ) ; }
public com.google.gerrit.rules.PrologEnvironment newPrologEnvironment ( java.lang.String name , java.io.Reader in ) throws com.googlecode.prolog_cafe.exceptions.CompileException { com.googlecode.prolog_cafe.lang.PrologMachineCopy pmc = rulesCache.loadMachine ( name , in ) ; return envFactory.create ( pmc ) ; }
public void fire ( com.google.gerrit.reviewdb.client.Project.NameKey project , org.eclipse.jgit.lib.RefUpdate refUpdate , org.eclipse.jgit.transport.ReceiveCommand.Type type , com.google.gerrit.reviewdb.client.Account.Id updater ) { fire ( project , refUpdate.getName ( ) , refUpdate.getOldObjectId ( ) , refUpdate.getNewObjectId ( ) , type , util.accountInfo ( updater ) ) ; }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > putAsync ( final K key , final V value ) { self.put ( new net.sf.ehcache.Element ( key , value ) ) ; return com.google.common.util.concurrent.Futures.immediateFuture ( null ) ; }
public java.lang.String toString ( ) { return com.google.common.base.Objects.toStringHelper ( "index" ) . add ( "p" , source ) . add ( "limit" , limit ) . toString ( ) ; }
public com.google.common.collect.ImmutableMap < com.google.gerrit.server.account.ProjectWatches.ProjectWatchKey , com.google.common.collect.ImmutableSet < com.google.gerrit.server.account.ProjectWatches.NotifyType > > getProjectWatches ( ) { if ( ( projectWatches ) == null ) { parse ( ) ; } return projectWatches ; }
public static org.apache.lucene.index.Term idTerm ( com.google.gerrit.server.index.Schema < com.google.gerrit.server.query.change.ChangeData > schema , com.google.gerrit.server.query.change.ChangeData cd ) { return com.google.gerrit.lucene.QueryBuilder.intTerm ( com.google.gerrit.server.query.change.LegacyChangeIdPredicate.idField ( schema ) . getName ( ) , cd.getId ( ) . get ( ) ) ; }
public java.util.Collection < com.google.gerrit.client.reviewdb.ProjectRight > getWildcardRights ( ) { return get ( wildProject ) . getRights ( ) ; }
public com.google.common.util.concurrent.ListenableFuture < V > get ( K key ) { return com.google.common.util.concurrent.Futures.compose ( cache.get ( wrapKey ( key ) ) , unpack ) ; }
boolean hasHeader ( ) { return header ; }
public static boolean isChangeRef ( java.lang.String name ) { return ( com.google.gerrit.reviewdb.client.PatchSet.Id.fromRef ( name ) ) != null ; }
protected void init ( ) throws com.google.gerrit.common.errors.EmailException { super . init ( ) ; ccAllApprovals ( ) ; bccStarredBy ( ) ; includeWatchers ( NotifyType.ABANDONED_CHANGES ) ; removeUsersThatIgnoredTheChange ( ) ; }
public void validateLocalDomain ( ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( com.google.gerrit.server.mail.send.OutgoingEmailValidator.isValid ( "foo@bar.local" ) ) . isTrue ( ) ; }
public com.googlecode.prolog_cafe.lang.NumberTerm shiftRight ( com.googlecode.prolog_cafe.lang.NumberTerm t ) { throw new com.googlecode.prolog_cafe.exceptions.IllegalTypeException ( "integer" , this ) ; }
public static com.google.gerrit.client.rpc.RestApi edit ( int id ) { return com.google.gerrit.client.changes.ChangeApi.change ( id ) . view ( "edit" ) ; }
public static com.google.gerrit.server.query.Predicate < com.google.gerrit.reviewdb.client.AccountGroup > owner ( com.google.gerrit.reviewdb.client.AccountGroup.UUID ownerUuid ) { return new com.google.gerrit.server.query.group.GroupPredicates.GroupPredicate ( com.google.gerrit.server.index.group.GroupField.OWNER_UUID , GroupQueryBuilder.FIELD_OWNER , ownerUuid.get ( ) ) ; }
public void parseReviewer ( ) throws java.lang.Exception { assertParseSucceeds ( ( "Update change\n" + ( ( ( ( "\n" + "Branch: refs/heads/master\n" ) + "Patch-Set: 1\n" ) + "Reviewer: Change Owner <1@gerrit>\n" ) + "CC: Other Account <2@gerrit>\n" ) ) ) ; assertParseFails ( ( "Update change\n" + ( ( "\n" + "Patch-Set: 1\n" ) + "Reviewer: 1@gerrit\n" ) ) ) ; }
public void testUnsetForwardedEvent ( ) throws java.lang.Exception { com.ericsson.gerrit.plugins.multimaster.Context.setForwardedEvent ( true ) ; com.ericsson.gerrit.plugins.multimaster.Context.unsetForwardedEvent ( ) ; com.google.common.truth.Truth.assertThat ( com.ericsson.gerrit.plugins.multimaster.Context.isForwardedEvent ( ) ) . isFalse ( ) ; }
public void addReviewerByEmailToReviewableChangeInNoteDbSingly ( ) throws java.lang.Exception { addReviewerByEmailToReviewableChangeInNoteDb ( singly ( ) ) ; }
public void run ( ) { if ( com.google.gerrit.client.Gerrit.isSignedIn ( ) ) { reviewed.setValue ( true , true ) ; } navigate ( Direction.NEXT ) . run ( ) ; }
public com.google.gerrit.extensions.common.WebLinkInfo getPatchSetWebLink ( java.lang.String projectName , java.lang.String commit ) { return new com.google.gerrit.extensions.common.WebLinkInfo ( name , myImageUrl , java.lang.String.format ( placeHolderUrlProjectCommit , projectName , commit ) , Target.BLANK ) ; }
protected void onUnload ( ) { if ( ( recenter ) != null ) { recenter.removeHandler ( ) ; recenter = null ; } super . onUnload ( ) ; }
public void delete ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { delete.apply ( rsrc , new com.google.gerrit.extensions.common.Input ( ) ) ; } catch ( org.bouncycastle.openpgp.PGPException | com.google.gwtorm.server.OrmException | java.io.IOException | org.eclipse.jgit.errors.ConfigInvalidException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot delete GPG key" , e ) ; } }
private void setName ( boolean open ) { name.setInnerText ( ( open ? com.google.gerrit.client.change.Message.authorName ( info ) : com.google.gerrit.common.FormatUtil.elide ( com.google.gerrit.client.change.Message.authorName ( info ) , 20 ) ) ) ; }
public void onReplace ( org.eclipse.jgit.lib.ObjectId oldNotesRev , org.eclipse.jgit.lib.ObjectId newNotesRev , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId > toRemove , java.util.Collection < com.google.gerrit.server.account.externalids.ExternalId > toAdd ) { }
public void publish ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { publishDraftChange.apply ( change , null ) ; } catch ( com.google.gerrit.server.update.UpdateException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot publish change" , e ) ; } }
public void nameEscaperDoesNotEscapeSlashes ( ) throws java.lang.Exception { org.junit.Assert.assertEquals ( "foo/bar" , com.google.gitiles.GitilesUrls.NAME_ESCAPER.apply ( "foo/bar" ) ) ; }
public void testEvictGroupsOK ( ) throws java.lang.Exception { setupMocks ( Constants.GROUPS , com.ericsson.gerrit.plugins.evictcache.RestSessionTest.ID_RESPONSE , com.ericsson.gerrit.plugins.evictcache.RestSessionTest.OK_RESPONSE , com.ericsson.gerrit.plugins.evictcache.RestSessionTest.DO_NOT_THROW_EXCEPTION ) ; com.google.common.truth.Truth.assertThat ( restClient.evict ( com.ericsson.gerrit.plugins.evictcache.RestSessionTest.SOURCE_NAME , Constants.GROUPS , org.mockito.Mockito.mock ( AccountGroup.Id.class ) ) ) . isTrue ( ) ; }
public T decode ( com.google.protobuf.CodedInputStream in ) { T obj = newInstance ( ) ; mergeFrom ( in , obj ) ; return obj ; }
public com.google.gwtjsonrpc.client.VoidResult run ( com.google.gerrit.reviewdb.ReviewDb db ) throws com.google.gwtorm.client.OrmException { db.accountProjectWatches ( ) . update ( java.util.Collections.singleton ( watch ) ) ; accountProjectWatchCache.evict ( watch.getKey ( ) ) ; return com.google.gwtjsonrpc.client.VoidResult.INSTANCE ; }
protected com.google.gerrit.client.account.ContactPanel createWidget ( ) { return new com.google.gerrit.client.account.ContactPanel ( this ) ; }
public void isEnabledForAllRefsByDefault ( ) throws java.lang.Exception { com.googlesource.gerrit.plugins.uploadvalidator.ValidatorConfig config = getConfig ( ( "[plugin \"uploadvalidator\"]\n" + "blockedFileExtension = jar" ) ) ; com.google.common.truth.Truth.assertThat ( config.isEnabledForRef ( projectName , "anyRef" , "blockedFileExtension" ) ) . isTrue ( ) ; }
private static boolean preferUnified ( ) { return ( DiffView.UNIFIED_DIFF.equals ( com.google.gerrit.client.Gerrit.getUserPreferences ( ) . diffView ( ) ) ) || ( ( com.google.gwtexpui.user.client.UserAgent.isPortrait ( ) ) && ( com.google.gwtexpui.user.client.UserAgent.isMobile ( ) ) ) ; }
public boolean apply ( com.google.gerrit.reviewdb.client.Project project , java.lang.String hash , java.lang.String name , com.google.gerrit.server.git.GitRepositoryManager gitRepoManager ) { project.setRevision ( hash ) ; if ( ! ( com.amd.gerrit.plugins.manifestsubscription.ObjectId.isId ( name ) ) ) { project.setUpstream ( name ) ; } return true ; }
public static void doSignOut ( ) { com.google.gwt.user.client.Cookies.removeCookie ( com.google.gerrit.client.Gerrit.ACCOUNT_COOKIE ) ; com.google.gwt.user.client.Cookies.removeCookie ( com.google.gerrit.client.Gerrit.OPENIDUSER_COOKIE ) ; com.google.gerrit.client.Gerrit.refreshMenus ( ) ; }
public static < V > com.google.gerrit.index.Schema < V > schema ( com.google.gerrit.index.FieldDef < V , ? > ... fields ) { return com.google.gerrit.index.SchemaUtil.schema ( com.google.common.collect.ImmutableList.copyOf ( fields ) ) ; }
final void setRequireChangeId ( com.google.gerrit.extensions.common.InheritableBoolean v ) { setRequireChangeIdRaw ( v.name ( ) ) ; }
public java.lang.Boolean call ( ) throws com.google.gerrit.server.project.NoSuchProjectException { com.google.gerrit.server.project.ProjectControl projectControl = controlFor ( project ) ; return ( projectControl.isReadable ( ) ) && ( ( ! ( projectControl.isHidden ( ) ) ) || ( config.replicateHiddenProjects ( ) ) ) ; }
public boolean dryRun ( com.google.gerrit.server.git.CodeReviewCommit mergeTip , com.google.gerrit.server.git.CodeReviewCommit toMerge ) throws com.google.gerrit.server.git.MergeException { return ( ! ( args.mergeUtil.hasMissingDependencies ( args.mergeSorter , toMerge ) ) ) && ( args.mergeUtil.canMerge ( args.mergeSorter , args.repo , mergeTip , toMerge ) ) ; }
public void setSubmitType ( final com.google.gerrit.extensions.common.SubmitType type ) { submitType = type ; }
public final native int from ( ) ;
public void hide ( final boolean autoClosed ) { com.google.gwtexpui.user.client.UserAgent.fireDialogVisible ( false ) ; impl.visible ( false ) ; super . hide ( autoClosed ) ; }
private void initProjectLink ( com.google.gerrit.client.changes.ChangeInfo info ) { projectLink.setText ( info.project ( ) ) ; projectLink.setTargetHistoryToken ( com.google.gerrit.common.PageLinks.toChangeQuery ( com.google.gerrit.common.PageLinks.projectQuery ( info.project_name_key ( ) , info.status ( ) ) ) ) ; }
protected void configure ( ) { bind ( com.google.gerrit.httpd.GerritOptions.class ) . toInstance ( new com.google.gerrit.httpd.GerritOptions ( headless , slave ) ) ; if ( test ) { bind ( com.google.gerrit.server.securestore.SecureStore.class ) . toProvider ( com.google.gerrit.server.securestore.SecureStoreProvider.class ) ; } }
private com.google.gerrit.server.git.MergeTip cherryPickUnbornRoot ( com.google.gerrit.server.git.CodeReviewCommit n ) { com.google.gerrit.server.git.MergeTip mergeTip = com.google.gerrit.server.git.MergeTip.from ( n , com.google.common.collect.Lists.newArrayList ( n ) ) ; n.setStatusCode ( CommitMergeStatus.CLEAN_MERGE ) ; return mergeTip ; }
public java.lang.Object apply ( com.google.gerrit.server.change.DraftResource rsrc ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.extensions.restapi.BadRequestException , com.google.gerrit.extensions.restapi.ResourceConflictException , java.lang.Exception { return new com.google.gerrit.server.change.CommentInfo ( rsrc.getComment ( ) , null ) ; }
public void testStringNUL ( ) { com.google.gwtorm.nosql.IndexKeyBuilder ib = new com.google.gwtorm.nosql.IndexKeyBuilder ( ) ; ib.add ( " " ) ; com.google.gwtorm.nosql.IndexKeyBuilderTest.assertEqualToBuilderResult ( new byte [ ] { 0 , ( ( byte ) ( 255 ) ) } , ib ) ; }
public void setCookie ( javax.servlet.http.HttpServletResponse response , com.gitblit.models.UserModel user ) { }
public com.google.gerrit.extensions.client.GeneralPreferencesInfo setPreferences ( com.google.gerrit.extensions.client.GeneralPreferencesInfo in ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return setPreferences.apply ( account , in ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot set preferences" , e ) ; } }
public static org.eclipse.jgit.lib.Config noteDbEnabled ( ) { return com.google.gerrit.server.notedb.NotesMigration.allEnabledConfig ( ) ; }
public boolean canForgeGerritServerIdentity ( ) { return canPerform ( Permission.FORGE_SERVER ) ; }
public static java.lang.String toEditScreen ( @ com.google.gerrit.common.Nullable com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.reviewdb.client.PatchSet.Id revision , java.lang.String fileName ) { return com.google.gerrit.client.Dispatcher.toEditScreen ( project , revision , fileName , 0 ) ; }
private void addExternalId ( java.lang.String scheme , java.lang.String id , java.lang.String email ) throws java.lang.Exception { externalIdsUpdateFactory.create ( ) . insert ( db , com.google.gerrit.server.account.externalids.ExternalId.createWithEmail ( scheme , id , user.getAccountId ( ) , email ) ) ; reloadUser ( ) ; }
public void rebuildEmptySiteStartingWithNoteDbDisabed ( ) throws java.lang.Exception { assertNotesMigrationState ( NotesMigrationState.REVIEW_DB ) ; com.google.gerrit.acceptance.pgm.RebuildNoteDbIT.runGerrit ( "RebuildNoteDb" , "-d" , sitePath , "--show-stack-trace" ) ; assertNotesMigrationState ( NotesMigrationState.READ_WRITE_NO_SEQUENCE ) ; }
public final native void setSelection ( net.codemirror.lib.Pos anchor , net.codemirror.lib.Pos head ) ;
public static < T > com.google.inject.binder.LinkedBindingBuilder < T > bind ( com.google.inject.Binder binder , com.google.inject.TypeLiteral < T > type ) { binder.disableCircularProxies ( ) ; return binder.bind ( type ) . annotatedWith ( com.google.inject.internal.UniqueAnnotations.create ( ) ) ; }
void expandAll ( ) { clearMarkerAndWidget ( ) ; removeFromParent ( ) ; updateSelection ( ) ; }
private com.google.gerrit.sshd.SshSession newSession ( ) { com.google.gerrit.sshd.SshSession n = new com.google.gerrit.sshd.SshSession ( session , session.getRemoteAddress ( ) , userFactory.create ( session.getRemoteAddress ( ) , user.getAccountId ( ) ) ) ; n.setAccessPath ( AccessPath.GIT ) ; return n ; }
private void initRevisionsAction ( com.google.gerrit.client.changes.ChangeInfo info , java.lang.String revision ) { revisionsAction = new com.google.gerrit.client.change.RevisionsAction ( info.legacy_id ( ) , revision , style , headerLine , revisions ) ; }
protected static com.google.gerrit.index.query.Predicate < com.google.gerrit.server.query.change.ChangeData > create ( com.google.gerrit.server.query.change.ChangeQueryBuilder.Arguments args , com.google.gerrit.index.query.Predicate < com.google.gerrit.server.query.change.ChangeData > p ) { if ( ! ( args.allowsDrafts ) ) { return com.google.gerrit.index.query.Predicate.and ( p , com.google.gerrit.index.query.Predicate.not ( new com.google.gerrit.server.query.change.ChangeStatusPredicate ( Change.Status.DRAFT ) ) ) ; } return p ; }
public void onResize ( final com.google.gwt.event.logical.shared.ResizeEvent event ) { final int w = event.getWidth ( ) ; final int h = event.getHeight ( ) ; this . onResize ( w , h ) ; }
public void onSuccess ( java.lang.String content ) { parent.setSideBContent ( content ) ; }
public boolean isVisible ( ) { if ( ( isVisible ) == null ) { isVisible = ( ( getCurrentUser ( ) . isInternalUser ( ) ) || ( canPerform ( Permission.READ ) ) ) && ( canRead ( ) ) ; } return isVisible ; }
protected void updateCursor ( final com.google.gerrit.reviewdb.client.PatchLineComment newComment ) { }
public boolean supportsCredentialChanges ( com.gitblit.models.UserModel user ) { return false ; }
public com.google.template.soy.data.SanitizedContent toSoyHtml ( org.commonmark.node.Node node ) { if ( node == null ) { return null ; } toc.setRoot ( node ) ; node.accept ( this ) ; return html.toSoy ( ) ; }
protected void configure ( ) { persist ( com.googlesource.gerrit.plugins.quota.MaxRepositorySizeQuota.REPO_SIZE_CACHE , Project.NameKey.class , java.util.concurrent.atomic.AtomicLong.class ) . loader ( com.googlesource.gerrit.plugins.quota.MaxRepositorySizeQuota.Loader.class ) . expireAfterWrite ( 1 , java.util.concurrent.TimeUnit.DAYS ) ; bind ( com.googlesource.gerrit.plugins.quota.RepoSizeCache.class ) . to ( com.googlesource.gerrit.plugins.quota.MaxRepositorySizeQuota.class ) ; }
public void changeIsDeletedFromIndex ( ) throws java.lang.Exception { syncIndexRestApiServlet.doDelete ( req , rsp ) ; org.mockito.Mockito.verify ( indexer , org.mockito.Mockito.times ( 1 ) ) . delete ( id ) ; org.mockito.Mockito.verify ( rsp ) . setStatus ( javax.servlet.http.HttpServletResponse.SC_NO_CONTENT ) ; }
private boolean nameEqualsAbbreviated ( org.eclipse.jgit.lib.ObjectId other ) { return org.eclipse.jgit.lib.AbbreviatedObjectId.isId ( name ) ? ( org.eclipse.jgit.lib.AbbreviatedObjectId.fromString ( name ) . prefixCompare ( other ) ) == 0 : false ; }
public void insert ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.Account account ) throws com.google.gwtorm.server.OrmException , java.io.IOException { db.accounts ( ) . insert ( com.google.common.collect.ImmutableSet.of ( account ) ) ; createUserBranch ( account ) ; }
public void abandonReviewableChangeByOtherCcingSelfNotifyOwner ( ) throws java.lang.Exception { com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableChange ( com.google.gerrit.server.account.WatchConfig.NotifyType.ABANDONED_CHANGES ) ; com.google.gerrit.acceptance.TestAccount other = accountCreator.create ( "other" , "other@example.com" , "other" ) ; abandon ( sc.changeId , other , com.google.gerrit.extensions.client.GeneralPreferencesInfo.EmailStrategy.CC_ON_OWN_COMMENTS , com.google.gerrit.acceptance.server.mail.OWNER ) ; assertThat ( sender ) . sent ( "abandon" , sc ) . to ( sc.owner ) . cc ( other ) . notTo ( sc.reviewer , sc.ccer , sc.starrer ) . notTo ( sc.reviewerByEmail , sc.ccerByEmail ) . notTo ( com.google.gerrit.server.account.WatchConfig.NotifyType.ABANDONED_CHANGES ) ; }
protected void configure ( com.google.inject.binder.LinkedBindingBuilder < org.apache.sshd.server.Command > bind ) { bind.to ( com.googlesource.gerrit.plugins.forcedraft.ForceDraft.class ) ; }
public boolean isVisible ( ) { return ( isReadable ( ) ) && ( ! ( isHidden ( ) ) ) ; }
public static com.google.gerrit.server.git.ProjectConfig read ( com.google.gerrit.server.git.meta.MetaDataUpdate update ) throws java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { com.google.gerrit.server.git.ProjectConfig r = new com.google.gerrit.server.git.ProjectConfig ( update.getProjectName ( ) ) ; r.load ( update ) ; return r ; }
public void setTimeForTesting ( ) { resetTimeWithClockStep ( 1 , java.util.concurrent.TimeUnit.MILLISECONDS ) ; }
protected void add ( final com.google.gerrit.extensions.api.changes.RecipientType rt , final java.util.Collection < com.google.gerrit.reviewdb.client.Account.Id > list ) { for ( final com.google.gerrit.reviewdb.client.Account.Id id : list ) { add ( rt , id ) ; } }
private boolean canAddRefs ( ) { return ( canPerformOnAnyRef ( Permission.CREATE ) ) || ( isAdmin ( ) ) ; }
private static java.lang.UnsupportedOperationException noInterpreter ( java.lang.Throwable why ) { final java.lang.String msg = "Cannot create Python interpreter" ; return com.google.gerrit.pgm.JythonShell.noShell ( msg , why ) ; }
private void checkPreconditions ( javax.servlet.http.HttpServletRequest req , com.google.gerrit.extensions.restapi.RestResource rsrc ) throws com.google.gerrit.extensions.restapi.PreconditionFailedException { if ( "*" . equals ( req.getHeader ( "If-None-Match" ) ) ) { throw new com.google.gerrit.extensions.restapi.PreconditionFailedException ( "Resource already exists" ) ; } }
public java.lang.String getAccessToken ( ) { return isSignedIn ( ) ? key.getToken ( ) : null ; }
private static void checkRequiredMenuItemField ( java.lang.String value , java.lang.String name ) throws com.google.gerrit.extensions.restapi.BadRequestException { if ( com.google.gerrit.server.account.Preferences.isNullOrEmpty ( value ) ) { throw new com.google.gerrit.extensions.restapi.BadRequestException ( ( name + " for menu item is required" ) ) ; } }
public java.lang.Iterable < com.google.gerrit.prettify.common.EditList.Hunk > getHunks ( ) { final int ctx = settings.getContext ( ) ; return new com.google.gerrit.prettify.common.EditList ( edits , ctx , a.size ( ) , b.size ( ) ) . getHunks ( ) ; }
private static com.google.gerrit.server.index.Schema < com.google.gerrit.server.query.change.ChangeData > release ( com.google.gerrit.server.index.FieldDef < com.google.gerrit.server.query.change.ChangeData , ? > ... fields ) { return com.google.gerrit.server.index.ChangeSchemas.release ( java.util.Arrays.asList ( fields ) ) ; }
public java.lang.String apply ( com.google.gerrit.server.group.GroupResource resource ) throws com.google.gerrit.server.restapi.group.NotInternalGroupException { com.google.gerrit.common.data.GroupDescription.Internal group = resource.asInternalGroup ( ) . orElseThrow ( NotInternalGroupException :: new ) ; return com.google.common.base.Strings.nullToEmpty ( group.getDescription ( ) ) ; }
private void appendLineText ( final com.google.gwtexpui.safehtml.client.SafeHtmlBuilder m , final int lineNumberMinusOne , final com.google.gerrit.client.patches.PatchLine.Type type , final com.google.gerrit.prettify.common.SparseHtmlFile src , final int i ) { appendLineText ( m , lineNumberMinusOne , type , src.getSafeHtmlLine ( i ) , src.hasTrailingEdit ( i ) ) ; }
public static java.lang.String toChange ( @ com.google.gerrit.common.Nullable com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.reviewdb.client.Change.Id c , java.lang.String p ) { return ( com.google.gerrit.common.PageLinks.toChange ( project , c ) ) + p ; }
public void onSubmit ( final com.google.gwt.user.client.ui.FormPanel.SubmitEvent event ) { event.cancel ( ) ; final java.lang.String addr = inEmail.getText ( ) . trim ( ) ; if ( ! ( addr.contains ( "@" ) ) ) { new com.google.gerrit.client.ErrorDialog ( Util.C.invalidUserEmail ( ) ) . center ( ) ; return ; } inEmail.setEnabled ( false ) ; register.setEnabled ( false ) ; com.google.gerrit.client.account.AccountApi.registerEmail ( "self" , addr , new com.google.gerrit.client.rpc.GerritCallback < com.google.gerrit.client.rpc.NativeString > ( ) { @ java.lang.Override public void onSuccess ( com.google.gerrit.client.rpc.NativeString result ) { box.hide ( ) ; if ( ( com.google.gerrit.client.Gerrit.getConfig ( ) . getAuthType ( ) ) == ( com.google.gerrit.reviewdb.client.AuthType.DEVELOPMENT_BECOME_ANY_ACCOUNT ) ) { currentEmail = addr ; if ( ( emailPick.getItemCount ( ) ) == 0 ) { final com.google.gerrit.reviewdb.client.Account me = com.google.gerrit.client.Gerrit.getUserAccount ( ) ; me.setPreferredEmail ( addr ) ; onSaveSuccess ( me ) ; } else { save.setEnabled ( true ) ; } updateEmailList ( ) ; } } @ java.lang.Override public void onFailure ( final java.lang.Throwable caught ) { inEmail.setEnabled ( true ) ; register.setEnabled ( true ) ; if ( caught.getMessage ( ) . startsWith ( EmailException.MESSAGE ) ) { final com.google.gerrit.client.ErrorDialog d = new com.google.gerrit.client.ErrorDialog ( caught.getMessage ( ) . substring ( EmailException.MESSAGE.length ( ) ) ) ; d.setText ( Util.C.errorDialogTitleRegisterNewEmail ( ) ) ; d.center ( ) ; } else { super . onFailure ( caught ) ; } } } ) ; }
public org.parboiled.Rule [ ] blockPluginRules ( ) { return new org.parboiled.Rule [ ] { cols ( ) , note ( ) , toc ( ) } ; }
public boolean canBeOnWildProject ( ) { if ( com.google.gerrit.reviewdb.ApprovalCategory.OWN.equals ( this ) ) { return false ; } else { return true ; } }
public com.google.gerrit.server.project.ChangeControl getReviewerControl ( ) { return change.getControl ( ) . forUser ( user ) ; }
public void stop ( ) { running = false ; int discarded = config.shutdown ( ) ; if ( discarded > 0 ) { com.googlesource.gerrit.plugins.replication.ReplicationQueue.repLog.warn ( "Canceled {} replication events during shutdown" , discarded ) ; } }
private void readObject ( final java.io.ObjectInputStream in ) throws java.io.IOException { token = com.google.gerrit.server.ioutil.BasicSerialization.readString ( in ) ; }
public static final native net.codemirror.lib.LineCharacter pos ( int line , int ch ) ;
public final com.google.gerrit.index.Schema < V > get ( int version ) { com.google.gerrit.index.Schema < V > schema = schemas.get ( version ) ; com.google.common.base.Preconditions.checkArgument ( ( schema != null ) , "Unrecognized %s schema version: %s" , name , version ) ; return schema ; }
public void init ( javax.servlet.FilterConfig cfg ) throws javax.servlet.ServletException { servletContext = cfg.getServletContext ( ) ; contextInitialized ( new javax.servlet.ServletContextEvent ( servletContext ) ) ; init ( ) ; manager.start ( ) ; }
private boolean isInteralGroup ( final com.google.gerrit.client.info.GroupInfo groupInfo ) { return ( groupInfo != null ) && ( groupInfo.url ( ) . startsWith ( ( "#" + ( com.google.gerrit.common.PageLinks.ADMIN_GROUPS ) ) ) ) ; }
final native void addBranch ( java.lang.String b ) ;
public com.google.gerrit.client.reviewdb.Status getStatus ( ) { return com.google.gerrit.client.reviewdb.Status.forCode ( status ) ; }
public boolean getBoolean ( java.lang.String name , boolean defaultValue ) { return cfg.getBoolean ( com.google.gerrit.server.config.PluginConfig.PLUGIN , pluginName , name , defaultValue ) ; }
public static java.lang.String toAccountQuery ( final java.lang.String fullname ) { return com.google.gerrit.common.PageLinks.toAccountQuery ( fullname , Status.NEW ) ; }
public com.google.gerrit.metrics.Counter0 newCounter ( java.lang.String name , com.google.gerrit.metrics.Description desc ) { com.google.gerrit.metrics.Counter0 m = root.newCounter ( ( ( prefix ) + name ) , desc ) ; cleanup.add ( m ) ; return m ; }
public com.google.gwtorm.server.ResultSet < com.google.gerrit.reviewdb.client.PatchSetApproval > byPatchSet ( com.google.gerrit.reviewdb.client.PatchSet.Id id ) { throw new java.lang.UnsupportedOperationException ( com.google.gerrit.reviewdb.server.DisabledChangesReviewDbWrapper.MSG ) ; }
public void run ( ) { java.lang.String token = host.getToken ( ) ; if ( cm.extras ( ) . hasActiveLine ( ) ) { net.codemirror.lib.CodeMirror.LineHandle handle = cm.extras ( ) . activeLine ( ) ; int line = ( cm.getLineNumber ( handle ) ) + 1 ; token += ( "@" + ( ( cm.side ( ) ) == ( DisplaySide.A ) ? "a" : "" ) ) + line ; } com.google.gerrit.client.Gerrit.doSignIn ( token ) ; }
public void onSuccess ( com.googlesource.gerrit.plugins.serviceuser.client.ConfigInfo configInfo ) { display ( serviceUserInfo , configInfo.getAllowEmail ( ) ) ; }
public void sendAsync ( ) { @ java.lang.SuppressWarnings ( value = "unused" ) java.util.concurrent.Future < ? > possiblyIgnoredError = sendEmailsExecutor.submit ( this ) ; }
public void close ( ) { if ( closeRepo ) { revWalk.getObjectReader ( ) . close ( ) ; revWalk.close ( ) ; inserter.close ( ) ; repo.close ( ) ; } }
public java.lang.String getLabel ( ) { return getLabelId ( ) . get ( ) ; }
public static void deleteEdit ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwt.core.client.JavaScriptObject > cb ) { com.google.gerrit.client.changes.ChangeApi.edit ( project , id ) . delete ( cb ) ; }
public void testBadEventAndNotForwarded ( ) throws java.lang.Exception { setUpMocks ( false ) ; eventHandler.onEvent ( event ) ; org.mockito.Mockito.verifyZeroInteractions ( restSession ) ; }
public abstract void renameColumn ( com.google.gwtorm.client.StatementExecutor e , java.lang.String tableName , java.lang.String fromColumn , com.google.gwtorm.schema.ColumnModel col ) throws com.google.gwtorm.client.OrmException ;
public java.util.List < com.google.gerrit.server.diff.PatchListEntry > getPatches ( ) { return java.util.Collections.unmodifiableList ( java.util.Arrays.asList ( patches ) ) ; }
private void applyComment ( java.lang.String project , int number , com.google.gerrit.extensions.api.changes.ReviewInput comment ) throws java.lang.Exception { com.google.gerrit.server.change.RevisionResource r = atomicityHelper.getRevisionResource ( project , number ) ; reviewer.get ( ) . apply ( r , comment ) ; }
private static boolean isJsonEncoded ( com.google.gwt.http.client.Response res ) { return "json" . equals ( res.getHeader ( "X-FYI-Content-Encoding" ) ) ; }
public void invalidGitUrlLink ( ) throws java.lang.Exception { repo.branch ( "master" ) . commit ( ) . add ( "README.md" , "[c](git://example.com/repo/..)" ) . create ( ) ; java.lang.String html = buildHtml ( "/repo/+doc/master/README.md" ) ; com.google.common.truth.Truth.assertThat ( html ) . contains ( "<a href=\"about:invalid#zSoyz\">c</a>" ) ; }
public static com.google.gerrit.client.rpc.RestApi edit ( int id ) { return com.google.gerrit.client.changes.ChangeApi.change ( id ) . view ( "edit" ) ; }
private com.google.gerrit.server.project.ChangeControl forUser ( com.google.gerrit.server.CurrentUser who ) { if ( getUser ( ) . equals ( who ) ) { return this ; } return new com.google.gerrit.server.project.ChangeControl ( changeDataFactory , approvalsUtil , refControl.forUser ( who ) , notes , patchSetUtil ) ; }
public void testPushDraftChange_Blocked ( ) throws com.google.gwtorm.server.OrmException , java.io.IOException , org.eclipse.jgit.api.errors.GitAPIException { com.google.gerrit.acceptance.PushOneCommit.Result r = pushTo ( "refs/drafts/master" ) ; r.assertErrorStatus ( "cannot upload drafts" ) ; }
public void run ( ) { ( hasNext ? next : up ) . go ( ) ; }
public java.lang.String apply ( com.google.gerrit.server.group.GroupResource resource ) throws com.google.gerrit.extensions.restapi.MethodNotAllowedException { com.google.gerrit.reviewdb.client.AccountGroup group = resource.toAccountGroup ( ) ; if ( group == null ) { throw new com.google.gerrit.extensions.restapi.MethodNotAllowedException ( ) ; } return com.google.common.base.Strings.nullToEmpty ( group.getDescription ( ) ) ; }
protected static java.io.Writer newWriter ( java.io.OutputStream os , javax.servlet.http.HttpServletResponse res ) throws java.io.IOException { return new java.io.BufferedWriter ( new java.io.OutputStreamWriter ( os , res.getCharacterEncoding ( ) ) ) ; }
private static java.lang.String describe ( com.google.gerrit.server.CurrentUser user ) { if ( user.isIdentifiedUser ( ) ) { return ( ( com.google.gerrit.server.IdentifiedUser ) ( user ) ) . getAccountId ( ) . toString ( ) ; } return user.toString ( ) ; }
public int hashCode ( ) { return java.util.Objects.hash ( key , value , granted , tag ) ; }
private void setRefLogIdent ( final com.google.gerrit.client.reviewdb.PatchSetApproval submitAudit ) { if ( submitAudit != null ) { branchUpdate.setRefLogIdent ( identifiedUserFactory.create ( submitAudit.getAccountId ( ) ) . newPersonIdent ( ) ) ; } }
void changeUserName ( java.lang.String newName , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwtjsonrpc.client.VoidResult > callback ) ;
private void assertCreateFails ( com.google.gerrit.extensions.common.ChangeInput in , java.lang.Class < ? extends com.google.gerrit.extensions.restapi.RestApiException > errType , java.lang.String errSubstring ) throws java.lang.Exception { exception.expect ( errType ) ; exception.expectMessage ( errSubstring ) ; gApi.changes ( ) . create ( in ) ; }
public com.google.gerrit.server.IdentifiedUser create ( final com.google.gerrit.client.reviewdb.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( systemConfig , accountCache , null , null , id ) ; }
public void reindexEmptySite ( ) throws java.lang.Exception { initSite ( ) ; com.google.gerrit.acceptance.pgm.ReindexIT.runGerrit ( "reindex" , "-d" , sitePath.toString ( ) , "--show-stack-trace" ) ; }
public java.util.concurrent.ExecutorService createEmailReviewCommentsExecutor ( ) { return com.google.common.util.concurrent.MoreExecutors.newDirectExecutorService ( ) ; }
public com.google.gerrit.common.data.LabelType byLabel ( com.google.gerrit.reviewdb.client.PatchSetApproval.LabelId labelId ) { com.google.gerrit.common.data.LabelType t = byId ( ) . get ( labelId.get ( ) ) ; return t != null ? t : byLabel ( ) . get ( labelId.get ( ) . toLowerCase ( ) ) ; }
public static org.apache.lucene.index.Term idTerm ( com.google.gerrit.server.index.Schema < com.google.gerrit.server.query.change.ChangeData > schema , com.google.gerrit.reviewdb.client.Change.Id id ) { return com.google.gerrit.lucene.QueryBuilder.intTerm ( com.google.gerrit.server.query.change.LegacyChangeIdPredicate.idField ( schema ) . getName ( ) , id.get ( ) ) ; }
public java.lang.String getPluginName ( java.io.File srcFile ) throws java.io.IOException { return com.google.common.base.MoreObjects.firstNonNull ( getGerritPluginName ( srcFile ) , com.google.gerrit.server.plugins.PluginLoader.nameOf ( srcFile ) ) ; }
public void write ( int c ) throws java.io.IOException { actualBody.write ( c ) ; }
private com.google.gerrit.server.notedb.ChangeNotesParser newParser ( org.eclipse.jgit.lib.ObjectId tip ) throws java.lang.Exception { walk.reset ( ) ; return new com.google.gerrit.server.notedb.ChangeNotesParser ( newChange ( ) . getId ( ) , tip , walk , noteUtil , args.metrics ) ; }
private boolean sshEnabled ( ) { return downloadConfig.getDownloadSchemes ( ) . contains ( CoreDownloadSchemes.SSH ) ; }
private void postInitPlugins ( ) throws java.lang.Exception { for ( com.google.gerrit.pgm.init.api.InitStep initStep : pluginLoader.getInitSteps ( ) ) { initStep.postRun ( ) ; } }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > removeAsync ( K key ) { return self.removeAsync ( key ) ; }
public void noNotificationForDraftPatchSetsForWatchersInNotifyConfig ( ) throws java.lang.Exception { com.google.gerrit.server.mail.Address addr = new com.google.gerrit.server.mail.Address ( "Watcher" , "watcher@example.com" ) ; com.google.gerrit.server.git.NotifyConfig nc = new com.google.gerrit.server.git.NotifyConfig ( ) ; nc.addEmail ( addr ) ; nc.setName ( "team" ) ; nc.setHeader ( NotifyConfig.Header.TO ) ; nc.setTypes ( java.util.EnumSet.of ( NotifyType.NEW_PATCHSETS , NotifyType.ALL_COMMENTS ) ) ; com.google.gerrit.server.git.ProjectConfig cfg = projectCache.checkedGet ( project ) . getConfig ( ) ; cfg.putNotifyConfig ( "team" , nc ) ; saveProjectConfig ( project , cfg ) ; com.google.gerrit.acceptance.PushOneCommit.Result r = pushFactory.create ( db , admin.getIdent ( ) , testRepo , "subject" , "a" , "a1" ) . to ( "refs/for/master" ) ; r.assertOkStatus ( ) ; sender.clear ( ) ; r = pushFactory.create ( db , admin.getIdent ( ) , testRepo , "subject" , "a" , "a2" , r.getChangeId ( ) ) . to ( "refs/for/master%draft" ) ; r.assertOkStatus ( ) ; com.google.common.truth.Truth.assertThat ( sender.getMessages ( ) ) . isEmpty ( ) ; setApiUser ( admin ) ; com.google.gerrit.extensions.api.changes.ReviewInput in = new com.google.gerrit.extensions.api.changes.ReviewInput ( ) ; in.message = "comment" ; gApi.changes ( ) . id ( r.getChangeId ( ) ) . current ( ) . review ( in ) ; com.google.common.truth.Truth.assertThat ( sender.getMessages ( ) ) . isEmpty ( ) ; }
public com.googlesource.gerrit.plugins.github.git.GHContent getReadme ( ) throws java.lang.Exception { return ghRepository.getReadme ( ) ; }
public void tearDown ( ) { com.google.gerrit.testing.TestTimeUtil.useSystemTime ( ) ; }
public com.google.gerrit.server.CurrentUser getUser ( ) { return user ; }
public static final void uploadImage ( java.lang.String imageData , java.lang.String fileName ) { com.googlesource.gerrit.plugins.imagare.client.ImageUploader.uploadImage ( ImageUploadScreen.projectBox.getValue ( ) , imageData , fileName ) ; }
public com.googlesource.gerrit.plugins.lfs.LfsBackend getDefaultBackend ( ) { com.googlesource.gerrit.plugins.lfs.LfsBackendType type = cfg.getEnum ( "storage" , null , "backend" , LfsBackendType.FS ) ; return new com.googlesource.gerrit.plugins.lfs.LfsBackend ( null , type ) ; }
public void removeMembers ( java.lang.String ... members ) throws com.google.gerrit.extensions.restapi.RestApiException { try { deleteMembers.apply ( rsrc , AddMembers.Input.fromMembers ( java.util.Arrays.asList ( members ) ) ) ; } catch ( com.google.gwtorm.server.OrmException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot remove group members" , e ) ; } }
public int hashCode ( ) { return java.util.Objects.hash ( change.getId ( ) , normalizeChangeMessages ( ) , patchSets.keySet ( ) , patchSetApprovals.keySet ( ) , patchLineComments.keySet ( ) ) ; }
public void matchesEmailDomain ( ) throws java.lang.Exception { com.google.gitiles.IdentRevFilter filter = com.google.gitiles.IdentRevFilter.author ( "eSt" ) ; com.google.common.truth.Truth.assertThat ( filter.matchesPerson ( new org.eclipse.jgit.lib.PersonIdent ( "null" , "null@eSt.com" ) ) ) . isTrue ( ) ; com.google.common.truth.Truth.assertThat ( filter.matchesPerson ( new org.eclipse.jgit.lib.PersonIdent ( "null" , "null@eStablish.com" ) ) ) . isTrue ( ) ; com.google.common.truth.Truth.assertThat ( filter.matchesPerson ( new org.eclipse.jgit.lib.PersonIdent ( "null" , "null@teSt.com" ) ) ) . isTrue ( ) ; com.google.common.truth.Truth.assertThat ( filter.matchesPerson ( new org.eclipse.jgit.lib.PersonIdent ( "null" , "null@teSting.com" ) ) ) . isTrue ( ) ; }
private com.google.gerrit.client.change.RelatedChangesTab getTab ( ) { if ( ( sameTopicTab ) == null ) { sameTopicTab = createTab ( Resources.C.sameTopic ( ) , Resources.C.sameTopicTooltip ( ) ) ; } return sameTopicTab ; }
public com.google.gerrit.server.query.Predicate < T > parse ( final java.lang.String query ) throws com.google.gerrit.server.query.QueryParseException { if ( com.google.common.base.Strings.isNullOrEmpty ( query ) ) { throw new com.google.gerrit.server.query.QueryParseException ( "query is empty" ) ; } return toPredicate ( com.google.gerrit.server.query.QueryParser.parse ( query ) ) ; }
protected void formatChange ( ) throws com.google.gerrit.common.errors.EmailException { appendText ( textTemplate ( "Merged" ) ) ; if ( useHtml ( ) ) { appendHtml ( soyHtmlTemplate ( "MergedHtml" ) ) ; } }
private boolean isProjectStatePermittingRead ( ) { return getProjectControl ( ) . getProject ( ) . getState ( ) . permitsRead ( ) ; }
public Response.Action getDownloadAction ( org.eclipse.jgit.lfs.lib.AnyLongObjectId id ) { org.eclipse.jgit.lfs.server.Response.Action action = super . getDownloadAction ( id ) ; com.googlesource.gerrit.plugins.lfs.AuthInfo authInfo = authorizer.generateAuthInfo ( com.googlesource.gerrit.plugins.lfs.fs.LocalLargeFileRepository.DOWNLOAD , id , expirationSeconds ) ; return new com.googlesource.gerrit.plugins.lfs.ExpiringAction ( action.href , authInfo ) ; }
private static < T > com.google.gwtorm.server.GeneratedClassLoader newLoader ( final java.lang.Class < T > type ) { return new com.google.gwtorm.server.GeneratedClassLoader ( type.getClassLoader ( ) ) ; }
public final native void matchBrackets ( java.lang.Boolean m ) ;
private static com.google.gerrit.server.query.change.ChangeData change ( java.lang.String ... files ) { java.util.Arrays.sort ( files ) ; com.google.gerrit.server.query.change.ChangeData cd = new com.google.gerrit.server.query.change.ChangeData ( new com.google.gerrit.reviewdb.client.Change.Id ( 1 ) ) ; cd.setCurrentFilePaths ( java.util.Arrays.asList ( files ) ) ; return cd ; }
public Response.Action getUploadAction ( org.eclipse.jgit.lfs.lib.AnyLongObjectId id , long size ) { org.eclipse.jgit.lfs.server.Response.Action action = super . getUploadAction ( id , size ) ; com.googlesource.gerrit.plugins.lfs.AuthInfo authInfo = authorizer.generateAuthInfo ( com.googlesource.gerrit.plugins.lfs.fs.LocalLargeFileRepository.UPLOAD , id , expirationSeconds ) ; return new com.googlesource.gerrit.plugins.lfs.ExpiringAction ( action.href , authInfo ) ; }
void onMatchBrackets ( com.google.gwt.event.logical.shared.ValueChangeEvent < java.lang.Boolean > e ) { prefs.matchBrackets ( e.getValue ( ) ) ; if ( ( view ) != null ) { view.setOption ( "matchBrackets" , prefs.matchBrackets ( ) ) ; } }
public java.util.Set < com.google.gerrit.reviewdb.AccountGroup.Id > missing ( final java.lang.String key ) { return java.util.Collections.emptySet ( ) ; }
public void testOwnerGroupsWhenNotConfigured ( ) { com.google.common.truth.Truth.assertThat ( repoCfg.getOwnerGroups ( new com.google.gerrit.reviewdb.client.Project.NameKey ( "someProject" ) ) ) . isEmpty ( ) ; }
private void failAndThrow ( com.google.gerrit.reviewdb.client.Project.NameKey project , java.lang.RuntimeException e ) { fail ( project , e ) ; throw e ; }
public java.util.List < com.google.gerrit.reviewdb.client.PatchSetApproval > allApprovals ( ) throws com.google.gwtorm.server.OrmException { return com.google.common.collect.ImmutableList.copyOf ( allApprovalsMap ( ) . values ( ) ) ; }
protected static com.google.gerrit.server.query.change.ChangeData newChangeData ( com.google.gerrit.server.mail.EmailArguments ea , com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.reviewdb.client.Change.Id id ) { return ea.changeDataFactory.create ( ea.db.get ( ) , project , id ) ; }
private static void initDisableUnwantedKeys ( ) { for ( java.lang.String s : new java.lang.String [ ] { "C" , "J" , "K" , "O" , "R" , "U" , "Ctrl-C" } ) { net.codemirror.lib.CodeMirror.disableUnwantedKey ( "vim" , s ) ; } }
public java.util.List < com.google.gerrit.common.data.SubmitRecord > getSubmitRecords ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.PatchSet patchSet ) { return canSubmit ( db , patchSet , null , false , true , false ) ; }
private static void resetDomainValidator ( ) throws java.lang.Exception { java.lang.Class < ? > c = java.lang.Class.forName ( "org.apache.commons.validator.routines.DomainValidator" ) ; java.lang.reflect.Field f = c.getDeclaredField ( "inUse" ) ; f.setAccessible ( true ) ; f.setBoolean ( c , false ) ; }
protected static java.lang.String padTwo ( final int v ) { if ( v < 10 ) { return "0" + v ; } return java.lang.String.valueOf ( v ) ; }
protected org.eclipse.jgit.revwalk.RevWalk getRevWalk ( ) throws java.io.IOException { initRepository ( ) ; return revWalk ; }
public void setLimit ( int n ) { if ( n < 0 ) { limit = 10 ; } else if ( n == 0 ) { limit = com.google.gerrit.server.account.SuggestAccounts.MAX_RESULTS ; } else { limit = java.lang.Math.min ( n , com.google.gerrit.server.account.SuggestAccounts.MAX_RESULTS ) ; } }
private GitilesView.Builder parseNoCommand ( java.lang.String repoName ) { return com.google.gitiles.GitilesView.repositoryIndex ( ) . setRepositoryName ( repoName ) ; }
public static com.google.gerrit.client.DiffObject autoMerge ( ) { return new com.google.gerrit.client.DiffObject ( true ) ; }
public com.google.common.util.concurrent.CheckedFuture < ? , java.io.IOException > indexAsync ( com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.reviewdb.client.Change.Id id ) { return submit ( new com.google.gerrit.server.index.change.ChangeIndexer.IndexTask ( project , id ) ) ; }
protected void add ( final com.google.gerrit.server.mail.RecipientType rt , final com.google.gerrit.reviewdb.client.Account.Id to ) { if ( ( ! ( emailOnlyAuthors ) ) || ( authors.contains ( to ) ) ) { super . add ( rt , to ) ; } }
public com.google.common.collect.SetMultimap < com.google.gerrit.server.notedb.ReviewerState , com.google.gerrit.reviewdb.client.Account.Id > reviewers ( ) throws com.google.gwtorm.server.OrmException { return com.google.gerrit.server.ApprovalsUtil.getReviewers ( approvals ( ) ) ; }
public java.lang.String getCoverLetter ( ) { if ( ( changeMessage ) != null ) { final java.lang.String txt = changeMessage.getMessage ( ) ; if ( txt != null ) { return txt.trim ( ) ; } } return "" ; }
private org.eclipse.jgit.lib.PersonIdent getSubmitterIdent ( ) { return args.caller.newCommitterIdent ( args.serverIdent.getWhen ( ) , args.serverIdent.getTimeZone ( ) ) ; }
public void testCreateProjectWithNameMismatch_BadRequest ( ) throws java.lang.Exception { com.google.gerrit.extensions.api.projects.ProjectInput in = new com.google.gerrit.extensions.api.projects.ProjectInput ( ) ; in.name = "otherName" ; com.google.gerrit.acceptance.RestResponse r = adminSession.put ( "/projects/someName" , in ) ; com.google.common.truth.Truth.assertThat ( r.getStatusCode ( ) ) . isEqualTo ( HttpStatus.SC_BAD_REQUEST ) ; }
public static com.google.gerrit.server.account.externalids.ExternalId createWithEmail ( com.google.gerrit.server.account.externalids.ExternalId.Key key , com.google.gerrit.reviewdb.client.Account.Id accountId , @ com.google.gerrit.common.Nullable java.lang.String email ) { return com.google.gerrit.server.account.externalids.ExternalId.create ( key , accountId , com.google.common.base.Strings.emptyToNull ( email ) , null ) ; }
private java.util.Map < java.lang.String , org.eclipse.jgit.lib.Ref > listRemote ( org.eclipse.jgit.transport.Transport tn ) throws org.eclipse.jgit.errors.NotSupportedException , org.eclipse.jgit.errors.TransportException { try ( org.eclipse.jgit.transport.FetchConnection fc = tn.openFetch ( ) ) { return fc.getRefsMap ( ) ; } }
private java.lang.String pushTagForExistingCommit ( com.google.gerrit.acceptance.rest.project.PushTagIT.TagType tagType , org.eclipse.jgit.transport.RemoteRefUpdate.Status expectedStatus ) throws java.lang.Exception { return pushTag ( tagType , null , false , false , expectedStatus ) ; }
public void onFailure ( final java.lang.Throwable caught ) { enableButtons ( true ) ; super . onFailure ( caught ) ; }
private static final native void init ( java.lang.String d , java.lang.String e , java.lang.String t , java.lang.String r , java.lang.String o ) ;
public void parseInvalidNotifyValue ( ) { assertParseNotifyValueFails ( "* [] illegal-characters-at-the-end" ) ; assertParseNotifyValueFails ( "* [INVALID]" ) ; assertParseNotifyValueFails ( "* [ALL_COMMENTS, UNKNOWN]" ) ; assertParseNotifyValueFails ( "* [ALL_COMMENTS NEW_CHANGES]" ) ; assertParseNotifyValueFails ( "* [ALL_COMMENTS, NEW_CHANGES" ) ; assertParseNotifyValueFails ( "* ALL_COMMENTS, NEW_CHANGES]" ) ; }
private static void assertDeleted ( java.lang.String expectedNewName , com.google.gerrit.server.patch.PatchListEntry e ) { com.google.gerrit.acceptance.server.change.PatchListCacheIT.assertName ( expectedNewName , e ) ; com.google.common.truth.Truth.assertThat ( e.getChangeType ( ) ) . isEqualTo ( ChangeType.DELETED ) ; }
void unstarChange ( java.lang.String changeId ) throws com.google.gerrit.extensions.restapi.RestApiException ;
public java.util.List < com.google.gerrit.server.git.ValidationError > getValidationErrors ( ) { if ( ( validationErrors ) != null ) { return java.util.Collections.unmodifiableList ( validationErrors ) ; } return java.util.Collections.emptyList ( ) ; }
protected com.google.gerrit.server.notedb.ChangeUpdate newUpdate ( com.google.gerrit.reviewdb.client.Change c , com.google.gerrit.server.CurrentUser user ) throws java.lang.Exception { return com.google.gerrit.testutil.TestChanges.newUpdate ( injector , c , user ) ; }
public void asyncExec ( final java.lang.Runnable task ) { executor.submit ( task ) ; }
protected < R extends com.google.gerrit.extensions.restapi.RestResource > com.google.gerrit.extensions.restapi.RestApiModule.ModifyViewBinder < R > delete ( com.google.inject.TypeLiteral < com.google.gerrit.extensions.restapi.RestView < R > > viewType ) { return new com.google.gerrit.extensions.restapi.RestApiModule.ModifyViewBinder ( view ( viewType , com.google.gerrit.extensions.restapi.RestApiModule.DELETE , "/" ) ) ; }
protected abstract com.google.inject.Injector createInjector ( ) ;
public void testCreateChildProjectUnderNonExistingParent_UnprocessableEntity ( ) throws java.lang.Exception { com.google.gerrit.extensions.api.projects.ProjectInput in = new com.google.gerrit.extensions.api.projects.ProjectInput ( ) ; in.parent = "non-existing-project" ; com.google.gerrit.acceptance.RestResponse r = adminSession.put ( "/projects/child" , in ) ; com.google.common.truth.Truth.assertThat ( r.getStatusCode ( ) ) . isEqualTo ( HttpStatus.SC_UNPROCESSABLE_ENTITY ) ; }
public com.google.gerrit.acceptance.RestResponse execute ( org.apache.http.client.fluent.Request request ) throws java.io.IOException { return new com.google.gerrit.acceptance.RestResponse ( executor.execute ( request ) . returnResponse ( ) ) ; }
public org.kohsuke.github.GitHub getHub ( ) throws java.io.IOException { if ( ( token ) == null ) { return null ; } else { return org.kohsuke.github.GitHub.connectUsingOAuth ( config.gitHubApiUrl , token.accessToken ) ; } }
public void setUp ( ) throws java.lang.Exception { super . setUp ( ) ; db = createBareRepository ( ) ; util = new org.eclipse.jgit.junit.TestRepository ( db ) ; }
public boolean apply ( com.google.gerrit.reviewdb.client.PatchSet.Id in ) { return ( upToCurrent.apply ( in ) ) && ( patchSets.containsKey ( in ) ) ; }
protected void configureServlets ( ) { install ( new com.google.gerrit.httpd.rpc.RpcServletModule ( com.google.gerrit.httpd.rpc.UiRpcModule.PREFIX ) { @ java.lang.Override protected void configureServlets ( ) { rpc ( com.google.gerrit.httpd.auth.ldap.UserPassAuthServiceImpl.class ) ; } } ) ; }
public void setFieldReference ( final com.google.gwtorm.schema.ColumnModel cm ) { col = cm ; ( columnIdx ) ++ ; }
public java.lang.String getPluginName ( java.io.File srcFile ) throws java.io.IOException { return com.google.common.base.Objects.firstNonNull ( getGerritPluginName ( srcFile ) , com.google.gerrit.server.plugins.PluginLoader.nameOf ( srcFile ) ) ; }
public static void addOptions ( com.google.gerrit.client.rpc.RestApi call , java.util.Set < com.google.gerrit.extensions.client.ListChangesOption > s ) { call.addParameterRaw ( "O" , java.lang.Integer.toHexString ( com.google.gerrit.extensions.client.ListChangesOption.toBits ( s ) ) ) ; }
public void onSuccess ( com.google.gwt.core.client.JavaScriptObject result ) { if ( screen.isCurrentView ( ) ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( psId ) ) ; } }
public void testCreateGroupWithoutCapability_Forbidden ( ) throws java.lang.Exception { com.google.gerrit.acceptance.RestResponse r = new com.google.gerrit.acceptance.RestSession ( server , user ) . put ( "/groups/newGroup" ) ; com.google.common.truth.Truth.assertThat ( r.getStatusCode ( ) ) . isEqualTo ( HttpStatus.SC_FORBIDDEN ) ; }
public java.util.List < com.google.gitiles.blame.Region > load ( com.google.gitiles.blame.BlameCacheImpl.Key key ) throws java.io.IOException { return com.google.gitiles.blame.BlameCacheImpl.loadBlame ( key ) ; }
private com.google.gerrit.server.account.AuthResult auth ( com.google.gerrit.reviewdb.client.Account.Id account ) { if ( account != null ) { return new com.google.gerrit.server.account.AuthResult ( account , null , false ) ; } return null ; }
protected void assertBadQuery ( java.lang.Object query ) throws java.lang.Exception { assertBadQuery ( newQuery ( query ) ) ; }
public com.google.gerrit.server.events.AccountAttribute asAccountAttribute ( com.google.gerrit.reviewdb.client.Account.Id id ) { if ( id == null ) { return null ; } return asAccountAttribute ( accountCache.get ( id ) . getAccount ( ) ) ; }
protected void configure ( ) { factory ( AgreementInfoFactory.Factory.class ) ; factory ( DeleteExternalIds.Factory.class ) ; factory ( ExternalIdDetailFactory.Factory.class ) ; }
public java.lang.String getHttpUrl ( com.google.gerrit.acceptance.GerritServer server ) { return java.lang.String.format ( "http://%s:%s@%s:%d" , username , httpPassword , server.getHttpAddress ( ) . getAddress ( ) . getHostAddress ( ) , server.getHttpAddress ( ) . getPort ( ) ) ; }
public java.util.concurrent.atomic.AtomicLong load ( com.google.gerrit.reviewdb.client.Project.NameKey project ) throws java.io.IOException { try ( org.eclipse.jgit.lib.Repository git = gitManager.openRepository ( project ) ) { return new java.util.concurrent.atomic.AtomicLong ( com.googlesource.gerrit.plugins.quota.MaxRepositorySizeQuota.Loader.getDiskUsage ( git.getDirectory ( ) ) ) ; } }
public void onKeyPress ( final com.google.gwt.event.dom.client.KeyPressEvent event ) { com.google.gerrit.client.Gerrit.display ( PageLinks.MINE_DRAFTS ) ; }
public com.google.common.util.concurrent.CheckedFuture < ? , java.io.IOException > indexAsync ( com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.reviewdb.client.Change.Id id ) { return ( executor ) != null ? submit ( new com.google.gerrit.server.index.ChangeIndexer.IndexTask ( project , id ) ) : com.google.common.util.concurrent.Futures.< java.lang.Object , java.io.IOException > immediateCheckedFuture ( null ) ; }
public void listEmptyGroupMembers ( ) throws java.lang.Exception { group ( "empty" , "Administrators" ) ; com.google.common.truth.Truth.assertThat ( GET ( "/groups/empty/members/" ) ) . isEmpty ( ) ; }
private void hookDoesNotModify ( final java.lang.String in ) throws java.lang.Exception { org.junit.Assert.assertEquals ( in , call ( in ) ) ; }
public int hashCode ( ) { return 31 + ( id ) ; }
protected com.google.gerrit.acceptance.server.mail.StagedChange stageReviewableChange ( ) throws java.lang.Exception { return stageChange ( ( ) -> super . stageReviewableChange ( ) ) ; }
static void deleteEdit ( com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.reviewdb.client.Change.Id id , com.google.gwt.user.client.ui.Button ... editButtons ) { com.google.gerrit.client.changes.ChangeApi.deleteEdit ( project.get ( ) , id.get ( ) , com.google.gerrit.client.change.EditActions.cs ( project , id , editButtons ) ) ; }
public java.lang.String getAuthorizationUrl ( ) { return oauth.getAuthorizationUrl ( oauth.getScope ( com.google.common.collect.Sets.newHashSet ( config.getDefaultScopes ( ) ) ) , null , null ) ; }
com.google.gerrit.server.mail.send.AddReviewerSender create ( com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.reviewdb.client.Change.Id id ) ;
public com.google.gerrit.common.data.GroupList get ( ) { return createGroupList ( filterGroups ( groupCache.all ( ) ) ) ; }
public com.googlecode.prolog_cafe.lang.NumberTerm not ( ) { throw new com.googlecode.prolog_cafe.exceptions.IllegalTypeException ( "integer" , this ) ; }
protected void configure ( ) { factory ( AddReviewer.Factory.class ) ; factory ( PatchScriptFactory.Factory.class ) ; factory ( SaveDraft.Factory.class ) ; }
public static com.google.gerrit.client.reviewdb.SystemConfig create ( ) { final com.google.gerrit.client.reviewdb.SystemConfig r = new com.google.gerrit.client.reviewdb.SystemConfig ( ) ; r.singleton = new com.google.gerrit.client.reviewdb.SystemConfig.Key ( ) ; return r ; }
public com.google.gerrit.server.project.ListProjects setFormat ( com.google.gerrit.server.OutputFormat fmt ) { format = fmt ; return this ; }
public abstract com.google.gerrit.client.patches.PatchScreen.Type getPatchScreenType ( ) ;
public void onKeyPress ( final com.google.gwt.event.dom.client.KeyPressEvent event ) { if ( ( event.getCharCode ( ) ) == ( com.google.gwt.event.dom.client.KeyCodes.KEY_ENTER ) ) { doSearch ( ) ; } }
public static void get ( com.google.gerrit.reviewdb.client.Project.NameKey name , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.projects.ConfigInfoCache.Entry > cb ) { com.google.gerrit.client.projects.ConfigInfoCache.instance.getImpl ( name.get ( ) , cb ) ; }
public static void updated ( final com.google.gerrit.reviewdb.client.Change c ) { c.resetLastUpdatedOn ( ) ; com.google.gerrit.server.ChangeUtil.computeSortKey ( c ) ; }
java.lang.String diff ( ) ;
public static java.lang.String toEditScreen ( com.google.gerrit.reviewdb.client.PatchSet.Id revision , java.lang.String fileName , int line ) { return com.google.gerrit.client.Dispatcher.toPatch ( "edit" , null , revision , fileName , null , line ) ; }
public boolean isGenericAddress ( com.google.gerrit.reviewdb.Account.Id fromId ) { return false ; }
java.lang.String patchWindowTitle ( java.lang.String changeId , java.lang.String file ) ;
public com.google.gerrit.server.notedb.ChangeNotes createForBatchUpdate ( com.google.gerrit.reviewdb.client.Change change ) throws com.google.gwtorm.server.OrmException { return new com.google.gerrit.server.notedb.ChangeNotes ( args , change , false , null ) . load ( ) ; }
public void updateChange ( com.google.gerrit.server.git.BatchUpdate.ChangeContext ctx ) throws java.lang.Exception { ctx.getUpdate ( ps.getId ( ) ) . setTopic ( magicBranch.topic ) ; }
protected com.google.gerrit.server.change.ChangeInserter newChangeForCommit ( org.eclipse.jgit.junit.TestRepository < com.google.gerrit.testutil.InMemoryRepositoryManager.Repo > repo , org.eclipse.jgit.revwalk.RevCommit commit ) throws java.lang.Exception { return newChange ( repo , commit , null , null , null ) ; }
public void testCreateChildProjectUnderNonExistingParent_UnprocessableEntity ( ) throws java.lang.Exception { com.google.gerrit.extensions.api.projects.ProjectInput in = new com.google.gerrit.extensions.api.projects.ProjectInput ( ) ; in.name = name ( "newProjectName" ) ; in.parent = "non-existing-project" ; assertCreateFails ( in , com.google.gerrit.extensions.restapi.UnprocessableEntityException.class ) ; }
public abstract void execute ( ) throws com.google.gerrit.extensions.restapi.RestApiException , com.google.gerrit.server.update.UpdateException ;
void downloadOptional ( ) { required = false ; download ( ) ; }
public void onSuccess ( com.google.gwt.core.client.JavaScriptObject result ) { if ( screen.isCurrentView ( ) ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( screen.getProject ( ) , psId ) ) ; } }
void setSHA1 ( final java.lang.String sha1 ) { this . sha1 = sha1 ; }
public static void comments ( @ com.google.gerrit.common.Nullable java.lang.String project , com.google.gerrit.reviewdb.client.PatchSet.Id id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.rpc.NativeMap < com.google.gwt.core.client.JsArray < com.google.gerrit.client.changes.CommentInfo > > > cb ) { com.google.gerrit.client.changes.CommentApi.revision ( project , id , "comments" ) . get ( cb ) ; }
private java.util.Set < com.google.gerrit.reviewdb.client.AccountGroup.UUID > groupsOf ( com.google.gerrit.reviewdb.client.Account.Id account ) { return userFactory.create ( account ) . getEffectiveGroups ( ) . getKnownGroups ( ) ; }
private com.google.common.collect.SetMultimap < com.google.gerrit.reviewdb.client.Project.NameKey , com.google.gerrit.server.index.RefState > parseStates ( com.google.gerrit.server.query.change.ChangeData cd ) { return com.google.gerrit.server.index.RefState.parseStates ( cd.getRefStates ( ) ) ; }
public java.util.List < com.google.gerrit.common.data.SubmitRecord > canSubmit ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.PatchSet patchSet ) { return canSubmit ( db , patchSet , null , false , false , false ) ; }
public com.google.gerrit.server.ReviewerSet reviewers ( ) throws com.google.gwtorm.server.OrmException { if ( ( reviewers ) == null ) { reviewers = approvalsUtil.getReviewers ( notes ( ) , approvals ( ) . values ( ) ) ; } return reviewers ; }
protected void onCellSingleClick ( int row , int column ) { movePointerTo ( row ) ; }
public com.google.gerrit.server.project.ProjectState getParentState ( ) { if ( isAllProjects ) { return null ; } return projectCache.get ( getProject ( ) . getParent ( allProjectsName ) ) ; }
private void clear ( ) { setRegisterKeys ( false ) ; body.clear ( ) ; patchSetPanels.clear ( ) ; }
static com.google.gerrit.server.query.change.ChangeData createForTest ( com.google.gerrit.reviewdb.client.Change.Id id ) { return new com.google.gerrit.server.query.change.ChangeData ( null , null , null , null , null , null , null , null , id ) ; }
private com.google.gerrit.acceptance.AcceptanceTestRequestScope.Context newRequestContext ( com.google.gerrit.acceptance.TestAccount account ) { return atrScope.newContext ( reviewDbProvider , new com.google.gerrit.acceptance.SshSession ( server , account ) , identifiedUserFactory.create ( com.google.inject.util.Providers.of ( db ) , account.getId ( ) ) ) ; }
private java.util.Map < java.lang.String , com.google.gitiles.RefServlet.RefJsonData > buildRefJson ( java.lang.String path ) throws java.lang.Exception { return buildJson ( new com.google.gson.reflect.TypeToken < java.util.Map < java.lang.String , com.google.gitiles.RefServlet.RefJsonData > > ( ) { } , path ) ; }
private void display ( final com.google.gerrit.client.data.SingleListChangeInfo result ) { table.setAccountInfoCache ( result.getAccounts ( ) ) ; drafts.display ( result.getChanges ( ) ) ; table.finishDisplay ( ) ; }
void message ( java.lang.String message ) ;
public static final void uploadImage ( java.lang.String imageData ) { com.googlesource.gerrit.plugins.imagare.client.ImageUploader.uploadImage ( "All-Projects" , imageData , null ) ; }
public void suggestReviewersMaxNbrSuggestions ( ) throws java.lang.Exception { java.lang.String changeId = createChange ( ) . getChangeId ( ) ; java.util.List < com.google.gerrit.extensions.common.SuggestedReviewerInfo > reviewers = suggestReviewers ( changeId , name ( "user" ) , 5 ) ; com.google.common.truth.Truth.assertThat ( reviewers ) . hasSize ( 2 ) ; }
private javax.servlet.http.Cookie getGerritCookie ( javax.servlet.http.HttpServletRequest httpRequest ) { for ( javax.servlet.http.Cookie cookie : getCookies ( httpRequest ) ) { if ( cookie.getName ( ) . equalsIgnoreCase ( com.googlesource.gerrit.plugins.github.oauth.OAuthFilter.GERRIT_COOKIE_NAME ) ) { return cookie ; } } return null ; }
private com.google.gerrit.server.notedb.ChangeNotes getNotes ( ) { return notes ; }
public void onSuccess ( com.google.gerrit.client.changes.ChangeList result ) { com.google.gwt.core.client.JsArray < com.google.gerrit.client.changes.ChangeList > wrapped = com.google.gwt.core.client.JsArray.createArray ( 1 ) . cast ( ) ; wrapped.set ( 0 , result ) ; callback.onSuccess ( wrapped ) ; }
boolean canPerform ( java.lang.String permissionName ) { return canPerform ( permissionName , false ) ; }
com.google.gerrit.client.reviewdb.Project get ( com.google.gerrit.client.reviewdb.Project.Id id ) throws com.google.gwtorm.client.OrmException ;
public static com.google.gerrit.client.rpc.RestApi change ( int id ) { return new com.google.gerrit.client.rpc.RestApi ( "/changes/" ) . id ( java.lang.String.valueOf ( id ) ) ; }
public static void all ( com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.client.plugins.PluginMap > callback ) { new com.google.gerrit.client.rpc.RestApi ( "/plugins/" ) . addParameterTrue ( "all" ) . get ( com.google.gerrit.client.rpc.NativeMap.copyKeysIntoChildren ( callback ) ) ; }
private boolean canRead ( org.eclipse.jgit.lib.ObjectId revId ) throws java.io.IOException { try ( org.eclipse.jgit.revwalk.RevWalk rw = new org.eclipse.jgit.revwalk.RevWalk ( repo ) ) { org.eclipse.jgit.revwalk.RevCommit commit = rw.parseCommit ( revId ) ; return projectControl.canReadCommit ( db , rw , commit ) ; } }
private void autoReindexIfStale ( com.google.gerrit.server.query.change.ChangeData cd ) { autoReindexIfStale ( cd.project ( ) , cd.getId ( ) ) ; }
boolean isLoggedIn ( ) { return ( user ) != null ; }
private org.eclipse.jgit.lib.PersonIdent newRefLogIdent ( ) { com.google.gerrit.server.CurrentUser u = user.get ( ) ; if ( u.isIdentifiedUser ( ) ) { return u.asIdentifiedUser ( ) . newRefLogIdent ( ) ; } return serverIdent.get ( ) ; }
private java.lang.String trimUpToChar ( java.lang.String string , char ch ) { if ( ( string.indexOf ( ch ) ) >= 0 ) { return string.substring ( 0 , string.indexOf ( ch ) ) ; } return string ; }
public static java.lang.String toEditScreen ( @ com.google.gerrit.common.Nullable com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.reviewdb.client.PatchSet.Id revision , java.lang.String fileName , int line ) { return com.google.gerrit.client.Dispatcher.toPatch ( "edit" , project , com.google.gerrit.client.DiffObject.base ( ) , revision , fileName , null , line ) ; }
void onRenderEntireFile ( com.google.gwt.event.logical.shared.ValueChangeEvent < java.lang.Boolean > e ) { prefs.renderEntireFile ( e.getValue ( ) ) ; if ( ( view ) != null ) { view.updateRenderEntireFile ( ) ; } }
public com.google.gerrit.gpg.server.GpgKeys.ListGpgKeys list ( ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.extensions.restapi.ResourceNotFoundException { return new com.google.gerrit.gpg.server.GpgKeys.ListGpgKeys ( ) ; }
public void valid ( final com.google.gerrit.common.data.LabelType lt , final boolean v ) { valid.put ( lt.getName ( ) , v ) ; }
public static java.lang.String refsDraftComments ( com.google.gerrit.reviewdb.client.Change.Id changeId , com.google.gerrit.reviewdb.client.Account.Id accountId ) { java.lang.StringBuilder r = com.google.gerrit.reviewdb.client.RefNames.buildRefsPrefix ( com.google.gerrit.reviewdb.client.RefNames.REFS_DRAFT_COMMENTS , changeId.get ( ) ) ; r.append ( accountId.get ( ) ) ; return r.toString ( ) ; }
private boolean can ( com.google.gerrit.server.permissions.LabelPermission perm ) { return ! ( label ( perm.permissionName ( ) . get ( ) ) . isEmpty ( ) ) ; }
private com.google.gerrit.server.git.SubmitStrategy createStrategy ( final com.google.gerrit.reviewdb.client.Project.SubmitType submitType ) throws com.google.gerrit.server.git.MergeException , com.google.gerrit.server.project.NoSuchProjectException { return submitStrategyFactory.create ( submitType , db , repo , rw , inserter , canMergeFlag , getAlreadyAccepted ( branchTip ) , destBranch ) ; }
protected void rcptToAuthors ( final com.google.gerrit.server.mail.RecipientType rt ) { for ( final com.google.gerrit.reviewdb.client.Account.Id id : authors ) { add ( rt , id ) ; } }
private boolean isRefVisible ( ) { return getRefControl ( ) . isVisible ( ) ; }
public void onShowView ( ) { super . onShowView ( ) ; if ( ( cmA ) != null ) { cmA.refresh ( ) ; } if ( ( cmB ) != null ) { cmB.refresh ( ) ; } }
public java.util.List < com.google.gerrit.server.query.change.ChangeData > byProjectOpen ( com.google.gerrit.reviewdb.client.Project.NameKey project ) throws com.google.gwtorm.server.OrmException { return query ( com.google.gerrit.server.query.Predicate.and ( com.google.gerrit.server.query.change.InternalChangeQuery.project ( project ) , com.google.gerrit.server.query.change.ChangeStatusPredicate.open ( ) ) ) ; }
public static com.google.gerrit.server.patch.PatchListKey againstParentNum ( int parentNum , org.eclipse.jgit.lib.AnyObjectId newId , com.google.gerrit.extensions.client.DiffPreferencesInfo.Whitespace ws ) { return new com.google.gerrit.server.patch.PatchListKey ( parentNum , newId , ws ) ; }
public com.google.gerrit.server.data.AccountAttribute get ( ) { return account != null ? eventFactory.asAccountAttribute ( new com.google.gerrit.reviewdb.client.Account.Id ( account._accountId ) ) : null ; }
private com.google.gerrit.server.project.ProjectControl user ( java.lang.String name , com.google.gerrit.reviewdb.AccountGroup ... memberOf ) { com.google.gwtorm.client.SchemaFactory < com.google.gerrit.reviewdb.ReviewDb > schema = null ; com.google.gerrit.server.account.GroupCache groupCache = null ; java.lang.String canonicalWebUrl = "http://localhost" ; return new com.google.gerrit.server.project.ProjectControl ( java.util.Collections.< com.google.gerrit.reviewdb.AccountGroup.UUID > emptySet ( ) , java.util.Collections.< com.google.gerrit.reviewdb.AccountGroup.UUID > emptySet ( ) , schema , groupCache , canonicalWebUrl , new com.google.gerrit.server.project.RefControlTest.MockUser ( name , memberOf ) , newProjectState ( ) ) ; }
public void onFailure ( final java.lang.Throwable caught ) { text.setReadOnly ( false ) ; save.setEnabled ( true ) ; cancel.setEnabled ( true ) ; discard.setEnabled ( true ) ; super . onFailure ( caught ) ; }
public Project.NameKey getProjectName ( ) { return draftsProject ; }
public void run ( ) { closedIndex.close ( ) ; }
public static void stopCommonServer ( ) throws java.lang.Exception { if ( ( com.google.gerrit.acceptance.AbstractDaemonTest.commonServer ) != null ) { try { com.google.gerrit.acceptance.AbstractDaemonTest.commonServer.stop ( ) ; } finally { com.google.gerrit.acceptance.AbstractDaemonTest.commonServer = null ; } } com.google.gerrit.testutil.TempFileUtil.cleanup ( ) ; }
public synchronized void evict ( @ com.google.gerrit.common.Nullable com.google.gerrit.reviewdb.client.Account.Id accountId ) { if ( ( byId ) != null ) { byId.remove ( accountId ) ; } }
public static java.lang.String toUnified ( @ com.google.gerrit.common.Nullable com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.client.DiffObject diffBase , com.google.gerrit.reviewdb.client.PatchSet.Id revision , java.lang.String fileName ) { return com.google.gerrit.client.Dispatcher.toPatch ( "unified" , project , diffBase , revision , fileName , null , 0 ) ; }
public static java.lang.String getGerritPluginName ( java.io.File srcFile ) throws java.io.IOException { java.util.jar.JarFile jarFile = new java.util.jar.JarFile ( srcFile ) ; try { return jarFile.getManifest ( ) . getMainAttributes ( ) . getValue ( "Gerrit-PluginName" ) ; } finally { jarFile.close ( ) ; } }
private boolean isMember ( com.google.gerrit.reviewdb.client.AccountGroup parent , com.google.gerrit.common.data.GroupDescription.Basic member ) throws com.google.gwtorm.server.OrmException { return groups.isIncluded ( dbProvider.get ( ) , parent.getGroupUUID ( ) , member.getGroupUUID ( ) ) ; }
public void setUp ( ) throws java.lang.Exception { admins = groupCache.get ( new com.google.gerrit.reviewdb.client.AccountGroup.NameKey ( "Administrators" ) ) . getGroupUUID ( ) ; setUpPermissions ( ) ; setUpChanges ( ) ; }
public boolean isLineStart ( int b ) { return ( b == 0 ) || ( ( charAt ( ( b - 1 ) ) ) == '\n' ) ; }
public void run ( ) { try { serverStarted.await ( ) ; } catch ( java.lang.InterruptedException | java.util.concurrent.BrokenBarrierException e ) { throw new java.lang.RuntimeException ( e ) ; } }
private static boolean match ( java.lang.String value , java.lang.String pattern , boolean refMatcher ) { if ( refMatcher ) { return com.google.gerrit.server.project.RefPatternMatcher.getMatcher ( pattern ) . match ( value , null ) ; } return java.util.regex.Pattern.matches ( pattern , value ) ; }
public com.google.gerrit.server.IdentifiedUser create ( java.net.SocketAddress remotePeer , com.google.gerrit.reviewdb.client.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( capabilityControlFactory , authConfig , anonymousCowardName , canonicalUrl , realm , accountCache , groupBackend , com.google.inject.util.Providers.of ( remotePeer ) , null , id , null ) ; }
static org.apache.lucene.index.Term intTerm ( java.lang.String name , int value ) { org.apache.lucene.util.BytesRefBuilder builder = new org.apache.lucene.util.BytesRefBuilder ( ) ; org.apache.lucene.util.NumericUtils.intToPrefixCodedBytes ( value , 0 , builder ) ; return new org.apache.lucene.index.Term ( name , builder.get ( ) ) ; }
protected void onOpenRow ( final int row ) { super . onOpenRow ( row ) ; nameBox.setText ( getRowItem ( row ) . name ( ) ) ; doAddNew ( ) ; }
void setCurrentCommand ( com.google.gerrit.client.download.DownloadCommandLink cmd ) { currentCommand = cmd ; }
public abstract void handleEmails ( ) ;
public com.google.gerrit.server.IdentifiedUser create ( com.google.gerrit.reviewdb.client.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( capabilityControlFactory , authConfig , anonymousCowardName , canonicalUrl , realm , accountCache , groupBackend , remotePeerProvider , dbProvider , id ) ; }
public void addReviewer ( com.google.gerrit.extensions.api.changes.AddReviewerInput in ) throws com.google.gerrit.extensions.restapi.RestApiException { try { postReviewers.apply ( change , in ) ; } catch ( com.google.gwtorm.server.OrmException | com.google.gerrit.common.errors.EmailException | java.io.IOException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot add change reviewer" , e ) ; } }
private void fail ( java.lang.Throwable t ) { com.google.gerrit.pgm.RebuildNotedb.log.error ( ( "Failed to rebuild change " + ( changeId ) ) , t ) ; ok.set ( false ) ; failedTask.update ( 1 ) ; }
protected boolean isPatchSet ( ) { return false ; }
private java.lang.String newChange2 ( org.eclipse.jgit.api.Git git , org.eclipse.jgit.lib.PersonIdent ident ) throws java.lang.Exception { com.google.gerrit.acceptance.PushOneCommit push = pushFactory.create ( db , ident , PushOneCommit.SUBJECT , com.google.gerrit.acceptance.edit.ChangeEditIT.FILE_NAME , new java.lang.String ( com.google.gerrit.acceptance.edit.ChangeEditIT.CONTENT_OLD ) ) ; return push.rm ( git , "refs/for/master" ) . getChangeId ( ) ; }
protected java.lang.Object getRowItemKey ( final com.google.gerrit.client.dashboards.DashboardInfo item ) { return item.id ( ) ; }
public com.google.gerrit.extensions.registration.DynamicSet < T > get ( ) { return new com.google.gerrit.extensions.registration.DynamicSet ( com.google.gerrit.extensions.registration.DynamicSetProvider.find ( injector , type ) ) ; }
public void onRpcComplete ( final com.google.gwtjsonrpc.client.event.RpcCompleteEvent event ) { onRpcComplete ( ) ; }
public boolean createProject ( com.google.gerrit.reviewdb.client.Project.NameKey project , java.lang.String head ) { boolean success = true ; for ( org.eclipse.jgit.transport.URIish uri : getURIs ( project , FilterType.PROJECT_CREATION ) ) { success &= createProject ( uri , head ) ; } return success ; }
public void onSuccess ( com.google.gerrit.client.info.ChangeInfo result ) { sent = true ; hide ( ) ; com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( project , id ) ) ; }
private org.eclipse.jgit.lib.ObjectInserter getObjectInserter ( ) throws java.io.IOException { initRepository ( ) ; return inserter ; }
void addRight ( com.google.gerrit.client.reviewdb.Project.NameKey projectName , com.google.gerrit.client.reviewdb.ApprovalCategory.Id categoryId , java.lang.String groupName , short min , short max , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.admin.ProjectDetail > callback ) ;
public static void delete ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , java.lang.String path , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.VoidResult > cb ) { com.google.gerrit.client.changes.ChangeEditApi.editFile ( project , id , path ) . delete ( cb ) ; }
protected void onUnload ( ) { if ( ( regFocus ) != null ) { regFocus.removeHandler ( ) ; regFocus = null ; } }
public static void createDraft ( @ com.google.gerrit.common.Nullable java.lang.String project , com.google.gerrit.reviewdb.client.PatchSet.Id id , com.google.gerrit.client.changes.CommentInfo content , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.changes.CommentInfo > cb ) { com.google.gerrit.client.changes.CommentApi.revision ( project , id , "drafts" ) . put ( content , cb ) ; }
protected java.util.concurrent.Callable < java.lang.Void > indexTask ( com.google.gerrit.server.query.change.ChangeData cd ) { return new com.google.gerrit.server.index.ChangeIndexerImpl.Task ( cd , false ) ; }
public com.google.gerrit.extensions.common.CommitInfo apply ( com.google.gerrit.server.project.CommitResource rsrc ) { return com.google.gerrit.server.project.GetCommit.toCommitInfo ( rsrc.getCommit ( ) ) ; }
private void logWarn ( java.lang.String msg , java.lang.Throwable t ) { if ( com.google.gerrit.server.git.MergeOp.log.isWarnEnabled ( ) ) { com.google.gerrit.server.git.MergeOp.log.warn ( ( ( submissionId ) + msg ) , t ) ; } }
public void postEvent ( com.google.gerrit.server.events.Event event , com.google.gerrit.reviewdb.server.ReviewDb db ) { }
protected void configure ( ) { bind ( com.google.gerrit.server.ssh.SshInfo.class ) . to ( com.google.gerrit.server.ssh.NoSshInfo.class ) ; }
void merge ( com.google.gerrit.client.reviewdb.Branch.NameKey branch ) ;
void setPluginName ( @ com.google.gerrit.extensions.annotations.PluginName java.lang.String name ) { this . command = com.google.gerrit.sshd.Commands.named ( name ) ; }
public abstract com.google.gerrit.server.project.SubmitRuleOptions.Builder toBuilder ( ) ;
public static void setup ( ) { com.google.gerrit.server.events.EventTypes.register ( com.ericsson.gerrit.plugins.highavailability.forwarder.rest.EventRestApiServletTest.RefReplicationDoneEvent.TYPE , com.ericsson.gerrit.plugins.highavailability.forwarder.rest.EventRestApiServletTest.RefReplicationDoneEvent.class ) ; }
public java.lang.String getRefName ( ) { return null ; }
private com.cisco.gerrit.plugins.slack.config.ProjectConfig getConfig ( boolean publishOnPatchSetCreated ) throws java.lang.Exception { return getConfig ( "^WIP.*" , publishOnPatchSetCreated , true ) ; }
public static long replyError ( javax.servlet.http.HttpServletRequest req , javax.servlet.http.HttpServletResponse res , int statusCode , java.lang.String msg , @ com.google.gerrit.common.Nullable java.lang.Throwable err ) throws java.io.IOException { return com.google.gerrit.httpd.restapi.RestApiServlet.replyError ( req , res , statusCode , msg , CacheControl.NONE , err ) ; }
void onRefReplicatedToAllNodes ( java.lang.String project , java.lang.String ref , int nodesCount ) { com.googlesource.gerrit.plugins.replication.RefReplicationDoneEvent event = new com.googlesource.gerrit.plugins.replication.RefReplicationDoneEvent ( project , ref , nodesCount ) ; postEvent ( project , ref , event ) ; }
public Change.Key getChangeKey ( ) { return new com.google.gerrit.reviewdb.client.Change.Key ( change.id ) ; }
private boolean canEditFullName ( ) { return com.google.gerrit.client.Gerrit.info ( ) . auth ( ) . canEdit ( Account.FieldName.FULL_NAME ) ; }
public com.google.gerrit.server.plugins.PluginResource parse ( com.google.gerrit.extensions.restapi.TopLevelResource parent , com.google.gerrit.extensions.restapi.IdString id ) throws com.google.gerrit.extensions.restapi.ResourceNotFoundException { return parse ( id.get ( ) ) ; }
protected void submitWithConflict ( java.lang.String changeId , java.lang.String expectedError ) throws java.lang.Exception { submit ( changeId , new com.google.gerrit.extensions.api.changes.SubmitInput ( ) , com.google.gerrit.extensions.restapi.ResourceConflictException.class , expectedError , true ) ; }
public void registerKeys ( ) { super . registerKeys ( ) ; regNavigation = com.google.gwtexpui.globalkey.client.GlobalKey.add ( this , keysNavigation ) ; regAction = com.google.gwtexpui.globalkey.client.GlobalKey.add ( this , keysAction ) ; }
private com.google.gerrit.server.index.PredicateWrapper wrap ( com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > p ) throws com.google.gerrit.server.query.QueryParseException { return new com.google.gerrit.server.index.PredicateWrapper ( p , index ) ; }
private int getInt ( java.lang.String n , java.lang.String s , int d ) { return config.getInt ( "cache" , n , s , d ) ; }
public void onSuccess ( ) { com.google.gerrit.client.Gerrit.display ( token , ( edit ? new com.google.gerrit.client.editor.EditScreen ( baseId , id , line ) : new com.google.gerrit.client.diff.SideBySide ( baseId , id.getParentKey ( ) , id.get ( ) , side , line ) ) ) ; }
com.google.gerrit.server.patch.PatchListKey toPatchListKey ( ) { return new com.google.gerrit.server.patch.PatchListKey ( oldId , parentNum , newId , whitespace ) ; }
public java.lang.Void call ( ) throws java.io.IOException { for ( com.google.gerrit.server.index.change.ChangeIndex i : getWriteIndexes ( ) ) { i.delete ( id ) ; } fireChangeDeletedFromIndexEvent ( id.get ( ) ) ; return null ; }
java.lang.String plugins ( ) ;
public void setUp ( ) throws java.lang.Exception { db = new com.google.gwtorm.nosql.heap.MemoryDatabase ( com.google.gwtorm.data.PhoneBookDb.class ) ; openSchemas = new java.util.ArrayList < > ( ) ; }
private void fastForwardTagToExistingCommit ( com.google.gerrit.acceptance.rest.project.PushTagIT.TagType tagType , java.lang.String tagName , org.eclipse.jgit.transport.RemoteRefUpdate.Status expectedStatus ) throws java.lang.Exception { pushTag ( tagType , tagName , false , false , expectedStatus ) ; }
public void delete ( com.google.gerrit.reviewdb.client.Change.Id id ) { throw new java.lang.UnsupportedOperationException ( ) ; }
com.google.gerrit.common.data.PermissionRange getRange ( java.lang.String permission , boolean isChangeOwner ) { if ( com.google.gerrit.common.data.Permission.hasRange ( permission ) ) { return toRange ( permission , isChangeOwner ) ; } return null ; }
protected void onLoad ( ) { super . onLoad ( ) ; refresh ( true ) ; }
private boolean canEditAssignee ( ) { return ( ( ( isOwner ( ) ) || ( getProjectControl ( ) . isOwner ( ) ) ) || ( getRefControl ( ) . canEditAssignee ( ) ) ) || ( isAssignee ( ) ) ; }
public com.google.gerrit.client.diff.DiffApi base ( com.google.gerrit.reviewdb.client.PatchSet.Id id ) { if ( id != null ) { call.addParameter ( "base" , id.get ( ) ) ; } return this ; }
protected void configure ( ) { if ( recheckMergeable ) { install ( new com.google.gerrit.pgm.Reindex.MergeabilityModule ( ) ) ; } }
public com.google.common.collect.ListMultimap < com.google.gerrit.reviewdb.client.PatchSet.Id , com.google.gerrit.reviewdb.client.PatchSetApproval > approvals ( ) throws com.google.gwtorm.server.OrmException { if ( ( allApprovals ) == null ) { allApprovals = approvalsUtil.byChange ( db , notes ( ) ) ; } return allApprovals ; }
boolean setToRetry ( ) { retrying = true ; ( retryCount ) ++ ; return ( ( maxRetries ) == 0 ) || ( ( retryCount ) <= ( maxRetries ) ) ; }
private long getDiskUsage ( com.google.gerrit.reviewdb.client.Project.NameKey project ) throws java.io.IOException { org.eclipse.jgit.lib.Repository git = gitManager.openRepository ( project ) ; try { return getDiskUsage ( git.getDirectory ( ) ) ; } finally { git.close ( ) ; } }
public void abandonReviewableChangeNotifyOwnerCcingSelf ( ) throws java.lang.Exception { com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableChange ( ) ; abandon ( sc.changeId , sc.owner , com.google.gerrit.extensions.client.GeneralPreferencesInfo.EmailStrategy.CC_ON_OWN_COMMENTS , com.google.gerrit.extensions.api.changes.NotifyHandling.OWNER ) ; assertThat ( sender ) . notSent ( ) ; }
abstract void setHideEmptyPane ( boolean hide ) ;
com.google.gitiles.CommitData.Builder setRevWalk ( @ javax.annotation.Nullable org.eclipse.jgit.revwalk.RevWalk walk ) { this . walk = walk ; return this ; }
public void go ( ) { com.google.gerrit.client.Dispatcher.patch ( getTargetHistoryToken ( ) , base , patchKey , patchIndex , patchSetDetail , parentPatchTable , topView ) ; }
public void assertMessage ( java.lang.String expectedMessage ) { org.eclipse.jgit.transport.RemoteRefUpdate refUpdate = result.getRemoteUpdate ( ref ) ; com.google.common.truth.Truth.assertThat ( message ( refUpdate ) . toLowerCase ( ) ) . contains ( expectedMessage.toLowerCase ( ) ) ; }
public void setUp ( ) throws java.lang.Exception { project2 = createProject ( "p2" ) ; }
public void defaultDashboardDoesNotExist ( ) throws java.lang.Exception { exception.expect ( com.google.gerrit.extensions.restapi.ResourceNotFoundException.class ) ; project ( ) . defaultDashboard ( ) . get ( ) ; }
public void removeHandler ( ) { com.google.gwtexpui.globalkey.client.GlobalKey.keys.remove ( key ) ; com.google.gwtexpui.globalkey.client.GlobalKey.keyApplication.remove ( key ) ; }
public void autoFlush ( ) throws java.io.IOException { if ( autoCommit ) { manualFlush ( ) ; } }
private void assertIsUnhealthy ( ) throws java.io.IOException { javax.servlet.http.HttpServletResponse responseMock = org.mockito.Mockito.mock ( javax.servlet.http.HttpServletResponse.class ) ; servlet.doGet ( null , responseMock ) ; org.mockito.Mockito.verify ( responseMock ) . sendError ( javax.servlet.http.HttpServletResponse.SC_SERVICE_UNAVAILABLE ) ; }
protected void configure ( ) { bind ( com.googlesource.gerrit.plugins.verifystatus.server.schema.SchemaVersion.class ) . to ( SchemaVersion.C ) ; }
public void setUp ( ) throws java.lang.Exception { super . setUp ( ) ; allowGlobalCapabilities ( com.google.gerrit.server.group.SystemGroupBackend.REGISTERED_USERS , GlobalCapability.CREATE_GROUP ) ; allowGlobalCapabilities ( com.google.gerrit.server.group.SystemGroupBackend.REGISTERED_USERS , GlobalCapability.CREATE_PROJECT ) ; }
private static long upperLimit ( long unit ) { return unit + ( unit / 2 ) ; }
protected void configure ( ) { factory ( SaveDraft.Factory.class ) ; }
net.codemirror.lib.LineWidget getSelfWidget ( ) { return selfWidget ; }
public void testParentHashCode ( ) { final long id = 21281821821821881L ; final com.google.gwtorm.client.LongKeyTestCase.Parent p = new com.google.gwtorm.client.LongKeyTestCase.Parent ( id ) ; org.junit.Assert.assertEquals ( ( ( int ) ( id ) ) , p.hashCode ( ) ) ; }
public void listTagsOfNonVisibleProject ( ) throws java.lang.Exception { blockRead ( "refs/*" ) ; userSession.get ( ( ( "/projects/" + ( project.get ( ) ) ) + "/tags" ) ) . assertNotFound ( ) ; }
private com.google.gerrit.server.IdentifiedUser reloadUser ( ) { accountCache.evict ( userId ) ; user = userFactory.create ( userId ) ; return user ; }
private boolean canForgeCommitter ( ) { if ( ( canForgeCommitter ) == null ) { canForgeCommitter = canPerform ( Permission.FORGE_COMMITTER ) ; } return canForgeCommitter ; }
public java.lang.String getDisplayString ( ) { return branch.ref ( ) ; }
private com.google.gerrit.server.git.ProjectConfig read ( org.eclipse.jgit.revwalk.RevCommit rev ) throws java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { com.google.gerrit.server.git.ProjectConfig cfg = new com.google.gerrit.server.git.ProjectConfig ( new com.google.gerrit.reviewdb.client.Project.NameKey ( "test" ) ) ; cfg.load ( db , rev ) ; return cfg ; }
public static com.google.gerrit.server.git.ValidationError.Sink createLoggerSink ( java.lang.String message , org.slf4j.Logger log ) { return ( error ) -> log.error ( ( message + ( error.getMessage ( ) ) ) ) ; }
public java.lang.Object apply ( com.google.gerrit.server.project.ProjectResource rsrc , com.google.gerrit.server.project.GarbageCollect.Input input ) { com.google.gerrit.reviewdb.client.Project.NameKey project = rsrc.getNameKey ( ) ; if ( input.async ) { return applyAsync ( project , input ) ; } return applySync ( project , input ) ; }
void postEvent ( com.google.gerrit.reviewdb.client.Change change , com.google.gerrit.server.events.ChangeEvent event ) throws com.google.gwtorm.server.OrmException ;
default void stop ( ) { }
public void onFailure ( final java.lang.Throwable caught ) { addBranch.setEnabled ( true ) ; super . onFailure ( caught ) ; }
public com.google.gerrit.acceptance.RestResponse delete ( java.lang.String endPoint ) throws java.io.IOException { return execute ( org.apache.http.client.fluent.Request.Delete ( ( ( ( url ) + "/a" ) + endPoint ) ) ) ; }
private java.lang.String indent ( int spaces ) { if ( spaces == 0 ) { return "" ; } return java.lang.String.format ( ( ( "%" + spaces ) + "s" ) , " " ) ; }
public java.util.List < com.google.gerrit.server.query.change.ChangeData > byCommit ( org.eclipse.jgit.lib.ObjectId id ) throws com.google.gwtorm.server.OrmException { return query ( com.google.gerrit.server.query.change.InternalChangeQuery.commit ( id.name ( ) ) ) ; }
private Project.NameKey createProject ( com.google.gerrit.extensions.api.projects.ProjectInput in ) throws com.google.gerrit.extensions.restapi.RestApiException { gApi.projects ( ) . create ( in ) ; return new com.google.gerrit.reviewdb.client.Project.NameKey ( in.name ) ; }
public static boolean canRead ( final com.google.gerrit.client.reviewdb.Account.Id who , final com.google.gerrit.client.reviewdb.Project.NameKey projectKey ) { return com.google.gerrit.client.rpc.BaseServiceImplementation.canRead ( who , com.google.gerrit.client.rpc.Common.getProjectCache ( ) . get ( projectKey ) ) ; }
private static java.lang.String resolveHttpUrl ( java.lang.String remoteUrl ) { if ( remoteUrl == null ) { return null ; } return com.google.gitiles.PathServlet.VERBATIM_SUBMODULE_URL_PATTERN.matcher ( remoteUrl ) . matches ( ) ? remoteUrl : null ; }
void setJarUrl ( final java.lang.String url ) { this . jarUrl = url ; }
public void onSuccess ( final com.google.gwtjsonrpc.client.VoidResult result ) { com.google.gerrit.client.Gerrit.display ( nextToken ) ; }
void setName ( final java.lang.String name ) { this . name = name ; }
public void stop ( ) { threadPool = null ; }
private static void mainImpl ( final java.lang.String [ ] argv ) throws com.google.gwtjsonrpc.server.XsrfException , com.google.gwtorm.client.OrmException { com.google.gerrit.server.GerritServer.getInstance ( false ) ; com.google.gerrit.client.rpc.Common.getSchemaFactory ( ) . open ( ) . close ( ) ; java.lang.System.out.println ( "Gerrit2 schema initialized" ) ; }
public static com.google.gerrit.client.rpc.RestApi reviewer ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , java.lang.String reviewer ) { return com.google.gerrit.client.changes.ChangeApi.change ( project , id ) . view ( "reviewers" ) . id ( reviewer ) ; }
private static native java.lang.String go ( com.google.gwt.core.client.JavaScriptObject ctx , java.lang.String srcText , java.lang.String srcType ) ;
public com.google.gerrit.extensions.restapi.BinaryResult apply ( com.google.gerrit.server.project.FileResource rsrc ) throws com.google.gerrit.extensions.restapi.BadRequestException , com.google.gerrit.extensions.restapi.ResourceNotFoundException , java.io.IOException { return fileContentUtil.getContent ( rsrc.getProjectState ( ) , rsrc.getRev ( ) , rsrc.getPath ( ) , null ) ; }
public static void get ( @ com.google.gerrit.common.Nullable com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.reviewdb.client.PatchSet.Id id , java.lang.String path , com.google.gerrit.client.rpc.HttpCallback < com.google.gerrit.client.rpc.NativeString > cb ) { com.google.gerrit.client.changes.ChangeEditApi.get ( project , id , path , false , cb ) ; }
public void setMessage ( final java.lang.String message ) { }
public void checkCustom ( org.bouncycastle.openpgp.PGPPublicKey key , java.util.List < java.lang.String > problems ) { }
public com.google.gerrit.reviewdb.client.Change update ( com.google.gerrit.reviewdb.client.Change c ) { if ( c.getStatus ( ) . isOpen ( ) ) { c.setStatus ( Change.Status.NEW ) ; com.google.gerrit.server.ChangeUtil.updated ( c ) ; } return c ; }
private static boolean eq ( final java.lang.String a , final java.lang.String b ) { if ( ( a == null ) && ( b == null ) ) { return true ; } return ( a != null ) && ( a.equals ( b ) ) ; }
public void setMaxDatabaseSize ( int size ) { if ( ( engine.internalDB ) != null ) engine.internalDB.maxContents = size ; else engine.internalDB = new com.googlecode.prolog_cafe.lang.InternalDatabase ( size ) ; }
protected void onInitUI ( ) { super . onInitUI ( ) ; groups = new com.google.gerrit.client.admin.GroupTable ( true ) ; add ( groups ) ; }
public com.google.gerrit.extensions.common.ChangeInfo check ( com.google.gerrit.extensions.api.changes.FixInput fix ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return check.apply ( change , fix ) . value ( ) ; } catch ( com.google.gwtorm.server.OrmException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot check change" , e ) ; } }
public com.google.gerrit.server.notedb.NoteDbUpdateManager.Result rebuildEvenIfReadOnly ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.Change.Id changeId ) throws com.google.gwtorm.server.OrmException , java.io.IOException { return rebuild ( db , changeId , false ) ; }
public void getOpenChange_NotFound ( ) throws java.lang.Exception { com.google.gerrit.acceptance.PushOneCommit.Result r = pushFactory.create ( db , admin.getIdent ( ) , git ) . to ( "refs/for/master" ) ; r.assertOkStatus ( ) ; assertNotFound ( r.getCommitId ( ) ) ; }
public void evict ( com.google.gerrit.reviewdb.client.Account.Id accountId ) throws java.io.IOException { if ( accountId != null ) { byId.invalidate ( accountId ) ; index ( accountId ) ; } }
private final native boolean get ( java.lang.String n , boolean d ) ;
void init ( com.google.gerrit.client.change.ChangeScreen2.Style style ) { this . style = style ; }
public void testHashCodeWhenNull ( ) { final com.google.gwtorm.client.StringKeyTestCase.Parent p = new com.google.gwtorm.client.StringKeyTestCase.Parent ( null ) ; org.junit.Assert.assertEquals ( 0 , p.hashCode ( ) ) ; }
public abstract com.google.gerrit.server.git.MergeTip run ( com.google.gerrit.server.git.CodeReviewCommit currentTip , java.util.Collection < com.google.gerrit.server.git.CodeReviewCommit > toMerge ) throws com.google.gerrit.server.git.IntegrationException ;
public void onClick ( com.google.gwt.event.dom.client.ClickEvent event ) { setOpen ( ( ! ( isOpen ( ) ) ) ) ; }
public void run ( ) throws java.lang.Exception { impl.display ( stdout ) ; }
public com.google.gwtorm.schema.SchemaModel getSchemaModel ( ) { return schemaModel ; }
protected void configure ( ) { listener ( ) . to ( CachePool.Lifecycle.class ) ; listener ( ) . to ( WorkQueue.Lifecycle.class ) ; listener ( ) . to ( com.google.gerrit.server.config.GerritGlobalModule.VelocityLifecycle.class ) ; }
public void setUp ( ) throws java.lang.Exception { new com.google.gerrit.testutil.InMemoryModule ( ) . inject ( this ) ; }
void addFileCommentBox ( com.google.gerrit.client.diff.CommentBox box ) { diffTable.addFileCommentBox ( box ) ; }
public void onPreReceive ( final org.spearce.jgit.transport.ReceivePack arg0 , final java.util.Collection < org.spearce.jgit.transport.ReceiveCommand > commands ) { parseCommands ( commands ) ; createNewChanges ( ) ; appendPatchSets ( ) ; }
public final void addLineClass ( int line , net.codemirror.lib.CodeMirror.LineClassWhere where , java.lang.String className ) { addLineClassNative ( line , where.value ( ) , className ) ; }
public void onSuccess ( final java.util.List < com.google.gerrit.client.reviewdb.Branch > result ) { enableForm ( true ) ; branches.display ( result ) ; }
public void onKeyPress ( final com.google.gwt.event.dom.client.KeyPressEvent event ) { if ( ( event.getCharCode ( ) ) == ( com.google.gwt.event.dom.client.KeyCodes.KEY_ENTER ) ) { event.preventDefault ( ) ; form.submit ( ) ; } }
private static com.google.gerrit.client.rpc.RestApi editMessage ( @ com.google.gerrit.common.Nullable java.lang.String project , int id ) { return com.google.gerrit.client.changes.ChangeApi.change ( project , id ) . view ( "edit:message" ) ; }
public com.google.gerrit.server.account.GroupControl controlFor ( final com.google.gerrit.reviewdb.client.AccountGroup group ) { return new com.google.gerrit.server.account.GroupControl ( user.get ( ) , group ) ; }
public void projectDetail ( final com.google.gerrit.client.reviewdb.Project.NameKey projectName , final com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.admin.ProjectDetail > callback ) { projectDetailFactory.create ( projectName ) . to ( callback ) ; }
private java.lang.String pushTagForNewCommit ( com.google.gerrit.acceptance.rest.project.PushTagIT.TagType tagType , org.eclipse.jgit.transport.RemoteRefUpdate.Status expectedStatus ) throws java.lang.Exception { return pushTag ( tagType , null , true , expectedStatus ) ; }
public com.google.gerrit.extensions.common.ChangeInfo format ( com.google.gerrit.server.query.change.ChangeData cd ) throws com.google.gwtorm.server.OrmException { return format ( cd , com.google.common.base.Optional.< com.google.gerrit.reviewdb.client.PatchSet.Id > absent ( ) , true ) ; }
void addBranch ( com.google.gerrit.client.reviewdb.Project.NameKey projectName , java.lang.String branchName , java.lang.String startingRevision , com.google.gwt.user.client.rpc.AsyncCallback < java.util.List < com.google.gerrit.client.reviewdb.Branch > > callback ) ;
public final native java.lang.String id ( ) ;
public static java.lang.String toChangeQuery ( java.lang.String query , java.lang.String page ) { return ( ( "/q/" + ( com.google.gwtorm.client.KeyUtil.encode ( query ) ) ) + "," ) + page ; }
void clearRange ( ) { if ( ( rangeMarker ) != null ) { rangeMarker.clear ( ) ; rangeMarker = null ; } }
com.google.gerrit.extensions.restapi.RestModifyView < P , ? > delete ( P parent , com.google.gerrit.extensions.restapi.IdString id ) throws com.google.gerrit.extensions.restapi.RestApiException ;
void removeAll ( ) { if ( ( skipBars ) != null ) { for ( com.google.gerrit.client.diff.SkipBar bar : skipBars ) { bar.expandSideAll ( ) ; } skipBars = null ; line0 = null ; } }
public com.google.gerrit.server.IdentifiedUser create ( final com.google.gerrit.reviewdb.Account.Id id ) { return create ( AccessPath.UNKNOWN , null , id ) ; }
static com.google.gerrit.server.patch.PatchListEntry empty ( final java.lang.String fileName ) { return new com.google.gerrit.server.patch.PatchListEntry ( com.google.gerrit.reviewdb.Patch.ChangeType.MODIFIED , com.google.gerrit.reviewdb.Patch.PatchType.UNIFIED , null , fileName , com.google.gerrit.server.patch.PatchListEntry.EMPTY_HEADER , java.util.Collections.< org.eclipse.jgit.diff.Edit > emptyList ( ) , 0 , 0 ) ; }
public void testCreateProjectWhenProjectAlreadyExists_Conflict ( ) throws java.lang.Exception { com.google.gerrit.acceptance.RestResponse r = adminSession.put ( "/projects/All-Projects" ) ; com.google.common.truth.Truth.assertThat ( r.getStatusCode ( ) ) . isEqualTo ( HttpStatus.SC_CONFLICT ) ; }
synchronized com.google.gerrit.sshd.SshScope.Context subContext ( com.google.gerrit.sshd.SshSession newSession , java.lang.String newCommandLine ) { com.google.gerrit.sshd.SshScope.Context ctx = new com.google.gerrit.sshd.SshScope.Context ( this , newSession , newCommandLine ) ; ctx.cleanup.add ( cleanup ) ; return ctx ; }
protected void onOpenRow ( final int row ) { if ( row > 0 ) { movePointerTo ( row ) ; } com.google.gwt.user.client.History.newItem ( getRowItem ( row ) . url ( ) ) ; }
private static final native void init ( java.lang.String d , java.lang.String t , java.lang.String r , java.lang.String o ) ;
private void insertEmptyLines ( net.codemirror.lib.CodeMirror cm , int nextLine , int cnt ) { addPaddingWidget ( cm , diffTable.style.padding ( ) , ( nextLine - 1 ) , cnt , Unit.EM , null ) ; }
private java.lang.String newChange ( org.eclipse.jgit.api.Git git , org.eclipse.jgit.lib.PersonIdent ident ) throws java.lang.Exception { com.google.gerrit.acceptance.PushOneCommit push = pushFactory.create ( db , ident , PushOneCommit.SUBJECT , com.google.gerrit.acceptance.edit.ChangeEditIT.FILE_NAME , new java.lang.String ( com.google.gerrit.acceptance.edit.ChangeEditIT.CONTENT_OLD ) ) ; return push.to ( git , "refs/for/master" ) . getChangeId ( ) ; }
private org.eclipse.jgit.lib.ObjectId pushChangeTo ( org.eclipse.jgit.junit.TestRepository < ? > repo , java.lang.String branch ) throws java.lang.Exception { return pushChangeTo ( repo , branch , "some change" ) ; }
public java.util.List < com.google.gerrit.server.query.change.ChangeData > byTopicOpen ( java.lang.String topic ) throws com.google.gwtorm.server.OrmException { return query ( com.google.gerrit.server.query.Predicate.and ( topic ( topic ) , com.google.gerrit.server.query.change.ChangeStatusPredicate.open ( ) ) ) ; }
public static native net.codemirror.lib.CodeMirror create ( com.google.gwt.dom.client.Element p , net.codemirror.lib.Configuration cfg ) ;
public synchronized com.google.gerrit.metrics.Counter0 newCounter ( java.lang.String name , com.google.gerrit.metrics.Description desc ) { com.google.gerrit.metrics.dropwizard.DropWizardMetricMaker.checkCounterDescription ( name , desc ) ; define ( name , desc ) ; return newCounterImpl ( name , desc.isRate ( ) ) ; }
private static boolean autoReindexIfStale ( org.eclipse.jgit.lib.Config cfg ) { return cfg.getBoolean ( "index" , null , "autoReindexIfStale" , false ) ; }
public com.google.gerrit.reviewdb.client.PatchSetApproval.LabelId getLabelId ( ) { return new com.google.gerrit.reviewdb.client.PatchSetApproval.LabelId ( name ) ; }
private void redisplay ( ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( changeId ) ) ; }
private static com.google.gerrit.client.rpc.RestApi revision ( @ com.google.gerrit.common.Nullable java.lang.String project , com.google.gerrit.reviewdb.client.PatchSet.Id id , java.lang.String type ) { return com.google.gerrit.client.changes.ChangeApi.revision ( project , id ) . view ( type ) ; }
public void run ( ) { for ( ; ; ) { try { if ( done.await ( checkFrequencyMillis , java.util.concurrent.TimeUnit.MILLISECONDS ) ) { return ; } } catch ( java.lang.InterruptedException e ) { } loader.rescan ( ) ; } }
protected abstract java.lang.String prettify ( java.lang.String html , java.lang.String type ) ;
protected void configure ( ) { bind ( com.google.gerrit.server.query.change.ChangeQueryRewriter.class ) . to ( com.google.gerrit.server.index.IndexRewriteImpl.class ) ; bind ( com.google.gerrit.server.index.IndexCollection.class ) ; listener ( ) . to ( com.google.gerrit.server.index.IndexCollection.class ) ; factory ( ChangeIndexer.Factory.class ) ; }
public java.lang.String call ( ) throws java.lang.Exception { log.debug ( "Adding comment {} to issue {}" , comment , issueKey ) ; client ( ) . addComment ( issueKey , comment ) ; log.debug ( "Added comment {} to issue {}" , comment , issueKey ) ; return issueKey ; }
protected < P extends com.google.gerrit.extensions.restapi.RestResource > com.google.gerrit.extensions.restapi.RestApiModule.ChildCollectionBinder < P > child ( com.google.inject.TypeLiteral < com.google.gerrit.extensions.restapi.RestView < P > > type , java.lang.String name ) { return new com.google.gerrit.extensions.restapi.RestApiModule.ChildCollectionBinder ( view ( type , com.google.gerrit.extensions.restapi.RestApiModule.GET , name ) ) ; }
public boolean getIfPresent ( org.eclipse.jgit.lib.ObjectId commit , org.eclipse.jgit.lib.Ref intoRef , com.google.gerrit.extensions.common.SubmitType submitType , java.lang.String mergeStrategy ) { return cache.getIfPresent ( new com.google.gerrit.server.change.MergeabilityCacheImpl.EntryKey ( commit , com.google.gerrit.server.change.MergeabilityCacheImpl.toId ( intoRef ) , submitType , mergeStrategy ) ) ; }
public void resetHtml ( com.google.gwtexpui.safehtml.client.SafeHtml body ) { currentRow = - 1 ; super . resetHtml ( body ) ; }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Object > apply ( java.lang.Boolean indexUpdated ) throws java.lang.Exception { if ( ! indexUpdated ) { return ( ( com.google.common.util.concurrent.ListenableFuture < java.lang.Object > ) ( indexer.indexAsync ( id ) ) ) ; } return com.google.common.util.concurrent.Futures.immediateFuture ( null ) ; }
protected java.lang.Object createServiceHandle ( ) throws java.lang.Exception { return new com.google.gerrit.server.SystemInfoServiceImpl ( ) ; }
public void nullCommitMessage ( ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( com.google.gerrit.server.change.HashtagsUtil.extractTags ( null ) ) . isEmpty ( ) ; }
public com.google.gerrit.reviewdb.client.PatchSetApproval apply ( com.google.gerrit.reviewdb.client.PatchSetApproval in ) { if ( in.getPatchSetId ( ) . equals ( psId ) ) { return in ; } return new com.google.gerrit.reviewdb.client.PatchSetApproval ( psId , in ) ; }
public char charAt ( int idx ) { return content.charAt ( idx ) ; }
public boolean exists ( final java.lang.String issueKey ) throws java.io.IOException { return execute ( ( ) -> client ( ) . issueExists ( issueKey ) ) ; }
void onFollowUp ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { if ( ( followUpAction ) == null ) { followUpAction = new com.google.gerrit.client.change.FollowUpAction ( followUp , project.get ( ) , branch , topic , key ) ; } followUpAction.show ( ) ; }
protected org.eclipse.jgit.lib.Repository getRepository ( ) throws java.io.IOException { initRepository ( ) ; return repo ; }
private org.eclipse.jgit.revwalk.RevWalk getRevWalk ( ) throws java.io.IOException { initRepository ( ) ; return revWalk ; }
public void testOne ( ) { com.google.common.truth.Truth.assertThat ( serverConfig.getString ( "x" , null , "y" ) ) . isEqualTo ( "z" ) ; }
public com.google.gerrit.server.query.change.ChangeData apply ( com.google.gerrit.server.notedb.ChangeNotes notes ) { return changeDataFactory.create ( db , notes ) ; }
private com.google.gerrit.acceptance.AcceptanceTestRequestScope.Context newRequestContext ( com.google.gerrit.acceptance.TestAccount account ) { return atrScope.newContext ( reviewDbProvider , new com.google.gerrit.acceptance.SshSession ( server , account ) , identifiedUserFactory.create ( account.getId ( ) ) ) ; }
public void testCreateProjectWithoutCapability_Forbidden ( ) throws java.lang.Exception { setApiUser ( user ) ; com.google.gerrit.extensions.api.projects.ProjectInput in = new com.google.gerrit.extensions.api.projects.ProjectInput ( ) ; in.name = name ( "newProject" ) ; assertCreateFails ( in , com.google.gerrit.extensions.restapi.AuthException.class ) ; }
static void delete ( com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.reviewdb.client.Change.Id id , com.google.gwt.user.client.ui.Button ... draftButtons ) { com.google.gerrit.client.changes.ChangeApi.deleteChange ( project.get ( ) , id.get ( ) , com.google.gerrit.client.change.ChangeActions.mine ( draftButtons ) ) ; }
public void onChangeIndexed ( int id ) { executeIndexTask ( id , false ) ; }
public void postEvent ( com.google.gerrit.server.events.Event event , com.google.gerrit.reviewdb.server.ReviewDb db ) { }
public int getCardinality ( ) { return 1 ; }
public abstract com.google.gerrit.server.mail.receive.MailMessage.Builder id ( java.lang.String val ) ;
public void setPatchSet ( final com.google.gerrit.reviewdb.client.PatchSet ps ) { patchSet = ps ; }
protected void configure ( ) { listener ( ) . to ( CachePool.Lifecycle.class ) ; listener ( ) . to ( com.google.gerrit.server.config.GerritGlobalModule.VelocityLifecycle.class ) ; }
private boolean checkAndUpdateArrows ( ) { if ( ( numSkipLines ) <= ( com.google.gerrit.client.diff.SkipBar.UP_DOWN_THRESHOLD ) ) { addStyleName ( style.noExpand ( ) ) ; return false ; } return true ; }
void onExpandAfter ( com.google.gwt.event.dom.client.ClickEvent e ) { expandAfter ( ) ; otherBar.expandAfter ( ) ; cm.focus ( ) ; }
public static java.lang.String toChange ( final com.google.gerrit.reviewdb.client.PatchSet.Id ps ) { return ( ( "/c/" + ( ps.getParentKey ( ) ) ) + "/" ) + ( ps.getId ( ) ) ; }
public com.google.gwtorm.jdbc.Database < com.google.gerrit.reviewdb.server.ReviewDb > get ( ) { try { return new com.google.gwtorm.jdbc.Database ( datasource , com.google.gerrit.reviewdb.server.ReviewDb.class ) ; } catch ( com.google.gwtorm.server.OrmException e ) { throw new com.google.inject.ProvisionException ( "Cannot create ReviewDb" , e ) ; } }
public void enableButtons ( final boolean on ) { for ( com.google.gwt.user.client.ui.Widget w : getButtonPanel ( ) ) { if ( w instanceof com.google.gwt.user.client.ui.Button ) { ( ( com.google.gwt.user.client.ui.Button ) ( w ) ) . setEnabled ( on ) ; } } }
private static void assertChildren ( java.lang.String o , com.google.gerrit.server.query.Predicate < java.lang.String > p , java.util.List < ? extends com.google.gerrit.server.query.Predicate < java.lang.String > > l ) { org.junit.Assert.assertEquals ( ( o + " did not affect child" ) , l , p.getChildren ( ) ) ; }
public com.google.gerrit.server.project.FileResource parse ( com.google.gerrit.server.project.CommitResource parent , com.google.gerrit.extensions.restapi.IdString id ) throws com.google.gerrit.extensions.restapi.ResourceNotFoundException { return new com.google.gerrit.server.project.FileResource ( parent.getProject ( ) , parent.getCommit ( ) , id.get ( ) ) ; }
public boolean updateChange ( com.google.gerrit.server.git.BatchUpdate.ChangeContext ctx ) throws java.lang.Exception { return false ; }
public final native java.lang.String name ( ) ;
default com.google.gerrit.reviewdb.client.Change getChange ( ) { return com.google.common.base.Preconditions.checkNotNull ( getNotes ( ) . getChange ( ) ) ; }
private com.google.common.util.concurrent.ListeningExecutorService newExecutor ( ) { if ( ( threads ) > 0 ) { return com.google.common.util.concurrent.MoreExecutors.listeningDecorator ( workQueue.createQueue ( threads , "RebuildChange" ) ) ; } return com.google.common.util.concurrent.MoreExecutors.newDirectExecutorService ( ) ; }
public void byId ( ) throws java.lang.Exception { com.google.gerrit.extensions.common.AccountInfo user = newAccount ( "user" ) ; assertQuery ( "9999999" ) ; assertQuery ( currentUserInfo._accountId , currentUserInfo ) ; assertQuery ( user._accountId , user ) ; }
protected PushOneCommit.Result pushTo ( java.lang.String ref ) throws java.io.IOException , org.eclipse.jgit.api.errors.GitAPIException { com.google.gerrit.acceptance.PushOneCommit push = pushFactory.create ( db , admin.getIdent ( ) , git ) ; return push.to ( ref ) ; }
public void execute ( ) { lgtm.run ( ) ; }
public com.google.gerrit.server.project.SubmitRuleOptions.Builder toBuilder ( ) { return com.google.gerrit.server.project.SubmitRuleOptions.builder ( ) . allowClosed ( allowClosed ( ) ) . skipFilters ( skipFilters ( ) ) . rule ( rule ( ) ) ; }
protected abstract java.lang.String getNextSequenceValueSql ( java.lang.String seqname ) ;
public void setPrivate ( boolean value , @ com.google.gerrit.common.Nullable java.lang.String message ) { throw new com.google.gerrit.extensions.restapi.NotImplementedException ( ) ; }
protected void logDebug ( java.lang.String msg , java.lang.Object ... args ) { if ( ( ( requestId ) != null ) && ( com.google.gerrit.server.update.BatchUpdate.log.isDebugEnabled ( ) ) ) { com.google.gerrit.server.update.BatchUpdate.log.debug ( ( ( requestId ) + msg ) , args ) ; } }
public boolean isOwnerOf ( com.google.gerrit.common.data.AccessSection section ) { return isOwnerOf ( section.getName ( ) ) ; }
protected void configure ( ) { bind ( ProjectControl.GenericFactory.class ) ; factory ( ProjectControl.AssistedFactory.class ) ; bind ( ChangeControl.GenericFactory.class ) ; bind ( ChangeControl.Factory.class ) ; }
private boolean nameEqualsAbbreviated ( org.eclipse.jgit.lib.ObjectId other ) { return ( org.eclipse.jgit.lib.AbbreviatedObjectId.isId ( name ) ) && ( ( org.eclipse.jgit.lib.AbbreviatedObjectId.fromString ( name ) . prefixCompare ( other ) ) == 0 ) ; }
public com.google.gerrit.server.ssh.DispatchCommand get ( ) { return factory.create ( dispatcherName , getMap ( ) ) ; }
void invalidUserName ( ) { userNameTxt.setFocus ( true ) ; new com.google.gerrit.client.ErrorDialog ( Util.C.invalidUserName ( ) ) . center ( ) ; }
public void getNonExistingChildProject_NotFound ( ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( GET ( ( ( "/projects/" + ( allProjects.get ( ) ) ) + "/children/non-existing" ) ) . getStatusCode ( ) ) . isEqualTo ( HttpStatus.SC_NOT_FOUND ) ; }
private com.google.gerrit.server.git.VersionedMetaDataTest.MyMetaData load ( java.lang.String ref , int expectedValue ) throws java.lang.Exception { com.google.gerrit.server.git.VersionedMetaDataTest.MyMetaData d = new com.google.gerrit.server.git.VersionedMetaDataTest.MyMetaData ( ref ) ; d.load ( repo ) ; com.google.common.truth.Truth.assertThat ( d.getValue ( ) ) . isEqualTo ( expectedValue ) ; return d ; }
public void singleHashtagNumeric ( ) throws java.lang.Exception { java.lang.String commitMessage = "Subject\n\n#123\n\nLine 2" ; com.google.common.truth.Truth.assertThat ( com.google.gerrit.server.change.HashtagsUtil.extractTags ( commitMessage ) ) . containsExactlyElementsIn ( com.google.common.collect.Sets.newHashSet ( "123" ) ) ; }
protected void focusHint ( ) { if ( hintOn ) { super . setText ( "" ) ; if ( ( getHintStyleName ( ) ) != null ) { removeStyleName ( getHintStyleName ( ) ) ; } hintOn = false ; } }
public com.google.common.util.concurrent.CheckedFuture < ? , java.io.IOException > indexAsync ( com.google.gerrit.reviewdb.client.Change change ) { return ( executor ) != null ? submit ( new com.google.gerrit.server.index.ChangeIndexer.Task ( new com.google.gerrit.server.query.change.ChangeData ( change ) , false ) ) : com.google.common.util.concurrent.Futures.< java.lang.Object , java.io.IOException > immediateCheckedFuture ( null ) ; }
public void requestSuggestions ( com.google.gerrit.client.ui.Request req , com.google.gerrit.client.ui.Callback cb ) { com.google.gerrit.client.ui.RemoteSuggestOracle.Query q = new com.google.gerrit.client.ui.RemoteSuggestOracle.Query ( req , cb ) ; if ( ( query ) == null ) { query = q ; q.start ( ) ; } else { query = q ; } }
public void upsert ( java.lang.Iterable < T > instances ) throws com.google.gwtorm.client.OrmException { for ( T obj : instances ) { upsertOne ( obj , false ) ; } }
private com.google.gerrit.extensions.common.ChangeInput newChangeInput ( ) { com.google.gerrit.extensions.common.ChangeInput in = new com.google.gerrit.extensions.common.ChangeInput ( ) ; in.branch = "master" ; in.subject = "test" ; in.project = project.get ( ) ; return in ; }
private java.lang.String trimFromChar ( java.lang.String string , char ch ) { if ( ( string.lastIndexOf ( ch ) ) >= 0 ) { return string.substring ( ( ( string.lastIndexOf ( ch ) ) + 1 ) ) ; } return string ; }
public java.lang.String format ( java.lang.String projectName , com.googlesource.gerrit.plugins.xdocs.ConfigSection cfg , java.lang.String raw ) throws java.io.IOException ;
protected void preDisplay ( final com.google.gerrit.common.data.PatchSetPublishDetail result ) { send.setEnabled ( true ) ; this . preDisplay ( result , this ) ; }
private java.util.Set < java.security.PublicKey > getPeerKeys ( ) { com.google.gerrit.sshd.DatabasePubKeyAuth.PeerKeyCache p = peerKeyCache ; if ( ! ( p.isCurrent ( ) ) ) { p = p.reload ( ) ; peerKeyCache = p ; } return p.keys ; }
private com.google.gerrit.reviewdb.AccountDiffPreference.Whitespace getIgnoreWhitespace ( ) { final int sel = ignoreWhitespace.getSelectedIndex ( ) ; if ( 0 <= sel ) { return com.google.gerrit.reviewdb.AccountDiffPreference.Whitespace.valueOf ( ignoreWhitespace.getValue ( sel ) ) ; } return value.getIgnoreWhitespace ( ) ; }
protected java.lang.String getNextSequenceValueSql ( final java.lang.String seqname ) { return seqname ; }
public void onSuccess ( com.google.gerrit.client.info.ChangeInfo result ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.client.Dispatcher.toEditScreen ( project , new com.google.gerrit.reviewdb.client.PatchSet.Id ( result.legacyId ( ) , 1 ) , "project.config" ) ) ; }
public void start ( final org.apache.sshd.server.Environment env ) { startThread ( this :: runImp ) ; }
private com.google.gerrit.server.index.IndexedChangeQuery query ( com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > p , int limit ) throws com.google.gerrit.server.query.QueryParseException { return new com.google.gerrit.server.index.IndexedChangeQuery ( null , index , p , limit ) ; }
public java.lang.String getUrl ( java.lang.String project ) { return project ; }
public void done ( ) { finalAdded = true ; apply ( ) ; }
private static com.google.gerrit.server.git.CodeReviewCommit error ( com.google.gerrit.server.git.CommitMergeStatus s ) { com.google.gerrit.server.git.CodeReviewCommit r = new com.google.gerrit.server.git.CodeReviewCommit ( org.eclipse.jgit.lib.ObjectId.zeroId ( ) ) ; r.statusCode = s ; return r ; }
public static java.lang.String refsStarredChanges ( com.google.gerrit.reviewdb.client.Change.Id changeId , com.google.gerrit.reviewdb.client.Account.Id accountId ) { return com.google.gerrit.reviewdb.client.RefNames.buildRefsPrefix ( com.google.gerrit.reviewdb.client.RefNames.REFS_STARRED_CHANGES , changeId.get ( ) ) . append ( accountId.get ( ) ) . toString ( ) ; }
private void setupDefaultOperations ( ) { new org.eclipse.example.calc.internal.operations.Equals ( ) ; new org.eclipse.example.calc.internal.operations.Minus ( ) ; new org.eclipse.example.calc.internal.operations.Plus ( ) ; new org.eclipse.example.calc.internal.Divide ( ) ; new org.eclipse.example.calc.internal.operations.Square ( ) ; }
public static com.google.common.base.Function < com.google.gerrit.reviewdb.client.Change , com.google.gerrit.reviewdb.client.Change.Id > changeIdFunction ( ) { return Change :: getId ; }
public static java.lang.String toAccountQuery ( java.lang.String fullname , com.google.gerrit.reviewdb.client.Change.Status status ) { return com.google.gerrit.common.PageLinks.toChangeQuery ( ( ( ( com.google.gerrit.common.PageLinks.op ( "owner" , fullname ) ) + " " ) + ( com.google.gerrit.common.PageLinks.status ( status ) ) ) ) ; }
public com.google.gerrit.server.mail.MergeFailSender create ( com.google.gerrit.reviewdb.client.Change.Id id ) ;
public void clear ( ) { set ( null ) ; }
private static java.nio.file.Path getZipPath ( java.nio.file.Path buckOut ) { if ( buckOut == null ) { return null ; } return buckOut.resolve ( "gen" ) . resolve ( "polygerrit-ui" ) . resolve ( "polygerrit_components" ) . resolve ( "polygerrit_components.bower_components.zip" ) ; }
private boolean canRestore ( com.google.gerrit.reviewdb.server.ReviewDb db ) throws com.google.gwtorm.server.OrmException { return ( canAbandon ( db ) ) && ( getRefControl ( ) . canUpload ( ) ) ; }
public abstract boolean isAuthSupported ( ) ;
public void fooSubdirText ( ) throws java.lang.Exception { com.google.gitiles.FakeHttpServletResponse res = buildText ( "/foo/" ) ; com.google.common.truth.Truth.assertThat ( new java.lang.String ( res.getActualBody ( ) , java.nio.charset.StandardCharsets.UTF_8 ) ) . isEqualTo ( "bar/repo\n" ) ; }
public void close ( ) { tw.close ( ) ; }
com.google.gerrit.server.change.ChangeKind getChangeKind ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.Change change , com.google.gerrit.reviewdb.client.PatchSet patch ) ;
com.google.gwtorm.client.ResultSet < com.google.gerrit.client.reviewdb.PatchLineComment > draft ( com.google.gerrit.client.reviewdb.Patch.Key patch , com.google.gerrit.client.reviewdb.Account.Id author ) throws com.google.gwtorm.client.OrmException ;
com.google.gerrit.server.mail.RevertedSender create ( com.google.gerrit.reviewdb.client.Change.Id id ) ;
public final native void path ( java.lang.String p ) ;
public void options ( com.google.gerrit.extensions.common.GroupOptionsInfo options ) throws com.google.gerrit.extensions.restapi.RestApiException { try { putOptions.apply ( rsrc , options ) ; } catch ( com.google.gwtorm.server.OrmException | java.io.IOException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot put group options" , e ) ; } }
private com.google.gerrit.server.change.ChangeJson newChangeJson ( ) { return jsonFactory.create ( ListChangesOption.CHECK ) ; }
public void addPatchSets ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.server.data.ChangeAttribute a , java.util.Collection < com.google.gerrit.reviewdb.client.PatchSet > ps , com.google.gerrit.common.data.LabelTypes labelTypes ) { addPatchSets ( db , a , ps , null , false , null , labelTypes ) ; }
public void onSuccess ( com.google.gerrit.client.groups.GroupMap result ) { groups.display ( result , subname ) ; groups.finishDisplay ( ) ; }
public com.google.common.util.concurrent.CheckedFuture < java.lang.Boolean , java.io.IOException > updateAsync ( com.google.gerrit.reviewdb.client.Change change ) { return updateAsync ( change , false ) ; }
public void onSuccess ( com.google.gwtjsonrpc.client.VoidResult result ) { setEnabled ( true ) ; }
protected < R extends com.google.gerrit.extensions.restapi.RestResource > com.google.gerrit.extensions.restapi.RestApiModule.ReadViewBinder < R > get ( com.google.inject.TypeLiteral < com.google.gerrit.extensions.restapi.RestView < R > > viewType , java.lang.String name ) { return new com.google.gerrit.extensions.restapi.RestApiModule.ReadViewBinder ( view ( viewType , com.google.gerrit.extensions.restapi.RestApiModule.GET , name ) ) ; }
protected void writeOne ( java.lang.CharSequence line ) throws java.io.IOException { writer.append ( line ) ; }
public com.google.gerrit.gpg.PublicKeyChecker disableTrust ( ) { trusted = null ; return this ; }
protected void onLoad ( ) { super . onLoad ( ) ; com.google.gerrit.client.changes.ChangeList.query ( query , ChangeTable.OPTIONS , loadCallback ( ) , start , pageSize ) ; }
private static java.lang.String url ( com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.reviewdb.client.PatchSet.Id ps , com.google.gerrit.client.changes.CommentInfo info ) { return com.google.gerrit.client.Dispatcher.toPatch ( project , null , ps , info.path ( ) ) ; }
private void addComment ( com.google.gerrit.acceptance.PushOneCommit.Result r , java.lang.String message ) throws java.lang.Exception { addComment ( r , message , false , false , null ) ; }
private static void h ( final java.lang.StringBuilder r , final com.google.gerrit.client.reviewdb.PatchSet ps ) { com.google.gerrit.client.data.GitwebLink.var ( r , "h" , ps.getRevision ( ) . get ( ) ) ; }
protected void removeCookie ( final java.lang.String name ) { com.google.gwtjsonrpc.server.JsonServlet.getCurrentCall ( ) . removeCookie ( name ) ; }
, @ com.google.gerrit.acceptance.GerritConfig ( name = "accounts.visibility" , value = "NONE" ) } ) public void suggestReviewersNoResult2 ( ) throws java.lang.Exception { java.lang.String changeId = createChange ( ) . getChangeId ( ) ; java.util.List < com.google.gerrit.extensions.common.SuggestedReviewerInfo > reviewers = suggestReviewers ( changeId , name ( "u" ) , 6 ) ; com.google.common.truth.Truth.assertThat ( reviewers ) . isEmpty ( ) ; }
public java.lang.String toString ( ) { return body.get ( ) ; }
private void loadPatchSets ( ) throws com.google.gwtorm.client.OrmException { detail.setPatchSets ( db.patchSets ( ) . byChange ( changeId ) . toList ( ) ) ; }
public void submit ( com.google.gerrit.extensions.api.changes.SubmitInput in ) throws com.google.gerrit.extensions.restapi.RestApiException { try { submit.apply ( revision , in ) ; } catch ( com.google.gwtorm.server.OrmException | java.io.IOException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot submit change" , e ) ; } }
public static long parseSortKey ( java.lang.String sortKey ) { if ( "z" . equals ( sortKey ) ) { return java.lang.Long.MAX_VALUE ; } return java.lang.Long.parseLong ( sortKey , 16 ) ; }
public static void deleteDraft ( @ com.google.gerrit.common.Nullable java.lang.String project , com.google.gerrit.reviewdb.client.PatchSet.Id id , java.lang.String draftId , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwt.core.client.JavaScriptObject > cb ) { com.google.gerrit.client.changes.CommentApi.revision ( project , id , "drafts" ) . id ( draftId ) . delete ( cb ) ; }
com.google.gerrit.server.change.ReviewerResource create ( com.google.gerrit.server.change.ChangeResource change , com.google.gerrit.reviewdb.client.Account.Id id ) ;
private com.cisco.gerrit.plugins.slack.config.ProjectConfig getConfig ( ) throws java.lang.Exception { return getConfig ( "^WIP.*" , true , true , true , true ) ; }
public void testIndexPredicate ( ) throws java.lang.Exception { com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > in = parse ( "file:a" ) ; org.junit.Assert.assertEquals ( query ( in ) , rewrite ( in ) ) ; }
public void onSuccess ( final java.util.List < com.google.gerrit.client.data.ChangeInfo > result ) { starred.display ( result ) ; table.finishDisplay ( true ) ; }
public void onRpcStart ( final com.google.gwtjsonrpc.client.event.RpcStartEvent event ) { onRpcStart ( ) ; }
private native void panel ( java.lang.String i , com.google.gwt.core.client.JavaScriptObject e , java.lang.String n ) ;
public com.google.gerrit.client.reviewdb.Change.Id getId ( ) { return changeId ; }
static com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > create ( ) { return com.google.gerrit.server.query.Predicate.not ( new com.google.gerrit.server.query.change.IsReviewedPredicate ( com.google.gerrit.server.query.change.IsReviewedPredicate.NOT_REVIEWED ) ) ; }
public void tearDown ( ) throws java.lang.Exception { revWalk.close ( ) ; super . tearDown ( ) ; }
protected void preDisplay ( java.lang.String content ) { initEditor ( content ) ; }
private static void usage ( ) { java.lang.System.err.println ( "Usage:" ) ; java.lang.System.err.println ( " java -jar cafeteria.jar package:predicate" ) ; java.lang.System.err.println ( " java -jar cafeteria.jar predicate" ) ; java.lang.System.err.println ( " package: package name\n" ) ; java.lang.System.err.println ( " predicate: predicate name (only atom)" ) ; }
java.lang.Runnable toggleReviewed ( ) { return ( ) -> reviewed.setValue ( ( ! ( reviewed.getValue ( ) ) ) , true ) ; }
public synchronized void start ( ) { com.google.gerrit.server.plugins.PluginLoader.log.info ( ( "Loading plugins from " + ( pluginsDir.getAbsolutePath ( ) ) ) ) ; rescan ( false ) ; if ( ( scanner ) != null ) { scanner.start ( ) ; } }
public void checkCustom ( org.bouncycastle.openpgp.PGPPublicKey key , long expectedKeyId , java.util.List < java.lang.String > problems ) { }
public short getMaxAutomergeVote ( ) throws org.eclipse.jgit.errors.ConfigInvalidException { return ( ( short ) ( getConfig ( ) . getInt ( "global" , "maxAutomergeVote" , 2 ) ) ) ; }
public void testCreateLinkForWebUiNullText ( ) { mockUnconnectableStoryboard ( ) ; replayMocks ( ) ; com.googlesource.gerrit.plugins.its.storyboard.StoryboardItsFacade itsFacade = createStoryboardItsFacade ( ) ; java.lang.String actual = itsFacade.createLinkForWebui ( "Test-Url" , null ) ; assertEquals ( "Test-Url" , actual ) ; }
public void deleteNotAllowedWithOnlyPushPermission ( ) throws java.lang.Exception { grant ( project , "refs/*" , Permission.PUSH , false ) ; assertDeleteRef ( org.eclipse.jgit.transport.RemoteRefUpdate.Status.REJECTED_OTHER_REASON ) ; }
public void setUp ( ) throws java.lang.Exception { setUpChanges ( ) ; setUpPermissions ( ) ; }
public void onSuccess ( com.google.gerrit.client.info.ChangeInfo info ) { info.init ( ) ; loadConfigInfo ( info , base ) ; }
protected com.google.gerrit.reviewdb.client.PatchSet updateChangeImpl ( com.google.gerrit.server.git.BatchUpdate.ChangeContext ctx ) throws java.lang.Exception { return null ; }
public org.eclipse.jgit.lib.ObjectId getRevision ( ) { return ( revision ) != null ? revision.copy ( ) : null ; }
public void testWikify_OneParagraph1 ( ) { final com.google.gwtexpui.safehtml.client.SafeHtml o = com.google.gwtexpui.safehtml.client.SafeHtml_WikifyTest.html ( "A\nB" ) ; final com.google.gwtexpui.safehtml.client.SafeHtml n = o.wikify ( ) ; org.junit.Assert.assertNotSame ( o , n ) ; org.junit.Assert.assertEquals ( "<p>A\nB</p>" , n.asString ( ) ) ; }
public void testFormat ( ) { org.junit.Assert.assertEquals ( "0000000f" , com.google.gerrit.server.util.IdGenerator.format ( 15 ) ) ; org.junit.Assert.assertEquals ( "801234ab" , com.google.gerrit.server.util.IdGenerator.format ( - 2146290517 ) ) ; org.junit.Assert.assertEquals ( "deadbeef" , com.google.gerrit.server.util.IdGenerator.format ( - 559038737 ) ) ; }
public void normalize ( final com.google.gerrit.common.data.ApprovalType at , final com.google.gerrit.reviewdb.PatchSetApproval ca ) { applyTypeFloor ( at , ca ) ; applyRightFloor ( at , ca ) ; }
private static java.lang.String fullName ( java.lang.String branch ) { if ( branch.startsWith ( Constants.R_HEADS ) ) { return branch ; } return ( org.eclipse.jgit.lib.Constants.R_HEADS ) + branch ; }
public com.google.gerrit.common.data.LabelType byLabel ( com.google.gerrit.reviewdb.client.PatchSetApproval.LabelId labelId ) { return byLabel ( ) . get ( labelId.get ( ) . toLowerCase ( ) ) ; }
com.google.gerrit.reviewdb.client.Project getProject ( ) { return project ; }
public static java.lang.String toProjectDashboard ( com.google.gerrit.reviewdb.client.Project.NameKey name , java.lang.String id ) { return ( ( ( com.google.gerrit.common.PageLinks.PROJECTS ) + ( name.get ( ) ) ) + ( com.google.gerrit.common.PageLinks.DASHBOARDS ) ) + id ; }
public static com.google.gerrit.lucene.LuceneIndexModule singleVersionWithExplicitVersions ( java.util.Map < java.lang.String , java.lang.Integer > versions , int threads ) { return new com.google.gerrit.lucene.LuceneIndexModule ( versions , threads , false ) ; }
private org.eclipse.jgit.lib.PersonIdent newIdent ( com.google.gerrit.reviewdb.client.Account author , java.util.Date when ) { return new org.eclipse.jgit.lib.PersonIdent ( author.getName ( anonymousCowardName ) , ( ( ( author.getId ( ) . get ( ) ) + "@" ) + ( com.google.gerrit.server.notedb.ChangeNoteUtil.GERRIT_PLACEHOLDER_HOST ) ) , when , serverIdent.getTimeZone ( ) ) ; }
protected java.lang.Object createServiceHandle ( ) throws java.lang.Exception { return new com.google.gerrit.client.changes.ChangeDetailServiceImpl ( ) ; }
private void initAllUsersRepo ( ) throws java.io.IOException { if ( ( allUsersRepo ) == null ) { allUsersRepo = openRepo ( allUsersName , true ) ; } }
private java.lang.String pushTagForExistingCommit ( com.google.gerrit.acceptance.rest.project.PushTagIT.TagType tagType , org.eclipse.jgit.transport.RemoteRefUpdate.Status expectedStatus ) throws java.lang.Exception { return pushTag ( tagType , null , false , expectedStatus ) ; }
private void logDebug ( java.lang.String msg , java.lang.Object ... args ) { if ( com.google.gerrit.server.git.MergeOp.log.isDebugEnabled ( ) ) { com.google.gerrit.server.git.MergeOp.log.debug ( ( ( submissionId ) + msg ) , args ) ; } }
private void logWarn ( java.lang.String msg ) { if ( com.google.gerrit.server.git.MergeOp.log.isWarnEnabled ( ) ) { com.google.gerrit.server.git.MergeOp.log.warn ( ( ( submissionId ) + msg ) ) ; } }
public void stop ( ) { }
public java.util.SortedSet < com.google.gerrit.reviewdb.client.Project.NameKey > list ( ) { com.google.gerrit.server.git.LocalDiskRepositoryManager.ProjectVisitor visitor = new com.google.gerrit.server.git.LocalDiskRepositoryManager.ProjectVisitor ( basePath ) ; scanProjects ( visitor ) ; return java.util.Collections.unmodifiableSortedSet ( visitor.found ) ; }
private static java.util.List < com.googlecode.prolog_cafe.lang.Term > eval ( com.google.gerrit.server.project.SubmitRuleEvaluator evaluator ) throws com.google.gerrit.server.project.RuleEvalException { return evaluator.evaluate ( ) ; }
com.google.gerrit.server.IdentifiedUser getUser ( ) { return ( ( com.google.gerrit.server.IdentifiedUser ) ( getControl ( ) . getUser ( ) ) ) ; }
private void initAllUsersRepo ( ) throws java.io.IOException { if ( ( allUsersRepo ) == null ) { allUsersRepo = openRepo ( allUsersName ) ; } }
public com.google.gerrit.server.events.AccountAttribute asAccountAttribute ( final com.google.gerrit.reviewdb.client.Account account ) { com.google.gerrit.server.events.AccountAttribute who = new com.google.gerrit.server.events.AccountAttribute ( ) ; who.name = account.getFullName ( ) ; who.email = account.getPreferredEmail ( ) ; return who ; }
public void onSuccess ( T value ) { this . result = value ; remaining.remove ( this ) ; this . applyAllSuccess ( ) ; }
private com.google.gerrit.acceptance.GerritServer startImpl ( @ com.google.gerrit.common.Nullable com.google.inject.Module testSysModule , java.lang.String ... additionalArgs ) throws java.lang.Exception { return com.google.gerrit.acceptance.GerritServer.start ( serverDesc , baseConfig , sitePaths.site_path , testSysModule , null , null , additionalArgs ) ; }
public boolean isHidden ( ) { return getProject ( ) . getState ( ) . equals ( com.google.gerrit.extensions.client.ProjectState.HIDDEN ) ; }
public synchronized java.util.Optional < com.google.gerrit.server.account.AccountState > get ( com.google.gerrit.reviewdb.client.Account.Id accountId ) { return java.util.Optional.ofNullable ( byId.get ( accountId ) ) ; }
private boolean isNoteDbEnabled ( ) { return migration.readChanges ( ) ; }
private com.google.gitiles.doc.MarkdownToHtml file ( java.lang.String path ) { return new com.google.gitiles.doc.MarkdownToHtml ( com.google.gitiles.GitilesView.doc ( ) . copyFrom ( view ) . setPathPart ( path ) . build ( ) , config , path ) ; }
com.google.gerrit.server.git.NotesBranchUtil create ( com.google.gerrit.reviewdb.client.Project.NameKey project , org.eclipse.jgit.lib.Repository db , org.eclipse.jgit.lib.ObjectInserter inserter ) ;
public void invalidate ( final com.google.gerrit.client.reviewdb.Project p ) { if ( p != null ) { auto.remove ( p.getNameKey ( ) ) ; } }
private com.google.gerrit.server.notedb.ChangeNotes newNotes ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.Change change ) { return notesFactory.create ( db , change ) ; }
public final native java.lang.String project ( ) ;
private void display ( final com.google.gerrit.client.data.SingleListChangeInfo result ) { table.setAccountInfoCache ( result.getAccounts ( ) ) ; drafts.display ( result.getChanges ( ) ) ; table.finishDisplay ( true ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( project , revision.getParentKey ( ) , revision.getId ( ) ) ) ; }
public void set ( final T value ) { try { oldValue = com.google.gerrit.client.ui.ListenableOldValue.get ( ) ; super . set ( value ) ; } finally { oldValue = null ; } }
boolean visibleForReplication ( ) { return ( ( user ) instanceof com.google.gerrit.server.ReplicationUser ) && ( ( ( com.google.gerrit.server.ReplicationUser ) ( user ) ) . isEverythingVisible ( ) ) ; }
public static void query ( java.lang.String query , java.util.Set < com.google.gerrit.extensions.client.ListChangesOption > options , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.changes.ChangeList > callback ) { com.google.gerrit.client.changes.ChangeList.query ( query , options , callback , 0 , 0 ) ; }
public void init ( final javax.servlet.FilterConfig config ) { }
java.lang.Runnable openCloseAll ( net.codemirror.lib.CodeMirror cm ) { return ( ) -> { com.google.gerrit.client.diff.CommentGroup group = getCommentGroupOnActiveLine ( cm ) ; if ( group != null ) { group.openCloseAll ( ) ; } } ; }
protected void configure ( ) { com.google.gerrit.extensions.registration.DynamicSet.setOf ( binder ( ) , com.google.gerrit.extensions.events.GitReferenceUpdatedListener.class ) ; com.google.gerrit.extensions.registration.DynamicSet.setOf ( binder ( ) , com.google.gerrit.server.git.validators.CommitValidationListener.class ) ; install ( new com.google.gerrit.server.git.GitModule ( ) ) ; }
public java.util.List < com.google.gerrit.server.query.change.ChangeData > byTopicOpen ( java.lang.String topic ) throws com.google.gwtorm.server.OrmException { return query ( com.google.gerrit.server.query.Predicate.and ( new com.google.gerrit.server.query.change.ExactTopicPredicate ( topic ) , com.google.gerrit.server.query.change.ChangeStatusPredicate.open ( ) ) ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { if ( ( event.getCharCode ( ) ) == ( com.google.gwt.event.dom.client.KeyCodes.KEY_ENTER ) ) { doAddNew ( ) ; } }
private static com.google.gerrit.client.ui.LinkMenuItem addLink ( final com.google.gerrit.client.ui.LinkMenuBar m , final java.lang.String text , final java.lang.String historyToken ) { com.google.gerrit.client.ui.LinkMenuItem i = new com.google.gerrit.client.ui.LinkMenuItem ( text , historyToken ) ; m.addItem ( i ) ; return i ; }
public void listBranchesOfNonVisibleProject_NotFound ( ) throws java.lang.Exception { blockRead ( project , "refs/*" ) ; com.google.common.truth.Truth.assertThat ( userSession.get ( ( ( "/projects/" + ( project.get ( ) ) ) + "/branches" ) ) . getStatusCode ( ) ) . isEqualTo ( HttpStatus.SC_NOT_FOUND ) ; }
protected void configureServlets ( ) { rpc ( com.google.gerrit.httpd.rpc.SystemInfoServiceImpl.class ) ; install ( new com.google.gerrit.httpd.rpc.project.ProjectModule ( ) ) ; }
public static com.google.gerrit.server.project.SubmitRuleOptions.Builder defaults ( ) { return com.google.gerrit.server.project.SubmitRuleOptions.builder ( ) . allowClosed ( false ) . skipFilters ( false ) . rule ( null ) ; }
void setText ( final java.lang.String query ) { searchBox.setText ( query ) ; }
public java.util.List < com.google.gerrit.extensions.webui.TopMenu.MenuEntry > apply ( com.google.gerrit.server.config.ConfigResource resource ) { java.util.List < com.google.gerrit.extensions.webui.TopMenu.MenuEntry > entries = new java.util.ArrayList < > ( ) ; for ( com.google.gerrit.extensions.webui.TopMenu extension : extensions ) { entries.addAll ( extension.getEntries ( ) ) ; } return entries ; }
public void setId ( java.lang.String id ) { this . id = com.google.gerrit.common.data.LabelType.checkId ( id ) ; }
public void onSuccess ( com.google.gwt.core.client.JsArray < com.google.gerrit.client.account.ProjectWatchInfo > watchedProjects ) { watchesTab.display ( watchedProjects ) ; display ( ) ; }
protected com.google.gerrit.server.CurrentUser getUser ( ) { return user ; }
public java.lang.String getRefName ( ) { return com.google.gerrit.reviewdb.client.RefNames.fullName ( change.get ( ) . branch ) ; }
private static java.lang.String getUrl ( java.lang.String pluginName , int changeId , java.lang.Integer patchSetIdA , int patchSetIdB , java.lang.String path ) { return ( com.googlesource.gerrit.plugins.xdocs.SideBySideDiffPreviewWebLink.getUrl ( pluginName , changeId , patchSetIdA , patchSetIdB , path ) ) + ",unified" ; }
public void update ( java.lang.Iterable < T > instances ) throws com.google.gwtorm.client.OrmException { for ( T obj : instances ) { upsertOne ( obj , true ) ; } }
private java.util.Map < java.lang.String , org.eclipse.jgit.lib.Ref > filter ( java.util.Map < java.lang.String , org.eclipse.jgit.lib.Ref > refs ) { return filter ( refs , false ) ; }
public com.google.gerrit.extensions.restapi.RestView < com.google.gerrit.server.project.ProjectResource > list ( ) { return list.get ( ) ; }
public static java.lang.String toPatchUnified ( final com.google.gerrit.reviewdb.Patch.Key id ) { return com.google.gerrit.client.Dispatcher.toPatch ( "unified" , null , id ) ; }
private java.lang.String readContentFromJson ( com.google.gerrit.acceptance.RestResponse r ) throws java.lang.Exception { return readContentFromJson ( r , java.lang.String.class ) ; }
protected com.google.gitiles.FakeHttpServletResponse buildText ( java.lang.String path ) throws java.lang.Exception { com.google.gitiles.FakeHttpServletResponse res = buildResponse ( path , "format=text" , javax.servlet.http.HttpServletResponse.SC_OK ) ; com.google.common.truth.Truth.assertThat ( res.getHeader ( com.google.common.net.HttpHeaders.CONTENT_TYPE ) ) . isEqualTo ( "text/plain" ) ; return res ; }
protected static com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > onePredicate ( com.google.gerrit.server.query.change.LabelPredicate.Args args , java.lang.String label , int expVal ) { if ( expVal != 0 ) { return com.google.gerrit.server.query.change.LabelPredicate.equalsLabelPredicate ( args , label , expVal ) ; } return com.google.gerrit.server.query.change.LabelPredicate.noLabelQuery ( args , label ) ; }
public com.google.gerrit.reviewdb.client.Change update ( com.google.gerrit.reviewdb.client.Change c ) { if ( psInfo != null ) { c.setCurrentPatchSet ( psInfo ) ; } com.google.gerrit.server.ChangeUtil.updated ( c ) ; return c ; }
public void run ( ) { c.close ( ) ; db = null ; }
public void testThreeLevelTreeWithAllIndexPredicates ( ) throws java.lang.Exception { com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > in = parse ( "-status:abandoned (status:open OR status:merged)" ) ; org.junit.Assert.assertEquals ( query ( parse ( "status:new OR status:submitted OR status:draft OR status:merged" ) ) , rewrite.rewrite ( in , 0 ) ) ; }
public org.eclipse.jgit.revwalk.RevCommit getCommit ( ) { return commit ; }
public void onSuccess ( com.google.gerrit.client.changes.ChangeInfo info ) { info.init ( ) ; loadConfigInfo ( info , null ) ; }
void onCancel ( com.google.gwt.event.dom.client.ClickEvent e ) { input.setFocus ( false ) ; com.google.gwt.user.client.ui.UIObject.setVisible ( form , false ) ; }
public void remove ( ) { m.remove ( name.value ( ) , commandProvider ) ; }
public com.google.gerrit.server.change.ChangeEdits.Create create ( com.google.gerrit.server.change.ChangeResource parent , com.google.gerrit.extensions.restapi.IdString id ) throws com.google.gerrit.extensions.restapi.RestApiException { return createFactory.create ( id.get ( ) ) ; }
void downloadOptional ( ) { this . required = false ; download ( ) ; }
protected void configure ( ) { bind ( org.eclipse.jgit.lib.Config.class ) . annotatedWith ( com.google.gerrit.server.config.GerritServerConfig.class ) . toInstance ( new org.eclipse.jgit.lib.Config ( ) ) ; bind ( com.google.gerrit.reviewdb.SystemConfig.class ) . toInstance ( systemConfig ) ; bind ( com.google.gerrit.server.config.AuthConfig.class ) ; }
public java.lang.String getCookie ( com.gitblit.models.UserModel model ) { return null ; }
public com.google.gerrit.server.notedb.NoteDbUpdateManager stage ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.Change.Id changeId ) throws com.google.gwtorm.server.OrmException , java.io.IOException { return delegate.stage ( db , changeId ) ; }
public com.google.gerrit.server.account.GroupMembership membershipsOf ( com.google.gerrit.server.IdentifiedUser user ) { return groupMembershipFactory.create ( user ) ; }
void clearLine ( com.google.gerrit.client.diff.DisplaySide side , int line , com.google.gerrit.client.diff.CommentGroup group ) { super . clearLine ( side , line , group ) ; }
public void getCacheWithGerritPrefix ( ) throws java.lang.Exception { com.google.gerrit.acceptance.RestResponse r = adminSession.get ( "/config/server/caches/gerrit-accounts" ) ; com.google.common.truth.Truth.assertThat ( r.getStatusCode ( ) ) . isEqualTo ( HttpStatus.SC_OK ) ; }
public static java.lang.String nameOf ( java.io.File jar ) { return com.google.gerrit.server.plugins.PluginLoader.nameOf ( jar.getName ( ) ) ; }
public void execute ( ) { file.setFocus ( true ) ; }
public com.google.gerrit.server.CurrentUser user ( ) { return getUser ( ) ; }
void listBranches ( com.google.gerrit.client.reviewdb.Project.NameKey projectName , com.google.gwt.user.client.rpc.AsyncCallback < java.util.List < com.google.gerrit.client.reviewdb.Branch > > callback ) ;
public com.google.gerrit.extensions.api.changes.Changes changes ( ) { return changes ; }
public void onPluginLoad ( ) { com.google.gerrit.plugin.client.Plugin.get ( ) . panel ( GerritUiExtensionPoint.CHANGE_SCREEN_BELOW_COMMIT_INFO_BLOCK , new com.googlesource.gerrit.plugins.zuul.client.LabelPanel.Factory ( ) , null ) ; }
public void setUp ( ) { validator = new com.googlesource.gerrit.plugins.uploadvalidator.ContentTypeValidator ( null , new com.googlesource.gerrit.plugins.uploadvalidator.ContentTypeUtil ( com.googlesource.gerrit.plugins.uploadvalidator.TestUtils.PATTERN_CACHE ) , null , null , null ) ; }
void onExpandAllComments ( com.google.gwt.event.logical.shared.ValueChangeEvent < java.lang.Boolean > e ) { prefs.expandAllComments ( e.getValue ( ) ) ; if ( ( view ) != null ) { view.getCommentManager ( ) . setExpandAllComments ( prefs.expandAllComments ( ) ) ; } }
public com.google.gerrit.server.notedb.ChangeNotes notes ( ) throws com.google.gwtorm.server.OrmException { if ( ( notes ) == null ) { notes = notesFactory.create ( db , change ( ) ) ; } return notes ; }
public com.google.gerrit.server.patch.PatchList get ( com.google.gerrit.client.reviewdb.Change change , com.google.gerrit.client.reviewdb.PatchSet patchSet ) ;
public void onSuccess ( final com.google.gerrit.client.account.AgreementInfo result ) { agreements.display ( result ) ; }
public static org.commonmark.node.Node parse ( java.lang.String md ) { return com.google.gitiles.doc.GitilesMarkdown.PARSER.parse ( md ) ; }
public com.google.gerrit.common.data.ReviewerResult call ( ) throws java.lang.Exception { com.google.gerrit.common.data.ReviewerResult result = removeReviewerFactory.create ( changeId , java.util.Collections.singleton ( reviewerId ) ) . call ( ) ; result.setChange ( changeDetailFactory.create ( changeId ) . call ( ) ) ; return result ; }
protected void onLoad ( ) { super . onLoad ( ) ; display ( ) ; refresh ( false ) ; }
public void evict ( final com.google.gerrit.client.reviewdb.Account.Id accountId ) { self.remove ( accountId ) ; }
private static java.lang.String format ( final java.lang.String name , final java.lang.String email ) { return new com.google.gerrit.server.mail.Address ( name , email ) . toHeaderString ( ) ; }
public final native void setLine ( int line ) ;
public void setUp ( ) throws java.lang.Exception { repo = new org.eclipse.jgit.junit.TestRepository < org.eclipse.jgit.internal.storage.dfs.DfsRepository > ( new org.eclipse.jgit.internal.storage.dfs.InMemoryRepository ( new org.eclipse.jgit.internal.storage.dfs.DfsRepositoryDescription ( "test" ) ) ) ; servlet = com.google.gitiles.TestGitilesServlet.create ( repo ) ; }
protected void configure ( ) { bind ( com.google.gerrit.server.index.change.IndexRewriter.class ) ; bind ( com.google.gerrit.server.index.change.ChangeIndexCollection.class ) ; listener ( ) . to ( com.google.gerrit.server.index.change.ChangeIndexCollection.class ) ; factory ( ChangeIndexer.Factory.class ) ; }
protected void configure ( ) { factory ( AddReviewer.Factory.class ) ; factory ( CommentDetailFactory.Factory.class ) ; factory ( PatchScriptFactory.Factory.class ) ; factory ( SaveDraft.Factory.class ) ; }
public void throwBadRequestTriggerOnBadQuery ( ) throws java.lang.Exception { easyMock.replayAll ( ) ; setUpClient ( ) ; java.lang.String badQuery = "bad query" ; store.queryChangeEvents ( badQuery ) ; easyMock.verifyAll ( ) ; }
public void init ( ) throws java.io.IOException { super . init ( ) ; testRepo = new org.eclipse.jgit.junit.TestRepository ( repo ) ; validator = new com.googlesource.gerrit.plugins.uploadvalidator.DuplicatePathnameValidator ( null , null , null , null ) ; validator.setLocale ( java.util.Locale.ENGLISH ) ; }
protected static boolean isNoSuchGroup ( final java.lang.Throwable caught ) { return ( caught instanceof com.google.gwtjsonrpc.client.RemoteJsonException ) && ( caught.getMessage ( ) . startsWith ( NoSuchGroupException.MESSAGE ) ) ; }
public void noHeadText ( ) throws java.lang.Exception { setUpSimpleRefs ( ) ; com.google.gitiles.FakeHttpServletResponse res = buildText ( "/repo/+refs/HEAD" ) ; com.google.common.truth.Truth.assertThat ( res.getActualBodyString ( ) ) . isEqualTo ( "" ) ; }
public boolean isVisible ( com.google.gerrit.reviewdb.server.ReviewDb db ) throws com.google.gwtorm.server.OrmException { if ( ( ( change.getStatus ( ) ) == ( Change.Status.DRAFT ) ) && ( ! ( isDraftVisible ( db , null ) ) ) ) { return false ; } return isRefVisible ( ) ; }
public void onDraftPublished ( com.google.gerrit.extensions.events.DraftPublishedListener.Event event ) { com.google.gerrit.extensions.common.ChangeInfo c = event.getChange ( ) ; onEvent ( new com.google.gerrit.reviewdb.client.Project.NameKey ( c.project ) , c._number , event.getWho ( ) ) ; }
public static com.jcraft.jsch.KeyPair genSshKey ( ) throws com.jcraft.jsch.JSchException { com.jcraft.jsch.JSch jsch = new com.jcraft.jsch.JSch ( ) ; return com.jcraft.jsch.KeyPair.genKeyPair ( jsch , KeyPair.RSA ) ; }
public com.google.gerrit.reviewdb.client.Change update ( com.google.gerrit.reviewdb.client.Change change ) { change.nextPatchSetId ( ) ; return change ; }
public java.util.Set < com.google.gerrit.reviewdb.client.Account.Id > getCcOnly ( ) { final java.util.Set < com.google.gerrit.reviewdb.client.Account.Id > cc = new java.util.HashSet ( this . cc ) ; cc.removeAll ( reviewers ) ; return java.util.Collections.unmodifiableSet ( cc ) ; }
private java.util.List < com.google.gerrit.extensions.api.projects.DashboardInfo > dashboards ( ) throws java.lang.Exception { return project ( ) . dashboards ( ) . get ( ) ; }
public void shouldIndexInRemoteOnChangeIndexedEvent ( ) throws java.lang.Exception { org.easymock.EasyMock.expect ( restClientMock.index ( com.ericsson.gerrit.plugins.syncindex.IndexEventHandlerTest.CHANGE_ID ) ) . andReturn ( true ) ; replayAll ( ) ; indexEventHandler.onChangeIndexed ( id.get ( ) ) ; verifyAll ( ) ; }
public void listOneGroupMember ( ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( GET_ONE ( "/groups/Administrators/members/admin" ) . name ) . isEqualTo ( admin.fullName ) ; }
public java.lang.String getUrl ( java.lang.String project ) { return "repo download " + project ; }
public java.util.Map < java.lang.String , com.google.gerrit.common.data.LabelType > getLabelSections ( ) { return labelSections ; }
protected final void logWarn ( java.lang.String msg , java.lang.Throwable t ) { if ( com.google.gerrit.server.git.strategy.SubmitStrategyOp.log.isWarnEnabled ( ) ) { com.google.gerrit.server.git.strategy.SubmitStrategyOp.log.warn ( ( ( args.submissionId ) + msg ) , t ) ; } }
public java.lang.String usage ( ) { return usage ; }
private com.google.reviewit.app.Gerrit getGerrit ( ) { if ( ( gerrit ) == null ) { gerrit = new com.google.reviewit.app.Gerrit ( this , getConfigManager ( ) ) ; } return gerrit ; }
private static void checkLimit ( int limit , java.lang.String name ) { com.google.common.base.Preconditions.checkArgument ( ( limit > 0 ) , "%s must be positive: %s" , name , limit ) ; }
public Project.NameKey getProjectNameKey ( ) { return new com.google.gerrit.reviewdb.client.Project.NameKey ( refUpdate.get ( ) . project ) ; }
private static boolean isAllowed ( com.google.gerrit.gpg.CheckResult result , java.util.Collection < org.eclipse.jgit.transport.ReceiveCommand > commands ) { if ( com.google.gerrit.gpg.SignedPushPreReceiveHook.onlyMagicBranches ( commands ) ) { return result.isOk ( ) ; } return result.isTrusted ( ) ; }
public static void createGroup ( java.lang.String groupName , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.groups.GroupInfo > cb ) { com.google.gwt.core.client.JavaScriptObject in = com.google.gwt.core.client.JavaScriptObject.createObject ( ) ; new com.google.gerrit.client.rpc.RestApi ( "/groups/" ) . id ( groupName ) . ifNoneMatch ( ) . put ( in , cb ) ; }
public com.google.gerrit.server.project.RefControl create ( final com.google.gerrit.server.project.ProjectControl projectControl , final java.lang.String ref ) { return new com.google.gerrit.server.project.RefControl ( projectControl , ref ) ; }
protected void onLoad ( ) { super . onLoad ( ) ; Util.ACCOUNT_SVC.myAgreements ( new com.google.gerrit.client.rpc.GerritCallback < com.google.gerrit.client.account.AgreementInfo > ( ) { public void onSuccess ( final com.google.gerrit.client.account.AgreementInfo result ) { agreements.display ( result ) ; } } ) ; }
private static com.google.gerrit.client.rpc.RestApi call ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , java.lang.String action ) { return com.google.gerrit.client.changes.ChangeApi.change ( project , id ) . view ( action ) ; }
com.google.gerrit.lucene.LuceneChangeIndex getIndex ( com.google.gerrit.lucene.LuceneChangeIndex.Factory factory ) { com.google.gerrit.server.index.Schema < com.google.gerrit.server.query.change.ChangeData > schema = ( ( singleVersion ) != null ) ? com.google.gerrit.server.index.ChangeSchemas.get ( singleVersion ) : com.google.gerrit.server.index.ChangeSchemas.getLatest ( ) ; return factory.create ( schema , base ) ; }
private void setStyleName ( final int row , final int col , final java.lang.String name ) { table.getFlexCellFormatter ( ) . setStyleName ( row , col , name ) ; }
public com.google.gerrit.extensions.restapi.BinaryResult patch ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return getPatch.apply ( revision ) ; } catch ( java.io.IOException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot get patch" , e ) ; } }
private void assertGone ( javax.servlet.http.HttpServletRequest req ) throws java.lang.Exception { com.google.gitiles.FakeHttpServletResponse res = new com.google.gitiles.FakeHttpServletResponse ( ) ; servlet.service ( req , res ) ; com.google.common.truth.Truth.assertThat ( res.getStatus ( ) ) . isEqualTo ( javax.servlet.http.HttpServletResponse.SC_GONE ) ; }
public void onSuccess ( com.google.gwtjsonrpc.client.VoidResult result ) { com.google.gerrit.client.Gerrit.setAccountDiffPreference ( value ) ; setEnabled ( true ) ; }
protected com.google.gerrit.server.change.ChangeInserter newChange ( org.eclipse.jgit.junit.TestRepository < com.google.gerrit.testutil.InMemoryRepositoryManager.Repo > repo ) throws java.lang.Exception { return newChange ( repo , null , null , null , null ) ; }
public boolean apply ( com.google.gerrit.reviewdb.client.ChangeMessage input ) { return ( input.getAuthor ( ) ) == null ; }
public void printJson ( final java.lang.StringBuilder sb , final java.util.Date o ) { sb.append ( '"' ) ; sb.append ( o ) ; sb.append ( '"' ) ; }
public void setPushCertificate ( java.lang.String cert ) { pushCert = cert ; }
public void testDefaultBehaviour ( ) { org.junit.Assert.assertEquals ( "a/b" , new com.google.gerrit.common.data.GitWebType ( ) . replacePathSeparator ( "a/b" ) ) ; }
void merge ( com.google.gerrit.reviewdb.client.Branch.NameKey branch ) ;
public static com.google.gerrit.client.rpc.RestApi vote ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , int reviewer , java.lang.String vote ) { return com.google.gerrit.client.changes.ChangeApi.reviewer ( project , id , reviewer ) . view ( "votes" ) . id ( vote ) ; }
public void delete ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { deleteDraft.apply ( revision , null ) ; } catch ( com.google.gwtorm.server.OrmException | java.io.IOException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot delete draft ps" , e ) ; } }
public java.lang.String getGerritUrl ( ) { return args.urlProvider.get ( ) ; }
private GitilesView.Builder parseRefsCommand ( java.lang.String repoName , java.lang.String path ) { return com.google.gitiles.GitilesView.refs ( ) . setRepositoryName ( repoName ) . setPathPart ( path ) ; }
private org.eclipse.jgit.errors.ConfigInvalidException parseException ( java.lang.String fmt , java.lang.Object ... args ) { return new org.eclipse.jgit.errors.ConfigInvalidException ( ( ( ( "Change " + ( changeId ) ) + ": " ) + ( java.lang.String.format ( fmt , args ) ) ) ) ; }
protected com.google.gerrit.extensions.client.Comment.Range toRange ( com.google.gerrit.reviewdb.client.Comment.Range commentRange ) { com.google.gerrit.extensions.client.Comment.Range range = null ; if ( commentRange != null ) { range = new com.google.gerrit.extensions.client.Comment.Range ( ) ; range.startLine = commentRange.startLine ; range.startCharacter = commentRange.startChar ; range.endLine = commentRange.endLine ; range.endCharacter = commentRange.endChar ; } return range ; }
private java.lang.Class < ? > loadClass ( ) throws com.google.gwtorm.server.OrmException { try { return java.lang.Class.forName ( implClassName , false , classLoader ) ; } catch ( java.lang.ClassNotFoundException err ) { throw new com.google.gwtorm.server.OrmException ( "Cannot load generated class" , err ) ; } }
PatchSet.Id getPatchSetIdFromSide ( com.google.gerrit.client.diff.DisplaySide side ) { if ( ( ( side == ( DisplaySide.A ) ) && ( ( base ) != null ) ) && ( ( base.get ( ) ) >= 0 ) ) { return base ; } return revision ; }
public java.lang.String apply ( com.google.gerrit.server.git.CodeReviewCommit in ) { return in.change ( ) . getKey ( ) . abbreviate ( ) ; }
private void warn ( java.lang.Throwable t ) { com.google.gerrit.server.change.ConsistencyChecker.log.warn ( ( "Error in consistency check of change " + ( change.getId ( ) ) ) , t ) ; }
private void saveProjectConfig ( com.google.gerrit.server.git.ProjectConfig cfg ) throws java.lang.Exception { com.google.gerrit.server.git.MetaDataUpdate md = metaDataUpdateFactory.create ( project ) ; try { cfg.commit ( md ) ; } finally { md.close ( ) ; } }
public java.lang.String getHeader ( java.lang.String name ) { java.lang.String headerValue = headers.get ( name ) ; if ( headerValue != null ) { return headerValue ; } return super . getHeader ( name ) ; }
protected com.google.gerrit.server.change.ChangeInserter newChange ( org.eclipse.jgit.junit.TestRepository < com.google.gerrit.testutil.InMemoryRepositoryManager.Repo > repo ) throws java.lang.Exception { return newChange ( repo , null , null , null , null ) ; }
public static void ensureAllPatchSetsLoaded ( java.lang.Iterable < com.google.gerrit.server.query.change.ChangeData > changes ) throws com.google.gwtorm.server.OrmException { for ( com.google.gerrit.server.query.change.ChangeData cd : changes ) { cd.patches ( ) ; } }
private boolean canSkipValidation ( com.google.gerrit.server.config.PluginConfig config , java.lang.String validatorOp ) { return matchCriteria ( config , "skipValidation" , validatorOp , false , false ) ; }
protected void onOpenItem ( final com.google.gerrit.client.data.ChangeInfo c ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.client.Link.toChange ( c ) , new com.google.gerrit.client.changes.ChangeScreen ( c ) ) ; }
public boolean match ( final com.google.gerrit.server.query.change.ChangeData object ) throws com.google.gwtorm.server.OrmException { com.google.gerrit.reviewdb.client.Change change = object.change ( dbProvider ) ; return ( change != null ) && ( ( change.getLastUpdatedOn ( ) . getTime ( ) ) <= ( cut ) ) ; }
public void onFailure ( java.lang.Throwable caught ) { enableForm ( ) ; super . onFailure ( caught ) ; }
public static void testMerge ( com.google.gerrit.server.git.MergeOp.Factory opFactory , com.google.gerrit.reviewdb.client.Change change ) { opFactory.create ( change.getDest ( ) ) . verifyMergeability ( change ) ; }
public boolean isConnectivityRequested ( java.lang.String url ) { return ui.yesno ( false , "Test connectivity to %s" , url ) ; }
public java.lang.Iterable < com.google.gerrit.sshd.SshKeyCacheEntry > missing ( java.lang.String username ) { return java.util.Collections.emptyList ( ) ; }
private static java.lang.StringBuilder addFooter ( java.lang.StringBuilder sb , org.eclipse.jgit.revwalk.FooterKey footer ) { return sb.append ( footer.getName ( ) ) . append ( ": " ) ; }
public void basePathWhenNotConfigured ( ) { com.google.common.truth.Truth.assertThat ( repoCfg.getBasePath ( new com.google.gerrit.reviewdb.client.Project.NameKey ( "someProject" ) ) ) . isNull ( ) ; }
public static com.google.gerrit.client.rpc.RestApi reviewers ( @ com.google.gerrit.common.Nullable java.lang.String project , int id ) { return com.google.gerrit.client.changes.ChangeApi.change ( project , id ) . view ( "reviewers" ) ; }
private com.cisco.gerrit.plugins.slack.config.ProjectConfig getConfig ( boolean publishOnPatchSetCreated , boolean ignoreUnchangedPatchSet ) throws java.lang.Exception { return getConfig ( "^WIP.*" , publishOnPatchSetCreated , ignoreUnchangedPatchSet , true , true ) ; }
public void initFs ( ) throws java.io.IOException { uuid.initFs ( ) ; head.initFs ( ) ; tail.initFs ( ( ( long ) ( 1 ) ) ) ; }
private void display ( final com.google.gerrit.client.projects.ProjectMap result ) { projects.display ( result ) ; projects.finishDisplay ( ) ; }
public java.lang.String toString ( ) { return toHeaderString ( ) ; }
public void setProject ( final java.lang.String pattern ) { project = pattern ; }
public void onActivityCreated ( android.os.Bundle savedInstanceState ) { super . onActivityCreated ( savedInstanceState ) ; com.google.reviewit.app.Change change = getApp ( ) . getCurrentChange ( ) ; setTitle ( getString ( R.string.abandon_change_title , change.info._number ) ) ; init ( change ) ; }
private com.google.gerrit.reviewdb.client.Change getChange ( com.google.gerrit.acceptance.GitUtil.Commit c ) throws com.google.gwtorm.server.OrmException { return com.google.common.collect.Iterables.getOnlyElement ( db.changes ( ) . byKey ( new com.google.gerrit.reviewdb.client.Change.Key ( c.getChangeId ( ) ) ) ) ; }
static com.google.gerrit.server.project.SectionMatcher wrap ( com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.common.data.AccessSection section ) { java.lang.String ref = section.getName ( ) ; if ( com.google.gerrit.common.data.AccessSection.isValid ( ref ) ) { return com.google.gerrit.server.project.SectionMatcher.wrap ( project , ref , section ) ; } else { return null ; } }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > apply ( java.util.List < ? > input ) { mpm.end ( ) ; return com.google.common.util.concurrent.Futures.immediateFuture ( null ) ; }
public void run ( ) { closedIndex.close ( ) ; }
public void onKeyPress ( final com.google.gwt.event.dom.client.KeyPressEvent event ) { if ( ( event.getCharCode ( ) ) == ( com.google.gwt.event.dom.client.KeyCodes.KEY_ENTER ) ) { doSearch ( ) ; } }
public void replace ( com.google.gerrit.server.query.change.ChangeData cd ) throws java.io.IOException { }
void maybeRegisterRenderEntireFileKeyMap ( net.codemirror.lib.CodeMirror cm ) { if ( renderEntireFile ( ) ) { cm.addKeyMap ( com.google.gerrit.client.diff.DiffScreen.RENDER_ENTIRE_FILE_KEYMAP ) ; } }
public void shouldThrowAnExceptionIfAnErrorOccurCreatingSharedDirectory ( ) throws java.lang.Exception { java.io.File configuredDirectory = tempFolder.newFile ( ) ; org.mockito.Mockito.when ( configMock.main ( ) . sharedDirectory ( ) ) . thenReturn ( configuredDirectory.getAbsolutePath ( ) ) ; module.getSharedDirectory ( ) ; }
private void setupDefaultOperations ( ) { new org.eclipse.example.calc.internal.operations.Equals ( ) ; new org.eclipse.example.calc.internal.operations.Minus ( ) ; new org.eclipse.example.calc.internal.operations.Plus ( ) ; new org.eclipse.example.calc.internal.operations.Square ( ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { gotoSibling ( ( - 1 ) ) ; }
private static com.google.gerrit.common.data.PermissionRule deny ( com.google.gerrit.common.data.GroupReference group ) { com.google.gerrit.common.data.PermissionRule rule = com.google.gerrit.server.schema.Schema_53.rule ( group ) ; rule.setDeny ( ) ; return rule ; }
public void putApproval ( java.lang.String label , short value ) { approvals.put ( label , value ) ; }
public static void query ( java.lang.String query , java.util.Set < com.google.gerrit.extensions.client.ListChangesOption > options , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.changes.ChangeList > callback ) { com.google.gerrit.client.rpc.RestApi call = com.google.gerrit.client.changes.ChangeList.newQuery ( query ) ; com.google.gerrit.client.changes.ChangeList.addOptions ( call , options ) ; call.get ( callback ) ; }
void submit ( com.google.gerrit.reviewdb.client.PatchSet.Id patchSetId , com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.common.data.ChangeDetail > callback ) ;
public boolean canPublish ( final com.google.gerrit.reviewdb.ReviewDb db ) throws com.google.gwtorm.client.OrmException { return ( isOwner ( ) ) && ( isVisible ( db ) ) ; }
public void run ( ) { cmA.setHeight ( height ) ; cmB.setHeight ( height ) ; cmA.refresh ( ) ; cmB.refresh ( ) ; }
protected Project.NameKey getProjectName ( ) { return getChange ( ) . getProject ( ) ; }
default java.util.Set < com.google.gerrit.server.account.externalids.ExternalId > byEmail ( java.lang.String email ) throws java.io.IOException { return byEmails ( email ) . get ( email ) ; }
public boolean canPerform ( java.lang.String permissionName ) { if ( GlobalCapability.ADMINISTRATE_SERVER.equals ( permissionName ) ) { return canAdministrateServer ( ) ; } return ! ( access ( permissionName ) . isEmpty ( ) ) ; }
com.google.gerrit.extensions.restapi.RestModifyView < P , ? > create ( P parent , com.google.gerrit.extensions.restapi.IdString id ) throws com.google.gerrit.extensions.restapi.RestApiException ;
private com.google.gerrit.server.CurrentUser getUser ( ) { return user ; }
public java.util.List < com.google.gerrit.extensions.api.projects.TagInfo > get ( ) throws com.google.gerrit.extensions.restapi.RestApiException { return listTags ( this ) ; }
public boolean match ( com.google.gerrit.server.query.change.ChangeData cd ) throws com.google.gwtorm.server.OrmException { com.google.gerrit.reviewdb.client.Change change = cd.change ( ) ; return ( change != null ) && ( ( change.getSortKey ( ) . compareTo ( getValue ( ) ) ) < 0 ) ; }
protected static boolean isInvalidXSRF ( final java.lang.Throwable caught ) { return ( caught instanceof com.google.gwt.user.client.rpc.InvocationException ) && ( caught.getMessage ( ) . equals ( JsonConstants.ERROR_INVALID_XSRF ) ) ; }
public com.google.gerrit.pgm.init.api.AllProjectsConfig load ( ) throws java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { super . load ( ) ; return this ; }
private static java.lang.StackTraceElement [ ] getTrace ( com.google.gwt.core.client.JavaScriptException err ) { if ( ( err.getStackTrace ( ) . length ) == 0 ) { err.fillInStackTrace ( ) ; } return err.getStackTrace ( ) ; }
public com.google.common.util.concurrent.CheckedFuture < ? , java.io.IOException > deleteAsync ( com.google.gerrit.reviewdb.client.Change.Id id ) { return submit ( new com.google.gerrit.server.index.change.ChangeIndexer.DeleteTask ( id ) ) ; }
protected void approve ( java.lang.String id ) throws java.lang.Exception { gApi.changes ( ) . id ( id ) . revision ( "current" ) . review ( com.google.gerrit.extensions.api.changes.ReviewInput.approve ( ) ) ; }
public static java.lang.String toPatchSideBySide ( final com.google.gerrit.client.reviewdb.Patch.Key id ) { return com.google.gerrit.client.Link.toPatch ( "sidebyside" , id ) ; }
public void setPatchSetId ( com.google.gerrit.reviewdb.client.PatchSet.Id psId ) { com.google.common.base.Preconditions.checkArgument ( ( ( psId == null ) || ( psId.getParentKey ( ) . equals ( getChange ( ) . getId ( ) ) ) ) ) ; this . psId = psId ; }
public void run ( ) { openIndex.close ( ) ; }
protected java.io.PrintWriter startRenderText ( javax.servlet.http.HttpServletRequest req , javax.servlet.http.HttpServletResponse res ) throws java.io.IOException { setApiHeaders ( res , com.google.gitiles.FormatType.TEXT ) ; return res.getWriter ( ) ; }
public java.util.List < com.google.gerrit.server.git.validators.CommitValidationMessage > onCommitReceived ( com.google.gerrit.server.events.CommitReceivedEvent receiveEvent ) throws com.google.gerrit.server.git.validators.CommitValidationException { throw new com.google.gerrit.server.git.validators.CommitValidationException ( message ) ; }
public void onSuccess ( com.google.gerrit.common.data.ChangeDetail info ) { com.google.gerrit.client.changes.ChangeDetailCache.setChangeDetail ( info ) ; }
public boolean isOwnerAnyRef ( ) { return ( canPerformOnAnyRef ( Permission.OWNER ) ) || ( user.getCapabilities ( ) . canAdministrateServer ( ) ) ; }
com.google.gerrit.server.project.ChangeControl create ( com.google.gerrit.server.project.RefControl refControl , com.google.gerrit.reviewdb.client.Change change ) throws com.google.gwtorm.server.OrmException { return create ( refControl , notesFactory.create ( db , change ) ) ; }
boolean contains ( int idx ) ;
public void onFailure ( java.lang.Throwable caught ) { loadSubmitType ( status , canSubmit ) ; }
public com.google.gerrit.reviewdb.client.Change change ( ) throws com.google.gwtorm.server.OrmException { if ( ( change ) == null ) { change = db.changes ( ) . get ( legacyId ) ; } return change ; }
public void onSuccess ( final com.google.gerrit.common.data.HostPageData result ) { com.google.gerrit.client.Gerrit.myConfig = result.config ; if ( ( result.account ) != null ) { com.google.gerrit.client.Gerrit.myAccount = result.account ; com.google.gerrit.client.Gerrit.applyUserPreferences ( ) ; } onModuleLoad2 ( ) ; }
public void setJarUrl ( final java.lang.String url ) { this . jarUrl = url ; }
com.google.gerrit.server.query.change.ChangeData convert ( com.google.gerrit.reviewdb.client.PatchSet t ) { return factory.create ( db.get ( ) , t.getId ( ) . getParentKey ( ) ) ; }
public final void panel ( com.google.gerrit.client.GerritUiExtensionPoint extensionPoint , com.google.gerrit.plugin.client.extension.Panel.EntryPoint entry , java.lang.String name ) { panel ( extensionPoint.name ( ) , com.google.gerrit.plugin.client.Plugin.wrap ( entry ) , name ) ; }
com.google.gerrit.gpg.GerritPushCertificateChecker create ( com.google.gerrit.server.IdentifiedUser expectedUser ) ;
protected void onUnload ( ) { super . onUnload ( ) ; if ( ( headerClick ) != null ) { headerClick.removeHandler ( ) ; headerClick = null ; } }
public static com.google.gerrit.server.account.externalids.ExternalId create ( com.google.gerrit.server.account.externalids.ExternalId.Key key , com.google.gerrit.reviewdb.client.Account.Id accountId , @ com.google.gerrit.common.Nullable java.lang.String email , @ com.google.gerrit.common.Nullable java.lang.String hashedPassword , @ com.google.gerrit.common.Nullable org.eclipse.jgit.lib.ObjectId blobId ) { return new com.google.gerrit.server.account.externalids.AutoValue_ExternalId ( key , accountId , com.google.common.base.Strings.emptyToNull ( email ) , com.google.common.base.Strings.emptyToNull ( hashedPassword ) , blobId ) ; }
private java.util.List < com.google.gerrit.server.patch.PatchListEntry > getCurrentPatches ( java.lang.String changeId ) throws com.google.gerrit.extensions.restapi.RestApiException , com.google.gerrit.server.patch.PatchListNotAvailableException { return patchListCache.get ( getKey ( null , getCurrentRevisionId ( changeId ) ) , project ) . getPatches ( ) ; }
private static javax.net.ssl.SSLSocketFactory sslFactory ( final boolean verify ) { if ( verify ) { return ( ( javax.net.ssl.SSLSocketFactory ) ( javax.net.ssl.SSLSocketFactory.getDefault ( ) ) ) ; } return ( ( javax.net.ssl.SSLSocketFactory ) ( com.google.gerrit.util.ssl.BlindSSLSocketFactory.getDefault ( ) ) ) ; }
protected final com.google.gerrit.server.mail.ProjectWatch.Watchers getWatchers ( com.google.gerrit.reviewdb.client.AccountProjectWatch.NotifyType type ) throws com.google.gwtorm.server.OrmException { com.google.gerrit.server.mail.ProjectWatch watch = new com.google.gerrit.server.mail.ProjectWatch ( args , branch.getParentKey ( ) , projectState , changeData ) ; return watch.getWatchers ( type ) ; }
private void assertCanSubmit ( java.lang.String ref , com.google.gerrit.server.project.ProjectControl u ) { com.google.common.truth.Truth.assertThat ( u.controlForRef ( ref ) . canSubmit ( false ) ) . named ( ( "can submit " + ref ) ) . isTrue ( ) ; }
public static net.codemirror.lib.LineCharacter create ( int line , int ch ) { net.codemirror.lib.LineCharacter lineCh = createObject ( ) . cast ( ) ; lineCh.setLine ( line ) ; lineCh.setCh ( ch ) ; return lineCh ; }
void select ( com.google.gerrit.client.change.ReplyBox.LabelRadioButton b ) { selected = b ; labelsTable.setText ( row , labelHelpColumn , b.text ) ; }
public void setFocus ( boolean focused ) { if ( ( focusy ) != null ) { focusy.setFocus ( focused ) ; } }
void registerKeys ( boolean on ) { register = on ; if ( ( table ) != null ) { table.setRegisterKeys ( on ) ; } }
public com.google.gerrit.server.query.Predicate < T > copy ( final java.util.Collection < ? extends com.google.gerrit.server.query.Predicate < T > > children ) { return new com.google.gerrit.server.query.AndPredicate ( children ) ; }
public static org.eclipse.jgit.lib.PersonIdent newIdent ( com.google.gerrit.reviewdb.client.Account author , java.util.Date when , org.eclipse.jgit.lib.PersonIdent serverIdent , java.lang.String anonymousCowardName ) { return new org.eclipse.jgit.lib.PersonIdent ( author.getName ( anonymousCowardName ) , ( ( ( author.getId ( ) . get ( ) ) + "@" ) + ( com.google.gerrit.server.notedb.ChangeNoteUtil.GERRIT_PLACEHOLDER_HOST ) ) , when , serverIdent.getTimeZone ( ) ) ; }
void replace ( org.apache.lucene.index.Term term , org.apache.lucene.document.Document doc ) throws java.io.IOException { writer.updateDocument ( term , doc ) ; }
protected com.google.gerrit.server.notedb.AbstractChangeNotes.LoadHandle openHandle ( org.eclipse.jgit.lib.Repository repo ) throws java.io.IOException { return openHandle ( repo , readRef ( repo ) ) ; }
public java.lang.String id ( ) { return java.lang.Integer.toString ( change.getId ( ) . get ( ) ) ; }
private void logWarn ( java.lang.String msg ) { if ( com.google.gerrit.server.git.MergeOp.log.isWarnEnabled ( ) ) { com.google.gerrit.server.git.MergeOp.log.warn ( ( ( submissionId ) + msg ) ) ; } }
private void assertBadRequest ( com.google.gerrit.extensions.api.projects.ProjectApi.ListRefsRequest < com.google.gerrit.extensions.api.projects.TagInfo > req ) throws java.lang.Exception { try { req.get ( ) ; fail ( "Expected BadRequestException" ) ; } catch ( com.google.gerrit.extensions.restapi.BadRequestException e ) { } }
public void noVerificationTest ( ) throws java.lang.Exception { com.google.gerrit.acceptance.PushOneCommit.Result c = createChange ( ) ; java.util.Map < java.lang.String , com.googlesource.gerrit.plugins.verifystatus.common.VerificationInfo > infos = getVerifications ( c , null ) ; com.google.common.truth.Truth.assertThat ( infos ) . hasSize ( 0 ) ; }
private static void asScript ( final org.w3c.dom.Element scriptNode ) { scriptNode.removeAttribute ( "id" ) ; scriptNode.setAttribute ( "type" , "text/javascript" ) ; scriptNode.setAttribute ( "language" , "javascript" ) ; }
private void setNew ( com.google.gerrit.reviewdb.Change c , com.google.gerrit.reviewdb.ChangeMessage msg ) { sendMergeFail ( c , msg , true , true ) ; }
public void configure ( ) { install ( dbInjector.getInstance ( com.google.gerrit.pgm.util.BatchProgramModule.class ) ) ; install ( new com.google.gerrit.pgm.util.BatchGitModule ( ) ) ; install ( new com.google.gerrit.server.notedb.NoteDbModule ( ) ) ; }
static com.google.gerrit.server.patch.PatchListEntry empty ( final java.lang.String fileName ) { return new com.google.gerrit.server.patch.PatchListEntry ( com.google.gerrit.reviewdb.client.Patch.ChangeType.MODIFIED , com.google.gerrit.reviewdb.client.Patch.PatchType.UNIFIED , null , fileName , com.google.gerrit.server.patch.PatchListEntry.EMPTY_HEADER , java.util.Collections.< org.eclipse.jgit.diff.Edit > emptyList ( ) , 0 , 0 , 0 , 0 ) ; }
private java.lang.String createMyChange ( ) throws java.io.IOException , org.eclipse.jgit.api.errors.GitAPIException { com.google.gerrit.acceptance.PushOneCommit push = pushFactory.create ( db , user.getIdent ( ) , git ) ; return push.to ( "refs/for/master" ) . getChangeId ( ) ; }
private void onPatchSetCreated ( final com.google.gerrit.server.events.PatchSetCreatedEvent event ) { com.google.gerrit.server.data.ChangeAttribute change = event.change.get ( ) ; if ( atomicityHelper.isAtomicReview ( change ) ) { processNewAtomicPatchSet ( change ) ; } }
private static java.lang.String getPrefixedName ( java.lang.String prefix , java.lang.String name ) { return prefix + name ; }
public org.eclipse.jgit.lib.Config getProjectPluginConfigWithInheritance ( com.google.gerrit.server.project.ProjectState projectState , java.lang.String pluginName ) { return projectState.getConfig ( ( pluginName + ( com.google.gerrit.server.config.PluginConfigFactory.EXTENSION ) ) ) . getWithInheritance ( false ) ; }
boolean isVisible ( ) { if ( ( isVisible ) == null ) { isVisible = ( getUser ( ) . isInternalUser ( ) ) || ( canPerform ( Permission.READ ) ) ; } return isVisible ; }
public com.google.gerrit.reviewdb.client.Change getChange ( ) { return getChangeResource ( ) . getChange ( ) ; }
protected PushOneCommit.Result createChange ( ) throws java.io.IOException , org.eclipse.jgit.api.errors.GitAPIException { com.google.gerrit.acceptance.PushOneCommit push = pushFactory.create ( db , admin.getIdent ( ) , git ) ; return push.to ( "refs/for/master" ) ; }
public void listBranchesOfEmptyProject ( ) throws java.lang.Exception { com.google.gerrit.acceptance.rest.project.BranchAssert.assertBranches ( com.google.common.collect.ImmutableList.of ( com.google.gerrit.acceptance.rest.project.ListBranchesIT.branch ( "refs/meta/config" , null , false ) ) , list ( ) . get ( ) ) ; }
public void onFailure ( java.lang.Throwable caught ) { save.setEnabled ( true ) ; registerNewEmail.setEnabled ( true ) ; super . onFailure ( caught ) ; }
private java.lang.String nullToEmpty ( @ javax.annotation.Nullable java.lang.String str ) { return str == null ? "" : str ; }
protected org.eclipse.jgit.junit.TestRepository < ? > createProjectWithPush ( java.lang.String name , @ com.google.gerrit.common.Nullable com.google.gerrit.reviewdb.client.Project.NameKey parent ) throws java.lang.Exception { return createProjectWithPush ( name , parent , true , getSubmitType ( ) ) ; }
public com.google.gerrit.reviewdb.client.CurrentSchemaVersion getSchemaVersion ( ) throws com.google.gwtorm.server.OrmException { try ( com.google.gerrit.reviewdb.server.ReviewDb c = open ( ) ) { return c.schemaVersion ( ) . get ( new com.google.gerrit.reviewdb.client.CurrentSchemaVersion.Key ( ) ) ; } }
protected void onLoad ( ) { enableForm ( false , false , false ) ; saveProject.setEnabled ( false ) ; super . onLoad ( ) ; refresh ( ) ; }
com.google.gerrit.lucene.LuceneChangeIndex create ( com.google.gerrit.server.index.Schema < com.google.gerrit.server.query.change.ChangeData > schema ) ;
public static java.lang.String toProjectAdmin ( final com.google.gerrit.client.reviewdb.Project.NameKey n , final java.lang.String tab ) { return ( ( "admin,project," + ( n.toString ( ) ) ) + "," ) + tab ; }
public com.google.gerrit.client.data.GerritConfig get ( ) { return create ( ) ; }
com.google.gerrit.client.reviewdb.Branch get ( com.google.gerrit.client.reviewdb.Branch.Id id ) throws com.google.gwtorm.client.OrmException ;
private java.lang.String newChange ( org.eclipse.jgit.api.Git git , org.eclipse.jgit.lib.PersonIdent ident ) throws java.lang.Exception { com.google.gerrit.acceptance.PushOneCommit push = pushFactory.create ( db , ident , git , PushOneCommit.SUBJECT , com.google.gerrit.acceptance.edit.ChangeEditIT.FILE_NAME , new java.lang.String ( com.google.gerrit.acceptance.edit.ChangeEditIT.CONTENT_OLD ) ) ; return push.to ( "refs/for/master" ) . getChangeId ( ) ; }
com.google.gerrit.server.change.ChangeEdits.Create create ( java.lang.String path ) ;
protected java.lang.Object createServiceHandle ( ) throws java.lang.Exception { return new com.google.gerrit.server.AccountSecurityImpl ( server ) ; }
private static java.util.List < com.google.gwtorm.schema.ColumnModel > sortColumns ( java.util.Collection < com.google.gwtorm.schema.ColumnModel > cols ) { java.util.ArrayList < com.google.gwtorm.schema.ColumnModel > list = new java.util.ArrayList ( cols ) ; java.util.Collections.sort ( list , com.google.gwtorm.schema.java.ProtoFileGenerator.COLUMN_COMPARATOR ) ; return list ; }
private static com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > commit ( java.lang.String id ) { return new com.google.gerrit.server.query.change.ExactCommitPredicate ( id ) ; }
public void testMultiple ( ) { com.google.common.truth.Truth.assertThat ( serverConfig.getString ( "x" , null , "y" ) ) . isEqualTo ( "z" ) ; com.google.common.truth.Truth.assertThat ( serverConfig.getString ( "a" , null , "b" ) ) . isEqualTo ( "c" ) ; }
com.google.gerrit.client.reviewdb.Branch get ( com.google.gerrit.client.reviewdb.Branch.NameKey name ) throws com.google.gwtorm.client.OrmException ;
public void setActive ( boolean active ) { this . active = active ; if ( ( myTable ) != null ) { myTable.setActive ( active ) ; } }
public void sendBytes ( byte [ ] what ) { sendBytes ( what , 0 , what.length ) ; }
protected boolean matches ( com.google.gwtorm.nosql.IndexFunction < T > f , T obj , byte [ ] exp ) { return ( f.includes ( obj ) ) && ( java.util.Arrays.equals ( exp , indexRowKey ( f , obj ) ) ) ; }
com.googlesource.gerrit.plugins.importer.GerritApi create ( java.lang.String url , java.lang.String user , java.lang.String pass ) { if ( url == null ) { return localApi ; } return new com.googlesource.gerrit.plugins.importer.RemoteApi ( url , user , pass ) ; }
public void info ( java.lang.String msg ) { java.lang.System.err.println ( msg ) ; java.lang.System.err.flush ( ) ; }
public void nullCommitMessage ( ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( com.google.gerrit.server.change.HashtagsUtil.extractTags ( ( ( java.lang.String ) ( null ) ) ) ) . isEmpty ( ) ; }
java.util.Set < com.google.gerrit.server.account.externalids.ExternalId > all ( org.eclipse.jgit.lib.ObjectId rev ) throws java.io.IOException { checkReadEnabled ( ) ; try ( org.eclipse.jgit.lib.Repository repo = repoManager.openRepository ( allUsersName ) ) { return all ( repo , rev ) ; } }
public int getTabIndex ( ) { return ( focusy ) != null ? focusy.getTabIndex ( ) : 0 ; }
public void onSuccess ( com.google.gerrit.client.info.ChangeInfo c ) { project.setInnerText ( c.project ( ) ) ; com.google.gwtexpui.safehtml.client.SafeHtml.setInnerHTML ( filePath , com.google.gerrit.client.diff.Header.formatPath ( path ) ) ; }
public boolean isVisibleToAll ( ) { return false ; }
public void parseInvalidPrimaryStorage ( ) { com.google.gerrit.server.notedb.NoteDbChangeState.parse ( new com.google.gerrit.reviewdb.client.Change.Id ( 1 ) , "X" ) ; }
protected java.lang.String getRefName ( ) { return com.google.gerrit.reviewdb.client.RefNames.refsDraftComments ( accountId , ctl.getId ( ) ) ; }
private void loadAccountsSection ( org.eclipse.jgit.lib.Config rc ) { accountsSection = new com.google.gerrit.server.git.AccountsSection ( ) ; accountsSection.setSameGroupVisibility ( loadPermissionRules ( rc , com.google.gerrit.server.git.ProjectConfig.ACCOUNTS , null , com.google.gerrit.server.git.ProjectConfig.KEY_SAME_GROUP_VISIBILITY , groupsByName , false ) ) ; }
private com.cisco.gerrit.plugins.slack.config.ProjectConfig getConfig ( java.lang.String ignore ) throws java.lang.Exception { return getConfig ( ignore , true , true ) ; }
private GitilesView.Builder parseDescribeCommand ( java.lang.String repoName , java.lang.String path ) { if ( com.google.gitiles.ViewFilter.isEmptyOrSlash ( path ) ) { return null ; } return com.google.gitiles.GitilesView.describe ( ) . setRepositoryName ( repoName ) . setPathPart ( path ) ; }
int size ( ) { return ( src ) != null ? src.size ( ) : 0 ; }
public void flush_Forbidden ( ) throws java.lang.Exception { com.google.gerrit.acceptance.RestResponse r = userSession.post ( "/config/server/caches/" , new com.google.gerrit.server.config.PostCaches.Input ( com.google.gerrit.server.config.PostCaches.Operation.FLUSH , java.util.Arrays.asList ( "projects" ) ) ) ; com.google.common.truth.Truth.assertThat ( r.getStatusCode ( ) ) . isEqualTo ( HttpStatus.SC_FORBIDDEN ) ; }
private com.google.gerrit.extensions.common.SubmitType getSubmitType ( com.google.gerrit.server.query.change.ChangeData cd ) throws com.google.gwtorm.server.OrmException { com.google.gerrit.common.data.SubmitTypeRecord r = new com.google.gerrit.server.project.SubmitRuleEvaluator ( cd ) . getSubmitType ( ) ; if ( ( r.status ) != ( SubmitTypeRecord.Status.OK ) ) { return null ; } return r.type ; }
private static void assertExpectedIdsUsed ( java.sql.PreparedStatement ps , int ... ids ) throws java.sql.SQLException { for ( int id : ids ) { org.mockito.Mockito.verify ( ps ) . setInt ( 1 , id ) ; } }
private void fail ( com.google.gerrit.reviewdb.client.Change change , java.lang.Throwable t ) { ok.set ( false ) ; failed.update ( 1 ) ; }
public final native void id ( java.lang.String i ) ;
private void assertNoMembers ( java.lang.String group ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( gApi.groups ( ) . id ( group ) . members ( ) ) . isEmpty ( ) ; }
javax.servlet.http.HttpServlet getPolyGerritUiIndexServlet ( @ com.google.inject.name.Named ( value = com.google.gerrit.httpd.raw.StaticModule.CACHE ) com.google.common.cache.Cache < java.nio.file.Path , com.google.gerrit.httpd.raw.ResourceServlet.Resource > cache ) { return new com.google.gerrit.httpd.raw.SingleFileServlet ( cache , polyGerritBasePath ( ) . resolve ( "index.html" ) , getPaths ( ) . isDev ( ) , false ) ; }
public com.google.gerrit.acceptance.PushOneCommit.Result rm ( java.lang.String ref ) throws org.eclipse.jgit.api.errors.GitAPIException { com.google.gerrit.acceptance.GitUtil.rm ( git , fileName ) ; return execute ( ref ) ; }
public final boolean submittable ( ) { init ( ) ; return _submittable ( ) ; }
private com.google.gerrit.client.change.RelatedChangesTab getTab ( ) { if ( ( relatedChangesTab ) == null ) { relatedChangesTab = createTab ( Resources.C.relatedChanges ( ) , Resources.C.relatedChangesTooltip ( ) , 0 ) ; } return relatedChangesTab ; }
public com.google.gwtjsonrpc.client.VoidResult run ( com.google.gerrit.client.reviewdb.ReviewDb db , com.google.gwtorm.client.Transaction txn , boolean retry ) throws com.google.gwtorm.client.OrmException { return doAddReviewers ( reviewerIds , change.currentPatchSetId ( ) , db , txn ) ; }
protected void configure ( ) { install ( copyConfigModule ) ; install ( db ) ; install ( cm ) ; install ( sm ) ; }
public void onSuccess ( com.google.gerrit.client.changes.ReviewInput result ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( changeId ) ) ; }
protected boolean canPerform ( final com.google.gerrit.client.data.ProjectCache.Entry project , final com.google.gerrit.client.reviewdb.ApprovalCategory.Id actionId , final short val ) { return com.google.gerrit.client.rpc.BaseServiceImplementation.canPerform ( getGroups ( ) , project , actionId , val ) ; }
private static com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > project ( com.google.gerrit.reviewdb.client.Project.NameKey project ) { return new com.google.gerrit.server.query.change.ProjectPredicate ( project.get ( ) ) ; }
public com.google.gerrit.client.admin.PermissionEditor create ( int index ) { com.google.gerrit.client.admin.PermissionEditor subEditor = new com.google.gerrit.client.admin.PermissionEditor ( projectAccess , readOnly , value , projectAccess.getLabelTypes ( ) ) ; permissionContainer.insert ( subEditor , index ) ; return subEditor ; }
java.lang.Runnable toggleA ( ) { return ( ) -> setVisibleA ( ( ! ( isVisibleA ( ) ) ) ) ; }
public void testExclamationMark ( ) { com.google.gerrit.common.data.GitWebType gitWebType = new com.google.gerrit.common.data.GitWebType ( ) ; gitWebType.setPathSeparator ( '!' ) ; org.junit.Assert.assertEquals ( "a!b" , gitWebType.replacePathSeparator ( "a/b" ) ) ; }
public void run ( ) { database.storeEvent ( event ) ; }
public void basicTextFormattingWorks ( ) throws java.io.IOException { java.lang.String raw = "_italic_ *bold* `monospace`" ; java.lang.String formatted = "<em>italic</em> <strong>bold</strong> <code>monospace</code>" ; org.junit.Assert.assertEquals ( 1 , org.apache.commons.lang.StringUtils.countMatches ( formatter.format ( null , null , null , null , cfg , raw ) , formatted ) ) ; }
protected org.eclipse.jgit.lib.ObjectInserter getObjectInserter ( ) throws java.io.IOException { initRepository ( ) ; return inserter ; }
public java.lang.Void call ( ) throws java.lang.Exception { rebuild ( change , changeRepo ) ; return null ; }
public com.google.gerrit.client.ErrorDialog setText ( java.lang.String t ) { text.setText ( t ) ; return this ; }
public void testDefaultBehaviour ( ) { com.google.gerrit.common.data.GitWebType gitWebType = com.google.gerrit.common.data.GitWebType.fromName ( null ) ; org.junit.Assert.assertEquals ( "a/b" , gitWebType.replacePathSeparator ( "a/b" ) ) ; }
protected < R extends com.google.gerrit.extensions.restapi.RestResource > com.google.gerrit.extensions.restapi.RestApiModule.ReadViewBinder < R > get ( com.google.inject.TypeLiteral < com.google.gerrit.extensions.restapi.RestView < R > > viewType ) { return new com.google.gerrit.extensions.restapi.RestApiModule.ReadViewBinder ( view ( viewType , com.google.gerrit.extensions.restapi.RestApiModule.GET , "/" ) ) ; }
public void onValueChange ( com.google.gwt.event.logical.shared.ValueChangeEvent < java.lang.String > event ) { com.google.gerrit.client.Gerrit.display ( event.getValue ( ) ) ; }
java.lang.String getAvatarUrl ( int size ) throws com.google.gerrit.extensions.restapi.RestApiException ;
private static final native void init ( java.lang.String d , java.lang.String e , java.lang.String m , java.lang.String t , java.lang.String r , java.lang.String o ) ;
com.google.gerrit.server.project.ProjectState create ( com.google.gerrit.reviewdb.Project project , java.util.Collection < com.google.gerrit.reviewdb.RefRight > localRights ) ;
void onDeleteChange ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { if ( com.google.gwt.user.client.Window.confirm ( Resources.C.deleteChange ( ) ) ) { com.google.gerrit.client.change.ChangeActions.delete ( project , changeId , deleteChange ) ; } }
, @ com.google.gerrit.acceptance.GerritConfig ( name = "suggest.from" , value = "1" ) , @ com.google.gerrit.acceptance.GerritConfig ( name = "accounts.visibility" , value = "NONE" ) } ) public void suggestReviewersNoResult2 ( ) throws java.lang.Exception { java.lang.String changeId = createChange ( ) . getChangeId ( ) ; java.util.List < com.google.gerrit.server.change.SuggestReviewers.SuggestedReviewerInfo > reviewers = suggestReviewers ( changeId , "u" , 6 ) ; com.google.common.truth.Truth.assertThat ( reviewers ) . isEmpty ( ) ; }
public final native boolean showWhitespaceErrors ( ) ;
private static java.lang.String status ( com.google.gerrit.reviewdb.client.Change.Status status ) { switch ( status ) { case ABANDONED : return "status:abandoned" ; case MERGED : return "status:merged" ; case NEW : default : return "status:open" ; } }
private com.google.gwt.user.client.ui.Panel getButtonPanel ( ) { if ( ( buttons ) == null ) { buttons = new com.google.gwt.user.client.ui.FlowPanel ( ) ; buttons.setStyleName ( Gerrit.RESOURCES.css ( ) . commentPanelButtons ( ) ) ; content.add ( buttons ) ; } return buttons ; }
java.lang.Runnable toggleA ( ) { return ( ) -> { setVisibleA ( ( ! ( isVisibleA ( ) ) ) ) ; } ; }
private static com.google.gerrit.reviewdb.AuthType toType ( final org.eclipse.jgit.lib.Config cfg ) { return com.google.gerrit.server.config.ConfigUtil.getEnum ( cfg , "auth" , null , "type" , AuthType.OPENID ) ; }
public void run ( ) { try { java.nio.file.Files.walkFileTree ( gitDir , new com.googlesource.gerrit.plugins.deleteproject.fs.DeleteTrashFolders.TrashFolderRemover ( ) ) ; } catch ( java.io.IOException e ) { com.googlesource.gerrit.plugins.deleteproject.fs.DeleteTrashFolders.log.warn ( "Exception occured while trying to delete trash folders" , e ) ; } }
void setReviewed ( boolean reviewed ) { checkBox.setValue ( reviewed , true ) ; }
public java.lang.String [ ] aliases ( ) { return new java.lang.String [ 0 ] ; }
protected void configure ( ) { bind ( com.google.gerrit.extensions.api.accounts.Accounts.class ) . to ( com.google.gerrit.server.api.accounts.AccountsImpl.class ) ; factory ( AccountApiImpl.Factory.class ) ; }
void sendError ( int status , java.lang.String message ) throws java.io.IOException { sendError ( status , new com.googlesource.gerrit.plugins.lfs.locks.LfsLocksContext.Error ( message ) ) ; }
protected void preDisplay ( com.google.gerrit.client.projects.ConfigInfoCache.Entry result ) { loaded = true ; commentLinkProcessor = result.getCommentLinkProcessor ( ) ; setTheme ( result.getTheme ( ) ) ; renderChangeInfo ( info ) ; }
private void deleteDraftChange ( com.google.gerrit.reviewdb.client.Change change ) throws com.google.gerrit.extensions.restapi.ResourceNotFoundException , com.google.gwtorm.server.OrmException , java.io.IOException { try { changeUtil.deleteDraftChange ( change ) ; } catch ( com.google.gerrit.server.project.NoSuchChangeException e ) { throw new com.google.gerrit.extensions.restapi.ResourceNotFoundException ( e.getMessage ( ) ) ; } }
public final boolean isOpen ( ) { switch ( getStatus ( ) ) { case NEW : case DRAFT : return true ; default : return false ; } }
public static com.google.gerrit.extensions.common.PathSubject assertThat ( java.nio.file.Path path ) { return com.google.common.truth.Truth.assertAbout ( com.google.gerrit.extensions.common.PathSubject :: new ) . that ( path ) ; }
public com.google.common.util.concurrent.ListenableFuture < ? > index ( com.google.gerrit.server.query.change.ChangeData cd ) { return com.google.common.util.concurrent.Futures.immediateFuture ( null ) ; }
public com.google.gerrit.reviewdb.client.PatchSet update ( com.google.gerrit.reviewdb.client.PatchSet patchset ) { if ( patchset.isDraft ( ) ) { patchset.setDraft ( false ) ; return patchset ; } return null ; }
public Account.Id getOwner ( ) { return owner ; }
public void addRelatedLink ( java.lang.String issueId , java.net.URL relatedUrl , java.lang.String description ) throws java.io.IOException { if ( log.isDebugEnabled ( ) ) { log.debug ( "addRelatedLink({},{},{})" , issueId , relatedUrl , description ) ; } }
protected < S extends com.google.gwt.event.shared.EventHandler > void fireEvent ( com.google.gwtjsonrpc.client.BaseRpcEvent < S > e ) { e.call = this ; com.google.gwtjsonrpc.client.JsonUtil.fireEvent ( e ) ; }
public void setUp ( ) throws java.lang.Exception { db = com.google.gerrit.testutil.InMemoryDatabase.newDatabase ( ) ; }
private Account.Id id ( int n ) { return new com.google.gerrit.reviewdb.client.Account.Id ( n ) ; }
public void onSuccess ( com.google.gerrit.client.changes.ReviewInput result ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( psId ) ) ; }
private com.google.gitiles.doc.MarkdownToHtml readme ( com.google.gitiles.GitilesView v , java.lang.String path ) { return new com.google.gitiles.doc.MarkdownToHtml ( v , config , path ) ; }
protected void configureServlets ( ) { filter ( "/*" ) . through ( com.google.gerrit.server.http.RequestCleanupFilter.class ) ; }
public < K , V > com.google.common.cache.Cache < K , V > build ( com.google.gerrit.server.cache.CacheBinding < K , V > def ) { return create ( def , false ) . build ( ) ; }
public void onClick ( com.google.gwt.event.dom.client.ClickEvent event ) { hide ( ) ; }
public com.google.gerrit.server.notedb.ChangeNotes createWithAutoRebuildingDisabled ( com.google.gerrit.reviewdb.client.Change change , com.google.gerrit.server.git.RefCache refs ) throws com.google.gwtorm.server.OrmException { return new com.google.gerrit.server.notedb.ChangeNotes ( args , change , false , refs ) . load ( ) ; }
public java.lang.String getText ( ) { java.lang.String s = nameTxtBox.getText ( ) ; return s == null ? "" : s ; }
public void addChangeMessage ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.server.notedb.ChangeUpdate update , com.google.gerrit.reviewdb.client.ChangeMessage changeMessage ) throws com.google.gwtorm.server.OrmException { update.setChangeMessage ( changeMessage.getMessage ( ) ) ; db.changeMessages ( ) . insert ( java.util.Collections.singleton ( changeMessage ) ) ; }
public void clear ( ) { setCat ( null ) ; setName ( "" ) ; setReference ( "" ) ; }
public static java.lang.String toPatch ( @ com.google.gerrit.common.Nullable com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.client.DiffObject diffBase , com.google.gerrit.reviewdb.client.PatchSet.Id revision , java.lang.String fileName ) { return com.google.gerrit.client.Dispatcher.toPatch ( "" , project , diffBase , revision , fileName , null , 0 ) ; }
protected void configure ( ) { bind ( java.io.File.class ) . annotatedWith ( com.google.gerrit.server.config.SitePath.class ) . toInstance ( sitePath ) ; }
public void onSuccess ( com.google.gerrit.client.info.ChangeInfo result ) { sent = true ; hide ( ) ; com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( project , result.legacyId ( ) ) ) ; }
public void setUp ( ) throws java.lang.Exception { repo = new org.eclipse.jgit.junit.TestRepository ( new org.eclipse.jgit.internal.storage.dfs.InMemoryRepository ( new org.eclipse.jgit.internal.storage.dfs.DfsRepositoryDescription ( "repo" ) ) ) ; }
public void onReloadPlugin ( com.google.gerrit.server.plugins.Plugin oldPlugin , com.google.gerrit.server.plugins.Plugin newPlugin ) { install ( newPlugin ) ; }
public void suggestReviewersNoResult1 ( ) throws java.io.IOException , java.lang.Exception , org.eclipse.jgit.api.errors.GitAPIException { java.lang.String changeId = createChange ( ) . getChangeId ( ) ; java.util.List < com.google.gerrit.server.change.SuggestReviewers.SuggestedReviewerInfo > reviewers = suggestReviewers ( changeId , "u" , 6 ) ; org.junit.Assert.assertEquals ( reviewers.size ( ) , 0 ) ; }
private boolean isLdapUUID ( com.google.gerrit.reviewdb.client.AccountGroup.UUID uuid ) { return uuid.get ( ) . startsWith ( com.google.gerrit.server.auth.ldap.Helper.LDAP_UUID ) ; }
Project.NameKey getProjectName ( ) { return project.getNameKey ( ) ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { doSave ( null ) ; }
public void batchAbandon ( com.google.gerrit.server.update.BatchUpdate.Factory updateFactory , com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.server.CurrentUser user , java.util.Collection < com.google.gerrit.server.query.change.ChangeData > changes ) throws com.google.gerrit.extensions.restapi.RestApiException , com.google.gerrit.server.update.UpdateException { batchAbandon ( updateFactory , project , user , changes , "" , NotifyHandling.ALL , com.google.common.collect.ImmutableListMultimap.of ( ) ) ; }
private void reject ( final org.eclipse.jgit.transport.ReceiveCommand cmd ) { reject ( cmd , "prohibited by Gerrit" ) ; }
public com.google.gerrit.server.patch.PatchList get ( com.google.gerrit.server.patch.PatchListKey key , com.google.gerrit.reviewdb.client.Project.NameKey project ) throws com.google.gerrit.server.patch.PatchListNotAvailableException ;
protected void onLoad ( ) { super . onLoad ( ) ; display ( ) ; refresh ( false , false ) ; }
protected void configure ( ) { bind ( com.google.gerrit.server.git.GitRepositoryManager.class ) . to ( com.google.gerrit.server.git.LocalDiskRepositoryManager.class ) ; listener ( ) . to ( com.google.gerrit.server.git.LocalDiskRepositoryManager.Lifecycle.class ) ; }
private static int find ( java.util.List < java.lang.String > files , java.lang.String p ) { int r = java.util.Collections.binarySearch ( files , p ) ; return r < 0 ? - ( r + 1 ) : r ; }
public void onSuccess ( final java.util.List < com.google.gerrit.client.account.AccountProjectWatchInfo > result ) { watches.display ( result ) ; }
public void cleanup ( ) { db.close ( ) ; }
public void init ( javax.servlet.FilterConfig filterConfig ) throws javax.servlet.ServletException { }
protected void run ( ) { for ( com.googlesource.gerrit.plugins.replication.Destination d : config.getDestinations ( FilterType.ALL ) ) { if ( matches ( d.getRemoteConfig ( ) . getName ( ) ) ) { printRemote ( d ) ; } } }
public com.google.gerrit.server.plugins.PluginResource parse ( java.lang.String id ) throws com.google.gerrit.extensions.restapi.ResourceNotFoundException { com.google.gerrit.server.plugins.Plugin p = loader.get ( id ) ; if ( p == null ) { throw new com.google.gerrit.extensions.restapi.ResourceNotFoundException ( id ) ; } return new com.google.gerrit.server.plugins.PluginResource ( p ) ; }
public void index ( com.google.gerrit.reviewdb.client.Change change ) throws java.io.IOException { index ( new com.google.gerrit.server.query.change.ChangeData ( change ) ) ; }
public java.lang.Short value ( ) { return value ; }
public void preDisplay ( final java.util.List < com.google.gerrit.reviewdb.client.AccountGroup > result ) { groups.display ( result ) ; }
public boolean canRebase ( ) { return ( ( isOwner ( ) ) || ( getRefControl ( ) . canSubmit ( ) ) ) || ( getRefControl ( ) . canRebase ( ) ) ; }
private static com.google.gerrit.server.index.Schema < com.google.gerrit.server.query.change.ChangeData > developer ( com.google.gerrit.server.index.FieldDef < com.google.gerrit.server.query.change.ChangeData , ? > ... fields ) { return new com.google.gerrit.server.index.Schema ( false , java.util.Arrays.asList ( fields ) ) ; }
private com.cisco.gerrit.plugins.slack.config.ProjectConfig getConfig ( ) throws java.lang.Exception { return getConfig ( true , true , true ) ; }
public java.util.List < com.google.gerrit.server.query.change.ChangeData > byProjectCommit ( com.google.gerrit.reviewdb.client.Project.NameKey project , java.lang.String hash ) throws com.google.gwtorm.server.OrmException { return query ( com.google.gerrit.server.query.Predicate.and ( com.google.gerrit.server.query.change.InternalChangeQuery.project ( project ) , com.google.gerrit.server.query.change.InternalChangeQuery.commit ( hash ) ) ) ; }
protected void onInitUI ( ) { super . onInitUI ( ) ; initUUID ( ) ; initName ( ) ; initOwner ( ) ; initDescription ( ) ; initGroupOptions ( ) ; }
private void removeAccountIdLock ( com.google.gerrit.reviewdb.client.Account.Id id ) { synchronized ( com.ericsson.gerrit.plugins.highavailability.forwarder.rest.IndexAccountRestApiServlet.accountIdLocks ) { if ( ( com.ericsson.gerrit.plugins.highavailability.forwarder.rest.IndexAccountRestApiServlet.accountIdLocks.get ( id ) . get ( ) ) == 0 ) { com.ericsson.gerrit.plugins.highavailability.forwarder.rest.IndexAccountRestApiServlet.accountIdLocks.remove ( id ) ; } } }
public java.lang.String getName ( ) { return name ; }
private void setDefaultFields ( javax.servlet.FilterConfig filterConfig ) throws javax.servlet.ServletException { setDefaultConfig ( filterConfig ) ; setDefaultRenderer ( filterConfig ) ; setDefaultUrls ( ) ; setDefaultAccess ( ) ; setDefaultVisibilityCache ( ) ; setDefaultTimeCache ( ) ; setDefaultBlameCache ( ) ; setDefaultGitwebRedirect ( ) ; }
public java.net.SocketAddress getRemoteAddress ( ) { return remoteAddress ; }
public void setValue ( T value ) { this . value = value ; asEditor ( ) . setValue ( value ) ; }
public com.googlesource.gerrit.plugins.github.oauth.GitHubLogin get ( javax.servlet.http.HttpServletRequest request ) { return super . get ( request ) ; }
private com.cisco.gerrit.plugins.slack.config.ProjectConfig getConfig ( java.lang.String ignore ) throws java.lang.Exception { return getConfig ( ignore , true , true , true , true ) ; }
public static java.lang.String toPatch ( @ com.google.gerrit.common.Nullable com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.client.DiffObject diffBase , com.google.gerrit.reviewdb.client.PatchSet.Id revision , java.lang.String fileName , com.google.gerrit.client.diff.DisplaySide side , int line ) { return com.google.gerrit.client.Dispatcher.toPatch ( "" , project , diffBase , revision , fileName , side , line ) ; }
public void display ( java.lang.String commitMessage , com.google.gerrit.client.ui.CommentLinkProcessor commentLinkProcessor ) { display ( null , null , null , false , commitMessage , commentLinkProcessor ) ; }
public void setUserAccountId ( com.google.gerrit.reviewdb.client.Account.Id id ) { key = new com.google.gerrit.httpd.WebSessionManager.Key ( ( "id:" + id ) ) ; val = new com.google.gerrit.httpd.WebSessionManager.Val ( id , 0 , false , null , 0 , null , null ) ; }
public void put ( com.google.gerrit.reviewdb.client.AccountGroup.UUID uuid , com.google.gerrit.common.data.GroupReference reference ) { if ( ( uuid == null ) || ( ( uuid.get ( ) ) == null ) ) { return ; } byUUID.put ( uuid , reference ) ; }
public boolean equals ( final java.lang.Object obj ) { if ( obj instanceof com.google.gerrit.reviewdb.TrackingId ) { final com.google.gerrit.reviewdb.TrackingId tr = ( ( com.google.gerrit.reviewdb.TrackingId ) ( obj ) ) ; return key.equals ( tr.key ) ; } return false ; }
private com.google.gerrit.server.CurrentUser getUser ( ) { return getRefControl ( ) . getUser ( ) ; }
private void blockCreateReference ( ) throws java.lang.Exception { com.google.gerrit.server.git.ProjectConfig cfg = projectCache.checkedGet ( project ) . getConfig ( ) ; com.google.gerrit.server.project.Util.block ( cfg , Permission.CREATE , com.google.gerrit.server.group.SystemGroupBackend.ANONYMOUS_USERS , "refs/*" ) ; saveProjectConfig ( project , cfg ) ; }
public static < T > com.google.gerrit.rules.StoredValue < T > create ( java.lang.Class < T > clazz ) { return new com.google.gerrit.rules.StoredValue < T > ( clazz ) ; }
public java.lang.Boolean call ( ) throws com.google.gerrit.server.permissions.PermissionBackendException , com.google.gerrit.server.project.NoSuchProjectException { return shouldReplicate ( project ) ; }
private org.eclipse.jgit.lib.Repository openRepository ( com.google.gerrit.server.project.ProjectState project ) throws java.io.IOException , org.eclipse.jgit.errors.RepositoryNotFoundException { return repoManager.openRepository ( project.getNameKey ( ) ) ; }
protected void configure ( ) { factory ( PrologEnvironment.Factory.class ) ; }
public void run ( ) { }
public void setUp ( ) throws java.lang.Exception { schema = new com.google.gwtorm.schema.java.JavaSchemaModel ( com.google.gwtorm.data.PhoneBookDb.class ) ; people = schema.getRelation ( "people" ) ; }
public java.lang.String getName ( ) { return getAccount ( ) . getName ( anonymousCowardName ) ; }
java.util.Set < com.google.gerrit.server.change.SuggestedReviewer > suggestReviewers ( com.google.gerrit.reviewdb.client.Project.NameKey project , @ com.google.gerrit.common.Nullable com.google.gerrit.reviewdb.client.Change.Id changeId , @ com.google.gerrit.common.Nullable java.lang.String query , java.util.Set < com.google.gerrit.reviewdb.client.Account.Id > candidates ) ;
public void formatChange ( ) throws com.google.gerrit.server.mail.EmailException { appendText ( velocifyFile ( "Comment.vm" ) ) ; }
public java.util.List < com.google.gerrit.server.query.change.ChangeData > byCommit ( java.lang.String hash ) throws com.google.gwtorm.server.OrmException { return query ( com.google.gerrit.server.query.change.InternalChangeQuery.commit ( hash ) ) ; }
public void setFileHistory ( final java.lang.String pattern ) { fileHistory = pattern ; }
void manualFlush ( ) throws java.io.IOException { flush ( ) ; if ( autoCommit ) { commit ( ) ; } }
protected void logDebug ( java.lang.String msg , java.lang.Throwable t ) { if ( ( ( requestId ) != null ) && ( com.google.gerrit.server.update.BatchUpdate.log.isDebugEnabled ( ) ) ) { com.google.gerrit.server.update.BatchUpdate.log.debug ( ( ( requestId ) + msg ) , t ) ; } }
private com.google.gerrit.client.diff.DraftBox addNewDraft ( net.codemirror.lib.CodeMirror cm , int line ) { return addDraftBox ( com.google.gerrit.client.changes.CommentInfo.create ( path , getSideFromCm ( cm ) , ( line + 1 ) , null , null ) ) ; }
public void setStarredBy ( java.util.Set < com.google.gerrit.reviewdb.client.Account.Id > starredByUser ) { this . starredByUser = starredByUser ; }
public com.google.gerrit.common.data.PermissionRange getRange ( java.lang.String permission ) { if ( com.google.gerrit.common.data.Permission.isLabel ( permission ) ) { return toRange ( permission , access ( permission ) ) ; } return null ; }
public void setUp ( ) throws java.lang.Exception { admin = accounts.create ( "admin" , "Administrators" ) ; session = new com.google.gerrit.acceptance.RestSession ( server , admin ) ; db = reviewDbProvider.open ( ) ; }
protected < T > T buildJson ( java.lang.String path , java.lang.Class < T > classOfT ) throws java.lang.Exception { return buildJson ( path , classOfT , "" ) ; }
private void deleteDraftComment ( com.google.gerrit.reviewdb.client.PatchLineComment c ) throws com.google.gwtorm.server.OrmException { createDraftUpdateIfNull ( ) ; draftUpdate.deleteComment ( c ) ; }
public void removeKeyboardListener ( com.google.gwt.user.client.ui.KeyboardListener listener ) { if ( ( focusy ) != null ) { focusy.removeKeyboardListener ( listener ) ; } }
private static com.google.gerrit.server.account.AccountState newState ( com.google.gerrit.reviewdb.client.Account account ) { return new com.google.gerrit.server.account.AccountState ( new com.google.gerrit.server.config.AllUsersName ( com.google.gerrit.server.config.AllUsersNameProvider.DEFAULT ) , account , com.google.common.collect.ImmutableSet.of ( ) , new java.util.HashMap < > ( ) ) ; }
public void includeExistingGroup_OK ( ) throws java.lang.Exception { group ( "newGroup" ) ; PUT ( "/groups/Administrators/groups/newGroup" ) . consume ( ) ; com.google.common.truth.Truth.assertThat ( PUT ( "/groups/Administrators/groups/newGroup" ) . getStatusCode ( ) ) . isEqualTo ( HttpStatus.SC_OK ) ; }
private static void addApproval ( com.google.gerrit.extensions.common.LabelInfo label , com.google.gerrit.extensions.common.ApprovalInfo approval ) { if ( ( label.all ) == null ) { label.all = new java.util.ArrayList < > ( ) ; } label.all.add ( approval ) ; }
public void doChangeRestoredHook ( com.google.gerrit.reviewdb.client.Change change , com.google.gerrit.reviewdb.client.Account account , com.google.gerrit.reviewdb.client.PatchSet patchSet , java.lang.String reason , com.google.gerrit.reviewdb.server.ReviewDb db ) throws com.google.gwtorm.server.OrmException ;
private void assertParseSucceeds ( java.lang.String body ) throws java.lang.Exception { assertParseSucceeds ( writeCommit ( body ) ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { topic.onEdit ( ) ; }
public com.google.common.util.concurrent.CheckedFuture < ? , java.io.IOException > indexAsync ( com.google.gerrit.reviewdb.client.Change change ) { return ( executor ) != null ? submit ( new com.google.gerrit.server.index.ChangeIndexer.Task ( change , false ) ) : com.google.common.util.concurrent.Futures.< java.lang.Object , java.io.IOException > immediateCheckedFuture ( null ) ; }
public void onCellClicked ( com.google.gwt.user.client.ui.SourcesTableEvents sender , int row , int cell ) { if ( row > 0 ) { movePointerTo ( row ) ; } }
protected static void assertNotUsed ( java.sql.PreparedStatement insert ) { org.mockito.Mockito.verifyZeroInteractions ( insert ) ; }
private static com.google.gerrit.server.query.change.RegexPathPredicate predicate ( java.lang.String pattern ) { return new com.google.gerrit.server.query.change.RegexPathPredicate ( pattern ) ; }
private void log ( final int rc ) { synchronized ( this ) { if ( ! ( logged ) ) { log.onExecute ( rc ) ; logged = true ; } } }
public void setSHA1 ( final java.lang.String sha1 ) { this . sha1 = sha1 ; }
public void testCreateSchema_DefaultAccess_Administrators ( ) throws com.google.gwtorm.client.OrmException { db.create ( ) ; final com.google.gerrit.reviewdb.SystemConfig config = db.getSystemConfig ( ) ; assertDefaultRight ( config.adminGroupId , ApprovalCategory.READ , 1 , 1 ) ; }
public void abandon ( ) throws com.google.gerrit.extensions.restapi.RestApiException , java.io.IOException , org.eclipse.jgit.api.errors.GitAPIException { com.google.gerrit.acceptance.PushOneCommit.Result r = createChange ( ) ; gApi.changes ( ) . id ( r.getChangeId ( ) ) . abandon ( ) ; }
public void createProjectDuplicate ( ) throws java.lang.Exception { com.google.gerrit.extensions.api.projects.ProjectInput in = new com.google.gerrit.extensions.api.projects.ProjectInput ( ) ; in.name = name ( "baz" ) ; gApi.projects ( ) . create ( in ) ; gApi.projects ( ) . create ( in ) ; }
public java.util.List < com.gitblit.models.TeamModel > getAllTeams ( ) { return null ; }
com.googlesrouce.gerrit.plugins.github.git.ReplicateProjectStep create ( @ com.google.inject.assistedinject.Assisted ( value = "organisation" ) java.lang.String organisation , @ com.google.inject.assistedinject.Assisted ( value = "name" ) java.lang.String repository ) ;
public void getTagOfNonVisibleProjectWithApi ( ) throws java.lang.Exception { blockRead ( "refs/*" ) ; exception.expect ( com.google.gerrit.extensions.restapi.ResourceNotFoundException.class ) ; gApi.projects ( ) . name ( project.get ( ) ) . tag ( "tag" ) . get ( ) ; }
public com.googlesource.gerrit.plugins.findowners.OwnersDb call ( ) { com.googlesource.gerrit.plugins.findowners.Cache.log.trace ( ( "Create new OwnersDb, key=" + key ) ) ; return new com.googlesource.gerrit.plugins.findowners.OwnersDb ( key , repository , project , branch , files ) ; }
public void submit ( ) throws com.google.gerrit.extensions.restapi.RestApiException { com.google.gerrit.extensions.api.changes.SubmitInput in = new com.google.gerrit.extensions.api.changes.SubmitInput ( ) ; submit ( in ) ; }
public java.lang.String getServletPath ( ) { return getRequestURI ( ) . substring ( contextPath.length ( ) ) ; }
private void ensureOptionsInitialized ( ) { if ( ( optionsList ) == null ) { help = new com.google.gerrit.util.cli.CmdLineParser.HelpOption ( ) ; optionsList = new java.util.ArrayList < > ( ) ; addOption ( help , help ) ; } }
protected void init ( ) throws com.google.gerrit.common.errors.EmailException { super . init ( ) ; ccAllApprovals ( ) ; bccStarredBy ( ) ; includeWatchers ( NotifyType.ABANDONED_CHANGES ) ; }
public boolean isPatchVisible ( com.google.gerrit.reviewdb.client.PatchSet ps , com.google.gerrit.reviewdb.server.ReviewDb db ) throws com.google.gwtorm.server.OrmException { if ( ( ps.isDraft ( ) ) && ( ! ( isDraftVisible ( db , null ) ) ) ) { return false ; } return isVisible ( db ) ; }
public abstract Project.NameKey getProjectName ( ) ;
com.google.gerrit.server.git.EmailMerge create ( com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.reviewdb.client.Change.Id changeId , com.google.gerrit.reviewdb.client.Account.Id submitter ) ;
public void postEvent ( com.google.gerrit.server.events.Event event ) throws com.google.gwtorm.server.OrmException { fireEvent ( event ) ; }
public short get ( ) { return value ; }
public void addMembersWithAtSign ( ) throws java.lang.Exception { java.lang.String g = createGroup ( "users" ) ; com.google.gerrit.acceptance.TestAccount u10 = accounts.create ( "u10" , "u10@example.com" , "Full Name 10" ) ; com.google.gerrit.acceptance.TestAccount u11_at = accounts.create ( "u11@something" , "u11@example.com" , "Full Name 11 With At" ) ; accounts.create ( "u11" , "u11.another@example.com" , "Full Name 11 Without At" ) ; gApi.groups ( ) . id ( g ) . addMembers ( u10.username , u11_at.username ) ; assertMembers ( g , u10 , u11_at ) ; }
protected void configure ( ) { bind ( com.google.gerrit.pgm.util.ConsoleUI.class ) . toInstance ( init.ui ) ; bind ( com.google.gerrit.pgm.init.InitFlags.class ) . toInstance ( init.flags ) ; bind ( com.google.gerrit.server.git.GitRepositoryManager.class ) . to ( com.google.gerrit.server.git.LocalDiskRepositoryManager.class ) ; }
protected Account.Id getAccountId ( ) { com.google.gerrit.server.CurrentUser u = currentUser.get ( ) ; return u.isIdentifiedUser ( ) ? u.getAccountId ( ) : null ; }
public void onFailure ( final java.lang.Throwable caught ) { if ( ( rpcSequence ) == rpcseq ) { super . onFailure ( caught ) ; } }
protected void preDisplay ( final java.util.List < com.google.gerrit.client.reviewdb.Project > result ) { projects.display ( result ) ; projects.finishDisplay ( ) ; }
private com.google.gerrit.extensions.common.FixReplacementInfo toFixReplacementInfo ( com.google.gerrit.reviewdb.client.FixReplacement fixReplacement ) { com.google.gerrit.extensions.common.FixReplacementInfo fixReplacementInfo = new com.google.gerrit.extensions.common.FixReplacementInfo ( ) ; fixReplacementInfo.path = fixReplacement.path ; fixReplacementInfo.range = toRange ( fixReplacement.range ) ; fixReplacementInfo.replacement = fixReplacement.replacement ; return fixReplacementInfo ; }
public static java.lang.String cacheNameOf ( java.lang.String plugin , java.lang.String name ) { if ( "gerrit" . equals ( plugin ) ) { return name ; } return ( plugin + "-" ) + name ; }
public static com.google.gerrit.server.index.IndexConfig createDefault ( ) { return com.google.gerrit.server.index.IndexConfig.create ( java.lang.Integer.MAX_VALUE ) ; }
protected final void logDebug ( java.lang.String msg , java.lang.Object ... args ) { if ( com.google.gerrit.server.git.strategy.SubmitStrategyOp.log.isDebugEnabled ( ) ) { com.google.gerrit.server.git.strategy.SubmitStrategyOp.log.debug ( ( ( this . args.submissionId ) + msg ) , args ) ; } }
public com.google.gerrit.reviewdb.client.Change update ( com.google.gerrit.reviewdb.client.Change change ) { change.setCurrentPatchSet ( patchSetInfoFactory.get ( newCommit , ps.getId ( ) ) ) ; return change ; }
public void onSuccess ( final java.util.List < com.google.gerrit.client.reviewdb.AccountSshKey > result ) { keys.display ( result ) ; if ( result.isEmpty ( ) ) { showAddKeyBlock ( true ) ; } }
protected void submit ( java.lang.String changeId ) throws java.lang.Exception { submit ( changeId , new com.google.gerrit.extensions.api.changes.SubmitInput ( ) , null , null ) ; }
public com.google.gerrit.server.plugins.JarScanner.ExtensionMetaData apply ( com.google.gerrit.server.plugins.JarScanner.ClassData classData ) { return new com.google.gerrit.server.plugins.JarScanner.ExtensionMetaData ( classData.className , classData.annotationValue ) ; }
private static int getInt ( final org.spearce.jgit.transport.RemoteConfig rc , final org.spearce.jgit.lib.RepositoryConfig cfg , final java.lang.String name , final int defValue ) { return cfg.getInt ( "remote" , rc.getName ( ) , name , defValue ) ; }
com.google.gerrit.server.git.CreateCodeReviewNotes create ( com.google.gerrit.reviewdb.server.ReviewDb reviewDb , com.google.gerrit.reviewdb.client.Project.NameKey project , org.eclipse.jgit.lib.Repository db ) ;
, @ com.google.gerrit.acceptance.GerritConfig ( name = "a.b" , value = "c" ) } ) public void testMultiple ( ) { com.google.common.truth.Truth.assertThat ( serverConfig.getString ( "x" , null , "y" ) ) . isEqualTo ( "z" ) ; com.google.common.truth.Truth.assertThat ( serverConfig.getString ( "a" , null , "b" ) ) . isEqualTo ( "c" ) ; }
public void nonExistingConfig ( ) { com.google.gerrit.server.project.ProjectState state = projectCache.get ( project ) ; com.google.common.truth.Truth.assertThat ( state.getConfig ( "test.config" ) . get ( ) . toText ( ) ) . isEqualTo ( "" ) ; }
com.google.gerrit.server.query.change.ChangeData convert ( com.google.gerrit.reviewdb.client.Change t ) { return factory.create ( db.get ( ) , t ) ; }
public void setUp ( ) throws java.lang.Exception { admins = groupCache.get ( new com.google.gerrit.reviewdb.client.AccountGroup.NameKey ( "Administrators" ) ) . getGroupUUID ( ) ; setUpPermissions ( ) ; setUpChanges ( ) ; }
protected void doStart ( ) throws java.lang.Exception { setClassLoader ( new com.google.gerrit.gwtdebug.GerritDebugLauncher.MyWebAppContext.MyLoader ( this ) ) ; super . doStart ( ) ; }
com.google.gerrit.testutil.InMemoryDatabase getInMemoryDatabase ( com.google.gerrit.server.schema.SchemaCreator schemaCreator ) throws com.google.gwtorm.server.OrmException { return new com.google.gerrit.testutil.InMemoryDatabase ( schemaCreator ) ; }
private com.google.gerrit.server.notedb.ChangeNotesParser newParser ( org.eclipse.jgit.lib.ObjectId tip ) throws java.lang.Exception { com.google.gerrit.reviewdb.client.Change c = newChange ( ) ; return new com.google.gerrit.server.notedb.ChangeNotesParser ( c.getProject ( ) , c.getId ( ) , tip , walk , repoManager ) ; }
public void setName ( final java.lang.String name ) { this . name = name ; }
public void run ( ) { this . handleEmails ( true ) ; }
static org.apache.lucene.index.Term idTerm ( com.google.gerrit.reviewdb.client.Change.Id id ) { return com.google.gerrit.lucene.QueryBuilder.intTerm ( com.google.gerrit.server.index.change.ChangeField.LEGACY_ID.getName ( ) , id.get ( ) ) ; }
protected java.lang.String getRefName ( ) { return ref ; }
private void setListBox ( final com.google.gwt.user.client.ui.ListBox f , final int defaultValue , final int currentValue ) { setListBox ( f , java.lang.String.valueOf ( defaultValue ) , java.lang.String.valueOf ( currentValue ) ) ; }
com.google.gerrit.extensions.auth.oauth.OAuthToken getAccessToken ( com.google.gerrit.extensions.auth.oauth.OAuthVerifier verifier ) ;
protected void setDownloadHeaders ( javax.servlet.http.HttpServletResponse res , java.lang.String filename , java.lang.String contentType ) { res.setContentType ( contentType ) ; res.setHeader ( com.google.common.net.HttpHeaders.CONTENT_DISPOSITION , ( "attachment; filename=" + filename ) ) ; setCacheHeaders ( res ) ; }
private native void copy ( java.util.Map < java.lang.String , V > r , com.google.gwt.core.client.JavaScriptObject jsObject ) ;
private static final native void init ( java.lang.String e , java.lang.String r , java.lang.String o ) ;
public com.google.gerrit.server.group.GetGroup.GroupInfo apply ( com.google.gerrit.server.group.IncludedGroupResource rsrc ) { return new com.google.gerrit.server.group.GetGroup.GroupInfo ( rsrc.getGroup ( ) ) ; }
public void mergeReview ( com.google.gerrit.extensions.common.ChangeInfo info ) throws java.lang.Exception { submitter.apply ( getRevisionResource ( info.project , info._number ) , new com.google.gerrit.extensions.api.changes.SubmitInput ( ) ) ; }
public void testExclamationMark ( ) { com.google.gerrit.common.data.GitWebType gitWebType = com.google.gerrit.common.data.GitWebType.fromName ( null ) ; gitWebType.setPathSeparator ( '!' ) ; org.junit.Assert.assertEquals ( "a!b" , gitWebType.replacePathSeparator ( "a/b" ) ) ; }
protected void fireEventForUnrestrictedListeners ( com.google.gerrit.server.events.Event event ) { for ( com.google.gerrit.common.EventListener listener : unrestrictedListeners ) { listener.onEvent ( event ) ; } }
public void onSuccess ( com.google.gwt.core.client.JavaScriptObject result ) { if ( screen.isCurrentView ( ) ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( changeId ) ) ; } }
private void doList ( ) { for ( final java.lang.String name : cacheNames ( ) ) { p.print ( name ) ; p.print ( '\n' ) ; } p.flush ( ) ; }
public static com.google.gerrit.index.query.Predicate < com.google.gerrit.server.account.AccountState > cansee ( com.google.gerrit.server.query.account.AccountQueryBuilder.Arguments args , com.google.gerrit.server.notedb.ChangeNotes changeNotes ) { return new com.google.gerrit.server.query.account.CanSeeChangePredicate ( args.db , args.permissionBackend , changeNotes ) ; }
public void configure ( ) { factory ( OnlineReindexer.Factory.class ) ; listener ( ) . to ( com.google.gerrit.lucene.LuceneVersionManager.class ) ; }
private com.google.gerrit.server.account.AccountState toAccountState ( org.apache.lucene.document.Document doc ) { com.google.gerrit.reviewdb.client.Account.Id id = new com.google.gerrit.reviewdb.client.Account.Id ( doc.getField ( com.google.gerrit.server.index.account.AccountField.ID.getName ( ) ) . numericValue ( ) . intValue ( ) ) ; return accountCache.get ( ) . get ( id ) ; }
protected java.lang.String getQueryPattern ( final java.lang.String query ) { return query ; }
public static com.google.gitiles.BaseServlet notFoundServlet ( ) { return new com.google.gitiles.BaseServlet ( null , null ) { private static final long serialVersionUID = 1L ; @ java.lang.Override public void service ( javax.servlet.http.HttpServletRequest req , javax.servlet.http.HttpServletResponse res ) { res.setStatus ( javax.servlet.http.HttpServletResponse.SC_NOT_FOUND ) ; } } ; }
private com.google.gerrit.client.change.RelatedChangesTab getTab ( ) { if ( ( conflictingChangesTab ) == null ) { conflictingChangesTab = createTab ( Resources.C.conflictingChanges ( ) , Resources.C.conflictingChangesTooltip ( ) ) ; } return conflictingChangesTab ; }
public final native int patchSet ( ) ;
protected java.lang.String getRefName ( ) { return com.google.gerrit.server.notedb.ChangeNoteUtil.changeRefName ( ctl.getId ( ) ) ; }
public void testOpenSchema ( ) throws java.lang.Exception { final com.google.gwtorm.data.PhoneBookDb schema1 = open ( ) ; org.junit.Assert.assertNotNull ( schema1 ) ; final com.google.gwtorm.data.PhoneBookDb schema2 = open ( ) ; org.junit.Assert.assertNotNull ( schema2 ) ; org.junit.Assert.assertNotSame ( schema1 , schema2 ) ; }
public void setFullName ( final java.lang.String name ) { if ( ( name != null ) && ( ! ( name.trim ( ) . isEmpty ( ) ) ) ) { fullName = name.trim ( ) ; } else { fullName = null ; } }
public void addPatchSets ( com.google.gerrit.server.events.ChangeAttribute a , java.util.Collection < com.google.gerrit.reviewdb.client.PatchSet > ps ) { addPatchSets ( a , ps , null , false , null ) ; }
public void messagesNotReturnedByDefault ( ) throws java.lang.Exception { java.lang.String changeId = createChange ( ) . getChangeId ( ) ; postMessage ( changeId , "Some nits need to be fixed." ) ; com.google.gerrit.extensions.common.ChangeInfo c = info ( changeId ) ; org.junit.Assert.assertNull ( c.messages ) ; }
public com.google.gerrit.server.notedb.ChangeNotes notes ( ) throws com.google.gwtorm.server.OrmException { if ( ( notes ) == null ) { notes = notesFactory.create ( db , project ( ) , legacyId ) ; } return notes ; }
public java.util.List < com.google.gerrit.server.query.change.ChangeData > query ( com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > p ) throws com.google.gwtorm.server.OrmException { try { return qp.queryChanges ( p ) . changes ( ) ; } catch ( com.google.gerrit.server.query.QueryParseException e ) { throw new com.google.gwtorm.server.OrmException ( e ) ; } }
public java.util.Optional < com.google.gerrit.server.account.AccountState > load ( com.google.gerrit.reviewdb.client.Account.Id who ) throws java.lang.Exception { return accounts.get ( who ) ; }
protected void onCellSingleClick ( int row , int column ) { super . onCellSingleClick ( row , column ) ; if ( ( column == 1 ) || ( column == 4 ) ) { onCellDoubleClick ( row , column ) ; } }
protected void configure ( ) { bind ( com.google.gerrit.httpd.GerritOptions.class ) . toInstance ( new com.google.gerrit.httpd.GerritOptions ( config , false , false , false ) ) ; }
protected void configure ( ) { bind ( com.google.gerrit.server.git.GitRepositoryManager.class ) . to ( com.google.gerrit.server.git.LocalDiskRepositoryManager.class ) ; listener ( ) . to ( com.google.gerrit.server.git.LocalDiskRepositoryManager.Lifecycle.class ) ; }
protected < R extends com.google.gerrit.extensions.restapi.RestResource > com.google.gerrit.extensions.restapi.RestApiModule.ModifyViewBinder < R > delete ( com.google.inject.TypeLiteral < com.google.gerrit.extensions.restapi.RestView < R > > viewType , java.lang.String name ) { return new com.google.gerrit.extensions.restapi.RestApiModule.ModifyViewBinder ( view ( viewType , com.google.gerrit.extensions.restapi.RestApiModule.DELETE , name ) ) ; }
public int next ( ) { return com.google.gerrit.server.util.IdGenerator.mix ( gen.getAndIncrement ( ) ) ; }
public com.google.gerrit.server.data.AccountAttribute asAccountAttribute ( com.google.gerrit.reviewdb.client.Account.Id id ) { if ( id == null ) { return null ; } return asAccountAttribute ( accountCache.get ( id ) ) ; }
public void testInalidPathSeparator ( ) { for ( char c : com.google.gerrit.httpd.GitWebConfigTest.SOME_INVALID_CHARACTERS.toCharArray ( ) ) { org.junit.Assert.assertFalse ( ( "invalid character accepted: " + c ) , com.google.gerrit.httpd.GitWebConfig.isValidPathSeparator ( c ) ) ; } }
public final void delete ( final java.lang.Iterable < E > instances ) throws com.google.gwtorm.client.OrmException { doDelete ( instances ) ; }
private org.eclipse.jgit.lib.BatchRefUpdate getBatchRefUpdate ( ) throws java.io.IOException { initRepository ( ) ; if ( ( batchRefUpdate ) == null ) { batchRefUpdate = repo.getRefDatabase ( ) . newBatchUpdate ( ) ; } return batchRefUpdate ; }
private java.lang.String comparePattern ( ) { if ( getName ( ) . startsWith ( com.google.gerrit.common.data.AccessSection.REGEX_PREFIX ) ) { return getName ( ) . substring ( com.google.gerrit.common.data.AccessSection.REGEX_PREFIX.length ( ) ) ; } return getName ( ) ; }
public com.google.gerrit.server.update.RepoView getRepoView ( ) throws java.io.IOException { return this . getRepoView ( ) ; }
public void markReady ( boolean ready ) throws java.io.IOException { com.google.gerrit.lucene.AbstractLuceneIndex.setReady ( sitePaths , name , schema.getVersion ( ) , ready ) ; }
public java.lang.String getShortName ( ) { return name.getShortName ( ) ; }
com.google.gwt.resources.client.DataResource sql ( ) ;
public static com.google.gerrit.server.account.externalids.ExternalId create ( com.google.gerrit.server.account.externalids.ExternalId.Key key , com.google.gerrit.reviewdb.client.Account.Id accountId , @ com.google.gerrit.common.Nullable java.lang.String email , @ com.google.gerrit.common.Nullable java.lang.String hashedPassword ) { return com.google.gerrit.server.account.externalids.ExternalId.create ( key , accountId , com.google.common.base.Strings.emptyToNull ( email ) , com.google.common.base.Strings.emptyToNull ( hashedPassword ) , null ) ; }
public com.google.gerrit.server.config.PluginConfig getFromGerritConfig ( java.lang.String pluginName ) { return getFromGerritConfig ( pluginName , false ) ; }
public java.util.List < java.lang.String > getUsernamesForRepositoryRole ( java.lang.String role ) { return null ; }
com.google.gerrit.httpd.rpc.project.ChangeProjectAccess create ( @ com.google.inject.assistedinject.Assisted com.google.gerrit.reviewdb.client.Project.NameKey projectName , @ javax.annotation.Nullable org.eclipse.jgit.lib.ObjectId base , @ com.google.inject.assistedinject.Assisted java.util.List < com.google.gerrit.common.data.AccessSection > sectionList , @ javax.annotation.Nullable java.lang.String message ) ;
public < K , V > com.google.common.cache.LoadingCache < K , V > build ( com.google.gerrit.server.cache.CacheBinding < K , V > def , com.google.common.cache.CacheLoader < K , V > loader ) { return create ( def , false ) . build ( loader ) ; }
public void dashboardDoesNotExist ( ) throws java.lang.Exception { exception.expect ( com.google.gerrit.extensions.restapi.ResourceNotFoundException.class ) ; project ( ) . dashboard ( "my:dashboard" ) . get ( ) ; }
protected com.google.gerrit.acceptance.AcceptanceTestRequestScope.Context setApiUserAnonymous ( ) { return atrScope.set ( atrScope.newContext ( reviewDbProvider , null , anonymousUser.get ( ) ) ) ; }
protected void preDisplay ( final com.google.gerrit.client.admin.AccountGroupDetail result ) { display ( result ) ; }
public void onSuccess ( java.lang.String result ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( psId ) ) ; }
void evict ( com.google.gerrit.reviewdb.client.AccountGroup.Id groupId ) ;
private static boolean isNameAlreadyUsed ( final java.lang.Throwable caught ) { return ( caught instanceof com.google.gwtjsonrpc.client.RemoteJsonException ) && ( caught.getMessage ( ) . equals ( NameAlreadyUsedException.MESSAGE ) ) ; }
public void onSuccess ( com.google.gerrit.client.info.ChangeInfo result ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( project , id ) ) ; hide ( ) ; }
public static java.lang.String refsStarredChanges ( com.google.gerrit.reviewdb.client.Change.Id changeId , com.google.gerrit.reviewdb.client.Account.Id accountId ) { java.lang.StringBuilder r = com.google.gerrit.reviewdb.client.RefNames.buildRefsPrefix ( com.google.gerrit.reviewdb.client.RefNames.REFS_STARRED_CHANGES , changeId.get ( ) ) ; r.append ( accountId.get ( ) ) ; return r.toString ( ) ; }
public void put ( com.google.gerrit.reviewdb.client.Account.Id id , com.google.gerrit.extensions.auth.oauth.OAuthToken accessToken ) { cache.put ( id , encrypt ( com.google.common.base.Preconditions.checkNotNull ( accessToken ) ) ) ; }
public void stop ( ) { if ( ( async ) != null ) { async.close ( ) ; } }
void setSubmitEnabled ( ) { submit.setVisible ( canSubmit ) ; }
protected void renderHtml ( javax.servlet.http.HttpServletRequest req , javax.servlet.http.HttpServletResponse res , java.lang.String templateName , java.util.Map < java.lang.String , ? > soyData ) throws java.io.IOException { renderer.render ( req , res , templateName , startHtmlResponse ( req , res , soyData ) ) ; }
public int weigh ( ) { return ( resource.length ( ) ) * 2 ; }
public com.google.gerrit.server.project.ChangeControl controlFor ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.Change change ) throws com.google.gwtorm.server.OrmException { return changeControlFactory.create ( controlForRef ( change.getDest ( ) ) , db , change.getProject ( ) , change.getId ( ) ) ; }
private java.util.List < com.google.gerrit.server.patch.PatchListEntry > getPatches ( org.eclipse.jgit.lib.ObjectId revisionIdA , org.eclipse.jgit.lib.ObjectId revisionIdB ) throws com.google.gerrit.server.patch.PatchListNotAvailableException { return patchListCache.get ( getKey ( revisionIdA , revisionIdB ) , project ) . getPatches ( ) ; }
public void testProjectRecreationAfterRestart ( ) throws java.lang.Exception { repoManager.createRepository ( new com.google.gerrit.reviewdb.client.Project.NameKey ( "a" ) ) ; com.google.gerrit.server.git.LocalDiskRepositoryManager newRepoManager = new com.google.gerrit.server.git.LocalDiskRepositoryManager ( site , cfg ) ; newRepoManager.createRepository ( new com.google.gerrit.reviewdb.client.Project.NameKey ( "a" ) ) ; }
public boolean supportsEmailAddressChanges ( ) { return false ; }
int getEnd ( org.eclipse.jgit.diff.Edit edit ) { return edit.getEndA ( ) ; }
public Project.NameKey getProjectName ( ) { return projectControl.getProjectState ( ) . getNameKey ( ) ; }
private com.google.gerrit.server.notedb.ChangeNotesParser newParser ( org.eclipse.jgit.lib.ObjectId tip ) throws java.lang.Exception { return new com.google.gerrit.server.notedb.ChangeNotesParser ( newChange ( ) . getId ( ) , tip , walk , noteUtil , args.metrics ) ; }
public static void updateDraft ( com.google.gerrit.reviewdb.client.PatchSet.Id id , java.lang.String draftId , com.google.gerrit.client.changes.CommentInfo content , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.changes.CommentInfo > cb ) { com.google.gerrit.client.changes.CommentApi.revision ( id , "drafts" ) . id ( draftId ) . put ( content , cb ) ; }
public static void parentCandidates ( com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.client.projects.ProjectMap > callback ) { new com.google.gerrit.client.rpc.RestApi ( "/projects/" ) . addParameterRaw ( "type" , "PARENT_CANDIDATES" ) . addParameterTrue ( "all" ) . addParameterTrue ( "d" ) . get ( com.google.gerrit.client.rpc.NativeMap.copyKeysIntoChildren ( callback ) ) ; }
com.google.gerrit.server.change.ReviewerResource create ( com.google.gerrit.server.change.ChangeResource change , com.google.gerrit.reviewdb.client.Account.Id id ) ;
public com.google.gerrit.server.IdentifiedUser create ( com.google.gerrit.reviewdb.client.Account.Id id ) { return create ( ( ( java.net.SocketAddress ) ( null ) ) , id ) ; }
public static com.google.gerrit.client.rpc.RestApi revision ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , java.lang.String revision ) { return com.google.gerrit.client.changes.ChangeApi.change ( project , id ) . view ( "revisions" ) . id ( revision ) ; }
protected java.io.Writer startRenderText ( javax.servlet.http.HttpServletRequest req , javax.servlet.http.HttpServletResponse res , java.lang.String contentType ) throws java.io.IOException { setApiHeaders ( req , res , contentType ) ; return com.google.gitiles.BaseServlet.newWriter ( req , res ) ; }
public final native void scrollToY ( double y ) ;
public synchronized int getStatus ( ) { return status ; }
private static int nextFunction ( ) { return ++ ( com.google.gwtjsonrpc.client.CallbackHandle.callbackId ) ; }
public static com.google.gerrit.client.changes.QueryScreen forQuery ( java.lang.String query ) { return com.google.gerrit.client.changes.QueryScreen.forQuery ( query , 0 ) ; }
public void insert ( com.google.gerrit.server.query.change.ChangeData cd ) throws java.io.IOException { }
com.google.gerrit.server.mail.MergeFailSender create ( com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.reviewdb.client.Change.Id id ) ;
void removeAll ( ) { if ( ! ( skipBars.isEmpty ( ) ) ) { for ( com.google.gerrit.client.diff.SkipBar bar : skipBars ) { bar.expandSideAll ( ) ; } line0 = null ; } }
public void testCreateDatabaseHandle ( ) throws java.lang.Exception { org.junit.Assert.assertNotNull ( db ) ; }
static void reject ( final org.eclipse.jgit.transport.ReceiveCommand cmd , final java.lang.String why ) { cmd.setResult ( ReceiveCommand.Result.REJECTED_OTHER_REASON , why ) ; }
void onShow ( ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( project , changeId ) ) ; }
public boolean dryRun ( com.google.gerrit.server.git.CodeReviewCommit mergeTip , com.google.gerrit.server.git.CodeReviewCommit toMerge ) throws com.google.gerrit.server.git.MergeException { return args.mergeUtil.canMerge ( args.mergeSorter , args.repo , mergeTip , toMerge ) ; }
public boolean canSeeMember ( com.google.gerrit.reviewdb.client.Account.Id id ) { if ( ( user.isIdentifiedUser ( ) ) && ( user.getAccountId ( ) . equals ( id ) ) ) { return true ; } return canSeeMembers ( ) ; }
public com.google.gerrit.server.IdentifiedUser getUser ( ) { return ( ( com.google.gerrit.server.IdentifiedUser ) ( ctl.getUser ( ) ) ) ; }
protected < T > T buildJson ( com.google.gson.reflect.TypeToken < T > typeOfT , java.lang.String path ) throws java.lang.Exception { return buildJson ( typeOfT , path , null ) ; }
public void tearDown ( ) throws java.lang.Exception { if ( ( openSchemas ) != null ) { for ( com.google.gwtorm.data.PhoneBookDb schema : openSchemas ) { schema.close ( ) ; } openSchemas = null ; } }
public void setValue ( final short v ) { value = v ; }
public void onSuccess ( com.google.gerrit.client.changes.ChangeInfo info ) { info.init ( ) ; loadConfigInfo ( info , base ) ; }
public com.google.gwtorm.client.SchemaFactory < com.google.gerrit.reviewdb.ReviewDb > get ( ) { return ds.get ( ) ; }
protected void configure ( ) { bind ( com.google.gerrit.server.git.GitRepositoryManager.class ) . to ( com.google.gerrit.server.git.LocalDiskRepositoryManager.class ) ; listener ( ) . to ( com.google.gerrit.server.git.LocalDiskRepositoryManager.class ) ; listener ( ) . to ( com.google.gerrit.server.git.LocalDiskRepositoryManager.Lifecycle.class ) ; }
public void applyFailed ( ) { com.google.gwt.user.client.rpc.AsyncCallback < T > cb = delegate ; if ( cb != null ) { delegate = null ; result = null ; cb.onFailure ( failedThrowable ) ; } }
private void loadDefaults ( ) { approvals = com.google.common.collect.ImmutableListMultimap.of ( ) ; reviewers = com.google.common.collect.ImmutableSetMultimap.of ( ) ; submitRecords = com.google.common.collect.ImmutableList.of ( ) ; changeMessages = com.google.common.collect.ImmutableListMultimap.of ( ) ; }
java.lang.Class < ? > create ( com.google.gwtorm.server.GeneratedClassLoader loader , com.google.gwtorm.schema.RelationModel rm ) throws com.google.gwtorm.client.OrmException ;
private void initSite ( ) throws java.lang.Exception { com.google.gerrit.acceptance.pgm.RebuildNoteDbIT.runGerrit ( "init" , "-d" , sitePath , "--batch" , "--no-auto-start" , "--skip-plugins" , "--show-stack-trace" ) ; }
public java.util.Map < java.lang.String , java.lang.String > getMergeResults ( ) { return mergeResults ; }
public int getCost ( ) { return 1 ; }
private void deletePatchSet ( java.lang.String changeId , int ps ) throws java.lang.Exception { gApi.changes ( ) . id ( changeId ) . revision ( ps ) . delete ( ) ; }
public boolean apply ( com.google.gerrit.server.git.ReceiveCommits.CreateRequest input ) { return ( input.getChange ( ) ) != null ; }
private static final native void init ( java.lang.String d , java.lang.String e , java.lang.String r , java.lang.String o ) ;
private com.google.gerrit.client.change.RelatedChangesTab getTab ( ) { if ( ( cherryPicksTab ) == null ) { cherryPicksTab = createTab ( Resources.C.cherryPicks ( ) , Resources.C.cherryPicksTooltip ( ) ) ; cherryPicksTab.setShowBranches ( true ) ; } return cherryPicksTab ; }
public void setUp ( ) throws java.lang.Exception { local = new com.google.gerrit.server.git.ProjectConfig ( localKey ) ; local.createInMemory ( ) ; util.add ( local ) ; }
public void stop ( ) { if ( ( queue ) != null ) { queue.shutdownNow ( ) ; queue = null ; } }
public void onHeadUpdated ( com.google.gerrit.extensions.events.HeadUpdatedListener.Event event ) { updateHead ( new com.google.gerrit.reviewdb.client.Project.NameKey ( event.getProjectName ( ) ) , event.getNewHeadName ( ) ) ; }
public static java.lang.String getToken ( final javax.servlet.http.HttpServletRequest req ) { java.lang.String token = req.getPathInfo ( ) ; if ( com.google.common.base.Strings.isNullOrEmpty ( token ) ) { return com.google.gerrit.httpd.LoginUrlToken.DEFAULT_TOKEN ; } return com.google.common.base.CharMatcher.is ( '/' ) . trimLeadingFrom ( token ) ; }
private com.google.gerrit.server.git.CodeReviewCommit parse ( org.eclipse.jgit.revwalk.RevWalk rw , org.eclipse.jgit.lib.ObjectId id ) throws java.io.IOException , org.eclipse.jgit.errors.IncorrectObjectTypeException , org.eclipse.jgit.errors.MissingObjectException { return ( ( com.google.gerrit.server.git.CodeReviewCommit ) ( rw.parseCommit ( id ) ) ) ; }
protected void onLoad ( ) { super . onLoad ( ) ; if ( useLoadPrev ) { loadPrev ( ) ; } else { loadNext ( ) ; } }
private com.google.gerrit.reviewdb.server.ReviewDb db ( ) { if ( ( db ) != null ) { return db.get ( ) ; } else if ( ( cd ) != null ) { return cd.db ( ) ; } else { return null ; } }
private void initDownloadAction ( com.google.gerrit.client.changes.ChangeInfo info , java.lang.String revision ) { downloadAction = new com.google.gerrit.client.change.DownloadAction ( info , revision , style , headerLine , download ) ; }
protected java.lang.String prettify ( java.lang.String html , java.lang.String type ) { return prettyPrintOne ( html , type , settings ) ; }
public static com.google.gerrit.lucene.LuceneIndexModule singleVersionAllLatest ( int threads ) { return new com.google.gerrit.lucene.LuceneIndexModule ( com.google.common.collect.ImmutableMap.< java.lang.String , java.lang.Integer > of ( ) , threads , false ) ; }
public void put ( final com.google.gerrit.server.patch.DiffCacheKey k , final com.google.gerrit.server.patch.DiffCacheContent c ) { self.put ( k , c ) ; }
public void onSuccess ( com.google.gerrit.client.changes.ChangeInfo info ) { info.init ( ) ; loadConfigInfo ( info , base ) ; }
private boolean isRelevantRef ( com.google.gerrit.server.events.RefUpdatedEvent event ) { return ! ( isNewRef ( event ) ) ; }
public boolean required ( ) { return false ; }
public com.google.gwtexpui.safehtml.client.SafeHtml linkify ( ) { return replaceAll ( ( "(https?://" + ( ( ( ( ( "[a-zA-Z0-9$_.+!*',%;:@&=?#/-]{2,}" + "([(]" ) + "[a-zA-Z0-9$_.+!*',%;:@&=?#/-]*" ) + "[)])*" ) + "[a-zA-Z0-9$_.+!*',%;:@&=?#/-]*" ) + ")" ) ) , "<a href=\"$1\">$1</a>" ) ; }
public void setPreferredEmail ( final java.lang.String addr ) { if ( ( addr != null ) && ( addr.contains ( "@" ) ) ) { sshUserName = addr.substring ( 0 , addr.indexOf ( '@' ) ) . toLowerCase ( ) ; } else { sshUserName = null ; } preferredEmail = addr ; }
private void addComment ( com.google.gerrit.acceptance.PushOneCommit.Result r , java.lang.String message ) throws java.lang.Exception { addComment ( r , message , false , false ) ; }
public void testReplaceSortKeyPredicate_NoSortKey ( ) throws java.lang.Exception { com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > p = parse ( "foo:a bar:b OR (foo:b bar:a)" ) ; org.junit.Assert.assertSame ( p , com.google.gerrit.server.index.IndexedChangeQuery.replaceSortKeyPredicates ( p , "1234" ) ) ; }
java.lang.String getBaseUrl ( ) { return baseUrl ; }
public java.lang.String getChangeId ( ) { return changeId ; }
private void saveProjectConfig ( com.google.gerrit.server.git.ProjectConfig cfg ) throws java.lang.Exception { try ( com.google.gerrit.server.git.MetaDataUpdate md = metaDataUpdateFactory.create ( project ) ) { cfg.commit ( md ) ; } }
public void commentOnReviewableChangeByOwnerCcingSelfNotifyNone ( ) throws java.lang.Exception { com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableChange ( com.google.gerrit.server.account.WatchConfig.NotifyType.ALL_COMMENTS ) ; setEmailStrategy ( sc.owner , com.google.gerrit.extensions.client.GeneralPreferencesInfo.EmailStrategy.CC_ON_OWN_COMMENTS ) ; review ( sc.owner , sc.changeId , com.google.gerrit.extensions.client.GeneralPreferencesInfo.EmailStrategy.ENABLED , com.google.gerrit.extensions.api.changes.NotifyHandling.NONE ) ; assertThat ( sender ) . notSent ( ) ; }
public void onSuccess ( ) { com.google.gerrit.client.Gerrit.display ( token , ( edit ? new com.google.gerrit.client.editor.EditScreen ( id , line ) : new com.google.gerrit.client.diff.SideBySide ( baseId , id.getParentKey ( ) , id.get ( ) , side , line ) ) ) ; }
public void message ( java.lang.String message ) { java.lang.System.err.println ( message ) ; java.lang.System.err.flush ( ) ; }
final native void setMessage ( java.lang.String m ) ;
public void setLinkName ( final java.lang.String name ) { this . name = name ; }
void setDisableSshd ( @ java.lang.SuppressWarnings ( value = "unused" ) boolean arg ) { sshd = false ; }
public com.google.gerrit.util.http.testutil.FakeHttpServletRequest setPathInfo ( java.lang.String path ) { this . path = path ; return this ; }
public void evict ( final java.lang.String email ) { self.remove ( email ) ; }
public void onSuccess ( com.google.gwt.core.client.JavaScriptObject result ) { if ( screen.isCurrentView ( ) ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( screen.getProject ( ) , changeId ) ) ; } }
public default void postRun ( ) throws java.lang.Exception { }
private java.util.Optional < java.lang.String > getUserName ( com.google.gerrit.reviewdb.client.Account.Id accountId ) { return accountCache.get ( accountId ) . map ( AccountState :: getUserName ) . orElse ( java.util.Optional.empty ( ) ) ; }
private void initChangeRepo ( ) throws java.io.IOException { if ( ( changeRepo ) == null ) { changeRepo = openRepo ( projectName , true ) ; } }
private static int find ( java.util.List < java.lang.String > list , java.lang.String p ) { int r = java.util.Collections.binarySearch ( list , p ) ; return r < 0 ? - ( r + 1 ) : r ; }
public int run ( ) throws java.lang.Exception { final com.google.gerrit.server.GerritServer gs = com.google.gerrit.server.GerritServer.getInstance ( ) ; gs.getSchemaFactory ( ) . open ( ) . close ( ) ; java.lang.System.out.println ( "Gerrit2 schema initialized" ) ; return 0 ; }
private java.util.List < com.google.gerrit.reviewdb.client.ChangeMessage > buildAllMessages ( ) { return com.google.common.collect.Lists.reverse ( allChangeMessages ) ; }
public void onKeyPress ( final com.google.gwt.event.dom.client.KeyPressEvent event ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( revision.getParentKey ( ) , revision.getId ( ) ) ) ; }
private boolean can ( com.google.gerrit.server.permissions.LabelPermission perm ) { return ! ( label ( perm.permissionName ( ) ) . isEmpty ( ) ) ; }
public com.google.gerrit.server.git.MultiProgressMonitor.Task beginSubTask ( final java.lang.String subTask , final int subTaskWork ) { com.google.gerrit.server.git.MultiProgressMonitor.Task task = new com.google.gerrit.server.git.MultiProgressMonitor.Task ( subTask , subTaskWork ) ; tasks.add ( task ) ; return task ; }
public java.util.Set < java.lang.String > getMyOrganisationsLogins ( ) throws java.io.IOException { if ( isLoggedIn ( ) ) { return getHub ( ) . getMyOrganizations ( ) . keySet ( ) ; } return java.util.Collections.emptySet ( ) ; }
com.google.gerrit.server.query.change.ChangeData create ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.reviewdb.client.Change.Id id ) ;
private static void assertChildren ( java.lang.String o , com.google.gerrit.server.query.Predicate < java.lang.String > p , final java.util.List < com.google.gerrit.server.query.Predicate < java.lang.String > > l ) { org.junit.Assert.assertEquals ( ( o + " did not affect child" ) , l , p.getChildren ( ) ) ; }
public com.google.common.util.concurrent.CheckedFuture < ? , java.io.IOException > deleteAsync ( com.google.gerrit.reviewdb.client.Change.Id id ) { return ( executor ) != null ? submit ( new com.google.gerrit.server.index.ChangeIndexer.Task ( id , true ) ) : com.google.common.util.concurrent.Futures.< java.lang.Object , java.io.IOException > immediateCheckedFuture ( null ) ; }
public com.google.gerrit.server.project.ChangeControl controlFor ( com.google.gerrit.reviewdb.client.Change change ) throws com.google.gwtorm.server.OrmException { return changeControlFactory.create ( controlForRef ( change.getDest ( ) ) , change.getProject ( ) , change.getId ( ) ) ; }
public boolean equals ( java.lang.Object obj ) { if ( ! ( obj instanceof com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler.IndexGroupTask ) ) { return false ; } com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler.IndexGroupTask other = ( ( com.ericsson.gerrit.plugins.highavailability.index.IndexEventHandler.IndexGroupTask ) ( obj ) ) ; return groupUUID.equals ( other.groupUUID ) ; }
public void removeProjectEvents ( java.lang.String project ) throws java.sql.SQLException { execute ( java.lang.String.format ( "DELETE FROM %s WHERE project = '%s'" , com.ericsson.gerrit.plugins.eventslog.sql.SQLTable.TABLE_NAME , project ) ) ; }
private void initCompression ( boolean enableCompression ) { java.util.List < org.apache.sshd.common.NamedFactory < org.apache.sshd.common.compression.Compression > > compressionFactories = new java.util.ArrayList < > ( ) ; compressionFactories.add ( BuiltinCompressions.none ) ; if ( enableCompression ) { compressionFactories.add ( BuiltinCompressions.zlib ) ; } setCompressionFactories ( compressionFactories ) ; }
public boolean canRebase ( com.google.gerrit.server.change.RevisionResource r ) { return canRebase ( r.getPatchSet ( ) , r.getChange ( ) . getDest ( ) ) ; }
public void createTempDirectory ( ) throws java.lang.Exception { sitePath = com.google.gerrit.testutil.TempFileUtil.createTempDirectory ( ) ; }
public Project.NameKey getProjectName ( ) { return getChange ( ) . getProject ( ) ; }
public java.util.List < com.google.gerrit.reviewdb.client.ChangeMessage > messages ( ) throws com.google.gwtorm.server.OrmException { if ( ( messages ) == null ) { messages = cmUtil.byChange ( db , notes ( ) ) ; } return messages ; }
private void addLabelDelta ( java.lang.String name , short value ) { labelDelta.add ( com.google.gerrit.server.util.LabelVote.create ( name , value ) . format ( ) ) ; }
public static void all ( com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.rpc.NativeList < com.google.gerrit.client.dashboards.DashboardList > > callback ) { com.google.gerrit.client.dashboards.DashboardList.base ( project ) . addParameterTrue ( "inherited" ) . get ( callback ) ; }
private java.lang.String getUsername ( ) { return gerritConfig.getString ( pluginName , null , com.googlesource.gerrit.plugins.hooks.jira.JiraItsFacade.GERRIT_CONFIG_USERNAME ) ; }
private com.google.gerrit.server.git.MergeTip cherryPickUnbornRoot ( com.google.gerrit.server.git.CodeReviewCommit n ) { com.google.gerrit.server.git.MergeTip mergeTip = new com.google.gerrit.server.git.MergeTip ( n , com.google.common.collect.Lists.newArrayList ( n ) ) ; n.setStatusCode ( CommitMergeStatus.CLEAN_MERGE ) ; return mergeTip ; }
private void setColumnHeader ( final int col , final java.lang.String text ) { table.setText ( 0 , col , text ) ; setStyleName ( 0 , col , "gerrit-ChangeTable-ColumnHeader" ) ; }
private void blockForcePush ( ) throws java.lang.Exception { com.google.gerrit.server.git.ProjectConfig cfg = projectCache.checkedGet ( project ) . getConfig ( ) ; com.google.gerrit.server.project.Util.block ( cfg , Permission.PUSH , com.google.gerrit.server.group.SystemGroupBackend.ANONYMOUS_USERS , "refs/heads/*" ) . setForce ( true ) ; saveProjectConfig ( project , cfg ) ; }
public void onSuccess ( com.google.gwt.core.client.JsArrayString result ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( project , psId.getParentKey ( ) , java.lang.String.valueOf ( psId.get ( ) ) ) ) ; }
public void movePointerTo ( final com.google.gerrit.reviewdb.client.Patch.Key k ) { if ( ( myTable ) != null ) { myTable.movePointerTo ( k ) ; } }
public void testToHeaderString_NameEmail5 ( ) { org.junit.Assert.assertEquals ( "\"A \\\" C\" <a@a>" , com.google.gerrit.server.mail.AddressTest.format ( "A \" C" , "a@a" ) ) ; }
private void loadConfig ( java.lang.String configFilename ) throws java.lang.Exception { pushConfig ( configFilename ) ; configLoader = new com.googlesource.gerrit.plugins.automerger.ConfigLoader ( gApi , allProjectsName , "automerger" , canonicalWebUrl , cfgFactory , user ) ; }
public java.lang.String getRefName ( ) { return com.google.gerrit.reviewdb.client.RefNames.changeMetaRef ( getChangeId ( ) ) ; }
public static boolean toBoolean ( java.lang.Boolean b ) { if ( b == null ) { return false ; } return b.booleanValue ( ) ; }
public Project.NameKey getProjectNameKey ( ) { return new com.google.gerrit.reviewdb.client.Project.NameKey ( change.get ( ) . project ) ; }
private com.google.gerrit.common.data.PermissionRange getRange ( java.lang.String permission ) { return getRefControl ( ) . getRange ( permission , isOwner ( ) ) ; }
private java.lang.String getUrl ( ) { return gerritConfig.getString ( pluginName , null , com.googlesource.gerrit.plugins.its.jira.JiraItsFacade.GERRIT_CONFIG_URL ) ; }
void onAddGroupByClick ( com.google.gwt.event.dom.client.ClickEvent event ) { addGroup ( ) ; }
public void stop ( ) { if ( ( graphiteReporter ) != null ) { graphiteReporter.stop ( ) ; } }
public void onKeyPress ( final com.google.gwt.event.dom.client.KeyPressEvent event ) { gotoSibling ( 1 ) ; }
public final native java.lang.String ref ( ) ;
com.google.gerrit.server.git.GitModules create ( com.google.gerrit.reviewdb.client.Branch.NameKey project , com.google.gerrit.server.git.MergeOpRepoManager m ) ;
com.google.gerrit.reviewdb.client.PatchSetApproval getSubmitter ( com.google.gerrit.server.git.CodeReviewCommit c ) { return approvalsUtil.getSubmitter ( db.get ( ) , c.notes ( ) , c.patchsetId ) ; }
public void deleteFile ( java.lang.String filePath ) throws com.google.gerrit.extensions.restapi.RestApiException { try { changeEditDeleteContent.apply ( changeResource , filePath ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot delete file of change edit" , e ) ; } }
public void testPushForMaster ( ) throws com.google.gwtorm.server.OrmException , java.io.IOException , org.eclipse.jgit.api.errors.GitAPIException { com.google.gerrit.acceptance.git.PushOneCommit.Result r = pushTo ( "refs/for/master" ) ; r.assertOkStatus ( ) ; r.assertChange ( Change.Status.NEW , null ) ; }
com.google.gson.JsonElement call ( java.lang.String method , java.lang.String token ) throws com.googlesource.gerrit.plugins.its.phabricator.conduit.ConduitException { return call ( method , new java.util.HashMap < java.lang.String , java.lang.Object > ( ) , token ) ; }
public void deleteWatchedProjects ( java.util.List < com.google.gerrit.extensions.client.ProjectWatchInfo > in ) throws com.google.gerrit.extensions.restapi.RestApiException { try { deleteWatchedProjects.apply ( account , in ) ; } catch ( com.google.gwtorm.server.OrmException | java.io.IOException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot delete watched projects" , e ) ; } }
private static java.lang.String getGerritUrl ( java.lang.String canonicalWebUrl ) { if ( canonicalWebUrl != null ) { return com.google.common.base.CharMatcher.is ( '/' ) . trimTrailingFrom ( canonicalWebUrl ) ; } return "http://" + ( com.google.gerrit.server.git.validators.CommitValidators.getGerritHost ( canonicalWebUrl ) ) ; }
public java.lang.Object getUserKey ( ) { com.google.gerrit.server.CurrentUser user = userProvider.get ( ) ; if ( user instanceof com.google.gerrit.server.IdentifiedUser ) { return ( ( com.google.gerrit.server.IdentifiedUser ) ( user ) ) . getAccountId ( ) ; } return anonymousCowardName ; }
public void onSuccess ( java.lang.String result ) { com.google.gerrit.client.change.EditFileAction edit = new com.google.gerrit.client.change.EditFileAction ( id , result , path , style , editButton , replyButton ) ; edit.onEdit ( ) ; }
public void tearDown ( ) throws java.lang.Exception { walk.release ( ) ; }
public com.google.gerrit.reviewdb.client.Change update ( com.google.gerrit.reviewdb.client.Change change ) { change.setTopic ( com.google.common.base.Strings.emptyToNull ( newTopicName ) ) ; return change ; }
public void createProjectFooWithGitSuffix ( ) throws java.lang.Exception { java.lang.String name = name ( "foo" ) ; com.google.common.truth.Truth.assertThat ( name ) . isEqualTo ( gApi.projects ( ) . create ( ( name + ".git" ) ) . get ( ) . name ) ; }
public void run ( ) { expandText ( ) ; }
public void add ( com.google.inject.Injector ... injectors ) { for ( com.google.inject.Injector i : injectors ) { add ( i ) ; } }
private static com.google.gerrit.server.query.change.RegexFilePredicate predicate ( java.lang.String pattern ) { return new com.google.gerrit.server.query.change.RegexFilePredicate ( pattern ) ; }
public java.lang.String getParameter ( int i ) { return ( chopped.length ) > i ? chopped [ i ] : "" ; }
void operation ( java.lang.Runnable apply ) { cmA.operation ( ( ) -> cmB.operation ( apply :: run ) ) ; }
public java.lang.String getName ( ) { return getAccount ( ) . getName ( ) ; }
public static com.google.gerrit.common.data.SubmitTypeRecord defaultTypeError ( ) { return com.google.gerrit.common.data.SubmitTypeRecord.error ( com.google.gerrit.server.project.SubmitRuleEvaluator.DEFAULT_MSG ) ; }
public void onSuccess ( ) { com.google.gerrit.client.Gerrit.display ( token , new com.google.gerrit.client.editor.EditScreen ( project , id , line ) ) ; }
public final void addLineClass ( int line , net.codemirror.lib.CodeMirror.LineClassWhere where , java.lang.String className ) { addLineClassNative ( line , where.value ( ) , className ) ; }
protected void onUnload ( ) { super . onUnload ( ) ; com.google.gerrit.client.changes.PublishCommentScreen.lastState = ( saveStateOnUnload ) ? new com.google.gerrit.client.changes.PublishCommentScreen.SavedState ( this ) : null ; }
public java.util.Optional < com.google.gerrit.reviewdb.client.Account.Id > load ( java.lang.String username ) throws java.lang.Exception { return externalIds.get ( ExternalId.Key.create ( com.google.gerrit.server.account.externalids.ExternalId.SCHEME_GERRIT , username ) ) . map ( ExternalId :: accountId ) ; }
public void onlyDateNoTime ( ) throws java.lang.Exception { query = queryMaker.formQueryFromRequestParameters ( com.google.common.collect.ImmutableMap.of ( com.ericsson.gerrit.plugins.eventslog.sql.QueryMakerTest.T1 , "2013-10-10" , com.ericsson.gerrit.plugins.eventslog.sql.QueryMakerTest.T2 , "2014-10-10" ) ) ; com.google.common.truth.Truth.assertThat ( query ) . isNotEqualTo ( defaultQuery ) ; }
private static java.util.Set < java.lang.String > getLabelNames ( com.google.gerrit.client.info.ChangeInfo change ) { return new java.util.TreeSet ( change.labels ( ) ) ; }
public com.google.gerrit.extensions.restapi.RestModifyView < com.google.gerrit.server.project.ProjectResource , ? > create ( com.google.gerrit.server.project.ProjectResource parent , com.google.gerrit.extensions.restapi.IdString id ) throws com.google.gerrit.extensions.restapi.RestApiException { if ( id.toString ( ) . equals ( "default" ) ) { return createDefault.get ( ) ; } throw new com.google.gerrit.extensions.restapi.ResourceNotFoundException ( id ) ; }
public java.lang.String getManifestProject ( ) throws org.eclipse.jgit.errors.ConfigInvalidException { java.lang.String manifestProject = getConfig ( ) . getString ( "global" , null , "manifestProject" ) ; if ( manifestProject == null ) { throw new org.eclipse.jgit.errors.ConfigInvalidException ( "manifestProject not specified." ) ; } return manifestProject ; }
public com.google.gerrit.client.reviewdb.Account run ( com.google.gerrit.client.reviewdb.ReviewDb db ) throws com.google.gwtorm.client.OrmException { return db.accounts ( ) . get ( com.google.gerrit.client.rpc.RpcUtil.getAccountId ( ) ) ; }
public void setAccessKey ( char key ) { if ( ( focusy ) != null ) { focusy.setAccessKey ( key ) ; } }
protected void createFileCommentEditorOnSideB ( ) { createCommentEditor ( ( ( R_HEAD ) + 1 ) , com.google.gerrit.client.patches.SideBySideTable.B , com.google.gerrit.client.patches.R_HEAD , com.google.gerrit.client.patches.FILE_SIDE_B ) ; }
public boolean updateChange ( com.google.gerrit.server.git.BatchUpdate.ChangeContext ctx ) { ctx.getUpdate ( psId ) . setTopic ( magicBranch.topic ) ; return true ; }
public java.util.Optional < com.google.gerrit.server.account.AccountState > get ( com.google.gerrit.reviewdb.client.Account.Id accountId ) { try { return byId.get ( accountId ) ; } catch ( java.util.concurrent.ExecutionException e ) { com.google.gerrit.server.account.AccountCacheImpl.log.warn ( ( "Cannot load AccountState for ID " + accountId ) , e ) ; return null ; } }
public static void display ( final com.google.gerrit.client.Screen view ) { if ( ( com.google.gerrit.client.Gerrit.currentScreen ) != null ) { com.google.gerrit.client.Gerrit.body.remove ( com.google.gerrit.client.Gerrit.currentScreen ) ; } com.google.gerrit.client.Gerrit.currentScreen = view ; com.google.gerrit.client.Gerrit.body.add ( com.google.gerrit.client.Gerrit.currentScreen ) ; }
public com.googlecode.prolog_cafe.lang.NumberTerm toFloat ( ) { return new com.googlecode.prolog_cafe.lang.DoubleTerm ( this . val ) ; }
public com.google.gerrit.server.mail.receive.MailMessage expectedMailMessage ( ) { java.lang.System.out.println ( " test" ) ; com.google.gerrit.server.mail.receive.MailMessage.Builder expect = com.google.gerrit.server.mail.receive.MailMessage.builder ( ) ; expect.id ( "<CAM7sg=3meaAVUxW3KXeJEVs8sv_ADw1BnvpcHHiYVR2TQQi__w@mail.gmail.com>" ) . from ( new com.google.gerrit.server.mail.Address ( "Patrick Hiesel" , "hiesel@google.com" ) ) . addTo ( new com.google.gerrit.server.mail.Address ( "Patrick Hiesel" , "hiesel@google.com" ) ) . textContent ( "Contains unwanted attachment" ) . htmlContent ( "<div dir=\"ltr\">Contains unwanted attachment</div>" ) . subject ( "Test Subject" ) . addAdditionalHeader ( "MIME-Version: 1.0" ) . dateReceived ( new org.joda.time.DateTime ( 2016 , 10 , 25 , 9 , 11 , 35 , 0 , org.joda.time.DateTimeZone.UTC ) ) ; return expect.build ( ) ; }
public void evict ( java.lang.String username ) { if ( username != null ) { self.remove ( username ) ; } }
private com.google.gerrit.extensions.common.ChangeInfo getWithLabels ( com.google.gerrit.acceptance.PushOneCommit.Result r ) throws java.lang.Exception { return getWithLabels ( r.getChangeId ( ) ) ; }
public void setUp ( ) { storeMock = easyMock.createMock ( com.ericsson.gerrit.plugins.eventslog.EventStore.class ) ; }
protected abstract void run ( ) throws com.google.gerrit.server.ssh.AbstractCommand.Failure , java.io.IOException ;
public void setChange ( final com.google.gerrit.reviewdb.client.Change change ) { this . change = change ; this . currentPatchSetId = change.currentPatchSetId ( ) ; }
public int compare ( @ javax.annotation.Nullable org.eclipse.jgit.lib.Ref left , @ javax.annotation.Nullable org.eclipse.jgit.lib.Ref right ) { int l = ( isHead ( left ) ) ? 1 : 0 ; int r = ( isHead ( right ) ) ? 1 : 0 ; return r - l ; }
public void putApproval ( java.lang.String label , short value ) { putApprovalFor ( getAccountId ( ) , label , value ) ; }
private java.lang.String url ( com.google.gerrit.client.changes.ChangeInfo.RevisionInfo r ) { return com.google.gerrit.common.PageLinks.toChange ( changeId , r.id ( ) ) ; }
public void index ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { index.apply ( account , new com.google.gerrit.server.account.Index.Input ( ) ) ; } catch ( java.io.IOException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot index account" , e ) ; } }
public void testToString ( ) { org.junit.Assert.assertEquals ( "-author:bob" , com.google.gerrit.server.query.Predicate.not ( f ( "author" , "bob" ) ) . toString ( ) ) ; }
public static void deleteEdit ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwt.core.client.JavaScriptObject > cb ) { com.google.gerrit.client.changes.ChangeApi.edit ( project , id ) . delete ( cb ) ; }
protected void onUnload ( ) { super . onUnload ( ) ; messageClick.removeHandler ( ) ; messageClick = null ; }
protected java.nio.file.attribute.FileTime getLastModifiedTime ( java.nio.file.Path p ) throws java.io.IOException { return java.nio.file.Files.getLastModifiedTime ( p ) ; }
public static java.lang.String getGerritJarPluginName ( java.io.File srcFile ) throws java.io.IOException { try ( java.util.jar.JarFile jarFile = new java.util.jar.JarFile ( srcFile ) ) { return jarFile.getManifest ( ) . getMainAttributes ( ) . getValue ( "Gerrit-PluginName" ) ; } }
public void run ( ) throws java.lang.Exception { validate ( ) ; setAccount ( ) ; }
public abstract java.lang.String readString ( java.lang.String def , java.lang.String fmt , java.lang.Object ... args ) ;
protected void configureCommands ( ) { command ( com.googlesource.gerrit.plugins.replication.StartCommand.class ) ; }
public V apply ( com.google.gerrit.ehcache.SerializableProtobuf < V > val ) { return val != null ? val.toObject ( valueCodec , valueProvider ) : null ; }
java.lang.String getRemoteEmail ( javax.servlet.http.HttpServletRequest req ) { if ( ( emailHeader ) != null ) { return com.google.common.base.Strings.emptyToNull ( req.getHeader ( emailHeader ) ) ; } return null ; }
void apply ( com.google.gerrit.server.notedb.ChangeUpdate update ) throws com.google.gwtorm.server.OrmException { checkUpdate ( update ) ; update.setChangeMessage ( message.getMessage ( ) ) ; setTopic ( update ) ; }
public void emptyExceptSubject ( ) throws java.lang.Exception { com.google.gerrit.server.notedb.ChangeUpdate update = newUpdate ( newChange ( ) , changeOwner ) ; update.setSubjectForCommit ( "Create change" ) ; com.google.common.truth.Truth.assertThat ( update.commit ( ) ) . isNotNull ( ) ; }
public static java.lang.String toAccountDashboard ( final com.google.gerrit.client.reviewdb.Account.Id acct ) { return "dashboard," + ( acct.toString ( ) ) ; }
public com.google.gerrit.server.patch.PatchList createEntry ( final com.google.gerrit.server.patch.PatchListKey key ) throws java.lang.Exception { final org.eclipse.jgit.lib.Repository repo = repoManager.openRepository ( key.projectKey ) ; try { return readPatchList ( key , repo ) ; } finally { repo.close ( ) ; } }
protected final com.google.gerrit.pgm.CmdLineParser newCmdLineParser ( ) { final com.google.gerrit.pgm.CmdLineParser parser = super . newCmdLineParser ( ) ; for ( com.google.gerrit.server.ssh.commands.CmdOption c : optionList ) { parser.addOption ( c , c ) ; } return parser ; }
void insert ( org.apache.lucene.document.Document doc ) throws java.io.IOException { writer.addDocument ( doc ) ; }
void onRevert ( com.google.gwt.event.dom.client.ClickEvent e ) { com.google.gerrit.client.change.RevertAction.call ( revert , changeId , revision , subject ) ; }
public void onDoubleClick ( com.google.gwt.event.dom.client.DoubleClickEvent arg0 ) { setEdit ( true ) ; }
public Project.NameKey apply ( com.google.gerrit.extensions.common.ProjectInfo in ) { return new com.google.gerrit.reviewdb.client.Project.NameKey ( in.name ) ; }
public static com.google.gerrit.client.rpc.RestApi detail ( int id ) { return com.google.gerrit.client.changes.ChangeApi.call ( id , "detail" ) ; }
public void onSuccess ( com.google.gwt.core.client.JavaScriptObject result ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( project , id ) ) ; }
void evict ( com.google.gerrit.reviewdb.client.AccountGroup.UUID groupUuid ) ;
public boolean match ( com.google.gerrit.server.query.change.ChangeData cd ) throws com.google.gwtorm.server.OrmException { return ( cd.change ( ) . getLastUpdatedOn ( ) . getTime ( ) ) >= ( cut.getTime ( ) ) ; }
protected void onLoad ( ) { super . onLoad ( ) ; }
boolean canSubmit ( boolean isChangeOwner ) { if ( RefNames.REFS_CONFIG.equals ( refName ) ) { return projectControl.isOwner ( ) ; } return canPerform ( Permission.SUBMIT , isChangeOwner ) ; }
private java.lang.String encode ( java.lang.String segment ) { if ( type ( ) . urlEncode ( ) ) { return com.google.gwt.http.client.URL.encodeQueryString ( type ( ) . replacePathSeparator ( segment ) ) ; } return segment ; }
public void listOneIncludeMember ( ) throws java.lang.Exception { group ( "gx" , "Administrators" ) ; group ( "gy" , "Administrators" ) ; PUT ( "/groups/Administrators/groups/gx" ) ; PUT ( "/groups/Administrators/groups/gy" ) ; com.google.common.truth.Truth.assertThat ( GET_ONE ( "/groups/Administrators/groups/gx" ) . name ) . isEqualTo ( "gx" ) ; }
void setLineNumber ( com.google.gerrit.client.diff.DisplaySide side , int cmLine , int line ) { setLineNumber ( side , cmLine , line , UnifiedTable.style.unifiedLineNumber ( ) ) ; }
public void merge ( com.google.gerrit.reviewdb.client.Branch.NameKey branch ) { if ( start ( branch ) ) { mergeImpl ( branch ) ; } }
public void setUp ( ) throws java.lang.Exception { synchronized ( java.util.TimeZone.class ) { systemTimeZone = java.util.TimeZone.getDefault ( ) ; java.util.TimeZone.setDefault ( java.util.TimeZone.getTimeZone ( "GMT-5:00" ) ) ; format = new java.text.SimpleDateFormat ( "yyyy-MM-dd HH:mm:ss.SSS Z" ) ; } }
private boolean canUpload ( ) { return ( projectControl.controlForRef ( ( "refs/for/" + ( getRefName ( ) ) ) ) . canPerform ( Permission.PUSH ) ) && ( isProjectStatePermittingWrite ( ) ) ; }
public static java.lang.String refsDraftCommentsPrefix ( com.google.gerrit.reviewdb.client.Account.Id accountId ) { return com.google.gerrit.reviewdb.client.RefNames.buildRefsPrefix ( com.google.gerrit.reviewdb.client.RefNames.REFS_DRAFT_COMMENTS , accountId.get ( ) ) . toString ( ) ; }
public com.google.gerrit.server.mail.CommentSender create ( com.google.gerrit.extensions.api.changes.ReviewInput.NotifyHandling notify , com.google.gerrit.reviewdb.client.Change.Id id ) ;
public void allRefsVisibleWithRefsMetaConfig ( ) throws java.lang.Exception { allow ( Permission.READ , com.google.gerrit.server.group.SystemGroupBackend.REGISTERED_USERS , "refs/*" ) ; allow ( Permission.READ , com.google.gerrit.server.group.SystemGroupBackend.REGISTERED_USERS , "refs/meta/config" ) ; assertRefs ( "HEAD" , "refs/changes/01/1/1" , "refs/changes/02/2/1" , "refs/heads/branch" , "refs/heads/master" , "refs/meta/config" ) ; }
public static void draft ( @ com.google.gerrit.common.Nullable java.lang.String project , com.google.gerrit.reviewdb.client.PatchSet.Id id , java.lang.String draftId , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.changes.CommentInfo > cb ) { com.google.gerrit.client.changes.CommentApi.revision ( project , id , "drafts" ) . id ( draftId ) . get ( cb ) ; }
java.lang.String patchPageTitle ( java.lang.String changeId , java.lang.String path ) ;
private boolean match ( java.lang.String destBranch , java.lang.String refPattern ) { return com.google.gerrit.server.project.RefPatternMatcher.getMatcher ( refPattern ) . match ( destBranch , getCurrentUser ( ) . getUserName ( ) ) ; }
private boolean canSkipRef ( com.google.gerrit.server.config.PluginConfig config , java.lang.String ref ) { return matchCriteria ( config , "skipRef" , ref , true , true ) ; }
public void close ( ) throws java.io.IOException { rw.close ( ) ; repo.close ( ) ; }
public final boolean requireXsrfValid ( ) { if ( isXsrfValid ( ) ) { return true ; } onFailure ( new java.lang.Exception ( com.google.gwtjsonrpc.common.JsonConstants.ERROR_INVALID_XSRF ) ) ; return false ; }
private void display ( final com.google.gerrit.client.projects.ProjectMap result ) { projectsTab.display ( result ) ; if ( firstPopupLoad ) { firstPopupLoad = false ; displayPopup ( ) ; } }
public static java.lang.String refsDraftComments ( com.google.gerrit.reviewdb.client.Account.Id accountId , com.google.gerrit.reviewdb.client.Change.Id changeId ) { java.lang.StringBuilder r = com.google.gerrit.reviewdb.client.RefNames.buildRefsPrefix ( com.google.gerrit.reviewdb.client.RefNames.REFS_DRAFT_COMMENTS , accountId.get ( ) ) ; r.append ( changeId.get ( ) ) ; return r.toString ( ) ; }
public void testParentHashCode ( ) { final java.lang.String str = "foo" ; final com.google.gwtorm.client.StringKeyTestCase.Parent p = new com.google.gwtorm.client.StringKeyTestCase.Parent ( str ) ; org.junit.Assert.assertEquals ( str.hashCode ( ) , p.hashCode ( ) ) ; }
public java.lang.String getBaseGerritUrl ( javax.servlet.http.HttpServletRequest req ) { return ( "http://" + ( com.google.gitiles.TestGitilesUrls.HOST_NAME ) ) + "-review/foo/" ; }
com.google.gwtorm.client.ResultSet < com.google.gerrit.client.reviewdb.ProjectRight > byProject ( com.google.gerrit.client.reviewdb.Project.NameKey name ) throws com.google.gwtorm.client.OrmException ;
private static < T > com.google.common.util.concurrent.CheckedFuture < T , com.google.gwtorm.server.OrmException > emptyFuture ( ) { return com.google.common.util.concurrent.Futures.immediateCheckedFuture ( null ) ; }
public java.lang.String format ( java.lang.String projectName , com.googlesource.gerrit.plugins.xdocs.ConfigSection cfg , java.lang.String raw ) { return ( "<pre>" + ( org.apache.commons.lang.StringEscapeUtils.escapeHtml ( raw ) ) ) + "</pre>" ; }
protected abstract boolean writeChanges ( ) ;
protected < R extends com.google.gerrit.extensions.restapi.RestResource > com.google.gerrit.extensions.restapi.RestApiModule.ModifyViewBinder < R > put ( com.google.inject.TypeLiteral < com.google.gerrit.extensions.restapi.RestView < R > > viewType , java.lang.String name ) { return new com.google.gerrit.extensions.restapi.RestApiModule.ModifyViewBinder ( view ( viewType , com.google.gerrit.extensions.restapi.RestApiModule.PUT , name ) ) ; }
public void repeatedHashtag ( ) throws java.lang.Exception { java.lang.String commitMessage = "#Subject\n\n#Hashtag1\n\n#Hashtag2\n\n#Hashtag1" ; com.google.common.truth.Truth.assertThat ( com.google.gerrit.server.change.HashtagsUtil.extractTags ( commitMessage ) ) . containsExactlyElementsIn ( com.google.common.collect.Sets.newHashSet ( "Subject" , "Hashtag1" , "Hashtag2" ) ) ; }
public void index ( com.google.gerrit.server.query.change.ChangeData cd ) throws java.io.IOException { for ( com.google.gerrit.server.index.Index < ? , com.google.gerrit.server.query.change.ChangeData > i : getWriteIndexes ( ) ) { i.replace ( cd ) ; } fireChangeIndexedEvent ( cd.getId ( ) . get ( ) ) ; }
public void onSuccess ( com.google.gerrit.client.changes.ChangeInfo info ) { info.init ( ) ; loadConfigInfo ( info , base ) ; }
public void emptySoy ( ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( buildBranchesSoyData ( ) ) . isEmpty ( ) ; com.google.common.truth.Truth.assertThat ( buildTagsSoyData ( ) ) . isEmpty ( ) ; }
private void assertBodyEquals ( java.lang.String expected , org.eclipse.jgit.lib.ObjectId commitId ) throws java.lang.Exception { org.eclipse.jgit.revwalk.RevCommit commit = parseCommit ( commitId ) ; com.google.common.truth.Truth.assertThat ( commit.getFullMessage ( ) ) . isEqualTo ( expected ) ; }
static java.net.URI [ ] listenURLs ( final org.eclipse.jgit.lib.Config cfg ) { java.lang.String [ ] urls = cfg.getStringList ( "httpd" , null , "listenurl" ) ; if ( ( urls.length ) == 0 ) { urls = new java.lang.String [ ] { "http://*:8080/" } ; } final java.net.URI [ ] r = new java.net.URI [ urls.length ] ; for ( int i = 0 ; i < ( r.length ) ; i ++ ) { final java.lang.String s = urls [ i ] ; try { r [ i ] = new java.net.URI ( s ) ; } catch ( java.net.URISyntaxException e ) { throw new java.lang.IllegalArgumentException ( ( "Invalid httpd.listenurl " + s ) , e ) ; } } return r ; }
private com.google.gerrit.server.git.strategy.SubmitStrategy createStrategy ( com.google.gerrit.extensions.client.SubmitType submitType ) throws com.google.gerrit.server.git.MergeException , com.google.gerrit.server.project.NoSuchProjectException { return submitStrategyFactory.create ( submitType , db , repo , rw , inserter , canMergeFlag , getAlreadyAccepted ( branchTip ) , destBranch ) ; }
com.google.gerrit.extensions.api.changes.ChangeApi id ( java.lang.String id ) throws com.google.gerrit.extensions.restapi.RestApiException ;
private final native int get ( java.lang.String n , int d ) ;
public void onSuccess ( final com.google.gerrit.client.projects.ProjectMap result ) { projectsTab.display ( result , subname ) ; if ( firstPopupLoad ) { firstPopupLoad = false ; displayPopup ( ) ; } }
protected void preDisplay ( java.lang.Void result ) { initEditor ( content ) ; content = null ; renderLinks ( editFileInfo , diffLinks ) ; editFileInfo = null ; diffLinks = null ; }
public com.google.gerrit.extensions.restapi.RestView < com.google.gerrit.server.change.RevisionResource > list ( ) throws com.google.gerrit.extensions.restapi.AuthException { checkIdentifiedUser ( ) ; return list ; }
public void doChangeRestoredHook ( com.google.gerrit.reviewdb.client.Change change , com.google.gerrit.reviewdb.client.Account account , com.google.gerrit.reviewdb.client.PatchSet patchSet , java.lang.String reason , com.google.gerrit.reviewdb.server.ReviewDb db ) { }
private org.eclipse.jgit.lib.Repository openRepository ( final com.google.gerrit.reviewdb.client.Project.NameKey name ) { try { return repoManager.openRepository ( name ) ; } catch ( java.io.IOException err ) { com.google.gerrit.common.ChangeHookRunner.log.warn ( ( "Cannot open repository " + ( name.get ( ) ) ) , err ) ; return null ; } }
public static java.lang.String messageUUID ( final com.google.gerrit.reviewdb.server.ReviewDb db ) throws com.google.gwtorm.server.OrmException { final byte [ ] raw = new byte [ 8 ] ; com.google.gerrit.server.ChangeUtil.fill ( raw , db ) ; return org.eclipse.jgit.util.Base64.encodeBytes ( raw ) ; }
public org.eclipse.jgit.lib.PersonIdent newIdent ( com.google.gerrit.reviewdb.client.Account author , java.util.Date when , org.eclipse.jgit.lib.PersonIdent serverIdent , java.lang.String anonymousCowardName ) { return new org.eclipse.jgit.lib.PersonIdent ( author.getName ( anonymousCowardName ) , ( ( ( author.getId ( ) . get ( ) ) + "@" ) + ( serverId ) ) , when , serverIdent.getTimeZone ( ) ) ; }
public void mergeByOtherNotifyNone ( ) throws java.lang.Exception { com.google.gerrit.acceptance.server.mail.StagedChange sc = stageChange ( ) ; merge ( sc.changeId , other , com.google.gerrit.extensions.api.changes.NotifyHandling.NONE ) ; assertThat ( sender ) . notSent ( ) ; }
private void blockCreateReference ( ) throws java.lang.Exception { block ( Permission.CREATE , com.google.gerrit.server.group.SystemGroupBackend.ANONYMOUS_USERS , "refs/*" ) ; }
public com.google.gerrit.server.notedb.DraftCommentNotes create ( com.google.gerrit.reviewdb.client.Change.Id changeId , com.google.gerrit.reviewdb.client.Account.Id accountId ) { return new com.google.gerrit.server.notedb.DraftCommentNotes ( repoManager , draftsProject , changeId , accountId ) ; }
private com.google.gerrit.metrics.dropwizard.MetricJson toJson ( java.lang.String q , com.codahale.metrics.Metric m ) { return new com.google.gerrit.metrics.dropwizard.MetricJson ( m , metrics.getAnnotations ( q ) , dataOnly ) ; }
void onRefReplicatedToAllNodes ( java.lang.String project , java.lang.String ref , int nodesCount ) { postEvent ( new com.googlesource.gerrit.plugins.replication.RefReplicationDoneEvent ( project , ref , nodesCount ) ) ; }
com.google.gwtorm.client.ResultSet < com.google.gerrit.client.reviewdb.PatchLineComment > published ( com.google.gerrit.client.reviewdb.Patch.Key patch ) throws com.google.gwtorm.client.OrmException ;
void setDisableHttpd ( @ java.lang.SuppressWarnings ( value = "unused" ) boolean arg ) { httpd = false ; }
public void removeFromNonExistingGroup_NotFound ( ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( DELETE ( "/groups/non-existing/members/admin" ) ) . isEqualTo ( HttpStatus.SC_NOT_FOUND ) ; }
public static void deleteRevision ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , java.lang.String commit , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwt.core.client.JavaScriptObject > cb ) { com.google.gerrit.client.changes.ChangeApi.revision ( project , id , commit ) . delete ( cb ) ; }
protected void configure ( ) { cache ( com.google.gerrit.server.git.ChangeCache.ID_CACHE , Project.NameKey.class , new com.google.inject.TypeLiteral < java.util.List < com.google.gerrit.reviewdb.client.Change > > ( ) { } ) . maximumWeight ( 0 ) . loader ( com.google.gerrit.server.git.ChangeCache.Loader.class ) ; }
public com.google.gerrit.reviewdb.client.Change update ( com.google.gerrit.reviewdb.client.Change c ) { if ( c.getStatus ( ) . isOpen ( ) ) { c.setStatus ( Change.Status.NEW ) ; com.google.gerrit.server.ChangeUtil.updated ( c ) ; } return c ; }
protected void preDisplay ( com.google.gerrit.common.data.GroupList result ) { groups.display ( result.getGroups ( ) ) ; groups.finishDisplay ( ) ; }
public com.google.gerrit.server.IdentifiedUser create ( com.google.inject.Provider < com.google.gerrit.reviewdb.server.ReviewDb > db , com.google.gerrit.reviewdb.client.Account.Id id ) { return new com.google.gerrit.server.IdentifiedUser ( capabilityControlFactory , authConfig , anonymousCowardName , canonicalUrl , realm , accountCache , groupBackend , null , db , id ) ; }
protected void configure ( ) { listener ( ) . to ( LocalDiskRepositoryManager.Lifecycle.class ) ; }
private static java.lang.String getBaseName ( java.lang.String project ) { return project.substring ( ( ( project.lastIndexOf ( '/' ) ) + 1 ) ) ; }
public void flushCacheWithGerritPrefix ( ) throws java.lang.Exception { com.google.gerrit.acceptance.RestResponse r = adminSession.post ( "/config/server/caches/gerrit-accounts/flush" ) ; com.google.common.truth.Truth.assertThat ( r.getStatusCode ( ) ) . isEqualTo ( HttpStatus.SC_OK ) ; }
public void testIndexPredicate ( ) throws java.lang.Exception { com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > in = parse ( "file:a" ) ; com.google.common.truth.Truth.assertThat ( rewrite ( in ) ) . isEqualTo ( query ( in ) ) ; }
public com.google.inject.Module create ( ) throws com.google.gerrit.server.plugins.InvalidPluginException { com.google.common.base.Preconditions.checkState ( ( ( command ) != null ) , "pluginName must be provided" ) ; return ! ( commands.isEmpty ( ) ) ? this : null ; }
protected PushOneCommit.Result createChange ( org.eclipse.jgit.api.Git git ) throws java.io.IOException , org.eclipse.jgit.api.errors.GitAPIException { com.google.gerrit.acceptance.PushOneCommit push = pushFactory.create ( db , admin.getIdent ( ) , git ) ; return push.to ( "refs/for/master" ) ; }
protected com.google.gerrit.server.change.ChangeInserter newChangeWithStatus ( org.eclipse.jgit.junit.TestRepository < com.google.gerrit.testutil.InMemoryRepositoryManager.Repo > repo , com.google.gerrit.reviewdb.client.Change.Status status ) throws java.lang.Exception { return newChange ( repo , null , null , status , null ) ; }
private com.google.gerrit.common.data.PermissionRule rule ( com.google.gerrit.server.git.ProjectConfig config , com.google.gerrit.reviewdb.client.AccountGroup group ) { return new com.google.gerrit.common.data.PermissionRule ( config.resolve ( group ) ) ; }
private static com.google.gerrit.plugin.client.rpc.RestApi change ( java.lang.String id ) { return new com.google.gerrit.plugin.client.rpc.RestApi ( "/changes/" ) . id ( id ) ; }
private org.eclipse.jgit.lib.Repository openRepository ( com.google.gerrit.reviewdb.client.Project.NameKey name ) { try { return repoManager.openRepository ( name ) ; } catch ( java.io.IOException err ) { com.google.gerrit.common.ChangeHookRunner.log.warn ( ( "Cannot open repository " + ( name.get ( ) ) ) , err ) ; return null ; } }
public void starChange ( java.lang.String changeId ) throws com.google.gerrit.extensions.restapi.RestApiException { throw new com.google.gerrit.extensions.restapi.NotImplementedException ( ) ; }
public com.google.gerrit.extensions.api.accounts.Accounts accounts ( ) { return accounts ; }
public static boolean isOff ( java.lang.String listenHostname ) { return ( ( "off" . equalsIgnoreCase ( listenHostname ) ) || ( "none" . equalsIgnoreCase ( listenHostname ) ) ) || ( "no" . equalsIgnoreCase ( listenHostname ) ) ; }
protected void run ( ) { loader.rescan ( true ) ; }
public void setMatchPrefix ( java.lang.String matchPrefix ) { this . matchPrefix = matchPrefix ; }
private < S extends java.lang.Comparable < ? > > com.google.common.collect.Ordering < S > createOrdering ( ) { if ( nullsLast ) { return com.google.common.collect.Ordering.natural ( ) . nullsLast ( ) ; } return com.google.common.collect.Ordering.natural ( ) . nullsFirst ( ) ; }
public com.google.gerrit.server.change.Description getDescription ( com.google.gerrit.server.change.ChangeResource rsrc ) { return new com.google.gerrit.extensions.webui.UiAction.Description ( ) . setLabel ( "Mute" ) . setTitle ( "Mute the change to unhighlight it in the dashboard" ) . setVisible ( isMuteable ( rsrc ) ) ; }
protected < K extends java.io.Serializable , V extends java.io.Serializable > com.google.gerrit.server.cache.UnnamedCacheBinding < K , V > disk ( final com.google.inject.TypeLiteral < com.google.gerrit.server.cache.Cache < K , V > > type ) { return disk ( com.google.inject.Key.get ( type ) , type ) ; }
protected com.google.gerrit.acceptance.StandaloneSiteTest.ServerContext startServer ( ) throws java.lang.Exception { return startServer ( null ) ; }
public void onSuccess ( com.google.gerrit.common.data.ChangeDetail result ) { buttonClicked = true ; if ( ( callback ) != null ) { callback.onSuccess ( result ) ; } hide ( ) ; }
protected com.google.gwtjsonrpc.server.SignedToken createXsrfSignedToken ( ) { return server.getXsrfToken ( ) ; }
public com.google.gerrit.extensions.restapi.BinaryResult submitPreview ( java.lang.String format ) throws com.google.gerrit.extensions.restapi.RestApiException { submitPreview.setFormat ( format ) ; return submitPreview.apply ( revision ) ; }
void onRevert ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { com.google.gerrit.client.change.RevertAction.call ( revert , changeId , project , revision , subject ) ; }
public org.kohsuke.github.GHMyself getMyself ( ) throws java.io.IOException { if ( isLoggedIn ( ) ) { return getHub ( ) . getMyself ( ) ; } return null ; }
public void setUp ( ) throws java.lang.Exception { repo = new org.eclipse.jgit.junit.TestRepository < org.eclipse.jgit.internal.storage.dfs.DfsRepository > ( new org.eclipse.jgit.internal.storage.dfs.InMemoryRepository ( new org.eclipse.jgit.internal.storage.dfs.DfsRepositoryDescription ( "test" ) ) ) ; }
private java.util.Map < java.lang.String , com.google.gerrit.extensions.common.LabelInfo > getChangeLabels ( java.lang.String changeId ) throws java.lang.Exception { return gApi.changes ( ) . id ( changeId ) . get ( com.google.gerrit.extensions.client.ListChangesOption.DETAILED_LABELS ) . labels ; }
private boolean canRead ( org.eclipse.jgit.lib.ObjectId revId ) throws java.io.IOException { try ( org.eclipse.jgit.revwalk.RevWalk rw = new org.eclipse.jgit.revwalk.RevWalk ( repo ) ) { org.eclipse.jgit.revwalk.RevCommit commit = rw.parseCommit ( revId ) ; return projectControl.canReadCommit ( db , repo , commit ) ; } }
public com.google.gerrit.extensions.api.changes.FileApi file ( java.lang.String path ) { return fileApi.create ( files.parse ( revision , com.google.gerrit.extensions.restapi.IdString.fromDecoded ( path ) ) ) ; }
public void setUp ( ) throws java.lang.Exception { index = new com.google.gerrit.server.index.FakeIndex ( FakeIndex.V2 ) ; com.google.gerrit.server.index.IndexCollection indexes = new com.google.gerrit.server.index.IndexCollection ( ) ; indexes.setSearchIndex ( index ) ; queryBuilder = new com.google.gerrit.server.index.FakeQueryBuilder ( indexes ) ; }
private void testCopyLocal ( ) { org.easymock.EasyMock.expect ( cfgMock.getCopyLocal ( ) ) . andReturn ( true ) . once ( ) ; }
public java.lang.String getCoverLetter ( ) { if ( ( changeMessage ) != null ) { return changeMessage.trim ( ) ; } return "" ; }
private static com.google.gerrit.server.group.GroupResource check ( java.lang.String id , com.google.gerrit.server.account.GroupControl ctl ) throws com.google.gerrit.extensions.restapi.ResourceNotFoundException { if ( ctl.isVisible ( ) ) { return new com.google.gerrit.server.group.GroupResource ( ctl ) ; } throw new com.google.gerrit.extensions.restapi.ResourceNotFoundException ( id ) ; }
protected void runImpl ( ) throws java.io.IOException { final org.spearce.jgit.transport.UploadPack up = new org.spearce.jgit.transport.UploadPack ( repo ) ; up.upload ( in , out , err ) ; }
void moveUp ( int row ) { if ( row > 2 ) { swap ( ( row - 1 ) , row ) ; } }
public void onFailure ( java.lang.Exception reason ) { callback.onFailure ( reason ) ; }
public void putComment ( com.google.gerrit.reviewdb.client.PatchLineComment c ) { verifyComment ( c ) ; com.google.common.base.Preconditions.checkArgument ( ( ( c.getStatus ( ) ) == ( PatchLineComment.Status.DRAFT ) ) , "Cannot insert a published comment into a ChangeDraftUpdate" ) ; put.add ( c ) ; }
com.google.gerrit.server.git.SubmoduleOp create ( com.google.gerrit.reviewdb.client.Branch.NameKey destBranch , org.eclipse.jgit.revwalk.RevCommit mergeTip , org.eclipse.jgit.revwalk.RevWalk rw , org.eclipse.jgit.lib.Repository db , com.google.gerrit.reviewdb.client.Project destProject , java.util.List < com.google.gerrit.reviewdb.client.Change > submitted , java.util.Map < com.google.gerrit.reviewdb.client.Change.Id , com.google.gerrit.server.git.CodeReviewCommit > commits , com.google.gerrit.reviewdb.client.Account account ) ;
protected void configure ( ) { factory ( ChangeResource.Factory.class ) ; }
static int mix ( int in ) { return com.google.gerrit.server.util.IdGenerator.mix ( com.google.gerrit.server.util.IdGenerator.salt , in ) ; }
public com.google.gerrit.server.CurrentUser get ( ) { final com.google.gerrit.client.reviewdb.Account.Id id = call.getAccountId ( ) ; return id != null ? factory.create ( id ) : CurrentUser.ANONYMOUS ; }
public com.google.gerrit.extensions.restapi.Response < ? > apply ( com.google.gerrit.server.change.ChangeResource rsrc , com.google.gerrit.server.change.Index.Input input ) throws java.io.IOException { indexer.index ( db.get ( ) , rsrc.getChange ( ) ) ; return com.google.gerrit.extensions.restapi.Response.none ( ) ; }
public void run ( ) { openIndex.close ( ) ; }
public void notACommit ( final org.eclipse.jgit.lib.ObjectId id ) { ignoredObjectIds.add ( id ) ; }
public final void insert ( final java.lang.Iterable < E > instances ) throws com.google.gwtorm.client.OrmException { doInsert ( instances ) ; }
public void delete ( com.google.gerrit.server.query.change.ChangeData cd ) throws java.io.IOException { }
protected void configure ( ) { cache ( com.googlesource.gerrit.plugins.uploadvalidator.BlockedKeywordValidator.CACHE_NAME , java.lang.String.class , java.util.regex.Pattern.class ) . loader ( com.googlesource.gerrit.plugins.uploadvalidator.BlockedKeywordValidator.Loader.class ) ; }
public boolean canSeeGroup ( ) { return canSeeMembers ( ) ; }
public void onCellClicked ( com.google.gwt.user.client.ui.SourcesTableEvents sender , int row , int cell ) { if ( ( cell != 1 ) && ( ( getRowItem ( row ) ) != null ) ) { movePointerTo ( row ) ; } }
protected void preDisplay ( java.lang.Void result ) { initEditor ( content ) ; content = null ; }
private void allowForcePushOnRefsTags ( ) throws java.lang.Exception { removePushFromRefsTags ( ) ; grant ( project , "refs/tags/*" , Permission.PUSH , true , com.google.gerrit.server.group.SystemGroupBackend.REGISTERED_USERS ) ; }
void showTable ( ) { myBody.clear ( ) ; myBody.add ( table ) ; table.finishDisplay ( ) ; }
private com.google.gerrit.client.ui.Screen createScreen ( ) { return ( info ) != null ? new com.google.gerrit.client.changes.ChangeScreen ( info ) : new com.google.gerrit.client.changes.ChangeScreen ( id ) ; }
private static com.google.inject.Binding < com.google.gerrit.util.cli.OptionHandlerFactory < ? > > cast ( com.google.inject.Binding < ? > e ) { return ( ( com.google.inject.Binding < com.google.gerrit.util.cli.OptionHandlerFactory < ? > > ) ( e ) ) ; }
public com.google.common.util.concurrent.CheckedFuture < ? , java.io.IOException > deleteAsync ( com.google.gerrit.reviewdb.client.Change change ) { return ( executor ) != null ? submit ( new com.google.gerrit.server.index.ChangeIndexer.Task ( new com.google.gerrit.server.query.change.ChangeData ( change ) , true ) ) : com.google.common.util.concurrent.Futures.< java.lang.Object , java.io.IOException > immediateCheckedFuture ( null ) ; }
private com.google.gerrit.server.git.ChangeSet getForOpenChange ( com.google.gerrit.reviewdb.client.Change c , com.google.gerrit.server.CurrentUser user ) throws com.google.gwtorm.server.OrmException , java.io.IOException { return mergeSuperSet.completeChangeSet ( dbProvider.get ( ) , c , user ) ; }
java.lang.Runnable signInCallback ( net.codemirror.lib.CodeMirror cm ) { return ( ) -> { java.lang.String token = host.getToken ( ) ; if ( cm.extras ( ) . hasActiveLine ( ) ) { token += "@" + ( getTokenSuffixForActiveLine ( cm ) ) ; } com.google.gerrit.client.Gerrit.doSignIn ( token ) ; } ; }
public void onSuccess ( final com.google.gwtjsonrpc.client.VoidResult result ) { if ( submit ) { submit ( ) ; } else { saveStateOnUnload = false ; goChange ( ) ; } }
java.lang.String asText ( ) { return asText ( "Name" , "Query" , queriesByName ) ; }
private boolean canRegisterNewEmail ( ) { return com.google.gerrit.client.Gerrit.info ( ) . auth ( ) . canEdit ( Account.FieldName.REGISTER_NEW_EMAIL ) ; }
public static void setModeHeader ( javax.servlet.http.HttpServletResponse res , com.google.gitiles.PathServlet.FileType type ) { res.setHeader ( com.google.gitiles.PathServlet.MODE_HEADER , java.lang.String.format ( "%06o" , type.mode.getBits ( ) ) ) ; }
private static com.google.gerrit.extensions.common.AccountInfo fromAcountInfo ( com.google.gerrit.extensions.common.AccountInfo i ) { if ( i == null ) { return null ; } com.google.gerrit.extensions.common.AccountInfo ai = new com.google.gerrit.extensions.common.AccountInfo ( ) ; com.google.gerrit.server.api.changes.ChangeInfoMapper.fromAccount ( i , ai ) ; return ai ; }
public void testNonIndexPredicates ( ) throws java.lang.Exception { com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > in = parse ( "foo:a OR foo:b" ) ; org.junit.Assert.assertEquals ( in , rewrite ( in ) ) ; }
public void indexChangeOnNonVisibleBranch ( ) throws java.lang.Exception { java.lang.String changeId = createChange ( ) . getChangeId ( ) ; blockRead ( "refs/heads/master" ) ; userSession.post ( ( ( "/changes/" + changeId ) + "/index/" ) ) . assertNotFound ( ) ; }
public java.lang.String getPluginName ( java.io.File srcFile ) throws java.io.IOException { return com.google.common.base.Objects.firstNonNull ( getGerritPluginName ( srcFile ) , com.google.gerrit.server.plugins.PluginLoader.nameOf ( srcFile ) ) ; }
public Account.Id getNewAssignee ( ) { return ( newAssignee ) != null ? newAssignee.getId ( ) : null ; }
private void hide ( ) { dialogBox.hide ( ) ; usernameTxt.setValue ( "" ) ; sshKeyTxt.setValue ( "" ) ; }
public void onSuccess ( final com.google.gwtjsonrpc.client.VoidResult result ) { createCommentEditor ( suggestRow , column , line , file ) ; }
com.google.gerrit.server.rpc.project.ProjectDetailFactory create ( com.google.gerrit.client.reviewdb.Project.NameKey name ) ;
public void onKeyPress ( final com.google.gwt.event.dom.client.KeyPressEvent event ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( patchSetId ) ) ; }
public static < T > com.google.gerrit.server.query.Predicate < T > and ( final com.google.gerrit.server.query.Predicate < T > ... that ) { if ( ( that.length ) == 1 ) { return that [ 0 ] ; } return new com.google.gerrit.server.query.AndPredicate ( that ) ; }
private org.eclipse.jgit.errors.ConfigInvalidException parseException ( java.lang.String fmt , java.lang.Object ... args ) { return com.google.gerrit.server.notedb.ChangeNotes.parseException ( id , fmt , args ) ; }
public void testThreeLevelTreeWithAllIndexPredicates ( ) throws java.lang.Exception { com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > in = parse ( "-status:abandoned (status:open OR status:merged)" ) ; org.junit.Assert.assertEquals ( query ( parse ( "status:new OR status:submitted OR status:draft OR status:merged" ) ) , rewrite.rewrite ( in ) ) ; }
public com.google.gerrit.common.data.GroupReference resolve ( com.google.gerrit.reviewdb.client.AccountGroup group ) { return resolve ( com.google.gerrit.common.data.GroupReference.forGroup ( group ) ) ; }
protected void onInitUI ( ) { super . onInitUI ( ) ; initName ( ) ; initOwner ( ) ; initDescription ( ) ; initMemberList ( ) ; }
public static org.eclipse.jgit.internal.storage.dfs.InMemoryRepository newRepository ( com.google.gerrit.reviewdb.client.Project.NameKey name ) { return new com.google.gerrit.testutil.InMemoryRepositoryManager.Repo ( name ) ; }
public void suggestReviewersNoResult1 ( ) throws java.lang.Exception { java.lang.String changeId = createChange ( ) . getChangeId ( ) ; java.util.List < com.google.gerrit.extensions.common.SuggestedReviewerInfo > reviewers = suggestReviewers ( changeId , name ( "u" ) , 6 ) ; com.google.common.truth.Truth.assertThat ( reviewers ) . isEmpty ( ) ; }
public void createProjectFoo ( ) throws com.google.gerrit.extensions.restapi.RestApiException { java.lang.String name = "foo" ; org.junit.Assert.assertEquals ( name , gApi.projects ( ) . name ( name ) . create ( ) . get ( ) . name ) ; }
public java.util.List < com.google.gerrit.common.data.SubmitRecord > canSubmit ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.PatchSet patchSet ) { return canSubmit ( db , patchSet , null , false ) ; }
public java.lang.String getChangeMessageThreadId ( ) throws com.google.gerrit.common.errors.EmailException { return velocify ( "<gerrit.${change.createdOn.time}.$change.key.get()@$email.gerritHost>" ) ; }
protected void onInitUI ( ) { super . onInitUI ( ) ; setPageTitle ( Util.C.groupListTitle ( ) ) ; initPageHeader ( ) ; groups = new com.google.gerrit.client.admin.GroupTable ( com.google.gerrit.common.PageLinks.ADMIN_GROUPS ) ; add ( groups ) ; }
protected com.google.gerrit.server.GerritCall createActiveCall ( final javax.servlet.http.HttpServletRequest req , final javax.servlet.http.HttpServletResponse resp ) { return new com.google.gerrit.server.GerritCall ( server , schema , req , resp ) ; }
private void clearMarkerAndWidget ( ) { marker.clear ( ) ; assert ( widget ) != null ; widget.clear ( ) ; }
public void changeDetail ( final com.google.gerrit.client.reviewdb.Change.Id id , final com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.data.ChangeDetail > callback ) { changeDetail.create ( id ) . to ( callback ) ; }
public void onSuccess ( ) { com.google.gerrit.client.Gerrit.display ( token , select ( ) ) ; }
protected void set ( int newValue ) { seq = newValue ; }
protected Project.NameKey createProject ( java.lang.String nameSuffix , com.google.gerrit.reviewdb.client.Project.NameKey parent ) throws com.google.gerrit.extensions.restapi.RestApiException { return createProject ( nameSuffix , parent , true , null ) ; }
private boolean canRestore ( com.google.gerrit.reviewdb.server.ReviewDb db ) throws com.google.gwtorm.server.OrmException { return ( canAbandon ( db ) ) && ( refControl.asForRef ( ) . testOrFalse ( RefPermission.CREATE_CHANGE ) ) ; }
public static com.google.gerrit.reviewdb.client.Account.Id parseAfterShardedRefPart ( java.lang.String name ) { java.lang.Integer id = com.google.gerrit.reviewdb.client.RefNames.parseAfterShardedRefPart ( name ) ; return id != null ? new com.google.gerrit.reviewdb.client.Account.Id ( id ) : null ; }
public com.google.gerrit.reviewdb.client.PatchSet update ( com.google.gerrit.reviewdb.client.PatchSet patchset ) { patchset.setDraft ( false ) ; return patchset ; }
public java.util.List < com.google.gerrit.client.reviewdb.AccountSshKey > run ( com.google.gerrit.client.reviewdb.ReviewDb db ) throws com.google.gwtorm.client.OrmException { return db.accountSshKeys ( ) . byAccount ( getAccountId ( ) ) . toList ( ) ; }
public static java.lang.String createCommit ( org.eclipse.jgit.api.Git git , org.eclipse.jgit.lib.PersonIdent i , java.lang.String msg ) throws java.io.IOException , org.eclipse.jgit.api.errors.GitAPIException { return com.google.gerrit.acceptance.git.GitUtil.createCommit ( git , i , msg , true , false ) ; }
public void onSuccess ( com.google.gerrit.client.rpc.NativeMap < com.google.gwt.core.client.JsArray < com.google.gerrit.client.changes.CommentInfo > > result ) { r.add ( result ) ; }
com.google.gerrit.acceptance.server.mail.StagedChange stage ( ) throws java.lang.Exception ;
public static com.google.gerrit.server.patch.PatchListKey againstCommit ( org.eclipse.jgit.lib.AnyObjectId otherCommitId , org.eclipse.jgit.lib.AnyObjectId newId , com.google.gerrit.extensions.client.DiffPreferencesInfo.Whitespace whitespace ) { return new com.google.gerrit.server.patch.PatchListKey ( otherCommitId , newId , whitespace ) ; }
private void touchChange ( ) { try { com.google.gerrit.server.ChangeUtil.touch ( change , db ) ; } catch ( com.google.gwtorm.server.OrmException e ) { } }
public com.google.gerrit.reviewdb.client.Change getChange ( ) { return change ; }
public void testNoAdvance ( ) { com.google.gerrit.client.diff.CodeMirrorDemo.EditIterator iter = new com.google.gerrit.client.diff.CodeMirrorDemo.EditIterator ( lines , 0 ) ; assertLineChsEqual ( net.codemirror.lib.LineCharacter.create ( 0 ) , iter.advance ( 0 ) ) ; }
protected boolean beforeInit ( com.google.gerrit.pgm.BaseInit.SiteInit init ) throws java.lang.Exception { return false ; }
private static com.google.gerrit.client.reviewdb.ApprovalCategoryValue value ( final com.google.gerrit.client.reviewdb.ApprovalCategory cat , final int value , final java.lang.String name ) { return new com.google.gerrit.client.reviewdb.ApprovalCategoryValue ( new com.google.gerrit.client.reviewdb.ApprovalCategoryValue.Id ( cat.getId ( ) , ( ( short ) ( value ) ) ) , name ) ; }
private final native void setCh ( int ch ) ;
private void log ( final int rc ) { if ( logged.compareAndSet ( false , true ) ) { log.onExecute ( cmd , rc ) ; } }
public void execute ( java.lang.String sql ) throws com.google.gwtorm.server.OrmException { try { stmt.execute ( sql ) ; } catch ( java.sql.SQLException e ) { throw new com.google.gwtorm.server.OrmException ( ( "Cannot apply SQL\n" + sql ) , e ) ; } }
public static java.lang.String fullName ( java.lang.String ref ) { return ref.startsWith ( com.google.gerrit.reviewdb.client.RefNames.REFS ) ? ref : ( com.google.gerrit.reviewdb.client.RefNames.REFS_HEADS ) + ref ; }
private void generateProxyMethods ( final com.google.gwt.user.rebind.SourceWriter srcWriter ) { final com.google.gwt.core.ext.typeinfo.JMethod [ ] methodList = svcInf.getOverridableMethods ( ) ; for ( final com.google.gwt.core.ext.typeinfo.JMethod m : methodList ) { generateProxyMethod ( m , srcWriter ) ; } }
protected void configure ( ) { listener ( ) . to ( com.google.gerrit.server.git.LocalDiskRepositoryManager.Lifecycle.class ) ; }
public void logout ( ) { if ( ( val ) != null ) { manager.destroy ( key ) ; key = null ; val = null ; saveCookie ( ) ; } }
private void assertError ( java.lang.String expectedError , java.lang.String response ) { com.google.common.truth.Truth.assertThat ( response ) . contains ( expectedError ) ; }
public void testReplaceEscaping ( ) { com.google.common.truth.Truth.assertThat ( new com.google.gwtexpui.safehtml.client.LinkFindReplace ( "find" , "a\"&\'<>b" ) . replace ( "find" ) ) . isEqualTo ( "<a href=\"a&quot;&amp;&#39;&lt;&gt;b\">find</a>" ) ; }
private boolean sshEnabled ( ) { return downloadConfig.getDownloadSchemes ( ) . contains ( DownloadScheme.SSH ) ; }
public void testFirstParentAltersId ( ) throws java.lang.Exception { org.junit.Assert.assertEquals ( ( "a\n" + ( "\n" + "Change-Id: I7fc3876fee63c766a2063df97fbe04a2dddd8d7c\n" ) ) , call ( "a\n" ) ) ; setHEAD ( ) ; org.junit.Assert.assertEquals ( ( "a\n" + ( "\n" + "Change-Id: I51e86482bde7f92028541aaf724d3a3f996e7ea2\n" ) ) , call ( "a\n" ) ) ; }
public void setUp ( ) throws java.lang.Exception { repo = new org.eclipse.jgit.junit.TestRepository ( new org.eclipse.jgit.internal.storage.dfs.InMemoryRepository ( new org.eclipse.jgit.internal.storage.dfs.DfsRepositoryDescription ( "test" ) ) ) ; walk = new org.eclipse.jgit.revwalk.RevWalk ( repo.getRepository ( ) ) ; }
private java.util.Map < java.lang.String , java.util.List < com.google.gitiles.blame.BlameServletTest.RegionJsonData > > getBlameJson ( java.lang.String path ) throws java.lang.Exception { return buildJson ( path , new com.google.gson.reflect.TypeToken < java.util.Map < java.lang.String , java.util.List < com.google.gitiles.blame.BlameServletTest.RegionJsonData > > > ( ) { } ) ; }
public com.google.gerrit.extensions.common.DiffInfo diff ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return getDiff.apply ( file ) . value ( ) ; } catch ( java.io.IOException | com.google.gerrit.server.project.InvalidChangeOperationException | com.google.gwtorm.server.OrmException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot retrieve diff" , e ) ; } }
protected void onInitUI ( ) { super . onInitUI ( ) ; groups = new com.google.gerrit.client.admin.GroupTable ( ) ; add ( groups ) ; }
protected void configureServlets ( ) { bind ( com.googlesource.gerrit.plugins.manager.AvailablePluginsCollection.class ) ; serve ( "/available*" ) . with ( com.googlesource.gerrit.plugins.manager.PluginManagerRestApiServlet.class ) ; filterRegex ( ".*\\.js" ) . through ( com.googlesource.gerrit.plugins.manager.XAuthFilter.class ) ; }
public com.google.gerrit.server.git.WorkQueue.Executor createQueue ( int poolsize , java.lang.String prefix ) { final com.google.gerrit.server.git.WorkQueue.Executor r = new com.google.gerrit.server.git.WorkQueue.Executor ( poolsize , prefix ) ; r.setContinueExistingPeriodicTasksAfterShutdownPolicy ( false ) ; r.setExecuteExistingDelayedTasksAfterShutdownPolicy ( true ) ; queues.add ( r ) ; return r ; }
protected < R extends com.google.gerrit.extensions.restapi.RestResource > com.google.gerrit.extensions.restapi.RestApiModule.ModifyViewBinder < R > put ( com.google.inject.TypeLiteral < com.google.gerrit.extensions.restapi.RestView < R > > viewType ) { return new com.google.gerrit.extensions.restapi.RestApiModule.ModifyViewBinder ( view ( viewType , com.google.gerrit.extensions.restapi.RestApiModule.PUT , "/" ) ) ; }
private com.google.gerrit.reviewdb.client.Change newChange ( ) { return com.google.gerrit.testutil.TestChanges.newChange ( project , changeOwner.getAccountId ( ) ) ; }
public static com.google.gerrit.elasticsearch.ElasticIndexModule latestVersionWithOnlineUpgrade ( ) { return new com.google.gerrit.elasticsearch.ElasticIndexModule ( null , 0 , true ) ; }
protected static java.util.List < com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > > none ( ) { com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > any = any ( ) ; return com.google.common.collect.ImmutableList.of ( not ( any ) ) ; }
public void setUp ( ) throws java.lang.Exception { db = new com.google.gwtorm.nosql.heap.MemoryDatabase < com.google.gwtorm.data.PhoneBookDb > ( com.google.gwtorm.data.PhoneBookDb.class ) ; openSchemas = new java.util.ArrayList < com.google.gwtorm.data.PhoneBookDb > ( ) ; }
private org.eclipse.jgit.lib.PersonIdent toCommitterIdent ( final com.google.gerrit.reviewdb.client.PatchSetApproval audit ) { if ( audit != null ) { return identifiedUserFactory.create ( audit.getAccountId ( ) ) . newCommitterIdent ( audit.getGranted ( ) , myIdent.getTimeZone ( ) ) ; } return myIdent ; }
public void display ( java.lang.String commitMessage , com.google.gerrit.client.ui.CommentLinkProcessor commentLinkProcessor ) { display ( null , null , null , commitMessage , commentLinkProcessor ) ; }
public static com.google.gwtjsonrpc.client.event.Type < com.google.gwtjsonrpc.client.event.RpcCompleteHandler > getType ( ) { if ( ( com.google.gwtjsonrpc.client.event.RpcCompleteEvent.TYPE ) == null ) { com.google.gwtjsonrpc.client.event.RpcCompleteEvent.TYPE = new com.google.gwtjsonrpc.client.event.Type ( ) ; com.google.gwtjsonrpc.client.event.RpcCompleteEvent.INSTANCE = new com.google.gwtjsonrpc.client.event.RpcCompleteEvent ( ) ; } return com.google.gwtjsonrpc.client.event.RpcCompleteEvent.TYPE ; }
com.google.gerrit.extensions.restapi.RestModifyView < P , ? > post ( P parent ) throws com.google.gerrit.extensions.restapi.RestApiException ;
private void validateReindexerNotRunning ( ) throws com.google.gerrit.lucene.ReindexerAlreadyRunningException { if ( ( ( reindexer ) != null ) && ( reindexer.isRunning ( ) ) ) { throw new com.google.gerrit.lucene.ReindexerAlreadyRunningException ( ) ; } }
public static com.google.gerrit.common.data.SubmitTypeRecord OK ( com.google.gerrit.extensions.client.SubmitType type ) { return new com.google.gerrit.common.data.SubmitTypeRecord ( com.google.gerrit.common.data.SubmitTypeRecord.Status.OK , type , null ) ; }
public void run ( ) { closedIndex.close ( ) ; }
public void addPatchSets ( com.google.gerrit.server.events.ChangeAttribute ca , java.util.Collection < com.google.gerrit.reviewdb.client.PatchSet > ps , java.util.Map < com.google.gerrit.reviewdb.client.PatchSet.Id , java.util.Collection < com.google.gerrit.reviewdb.client.PatchSetApproval > > approvals ) { addPatchSets ( ca , ps , approvals , false , null ) ; }
public void onSuccess ( final com.google.gerrit.common.data.ProjectDetail result ) { display ( result ) ; }
public com.google.gerrit.extensions.restapi.Response < ? > apply ( com.google.gerrit.server.change.ChangeResource resource , com.google.gerrit.server.change.ChangeEdits.Put.Input input ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.extensions.restapi.ResourceConflictException , com.google.gerrit.server.permissions.PermissionBackendException , com.google.gwtorm.server.OrmException , java.io.IOException { putEdit.apply ( resource , path , input.content ) ; return com.google.gerrit.extensions.restapi.Response.none ( ) ; }
public com.google.gerrit.reviewdb.AccountGroup get ( final com.google.gerrit.reviewdb.AccountGroup.NameKey name ) { return byName.get ( name ) ; }
private static java.util.List < com.google.gerrit.server.notedb.rebuild.Event > events ( com.google.gerrit.server.notedb.rebuild.Event ... es ) { return com.google.common.collect.Lists.newArrayList ( es ) ; }
public void testThatNullBasePathThrowsAnException ( ) { new com.google.gerrit.server.git.LocalDiskRepositoryManager ( site , new org.eclipse.jgit.lib.Config ( ) ) ; }
public void onSuccess ( ) { com.google.gerrit.client.Gerrit.display ( token , new com.google.gerrit.client.diff.Unified ( project , base , com.google.gerrit.client.DiffObject.patchSet ( id.getParentKey ( ) ) , id.get ( ) , side , line ) ) ; }
void postEvent ( com.google.gerrit.server.events.Event event , com.google.gerrit.reviewdb.server.ReviewDb db ) throws com.google.gwtorm.server.OrmException ;
public static boolean isNotSignedIn ( final java.lang.Throwable caught ) { if ( caught instanceof com.google.gerrit.client.rpc.NotSignedInException ) { return true ; } return ( caught instanceof com.google.gwtjsonrpc.client.RemoteJsonException ) && ( caught.getMessage ( ) . equals ( NotSignedInException.MESSAGE ) ) ; }
protected < T > T buildJson ( java.lang.String path , java.lang.reflect.Type typeOfT ) throws java.lang.Exception { return buildJson ( path , typeOfT , "" ) ; }
boolean usePool ( ) ;
public java.util.List < org.eclipse.jgit.revwalk.FooterLine > commitFooters ( ) throws com.google.gwtorm.server.OrmException , java.io.IOException { if ( ( commitFooters ) == null ) { if ( ! ( loadCommitData ( ) ) ) { return null ; } } return commitFooters ; }
public static java.lang.String toChange ( final com.google.gerrit.client.reviewdb.Change.Id c ) { return "change," + ( c.toString ( ) ) ; }
private java.util.List < com.google.gerrit.common.data.SubmitRecord > ruleError ( java.lang.String err ) { return ruleError ( err , null ) ; }
public void tearDown ( ) throws java.lang.Exception { walk.close ( ) ; }
public void createProjectFooWithGitSuffix ( ) throws java.lang.Exception { java.lang.String name = "foo" ; com.google.common.truth.Truth.assertThat ( name ) . isEqualTo ( gApi.projects ( ) . create ( ( name + ".git" ) ) . get ( ) . name ) ; }
private PushOneCommit.Result createDraft ( ) throws java.io.IOException , org.eclipse.jgit.api.errors.GitAPIException { com.google.gerrit.acceptance.PushOneCommit push = pushFactory.create ( db , admin.getIdent ( ) , git ) ; return push.to ( "refs/drafts/master" ) ; }
public org.eclipse.jgit.lib.ObjectId getChangeMetaId ( ) { return changeMetaId ; }
com.google.gerrit.extensions.client.Side getStoredSideFromDisplaySide ( com.google.gerrit.client.diff.DisplaySide side ) { if ( ( side == ( DisplaySide.A ) ) && ( ( base.isBaseOrAutoMerge ( ) ) || ( base.isParent ( ) ) ) ) { return com.google.gerrit.extensions.client.Side.PARENT ; } return com.google.gerrit.extensions.client.Side.REVISION ; }
public com.google.gerrit.server.project.ProjectState getParentState ( ) { if ( isAllProjects ) { return null ; } return projectCache.get ( getProject ( ) . getParent ( allProjectsName ) ) ; }
public void tearDown ( ) { if ( ( plugin ) != null ) { plugin.stop ( env ) ; env.onStopPlugin ( plugin ) ; } }
private void removeAllChildren ( com.google.gwt.user.client.Element el ) { for ( int i = ( com.google.gwt.user.client.DOM.getChildCount ( el ) ) - 1 ; i >= 0 ; i -- ) { el.removeChild ( com.google.gwt.user.client.DOM.getChild ( el , i ) ) ; } }
protected static java.lang.String describe ( com.google.gerrit.server.CurrentUser user ) { if ( user.isIdentifiedUser ( ) ) { return user.getAccountId ( ) . toString ( ) ; } return user.toString ( ) ; }
public com.google.gerrit.server.notedb.ChangeNotes create ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.Change change ) { return new com.google.gerrit.server.notedb.ChangeNotes ( repoManager , migration , allUsersProvider , change ) ; }
public void updateRepo ( com.google.gerrit.server.update.RepoContext ctx ) throws java.lang.Exception { ctx.addRefUpdate ( edit.getEditCommit ( ) . copy ( ) , org.eclipse.jgit.lib.ObjectId.zeroId ( ) , edit.getRefName ( ) ) ; }
com.google.gerrit.server.notedb.rebuild.Event addDep ( com.google.gerrit.server.notedb.rebuild.Event e ) { deps.add ( e ) ; return this ; }
public com.google.gerrit.extensions.client.ChangeKind getChangeKind ( @ com.google.gerrit.common.Nullable org.eclipse.jgit.lib.Repository repo , @ com.google.gerrit.common.Nullable org.eclipse.jgit.revwalk.RevWalk rw , com.google.gerrit.server.query.change.ChangeData cd , com.google.gerrit.reviewdb.client.PatchSet patch ) { return com.google.gerrit.server.change.ChangeKindCacheImpl.getChangeKindInternal ( this , repo , rw , cd , patch ) ; }
private void assertNoProblems ( com.google.gerrit.server.notedb.ChangeNotes notes , @ com.google.gerrit.common.Nullable com.google.gerrit.extensions.api.changes.FixInput fix ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( checker.check ( notes , fix ) . problems ( ) ) . isEmpty ( ) ; }
private int getContext ( ) { final int sel = context.getSelectedIndex ( ) ; if ( 0 <= sel ) { return java.lang.Short.parseShort ( context.getValue ( sel ) ) ; } return getValue ( ) . context ; }
public boolean canRebase ( ) { return rebaseChange.canRebase ( revision ) ; }
public boolean canRestore ( com.google.gerrit.reviewdb.server.ReviewDb db ) throws com.google.gwtorm.server.OrmException { return ( canAbandon ( db ) ) && ( getRefControl ( ) . canUpload ( ) ) ; }
public void testParentHashCode ( ) { final int id = 42 ; final com.google.gwtorm.client.IntKeyTestCase.Parent p = new com.google.gwtorm.client.IntKeyTestCase.Parent ( id ) ; org.junit.Assert.assertEquals ( id , p.hashCode ( ) ) ; }
public void save ( ) throws java.io.IOException { cfg.save ( ) ; }
public final void upsert ( final java.lang.Iterable < E > instances ) throws com.google.gwtorm.client.OrmException { doUpsert ( instances ) ; }
private static boolean isNoSuchAccount ( final java.lang.Throwable caught ) { return ( caught instanceof com.google.gwtjsonrpc.client.RemoteJsonException ) && ( caught.getMessage ( ) . startsWith ( NoSuchAccountException.MESSAGE ) ) ; }
private java.util.Optional < com.google.gerrit.common.data.GroupReference > loadGroup ( com.google.gerrit.reviewdb.client.AccountGroup.NameKey groupName ) throws java.lang.Exception { return com.google.gerrit.server.group.db.GroupNameNotes.loadGroup ( repo , groupName ) ; }
java.lang.String getRemoteUser ( javax.servlet.http.HttpServletRequest req ) { java.lang.String remoteUser = com.google.gerrit.httpd.RemoteUserUtil.getRemoteUser ( req , loginHeader ) ; return ( userNameToLowerCase ) && ( remoteUser != null ) ? remoteUser.toLowerCase ( java.util.Locale.US ) : remoteUser ; }
private void assertProblems ( com.google.gerrit.gpg.testutil.TestKey tk , java.lang.String ... expected ) throws java.lang.Exception { com.google.gerrit.gpg.CheckResult result = new com.google.gerrit.gpg.PublicKeyChecker ( ) . check ( tk.getPublicKey ( ) ) ; org.junit.Assert.assertEquals ( java.util.Arrays.asList ( expected ) , result.getProblems ( ) ) ; }
public com.google.gerrit.solr.SolrChangeIndex getChangeIndex ( @ com.google.gerrit.server.config.GerritServerConfig org.eclipse.jgit.lib.Config cfg , com.google.gerrit.server.config.SitePaths sitePaths , com.google.gerrit.server.index.IndexCollection indexes , com.google.gerrit.server.index.FieldDef.FillArgs fillArgs ) throws java.io.IOException { return new com.google.gerrit.solr.SolrChangeIndex ( cfg , fillArgs , sitePaths , indexes , com.google.gerrit.server.index.ChangeSchemas.getLatestRelease ( ) , base ) ; }
public com.google.gerrit.server.project.ProjectResource parse ( com.google.gerrit.extensions.restapi.TopLevelResource parent , com.google.gerrit.extensions.restapi.IdString id ) throws com.google.gerrit.extensions.restapi.ResourceNotFoundException , java.io.IOException { com.google.gerrit.server.project.ProjectResource rsrc = _parse ( id.get ( ) , true ) ; if ( rsrc == null ) { throw new com.google.gerrit.extensions.restapi.ResourceNotFoundException ( id ) ; } return rsrc ; }
public int getCost ( ) { return 0 ; }
public void listBranchesOfNonVisibleProject_NotFound ( ) throws com.google.gwtorm.server.OrmException , com.jcraft.jsch.JSchException , java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { blockRead ( project , "refs/*" ) ; com.google.gerrit.acceptance.RestSession session = new com.google.gerrit.acceptance.RestSession ( server , accounts.create ( "user" , "user@example.com" , "User" ) ) ; org.junit.Assert.assertEquals ( HttpStatus.SC_NOT_FOUND , session.get ( ( ( "/projects/" + ( project.get ( ) ) ) + "/branches" ) ) . getStatusCode ( ) ) ; }
public int compare ( com.google.gerrit.common.data.AccessSection a , com.google.gerrit.common.data.AccessSection b ) { return compare ( a.getName ( ) , b.getName ( ) ) ; }
public void assertEquals ( java.lang.String str ) { printWriter.flush ( ) ; org.junit.Assert.assertEquals ( stringWriter.toString ( ) , str ) ; }
public boolean isDraftVisible ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.server.query.change.ChangeData cd ) throws com.google.gwtorm.server.OrmException { return ( ( isOwner ( ) ) || ( isReviewer ( db , cd ) ) ) || ( getRefControl ( ) . canViewDrafts ( ) ) ; }
private void allowTagCreation ( com.google.gerrit.acceptance.rest.project.PushTagIT.TagType tagType ) throws java.lang.Exception { grant ( project , "refs/tags/*" , tagType.createPermission , false , com.google.gerrit.server.group.SystemGroupBackend.REGISTERED_USERS ) ; }
public void onFailure ( java.lang.Throwable err ) { if ( com.google.gerrit.client.changes.SubmitFailureDialog.isConflict ( err ) ) { new com.google.gerrit.client.changes.SubmitFailureDialog ( err.getMessage ( ) ) . center ( ) ; } else { super . onFailure ( err ) ; } redisplay ( ) ; }
public void onSuccess ( final java.util.List < com.google.gerrit.reviewdb.Project > result ) { projectsTab.display ( result ) ; if ( firstPopupLoad ) { firstPopupLoad = false ; displayPopup ( ) ; } }
private void deactivate ( ) { if ( ( activePatchSetId ) != null ) { com.google.gerrit.client.changes.PatchSetComplexDisclosurePanel patchSetPanel = patchSetPanels.get ( activePatchSetId ) ; patchSetPanel.setActive ( false ) ; activePatchSetId = null ; } }
public void updateChange ( com.google.gerrit.server.git.BatchUpdate.ChangeContext ctx ) throws java.lang.Exception { ctx.getUpdate ( psId ) . setTopic ( magicBranch.topic ) ; }
private static java.lang.String describe ( com.google.gerrit.server.CurrentUser user ) { if ( user.isIdentifiedUser ( ) ) { return user.getAccountId ( ) . toString ( ) ; } return user.toString ( ) ; }
public com.google.gerrit.server.change.PatchSetInserter setCheckAddPatchSetPermission ( boolean checkAddPatchSetPermission ) { this . checkAddPatchSetPermission = checkAddPatchSetPermission ; return this ; }
private com.google.gerrit.extensions.api.changes.NotifyHandling defaultNotify ( com.google.gerrit.reviewdb.client.Change change ) { return change.hasReviewStarted ( ) ? com.google.gerrit.extensions.api.changes.NotifyHandling.ALL : com.google.gerrit.extensions.api.changes.NotifyHandling.OWNER ; }
public com.google.gerrit.pgm.init.LibraryDownloader get ( ) { return new com.google.gerrit.pgm.init.LibraryDownloader ( ui , site ) ; }
public void cleanup ( ) { db.close ( ) ; }
private static void validateDiffMode ( com.googlesource.gerrit.plugins.xdocs.XDocServlet.ResourceKey key ) throws com.google.gerrit.extensions.restapi.ResourceNotFoundException { if ( ( ( key.diffMode ) != ( DiffMode.NO_DIFF ) ) && ( ( key.revisionB ) == null ) ) { throw new com.google.gerrit.extensions.restapi.ResourceNotFoundException ( ) ; } }
public void setUp ( ) throws java.lang.Exception { repo = new org.eclipse.jgit.junit.TestRepository ( new org.eclipse.jgit.internal.storage.dfs.InMemoryRepository ( new org.eclipse.jgit.internal.storage.dfs.DfsRepositoryDescription ( "test" ) ) ) ; servlet = com.google.gitiles.TestGitilesServlet.create ( repo ) ; }
java.lang.Runnable toggleOpenBox ( net.codemirror.lib.CodeMirror cm ) { return ( ) -> { com.google.gerrit.client.diff.CommentGroup group = getCommentGroupOnActiveLine ( cm ) ; if ( group != null ) { group.openCloseLast ( ) ; } } ; }
public void doRefUpdatedHook ( com.google.gerrit.reviewdb.client.Branch.NameKey refName , org.eclipse.jgit.lib.RefUpdate refUpdate , com.google.gerrit.reviewdb.client.Account account ) { doRefUpdatedHook ( refName , refUpdate.getOldObjectId ( ) , refUpdate.getNewObjectId ( ) , account ) ; }
public void onClick ( com.google.gwt.event.dom.client.ClickEvent event ) { cm.setCursor ( net.codemirror.lib.LineCharacter.create ( line ) ) ; cm.scrollToY ( ( height - ( 0.5 * scrollbarHeight ) ) ) ; cm.focus ( ) ; }
public java.util.List < java.lang.String > currentFilePaths ( ) throws com.google.gwtorm.server.OrmException { com.google.gerrit.reviewdb.client.PatchSet ps = currentPatchSet ( ) ; return ps != null ? filePaths ( ps ) : null ; }
public void close ( ) throws java.io.IOException { repo.close ( ) ; }
public void printJson ( final java.lang.StringBuilder sb , final java.lang.String o ) { sb.append ( escapeString ( o ) ) ; }
public java.lang.String render ( java.lang.Integer object ) { if ( 0 <= object ) { return "+" + object ; } return java.lang.String.valueOf ( object ) ; }
public static void updateDraft ( @ com.google.gerrit.common.Nullable java.lang.String project , com.google.gerrit.reviewdb.client.PatchSet.Id id , java.lang.String draftId , com.google.gerrit.client.changes.CommentInfo content , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.changes.CommentInfo > cb ) { com.google.gerrit.client.changes.CommentApi.revision ( project , id , "drafts" ) . id ( draftId ) . put ( content , cb ) ; }
void onLogout ( ) { async.append ( log ( "LOGOUT" ) ) ; audit ( context.get ( ) , "0" , "LOGOUT" ) ; }
protected java.lang.Object createServiceHandle ( ) throws java.lang.Exception { return new com.google.gerrit.client.ui.SuggestServiceImpl ( ) ; }
public java.util.List < com.google.gerrit.common.data.GroupReference > run ( final com.google.gerrit.reviewdb.server.ReviewDb db ) { return suggestAccountGroup ( query , limit ) ; }
public void setUp ( ) throws java.lang.Exception { com.google.gerrit.acceptance.TestAccount admin = accounts.create ( "admin" , "Administrators" ) ; session = new com.google.gerrit.acceptance.RestSession ( server , admin ) ; }
protected com.google.gerrit.server.IdentifiedUser user ( com.google.gerrit.acceptance.TestAccount testAccount ) { return identifiedUserFactory.create ( testAccount.getId ( ) ) ; }
public void listChildrenOfNonExistingProject_NotFound ( ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( GET ( "/projects/non-existing/children/" ) . getStatusCode ( ) ) . isEqualTo ( HttpStatus.SC_NOT_FOUND ) ; }
public com.google.gerrit.server.notedb.ChangeNotes createForNew ( com.google.gerrit.reviewdb.client.Change change ) throws com.google.gwtorm.server.OrmException { return new com.google.gerrit.server.notedb.ChangeNotes ( args , change ) . load ( ) ; }
com.google.gerrit.server.query.change.ChangeData convert ( com.google.gerrit.reviewdb.client.PatchSet t ) { return factory.create ( db.get ( ) , t.getId ( ) . getParentKey ( ) ) ; }
private boolean canCreateCommit ( org.eclipse.jgit.lib.Repository repo , org.eclipse.jgit.revwalk.RevCommit commit ) { if ( canUpdate ( ) ) { return true ; } else if ( isMergedIntoBranchOrTag ( repo , commit ) ) { return true ; } return false ; }
public void review ( com.google.gerrit.extensions.api.changes.ReviewInput in ) throws com.google.gerrit.extensions.restapi.RestApiException { try { review.apply ( revision , in ) ; } catch ( com.google.gwtorm.server.OrmException | com.google.gerrit.server.git.UpdateException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot post review" , e ) ; } }
public static boolean isNoSuchEntity ( final java.lang.Throwable caught ) { if ( caught instanceof com.google.gerrit.client.rpc.NoSuchEntityException ) { return true ; } return ( caught instanceof com.google.gwtjsonrpc.client.RemoteJsonException ) && ( caught.getMessage ( ) . equals ( NoSuchEntityException.MESSAGE ) ) ; }
private org.eclipse.jetty.util.thread.ThreadPool threadPool ( ) { org.eclipse.jetty.util.thread.QueuedThreadPool pool = new org.eclipse.jetty.util.thread.QueuedThreadPool ( ) ; pool.setName ( "HTTP" ) ; pool.setMinThreads ( 2 ) ; pool.setMaxThreads ( 10 ) ; pool.setMaxQueued ( 50 ) ; return pool ; }
protected com.google.gerrit.server.change.ChangeInserter newChangeWithTopic ( org.eclipse.jgit.junit.TestRepository < com.google.gerrit.testutil.InMemoryRepositoryManager.Repo > repo , java.lang.String topic ) throws java.lang.Exception { return newChange ( repo , null , null , null , topic ) ; }
public void setUp ( ) { listenerMock = createMock ( com.google.gerrit.common.EventListener.class ) ; com.google.gerrit.extensions.registration.DynamicSet < com.google.gerrit.common.EventListener > listeners = com.google.gerrit.extensions.registration.DynamicSet.emptySet ( ) ; listeners.add ( listenerMock ) ; broker = new com.ericsson.gerrit.plugins.syncevents.SyncEventBroker ( null , listeners , null , null , null ) ; }
public java.util.List < com.google.gerrit.server.query.change.ChangeData > byCommit ( org.eclipse.jgit.lib.ObjectId id ) throws com.google.gwtorm.server.OrmException { return byCommit ( id.name ( ) ) ; }
private com.google.gerrit.server.git.MetaDataUpdate newMetaDataUpdate ( ) { return newMetaDataUpdate ( null ) ; }
public com.google.gwtorm.server.ResultSet < com.google.gerrit.reviewdb.client.PatchLineComment > answer ( ) throws java.lang.Throwable { return new com.google.gwtorm.server.ListResultSet ( com.google.common.collect.Lists.newArrayList ( comments ) ) ; }
private static void execute ( org.eclipse.jgit.lib.BatchRefUpdate bru , org.eclipse.jgit.lib.Repository repo ) throws java.io.IOException { try ( org.eclipse.jgit.revwalk.RevWalk rw = new org.eclipse.jgit.revwalk.RevWalk ( repo ) ) { bru.execute ( rw , NullProgressMonitor.INSTANCE ) ; } }
public void onTimeout ( org.eclipse.jetty.continuation.Continuation self ) { executor.remove ( this ) ; }
java.lang.String getToken ( ) { return isSignedIn ( ) ? key.getToken ( ) : null ; }
private void blockForcePush ( ) throws java.lang.Exception { block ( "refs/tags/*" , Permission.PUSH , com.google.gerrit.server.group.SystemGroupBackend.ANONYMOUS_USERS ) . setForce ( true ) ; }
public java.util.concurrent.Callable < java.lang.Void > indexTask ( com.google.gerrit.server.query.change.ChangeData cd ) { return new com.google.gerrit.server.index.ChangeIndexerImpl.Task ( cd , false ) ; }
public java.util.List < com.google.gerrit.reviewdb.client.PatchSetApproval > approvals ( ) throws com.google.gwtorm.server.OrmException { return com.google.common.collect.ImmutableList.copyOf ( approvalsMap ( ) . values ( ) ) ; }
private void upsertDraftComment ( com.google.gerrit.reviewdb.client.PatchLineComment c ) { createDraftUpdateIfNull ( ) ; draftUpdate.upsertComment ( c ) ; }
public com.google.gerrit.reviewdb.Project.SubmitType getSubmitType ( ) { return submitType ; }
protected void onLoad ( ) throws java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { org.eclipse.jgit.lib.Config cfg = readConfig ( com.google.gerrit.server.account.WatchConfig.WATCH_CONFIG ) ; projectWatches = com.google.gerrit.server.account.WatchConfig.parse ( accountId , cfg , this ) ; }
public void onRpcStart ( ) { if ( ( ++ ( activeCalls ) ) == 1 ) { if ( ( com.google.gerrit.client.RpcStatus.hideDepth ) == 0 ) { loading.setVisible ( true ) ; } } }
public void onClick ( com.google.gwt.event.dom.client.ClickEvent event ) { rights.showInherited ( showInherited.getValue ( ) ) ; }
public void merge ( final com.google.gerrit.client.reviewdb.Branch.NameKey branch ) { if ( start ( branch ) ) { mergeImpl ( branch ) ; } }
public static void getDefault ( com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.dashboards.DashboardInfo > callback ) { com.google.gerrit.client.dashboards.DashboardList.base ( project ) . view ( "default" ) . addParameterTrue ( "inherited" ) . get ( callback ) ; }
public java.util.Collection < com.google.gerrit.server.index.ChangeIndex > getWriteIndexes ( ) { return java.util.Collections.unmodifiableCollection ( writeIndexes ) ; }
private com.google.gerrit.server.IdentifiedUser addUser ( java.lang.String name ) throws java.lang.Exception { com.google.gerrit.server.account.AuthRequest req = com.google.gerrit.server.account.AuthRequest.forUser ( name ) ; com.google.gerrit.reviewdb.client.Account.Id id = accountManager.authenticate ( req ) . getAccountId ( ) ; return userFactory.create ( id ) ; }
protected < K , V > com.google.gerrit.server.cache.UnnamedCacheBinding < K , V > core ( final com.google.inject.TypeLiteral < com.google.gerrit.server.cache.Cache < K , V > > type ) { return core ( com.google.inject.Key.get ( type ) , type ) ; }
private com.google.gerrit.client.diff.DraftBox addNewDraft ( net.codemirror.lib.CodeMirror cm , int line ) { return addDraftBox ( com.google.gerrit.client.changes.CommentInfo.create ( path , getSideFromCm ( cm ) , ( line + 1 ) , null , null ) ) ; }
public boolean match ( com.google.gerrit.server.query.change.ChangeData cd ) throws com.google.gwtorm.server.OrmException { return ( ( ( source ) != null ) && ( cd.isFromSource ( source ) ) ) || ( pred.match ( cd ) ) ; }
public void removeApproval ( java.lang.String label ) { removeApprovalFor ( getAccountId ( ) , label ) ; }
public java.lang.String apply ( com.google.gerrit.reviewdb.client.Project.NameKey in ) { return in.get ( ) ; }
public void onClick ( final com.google.gwt.event.dom.client.ClickEvent event ) { doAddNewInclude ( ) ; }
com.google.gerrit.lucene.LuceneChangeIndex create ( com.google.gerrit.server.index.Schema < com.google.gerrit.server.query.change.ChangeData > schema , java.lang.String base ) ;
public java.lang.String changeClosed ( com.google.gerrit.server.git.ChangeReportFormatter.Input input ) { return java.lang.String.format ( "change %s closed" , com.google.gerrit.server.ChangeUtil.formatChangeUrl ( canonicalWebUrl , input.change ( ) ) ) ; }
public final void removeLineClass ( net.codemirror.lib.CodeMirror.LineHandle line , net.codemirror.lib.CodeMirror.LineClassWhere where , java.lang.String className ) { removeLineClassNative ( line , where.value ( ) , className ) ; }
public com.google.gerrit.server.change.PatchSetInserter setMessage ( java.lang.String message ) { this . message = message ; return this ; }
private java.lang.String newChange2 ( org.eclipse.jgit.api.Git git , org.eclipse.jgit.lib.PersonIdent ident ) throws java.lang.Exception { com.google.gerrit.acceptance.PushOneCommit push = pushFactory.create ( db , ident , git , PushOneCommit.SUBJECT , com.google.gerrit.acceptance.edit.ChangeEditIT.FILE_NAME , new java.lang.String ( com.google.gerrit.acceptance.edit.ChangeEditIT.CONTENT_OLD ) ) ; return push.rm ( "refs/for/master" ) . getChangeId ( ) ; }
java.util.Map < java.lang.String , com.google.gerrit.extensions.common.FileInfo > toFileInfoMap ( com.google.gerrit.reviewdb.client.Change change , com.google.gerrit.reviewdb.client.PatchSet patchSet ) throws com.google.gerrit.server.patch.PatchListNotAvailableException { return toFileInfoMap ( change , patchSet.getRevision ( ) , null ) ; }
private static void a ( final java.lang.StringBuilder r , final java.lang.String where ) { com.google.gerrit.client.data.GitwebLink.var ( r , "a" , where ) ; }
private void configureRequestScope ( ) { }
private static com.google.gerrit.common.data.LabelType category ( java.lang.String name , com.google.gerrit.common.data.LabelValue ... values ) { return new com.google.gerrit.common.data.LabelType ( name , java.util.Arrays.asList ( values ) ) ; }
public void testHashCodeWhenNull ( ) { final com.google.gwtorm.client.IntKeyTestCase.Parent p = new com.google.gwtorm.client.IntKeyTestCase.Parent ( 0 ) ; org.junit.Assert.assertEquals ( 0 , p.hashCode ( ) ) ; }
public io.fd.maintainer.plugin.service.dto.PluginBranchSpecificSettings.PluginSettingsBuilder setBranch ( final java.lang.String branch ) { this . branch = reduceWildcard ( branch ) ; return this ; }
public com.google.gerrit.server.notedb.NoteDbUpdateManager.Result rebuild ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.Change.Id changeId ) throws com.google.gwtorm.server.OrmException , java.io.IOException { return rebuild ( db , changeId , true ) ; }
abstract int getEnd ( org.eclipse.jgit.diff.Edit edit ) ;
public void createProjectFoo ( ) throws java.lang.Exception { java.lang.String name = "foo" ; com.google.common.truth.Truth.assertThat ( name ) . isEqualTo ( gApi.projects ( ) . create ( name ) . get ( ) . name ) ; }
public com.google.gerrit.server.CurrentUser get ( ) { final com.google.gerrit.client.reviewdb.Account.Id id = call.get ( ) . getAccountId ( ) ; return id != null ? identified.create ( id ) : anonymous ; }
protected void onLoad ( ) { super . onLoad ( ) ; refresh ( ) ; }
private com.google.inject.Injector createHttpdInjector ( ) { final java.util.List < com.google.inject.Module > modules = new java.util.ArrayList < com.google.inject.Module > ( ) ; modules.add ( new com.google.gerrit.pgm.http.jetty.JettyModule ( new com.google.gerrit.pgm.http.jetty.JettyEnv ( webInjector ) ) ) ; return webInjector.createChildInjector ( modules ) ; }
public static java.util.List < com.google.gerrit.reviewdb.client.Account.Id > ids ( com.google.gerrit.acceptance.TestAccount ... accounts ) { return com.google.gerrit.acceptance.TestAccount.ids ( java.util.Arrays.asList ( accounts ) ) ; }
boolean allRefsAreVisible ( java.util.Set < java.lang.String > ignore ) { return ( user.isInternalUser ( ) ) || ( canPerformOnAllRefs ( Permission.READ , ignore ) ) ; }
private com.google.gerrit.extensions.api.changes.DraftInput newDraft ( java.lang.String path , com.google.gerrit.extensions.client.Side side , int line , java.lang.String message ) { com.google.gerrit.extensions.api.changes.DraftInput d = new com.google.gerrit.extensions.api.changes.DraftInput ( ) ; return com.google.gerrit.acceptance.server.change.CommentsIT.populate ( d , path , side , null , line , message ) ; }
public java.lang.String getName ( ) { if ( ( fullName ) != null ) { return fullName ; } if ( ( preferredEmail ) != null ) { return preferredEmail ; } return com.google.gerrit.reviewdb.client.Account.getName ( accountId ) ; }
public void run ( ) { try { synchronized ( list ) { list.add ( cmd ) ; } runImp ( ) ; } finally { synchronized ( list ) { list.remove ( cmd ) ; } } }
private void hideTextBox ( ) { if ( ( textBox ) != null ) { textBox.removeFromParent ( ) ; textBox = null ; } textLabel.setVisible ( true ) ; }
com.google.gerrit.server.change.ChangeInserter create ( com.google.gerrit.server.project.RefControl ctl , com.google.gerrit.reviewdb.client.Change c , org.eclipse.jgit.revwalk.RevCommit rc ) ;
public void addPatchSets ( com.google.gerrit.server.events.ChangeAttribute a , java.util.Collection < com.google.gerrit.reviewdb.client.PatchSet > ps ) { addPatchSets ( a , ps , null , false , null ) ; }
public com.google.gerrit.server.account.GroupMembership membershipsOf ( com.google.gerrit.server.IdentifiedUser user ) { java.lang.String username = user.getUserName ( ) ; if ( com.google.common.base.Strings.isNullOrEmpty ( username ) ) { return com.google.gerrit.server.account.GroupMembership.EMPTY ; } return ghMembershipProvider.get ( username ) ; }
private void checkProjectInSource ( org.eclipse.jgit.lib.ProgressMonitor pm ) throws com.google.gerrit.extensions.restapi.BadRequestException , java.io.IOException { pm.beginTask ( "Check source project" , 1 ) ; api.getProject ( srcProject.get ( ) ) ; com.googlesource.gerrit.plugins.importer.ProgressMonitorUtil.updateAndEnd ( pm ) ; }
public void submitToEmptyRepo ( ) throws java.lang.Exception { com.google.gerrit.acceptance.PushOneCommit.Result change = createChange ( ) ; submit ( change.getChangeId ( ) ) ; com.google.common.truth.Truth.assertThat ( getRemoteHead ( ) . getId ( ) ) . isEqualTo ( change.getCommitId ( ) ) ; }
public void emptyCommitMessage ( ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( com.google.gerrit.server.change.HashtagsUtil.extractTags ( "" ) ) . isEmpty ( ) ; }
public static java.lang.String emptyToNull ( java.lang.String str ) { return ( str == null ) || ( str.isEmpty ( ) ) ? null : str ; }
protected com.google.gerrit.server.notedb.ChangeNotes newNotes ( com.google.gerrit.reviewdb.client.Change c ) throws com.google.gwtorm.server.OrmException { return new com.google.gerrit.server.notedb.ChangeNotes ( args , c.getProject ( ) , c ) . load ( ) ; }
public java.lang.String getName ( ) { return ( name ) != null ? name.get ( ) : null ; }
protected void onExit ( int rc ) { removeEventListenerRegistration ( ) ; synchronized ( taskLock ) { done = true ; } super . onExit ( rc ) ; }
private com.google.gerrit.server.account.WatchConfig.NotifyValue parseNotifyValue ( java.lang.String notifyValue ) { return com.google.gerrit.server.account.WatchConfig.NotifyValue.parse ( new com.google.gerrit.reviewdb.client.Account.Id ( 1000000 ) , "project" , notifyValue , this ) ; }
public static com.google.gwtexpui.user.client.Type < com.google.gwtexpui.user.client.DialogVisibleHandler > getType ( ) { if ( ( com.google.gwtexpui.user.client.DialogVisibleEvent.TYPE ) == null ) { com.google.gwtexpui.user.client.DialogVisibleEvent.TYPE = new com.google.gwtexpui.user.client.Type ( ) ; } return com.google.gwtexpui.user.client.DialogVisibleEvent.TYPE ; }
public abstract void execute ( com.google.gerrit.server.update.BatchUpdateListener listener ) throws com.google.gerrit.extensions.restapi.RestApiException , com.google.gerrit.server.update.UpdateException ;
private static com.google.gerrit.extensions.api.changes.ReviewInput.CommentInput newComment ( java.lang.String path , com.google.gerrit.extensions.client.Side side , int line , java.lang.String message ) { com.google.gerrit.extensions.api.changes.ReviewInput.CommentInput c = new com.google.gerrit.extensions.api.changes.ReviewInput.CommentInput ( ) ; return com.google.gerrit.acceptance.server.change.CommentsIT.populate ( c , path , side , null , line , message ) ; }
public void setUp ( ) throws java.lang.Exception { block ( "refs/drafts/*" , Permission.PUSH , com.google.gerrit.server.group.SystemGroupBackend.ANONYMOUS_USERS ) ; }
public void testNonIndexPredicates ( ) throws java.lang.Exception { com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > in = parse ( "foo:a OR foo:b" ) ; com.google.common.truth.Truth.assertThat ( in ) . isEqualTo ( rewrite ( in ) ) ; }
private static boolean isVisible ( com.google.gerrit.server.change.RelatedChangesSorter.PatchSetData psd , com.google.gerrit.server.project.ProjectControl ctl ) throws com.google.gwtorm.server.OrmException { return ctl.controlFor ( psd.data ( ) . notes ( ) ) . isPatchVisible ( psd.patchSet ( ) , psd.data ( ) ) ; }
public boolean allRefsAreVisible ( ) { return allRefsAreVisible ( java.util.Collections.< java.lang.String > emptySet ( ) ) ; }
public void applySuccess ( ) { com.google.gwt.user.client.rpc.AsyncCallback < T > cb = delegate ; if ( cb != null ) { delegate = null ; cb.onSuccess ( result ) ; result = null ; } }
public void run ( ) { for ( ; ; ) { try { if ( done.await ( checkFrequencyMillis , java.util.concurrent.TimeUnit.MILLISECONDS ) ) { return ; } } catch ( java.lang.InterruptedException e ) { } loader.rescan ( false ) ; } }
public java.lang.Object apply ( com.google.gerrit.server.group.GroupResource resource ) { return new com.google.gerrit.server.group.GroupInfo ( resource.getGroup ( ) ) ; }
static boolean parseBoolean ( java.lang.String s ) { return ( s != null ) && ( ( ( s.equals ( "1" ) ) || ( s.equalsIgnoreCase ( "yes" ) ) ) || ( java.lang.Boolean.parseBoolean ( s ) ) ) ; }
public com.google.gerrit.server.account.GroupMembership membershipsOf ( com.google.gerrit.server.IdentifiedUser user ) { java.lang.String username = user.getUserName ( ) ; if ( com.google.common.base.Strings.isNullOrEmpty ( username ) ) { return com.google.gerrit.server.account.GroupMembership.EMPTY ; } else { return ghMembershipProvider.get ( username ) ; } }
public void printJson ( final java.lang.StringBuilder sb , final com.google.gwtjsonrpc.client.VoidResult o ) { sb.append ( "{}" ) ; }
public void createBranch ( ) throws java.lang.Exception { allow ( "refs/*" , Permission.READ , com.google.gerrit.server.group.SystemGroupBackend.ANONYMOUS_USERS ) ; gApi.projects ( ) . name ( project.get ( ) ) . branch ( "foo" ) . create ( new com.google.gerrit.extensions.api.projects.BranchInput ( ) ) ; }
private static com.google.gerrit.client.rpc.RestApi group ( java.lang.String group ) { return new com.google.gerrit.client.rpc.RestApi ( "/groups/" ) . id ( group ) ; }
public static com.google.inject.Key < org.apache.sshd.server.CommandFactory.Command > key ( final java.lang.String name ) { return com.google.gerrit.server.ssh.Commands.key ( com.google.gerrit.server.ssh.Commands.named ( name ) ) ; }
void onExpandAll ( com.google.gwt.event.dom.client.ClickEvent e ) { expandAll ( ) ; manager.remove ( this , otherBar ) ; cm.focus ( ) ; }
void onIgnoreWhitespace ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ChangeEvent e ) { prefs.ignoreWhitespace ( com.google.gerrit.reviewdb.client.AccountDiffPreference.Whitespace.valueOf ( ignoreWhitespace.getValue ( ignoreWhitespace.getSelectedIndex ( ) ) ) ) ; if ( ( view ) != null ) { view.reloadDiffInfo ( ) ; } }
public static com.google.gerrit.server.git.validators.CommitValidationResult newFailure ( java.lang.String message ) { return new com.google.gerrit.server.git.validators.CommitValidationResult ( false , message ) ; }
com.google.gerrit.server.query.change.ChangeData create ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.Change c ) ;
public void deleteDocuments ( org.apache.lucene.index.Term ... term ) throws java.io.IOException { super . deleteDocuments ( term ) ; autoFlush ( ) ; }
protected java.lang.String getNextSequenceValueSql ( final java.lang.String seqname ) { return "SELECT NEXT VALUE FOR " + seqname ; }
public synchronized void handleEmails ( ) { }
public void startEventRecorder ( ) { eventRecorder = eventRecorderFactory.create ( admin ) ; }
protected void configureServlets ( ) { rpc ( com.google.gerrit.httpd.rpc.patch.PatchDetailServiceImpl.class ) ; }
public void onKeyPress ( final com.google.gwt.event.dom.client.KeyPressEvent event ) { gotoSibling ( ( - 1 ) ) ; }
public void setPatchSetId ( com.google.gerrit.reviewdb.client.PatchSet.Id psId ) { com.google.common.base.Preconditions.checkArgument ( ( ( psId == null ) || ( psId.getParentKey ( ) . equals ( ctl.getId ( ) ) ) ) ) ; this . psId = psId ; }
protected static boolean isNotSignedIn ( java.lang.Throwable caught ) { return ( com.google.gerrit.client.rpc.RestApi.isNotSignedIn ( caught ) ) || ( ( caught instanceof com.google.gwtjsonrpc.client.RemoteJsonException ) && ( caught.getMessage ( ) . equals ( NotSignedInException.MESSAGE ) ) ) ; }
public com.google.gwtjsonrpc.server.MethodHandle getMethod ( ) { if ( ( com.google.gerrit.httpd.rpc.GerritJsonServlet.currentMethod.get ( ) ) == null ) { return super . getMethod ( ) ; } return com.google.gerrit.httpd.rpc.GerritJsonServlet.currentMethod.get ( ) ; }
com.google.gerrit.server.project.ProjectState get ( com.google.gerrit.reviewdb.client.Project.NameKey projectName ) ;
public boolean isUseContributorAgreements ( ) { return getInheritableBoolean ( Project :: getUseContributorAgreements ) ; }
protected com.google.gerrit.extensions.restapi.RestModifyView < com.google.gerrit.server.change.RevisionResource , com.google.gerrit.extensions.common.TestSubmitRuleInput > createView ( ) { return view ; }
public void testToString ( ) { org.junit.Assert.assertEquals ( "-author:bob" , com.google.gerrit.server.query.Predicate.not ( com.google.gerrit.server.query.NotPredicateTest.f ( "author" , "bob" ) ) . toString ( ) ) ; }
public java.lang.String getSecure ( java.lang.String name ) { return flags.sec.get ( section , subsection , name ) ; }
void onLineNumbers ( com.google.gwt.event.logical.shared.ValueChangeEvent < java.lang.Boolean > e ) { prefs.hideLineNumbers ( e.getValue ( ) ) ; if ( ( view ) != null ) { view.setShowLineNumbers ( prefs.hideLineNumbers ( ) ) ; } }
public boolean handles ( com.google.gerrit.reviewdb.client.AccountGroup.UUID uuid ) { return isLdapUUID ( uuid ) ; }
public org.eclipse.jgit.lib.ObjectId apply ( org.eclipse.jgit.lib.Ref ref ) { if ( ( ref.getPeeledObjectId ( ) ) != null ) { return ref.getPeeledObjectId ( ) ; } return ref.getObjectId ( ) ; }
private boolean sshdOff ( ) { return new com.google.gerrit.server.ssh.SshAddressesModule ( ) . getListenAddresses ( config ) . isEmpty ( ) ; }
public void setUp ( ) throws java.lang.Exception { super . setUp ( ) ; repository = createWorkRepository ( ) ; }
void close ( ) { if ( ( update ) != null ) { update.close ( ) ; } ins.close ( ) ; rw.close ( ) ; repo.close ( ) ; }
public static java.lang.String toGroup ( com.google.gerrit.reviewdb.client.AccountGroup.Id id ) { return ( com.google.gerrit.common.PageLinks.ADMIN_GROUPS ) + ( id.toString ( ) ) ; }
public void onSuccess ( com.google.gerrit.client.VoidResult result ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChangeInEditMode ( project , curr.getParentKey ( ) ) ) ; }
private java.lang.String formatLabelValue ( short value ) { if ( value > 0 ) { return "+" + value ; } return java.lang.Short.toString ( value ) ; }
public java.lang.Object apply ( com.google.gerrit.server.change.ChangeResource rsrc , com.google.gerrit.server.change.Index.Input input ) throws java.io.IOException { indexer.index ( rsrc.getChange ( ) ) ; return com.google.gerrit.extensions.restapi.Response.none ( ) ; }
java.util.Optional < com.google.gerrit.server.group.InternalGroup > get ( com.google.gerrit.reviewdb.client.AccountGroup.UUID groupUuid ) ;
private static com.google.gerrit.client.rpc.RestApi editFile ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , java.lang.String path ) { return com.google.gerrit.client.changes.ChangeApi.edit ( project , id ) . id ( path ) ; }
T get ( I input , com.google.gerrit.server.index.FieldDef.FillArgs args ) throws com.google.gwtorm.server.OrmException , java.io.IOException ;
private com.google.gerrit.server.events.DependencyAttribute newDependsOn ( com.google.gerrit.reviewdb.client.Change c , com.google.gerrit.reviewdb.client.PatchSet ps ) { com.google.gerrit.server.events.DependencyAttribute d = newDependencyAttribute ( c , ps ) ; d.isCurrentPatchSet = ps.getId ( ) . equals ( c.currentPatchSetId ( ) ) ; return d ; }
public org.eclipse.jgit.revwalk.RevCommit commit ( ) throws java.io.IOException { return commit ( com.google.common.base.Preconditions.checkNotNull ( updateFactory , "MetaDataUpdate.Factory" ) . create ( change.getProject ( ) , user ) ) ; }
public static PatchSet.Id toPsId ( com.google.gerrit.reviewdb.client.Change.Id id , java.lang.String psIdStr ) { return new com.google.gerrit.reviewdb.client.PatchSet.Id ( id , ( psIdStr.equals ( "edit" ) ? 0 : java.lang.Integer.parseInt ( psIdStr ) ) ) ; }
private void renderInput ( org.asciidoctor.Options options , java.io.File inputFile ) { org.asciidoctor.Asciidoctor asciidoctor = org.asciidoctor.internal.JRubyAsciidoctor.create ( ) ; asciidoctor.renderFile ( inputFile , options ) ; }
com.google.gerrit.server.api.projects.DashboardApiImpl create ( com.google.gerrit.server.project.ProjectResource project , java.lang.String id ) ;
public static void includedIn ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.info.ChangeInfo.IncludedInInfo > cb ) { com.google.gerrit.client.changes.ChangeApi.call ( project , id , "in" ) . get ( cb ) ; }
public void setUp ( ) throws java.lang.Exception { com.google.gwtorm.client.KeyUtil.setEncoderImpl ( new com.google.gwtorm.server.StandardKeyEncoder ( ) ) ; }
public void onSuccess ( com.google.gerrit.common.data.ChangeDetail result ) { changeScreen.update ( result ) ; }
private static boolean isCodeReview ( com.google.gerrit.reviewdb.client.PatchSetApproval.LabelId id ) { return "Code-Review" . equalsIgnoreCase ( id.get ( ) ) ; }
public boolean accept ( java.io.File pathname ) { return ( pathname.getName ( ) . endsWith ( ".jar" ) ) && ( pathname.isFile ( ) ) ; }
public static com.google.gerrit.server.index.IndexConfig createDefault ( ) { return com.google.gerrit.server.index.IndexConfig.create ( 0 ) ; }
protected void assertServerStartupFails ( ) throws java.lang.Exception { try ( com.google.gerrit.acceptance.GerritServer server = startImpl ( null ) ) { org.junit.Assert.fail ( "expected server startup to fail" ) ; } catch ( com.google.gerrit.acceptance.GerritServer e ) { } }
public java.lang.String getRefName ( ) { return null ; }
public void setPrologClassLoader ( com.googlecode.prolog_cafe.lang.PrologClassLoader cl ) { engine.pcl = cl ; }
public static org.eclipse.jgit.errors.ConfigInvalidException parseException ( com.google.gerrit.reviewdb.client.Change.Id changeId , java.lang.String fmt , java.lang.Object ... args ) { return new org.eclipse.jgit.errors.ConfigInvalidException ( ( ( ( "Change " + changeId ) + ": " ) + ( java.lang.String.format ( fmt , args ) ) ) ) ; }
void start ( ) { oracle.requestSuggestions ( request , this ) ; }
private java.util.List < com.google.gerrit.common.data.SubmitRecord > invalidResult ( com.googlecode.prolog_cafe.lang.Term rule , com.googlecode.prolog_cafe.lang.Term record , com.google.gerrit.server.query.change.ChangeData cd ) { return invalidResult ( rule , record , null , cd ) ; }
public void setEmail ( java.lang.String email ) { this . email = email ; }
private void setNew ( com.google.gerrit.reviewdb.Change c , com.google.gerrit.reviewdb.ChangeMessage msg ) { sendMergeFail ( c , msg , true ) ; }
private void assertParseSucceeds ( org.eclipse.jgit.revwalk.RevCommit commit ) throws java.lang.Exception { try ( com.google.gerrit.server.notedb.ChangeNotesParser parser = newParser ( commit ) ) { parser.parseAll ( ) ; } }
public java.util.Map < java.lang.String , org.eclipse.jgit.lib.Ref > filter ( java.util.Map < java.lang.String , org.eclipse.jgit.lib.Ref > refs , org.eclipse.jgit.lib.Repository repo , com.google.gerrit.server.permissions.PermissionBackend.RefFilterOptions opts ) throws com.google.gerrit.server.permissions.PermissionBackendException { return refFilterFactory.create ( this ) . filter ( refs , repo , opts ) ; }
public void init ( ) throws java.io.IOException { repoFolder = java.io.File.createTempFile ( "Git" , "" ) ; repoFolder.delete ( ) ; repo = com.googlesource.gerrit.plugins.uploadvalidator.TestUtils.createNewRepository ( repoFolder ) ; }
public void remove ( com.google.gerrit.common.data.AccessSection section ) { if ( section != null ) { accessSections.remove ( section.getRefPattern ( ) ) ; } }
public void run ( ) { int w = cm.getGutterElement ( ) . getOffsetWidth ( ) ; getElement ( ) . getStyle ( ) . setPaddingLeft ( w , Unit.PX ) ; }
public void stop ( ) { if ( ( manager ) != null ) { manager.stop ( ) ; manager = null ; sysInjector = null ; sshInjector = null ; } }
public java.lang.String format ( java.lang.String projectName , com.googlesource.gerrit.plugins.xdocs.ConfigSection cfg , java.lang.String raw ) throws java.io.IOException { return Asciidoctor.Factory.create ( com.googlesource.gerrit.plugins.xdocs.formatter.AsciidoctorFormatter.class . getClassLoader ( ) ) . convert ( raw , new java.util.HashMap < java.lang.String , java.lang.Object > ( ) ) ; }
public void run ( ) { openIndex.close ( ) ; }
public void stop ( ) { executor.shutdown ( ) ; executor = null ; }
public synchronized com.google.gerrit.metrics.Timer0 newTimer ( java.lang.String name , com.google.gerrit.metrics.Description desc ) { com.google.gerrit.metrics.dropwizard.DropWizardMetricMaker.checkTimerDescription ( name , desc ) ; define ( name , desc ) ; return newTimerImpl ( name ) ; }
public void index ( com.google.gerrit.reviewdb.client.Account.Id id ) throws java.io.IOException { for ( com.google.gerrit.server.index.Index < ? , com.google.gerrit.server.account.AccountState > i : getWriteIndexes ( ) ) { i.replace ( byIdCache.get ( id ) ) ; } }
void onAutoHideDiffTableHeader ( com.google.gwt.event.logical.shared.ValueChangeEvent < java.lang.Boolean > e ) { prefs.autoHideDiffTableHeader ( ( ! ( e.getValue ( ) ) ) ) ; view.setAutoHideDiffHeader ( ( ! ( e.getValue ( ) ) ) ) ; }
public void onKeyPress ( com.google.gwt.event.dom.client.KeyPressEvent event ) { gotoSibling ( 1 ) ; }
public abstract java.lang.String getCommand ( java.lang.String url , java.lang.String ref ) ;
private void assertMyMetaData ( java.lang.String ref , int expectedValue , java.lang.String ... expectedLog ) throws java.lang.Exception { com.google.gerrit.server.git.VersionedMetaDataTest.MyMetaData d = load ( ref , expectedValue ) ; com.google.common.truth.Truth.assertThat ( log ( d ) ) . containsExactlyElementsIn ( java.util.Arrays.asList ( expectedLog ) ) . inOrder ( ) ; }
protected void configure ( ) { bind ( com.google.gerrit.httpd.GerritOptions.class ) . toInstance ( new com.google.gerrit.httpd.GerritOptions ( false , false ) ) ; }
public boolean apply ( com.google.gerrit.server.project.ProjectState input ) { return input.getProject ( ) . getNameKey ( ) . equals ( ctl.getProject ( ) . getNameKey ( ) ) ; }
private static void addFooter ( java.lang.StringBuilder sb , org.eclipse.jgit.revwalk.FooterKey footer , java.lang.Object ... values ) { com.google.gerrit.server.notedb.ChangeUpdate.addFooter ( sb , footer ) ; for ( java.lang.Object value : values ) { sb.append ( value ) ; } sb.append ( '\n' ) ; }
public boolean isOk ( ) { return problems.isEmpty ( ) ; }
public static com.google.gerrit.client.diff.DiffApi diff ( @ com.google.gerrit.common.Nullable java.lang.String project , com.google.gerrit.reviewdb.client.PatchSet.Id id , java.lang.String path ) { return new com.google.gerrit.client.diff.DiffApi ( com.google.gerrit.client.changes.ChangeApi.revision ( project , id ) . view ( "files" ) . id ( path ) . view ( "diff" ) ) ; }
public static java.lang.String encode ( java.lang.String component ) { if ( component != null ) { try { return java.net.URLEncoder.encode ( component , "UTF-8" ) ; } catch ( java.io.UnsupportedEncodingException e ) { throw new java.lang.RuntimeException ( "JVM must support UTF-8" , e ) ; } } return null ; }
public void onSend ( ) { Util.MANAGE_SVC.restoreChange ( patchSet.getId ( ) , getMessageText ( ) , createCallback ( ) ) ; }
public void onKeyPress ( final com.google.gwt.event.dom.client.KeyPressEvent event ) { if ( com.google.gerrit.client.Gerrit.isSignedIn ( ) ) { com.google.gerrit.client.Gerrit.display ( PageLinks.MINE ) ; } else { com.google.gerrit.client.Gerrit.display ( PageLinks.ALL_OPEN ) ; } }
public void testDiffDeserializer ( ) { org.junit.Assert.assertNotNull ( "edit deserializer" , new org.eclipse.jgit.diff.EditDeserializer ( ) ) ; }
private com.google.gerrit.server.index.IndexedChangeQuery query ( com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > p , int limit ) throws com.google.gerrit.server.query.QueryParseException { return new com.google.gerrit.server.index.IndexedChangeQuery ( index , p , limit ) ; }
public static com.google.gerrit.client.rpc.RestApi reviewer ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , int reviewer ) { return com.google.gerrit.client.changes.ChangeApi.change ( project , id ) . view ( "reviewers" ) . id ( reviewer ) ; }
public boolean canSee ( com.google.gerrit.reviewdb.client.Account otherUser ) { return canSee ( otherUser.getId ( ) ) ; }
public final java.io.File getCommentPath ( java.lang.String fileName ) { return new java.io.File ( templatesPath.getPath ( ) , fileName ) ; }
public Change.Id apply ( com.google.gerrit.server.query.change.ChangeData cd ) { return cd.getId ( ) ; }
public com.google.gerrit.server.project.ChangeControl validateFor ( final com.google.gerrit.reviewdb.client.Change change ) throws com.google.gerrit.server.project.NoSuchChangeException , com.google.gwtorm.server.OrmException { return com.google.gerrit.server.project.ChangeControl.Factory.validate ( controlFor ( change ) , db.get ( ) ) ; }
public final native void refresh ( ) ;
public final native java.lang.String path ( ) ;
public static java.lang.String toPatch ( com.google.gerrit.reviewdb.client.PatchSet.Id diffBase , com.google.gerrit.reviewdb.client.PatchSet.Id revision , java.lang.String fileName ) { return com.google.gerrit.client.Dispatcher.toPatch ( "" , diffBase , revision , fileName , null , 0 ) ; }
public void onSuccess ( com.google.gerrit.client.info.ChangeInfo info ) { info.init ( ) ; addExtensionPoints ( info , initCurrentRevision ( info ) ) ; loadConfigInfo ( info , base ) ; }
protected java.lang.String prettify ( java.lang.String html , java.lang.String type ) { return com.google.gerrit.prettify.client.ClientSideFormatter.go ( com.google.gerrit.prettify.client.ClientSideFormatter.prettify.getContext ( ) , html , type ) ; }
public Change.Key getChangeKey ( ) { return new com.google.gerrit.reviewdb.client.Change.Key ( change.get ( ) . id ) ; }
public void setUp ( ) throws java.lang.Exception { repo = new org.eclipse.jgit.junit.TestRepository ( new org.eclipse.jgit.internal.storage.dfs.InMemoryRepository ( new org.eclipse.jgit.internal.storage.dfs.DfsRepositoryDescription ( com.google.gitiles.HostIndexServletTest.NAME ) ) ) ; servlet = com.google.gitiles.TestGitilesServlet.create ( repo ) ; }
private void removeChangeIdLock ( com.google.gerrit.reviewdb.client.Change.Id id ) { synchronized ( com.ericsson.gerrit.plugins.highavailability.forwarder.rest.IndexChangeRestApiServlet.changeIdLocks ) { if ( ( com.ericsson.gerrit.plugins.highavailability.forwarder.rest.IndexChangeRestApiServlet.changeIdLocks.get ( id ) . get ( ) ) == 0 ) { com.ericsson.gerrit.plugins.highavailability.forwarder.rest.IndexChangeRestApiServlet.changeIdLocks.remove ( id ) ; } } }
void onAdd ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { addReviewer ( suggestBox.getText ( ) , false ) ; }
public static com.google.gitiles.FakeHttpServletRequest newRequest ( ) { return new com.google.gitiles.FakeHttpServletRequest ( com.google.gitiles.TestGitilesUrls.URLS.getHostName ( null ) , 80 , "" , com.google.gitiles.FakeHttpServletRequest.SERVLET_PATH ) ; }
private static java.lang.String getAbbrRevId ( org.eclipse.jgit.lib.Repository repo , org.eclipse.jgit.lib.ObjectId revId ) throws java.io.IOException { try ( org.eclipse.jgit.lib.ObjectReader reader = repo.newObjectReader ( ) ) { return reader.abbreviate ( revId ) . name ( ) ; } }
private boolean isCurrentIndexVersionLatest ( ) { return ( ( reindexer ) == null ) || ( ( reindexer.getVersion ( ) ) == ( indexes.getSearchIndex ( ) . getSchema ( ) . getVersion ( ) ) ) ; }
public boolean match ( com.google.gerrit.server.query.change.ChangeData cd ) throws com.google.gwtorm.server.OrmException { java.util.Set < com.google.gerrit.reviewdb.client.Account.Id > reviewedBy = cd.reviewedBy ( ) ; return ! ( reviewedBy.isEmpty ( ) ) ? reviewedBy.contains ( id ) : id.equals ( com.google.gerrit.server.query.change.IsReviewedPredicate.NOT_REVIEWED ) ; }
void index ( com.google.gerrit.reviewdb.client.Account.Id id ) throws java.io.IOException ;
public void copy ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.server.project.ChangeControl ctl , com.google.gerrit.reviewdb.client.PatchSet ps ) throws com.google.gwtorm.server.OrmException { db.patchSetApprovals ( ) . insert ( getForPatchSet ( db , ctl , ps ) ) ; }
public void setDeny ( ) { action = com.google.gerrit.common.data.PermissionRule.Action.DENY ; }
public com.google.gerrit.server.notedb.ChangeNotes createFromIndexedChange ( com.google.gerrit.reviewdb.client.Change change ) { return new com.google.gerrit.server.notedb.ChangeNotes ( args , change ) ; }
protected void submit ( java.lang.String changeId ) throws java.lang.Exception { submit ( changeId , HttpStatus.SC_OK , null ) ; }
public void onSuccess ( com.google.gerrit.common.data.AgreementInfo result ) { if ( isAttached ( ) ) { mySigned = new java.util.HashSet ( result.accepted ) ; postRPC ( ) ; } }
private java.lang.String url ( com.google.gerrit.client.info.ChangeInfo.RevisionInfo r ) { return com.google.gerrit.common.PageLinks.toChange ( project , changeId , r.id ( ) ) ; }
private void cancel ( final javax.servlet.http.HttpServletRequest req , final javax.servlet.http.HttpServletResponse rsp ) throws java.io.IOException { callback ( false , req , rsp ) ; }
private java.lang.String format ( java.lang.String s ) { if ( ( s.length ( ) ) < ( permissionGroupWidth ) ) { return s ; } return s.substring ( 0 , permissionGroupWidth ) ; }
private void setRefLogIdent ( final com.google.gerrit.reviewdb.client.PatchSetApproval submitAudit ) { if ( submitAudit != null ) { branchUpdate.setRefLogIdent ( identifiedUserFactory.create ( submitAudit.getAccountId ( ) ) . newRefLogIdent ( ) ) ; } }
private void assertProblems ( com.google.gerrit.gpg.testutil.TestKey tk , java.lang.String ... expected ) throws java.lang.Exception { assertProblems ( tk.getPublicKey ( ) , expected ) ; }
public void index ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { index.apply ( change , new com.google.gerrit.server.change.Index.Input ( ) ) ; } catch ( java.io.IOException | com.google.gwtorm.server.OrmException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot index change" , e ) ; } }
private java.lang.String pushTagForNewCommit ( com.google.gerrit.acceptance.rest.project.PushTagIT.TagType tagType , org.eclipse.jgit.transport.RemoteRefUpdate.Status expectedStatus ) throws java.lang.Exception { return pushTag ( tagType , null , true , false , expectedStatus ) ; }
public java.util.List < com.google.gerrit.extensions.common.AccountInfo > getPastAssignees ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return getPastAssignees.apply ( change ) . value ( ) ; } catch ( com.google.gwtorm.server.OrmException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot get past assignees" , e ) ; } }
public void mergeByOtherCcingSelfNotifyNone ( ) throws java.lang.Exception { com.google.gerrit.acceptance.server.mail.StagedChange sc = stageChange ( ) ; setEmailStrategy ( other , EmailStrategy.CC_ON_OWN_COMMENTS ) ; merge ( sc.changeId , other , com.google.gerrit.extensions.api.changes.NotifyHandling.NONE ) ; assertThat ( sender ) . notSent ( ) ; }
public static void ensureAllPatchSetsLoaded ( java.lang.Iterable < com.google.gerrit.server.query.change.ChangeData > changes ) throws com.google.gwtorm.server.OrmException { for ( com.google.gerrit.server.query.change.ChangeData cd : changes ) { cd.patchSets ( ) ; } }
protected void configure ( ) { bind ( ProjectControl.GenericFactory.class ) ; factory ( ProjectControl.AssistedFactory.class ) ; bind ( ChangeControl.Factory.class ) ; }
void resizeCodeMirror ( ) { int height = getCodeMirrorHeight ( ) ; cmA.setHeight ( height ) ; cmB.setHeight ( height ) ; diffTable.sidePanel.adjustGutters ( cmB ) ; }
public int getSpecificity ( ) { return 2 ; }
private com.cisco.gerrit.plugins.slack.config.ProjectConfig getConfig ( ) throws java.lang.Exception { return getConfig ( "^WIP.*" , true , true ) ; }
protected abstract T updateProjectConfig ( com.google.gerrit.server.git.ProjectConfig config , com.google.gerrit.server.git.MetaDataUpdate md , boolean parentProjectUpdate ) throws com.google.gerrit.common.errors.PermissionDeniedException , com.google.gerrit.server.permissions.PermissionBackendException , com.google.gerrit.server.project.NoSuchProjectException , com.google.gwtorm.server.OrmException , java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException ;
public com.google.gerrit.extensions.registration.DynamicItem < T > get ( ) { return new com.google.gerrit.extensions.registration.DynamicItem ( key , com.google.gerrit.extensions.registration.DynamicItemProvider.find ( injector , type ) , "gerrit" ) ; }
public java.lang.String getAvatarUrl ( int size ) throws com.google.gerrit.extensions.restapi.RestApiException { throw new com.google.gerrit.extensions.restapi.NotImplementedException ( ) ; }
public void postUpdate ( com.google.gerrit.server.git.BatchUpdate.Context ctx ) { if ( ( change ) != null ) { topicEdited.fire ( change , ctx.getAccount ( ) , oldTopicName , ctx.getWhen ( ) ) ; } }
protected static boolean is_claimID ( final java.lang.String url ) { return ( url.contains ( ".claimid.com/" ) ) || ( url.contains ( "://claimid.com/" ) ) ; }
public void clearStarredChanges ( ) { abortStarredChanges ( ) ; starredChanges = null ; }
public void updateRepo ( com.google.gerrit.server.update.RepoContext ctx ) throws java.io.IOException { ctx.addRefUpdate ( oldId , newId , dest ) ; }
void postEvent ( com.google.gerrit.server.events.Event event , com.google.gerrit.reviewdb.server.ReviewDb db ) throws com.google.gwtorm.server.OrmException ;
public boolean contains ( int b , int e , char c ) { for ( ; b < e ; b ++ ) { if ( ( charAt ( b ) ) == c ) { return true ; } } return false ; }
public void configure ( ) { install ( dbInjector.getInstance ( com.google.gerrit.pgm.util.BatchProgramModule.class ) ) ; install ( new com.google.gerrit.server.index.DummyIndexModule ( ) ) ; factory ( ChangeResource.Factory.class ) ; }
private java.util.Optional < com.google.gerrit.server.group.InternalGroup > toInternalGroup ( org.apache.lucene.document.Document doc ) { com.google.gerrit.reviewdb.client.AccountGroup.UUID uuid = new com.google.gerrit.reviewdb.client.AccountGroup.UUID ( doc.getField ( com.google.gerrit.server.index.group.GroupField.UUID.getName ( ) ) . stringValue ( ) ) ; return groupCache.get ( ) . get ( uuid ) ; }
private void stop ( ) { synchronized ( lock ) { if ( ( manager ) != null ) { manager.shutdown ( ) ; } } }
private java.util.List < com.google.gerrit.reviewdb.RefRight > getLocalRights ( com.google.gerrit.reviewdb.ApprovalCategory.Id actionId ) { return filter ( getProjectState ( ) . getLocalRights ( actionId ) ) ; }
protected com.google.gerrit.client.reviewdb.ReviewDb openReviewDb ( ) throws com.google.gerrit.server.ssh.AbstractCommand.Failure { try { return com.google.gerrit.client.rpc.Common.getSchemaFactory ( ) . open ( ) ; } catch ( com.google.gwtorm.client.OrmException e ) { throw new com.google.gerrit.server.ssh.AbstractCommand.Failure ( 1 , "fatal: Gerrit database is offline" , e ) ; } }
public void close ( ) { if ( ( walk ( ) ) != null ) { walk ( ) . close ( ) ; } }
private static java.lang.String toPatch ( java.lang.String type , com.google.gerrit.reviewdb.client.PatchSet.Id diffBase , com.google.gerrit.reviewdb.client.Patch.Key id ) { return com.google.gerrit.client.Dispatcher.toPatch ( type , diffBase , id.getParentKey ( ) , id.get ( ) , null , 0 ) ; }
void onEdit ( ) { if ( canEdit ) { com.google.gwt.user.client.ui.UIObject.setVisible ( form , true ) ; input.setText ( text.getText ( ) ) ; input.setFocus ( true ) ; } }
protected static long lastUpdatedMs ( com.google.gerrit.reviewdb.client.Change c ) { return c.getLastUpdatedOn ( ) . getTime ( ) ; }
void onRebaseEdit ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { com.google.gerrit.client.change.EditActions.rebaseEdit ( getProject ( ) , changeId , publishEdit , rebaseEdit , deleteEdit ) ; }
public void setUp ( ) throws java.lang.Exception { project2 = createProject ( "p2" ) ; project3 = createProject ( "p3" ) ; }
public void setUserAccountId ( com.google.gerrit.reviewdb.client.Account.Id id ) { key = new com.google.gerrit.httpd.WebSessionManager.Key ( ( "id:" + id ) ) ; val = new com.google.gerrit.httpd.WebSessionManager.Val ( id , 0 , false , null , 0 , null ) ; }
public static java.lang.String toPatch ( com.google.gerrit.reviewdb.client.PatchSet.Id diffBase , com.google.gerrit.reviewdb.client.PatchSet.Id revision , java.lang.String fileName , com.google.gerrit.client.diff.DisplaySide side , int line ) { return com.google.gerrit.client.Dispatcher.toPatch ( "" , diffBase , revision , fileName , side , line ) ; }
private void index ( com.google.gerrit.reviewdb.client.AccountGroup group ) throws java.io.IOException { indexCollection.getSearchIndex ( ) . replace ( group ) ; }
private boolean canForgeGerritServerIdentity ( ) { return canPerform ( Permission.FORGE_SERVER ) ; }
public void onFailure ( java.lang.Throwable caught ) { enableButtons ( true ) ; super . onFailure ( caught ) ; }
public void createProjectFoo ( ) throws java.lang.Exception { java.lang.String name = "foo" ; com.google.common.truth.Truth.assertThat ( name ) . isEqualTo ( gApi.projects ( ) . name ( name ) . create ( ) . get ( ) . name ) ; }
public final native void setLine ( int line ) ;
private ProjectResetter.Builder builder ( ) { return builder ( null , null , null , null ) ; }
protected void submit ( java.lang.String changeId , com.google.gerrit.extensions.api.changes.SubmitInput input ) throws java.lang.Exception { submit ( changeId , input , null , null , true ) ; }
public java.util.List < T > toList ( ) { if ( ( items ) == null ) { throw new java.lang.IllegalStateException ( "Results already obtained" ) ; } final java.util.List < T > r = new java.util.ArrayList < T > ( items ) ; items = null ; return r ; }
public boolean allowsEdit ( com.google.gerrit.reviewdb.client.Account.FieldName field ) { return editableAccountFields.contains ( field ) ; }
protected com.google.gerrit.server.change.ChangeInserter newChangeForBranch ( org.eclipse.jgit.junit.TestRepository < com.google.gerrit.testutil.InMemoryRepositoryManager.Repo > repo , java.lang.String branch ) throws java.lang.Exception { return newChange ( repo , null , branch , null , null ) ; }
public com.google.gerrit.server.plugins.InstallPlugin create ( com.google.gerrit.extensions.restapi.TopLevelResource parent , java.lang.String id ) throws com.google.gerrit.extensions.restapi.ResourceNotFoundException { return new com.google.gerrit.server.plugins.InstallPlugin ( loader , com.google.gerrit.server.util.Url.decode ( id ) , true ) ; }
public com.google.gerrit.extensions.client.SubmitType testSubmitType ( com.google.gerrit.extensions.common.TestSubmitRuleInput in ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return testSubmitType.apply ( revision , in ) ; } catch ( com.google.gwtorm.server.OrmException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot test submit type" , e ) ; } }
public static com.google.gerrit.client.config.ServerInfo info ( ) { return com.google.gerrit.client.Gerrit.myServerInfo ; }
public static com.google.gerrit.client.rpc.RestApi project ( com.google.gerrit.reviewdb.client.Project.NameKey name ) { return new com.google.gerrit.client.rpc.RestApi ( "/projects/" ) . id ( name.get ( ) ) ; }
public java.lang.String toProject ( final com.google.gerrit.client.reviewdb.Project.NameKey project ) { final java.lang.StringBuilder r = new java.lang.StringBuilder ( ) ; com.google.gerrit.client.data.GitwebLink.p ( r , project ) ; com.google.gerrit.client.data.GitwebLink.a ( r , "summary" ) ; return ( baseUrl ) + r ; }
java.lang.String publishComments ( java.lang.String changeId , int ps ) ;
public void stop ( ) { if ( ( pool ) != null ) { pool = null ; } }
public com.google.common.util.concurrent.ListenableFuture < java.lang.Void > apply ( java.util.List < ? > input ) throws java.lang.Exception { mpm.end ( ) ; return com.google.common.util.concurrent.Futures.immediateFuture ( null ) ; }
public void configure ( ) { listener ( ) . to ( com.google.gerrit.lucene.LuceneVersionManager.class ) ; if ( onlineUpgrade ) { listener ( ) . to ( com.google.gerrit.server.index.OnlineUpgrader.class ) ; } }
public com.google.gerrit.reviewdb.client.Change getChange ( ) { return update.getChange ( ) ; }
static com.google.gerrit.server.patch.PatchListEntry empty ( final java.lang.String fileName ) { return new com.google.gerrit.server.patch.PatchListEntry ( com.google.gerrit.reviewdb.client.Patch.ChangeType.MODIFIED , com.google.gerrit.reviewdb.client.Patch.PatchType.UNIFIED , null , fileName , com.google.gerrit.server.patch.PatchListEntry.EMPTY_HEADER , java.util.Collections.< org.eclipse.jgit.diff.Edit > emptyList ( ) , 0 , 0 , 0 ) ; }
public void testAppend_float ( ) { final com.google.gwtexpui.safehtml.client.SafeHtmlBuilder b = new com.google.gwtexpui.safehtml.client.SafeHtmlBuilder ( ) ; org.junit.Assert.assertSame ( b , b.append ( 0.0F ) ) ; org.junit.Assert.assertEquals ( "0.0" , b.asString ( ) ) ; }
public com.google.gerrit.server.CurrentUser getUser ( ) { if ( ! ( ReviewAssistant.realUser ) ) { return pluginUser ; } return identifiedUserFactory.create ( change.getOwner ( ) ) ; }
public void delete ( com.google.gerrit.reviewdb.client.Change.Id id ) throws java.io.IOException { java.lang.String idString = java.lang.Integer.toString ( id.get ( ) ) ; delete ( idString , openIndex ) ; delete ( idString , closedIndex ) ; }
public void onSuccess ( com.google.gerrit.client.config.ServerInfo info ) { com.google.gerrit.client.Gerrit.myServerInfo = info ; }
public final com.google.gerrit.server.index.SiteIndexer < K , V , I > getSiteIndexer ( ) { return siteIndexer ; }
protected void updateRepoImpl ( com.google.gerrit.server.git.BatchUpdate.RepoContext ctx ) throws com.google.gerrit.server.git.IntegrationException { args.mergeTip.moveTipTo ( toMerge , toMerge ) ; }
public java.util.List < com.google.gerrit.extensions.common.AccountExternalIdInfo > getExternalIds ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return getExternalIds.apply ( account ) ; } catch ( java.io.IOException | com.google.gwtorm.server.OrmException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot get external IDs" , e ) ; } }
public static com.google.gwtexpui.safehtml.client.PrettyFormatter newFormatter ( java.lang.String lang ) { return new com.google.gwtexpui.safehtml.client.PrettyFormatter.Pretty ( lang ) ; }
public void run ( ) throws java.lang.Exception { validate ( ) ; setAccount ( ) ; }
protected void setTitleText ( final java.lang.String text ) { headerText.setText ( text ) ; }
public static < T > com.google.gerrit.server.query.Predicate < T > not ( final com.google.gerrit.server.query.Predicate < T > that ) { if ( that instanceof com.google.gerrit.server.query.NotPredicate ) { return that.getChild ( 0 ) ; } return new com.google.gerrit.server.query.NotPredicate ( that ) ; }
public java.lang.String getLine ( final int i ) { return getLines ( i , ( i + 1 ) , true ) ; }
private java.nio.file.Path getDeveloperBuckOut ( ) { try { return com.google.gerrit.launcher.GerritLauncher.getDeveloperBuckOut ( ) ; } catch ( java.io.FileNotFoundException e ) { return null ; } }
public RefUpdate.Result restoreFile ( com.google.gerrit.server.edit.ChangeEdit edit , java.lang.String file ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.server.project.InvalidChangeOperationException , java.io.IOException { return modify ( com.google.gerrit.server.edit.ChangeEditModifier.TreeOperation.RESTORE_ENTRY , edit , file , null , null ) ; }
public void onSuccess ( com.google.gerrit.client.changes.ReviewInput result ) { com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( project , psId ) ) ; }
public java.lang.String getMessage ( ) { org.eclipse.jgit.transport.RemoteRefUpdate refUpdate = result.getRemoteUpdate ( ref ) ; return message ( refUpdate ) ; }
public org.kohsuke.github.GitHub getHub ( ) throws java.io.IOException { if ( ( token ) == null ) { return null ; } return org.kohsuke.github.GitHub.connectUsingOAuth ( config.gitHubApiUrl , token.accessToken ) ; }
void onReply ( com.google.gwt.event.dom.client.ClickEvent e ) { onReply ( ) ; }
public static java.lang.String refsStarredChangesPrefix ( com.google.gerrit.reviewdb.client.Change.Id changeId ) { return com.google.gerrit.reviewdb.client.RefNames.buildRefsPrefix ( com.google.gerrit.reviewdb.client.RefNames.REFS_STARRED_CHANGES , changeId.get ( ) ) . toString ( ) ; }
public java.lang.String format ( java.lang.String projectName , java.lang.String revision , com.googlesource.gerrit.plugins.xdocs.ConfigSection cfg , java.lang.String raw ) throws java.io.IOException ;
public abstract com.google.gerrit.server.mail.receive.MailMessage.Builder id ( java.lang.String val ) ;
private void readGroupList ( ) throws java.io.IOException { groupList = com.google.gerrit.server.git.GroupList.parse ( projectName , readUTF8 ( GroupList.FILE_NAME ) , this ) ; }
public static com.google.gerrit.server.query.change.InternalChangeQuery query ( com.google.gerrit.server.query.change.InternalChangeQuery q ) { return q.setRequestedFields ( ChangeField.CHANGE , ChangeField.PATCH_SET , ChangeField.MERGEABLE ) ; }
void onReload ( com.google.gwt.event.dom.client.ClickEvent e ) { e.preventDefault ( ) ; com.google.gerrit.client.Gerrit.display ( com.google.gerrit.common.PageLinks.toChange ( project , changeId ) ) ; }
Account.Id getAccountId ( ) { return ( ( com.google.gerrit.server.IdentifiedUser ) ( getControl ( ) . getCurrentUser ( ) ) ) . getAccountId ( ) ; }
public static java.lang.String toPatch ( @ com.google.gerrit.common.Nullable com.google.gerrit.reviewdb.client.Project.NameKey project , java.lang.String type , com.google.gerrit.client.DiffObject diffBase , com.google.gerrit.reviewdb.client.Patch.Key id ) { return com.google.gerrit.client.Dispatcher.toPatch ( type , project , diffBase , id.getParentKey ( ) , id.get ( ) , null , 0 ) ; }
java.util.Optional < com.google.gerrit.server.account.AccountState > get ( com.google.gerrit.reviewdb.client.Account.Id accountId ) ;
public final boolean isHttpPasswordSettingsEnabled ( ) { return ( gitBasicAuthPolicy ( ) ) != ( com.google.gerrit.extensions.client.GitBasicAuthPolicy.LDAP ) ; }
public void display ( final java.lang.String commitMessage ) { display ( null , null , false , commitMessage ) ; }
public void setTimeForTesting ( ) { resetTimeWithClockStep ( 1 , java.util.concurrent.TimeUnit.MILLISECONDS ) ; }
private static void updateUiLink ( java.lang.String token ) { if ( ( com.google.gerrit.client.Gerrit.uiSwitcherLink ) != null ) { com.google.gerrit.client.Gerrit.uiSwitcherLink.setHref ( com.google.gerrit.client.Gerrit.getUiSwitcherUrl ( token ) ) ; } }
public static void updated ( com.google.gerrit.reviewdb.client.Change c ) { c.setLastUpdatedOn ( com.google.gerrit.common.TimeUtil.nowTs ( ) ) ; }
private void initProviderJce ( ) { setRandomFactory ( new org.apache.sshd.common.random.SingletonRandomFactory ( org.apache.sshd.common.random.JceRandomFactory.INSTANCE ) ) ; }
private void uncacheSshKeys ( final java.lang.String userName ) { sshKeyCache.evict ( userName ) ; }
private void initChangeRepo ( ) throws java.io.IOException { if ( ( changeRepo ) == null ) { changeRepo = openRepo ( projectName ) ; } }
public void onSuccess ( java.lang.String result ) { com.google.gerrit.client.change.EditFileAction edit = new com.google.gerrit.client.change.EditFileAction ( id , result , path , style , editButton , replyButton ) ; edit.onEdit ( ) ; }
private void display ( final com.google.gerrit.client.projects.ProjectMap result ) { projects.display ( result ) ; projects.finishDisplay ( ) ; }
public static java.util.List < java.lang.String > names ( com.google.gerrit.acceptance.TestAccount ... accounts ) { return com.google.gerrit.acceptance.TestAccount.names ( java.util.Arrays.asList ( accounts ) ) ; }
public void onOk ( ) { deleteBranches ( refs ) ; }
public static java.nio.file.FileSystem newZipFileSystem ( java.nio.file.Path zip ) throws java.io.IOException { return java.nio.file.FileSystems.newFileSystem ( java.net.URI.create ( ( "jar:" + ( zip.toUri ( ) ) ) ) , java.util.Collections.< java.lang.String , java.lang.String > emptyMap ( ) ) ; }
protected java.lang.Object createServiceHandle ( ) throws java.lang.Exception { return new com.google.gerrit.server.patch.PatchDetailServiceImpl ( com.google.gerrit.server.GerritServer.getInstance ( ) ) ; }
void onLogin ( ) { async.append ( log ( ( "LOGIN FROM " + ( session.get ( ) . getRemoteAddressAsString ( ) ) ) ) ) ; audit ( context.get ( ) , "0" , "LOGIN" ) ; }
java.lang.String getAuthorizationUrl ( ) ;
private boolean isDraftVisible ( com.google.gerrit.reviewdb.server.ReviewDb db ) throws com.google.gwtorm.server.OrmException { return ( isOwner ( ) ) || ( isReviewer ( db ) ) ; }
public static < T > com.google.gerrit.extensions.registration.DynamicSet < T > emptySet ( ) { return new com.google.gerrit.extensions.registration.DynamicSet ( java.util.Collections.< java.util.concurrent.atomic.AtomicReference < com.google.inject.Provider < T > > > emptySet ( ) ) ; }
com.google.gerrit.server.project.SubmitRuleEvaluator create ( com.google.gerrit.server.query.change.ChangeData cd ) ;
protected void submit ( java.lang.String changeId ) throws java.lang.Exception { submit ( changeId , new com.google.gerrit.extensions.api.changes.SubmitInput ( ) , null , null , true ) ; }
private void removeIdLock ( T id ) { synchronized ( idLocks ) { if ( ( idLocks.get ( id ) . get ( ) ) == 0 ) { idLocks.remove ( id ) ; } } }
private com.google.gerrit.server.project.ProjectControl user ( java.lang.String name , com.google.gerrit.reviewdb.client.AccountGroup ... memberOf ) { java.lang.String canonicalWebUrl = "http://localhost" ; return new com.google.gerrit.server.project.ProjectControl ( java.util.Collections.< com.google.gerrit.reviewdb.client.AccountGroup.UUID > emptySet ( ) , java.util.Collections.< com.google.gerrit.reviewdb.client.AccountGroup.UUID > emptySet ( ) , projectCache , sectionSorter , canonicalWebUrl , new com.google.gerrit.server.project.RefControlTest.MockUser ( name , memberOf ) , newProjectState ( ) ) ; }
private com.cisco.gerrit.plugins.slack.config.ProjectConfig getConfig ( boolean publishOnPatchSetCreated ) throws java.lang.Exception { return getConfig ( "^WIP.*" , publishOnPatchSetCreated , true , true , true ) ; }
private static com.google.gerrit.server.index.Schema < com.google.gerrit.server.query.change.ChangeData > release ( java.util.Collection < com.google.gerrit.server.index.FieldDef < com.google.gerrit.server.query.change.ChangeData , ? > > fields ) { return new com.google.gerrit.server.index.Schema ( true , fields ) ; }
com.google.gerrit.sshd.DispatchCommand create ( java.util.Map < java.lang.String , com.google.inject.Provider < org.apache.sshd.server.Command > > map ) ;
public com.google.gerrit.extensions.api.projects.Projects projects ( ) { return projects ; }
private com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > rewrite ( com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > in ) throws com.google.gerrit.server.query.QueryParseException { return rewrite.rewrite ( in , 0 ) ; }
public abstract void encode ( T obj , com.google.protobuf.CodedOutputStream out ) ;
public void onEvent ( com.google.gerrit.server.events.Event event ) { if ( event instanceof com.google.gerrit.server.events.ProjectEvent ) { pool.execute ( new com.ericsson.gerrit.plugins.eventslog.EventHandler.StoreEventTask ( ( ( com.google.gerrit.server.events.ProjectEvent ) ( event ) ) ) ) ; } }
public com.google.gerrit.server.notedb.ChangeNotes notes ( ) throws com.google.gwtorm.server.OrmException { if ( ( notes ) == null ) { com.google.gerrit.reviewdb.client.Change c = change ( ) ; notes = notesFactory.create ( db , c.getProject ( ) , c.getId ( ) ) ; } return notes ; }
void setPrivate ( boolean value , @ com.google.gerrit.common.Nullable java.lang.String message ) throws com.google.gerrit.extensions.restapi.RestApiException ;
public void configure ( ) { factory ( ChangeUpdate.Factory.class ) ; factory ( ChangeDraftUpdate.Factory.class ) ; bind ( com.google.gerrit.server.IdentifiedUser.class ) . toInstance ( user ) ; }
public boolean match ( com.google.gerrit.server.query.change.ChangeData cd ) throws com.google.gwtorm.server.OrmException { com.google.gerrit.reviewdb.client.Change change = cd.change ( ) ; return ( change != null ) && ( ( change.getSortKey ( ) . compareTo ( getValue ( ) ) ) > 0 ) ; }
public static java.lang.String toPatch ( final java.lang.String type , final com.google.gerrit.client.reviewdb.Patch.Key id ) { return ( ( "patch," + type ) + "," ) + ( id.toString ( ) ) ; }
public void deleteAllowedWithForcePushPermission ( ) throws java.lang.Exception { grant ( project , "refs/*" , Permission.PUSH , true ) ; assertDeleteRef ( org.eclipse.jgit.transport.RemoteRefUpdate.Status.OK ) ; }
private com.google.gerrit.server.project.ChangeControl control ( com.google.gerrit.reviewdb.client.Change change , com.google.gerrit.reviewdb.client.Account.Id id ) throws com.google.gerrit.server.project.NoSuchChangeException { try { return changeControlFactory.controlFor ( db , change , genericUserFactory.create ( id ) ) ; } catch ( com.google.gwtorm.server.OrmException e ) { throw new com.google.gerrit.server.project.NoSuchChangeException ( change.getId ( ) ) ; } }
public void newPatchSetByOtherOnReviewableChangeNotifyOwner ( ) throws java.lang.Exception { com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableChange ( ) ; pushTo ( sc , "refs/for/master%notify=OWNER" , other ) ; assertThat ( sender ) . notSent ( ) ; }
com.google.gitiles.CommitData.Builder setArchiveFormat ( @ javax.annotation.Nullable com.google.gitiles.ArchiveFormat archiveFormat ) { this . archiveFormat = archiveFormat ; return this ; }
private void asScript ( final org.w3c.dom.Element scriptNode ) { scriptNode.removeAttribute ( "id" ) ; scriptNode.setAttribute ( "type" , "text/javascript" ) ; scriptNode.setAttribute ( "language" , "javascript" ) ; }
public void onExit ( int rc ) { exit.onExit ( translateExit ( rc ) ) ; log ( rc ) ; }
private void writeToResponse ( javax.servlet.http.HttpServletResponse res , java.io.InputStream inputStream ) throws java.io.IOException { try ( java.io.InputStream in = inputStream ; java.io.OutputStream out = res.getOutputStream ( ) ) { com.google.common.io.ByteStreams.copy ( in , out ) ; } }
public void testReplaceEscaping ( ) { org.junit.Assert.assertEquals ( "<a href=\"a&quot;&amp;&#39;&lt;&gt;b\">find</a>" , new com.google.gwtexpui.safehtml.client.LinkFindReplace ( "find" , "a\"&\'<>b" ) . replace ( "find" ) ) ; }
private boolean isHidden ( ) { return getProject ( ) . getState ( ) . equals ( com.google.gerrit.extensions.client.ProjectState.HIDDEN ) ; }
protected void preDisplay ( final java.util.List < com.google.gerrit.client.reviewdb.AccountGroup > result ) { groups.display ( result ) ; groups.finishDisplay ( ) ; }
private void checkNotUsed ( final java.lang.String n ) throws com.google.gwtorm.server.OrmException { if ( allNames.contains ( n ) ) { throw new com.google.gwtorm.server.OrmException ( ( ( "Name " + n ) + " already used" ) ) ; } }
public void testCreateLinkForWebUiSameUrlAndText ( ) { mockUnconnectableStoryboard ( ) ; replayMocks ( ) ; com.googlesource.gerrit.plugins.its.storyboard.StoryboardItsFacade itsFacade = createStoryboardItsFacade ( ) ; java.lang.String actual = itsFacade.createLinkForWebui ( "Test-Url" , "Test-Url" ) ; assertEquals ( "Test-Url" , actual ) ; }
protected com.google.gerrit.server.index.QueryOptions createOptions ( com.google.gerrit.server.index.IndexConfig indexConfig , int start , int limit , java.util.Set < java.lang.String > requestedFields ) { return com.google.gerrit.server.index.change.IndexedChangeQuery.createOptions ( indexConfig , start , limit , requestedFields ) ; }
public synchronized void sendRedirect ( java.lang.String msg ) { status = SC_FOUND ; committed = true ; }
public java.lang.String apply ( com.google.gerrit.server.account.AccountResource rsrc ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.extensions.restapi.ResourceNotFoundException { return rsrc.getUser ( ) . getUserName ( ) . orElseThrow ( ResourceNotFoundException :: new ) ; }
public boolean isContextLine ( ) { return ! ( isModifiedLine ( ) ) ; }
private void assertParseSucceeds ( org.eclipse.jgit.revwalk.RevCommit commit ) throws java.lang.Exception { newParser ( commit ) . parseAll ( ) ; }
private java.util.List < com.google.gerrit.common.data.SubmitRecord > ruleError ( java.lang.String err ) { return ruleError ( err , null ) ; }
private java.lang.String getProjectName ( ) { return control.getProjectControl ( ) . getProjectState ( ) . getName ( ) ; }
public void deleteAll ( ) throws java.io.IOException { writer.deleteAll ( ) ; }
public static com.google.gerrit.server.patch.PatchListKey againstDefaultBase ( org.eclipse.jgit.lib.AnyObjectId newId , com.google.gerrit.extensions.client.DiffPreferencesInfo.Whitespace ws ) { return new com.google.gerrit.server.patch.PatchListKey ( null , newId , ws ) ; }
public void deletingNonExistingEditRest ( ) throws java.lang.Exception { com.google.gerrit.acceptance.RestResponse r = adminSession.delete ( urlEdit ( ) ) ; com.google.common.truth.Truth.assertThat ( r.getStatusCode ( ) ) . isEqualTo ( org.apache.http.HttpStatus.SC_NOT_FOUND ) ; }
public com.google.gerrit.server.notedb.ChangeNotes create ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.Project.NameKey project , com.google.gerrit.reviewdb.client.Change.Id changeId ) throws com.google.gwtorm.server.OrmException { com.google.gerrit.reviewdb.client.Change change = db.changes ( ) . get ( changeId ) ; return new com.google.gerrit.server.notedb.ChangeNotes ( repoManager , migration , allUsersProvider , project , change ) ; }
protected java.lang.String getRefName ( ) { return com.google.gerrit.reviewdb.client.RefNames.refsDraftComments ( getId ( ) , accountId ) ; }
public com.google.common.collect.SetMultimap < com.google.gerrit.server.notedb.ReviewerState , com.google.gerrit.reviewdb.client.Account.Id > reviewers ( ) throws com.google.gwtorm.server.OrmException { return approvalsUtil.getReviewers ( notes ( ) , approvals ( ) . values ( ) ) ; }
public com.google.gerrit.extensions.restapi.RestView < com.google.gerrit.server.project.ProjectResource > list ( ) throws com.google.gerrit.extensions.restapi.ResourceNotFoundException { return list.get ( ) ; }
public void delete ( com.google.gerrit.reviewdb.client.Change change ) throws java.io.IOException { delete ( new com.google.gerrit.server.query.change.ChangeData ( change ) ) ; }
public void testEscapeFirstChar ( ) { org.junit.Assert.assertEquals ( com.google.gerrit.server.StringUtil.escapeString ( "\tLeading tab" ) , "\\tLeading tab" ) ; }
protected java.lang.String getRefName ( ) { return com.google.gerrit.reviewdb.client.RefNames.refsDraftComments ( getChangeId ( ) , author ) ; }
protected java.lang.Object createServiceHandle ( ) throws java.lang.Exception { return new com.google.gerrit.server.AccountServiceImpl ( server ) ; }
protected void configure ( ) { bind ( com.google.gerrit.httpd.GerritOptions.class ) . toInstance ( new com.google.gerrit.httpd.GerritOptions ( config , false , false , false ) ) ; }
public void testNextAddressId ( ) throws java.lang.Exception { final com.google.gwtorm.data.PhoneBookDb schema = openAndCreate ( ) ; final int a = schema.nextAddressId ( ) ; final int b = schema.nextAddressId ( ) ; org.junit.Assert.assertTrue ( ( a != b ) ) ; }
private static boolean isInvalidXSRF ( final java.lang.Throwable caught ) { return ( caught instanceof com.google.gwt.user.client.rpc.InvocationException ) && ( caught.getMessage ( ) . equals ( JsonUtil.ERROR_INVALID_XSRF ) ) ; }
, @ com.google.gerrit.acceptance.GerritConfig ( name = "suggest.from" , value = "1" ) , @ com.google.gerrit.acceptance.GerritConfig ( name = "accounts.visibility" , value = "NONE" ) } ) public void suggestReviewersNoResult2 ( ) throws java.lang.Exception { java.lang.String changeId = createChange ( ) . getChangeId ( ) ; java.util.List < com.google.gerrit.extensions.common.SuggestedReviewerInfo > reviewers = suggestReviewers ( changeId , name ( "u" ) , 6 ) ; com.google.common.truth.Truth.assertThat ( reviewers ) . isEmpty ( ) ; }
public java.lang.String toString ( ) { return format ( ) ; }
public void delete ( com.google.gerrit.reviewdb.client.Change.Id id ) throws java.io.IOException { }
public int getMaxAge ( ) { return ( maxAge ) > 0 ? ( maxAge ) * 5 : maxAge ; }
void downloadRequired ( ) { this . required = true ; download ( ) ; }
private boolean match ( java.lang.String destBranch , java.lang.String refPattern ) { return com.google.gerrit.server.project.RefPatternMatcher.getMatcher ( refPattern ) . match ( destBranch , getUser ( ) ) ; }
public com.google.common.util.concurrent.ListenableFuture < ? > index ( com.google.gerrit.reviewdb.client.Change change ) { return index ( new com.google.gerrit.server.query.change.ChangeData ( change ) ) ; }
public java.lang.Object apply ( com.google.gerrit.extensions.restapi.TopLevelResource resource ) { format = com.google.gerrit.server.OutputFormat.JSON ; return display ( null ) ; }
private com.google.gerrit.reviewdb.client.PatchSetApproval copy ( com.google.gerrit.reviewdb.client.PatchSetApproval src ) { return new com.google.gerrit.reviewdb.client.PatchSetApproval ( src.getPatchSetId ( ) , src ) ; }
public java.lang.String name ( ) { return name ; }
private static void assertOwner ( java.lang.String ref , com.google.gerrit.server.project.ProjectControl u ) { org.junit.Assert.assertTrue ( ( "OWN " + ref ) , u.controlForRef ( ref ) . isOwner ( ) ) ; }
void autoOpen ( ) { if ( ( commentList ) == null ) { autoOpen = true ; } else if ( ! ( commentList.isEmpty ( ) ) ) { setOpen ( true ) ; } }
public void close ( ) ;
public void postEvent ( com.google.gerrit.reviewdb.client.Change change , com.google.gerrit.server.events.ChangeEvent event ) throws com.google.gwtorm.server.OrmException { fireEvent ( change , event ) ; }
protected void onClick ( final com.google.gwt.user.client.Event event ) { com.google.gerrit.client.Gerrit.display ( getTargetHistoryToken ( ) , createScreen ( ) ) ; com.google.gwt.user.client.DOM.eventPreventDefault ( event ) ; }
protected final < T > org.easymock.Capture < T > createCapture ( ) { return new org.easymock.Capture ( ) ; }
private net.sf.ehcache.constructs.blocking.SelfPopulatingCache startCacheSshKeys ( ) { final net.sf.ehcache.Cache dc = com.google.gerrit.server.GerritServer.cacheMgr.getCache ( "sshkeys" ) ; final net.sf.ehcache.constructs.blocking.SelfPopulatingCache r ; r = new net.sf.ehcache.constructs.blocking.SelfPopulatingCache ( dc , new com.google.gerrit.server.ssh.SshKeyCacheEntryFactory ( this ) ) ; com.google.gerrit.server.GerritServer.cacheMgr.replaceCacheWithDecoratedCache ( dc , r ) ; return r ; }
public com.google.common.util.concurrent.CheckedFuture < ? , java.io.IOException > indexAsync ( com.google.gerrit.reviewdb.client.Change.Id id ) { return ( executor ) != null ? submit ( new com.google.gerrit.server.index.ChangeIndexer.Task ( id , false ) ) : com.google.common.util.concurrent.Futures.< java.lang.Object , java.io.IOException > immediateCheckedFuture ( null ) ; }
public void testBackreference ( ) { org.junit.Assert.assertEquals ( "<a href=\"/bug?id=123\">issue 123</a>" , new com.google.gwtexpui.safehtml.client.LinkFindReplace ( "(bug|issue)\\s*([0-9]+)" , "/bug?id=$2" ) . replace ( "issue 123" ) ) ; }
public boolean get ( org.eclipse.jgit.lib.ObjectId commit , org.eclipse.jgit.lib.Ref intoRef , com.google.gerrit.extensions.client.SubmitType submitType , java.lang.String mergeStrategy , com.google.gerrit.reviewdb.client.Branch.NameKey dest , org.eclipse.jgit.lib.Repository repo ) { throw new java.lang.UnsupportedOperationException ( "Mergeability checking disabled" ) ; }
protected void configure ( ) { factory ( DeleteExternalIds.Factory.class ) ; factory ( ExternalIdDetailFactory.Factory.class ) ; }
public boolean isBlocked ( java.lang.String permissionName ) { return ! ( doCanPerform ( permissionName , false , true ) ) ; }
public com.google.gerrit.server.query.change.SortKeyPredicate.After copy ( java.lang.String newValue ) { return new com.google.gerrit.server.query.change.SortKeyPredicate.After ( schema , dbProvider , newValue ) ; }
public void addPatchSets ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.server.data.ChangeAttribute a , java.util.Collection < com.google.gerrit.reviewdb.client.PatchSet > ps , com.google.gerrit.common.data.LabelTypes labelTypes ) { addPatchSets ( db , a , ps , null , false , null , labelTypes ) ; }
com.google.gerrit.server.notedb.ChangeUpdate create ( com.google.gerrit.reviewdb.client.Change change , @ com.google.gerrit.common.Nullable com.google.gerrit.reviewdb.client.Account.Id accountId , org.eclipse.jgit.lib.PersonIdent authorIdent , java.util.Date when , java.util.Comparator < java.lang.String > labelNameComparator ) ;
public void addRefUpdate ( org.eclipse.jgit.transport.ReceiveCommand cmd ) { commands.add ( cmd ) ; }
private static java.lang.String shortenSubject ( java.lang.String subject ) { if ( ( subject.length ( ) ) < 73 ) { return subject ; } return ( subject.substring ( 0 , 69 ) ) + "..." ; }
private void logDebug ( java.lang.String msg , java.lang.Object ... args ) { if ( com.google.gerrit.server.git.SubmoduleOp.log.isDebugEnabled ( ) ) { com.google.gerrit.server.git.SubmoduleOp.log.debug ( ( ( orm.getSubmissionId ( ) ) + msg ) , args ) ; } }
public com.google.gerrit.extensions.common.MergeableInfo mergeable ( ) throws com.google.gerrit.extensions.restapi.RestApiException { try { return mergeable.apply ( revision ) ; } catch ( com.google.gwtorm.server.OrmException | java.io.IOException e ) { throw new com.google.gerrit.extensions.restapi.RestApiException ( "Cannot check mergeability" , e ) ; } }
private void newChangeFooter ( ) { if ( ( changeUrl ( ) ) != null ) { openFooter ( ) ; body.append ( "View this change at " ) ; body.append ( changeUrl ( ) ) ; body.append ( "\n" ) ; } }
void updateContact ( java.lang.String fullName , java.lang.String emailAddr , com.google.gwtjsonrpc.common.AsyncCallback < com.google.gerrit.reviewdb.client.Account > callback ) ;
private void grantForcePush ( ) throws java.lang.Exception { grant ( project , "refs/heads/*" , Permission.PUSH , true , com.google.gerrit.server.group.SystemGroupBackend.ANONYMOUS_USERS ) ; }
private static java.lang.String formatLabelValue ( short value ) { if ( value > 0 ) { return "+" + value ; } return java.lang.Short.toString ( value ) ; }
private static com.google.gerrit.server.notedb.ChangeNotesParser.ApprovalKey create ( com.google.gerrit.reviewdb.client.PatchSet.Id psId , com.google.gerrit.reviewdb.client.Account.Id accountId , java.lang.String label ) { return new com.google.gerrit.server.notedb.AutoValue_ChangeNotesParser_ApprovalKey ( psId , accountId , label ) ; }
private java.util.Iterator < org.bouncycastle.openpgp.PGPSignature > getSignaturesForId ( org.bouncycastle.openpgp.PGPPublicKey key , java.lang.String userId ) { java.util.Iterator < org.bouncycastle.openpgp.PGPSignature > result = key.getSignaturesForID ( userId ) ; return result != null ? result : java.util.Collections.emptyIterator ( ) ; }
public java.lang.String commitMessage ( ) throws com.google.gwtorm.server.OrmException , java.io.IOException { if ( ( commitMessage ) == null ) { loadCommitData ( ) ; } return commitMessage ; }
com.google.gerrit.client.reviewdb.Account get ( com.google.gerrit.client.reviewdb.Account.Id key ) throws com.google.gwtorm.client.OrmException ;
public void abandonReviewableChangeNotifyOwner ( ) throws java.lang.Exception { com.google.gerrit.acceptance.server.mail.StagedChange sc = stageReviewableChange ( ) ; abandon ( sc.changeId , sc.owner , com.google.gerrit.extensions.api.changes.NotifyHandling.OWNER ) ; assertThat ( sender ) . notSent ( ) ; }
public void doPatchsetCreatedHook ( com.google.gerrit.reviewdb.client.Change change , com.google.gerrit.reviewdb.client.PatchSet patchSet , com.google.gerrit.reviewdb.server.ReviewDb db ) { }
private void onReply ( ) { if ( com.google.gerrit.client.Gerrit.isSignedIn ( ) ) { replyAction.onReply ( null ) ; } else { com.google.gerrit.client.Gerrit.doSignIn ( getToken ( ) ) ; } }
public T open ( ) throws com.google.gwtorm.server.OrmException { return implFactory.open ( ) ; }
public com.google.gerrit.server.CurrentUser getCurrentUser ( ) { return user ; }
public void onSuccess ( final com.google.gerrit.common.data.HostPageData result ) { com.google.gerrit.client.Gerrit.myConfig = result.config ; if ( ( result.account ) != null ) { com.google.gerrit.client.Gerrit.myAccount = result.account ; com.google.gerrit.client.Gerrit.applyUserPreferences ( ) ; } onModuleLoad2 ( gStarting ) ; }
void onUnmarkPrivate ( @ java.lang.SuppressWarnings ( value = "unused" ) com.google.gwt.event.dom.client.ClickEvent e ) { com.google.gerrit.client.change.ChangeActions.unmarkPrivate ( project , changeId , unmarkPrivate ) ; }
public void setTabIndex ( int index ) { if ( ( focusy ) != null ) { focusy.setTabIndex ( index ) ; } }
private static boolean autoReindexIfStale ( org.eclipse.jgit.lib.Config cfg ) { return cfg.getBoolean ( "index" , null , "autoReindexIfStale" , true ) ; }
public com.google.gerrit.extensions.restapi.RestView < com.google.gerrit.server.change.RevisionResource > list ( ) { return list ; }
protected void configureCommands ( ) { command ( "print" ) . to ( com.google.gerrit.plugins.PrintHelloWorldCommand.class ) ; }
public void modifyFile ( java.lang.String filePath , com.google.gerrit.extensions.restapi.RawInput newContent ) throws com.google.gerrit.extensions.restapi.RestApiException { try { changeEditsPut.apply ( changeResource , filePath , newContent ) ; } catch ( java.lang.Exception e ) { throw com.google.gerrit.server.api.ApiUtil.asRestApiException ( "Cannot modify file of change edit" , e ) ; } }
public void onSuccess ( com.google.gerrit.client.rpc.NativeString b64 ) { if ( b64 != null ) { wrapped.onSuccess ( com.google.gerrit.client.changes.ChangeFileApi.b64decode ( b64.asString ( ) ) ) ; } }
public void setUp ( ) throws java.lang.Exception { com.google.gerrit.acceptance.GitUtil.fetch ( testRepo , ( ( com.google.gerrit.reviewdb.client.RefNames.REFS_CONFIG ) + ":refs/heads/config" ) ) ; testRepo.reset ( "refs/heads/config" ) ; }
public void testInvalidSchemeWithBackreference ( ) { try { new com.google.gwtexpui.safehtml.client.LinkFindReplace ( ".*(script:[^;]*)" , "java$1" ) . replace ( "Look at this script: alert(1);" ) ; org.junit.Assert.fail ( "Expected IllegalStateException" ) ; } catch ( java.lang.IllegalArgumentException expected ) { } }
public static com.google.gerrit.reviewdb.client.Account.Id fromRefSuffix ( java.lang.String name ) { java.lang.Integer id = com.google.gerrit.reviewdb.client.RefNames.parseRefSuffix ( name ) ; return id != null ? new com.google.gerrit.reviewdb.client.Account.Id ( id ) : null ; }
public void checkChanges ( java.lang.Iterable < com.google.gerrit.reviewdb.client.Change.Id > changeIds ) throws java.lang.Exception { checkActual ( readExpected ( changeIds ) , new java.util.ArrayList < java.lang.String > ( ) ) ; }
public void addTo ( org.eclipse.jgit.lib.BatchRefUpdate bru ) { for ( org.eclipse.jgit.transport.ReceiveCommand cmd : commands.values ( ) ) { bru.addCommand ( cmd ) ; } }
public void execute ( ) { assert ( selfWidget ) != null ; assert ( widgetManager ) != null ; selfWidget.changed ( ) ; widgetManager.resizePaddingWidget ( ) ; }
private static java.lang.String checkName ( java.lang.String name ) { com.google.common.base.CharMatcher m = com.google.common.base.CharMatcher.anyOf ( "abcdefghijklmnopqrstuvwxyz0123456789_" ) ; com.google.common.base.Preconditions.checkArgument ( ( ( name != null ) && ( m.matchesAllOf ( name ) ) ) , "illegal field name: %s" , name ) ; return name ; }
public boolean isEnabled ( java.lang.String project , java.lang.String branch ) { return true ; }
public static java.lang.String getPluginName ( java.io.File srcFile ) throws java.io.IOException { return com.google.common.base.Objects.firstNonNull ( com.google.gerrit.server.plugins.PluginLoader.getGerritPluginName ( srcFile ) , com.google.gerrit.server.plugins.PluginLoader.nameOf ( srcFile ) ) ; }
public boolean enabled ( ) { return ( writeChanges ( ) ) || ( readChanges ( ) ) ; }
private void cancel ( final javax.servlet.http.HttpServletRequest req , final javax.servlet.http.HttpServletResponse rsp ) throws java.io.IOException { callback ( req , rsp ) ; }
public static boolean isDefaultDashboard ( @ com.google.gerrit.common.Nullable java.lang.String id ) { return com.google.gerrit.server.project.DashboardsCollection.DEFAULT_DASHBOARD_NAME.equals ( id ) ; }
public void setFile ( final java.lang.String pattern ) { file = pattern ; }
java.lang.String changeWithNoRevisions ( int changeId ) ;
public void configure ( ) { listener ( ) . to ( com.google.gerrit.lucene.LuceneVersionManager.class ) ; }
protected java.lang.Integer getValueInt ( com.google.gerrit.server.query.change.ChangeData changeData ) throws com.google.gwtorm.server.OrmException { return ChangeField.ADDED.get ( changeData ) ; }
private java.util.List < com.google.gerrit.server.query.change.ChangeData > getForOpenChange ( com.google.gerrit.reviewdb.client.Change c ) throws com.google.gwtorm.server.OrmException , java.io.IOException { com.google.gerrit.server.git.ChangeSet cs = mergeSuperSet.completeChangeSet ( dbProvider.get ( ) , c ) ; return cs.changes ( ) . asList ( ) ; }
java.lang.String patchSets ( int currentlyViewedPatchSet , int currentPatchSet ) ;
public java.util.List < com.google.gerrit.server.query.change.ChangeData > byCommit ( org.eclipse.jgit.lib.ObjectId id ) throws com.google.gwtorm.server.OrmException { return query ( com.google.gerrit.server.query.change.InternalChangeQuery.commit ( id ) ) ; }
public void setUpMocks ( ) { servlet = new com.ericsson.gerrit.plugins.highavailability.forwarder.rest.IndexAccountRestApiServlet ( indexerMock ) ; id = new com.google.gerrit.reviewdb.client.Account.Id ( com.ericsson.gerrit.plugins.highavailability.forwarder.rest.IndexAccountRestApiServletTest.ACCOUNT_NUMBER ) ; org.mockito.Mockito.when ( requestMock.getPathInfo ( ) ) . thenReturn ( ( "/index/account/" + ( com.ericsson.gerrit.plugins.highavailability.forwarder.rest.IndexAccountRestApiServletTest.ACCOUNT_NUMBER ) ) ) ; }
public static com.google.gerrit.client.rpc.RestApi editWithCommands ( @ com.google.gerrit.common.Nullable java.lang.String project , int id ) { return com.google.gerrit.client.changes.ChangeApi.edit ( project , id ) . addParameterTrue ( "download-commands" ) ; }
public static java.lang.String getUserName ( java.util.Collection < com.google.gerrit.reviewdb.client.AccountExternalId > ids ) { for ( com.google.gerrit.reviewdb.client.AccountExternalId id : ids ) { if ( id.isScheme ( com.google.gerrit.reviewdb.client.AccountExternalId.SCHEME_USERNAME ) ) { return id.getSchemeRest ( ) ; } } return null ; }
private void blockForcePush ( ) throws java.lang.Exception { block ( Permission.PUSH , com.google.gerrit.server.group.SystemGroupBackend.ANONYMOUS_USERS , "refs/heads/*" ) . setForce ( true ) ; }
public void testEmptyQuery ( ) throws com.google.gwtorm.schema.QueryParseException { org.junit.Assert.assertNull ( parse ( "" ) ) ; }
public void createProjectFooBar ( ) throws com.google.gerrit.extensions.restapi.RestApiException { com.google.gerrit.extensions.api.projects.ProjectInput in = new com.google.gerrit.extensions.api.projects.ProjectInput ( ) ; in.name = "foo" ; gApi.projects ( ) . name ( "bar" ) . create ( in ) ; }
private boolean inProject ( final com.google.gerrit.reviewdb.client.Change change ) { if ( ( projectControl ) == null ) { return true ; } return projectControl.getProject ( ) . getNameKey ( ) . equals ( change.getProject ( ) ) ; }
private com.google.gerrit.reviewdb.client.PatchSetApproval copy ( com.google.gerrit.reviewdb.client.PatchSetApproval src , com.google.gerrit.server.project.ChangeControl ctl ) { return new com.google.gerrit.reviewdb.client.PatchSetApproval ( src.getPatchSetId ( ) , src ) ; }
public int getCost ( ) { return 1 ; }
com.google.gerrit.extensions.client.Side getStoredSideFromDisplaySide ( com.google.gerrit.client.diff.DisplaySide side ) { if ( ( side == ( DisplaySide.A ) ) && ( ( ( base ) == null ) || ( ( base.get ( ) ) < 0 ) ) ) { return com.google.gerrit.extensions.client.Side.PARENT ; } return com.google.gerrit.extensions.client.Side.REVISION ; }
public void doChangeAbandonedHook ( com.google.gerrit.reviewdb.client.Change change , com.google.gerrit.reviewdb.client.Account account , java.lang.String reason , com.google.gerrit.reviewdb.server.ReviewDb db ) throws com.google.gwtorm.server.OrmException ;
private void assertGone ( javax.servlet.http.HttpServletRequest req ) throws java.lang.Exception { com.google.gitiles.FakeHttpServletResponse res = new com.google.gitiles.FakeHttpServletResponse ( ) ; servlet.service ( req , res ) ; org.junit.Assert.assertEquals ( javax.servlet.http.HttpServletResponse.SC_GONE , res.getStatus ( ) ) ; }
public com.google.gerrit.server.account.AccountInfo apply ( com.google.gerrit.server.group.MemberResource resource , com.google.gerrit.server.group.AddMembers.PutMember.Input input ) throws com.google.gwtorm.server.OrmException { return get.apply ( resource ) ; }
public void setUp ( ) throws java.lang.Exception { config = new org.eclipse.jgit.lib.Config ( ) ; ident = new org.eclipse.jgit.lib.PersonIdent ( "NAME" , "e@email" , 0 , 0 ) ; accountCache = org.easymock.EasyMock.createStrictMock ( com.google.gerrit.server.account.AccountCache.class ) ; }
private void assertIsHealthy ( ) { javax.servlet.http.HttpServletResponse responseMock = org.mockito.Mockito.mock ( javax.servlet.http.HttpServletResponse.class ) ; servlet.doGet ( null , responseMock ) ; org.mockito.Mockito.verify ( responseMock ) . setStatus ( javax.servlet.http.HttpServletResponse.SC_NO_CONTENT ) ; }
protected void onUnload ( ) { if ( ( regSignOut ) != null ) { regSignOut.removeHandler ( ) ; regSignOut = null ; } super . onUnload ( ) ; }
public void markKeyInvalid ( com.google.gerrit.reviewdb.client.Account.Id accountId , int seq ) throws java.io.IOException , org.eclipse.jgit.errors.ConfigInvalidException { com.google.gerrit.server.account.VersionedAuthorizedKeys authorizedKeys = read ( accountId ) ; if ( authorizedKeys.markKeyInvalid ( seq ) ) { commit ( authorizedKeys ) ; } }
public void testGcWithoutCapability_Error ( ) throws com.google.gwtorm.server.OrmException , com.jcraft.jsch.JSchException , java.io.IOException { com.google.gerrit.acceptance.SshSession s = new com.google.gerrit.acceptance.SshSession ( server , accounts.create ( "user" , "user@example.com" , "User" ) ) ; s.exec ( "gerrit gc --all" ) ; assertError ( "fatal: user does not have \"runGC\" capability." , s.getError ( ) ) ; }
public void onFailure ( final java.lang.Throwable caught ) { super . onFailure ( caught ) ; enable ( true ) ; }
protected com.google.gerrit.server.change.ChangeInserter newChange ( org.eclipse.jgit.junit.TestRepository < com.google.gerrit.testutil.InMemoryRepositoryManager.Repo > repo ) throws java.lang.Exception { return newChange ( repo , null , null , null , null ) ; }
private void validateReindexerNotRunning ( ) throws com.google.gerrit.lucene.ReindexerAlreadyRunningException { if ( ( ( reindexer ) != null ) && ( reindexer.isRunning ( ) ) ) { throw new com.google.gerrit.lucene.ReindexerAlreadyRunningException ( ) ; } }
public void onRevisionCreated ( com.google.gerrit.extensions.events.RevisionCreatedListener.Event event ) { com.google.gerrit.extensions.common.ChangeInfo c = event.getChange ( ) ; onEvent ( new com.google.gerrit.reviewdb.client.Project.NameKey ( c.project ) , c._number ) ; }
public void setUp ( ) throws java.lang.Exception { block ( Permission.PUSH , com.google.gerrit.server.group.SystemGroupBackend.ANONYMOUS_USERS , "refs/drafts/*" ) ; }
public void onMouseMove ( com.google.gwt.event.dom.client.MouseMoveEvent event ) { resizePaddingWidget ( ) ; }
private InternalGroupCreation.Builder getPrefilledGroupCreationBuilder ( ) { return com.google.gerrit.server.group.db.InternalGroupCreation.builder ( ) . setGroupUUID ( groupUuid ) . setNameKey ( groupName ) . setId ( groupId ) ; }
protected void run ( ) throws java.lang.Exception { processor.query ( com.google.gerrit.sshd.commands.Query.join ( query , " " ) ) ; }
protected void add ( final com.google.gerrit.server.mail.RecipientType rt , final com.google.gerrit.reviewdb.UserIdentity who ) { if ( ( who != null ) && ( ( who.getAccount ( ) ) != null ) ) { add ( rt , who.getAccount ( ) ) ; } }
abstract com.google.gerrit.httpd.raw.BuildSystem.Label gwtZipLabel ( java.lang.String agent ) ;
public com.google.gerrit.server.project.ChangeControl validateFor ( com.google.gerrit.reviewdb.server.ReviewDb db , com.google.gerrit.reviewdb.client.Change.Id changeId , com.google.gerrit.server.CurrentUser user ) throws com.google.gerrit.server.project.NoSuchChangeException , com.google.gwtorm.server.OrmException { com.google.gerrit.server.project.ChangeControl ctl = changeFinder.findOne ( changeId , user ) ; return validateFor ( db , ctl.getChange ( ) , user ) ; }
private boolean canRunReceivePack ( ) { for ( com.google.gerrit.reviewdb.client.AccountGroup.UUID group : receiveGroups ) { if ( match ( group ) ) { return true ; } } return false ; }
public static void detail ( int id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gerrit.client.changes.ChangeInfo > cb ) { com.google.gerrit.client.changes.ChangeApi.detail ( id ) . get ( cb ) ; }
public int compareTo ( com.google.gerrit.client.diff.SideBySideCommentGroup o ) { if ( ( side ) == ( o.side ) ) { return ( line ) - ( o.line ) ; } throw new java.lang.IllegalStateException ( "Cannot compare SideBySideCommentGroup with different sides" ) ; }
public com.google.gerrit.reviewdb.client.Change update ( com.google.gerrit.reviewdb.client.Change change ) { if ( change.getStatus ( ) . isOpen ( ) ) { change.setStatus ( Change.Status.SUBMITTED ) ; change.setLastUpdatedOn ( timestamp ) ; return change ; } return null ; }
public java.lang.String call ( ) throws java.lang.Exception { if ( check.equals ( Check.ACCESS ) ) return healthCheckAccess ( ) ; return healthCheckSysinfo ( ) ; }
private static < K , V > com.google.common.cache.CacheBuilder < K , V > newCacheBuilder ( ) { return ( ( com.google.common.cache.CacheBuilder < K , V > ) ( com.google.common.cache.CacheBuilder.newBuilder ( ) ) ) ; }
public void onSuccess ( ) { com.google.gerrit.client.Gerrit.display ( token , new com.google.gerrit.client.diff.SideBySide ( baseId , id.getParentKey ( ) , id.get ( ) , side , line ) ) ; }
public io.fd.maintainer.plugin.service.dto.PluginBranchSpecificSettings.PluginSettingsBuilder setFileRef ( final java.lang.String fileRef ) { this . fileRef = fileRef ; return this ; }
public final native void setCh ( int ch ) ;
public static com.google.gerrit.client.DiffObject base ( ) { return new com.google.gerrit.client.DiffObject ( false ) ; }
private PatchSet.Id getPatchSetId ( com.google.gerrit.acceptance.GitUtil.Commit c ) throws com.google.gwtorm.server.OrmException { return getChange ( c ) . change ( ) . currentPatchSetId ( ) ; }
public com.google.gerrit.server.git.validators.CommitValidators forMergedCommits ( com.google.gerrit.server.project.RefControl refControl ) { return new com.google.gerrit.server.git.validators.CommitValidators ( com.google.common.collect.ImmutableList.of ( new com.google.gerrit.server.git.validators.CommitValidators.UploadMergesPermissionValidator ( refControl ) , new com.google.gerrit.server.git.validators.CommitValidators.AuthorUploaderValidator ( refControl , canonicalWebUrl ) , new com.google.gerrit.server.git.validators.CommitValidators.CommitterUploaderValidator ( refControl , canonicalWebUrl ) ) ) ; }
com.google.gerrit.client.reviewdb.AccountGroup get ( com.google.gerrit.client.reviewdb.AccountGroup.Id id ) throws com.google.gwtorm.client.OrmException ;
private boolean canUploadMerges ( ) { return projectControl.controlForRef ( ( "refs/for/" + ( refName ) ) ) . canPerform ( Permission.PUSH_MERGE ) ; }
private java.util.Collection < com.google.gerrit.extensions.common.AccountInfo > suggestAccounts ( com.google.gerrit.server.change.SuggestReviewers suggestReviewers , com.google.gerrit.server.ReviewersUtil.VisibilityControl visibilityControl ) throws com.google.gwtorm.server.OrmException { com.google.gerrit.server.index.account.AccountIndex searchIndex = indexes.getSearchIndex ( ) ; if ( searchIndex != null ) { return suggestAccountsFromIndex ( suggestReviewers , visibilityControl ) ; } return suggestAccountsFromDb ( suggestReviewers , visibilityControl ) ; }
public com.google.gerrit.reviewdb.Project.NameKey getProjectNameKey ( ) { return projectName ; }
public static boolean isRefsEdit ( java.lang.String ref ) { return ( ( ref != null ) && ( ref.startsWith ( com.google.gerrit.reviewdb.client.RefNames.REFS_USERS ) ) ) && ( ref.contains ( com.google.gerrit.reviewdb.client.RefNames.EDIT_PREFIX ) ) ; }
com.google.gerrit.server.changedetail.RestoreChange create ( com.google.gerrit.reviewdb.client.Change.Id changeId , java.lang.String changeComment ) ;
static java.lang.String get ( final java.lang.String name ) { return com.google.gwtjsonrpc.server.JsonServlet.< com.google.gwtjsonrpc.server.ActiveCall > getCurrentCall ( ) . getCookie ( name ) ; }
com.google.gerrit.client.reviewdb.Project get ( com.google.gerrit.client.reviewdb.Project.NameKey name ) throws com.google.gwtorm.client.OrmException ;
public static < T > com.google.gerrit.server.query.Predicate < T > and ( final com.google.gerrit.server.query.Predicate < T > ... that ) { if ( ( that.length ) == 1 ) { return that [ 0 ] ; } return new com.google.gerrit.server.query.AndPredicate < T > ( that ) ; }
static com.google.gerrit.extensions.restapi.Response < com.google.gerrit.extensions.common.ChangeInfo > cache ( com.google.gerrit.extensions.common.ChangeInfo res ) { return com.google.gerrit.extensions.restapi.Response.ok ( res ) . caching ( com.google.gerrit.extensions.restapi.CacheControl.PRIVATE ( 0 , java.util.concurrent.TimeUnit.SECONDS ) . setMustRevalidate ( ) ) ; }
public RefUpdate.Result modifyFile ( com.google.gerrit.server.edit.ChangeEdit edit , java.lang.String file , com.google.gerrit.extensions.restapi.RawInput content ) throws com.google.gerrit.extensions.restapi.AuthException , com.google.gerrit.server.project.InvalidChangeOperationException , java.io.IOException { return modify ( com.google.gerrit.server.edit.ChangeEditModifier.TreeOperation.CHANGE_ENTRY , edit , file , null , content ) ; }
public void setUp ( ) throws java.lang.Exception { lifecycle = new com.google.gerrit.lifecycle.LifecycleManager ( ) ; new com.google.gerrit.testutil.InMemoryModule ( ) . inject ( this ) ; lifecycle.start ( ) ; }
public static void deleteChange ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwt.core.client.JavaScriptObject > cb ) { com.google.gerrit.client.changes.ChangeApi.change ( project , id ) . delete ( cb ) ; }
void doLinkIdentity ( ) { final com.google.gerrit.client.SignInDialog d = new com.google.gerrit.client.SignInDialog ( SignInDialog.Mode.LINK_IDENTIY ) ; d.center ( ) ; }
java.util.List < com.google.gerrit.extensions.common.ChangeInfo > submittedTogether ( ) throws com.google.gerrit.extensions.restapi.RestApiException ;
public void copyAllScoresIfNoChange ( ) throws java.lang.Exception { com.google.gerrit.acceptance.PushOneCommit.Result patchSet = readyPatchSetForNoChangeRebase ( ) ; rebase ( patchSet ) ; assertApproval ( patchSet , 1 ) ; }
void onMatchBrackets ( com.google.gwt.event.logical.shared.ValueChangeEvent < java.lang.Boolean > e ) { prefs.matchBrackets ( e.getValue ( ) ) ; if ( ( view ) != null ) { view.getEditor ( ) . setOption ( "matchBrackets" , prefs.matchBrackets ( ) ) ; } }
public static java.lang.String refsDraftCommentsPrefix ( com.google.gerrit.reviewdb.client.Change.Id changeId ) { return com.google.gerrit.reviewdb.client.RefNames.buildRefsPrefix ( com.google.gerrit.reviewdb.client.RefNames.REFS_DRAFT_COMMENTS , changeId.get ( ) ) . toString ( ) ; }
public static com.google.gerrit.extensions.client.Side fromShort ( short s ) { if ( s <= 0 ) { return com.google.gerrit.extensions.client.Side.PARENT ; } else if ( s == 1 ) { return com.google.gerrit.extensions.client.Side.REVISION ; } return null ; }
public final native boolean value ( ) ;
public com.google.gerrit.extensions.api.projects.Projects.ListRequest withAll ( boolean all ) { this . all = all ; return this ; }
private static java.lang.String replace ( java.lang.String project , java.lang.String input ) { return input == null ? input : input.replace ( "${project}" , project ) ; }
private void grantDelete ( ) throws java.lang.Exception { allow ( "refs/tags/*" , Permission.DELETE , com.google.gerrit.server.group.SystemGroupBackend.ANONYMOUS_USERS ) ; }
public void set ( java.lang.String newValue ) { uuid = newValue ; }
private static void runGerrit ( java.lang.String ... args ) throws java.lang.Exception { com.google.common.truth.Truth.assertThat ( com.google.gerrit.launcher.GerritLauncher.mainImpl ( args ) ) . isEqualTo ( 0 ) ; }
void evictAfterRename ( com.google.gerrit.reviewdb.client.AccountGroup.NameKey oldName ) throws java.io.IOException ;
default void onBeginNegotiate ( org.eclipse.jgit.lib.Repository repository , com.google.gerrit.reviewdb.client.Project project , java.lang.String remoteHost , org.eclipse.jgit.transport.UploadPack up , java.util.Collection < ? extends org.eclipse.jgit.lib.ObjectId > wants , int cntOffered ) throws com.google.gerrit.server.validators.ValidationException { }
protected com.google.gerrit.reviewdb.client.Change newChange ( ) { return com.google.gerrit.testutil.TestChanges.newChange ( project , changeOwner.getAccountId ( ) ) ; }
protected com.google.gerrit.server.notedb.ChangeNotes newNotes ( com.google.gerrit.reviewdb.client.Change c ) throws com.google.gwtorm.server.OrmException { return new com.google.gerrit.server.notedb.ChangeNotes ( repoManager , com.google.gerrit.server.notedb.AbstractChangeNotesTest.MIGRATION , allUsers , c.getProject ( ) , c ) . load ( ) ; }
private static long round ( long n , long unit ) { return ( n + ( unit / 2 ) ) / unit ; }
static boolean dryRun ( com.google.gerrit.server.git.strategy.SubmitDryRun.Arguments args , org.eclipse.jgit.lib.Repository repo , com.google.gerrit.server.git.CodeReviewCommit mergeTip , com.google.gerrit.server.git.CodeReviewCommit toMerge ) throws com.google.gerrit.server.git.IntegrationException { return ( ! ( args.mergeUtil.hasMissingDependencies ( args.mergeSorter , toMerge ) ) ) && ( args.mergeUtil.canMerge ( args.mergeSorter , repo , mergeTip , toMerge ) ) ; }
protected < R extends com.google.gerrit.extensions.restapi.RestResource > com.google.gerrit.extensions.restapi.RestApiModule.ModifyViewBinder < R > post ( com.google.inject.TypeLiteral < com.google.gerrit.extensions.restapi.RestView < R > > viewType ) { return new com.google.gerrit.extensions.restapi.RestApiModule.ModifyViewBinder ( view ( viewType , com.google.gerrit.extensions.restapi.RestApiModule.POST , "/" ) ) ; }
public static java.lang.String toPatch ( java.lang.String type , com.google.gerrit.reviewdb.client.PatchSet.Id diffBase , com.google.gerrit.reviewdb.client.Patch.Key id ) { return com.google.gerrit.client.Dispatcher.toPatch ( type , diffBase , id.getParentKey ( ) , id.get ( ) , null , 0 ) ; }
private static void dispatchHistoryHooks ( java.lang.String token ) { com.google.gerrit.client.api.ApiGlue.fireEvent ( "history" , token ) ; }
public void testNonIndexPredicate ( ) throws java.lang.Exception { com.google.gerrit.server.query.Predicate < com.google.gerrit.server.query.change.ChangeData > in = parse ( "foo:a" ) ; org.junit.Assert.assertSame ( in , rewrite ( in ) ) ; }
private org.eclipse.jgit.lib.Repository getRepository ( ) throws java.io.IOException { initRepository ( ) ; return repo ; }
void setLineNumberEmpty ( com.google.gerrit.client.diff.DisplaySide side , int cmLine ) { setLineNumber ( side , cmLine , null , UnifiedTable.style.unifiedLineNumberEmpty ( ) ) ; }
public static org.apache.lucene.index.Term idTerm ( com.google.gerrit.reviewdb.client.Change.Id id ) { return com.google.gerrit.lucene.QueryBuilder.intTerm ( com.google.gerrit.lucene.QueryBuilder.ID_FIELD , id.get ( ) ) ; }
private java.lang.String formatLabelValue ( short value ) { if ( value > 0 ) { return "+" + value ; } else { return java.lang.Short.toString ( value ) ; } }
public com.google.gerrit.reviewdb.client.Change update ( com.google.gerrit.reviewdb.client.Change change ) { if ( ( change.getStatus ( ) ) == ( Change.Status.DRAFT ) ) { change.setStatus ( Change.Status.NEW ) ; com.google.gerrit.server.ChangeUtil.updated ( change ) ; } return change ; }
default void onPreUpload ( org.eclipse.jgit.lib.Repository repository , com.google.gerrit.reviewdb.client.Project project , java.lang.String remoteHost , org.eclipse.jgit.transport.UploadPack up , java.util.Collection < ? extends org.eclipse.jgit.lib.ObjectId > wants , java.util.Collection < ? extends org.eclipse.jgit.lib.ObjectId > haves ) throws com.google.gerrit.server.validators.ValidationException { }
public void login ( com.google.gerrit.server.account.AuthResult res , boolean rememberMe ) ;
public com.google.gerrit.reviewdb.client.Change update ( com.google.gerrit.reviewdb.client.Change change ) { if ( change.getStatus ( ) . isOpen ( ) ) { change.setCurrentPatchSet ( info ) ; change.setStatus ( Change.Status.MERGED ) ; com.google.gerrit.server.ChangeUtil.updated ( change ) ; } return change ; }
private void removePushFromRefsTags ( ) throws java.lang.Exception { removePermission ( project , "refs/tags/*" , Permission.PUSH ) ; }
public void configure ( ) { bind ( com.google.gerrit.server.CurrentUser.class ) . toInstance ( user ) ; }
private java.util.Map < java.lang.String , com.google.gitiles.RefServlet.RefJsonData > buildRefJson ( java.lang.String path ) throws java.lang.Exception { return buildJson ( path , new com.google.gson.reflect.TypeToken < java.util.Map < java.lang.String , com.google.gitiles.RefServlet.RefJsonData > > ( ) { } ) ; }
public static void rebaseEdit ( @ com.google.gerrit.common.Nullable java.lang.String project , int id , com.google.gwt.user.client.rpc.AsyncCallback < com.google.gwt.core.client.JavaScriptObject > cb ) { com.google.gwt.core.client.JavaScriptObject in = com.google.gwt.core.client.JavaScriptObject.createObject ( ) ; com.google.gerrit.client.changes.ChangeApi.change ( project , id ) . view ( "edit:rebase" ) . post ( in , cb ) ; }
public void onRpcComplete ( ) { if ( ( -- ( activeCalls ) ) == 0 ) { loading.setVisible ( false ) ; } }
public void setBranch ( final java.lang.String pattern ) { branch = pattern ; }
boolean canSubmit ( boolean isChangeOwner ) { if ( RefNames.REFS_CONFIG.equals ( refName ) ) { return projectControl.isOwner ( ) ; } return canPerform ( Permission.SUBMIT , isChangeOwner , false ) ; }
